
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Java-Starter/p/18938640" title="å‘å¸ƒäº 2025-06-20 16:08">
    <span role="heading" aria-level="2">åœ¨æœ¬åœ°è°ƒè¯• GitLab CI Pipeline (WSLæ­å»ºGitLab Runner)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-ä¸ºä»€ä¹ˆæœ¬åœ°æ­å»º">ğŸ’¡ ä¸ºä»€ä¹ˆæœ¬åœ°æ­å»º</h1>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å¯¹å…¬å¸è¿œç«¯Gitlab Serverçš„ä¸»åˆ†æ”¯ï¼ˆmainï¼‰æ²¡æœ‰æƒé™ã€‚åœ¨è°ƒè¯• CI/CD æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘ <code>.gitlab-ci.yml</code>ï¼Œç„¶åæäº¤ï¼Œå†è¿›è¡Œåˆå¹¶ï¼Œæ‰èƒ½æŸ¥çœ‹ Pipeline çš„æ‰§è¡Œç»“æœã€‚</p>
<p>GitLab Runner æœ‰æ—¶å€™æ˜¾ç¤ºâ€œ<strong>ç­‰å¾…ä¸­ï¼ˆPendingï¼‰</strong>â€ï¼Œè¿™é€šå¸¸æ˜¯å› ä¸ºèµ„æºæœ‰é™ï¼Œå…¶ä»–äººä¹Ÿæœ‰å¹¶è¡Œçš„ Pipeline ä»»åŠ¡ã€‚</p>
<p>åœ¨ Windows ä¸Šåˆ›å»º GitLab ç¯å¢ƒå’Œ GitLab Runner å¹¶ä¸å®¹æ˜“ã€‚</p>
<p>ç”±äºæˆ‘ä»¬ä¸€èˆ¬ä¸ä½¿ç”¨ Linux å‘è¡Œç‰ˆä½œä¸ºä¸»æ“ä½œç³»ç»Ÿï¼Œ<strong>WSL æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<hr>
<h1 id="ï¸-ä½¿ç”¨-wsl-å’Œæœ¬åœ°-gitlab-runner-æ­å»º-gitlab-cicd">ğŸ› ï¸ ä½¿ç”¨ WSL å’Œæœ¬åœ° GitLab Runner æ­å»º GitLab CI/CD</h1>
<h2 id="-å‰ææ¡ä»¶">ğŸ“¦ å‰ææ¡ä»¶</h2>
<p>éœ€è¦å®‰è£… WSLï¼ˆä¾‹å¦‚ï¼šUbuntu 22.04.5 LTSï¼‰ã€‚</p>
<p>å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…ï¼š</p>
<pre><code class="language-bash">sudo apt update
sudo apt install -y curl openssh-server ca-certificates tzdata perl
sudo apt install -y postfix
</code></pre>
<hr>
<h2 id="-å®‰è£…-gitlab-ce">ğŸ”§ å®‰è£… GitLab CE</h2>
<h3 id="æ·»åŠ -gitlab-ä»“åº“">æ·»åŠ  GitLab ä»“åº“</h3>
<pre><code class="language-bash">curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
</code></pre>
<h3 id="å®‰è£…-gitlab-ce">å®‰è£… GitLab CE</h3>
<pre><code class="language-bash">sudo EXTERNAL_URL="http://localhost" apt-get install gitlab-ce
</code></pre>
<h3 id="å¯åŠ¨å¹¶é…ç½®-gitlab">å¯åŠ¨å¹¶é…ç½® GitLab</h3>
<pre><code class="language-bash">sudo gitlab-ctl reconfigure
sudo gitlab-ctl start
</code></pre>
<p>ğŸ“Œ <strong>é»˜è®¤ <code>root</code> ç”¨æˆ·çš„å¯†ç ä¿å­˜åœ¨ï¼š</strong><br>
<code>/etc/gitlab/initial_root_password</code></p>
<p>ğŸ”‘ <strong>å¯ä»¥åœ¨ä»¥ä¸‹é¡µé¢æ›´æ”¹å¯†ç ï¼š</strong><br>
<a href="http://localhost/-/user_settings/password/edit" target="_blank" rel="noopener nofollow">http://localhost/-/user_settings/password/edit</a><br>
â†’ ç¼–è¾‘ä¸ªäººèµ„æ–™ â†’ å¯†ç </p>
<h2 id="è¿™è®©ä½ æˆä¸º-gitlab-çš„-root-ç”¨æˆ·å¯¹äºå¿«é€Ÿæµ‹è¯•æ¥è¯´ä¸å†ä¼šé‡åˆ°æƒé™é—®é¢˜éå¸¸æ–¹ä¾¿">è¿™è®©ä½ æˆä¸º GitLab çš„ root ç”¨æˆ·ã€‚<br>
å¯¹äºå¿«é€Ÿæµ‹è¯•æ¥è¯´ï¼Œä¸å†ä¼šé‡åˆ°æƒé™é—®é¢˜ï¼Œéå¸¸æ–¹ä¾¿ã€‚<br>
<img src="https://img2024.cnblogs.com/blog/1201453/202506/1201453-20250620160211023-825484011.png" alt="" loading="lazy"></h2>
<h2 id="ï¸-å®‰è£…-gitlab-runner">âš™ï¸ å®‰è£… GitLab Runner</h2>
<h3 id="æ·»åŠ -gitlab-runner-ä»“åº“">æ·»åŠ  GitLab Runner ä»“åº“</h3>
<pre><code class="language-bash">curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
</code></pre>
<h3 id="å®‰è£…-gitlab-runner">å®‰è£… GitLab Runner</h3>
<pre><code class="language-bash">sudo apt-get install gitlab-runner
</code></pre>
<hr>
<h2 id="-æ³¨å†Œ-gitlab-runner">ğŸš€ æ³¨å†Œ GitLab Runner</h2>
<ol>
<li>æ‰“å¼€ï¼š<code>CI/CD &gt; Runners &gt; Create a new runner</code></li>
<li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li>
</ol>
<pre><code class="language-bash">gitlab-runner register --url http://localhost --token &lt;yourToken&gt;
</code></pre>
<p>âœ… <strong>é…ç½®å·²ä¿å­˜è‡³ï¼š</strong><br>
<code>/etc/gitlab-runner/config.toml</code></p>
<h3 id="éªŒè¯-runner-æ˜¯å¦æ­£å¸¸">éªŒè¯ Runner æ˜¯å¦æ­£å¸¸</h3>
<pre><code class="language-bash">sudo gitlab-runner verify
</code></pre>
<p>ğŸŒ <strong>æŸ¥çœ‹æ‰€æœ‰ Runnerï¼š</strong></p>
<pre><code class="language-bash">http://localhost/admin/runners
</code></pre>
<h2 id="_"><img src="https://img2024.cnblogs.com/blog/1201453/202506/1201453-20250620160423775-566016287.png" alt="" loading="lazy"></h2>
<h2 id="-ä½¿ç”¨-ip-è®¿é—®-gitlab">ğŸŒ ä½¿ç”¨ IP è®¿é—® GitLab</h2>
<h3 id="æŸ¥æ‰¾æœ¬æœº-ip-åœ°å€">æŸ¥æ‰¾æœ¬æœº IP åœ°å€</h3>
<pre><code class="language-bash">hostname -I
</code></pre>
<p>ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="language-bash">172.24.208.12
</code></pre>
<h3 id="ä¿®æ”¹-gitlab-é…ç½®æ–‡ä»¶">ä¿®æ”¹ GitLab é…ç½®æ–‡ä»¶</h3>
<pre><code class="language-bash">sudo vi /etc/gitlab/gitlab.rb
</code></pre>
<p>å°†ä»¥ä¸‹è¡Œä¿®æ”¹ä¸ºä½ çš„ IP åœ°å€ï¼š</p>
<pre><code class="language-ruby">external_url 'http://172.24.208.12'
</code></pre>
<h3 id="é‡æ–°é…ç½®-gitlab">é‡æ–°é…ç½® GitLab</h3>
<pre><code class="language-bash">sudo gitlab-ctl reconfigure
</code></pre>
<hr>
<p>ğŸ” ä¹‹åå¦‚æœPipelineä»»åŠ¡å¤±è´¥å¯ä»¥æ‰‹åŠ¨ç‚¹å‡» â€œRetryâ€ é‡æ–°è¿è¡Œ Pipelineã€‚</p>

</div>
<div id="MySignature" role="contentinfo">
    <div id="AllanboltSignature">        
<p id="PSignature" style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 60px; background: url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) #e5f1f4 no-repeat 1% 50%; font-family: å¾®è½¯é›…é»‘; font-size: 11px">            
<br> 
ä½œè€…ï¼š<a href="http://www.cnblogs.com/Java-Starter/" target="_blank">Restæ¢è·¯è€…</a>            
<br> 
å‡ºå¤„ï¼š<a href="http://www.cnblogs.com/Java-Starter/" target="_blank">http://www.cnblogs.com/Java-Starter/</a>
<br>æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„è¯·ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œè¯·åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥
<br>Githubï¼š<a href="https://github.com/cjy513203427">https://github.com/cjy513203427</a>    
</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-20 16:08">2025-06-20 16:08</span>&nbsp;
<a href="https://www.cnblogs.com/Java-Starter">Restæ¢è·¯è€…</a>&nbsp;
é˜…è¯»(<span id="post_view_count">2</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18938640);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18938640', targetLink: 'https://www.cnblogs.com/Java-Starter/p/18938640', title: 'åœ¨æœ¬åœ°è°ƒè¯• GitLab CI Pipeline (WSLæ­å»ºGitLab Runner)' })">ä¸¾æŠ¥</a>
</div>
        
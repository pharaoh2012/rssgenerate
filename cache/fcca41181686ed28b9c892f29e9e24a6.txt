
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Java-Starter/p/18938640" title="发布于 2025-06-20 16:08">
    <span role="heading" aria-level="2">在本地调试 GitLab CI Pipeline (WSL搭建GitLab Runner)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-为什么本地搭建">💡 为什么本地搭建</h1>
<p>有时候我们对公司远端Gitlab Server的主分支（main）没有权限。在调试 CI/CD 时，我们需要编辑 <code>.gitlab-ci.yml</code>，然后提交，再进行合并，才能查看 Pipeline 的执行结果。</p>
<p>GitLab Runner 有时候显示“<strong>等待中（Pending）</strong>”，这通常是因为资源有限，其他人也有并行的 Pipeline 任务。</p>
<p>在 Windows 上创建 GitLab 环境和 GitLab Runner 并不容易。</p>
<p>由于我们一般不使用 Linux 发行版作为主操作系统，<strong>WSL 是一个很好的解决方案</strong>。</p>
<hr>
<h1 id="️-使用-wsl-和本地-gitlab-runner-搭建-gitlab-cicd">🛠️ 使用 WSL 和本地 GitLab Runner 搭建 GitLab CI/CD</h1>
<h2 id="-前提条件">📦 前提条件</h2>
<p>需要安装 WSL（例如：Ubuntu 22.04.5 LTS）。</p>
<p>安装所需的软件包：</p>
<pre><code class="language-bash">sudo apt update
sudo apt install -y curl openssh-server ca-certificates tzdata perl
sudo apt install -y postfix
</code></pre>
<hr>
<h2 id="-安装-gitlab-ce">🔧 安装 GitLab CE</h2>
<h3 id="添加-gitlab-仓库">添加 GitLab 仓库</h3>
<pre><code class="language-bash">curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
</code></pre>
<h3 id="安装-gitlab-ce">安装 GitLab CE</h3>
<pre><code class="language-bash">sudo EXTERNAL_URL="http://localhost" apt-get install gitlab-ce
</code></pre>
<h3 id="启动并配置-gitlab">启动并配置 GitLab</h3>
<pre><code class="language-bash">sudo gitlab-ctl reconfigure
sudo gitlab-ctl start
</code></pre>
<p>📌 <strong>默认 <code>root</code> 用户的密码保存在：</strong><br>
<code>/etc/gitlab/initial_root_password</code></p>
<p>🔑 <strong>可以在以下页面更改密码：</strong><br>
<a href="http://localhost/-/user_settings/password/edit" target="_blank" rel="noopener nofollow">http://localhost/-/user_settings/password/edit</a><br>
→ 编辑个人资料 → 密码</p>
<h2 id="这让你成为-gitlab-的-root-用户对于快速测试来说不再会遇到权限问题非常方便">这让你成为 GitLab 的 root 用户。<br>
对于快速测试来说，不再会遇到权限问题，非常方便。<br>
<img src="https://img2024.cnblogs.com/blog/1201453/202506/1201453-20250620160211023-825484011.png" alt="" loading="lazy"></h2>
<h2 id="️-安装-gitlab-runner">⚙️ 安装 GitLab Runner</h2>
<h3 id="添加-gitlab-runner-仓库">添加 GitLab Runner 仓库</h3>
<pre><code class="language-bash">curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
</code></pre>
<h3 id="安装-gitlab-runner">安装 GitLab Runner</h3>
<pre><code class="language-bash">sudo apt-get install gitlab-runner
</code></pre>
<hr>
<h2 id="-注册-gitlab-runner">🚀 注册 GitLab Runner</h2>
<ol>
<li>打开：<code>CI/CD &gt; Runners &gt; Create a new runner</code></li>
<li>执行以下命令：</li>
</ol>
<pre><code class="language-bash">gitlab-runner register --url http://localhost --token &lt;yourToken&gt;
</code></pre>
<p>✅ <strong>配置已保存至：</strong><br>
<code>/etc/gitlab-runner/config.toml</code></p>
<h3 id="验证-runner-是否正常">验证 Runner 是否正常</h3>
<pre><code class="language-bash">sudo gitlab-runner verify
</code></pre>
<p>🌐 <strong>查看所有 Runner：</strong></p>
<pre><code class="language-bash">http://localhost/admin/runners
</code></pre>
<h2 id="_"><img src="https://img2024.cnblogs.com/blog/1201453/202506/1201453-20250620160423775-566016287.png" alt="" loading="lazy"></h2>
<h2 id="-使用-ip-访问-gitlab">🌍 使用 IP 访问 GitLab</h2>
<h3 id="查找本机-ip-地址">查找本机 IP 地址</h3>
<pre><code class="language-bash">hostname -I
</code></pre>
<p>示例输出：</p>
<pre><code class="language-bash">172.24.208.12
</code></pre>
<h3 id="修改-gitlab-配置文件">修改 GitLab 配置文件</h3>
<pre><code class="language-bash">sudo vi /etc/gitlab/gitlab.rb
</code></pre>
<p>将以下行修改为你的 IP 地址：</p>
<pre><code class="language-ruby">external_url 'http://172.24.208.12'
</code></pre>
<h3 id="重新配置-gitlab">重新配置 GitLab</h3>
<pre><code class="language-bash">sudo gitlab-ctl reconfigure
</code></pre>
<hr>
<p>🔁 之后如果Pipeline任务失败可以手动点击 “Retry” 重新运行 Pipeline。</p>

</div>
<div id="MySignature" role="contentinfo">
    <div id="AllanboltSignature">        
<p id="PSignature" style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 60px; background: url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) #e5f1f4 no-repeat 1% 50%; font-family: 微软雅黑; font-size: 11px">            
<br> 
作者：<a href="http://www.cnblogs.com/Java-Starter/" target="_blank">Rest探路者</a>            
<br> 
出处：<a href="http://www.cnblogs.com/Java-Starter/" target="_blank">http://www.cnblogs.com/Java-Starter/</a>
<br>本文版权归作者和博客园共有，欢迎转载，但未经作者同意请保留此段声明，请在文章页面明显位置给出原文连接
<br>Github：<a href="https://github.com/cjy513203427">https://github.com/cjy513203427</a>    
</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-20 16:08">2025-06-20 16:08</span>&nbsp;
<a href="https://www.cnblogs.com/Java-Starter">Rest探路者</a>&nbsp;
阅读(<span id="post_view_count">2</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18938640);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18938640', targetLink: 'https://www.cnblogs.com/Java-Starter/p/18938640', title: '在本地调试 GitLab CI Pipeline (WSL搭建GitLab Runner)' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/developer-tianyiyun/p/18742786" title="发布于 2025-02-28 10:50">
    <span role="heading" aria-level="2">浅谈Tox之一</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>本文分享自天翼云开发者社区《<a href="https://www.ctyun.cn/developer/article/430555546714181" rel="noopener nofollow">浅谈Tox之一</a>》，作者：Moonriver&nbsp;</p>
<p><strong>What is tox?</strong></p>
<p>tox是通用的virtualenv管理和测试命令行工具，可用于： &nbsp;</p>
<ol start="1">
<li>使用不同的Python版本和解释器检查您的软件包是否正确安装</li>
<li>在每个环境中运行测试，配置您选择的测试工具</li>
<li>充当持续集成服务器的前端，大大减少了样板文件并合并了CI和基于shell的测试。</li>
</ol>
<p><strong>Basic example</strong></p>
<p>首先，使用pip install tox安装tox。 然后将项目以及测试环境的基本信息放入位于setup.py文件旁边的tox.ini文件中：</p>
<p><img src="https://img2024.cnblogs.com/blog/2764337/202502/2764337-20250228105049651-1736646695.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>只需输入：tox，如上图tox.ini文件所示，即可对当前项目进行sdist打包，创建两个Python2.7和Python3.6的virtualenv环境，将sdist软件包安装到环境中，并在每个环境中进行测试。</p>
<p><strong>System overview</strong></p>
<p>tox大致分为以下几个阶段：</p>
<p>1. 配置</p>
<p>2. 包装（可选）</p>
<p>3. 环境</p>
<p>4. 报告</p>
<p><strong>配置-&gt;打包(可选)-&gt;环境-&gt;报告</strong></p>
<p><strong>1. </strong><strong>配置</strong></p>
<p>加载tox.ini并将其与命令行和操作系统环境变量中的选项合并。</p>
<p><strong>2. </strong><strong>打包（可选）</strong></p>
<p>通过调用python setup.py sdist创建当前项目的源代码库。</p>
<p><strong>3. </strong><strong>环境</strong></p>
<p>对于每个Tox环境执行以下操作：</p>
<p>环境创建——默认情况下使用virtualenv创建一个新的环境。 tox会使用环境名称（例如表示Python 2.7的py27和basepython配置值）和当前的操作系统PATH值来自动尝试查找有效的Python解释器版本。</p>
<p>install（可选）——安装deps配置部分中指定的环境依赖项，然后安装较早打包的源代码。 commands——以指定的顺序运行指定的命令。</p>
<p><strong>4. </strong><strong>报告——打印出每种tox环境的结果报告：</strong></p>
<p>____________________ summary ____________________</p>
<p>py27: commands succeeded</p>
<p>ERROR: &nbsp; py36: commands failed</p>
<p>只有所有环境都成功运行了，tox才会返回退出代码0（成功）。</p>
<p>tox将为您解决环境隔离问题：它将删除未通过passenv指定的所有操作系统环境变量。 此外，它还将更改PATH变量，以便您的命令在当前活动的Tox环境中首先解析。 通常，路径中的所有可执行文件都可以在命令中使用，但是如果没有通过whitelist_externals明确允许，tox将发出警告。</p>
<p><img src="https://img2024.cnblogs.com/blog/2764337/202502/2764337-20250228105049619-1591549407.png" alt="" style="display: block; margin-left: auto; margin-right: auto"></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0014916270405092593" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-28 10:51">2025-02-28 10:50</span>&nbsp;
<a href="https://www.cnblogs.com/developer-tianyiyun">天翼云开发者社区</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18742786" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18742786);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18742786', targetLink: 'https://www.cnblogs.com/developer-tianyiyun/p/18742786', title: '浅谈Tox之一' })">举报</a>
</div>
        
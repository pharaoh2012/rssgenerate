
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yswenli/p/18668372" title="发布于 2025-01-13 14:52">
    <span role="heading" aria-level="2">使用Nexus搭建nuget包服务器</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>最近流水线发布总是遇到nuget官方源或azure镜像源无法使用的情况，特别是下午或晚上的时间点；思来想去还是自行搭建一个nuget服务，因此本文记录了相关要点，希望能给大家多一个选择。</p>
<h2>一、获取 Nexus 镜像</h2>
<p><code>docker pull sonatype/nexus3</code></p>
<p>无法拉取镜像文件的，可以修改docker源</p>
<p><code>sudo tee /etc/docker/daemon.json &lt;&lt;EOF<br>{<br>&nbsp; &nbsp; "registry-mirrors": [<br>&nbsp; &nbsp; &nbsp; &nbsp; "https://docker.1ms.run",<br>&nbsp; &nbsp; &nbsp; &nbsp; "https://docker.xuanyuan.me",<br>&nbsp; &nbsp; ]<br>}<br>EOF<br>sudo systemctl daemon-reload<br>sudo systemctl restart docker</code></p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113115844014-1443643064.png"></p>
<p>&nbsp;</p>
<h2>二、创建并启动Nexus容器</h2>
<p><code><span class="hljs-built_in">cd /data01/docker-data/nexus<br>mkdir data<br>mkdir logs<br>chown -R 200 ./nexus<br>docker run -d --name nexus3 -p 12025:8081 --restart always -v /data01/docker-data/nexus/data:/nexus-data -v /data01/docker-data/nexus/logs:/nexus-logs -e TZ=Asia/Shanghai sonatype/nexus3</span></code></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113134019204-1777138150.png"></p>
<p>12025为nuget仓库准备的，12026为docker预留</p>
<h2>三、进入容器获取密码</h2>
<p>进入容器</p>
<p><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> nexus3 /bin/bash&nbsp;</code></p>
<p>进入nexus-data目录</p>
<p><code>cd /nexus-data</code></p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113134349878-292364630.png"></p>
<p>查看密码</p>
<p><code>cat admin.password&nbsp;</code></p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113142305818-51147062.png"></p>
<p>如上图所示，其实Nexus默认已经创建好了Nuget的仓库，并且是创建了3个不同类型的仓库：nuget-group，nuget-hosted，nuget.org-proxy</p>
<p><strong>nuget.org-proxy</strong></p>
<p>类型是proxy，表示代理仓库。我们向它请求包(package)的时候，如果本地有，它就从本地提供，如果本地没有，它会从nuget.org下载到本地，然后给我提供这个包。</p>
<p><strong>nuget-hosted</strong></p>
<p>类型是hosted，表示托管仓库。我们一般把自己开发的包上传到该仓库中。</p>
<p><strong>nuget-group</strong></p>
<p>类型是group，表示仓库组，它结合了nuget.org-proxy和nuget-hosted，能对外提供上述两者中的包。</p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113144752174-749080179.png"></p>
<p>在nuget-hosted中上传nuget包，如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113143540485-1997621449.png"></p>
<h3>四、在VS中使用Nuget包</h3>
<h4>1、 打开Visual Studio的Nuget管理器，进行设置<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h4>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113143614648-2072603271.png"></p>
<h4>2、添加私有Nuget仓库地址</h4>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113143931555-528323842.png"></p>
<h4>&nbsp;3、引用nuget包<button class="cnblogs-toc-button" title="显示目录导航" aria-expanded="false"></button></h4>
<p><img src="https://img2024.cnblogs.com/blog/542396/202501/542396-20250113144037241-79417255.png"></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    <div class="articleFooter">
<p>感谢您的阅读，如果您对我的博客所讲述的内容有兴趣，请继续关注我的后续博客，我是yswenli 。<span class="icon_smile"></span></p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.17763355981944445" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-16 22:08">2025-01-13 14:52</span>&nbsp;
<a href="https://www.cnblogs.com/yswenli">yswenli</a>&nbsp;
阅读(<span id="post_view_count">33</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18668372" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18668372);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18668372', targetLink: 'https://www.cnblogs.com/yswenli/p/18668372', title: '使用Nexus搭建nuget包服务器' })">举报</a>
</div>
        
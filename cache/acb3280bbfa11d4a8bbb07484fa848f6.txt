
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lindexi/p/19061411" title="发布于 2025-08-27 17:49">
    <span role="heading" aria-level="2">Windows 通过编辑注册表设置左右手使用习惯更改 Popup 弹出位置</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        本文告诉大家如何在通过更改注册表的设置，从而更改平板电脑设置 Tablet PC Settings 的左右手使用习惯 Handedness 的惯用左手和惯用右手选项
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>本文告诉大家如何在通过更改注册表的设置，从而更改平板电脑设置 Tablet PC Settings 的左右手使用习惯 Handedness 的惯用左手和惯用右手选项</p>



<p>博客园只做备份，文章发布了就极少更新，还请到我的主站阅读原文，避免获取到陈旧知识内容： <a href="https://blog.lindexi.com/post/Windows-%E9%80%9A%E8%BF%87%E7%BC%96%E8%BE%91%E6%B3%A8%E5%86%8C%E8%A1%A8%E8%AE%BE%E7%BD%AE%E5%B7%A6%E5%8F%B3%E6%89%8B%E4%BD%BF%E7%94%A8%E4%B9%A0%E6%83%AF%E6%9B%B4%E6%94%B9-Popup-%E5%BC%B9%E5%87%BA%E4%BD%8D%E7%BD%AE.html" target="_blank" rel="noopener nofollow">https://blog.lindexi.com/post/Windows-通过编辑注册表设置左右手使用习惯更改-Popup-弹出位置.html</a></p>
<p>在用户端，可以通过在运行里面，输入 <code>shell:::{80F3F1D5-FECA-45F3-BC32-752C152E456E}</code> 按下回车，可以进入平板电脑设置界面，中文版和英文版界面分别如下</p>

<p><img src="https://img2024.cnblogs.com/blog/1080237/202508/1080237-20250827174731367-2098061822.jpg" alt="" loading="lazy"></p>

<p><img src="https://img2024.cnblogs.com/blog/1080237/202508/1080237-20250827174731296-1685901276.jpg" alt="" loading="lazy"></p>
<p>这个选项将会影响 WPF 的 Popup 弹出的默认方向位置，以及所有的菜单的弹出方向位置</p>
<p>设置惯用左手时的 Popup 弹出行为如下：</p>

<p><img src="https://img2024.cnblogs.com/blog/1080237/202508/1080237-20250827174731418-835330222.jpg" alt="" loading="lazy"></p>
<p>设置惯用右手时的 Popup 弹出行为如下：</p>

<p><img src="https://img2024.cnblogs.com/blog/1080237/202508/1080237-20250827174731227-1705599359.jpg" alt="" loading="lazy"></p>
<p>通过注册表修改设置的方式是在运行里输入 <code>regedit</code> 打开注册表编辑，进入 <code>HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows</code> 路径，修改 <code>MenuDropAlignment</code> 选项。默认的 <code>MenuDropAlignment</code> 选项是 0 的值，不同的值对应如下</p>
<ul>
<li>0 ： 默认值，惯用左手</li>
<li>1 ： 惯用右手</li>
</ul>
<p>可通过更改 <code>HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows\MenuDropAlignment</code> 项从而修改用户设置，修改之后，需要重启才能生效</p>
<p>在 WPF 忽略此属性影响，可以使用如下方法</p>
<pre><code class="language-csharp">    public static class PopupHacks
    {
        private static FieldInfo? _menuDropAlignmentField;

        /// &lt;summary&gt;
        /// 禁用系统的菜单弹出方向设置，取消对应用程序的Popup弹出方向的影响
        /// &lt;/summary&gt;
        public static void DisableSystemMenuPopupAlignment()
        {
            _menuDropAlignmentField = typeof(SystemParameters).GetField("_menuDropAlignment", BindingFlags.NonPublic | BindingFlags.Static);
            System.Diagnostics.Debug.Assert(_menuDropAlignmentField != null);

            EnsureStandardPopupAlignment();
            SystemParameters.StaticPropertyChanged -= SystemParameters_StaticPropertyChanged;
            SystemParameters.StaticPropertyChanged += SystemParameters_StaticPropertyChanged;
        }

        private static void SystemParameters_StaticPropertyChanged(object? sender, PropertyChangedEventArgs e)
        {
            EnsureStandardPopupAlignment();
        }

        private static void EnsureStandardPopupAlignment()
        {
            if (SystemParameters.MenuDropAlignment)
            {
                _menuDropAlignmentField?.SetValue(null, false);
            }
        }
    }
</code></pre>
<p>更多请看 <a href="https://github.com/dotnet/wpf/issues/5944" target="_blank" rel="noopener nofollow">Popup element are reversed left and right in Windows 11 · Issue #5944 · dotnet/wpf</a></p>
<p>由于这个功能的入口在 Win11 里完全被干掉了。且即使注册表更改了，整个系统应用、甚至包括记事本等应用，再也不听这个设置了。我认为在 WPF 里面遵守这个规则只会坑到开发者，不如就废弃此功能。我给 WPF 写了一个提案，如果大家认同的话，还请帮我点一个赞支持一下，详细请看 <a href="https://github.com/dotnet/wpf/issues/11073" target="_blank" rel="noopener nofollow">https://github.com/dotnet/wpf/issues/11073</a></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>博客园博客只做备份，博客发布就不再更新，如果想看最新博客，请访问 https://blog.lindexi.com/</p>

<p>如图片看不见，请在浏览器开启不安全http内容兼容</p>

<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width: 0" src="https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png"></a><br>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。欢迎转载、使用、重新发布，但务必保留文章署名[林德熙](https://www.cnblogs.com/lindexi)(包含链接:https://www.cnblogs.com/lindexi )，不得用于商业目的，基于本文修改后的作品务必以相同的许可发布。如有任何疑问，请与我[联系](mailto:lindexi_gd@163.com)。
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-27 17:49">2025-08-27 17:49</span>&nbsp;
<a href="https://www.cnblogs.com/lindexi">lindexi</a>&nbsp;
阅读(<span id="post_view_count">76</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19061411);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19061411', targetLink: 'https://www.cnblogs.com/lindexi/p/19061411', title: 'Windows 通过编辑注册表设置左右手使用习惯更改 Popup 弹出位置' })">举报</a>
</div>
        
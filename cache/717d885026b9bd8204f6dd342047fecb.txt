
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/supermao12/p/18638282" title="发布于 2024-12-29 01:22">
    <span role="heading" aria-level="2">通过shadow来更改ubuntu密码，并且使用frp组网</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="局域网搜索">局域网搜索</h2>
<p>pings 所有设备找到在线设备并登录网页</p>
<pre><code class="language-powershell">:: 作者:mao 时间:2024 11.30
@echo off
chcp 65001 &gt;nul
:: 启用延迟环境变量扩展
setlocal enabledelayedexpansion

:: 检查是否提供了必要的参数
if "%~1"=="" (
    echo ================================
    echo 用法: %~nx0 网段 起始范围 结束范围
    echo 例如: %~nx0 192.168.1 10 30
    echo ================================
    exit /b
)

:: 将参数赋值给变量
set "network=%1"
set "start=%2"
set "end=%3"

:: 验证范围有效性
if %start% GTR %end% (
    echo ================================
    echo 错误: 起始范围不能大于结束范围。
    echo ================================
    exit /b
)

:: 启动测试
echo ================================
echo 正在测试 IP 范围: %network%.%start% 到 %network%.%end% 的主机...
echo ================================

:: 循环遍历范围并测试每个主机
for /l %%i in (%start%,1,%end%) do (
    set "currentIP=%network%.%%i"
    ping -n 3 -w 500 !currentIP! &gt;nul
    if errorlevel 1 (
        echo [警告] !currentIP! 不可达
    ) else (
        echo [信息] !currentIP! 在线
    )
)

:: 测试完成提示
echo ================================
echo 测试完成！
echo ================================
pause

</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202412/2415164-20241228225345687-767513989.png" alt="" loading="lazy"></p>
<h2 id="进行对网页的破解">进行对网页的破解</h2>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202412/2415164-20241228230549086-1064574719.png" alt="" loading="lazy"></p>
<p>通过暴力破解hydra Burp Suite python来达到破解网站密码，使用f12进行对网站的调试得到合适的表单格式和url</p>
<h2 id="进入文件管理系统">进入文件管理系统</h2>
<p>更改ubuntu的root密码<br>
在另一台Linux上生成加密过后的密码</p>
<pre><code class="language-powershell">[root@spo-st ~]# python -c 'import crypt; import getpass; pw = getpass.getpass("New password: "); print(crypt.crypt(pw, crypt.mksalt(crypt.METHOD_SHA512)))'
New password:
$6$vMn8LgRVE5f0cAsK$Df1E9n0pBxUSVA6SbrSzVx.pasNnEjtY98fWlMBsLgHHCdrjoAydvOx/CFUChm5rc7VUboxxarS5gHiAVnAOR/
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202412/2415164-20241229000358986-445349809.png" alt="" loading="lazy"><br>
进入shadow文件，更改对应root部分并保存</p>
<h2 id="添加新用户并提权">添加新用户并提权</h2>
<pre><code class="language-powershell">sudo adduser &lt;新用户名&gt;
sudo usermod -aG sudo &lt;新用户名&gt;
</code></pre>
<h2 id="ubuntu组网">ubuntu组网</h2>
<p>客户端操作</p>
<pre><code class="language-powershell">一定要知道自己的架构
两个frp版本要一致，架构可不同
root@hi3798mv100:/etc/apt# dpkg --print-architecture
armhf
root@hi3798mv100:/etc/apt# wget https://github.com/fatedier/frp/releases/download/v0.51.3/frp_0.51.3_linux_arm.tar.gz
tar -xzvf frp_0.51.3_linux_arm.tar.gz
cd frp_0.51.3_linux_arm
supermao@hi3798mv100:~/frp_0.51.3_linux_arm$ cat frps.ini
[common]
server_addr = 公网ip
server_port = 7000
token = cyb666
[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000

[hik]
type = tcp
local_ip = 192.168.0.118
local_port = 80
remote_port = 7899


./frpc -c ./frpc.ini

</code></pre>
<p>服务端操作</p>
<pre><code class="language-powershell">
[root@spo-st frp_0.51.3_linux_amd64]# cat frps.ini
[common]
bind_port = 7000
token = cyb666

./frps -c ./frps.ini

</code></pre>
<p>客户端设置自启动</p>
<pre><code class="language-powershell">[Unit]
Description=FRP Client Service
After=network.target

[Service]
ExecStart=/home/supermao/frp_0.51.3_linux_arm/frpc -c /home/supermao/frp_0.51.3_linux_arm/frpc.ini
Restart=always

[Install]
WantedBy=multi-user.target

</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.7025059642094907" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-29 01:23">2024-12-29 01:22</span>&nbsp;
<a href="https://www.cnblogs.com/supermao12">supermao12</a>&nbsp;
阅读(<span id="post_view_count">22</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18638282" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18638282);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18638282', targetLink: 'https://www.cnblogs.com/supermao12/p/18638282', title: '通过shadow来更改ubuntu密码，并且使用frp组网' })">举报</a>
</div>
        
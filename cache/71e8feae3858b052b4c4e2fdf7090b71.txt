
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ymtianyu/p/18997451" title="å‘å¸ƒäº 2025-07-22 11:22">
    <span role="heading" aria-level="2">C#è§£æJSONæ•°æ®å…¨æ”»ç•¥</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        æœ¬æ–‡è¯¦ç»†ä»‹ç»C#ä¸­è·å–å’Œè§£æJSONæ•°æ®çš„å®Œæ•´æµç¨‹ï¼Œæ¶µç›–HttpClientç½‘ç»œè¯·æ±‚ã€System.Text.JsonåŠ¨æ€è§£æä¸å¼ºç±»å‹è½¬æ¢æŠ€æœ¯ï¼Œæä¾›æ—¥æœŸæ ¼å¼å¤„ç†å’Œç©ºå€¼é˜²èŒƒç­‰å®ç”¨æŠ€å·§ï¼Œå¹¶é™„èµ å¯è¿è¡Œä»£ç ç¤ºä¾‹
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 1.6">
<p style="font-size: 18px">è¿˜åœ¨ä¸ºC#å¤„ç†ç½‘ç»œAPIè¿”å›çš„å¤æ‚JSONæ•°æ®å¤´ç–¼å—ï¼Ÿ<strong style="color: rgba(186, 55, 42, 1)">æ®ç»Ÿè®¡</strong>ï¼Œ90%çš„å¼€å‘è€…éƒ½æ›¾åœ¨JSONè§£æä¸Šæ ½è¿‡è·Ÿå¤´ï¼</p>
<div style="background-color: rgba(245, 247, 250, 1); padding: 12px 15px; border-left: 4px solid rgba(101, 116, 205, 1); margin: 20px 0">
<p style="margin: 0; color: rgba(74, 85, 104, 1)">æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ ç”¨C#è½»æ¾ç©è½¬JSONæ•°æ®ï¼š<br>- HttpClientè·å–ç½‘ç»œJSONæ•°æ®<br>- System.Text.JsonåŠ¨æ€è§£ææŠ€å·§<br>- å¼ºç±»å‹æ¨¡å‹è½¬æ¢å®æˆ˜<br>- ç‰¹æ®Šå­—ç¬¦/æ—¥æœŸæ ¼å¼å¤„ç†æ–¹æ¡ˆ<br>- å®Œæ•´å¯è¿è¡Œä»£ç ç¤ºä¾‹</p>
</div>
<h2 style="border-bottom: 2px solid rgba(226, 232, 240, 1); padding-bottom: 5px">ğŸ” ä¸€ã€ä¸ºä»€ä¹ˆJSONæ˜¯C#å¼€å‘å¿…ä¿®è¯¾ï¼Ÿ</h2>
<p>ç°ä»£Web APIä¸­<strong style="color: rgba(186, 55, 42, 1)">95%çš„æ•°æ®äº¤æ¢</strong>é‡‡ç”¨JSONæ ¼å¼ã€‚æ— è®ºæ˜¯è°ƒç”¨å¤©æ°”APIã€æ”¯ä»˜æ¥å£ï¼Œè¿˜æ˜¯å¤„ç†äº‘æœåŠ¡è¿”å›æ•°æ®ï¼ŒJSONè§£æéƒ½æ˜¯æ ¸å¿ƒæŠ€èƒ½ï¼</p>
<h2 style="border-bottom: 2px solid rgba(226, 232, 240, 1); padding-bottom: 5px">âš™ï¸ äºŒã€å››æ­¥æå®šç½‘ç»œJSONæ•°æ®</h2>
<h3>1. è·å–æ•°æ® - HttpClientæœ€ä½³å®è·µ</h3>
<pre class="language-csharp highlighter-hljs"><code>using var httpClient = new HttpClient();
var response = await httpClient.GetAsync("https://api.example.com/data");
var jsonString = await response.Content.ReadAsStringAsync();</code></pre>
<p><strong style="color: rgba(186, 55, 42, 1)">å…³é”®ç‚¹ï¼š</strong>ä½¿ç”¨usingè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå¼‚æ­¥æ–¹æ³•æå‡æ€§èƒ½</p>
<h3>2. åŠ¨æ€è§£æ - å¿«é€Ÿè¯»å–å­—æ®µ</h3>
<pre class="language-csharp highlighter-hljs"><code>using System.Text.Json;
var jsonDoc = JsonDocument.Parse(jsonString);
string name = jsonDoc.RootElement
                .GetProperty("user")
                .GetProperty("name")
                .GetString();</code></pre>
<p><strong style="color: rgba(186, 55, 42, 1)">é€‚ç”¨åœºæ™¯ï¼š</strong>å¿«é€Ÿæå–å°‘é‡å­—æ®µï¼Œæ— éœ€åˆ›å»ºå®Œæ•´æ¨¡å‹</p>
<h3>3. å¼ºç±»å‹è§£æ - æ¨èæ–¹æ¡ˆï¼</h3>
<pre class="language-csharp highlighter-hljs"><code>public class User {
    public string Name { get; set; }
    public int Age { get; set; }
    public DateTime RegisterDate { get; set; }
}

var user = JsonSerializer.Deserialize&lt;User&gt;(jsonString, new JsonSerializerOptions {
    PropertyNameCaseInsensitive = true // å¿½ç•¥å¤§å°å†™
});</code></pre>
<p><strong style="color: rgba(186, 55, 42, 1)">ä¼˜åŠ¿ï¼š</strong>ç¼–è¯‘æ—¶æ£€æŸ¥ + æ™ºèƒ½æç¤º + é«˜å¯ç»´æŠ¤æ€§</p>
<h3>4. ç‰¹æ®Šåœºæ™¯å¤„ç†</h3>
<p>- æ—¥æœŸæ ¼å¼è½¬æ¢ï¼š</p>
<pre class="language-csharp highlighter-hljs"><code>options.Converters.Add(new DateTimeConverter("yyyy-MM-dd"));</code></pre>
<p>- å¤„ç†JSONæ³¨é‡Šï¼š</p>
<pre class="language-csharp highlighter-hljs"><code>options.ReadCommentHandling = JsonCommentHandling.Skip;</code></pre>
<h2 style="border-bottom: 2px solid rgba(226, 232, 240, 1); padding-bottom: 5px">ğŸš¨ ä¸‰ã€é¿å‘æŒ‡å—</h2>
<p>- <strong style="color: rgba(186, 55, 42, 1)">NULLå¼•ç”¨å¼‚å¸¸ï¼š</strong>ç»™å±æ€§è®¾ç½®é»˜è®¤å€¼ <code>public string Name { get; set; } = string.Empty;</code></p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">å­—æ®µç¼ºå¤±ï¼š</strong>ä½¿ç”¨<code>[JsonIgnore]</code>å¿½ç•¥ä¸å­˜åœ¨çš„å±æ€§</p>
<p>- <strong style="color: rgba(186, 55, 42, 1)">æ€§èƒ½é™·é˜±ï¼š</strong>å¤§æ–‡ä»¶è§£æç”¨<code>JsonDocument</code>æ›¿ä»£<code>JObject</code></p>
<h2 style="border-bottom: 2px solid rgba(226, 232, 240, 1); padding-bottom: 5px">ğŸ’» å››ã€å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<pre class="language-csharp highlighter-hljs"><code>using System.Text.Json;

public async Task&lt;WeatherData&gt; GetWeatherAsync() {
    using var httpClient = new HttpClient();
    
    // è·å–æ­å·å¤©æ°”æ•°æ®
    var response = await httpClient.GetAsync(
        "https://api.weather.com/v3?location=hangzhou");
    
    response.EnsureSuccessStatusCode();
    var json = await response.Content.ReadAsStringAsync();
    
    // å¼ºç±»å‹è§£æ
    return JsonSerializer.Deserialize&lt;WeatherData&gt;(json, new JsonSerializerOptions {
        PropertyNameCaseInsensitive = true,
        NumberHandling = JsonNumberHandling.AllowReadingFromString
    });
}

// å®šä¹‰æ•°æ®æ¨¡å‹
public class WeatherData {
    public string Location { get; set; } = string.Empty;
    public double Temperature { get; set; }
    public string Unit { get; set; } = "Celsius";
    [JsonPropertyName("wind_speed")]
    public double WindSpeed { get; set; }
}</code></pre>
<div style="text-align: center; margin: 30px 0">
<div style="height: 1px; background: linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(101, 116, 205, 1), rgba(0, 0, 0, 0))">&nbsp;</div>
<p style="margin-top: 20px">å–œæ¬¢æœ¬æ–‡ï¼Ÿç‚¹èµğŸ‘æ”¶è—â­ï¼Œå…³æ³¨æˆ‘ï¼Œä¸€èµ·å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œå®Œå–„ä½ çš„æŠ€èƒ½æ ‘ï¼</p>
</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-22 11:23">2025-07-22 11:22</span>&nbsp;
<a href="https://www.cnblogs.com/ymtianyu">æ›²å¹½</a>&nbsp;
é˜…è¯»(<span id="post_view_count">265</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18997451);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18997451', targetLink: 'https://www.cnblogs.com/ymtianyu/p/18997451', title: 'C#è§£æJSONæ•°æ®å…¨æ”»ç•¥' })">ä¸¾æŠ¥</a>
</div>
        
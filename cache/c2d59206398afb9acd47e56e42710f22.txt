
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/aqi00/p/18916613" title="发布于 2025-06-08 11:30">
    <span role="heading" aria-level="2">FFmpeg开发笔记（六十四）使用国产的RedPlayer播放器观看网络视频</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<span data-cke-copybin-start="1"><span data-cke-copybin-start="1">​</span></span>RedPlayer是小红书基于FFmpeg4.3研发并开源的国产播放器，它可运行于Android和iOS系统，既支持播放本地视频文件，也支持播放网络上的流媒体链接。有关FFmpeg在Android平台的集成说明参见《FFmpeg开发实战：从零基础到短视频上线》一书的“第12章 FFmpeg的移动开发”。
<p><span id="cke_bm_1737S"> 之前的文章《使用国产的ijkplayer播放器观看网络视频》介绍了另一款由B站研发的国产播放器ijkplayer，可惜ijkplayer已经多年未更新源码，使得应用在App项目中颇为不便。如今小红书的RedPlayer横空出世，大有接过ijkplayer的势头，方便开发者定制包含最新特性的移动播放器。<br>
这里以Android Studio Dolphin（小海豚版本）为例，介绍如何在App工程中运行RedPlayer，详细的操作步骤如下。</span></p>
<h1>一、下载RedPlayer的源码</h1>
<p>RedPlayer的源码托管地址为https://github.com/RTE-Dev/REDPlayer，国内的镜像网站有两个，一个是https://gitee.com/rte-dev/RedPlayer，另一个是https://gitcode.com/gh_mirrors/re/RedPlayer。<br>
可以在托管网站上下载RedPlayer的最新源码，也可以下载2.0版本的源码。</p>
<h1>二、导入RedPlayer的源码</h1>
<p>解压下载后的RedPlayer源码，找到source目录，下面又有三个目录。分别是android、ios和redplayercore。其中android为RedPlayer适配Android系统的源码，ios为RedPlayer适配iOS系统的源码，redplayercore为RedPlayer的播放器核心源码，前两个源码都依赖于redplayercore。<br>
打开小海豚版本的Android Studio后，按照项目方式导入上面解压得到的android目录，Android Studio就加载RedPlayer工程，并自动下载相关的依赖包。有关Android Studio导入App项目的操作步骤参见《Android Studio开发实战：从零基础到App上线(第3版)》一书的“1.3.2 导入已有的工程”。<br>
成功导入RedPlayer工程之后，发现该工程有三个App模块，介绍如下：<br>
app：这是包含交互界面的播放器演示模块，引用了小红书自研播放器相关库OpenRedPlayerCore和OpenRedPreload，支持播放本地视频文件、网络视频文件、在线直播链接，以及小红书提供的在线播放案例和画中画播放案例。<br>
OpenRedPlayerCore：这是RedPlayer播放器的核心模块，其中的C/C++代码集成了FFmpeg、mediandk、SoundTouch等第三方库。<br>
OpenRedPreload：这是播放器的预加载模块，主要提供网络视频流在下载过程中的缓存机制。</p>
<h1>三、编译RedPlayer</h1>
<p>依次选择Android Studio的顶部菜单：Build→Make Project，尝试编译RedPlayer工程。不料Android Studio提示报错“Could not find com.github.tbruyelle:rxpermissions:0.12”，原来RedPlayer用到了第三方的rxpermissions。<br>
不管怎么调整build.gradle配置，都无法下载权限库rxpermissions。可能rxpermissions许久未更新，被仓库除名了吧。只能删除build.gradle里的rxpermissions导包语句，同时去掉App工程中涉及到RxPermissions代码。<br>
为了补偿rxpermissions的动态授权校验功能，需要开发者自行添加相关的运行时权限验证逻辑，具体代码参见《Android Studio开发实战：从零基础到App上线(第3版)》一书的“6.3.3 &nbsp;运行时动态申请权限”。</p>
<h1>四、运行RedPlayer</h1>
<p>解决了rxpermissions的导包问题之后，把RedPlayer安装到手机上，启动App的初始界面如下图所示：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="3" data-cke-widget-wrapper="1"><span class="cke_reset cke_widget_drag_handler_container"><span class="cke_image_resizer" title="点击并拖拽以改变尺寸"><span class="cke_widget_edit_container" title="编辑图片"><img src="https://img2024.cnblogs.com/blog/729938/202506/729938-20250607131736316-897838461.jpg" alt="" width="320" height="434"></span></span></span></span></p>
<p>点击首页列表的第一项“URL/JSON”，在新页面填入一个网络视频地址，再点击右下角的Play按钮，跳到播放页面如下图所示。</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="2" data-cke-widget-wrapper="1"><span class="cke_reset cke_widget_drag_handler_container"><span class="cke_image_resizer" title="点击并拖拽以改变尺寸"><span class="cke_widget_edit_container" title="编辑图片"><img src="https://img2024.cnblogs.com/blog/729938/202506/729938-20250607131756813-332797028.jpg" alt="" width="320" height="420"></span></span></span></span></p>
<p>可见RedPlayer能够正常播放网络视频。</p>
<p>更多详细的FFmpeg开发知识参见<span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="1" data-cke-widget-wrapper="1"><a class="cke_widget_editable cke_widget_element" title="《FFmpeg开发实战：从零基础到短视频上线》" href="https://item.jd.com/14020415.html" data-cke-enter-mode="2" data-cke-saved-href="https://item.jd.com/14020415.html" data-cke-widget-data="%7B%22url%22%3A%22https%3A%2F%2Fitem.jd.com%2F14020415.html%22%2C%22text%22%3A%22%E3%80%8AFFmpeg%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%88%B0%E7%9F%AD%E8%A7%86%E9%A2%91%E4%B8%8A%E7%BA%BF%E3%80%8B%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22%22%2C%22isCard%22%3Afalse%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.3.9%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DP4F5%22%2C%22id%22%3A%22gxjSG2-1749273044967%22%2C%22classes%22%3Anull%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="《FFmpeg开发实战：从零基础到短视频上线》" data-widget="csdnlink" rel="noopener nofollow">《FFmpeg开发实战：从零基础到短视频上线》</a>一书。</span></p>
<p>&nbsp;</p>

<span data-cke-copybin-start="1">
<span data-cke-copybin-end="1">​</span></span>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.3735615323298611" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-08 11:30">2025-06-08 11:30</span>&nbsp;
<a href="https://www.cnblogs.com/aqi00">aqi00</a>&nbsp;
阅读(<span id="post_view_count">13</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18916613);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18916613', targetLink: 'https://www.cnblogs.com/aqi00/p/18916613', title: 'FFmpeg开发笔记（六十四）使用国产的RedPlayer播放器观看网络视频' })">举报</a>
</div>
        
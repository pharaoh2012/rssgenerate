
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mengps/p/18644624" title="发布于 2024-12-31 18:09">
    <span role="heading" aria-level="2">Qml 中实现毛玻璃效果</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/802097/202412/802097-20241231180912156-1524813610.png" alt="Qml 中实现毛玻璃效果" class="desc_img">
        毛玻璃效果（Acrylic Effect）是一种常见的 UI 设计风格，它通过模糊背景并添加透明度和噪声效果，使界面元素看起来像是半透明的磨砂玻璃。
本文将介绍如何使用 Qml 实现这种效果，并提供一个完整的示例代码。
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="写在前面">【写在前面】</h3>
<p>毛玻璃效果（Acrylic Effect）是一种常见的 UI 设计风格，它通过模糊背景并添加透明度和噪声效果，使界面元素看起来像是半透明的磨砂玻璃。</p>
<p>本文将介绍如何使用 Qml 实现这种效果，并提供一个完整的示例代码。</p>
<hr>
<h3 id="正文开始">【正文开始】</h3>
<h4 id="1-效果图">1. 效果图</h4>
<p><img src="https://img2024.cnblogs.com/blog/802097/202412/802097-20241231180806959-1970590838.png" alt="image" loading="lazy"></p>
<h4 id="2-毛玻璃效果的实现原理">2. 毛玻璃效果的实现原理</h4>
<p>毛玻璃效果的核心是通过模糊背景图像，并叠加透明度和噪声效果来实现。</p>
<p>具体来说，实现毛玻璃效果的步骤如下：</p>
<ol>
<li><strong>捕获背景图像</strong>：首先需要捕获背景图像，作为模糊效果的输入。</li>
<li><strong>模糊处理</strong>：对捕获的背景图像进行模糊处理，生成模糊效果。</li>
<li><strong>添加亮度和色调</strong>：通过叠加一个半透明的矩形，调整模糊区域的亮度和色调。</li>
<li><strong>添加噪声效果</strong>：在模糊区域上叠加噪声图像，增加磨砂玻璃的质感。</li>
</ol>
<h4 id="3-实现毛玻璃效果">3. 实现毛玻璃效果</h4>
<p><code>DelAcrylic.qml</code> 文件定义了一个自定义的 Qml 组件，用于实现毛玻璃效果。以下是该文件的主要部分：</p>
<ul>
<li><strong><code>ShaderEffectSource</code></strong>: 用于捕获源项（<code>sourceItem</code>）的内容，并将其作为模糊效果的输入。<code>sourceRect</code> 属性定义了捕获的区域。</li>
</ul>
<pre><code class="language-js">ShaderEffectSource {
    id: __source
    anchors.fill: parent
    visible: false
    sourceRect: Qt.rect(control.x, control.y, control.width, control.height)
}
</code></pre>
<ul>
<li><strong><code>FastBlur</code></strong>: 对 <code>ShaderEffectSource</code> 的内容进行模糊处理。<code>radius</code> 属性控制模糊的强度。</li>
</ul>
<pre><code class="language-js">FastBlur {
    id: __fastBlur
    anchors.fill: parent
    source: __source
    radius: 32
}
</code></pre>
<ul>
<li><strong><code>Rectangle</code></strong>: 有两个矩形，第一个矩形用于设置背景的亮度（<code>luminosity</code>），第二个矩形用于设置颜色的色调（<code>colorTint</code>）和透明度（<code>opacityTint</code>）。</li>
</ul>
<pre><code class="language-js">Rectangle {
    anchors.fill: parent
    color: Qt.rgba(1, 1, 1, luminosity)
    radius: control.radiusBg
}

Rectangle {
    anchors.fill: parent
    color: Qt.rgba(colorTint.r, colorTint.g, colorTint.b, opacityTint)
    radius: control.radiusBg
}
</code></pre>
<ul>
<li><strong><code>Image</code></strong>: 用于添加噪声效果，噪声图像通过 base64 编码嵌入到 Qml 文件中。<code>opacity</code> 属性控制噪声的透明度。</li>
</ul>
<pre><code class="language-js">Image {
    id: __noiseImage
    anchors.fill: parent
    source: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAGHaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCc/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+PHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0idXVpZDpmYWY1YmRkNS1iYTNkLTExZGEtYWQzMS1kMzNkNzUxODJmMWIiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj48dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPjwvcmRmOkRlc2NyaXB0aW9uPjwvcmRmOlJERj48L3g6eG1wbWV0YT4NCjw/eHBhY2tldCBlbmQ9J3cnPz4slJgLAAAMNElEQVRYR02XW1NTd9vGf0nYZEFMVha7JBAIYYihEQVSUQQVtOrUtipVsTPtTOs38KDtUQ+Y6ZfoTI88aT3o2Jk6bUfa4QFEKZWIsgm7ECKQHZu1FpiQQAx5DnyfzHv6n//Jvbl+13Vrvv/++5zRaOSPP/7giy++wGQyMTw8TCgUoquri2QySSgUorm5mcbGRh4/fozT6cTtdvPgwQMMBgPnzp0DYHR0FEmSiEag=="
    fillMode: Image.Tile
    opacity: 0.02
}
</code></pre>
<h4 id="4-如何使用">4. 如何使用</h4>
<p><code>main.qml</code> 是示例文件，使用 <code>DelAcrylic</code> 组件并提供了交互式的滑块来控制模糊效果的参数。</p>
<p>以下是该文件的主要部分：</p>
<ul>
<li><strong><code>Window</code></strong>: 定义了一个窗口，宽度为 750，高度为 500，标题为 "Acrylic Test"。</li>
</ul>
<pre><code class="language-js">Window {
    width: 750
    height: 500
    visible: true
    title: qsTr("Acrylic Test")
}
</code></pre>
<ul>
<li><strong><code>Image</code></strong>: 作为背景图像，填充整个窗口。</li>
</ul>
<pre><code class="language-js">Image {
    id: bg
    anchors.fill: parent
    source: "qrc:/img.jpg"
}
</code></pre>
<ul>
<li><strong><code>DelAcrylic</code></strong>: 使用 <code>DelAcrylic</code> 组件，将其放置在窗口的中心位置，并绑定背景图像作为模糊效果的源项。<code>opacityNoise</code>、<code>opacityTint</code> 和 <code>radiusBlur</code> 属性分别绑定到三个滑块的值。</li>
</ul>
<pre><code class="language-js">DelAcrylic {
    id: acrylic
    x: (bg.width - width) * 0.5
    y: (bg.height - height) * 0.5
    width: 300
    height: 300
    sourceItem: bg
    opacityNoise: slider1.value
    opacityTint: slider2.value
    radiusBlur: slider3.value

    MouseArea {
        anchors.fill: parent
        drag.target: parent
    }
}
</code></pre>
<ul>
<li><strong><code>Column</code></strong>: 包含三个滑块，分别用于控制 <code>opacityNoise</code>、<code>opacityTint</code> 和 <code>radiusBlur</code> 属性。</li>
</ul>
<pre><code class="language-js">Column {
    Slider {
        id: slider1
        anchors.horizontalCenter: parent.horizontalCenter
        from: 0
        to: 1
        stepSize: 0.01
        value: 0.02
        ToolTip.visible: hovered
        ToolTip.text: value.toFixed(2)

        Text {
            anchors.left: parent.right
            anchors.leftMargin: 10
            anchors.verticalCenter: parent.verticalCenter
            text: qsTr("opacityNoise")
        }
    }

    Slider {
        id: slider2
        anchors.horizontalCenter: parent.horizontalCenter
        from: 0
        to: 1
        stepSize: 0.01
        value: 0
        ToolTip.visible: hovered
        ToolTip.text: value.toFixed(2)

        Text {
            anchors.left: parent.right
            anchors.leftMargin: 10
            anchors.verticalCenter: parent.verticalCenter
            text: qsTr("opacityTint")
        }
    }

    Slider {
        id: slider3
        from: 0
        to: 100
        value: 48
        ToolTip.visible: hovered
        ToolTip.text: value.toFixed(0)

        Text {
            anchors.left: parent.right
            anchors.leftMargin: 10
            anchors.verticalCenter: parent.verticalCenter
            text: qsTr("radiusBlur")
        }
    }
}
</code></pre>
<hr>
<h3 id="结语">【结语】</h3>
<p>通过 <code>DelAcrylic.qml</code> 和 <code>main.qml</code> 文件，我们实现了一个具有毛玻璃效果的 Qml 应用程序。<code>DelAcrylic</code> 组件通过模糊背景图像、添加亮度和色调、以及叠加噪声效果，实现了毛玻璃效果。</p>
<p>这种毛玻璃效果可以广泛应用于现代 UI 设计中，特别是在需要模糊背景或实现类似 <code>Acrylic</code> 效果的场景中。通过调整模糊强度、透明度和噪声效果，我们可以创建出丰富多样的视觉效果，提升用户体验。</p>
<p>改进建议：</p>
<ul>
<li>
<p><strong>性能优化</strong>：模糊效果可能会对性能产生影响，特别是在高分辨率或复杂场景下。可以考虑优化模糊算法或降低模糊的强度以提高性能。</p>
</li>
<li>
<p><strong>更多参数控制</strong>：可以添加更多的参数控制，例如噪声的类型、模糊的方向等，以提供更丰富的视觉效果。</p>
</li>
</ul>
<p>最后：项目链接(多多star呀..⭐_⭐)：</p>
<p>Github: <a href="https://github.com/mengps/QmlControls" target="_blank" rel="noopener nofollow">https://github.com/mengps/QmlControls</a></p>
<p>Gitee: <a href="https://gitee.com/MenPenS/QmlControls" target="_blank" rel="noopener nofollow">https://gitee.com/MenPenS/QmlControls</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.17483405461111112" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-31 18:10">2024-12-31 18:09</span>&nbsp;
<a href="https://www.cnblogs.com/mengps">梦起丶</a>&nbsp;
阅读(<span id="post_view_count">41</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18644624" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18644624);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18644624', targetLink: 'https://www.cnblogs.com/mengps/p/18644624', title: 'Qml 中实现毛玻璃效果' })">举报</a>
</div>
        
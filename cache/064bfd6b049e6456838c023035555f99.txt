
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/heymar/p/18631662" title="发布于 2024-12-25 23:36">
    <span role="heading" aria-level="2">ThreeJs-083D动画系统详解</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="一动画原理和应用">一.动画原理和应用</h1>
<p>three的动画大概就是通过不同时间的关键帧来实现</p>
<p>加载一个手机模型</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122217598.png" alt="image-20241212221732540" loading="lazy"></p>
<p>在这个对象里面，<strong>注意后期都是直接通过可视化软件Blender编辑好关键帧就能实现动画</strong>，这也是个已经编辑好的动画模型，在这个对象里面有一个animations就是动画集，也就是这个物体可以有很多个动画</p>
<p>其中animationclip表示剪辑动画，duration表示动画时长，tracks轨道表示各种关键帧，比如第一个关键帧里面，name什么group1 2 3等等都是一个部位，最后position表示这个关键帧是移动了位置，times表示时间，values是顶点，三维向量，一个时间对应values三个向量也就是一个顶点，表示这个时间段0.03999999910593033秒，第一个点移动到了-0.009195199236273766, -0.021173708140850067, -0.05099957436323166这个位置，所以times x3 等于values</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122224089.png" alt="image-20241212222453057" loading="lazy"></p>
<p>当然你要看物体也可以在children属性里面看到</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122226066.png" alt="image-20241212222621020" loading="lazy"></p>
<p>编辑好后拿到模型此时是静态的，还需要将动画播放起来</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122228556.png" alt="image-20241212222854525" loading="lazy"></p>
<p><strong>此时还要注意，我们要不断更新动画，那就在animate函数里面，并且创建一个时间，作为参数，要让动画知道时间是什么</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122231029.png" alt="image-20241212223135001" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122232330.gif" alt="GIF" loading="lazy"></p>
<h2 id="11-代码实现keyframme关键帧动画">1.1 代码实现keyframme关键帧动画</h2>
<p>简单创建一个立方体</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122250252.png" alt="image-20241212225048222" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122251687.gif" alt="GIF" loading="lazy"></p>
<h2 id="12-四元数与欧拉角转换设置关键帧">1.2 四元数与欧拉角转换设置关键帧</h2>
<p>主要就是旋转动画，刚才是位移动画，<mark>旋转动画就要用到QuaternionKeyframeTrack</mark></p>
<p>四元数就是利用一系列公式算出角度可以避免旋转过程中轴心偏向的问题</p>
<p>当然这个three已经帮我们处理好了，我们不用去算直接用她的一个数学库来解决</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122257940.png" alt="image-20241212225754896" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122308972.png" alt="image-20241212230821934" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122308044.gif" alt="GIF" loading="lazy"></p>
<p><strong>除此之外，四元数还支持欧拉角的方式来设置角度，三个参数分别表示x轴角度y轴z轴</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412122310515.png" alt="image-20241212231005456" loading="lazy"></p>
<h2 id="13-布尔关键帧动画">1.3 布尔关键帧动画</h2>
<p>就是控制显示隐藏，类似于星星闪烁效果</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162234624.png" alt="image-20241216223401567" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162234325.gif" alt="GIF" loading="lazy"></p>
<p><strong>如果要对模型使用，注意模型的名字可以通过children属性查找里面的name</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162242803.png" alt="image-20241216224216777" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162242176.gif" alt="GIF" loading="lazy"></p>
<h2 id="14-颜色关键帧">1.4 颜色关键帧</h2>
<p>可以根据时间设置不同的颜色</p>
<p><strong>注意颜色支持rgb但是是0-1的写法</strong></p>
<p>而且是对材质设置</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162249038.png" alt="image-20241216224947012" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162250728.gif" alt="GIF" loading="lazy"></p>
<h2 id="45-数值关键帧">4.5 数值关键帧</h2>
<p>就是想对这个3D物体某些属性进行数值上的单独修改可以用这个</p>
<p><strong>比如透明度</strong></p>
<p><strong>注意要找到模型的材质，可以一直往这个gltf.scene的children下面找，找到最后一级会有mesh此时就带有材质</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162302060.png" alt="image-20241216230249032" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162303197.gif" alt="GIF" loading="lazy"></p>
<h1 id="二混合器">二.混合器</h1>
<p>混合器就是可以对动画进行一些设置，比如时间多少，快慢，暂停启动等</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162311793.png" alt="image-20241216231118768" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412162312648.gif" alt="GIF" loading="lazy"></p>
<h1 id="三人物多动作丝滑切换">三.人物多动作丝滑切换</h1>
<p>加载模型进来，可以看到这是一个已经做好动画的模型</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182245352.png" alt="image-20241218224523258" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182246465.png" alt="image-20241218224640414" loading="lazy"></p>
<p>随便取几个代表性的动画出来</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182256384.png" alt="image-20241218225630353" loading="lazy"></p>
<p><strong>注意：这些动画不能一股脑一次性播放不然会变得很鬼畜</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182257331.png" alt="image-20241218225730300" loading="lazy"></p>
<p>首先来一个站着不动呼吸的动画</p>
<p>其他效果类似</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182311752.png" alt="image-20241218231151726" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412182312615.gif" alt="GIF" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.6956525450208333" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-25 23:37">2024-12-25 23:36</span>&nbsp;
<a href="https://www.cnblogs.com/heymar">Heymar-10</a>&nbsp;
阅读(<span id="post_view_count">67</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18631662" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18631662);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18631662', targetLink: 'https://www.cnblogs.com/heymar/p/18631662', title: 'ThreeJs-083D动画系统详解' })">举报</a>
</div>
        
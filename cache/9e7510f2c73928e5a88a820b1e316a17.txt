
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Firepad-magic/p/18912554" title="å‘å¸ƒäº 2025-06-05 16:01">
    <span role="heading" aria-level="2">C# NativeAOTç”Ÿæˆ.so åº“ä¾›Linuxä¸‹C++è°ƒç”¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">

<div class="typora-export-content">
<div id="write">
<h1 id="-c-nativeaotç”Ÿæˆso-åº“ä¾›linuxä¸‹cè°ƒç”¨"><span>C# NativeAOTç”Ÿæˆ.so åº“ä¾›Linuxä¸‹C++è°ƒç”¨</span></h1>
<p><span>#nativeAOT </span></p>
<h2 id="âœ…-æœ€ç»ˆç›®æ ‡"><span>âœ… æœ€ç»ˆç›®æ ‡</span></h2>
<blockquote>
<p><span>ä½¿ç”¨ C# ç¼–å†™ </span><code>Add(int a, int b)</code><span> â†’ ç¼–è¯‘ä¸º </span><code>libadd.so</code><span> â†’ åœ¨ Linux C++ ä¸­é€šè¿‡ </span><code>dlopen + dlsym</code><span> è°ƒç”¨</span></p>
</blockquote>
<hr>
<h1 id="ğŸ§±-ç¬¬-1-æ­¥åˆ›å»º-nativeaot-é¡¹ç›®"><span>ğŸ§± ç¬¬ 1 æ­¥ï¼šåˆ›å»º NativeAOT é¡¹ç›®</span></h1>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">dotnet new classlib <span class="cm-attribute">-n</span> AddLibrary</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">cd</span> AddLibrary</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<hr>
<h2 id="ğŸ“„-ä¿®æ”¹-addlibrarycsproj"><span>ğŸ“„ ä¿®æ”¹ </span><code>AddLibrary.csproj</code></h2>
<p><span>ç¼–è¾‘ </span><code>AddLibrary.csproj</code><span> æ–‡ä»¶ï¼Œè®¾ç½®ä¸ºä½¿ç”¨ NativeAOT ç¼–è¯‘ï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Project</span> <span class="cm-attribute">Sdk</span>=<span class="cm-string">"Microsoft.NET.Sdk"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">PropertyGroup</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">OutputType</span><span class="cm-tag cm-bracket">&gt;</span>Library<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">OutputType</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">TargetFramework</span><span class="cm-tag cm-bracket">&gt;</span>net8.0<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">TargetFramework</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">PublishAot</span><span class="cm-tag cm-bracket">&gt;</span>true<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">PublishAot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">SelfContained</span><span class="cm-tag cm-bracket">&gt;</span>true<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">SelfContained</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">UseNativeAot</span><span class="cm-tag cm-bracket">&gt;</span>true<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">UseNativeAot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">PropertyGroup</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">Project</span><span class="cm-tag cm-bracket">&gt;</span></span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 180px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 180px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="ğŸ§ -ç¬¬-2-æ­¥ç¼–å†™å¯¼å‡ºå‡½æ•°addï¼‰"><span>ğŸ§  ç¬¬ 2 æ­¥ï¼šç¼–å†™å¯¼å‡ºå‡½æ•°ï¼ˆAddï¼‰</span></h1>
<p><span>åˆ›å»ºæˆ–æ›¿æ¢ </span><code>Class1.cs</code><span> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="csharp">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure"><span><span>â€‹</span>x</span></div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-keyword">using</span> <span class="cm-variable">System</span>;</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-keyword">using</span> <span class="cm-variable">System</span>.<span class="cm-variable">Runtime</span>.<span class="cm-variable">InteropServices</span>;</span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-keyword">class</span> <span class="cm-def">Exports</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">{</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;  [<span class="cm-variable">UnmanagedCallersOnly</span>(<span class="cm-variable">EntryPoint</span> <span class="cm-operator">=</span> <span class="cm-string">"Add"</span>)]</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-keyword">static</span> <span class="cm-variable-3">int</span> <span class="cm-variable">Add</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">a</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">b</span>)</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;  {</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">a</span> <span class="cm-operator">+</span> <span class="cm-variable">b</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;  }</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">}</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 220px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 220px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="ğŸ› -ç¬¬-3-æ­¥åœ¨-linux-æˆ–-wsl-ä¸­å‘å¸ƒä¸º-sowslä¸ºä¾‹ï¼‰"><span>ğŸ›  ç¬¬ 3 æ­¥ï¼šåœ¨ Linux æˆ– WSL ä¸­å‘å¸ƒä¸º </span><code>.so</code><span>ï¼ˆWSLä¸ºä¾‹ï¼‰</span></h1>
<h4 id="ğŸ› ï¸-å®‰è£…wsl"><span>ğŸ› ï¸ å®‰è£…WSL</span></h4>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="powershell">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-identifier">wsl</span> <span class="cm-operator">--</span><span class="cm-identifier">install</span></span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<h4 id="ğŸ› ï¸wslä¸‹å®‰è£…é…ç½®dotnetåº“"><span>ğŸ› ï¸WSLä¸‹å®‰è£…é…ç½®dotnetåº“</span></h4>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">wget</span> https://dotnet.microsoft.com/download/dotnet/scripts/v1/dotnet-install.sh</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">chmod</span> <span class="cm-operator">+</span>x dotnet-install.sh</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">./dotnet-install.sh <span class="cm-attribute">--version</span> <span class="cm-number">8</span>.0.204</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 60px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 60px">&nbsp;</div>
</div>
</div>
<h4 id="ğŸ› ï¸é…ç½®ç¯å¢ƒå˜é‡"><span>ğŸ› ï¸é…ç½®ç¯å¢ƒå˜é‡</span></h4>
<p><span>ä½ åªéœ€åœ¨ç»ˆç«¯æ‰§è¡Œï¼ˆæˆ–æ·»åŠ åˆ° </span><code>~/.bashrc</code><span> / </span><code>~/.zshrc</code><span>ï¼‰ï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 7.75px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-keyword">export</span> <span class="cm-def">DOTNET_ROOT</span><span class="cm-operator">=</span><span class="cm-def">$HOME</span>/.dotnet <span class="cm-keyword">export</span> <span class="cm-def">PATH</span><span class="cm-operator">=</span><span class="cm-def">$PATH</span>:<span class="cm-def">$HOME</span>/.dotnet:<span class="cm-def">$HOME</span>/.dotnet/tools</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<p><span>ç„¶åè¿è¡Œï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">source</span> ~/.bashrc &nbsp;<span class="cm-comment"># æˆ– ~/.zshrcï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ zsh</span></span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<p><span>ç¡®è®¤å®‰è£…æˆåŠŸï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">dotnet <span class="cm-attribute">--version</span></span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<p><span>âœ… è¾“å‡º </span><code>8.0.204</code><span> å³æˆåŠŸï¼</span></p>
<h4 id="ğŸ› ï¸å®‰è£…æ„å»ºç¯å¢ƒ"><span>ğŸ› ï¸å®‰è£…æ„å»ºç¯å¢ƒ</span></h4>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">sudo</span> apt update</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">sudo</span> apt install <span class="cm-attribute">-y</span> build-essential clang zlib1g-dev</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<p><span>è§£é‡Šï¼š</span></p>
<ul>
<li><span>âœ… </span><code>build-essential</code><span>ï¼šåŒ…å« </span><code>gcc</code><span>, </span><code>g++</code><span>, </span><code>make</code><span>, </span><code>ld</code><span> ç­‰å·¥å…·</span></li>
<li><span>âœ… </span><code>clang</code><span>ï¼šLLVM é“¾æ¥å™¨ï¼ˆNativeAOT ä¼˜å…ˆä½¿ç”¨ï¼‰</span></li>
<li><span>âœ… </span><code>zlib1g-dev</code><span>ï¼šNativeAOT éƒ¨åˆ†åœºæ™¯ä¸‹éœ€è¦</span></li>
</ul>
<p><strong><span>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span></strong></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">gcc</span> <span class="cm-attribute">--version</span></span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">clang <span class="cm-attribute">--version</span></span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<p><span>ä½  </span><strong><span>å¿…é¡»åœ¨ Linux æˆ– WSL ç¯å¢ƒä¸‹</span></strong><span> æ‰§è¡Œï¼š</span> <span>ç¤ºä¾‹ï¼šé¡¹ç›®ä½äº </span><strong><span>d:/Work/Test/NativeAOT/ULib</span></strong></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">cd</span> /mnt/d/Work/Test/NativeAOT/ULib</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">dotnet publish <span class="cm-attribute">-c</span> Release <span class="cm-attribute">-r</span> linux-x64</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<p><span>è¾“å‡ºæ–‡ä»¶ä½äºï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">bin/Release/net8.0/linux-x64/native/AddLibrary.so</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<p><span>å¯é‡å‘½åä¸ºï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-builtin">cp</span> bin/Release/net8.0/linux-x64/native/AddLibrary.so ./libadd.so</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="âœ…-ç¬¬-4-æ­¥ç”¨-c-è°ƒç”¨-libaddso"><span>âœ… ç¬¬ 4 æ­¥ï¼šç”¨ C++ è°ƒç”¨ </span><code>libadd.so</code></h1>
<p><span>åˆ›å»ºä¸€ä¸ª </span><code>main.cpp</code><span>ï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="cpp">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-meta">#include &lt;iostream&gt;</span></span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-meta">#include &lt;dlfcn.h&gt;</span></span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-keyword">typedef</span> <span class="cm-variable-3">int</span> (<span class="cm-operator">*</span><span class="cm-variable">AddFunc</span>)(<span class="cm-variable-3">int</span>, <span class="cm-variable-3">int</span>);</span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>() {</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-comment">//åŠ è½½å½“å‰ç›®å½•ä¸‹çš„libadd.so</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-variable-3">void*</span> <span class="cm-variable">handle</span> <span class="cm-operator">=</span> <span class="cm-variable">dlopen</span>(<span class="cm-string">"./libadd.so"</span>, <span class="cm-variable">RTLD_NOW</span>);</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">handle</span>) {</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">std::cerr</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-string">"Failed to load .so: "</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">dlerror</span>() <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">std::endl</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">1</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;  }</span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-variable">AddFunc</span> <span class="cm-variable">add</span> <span class="cm-operator">=</span> (<span class="cm-variable">AddFunc</span>)<span class="cm-variable">dlsym</span>(<span class="cm-variable">handle</span>, <span class="cm-string">"Add"</span>);</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">add</span>) {</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">std::cerr</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-string">"Failed to find symbol: "</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">dlerror</span>() <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">std::endl</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">dlclose</span>(<span class="cm-variable">handle</span>);</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">2</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp;  }</span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">result</span> <span class="cm-operator">=</span> <span class="cm-variable">add</span>(<span class="cm-number">10</span>, <span class="cm-number">20</span>);</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-variable">std::cout</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-string">"âœ… Add(10, 20) = "</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">result</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">std::endl</span>;</span></pre>
<pre class=" CodeMirror-line "></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-variable">dlclose</span>(<span class="cm-variable">handle</span>);</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">}</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 520px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 520px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="ğŸ§ª-ç¬¬-5-æ­¥ç¼–è¯‘å¹¶è¿è¡Œ-c-è°ƒç”¨æµ‹è¯•"><span>ğŸ§ª ç¬¬ 5 æ­¥ï¼šç¼–è¯‘å¹¶è¿è¡Œ C++ è°ƒç”¨æµ‹è¯•</span></h1>
<p><span>ç¡®ä¿åœ¨</span><strong><span>main.cpp</span></strong><span>å’Œ</span><strong><span>libadd.so</span></strong><span>æ‰€åœ¨çš„ç›®å½•ä¸­è¿è¡Œ</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">g<span class="cm-operator">++</span> main.cpp <span class="cm-attribute">-o</span> testadd <span class="cm-attribute">-ldl</span></span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">./testadd</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 40px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 40px">&nbsp;</div>
</div>
</div>
<p><span>è¾“å‡ºï¼š</span></p>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">âœ… Add(10, 20) = 30</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 20px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 20px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="ğŸ“¦-æœ€ç»ˆç»“æ„ç¤ºæ„"><span>ğŸ“¦ æœ€ç»ˆç»“æ„ç¤ºæ„</span></h1>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">
<pre><span>xxxxxxxxxx</span></pre>
</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">AddLibrary/</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â”œâ”€â”€ AddLibrary.csproj</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â”œâ”€â”€ Class1.cs  (å« Add æ–¹æ³•)</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â”œâ”€â”€ bin/</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â”‚ &nbsp; â””â”€â”€ Release/...</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â”œâ”€â”€ libadd.so  &lt;-- ç¼–è¯‘åå¤åˆ¶å‡ºæ¥</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">â””â”€â”€ main.cpp &nbsp; &lt;-- è°ƒç”¨æµ‹è¯•</span></pre>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 140px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 140px">&nbsp;</div>
</div>
</div>
<hr>
<h1 id="âœ…-é¢å¤–å»ºè®®"><span>âœ… é¢å¤–å»ºè®®</span></h1>
<table>
<thead>
<tr><th><span>ç›®æ ‡</span></th><th><span>æ“ä½œ</span></th></tr>
</thead>
<tbody>
<tr>
<td><span>è‡ªåŠ¨ç¼–è¯‘ </span><code>.so</code><span> + æµ‹è¯•</span></td>
<td><span>å†™ </span><code>build.sh</code><span> è„šæœ¬</span></td>
</tr>
<tr>
<td><span>å‘å¸ƒ Windows </span><code>.dll</code></td>
<td><code>-r win-x64</code></td>
</tr>
<tr>
<td><span>å¤šå‡½æ•°å¯¼å‡º</span></td>
<td><span>å¢åŠ å¤šä¸ª </span><code>[UnmanagedCallersOnly(EntryPoint = "...")]</code></td>
</tr>
<tr>
<td><span>é«˜æ€§èƒ½</span></td>
<td><span>é¿å…å¤æ‚å¯¹è±¡ï¼Œä½¿ç”¨åŸºæœ¬ç±»å‹æŒ‡é’ˆï¼ˆint, float*ï¼‰</span></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="âœ…-æ€»ç»“å‘½ä»¤å›é¡¾"><span>âœ… æ€»ç»“å‘½ä»¤å›é¡¾</span></h2>
<div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash">
<div style="overflow: hidden; position: relative; width: 3px; height: 0; top: 8px; left: 4px">&nbsp;</div>
<div class="CodeMirror-scrollbar-filler">&nbsp;</div>
<div class="CodeMirror-gutter-filler">&nbsp;</div>
<div class="CodeMirror-scroll">
<div class="CodeMirror-sizer" style="margin-left: 0; margin-bottom: 0; border-right-width: 0; padding-right: 0; padding-bottom: 0">
<div style="position: relative; top: 0">
<div class="CodeMirror-lines">
<div style="position: relative; outline: none">
<div class="CodeMirror-measure">&nbsp;</div>
<div class="CodeMirror-measure">&nbsp;</div>
<div style="position: relative; z-index: 1">&nbsp;</div>
<div class="CodeMirror-code">
<div class="CodeMirror-activeline" style="position: relative">
<div class="CodeMirror-activeline-background CodeMirror-linebackground">&nbsp;</div>
<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0; width: 0">&nbsp;</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">dotnet new classlib <span class="cm-attribute">-n</span> AddLibrary</span></pre>
</div>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px"><span class="cm-comment"># ç¼–è¾‘ä»£ç  &amp; csproj</span></span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">dotnet publish <span class="cm-attribute">-c</span> Release <span class="cm-attribute">-r</span> linux-x64</span></pre>
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">g<span class="cm-operator">++</span> main.cpp <span class="cm-attribute">-o</span> testadd <span class="cm-attribute">-ldl</span></span></pre>
<div style="position: relative">
<pre class=" CodeMirror-line "><span style="padding-right: 0.1px">./testadd</span></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div style="position: absolute; height: 0; width: 1px; border-bottom: 0 solid rgba(0, 0, 0, 0); top: 100px">&nbsp;</div>
<div class="CodeMirror-gutters" style="display: none; height: 100px">&nbsp;</div>
</div>
</div>
<p>&nbsp;</p>
</div>
</div>
</div>
<div id="MySignature" role="contentinfo">
    <div id="aid">
    <a href="https://api.assetstore.unity3d.com/affiliate/embed/list/top-paid/widget-medium?aid=1011l5dHP">Unityæœ€å—æ¬¢è¿çš„æ’ä»¶ï¼Œå¯ä»¥è®©æ‚¨çš„æ¸¸æˆå¦‚è™æ·»ç¿¼ï¼Œä¸ºæ‚¨èŠ‚çœå¤§é‡æ—¶é—´å¯ä»¥æŠ•å…¥åœ¨æ¸¸æˆçš„åˆ›æ„å’Œç»†èŠ‚ä¸Š</a> 
</div>
<div id="AllanboltSignature" background="linear-gradient(142deg, rgba(255,253,141,1) 0%, rgba(252,183,255,1) 35%, rgba(144,236,255,1) 100%)">
<a>ç‚¹èµé¼“åŠ±ä¸‹ï¼Œ(ã¥ï¿£3ï¿£)ã¥â•­â¤ï½</a>
<br>
<p id="PSignature" style="background: linear-gradient(142deg, rgba(255,253,141,1) 0%, rgba(252,183,255,1) 35%, rgba(144,236,255,1) 100%);border: #330066 1px solid; padding: 10px 10px;font-family: å¾®è½¯é›…é»‘; font-size: 11px">
<span style="margin-left: 10px; font-weight: bold; color: white ">ä½œè€…ï¼š<a style="text-decoration: none; color: white" href="https://www.cnblogs.com/Firepad-magic/" target="_blank"></a><b style="color: white">ä¸–çºªæœ«çš„é­”æœ¯å¸ˆ</b></span>
        <br>
        <span style="margin-left: 10px; font-weight: bold; color: white">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å‡ºå¤„ï¼š<a style="text-decoration: none; color: blue" href="https://www.cnblogs.com/Firepad-magic/" target="_blank">https://www.cnblogs.com/Firepad-magic/</a></span>
        <br>
        <span style="margin-left: 10px; font-weight: bold; color: white">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unityæœ€å—æ¬¢è¿æ’ä»¶æ¨èï¼š<a style="text-decoration: none; color: blue" href="https://assetstore.unity.com/lists/top-paid-packages-13200?aid=1011l5dHP" target="_blank">ç‚¹å‡»æŸ¥çœ‹</a></span>
        <br>
        <span style="margin-left: 10px; font-weight: bold; color: white">æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚</span>
    </p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.18738466542708335" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-05 16:01">2025-06-05 16:01</span>&nbsp;
<a href="https://www.cnblogs.com/Firepad-magic">ä¸–çºªæœ«ã®é­”æœ¯å¸ˆ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">101</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18912554);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18912554', targetLink: 'https://www.cnblogs.com/Firepad-magic/p/18912554', title: 'C# NativeAOTç”Ÿæˆ.so åº“ä¾›Linuxä¸‹C++è°ƒç”¨' })">ä¸¾æŠ¥</a>
</div>
        
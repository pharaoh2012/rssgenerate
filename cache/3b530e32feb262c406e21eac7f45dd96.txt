
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ylxin/p/18735013" title="发布于 2025-02-24 22:12">
    <span role="heading" aria-level="2">webgpu学习问题，遇到了create graphics pipeline state failed错误</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>&nbsp;</p>
<p><span style="font-size: 15px">在学习webgpu并渲染图像时发生create graphics pipeline state failed with E_INVALIDARG (0x80070057)错误，图像无法成功渲染。</span></p>
<p><span style="font-size: 15px">html代码：</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:html;collapse:true;;gutter:true;"><span style="font-size: 15px">const pipeline = device.createRenderPipeline({
            // 管线布局配置
            layout: 'auto',
            // 顶点着色器配置
            vertex: {//顶点相关配置
                module: device.createShaderModule({code: vertex}),
                entryPoint: "main",
                buffers: [// 顶点所有的缓冲区模块设置
                    {//其中一个顶点缓冲区设置
                        arrayStride: 3*4,//一个顶点数据占用的字节长度，该缓冲区一个顶点包含xyz三个分量，每个数字是4字节浮点数，3*4字节长度
                        attributes: [{// 顶点缓冲区属性
                            shaderLocation: <span style="color: rgba(255, 0, 0, 1)">0</span>,//GPU显存上顶点缓冲区标记存储位置
                            format: "float32x3",//格式：loat32x3表示一个顶点数据包含3个32位浮点数
                            offset: 0//arrayStride表示每组顶点数据间隔字节数，offset表示读取改组的偏差字节数，没特殊需要一般设置0
                        }]
                    }
                ]
            },
            // 片元着色器配置
            fragment: {
                module: device.createShaderModule({code: fragment}),
                entryPoint: "main",
                targets: [{
                    format: format
                }],
            },
            // 绘制图元配置
            primitive: {
                topology: "triangle-list",//三角形绘制顶点数据
            }
        });</span></pre>
</div>
<p><span style="font-size: 15px">wgsl代码：</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:javascript;gutter:true;"><span style="font-size: 15px">//顶点着色器代码
const vertex = /*wgsl*/`
    @vertex
    fn main(@location(<span style="color: rgba(255, 0, 0, 1)">0</span>) pos: vec3&lt;f32&gt;) -&gt; @builtin(position) vec4&lt;f32&gt;{
        // var pos2 = vec4&lt;f32&gt;(pos,1.0);//pos转齐次坐标
        // pos2.x -= 0.2;//所有的顶点x坐标偏移0.2
        // return pos2;//返回顶点数据，渲染管线下个环节使用
        return vec4&lt;f32&gt;(pos,1.0);
    }
`;
</span></pre>
</div>
<p><span style="font-size: 15px">　　</span></p>
<p><span style="font-size: 15px">问题：经过一系列测试发现一个不理解的错误。<span style="color: rgba(255, 0, 0, 1)">当管线shaderLocation: 0 ；顶点着色器@location(0)不能正常显示</span>，会出现create graphics pipeline state failed with E_INVALIDARG (0x80070057)错误。但当我将这两个值修改为1，图像正常渲染。令人费解！有懂得大神指教一下</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 15px">&nbsp;</span></p>
<p>&nbsp;</p>
</div>
<div id="MySignature" role="contentinfo">
    学向勤中得，萤窗万卷书。
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.003207928443287037" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-24 22:12">2025-02-24 22:12</span>&nbsp;
<a href="https://www.cnblogs.com/ylxin">云淡风轻YangG</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18735013" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18735013);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18735013', targetLink: 'https://www.cnblogs.com/ylxin/p/18735013', title: 'webgpu学习问题，遇到了create graphics pipeline state failed错误' })">举报</a>
</div>
        
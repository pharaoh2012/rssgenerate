
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deali/p/18676667" title="发布于 2025-01-17 11:51">
    <span role="heading" aria-level="2">在 Windows 10 上实现免密码 SSH 登录</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="前言">前言</h2>
<p>在日常开发中，SSH（Secure Shell）作为一种安全的远程登录协议，广泛用于 Linux 和 Windows 系统之间的连接。为了提高效率，我们可以通过配置免密码登录，省去每次连接时输入密码的繁琐过程。</p>
<p>本文将详细介绍如何在 Windows 10 上配置 SSH 免密码登录，类似于 Linux 系统上的 <code>ssh-add</code> 功能。</p>
<h2 id="1-准备工作确保-openssh-已安装">1. <strong>准备工作：确保 OpenSSH 已安装</strong></h2>
<p>在开始配置之前，确保你的 Windows 10 上已安装 OpenSSH 客户端。这里我们先检查并安装 OpenSSH：</p>
<ul>
<li>打开 <strong>设置</strong> -&gt; <strong>应用</strong> -&gt; <strong>可选功能</strong>，查找是否有 <strong>OpenSSH 客户端</strong> 和 <strong>OpenSSH 服务</strong>。</li>
<li>如果没有安装，点击 <strong>添加功能</strong>，选择 <strong>OpenSSH 客户端</strong> 进行安装。</li>
</ul>
<h2 id="2-启动-openssh-authentication-agent">2. <strong>启动 OpenSSH Authentication Agent</strong></h2>
<p>要实现免密码登录，我们需要启用 <code>ssh-agent</code> 服务，这个服务负责存储和管理 SSH 密钥。</p>
<ul>
<li>打开 <strong>服务管理器</strong>：按下 <code>Win + R</code>，输入 <code>services.msc</code>，然后回车。</li>
<li>在服务列表中找到 <strong>OpenSSH Authentication Agent</strong>，右键点击并选择 <strong>启动</strong>，然后将启动类型设置为 <strong>自动</strong>。</li>
</ul>
<p>或者，你也可以通过 PowerShell 来启动 <code>ssh-agent</code> 服务：</p>
<pre><code class="language-powershell">Start-Service ssh-agent
Set-Service -Name ssh-agent -StartupType Automatic
</code></pre>
<h2 id="3-生成-ssh-密钥对">3. <strong>生成 SSH 密钥对</strong></h2>
<p>如果你还没有生成 SSH 密钥，可以通过以下步骤创建：</p>
<ol>
<li>
<p>打开终端（命令提示符或者 PowerShell）。</p>
</li>
<li>
<p>输入以下命令生成 SSH 密钥：</p>
<pre><code class="language-bash">ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
</code></pre>
<p>按提示操作（默认存储路径为 <code>~/.ssh/id_rsa</code>）。</p>
</li>
<li>
<p>输入密钥存储位置和密码（如果不想设置密码，可以直接按回车跳过）。</p>
</li>
</ol>
<h2 id="4-将-ssh-密钥添加到-ssh-agent">4. <strong>将 SSH 密钥添加到 ssh-agent</strong></h2>
<p>接下来，需要将生成的私钥添加到 <code>ssh-agent</code> 中，以便在连接时自动使用密钥进行认证。</p>
<ol>
<li>
<p>打开终端（命令提示符或者 PowerShell）。</p>
</li>
<li>
<p>输入以下命令加载密钥：</p>
<pre><code class="language-bash">ssh-add ~/.ssh/id_rsa
</code></pre>
</li>
</ol>
<p>这样，<code>ssh-agent</code> 就会管理你的私钥，免去每次连接时输入密码的需求。</p>
<h2 id="5-将公钥复制到远程服务器">5. <strong>将公钥复制到远程服务器</strong></h2>
<p>为了让远程服务器识别你的 SSH 密钥，你需要将公钥添加到服务器的 <code>~/.ssh/authorized_keys</code> 文件中。你可以手动复制公钥，或者使用 <code>ssh-copy-id</code> 工具来完成：</p>
<ol>
<li>
<p>复制公钥：</p>
<pre><code class="language-bash">cat ~/.ssh/id_rsa.pub
</code></pre>
</li>
<li>
<p>将公钥复制到远程服务器的 <code>~/.ssh/authorized_keys</code> 文件中。</p>
</li>
</ol>
<p>如果你使用 <code>ssh-copy-id</code>，命令如下：</p>
<pre><code class="language-bash">ssh-copy-id user@remote_host
</code></pre>
<h2 id="6-测试免密码-ssh-登录">6. <strong>测试免密码 SSH 登录</strong></h2>
<p>完成以上配置后，你可以尝试连接远程服务器：</p>
<pre><code class="language-bash">ssh user@remote_host
</code></pre>
<p>如果配置成功，你将无需输入密码即可直接连接。</p>
<h2 id="总结">总结</h2>
<p>通过以上步骤，你可以轻松实现 Windows 10 上的免密码 SSH 登录功能，类似于 Linux 上的 <code>ssh-add</code>。这种配置不仅提升了连接的效率，也使得远程管理变得更加便捷和安全。如果遇到任何问题，可以参考本文的解决步骤进行排查。</p>
<h2 id="参考资料">参考资料</h2>
<ul>
<li>OpenSSH 官网 - <a href="https://www.openssh.com/" target="_blank" rel="noopener nofollow">https://www.openssh.com/</a></li>
<li>Windows 10 OpenSSH 客户端文档 - <a href="https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse" target="_blank" rel="noopener nofollow">https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    微信公众号：「程序设计实验室」
专注于互联网热门新技术探索与团队敏捷开发实践，包括架构设计、机器学习与数据分析算法、移动端开发、Linux、Web前后端开发等，欢迎一起探讨技术，分享学习实践经验。
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.6821303936111112" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-17 11:52">2025-01-17 11:51</span>&nbsp;
<a href="https://www.cnblogs.com/deali">程序设计实验室</a>&nbsp;
阅读(<span id="post_view_count">353</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18676667" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18676667);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18676667', targetLink: 'https://www.cnblogs.com/deali/p/18676667', title: '在 Windows 10 上实现免密码 SSH 登录' })">举报</a>
</div>
        
<!----> <meta itemprop="headline" content="🏆🚀🎉前端开发，实现头像从圆圈⭕️伸出来的效果🕳"> <meta itemprop="keywords" content="前端,CSS"> <meta itemprop="datePublished" content="2024-11-25T02:43:44.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="盏灯"> <meta itemprop="url" content="https://juejin.cn/user/3122268754677774"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-7cdd11fb="">
            🏆🚀🎉前端开发，实现头像从圆圈⭕️伸出来的效果🕳
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-7cdd11fb=""><div class="author-info-box" data-v-7cdd11fb=""><div class="author-name" data-v-7cdd11fb=""><a href="/user/3122268754677774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-1800aadb="" data-v-7cdd11fb=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-1800aadb="">
    盏灯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-7cdd11fb=""><time datetime="2024-11-25T02:43:44.000Z" title="Mon Nov 25 2024 02:43:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-7cdd11fb="">
                    2024-11-25
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-7cdd11fb=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-7cdd11fb=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-7cdd11fb=""></circle></svg> <span class="views-count" data-v-7cdd11fb="">
                    9,540
                  </span> <span class="read-time" data-v-7cdd11fb=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7cdd11fb=""><rect width="16" height="16" fill="none" data-v-7cdd11fb=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-7cdd11fb=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-7cdd11fb=""></path></svg>
                    阅读8分钟
                  </span> <!----></div></div> <div style="flex:1;" data-v-7cdd11fb=""></div> <!----> <!----></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-7cdd11fb=""><div class="article-viewer markdown-body result"><h2 data-id="heading-0">🔴 前言</h2>
<blockquote>
<p>动机 <br>
<code>问</code>：为什么要写这篇？ <br>
<code>答</code>：之前在一个国外网站看过这个动画，当时扪心自问了一下：”让你来做你怎么做，会做吗，要多久...“</p>
</blockquote>
<blockquote>
<p>自己想了一些方案，最后陷入深深的沉思...</p>
</blockquote>
<p>这里引用罗翔老师的一句话吧：说真的，你对这个专业的知识，你可能连1%都掌握不了。承认自己的无知，乃是开启智慧的大门。</p>
<p>所以，有了这篇文的记录📝。</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpeeps.ui8.net%2F" target="_blank" title="https://peeps.ui8.net/" ref="nofollow noopener noreferrer">3d卡通人物头像</a></p>
<p>效果：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a9fd176820949a197cc57cad4882f15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=UNWP55XNesxwY2BlcX5vsbuJa3k%3D" alt="cover1.gif" loading="lazy"></p>
<h2 data-id="heading-1">🔴 正文</h2>
<h3 data-id="heading-2">⭕ 思路</h3>
<h4 data-id="heading-3"><code>简单</code>画背景和边</h4>
<blockquote>
<p>给我们来做，可能首当其冲冒出来的第一个思路</p>
</blockquote>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"avatar"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./avatar.png"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
  }

  <span class="hljs-selector-class">.avatar</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">280px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">280px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ecd078</span>;
  }

  <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.5s</span>;
  }

  <span class="hljs-selector-class">.avatar</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.2</span>);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><code>div</code>套<code>图</code>，都<code>设</code>为<code>圆</code>。鼠标<code>移入</code>，图放<code>大</code>。</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eaa79de66ee4f88b05d7e6fd80764e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=nB76sLS1aYhEWet7xYNePtsXsSc%3D" alt="cover2.gif" loading="lazy"></p>
<p>没达到我们要的效果。</p>
<p>再来。</p>
<h4 data-id="heading-4"><code>径向渐变</code>画背景和边</h4>
<p>1、不搞border，搞<code>径向渐变</code>画背景（其中背景包括 <code>色+边</code>）。</p>
<p>2、用<code>outline</code>代替border。<br>
区别:（1）、outline不占空间，画在周围
说明：属性可使用以下（1、2、3）任意一个值来声明，顺序不重要 -&gt; <code>outline: color style width offset</code>。</p>
<p>3、<code>大</code>色块用<code>黄</code>色，<code>边</code>框用<code>红</code>色。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attr">--backgroundColor</span>: <span class="hljs-number">#ecd078</span>;
<span class="hljs-attr">--borderColor</span>: <span class="hljs-number">#c02942</span>;
</code></pre>
<p><strong>(1)</strong> 大色块黄色扩散，是个圆。<br>
<strong>(2)</strong> 用<code>closest-side</code>最短边做圆的半径。<br>
<strong>(3)</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2Fgradient%2Fradial-gradient" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/radial-gradient" ref="nofollow noopener noreferrer"><code>background: radial-gradient()</code></a>：用来创渐变背景的，我们这整个效果，能做到这个，其实中心思想还是<code>靠渐变</code>去<code>画色</code>的。</p>
<hr>
<p><strong>小课堂</strong>：</p>
<p>-- <strong>本质</strong>：从元素的背景的中心去画颜色，从内而外去渐变。<br>
-- <strong>参数</strong>：各个参数的怎么定怎么设 ---&gt; <br>
<code>background: radial-gradient(circle at center, red 0, blue, green 100%)</code> <br>
说的是：在容器中心的渐变，从红开始，然后蓝，最后绿。<br>
从红渐变到蓝色，绿色在100%的位置，蓝色的范围填充了整个渐变区域，<br>
绿色设置在最后位置，将不会显示出来。</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df9ab9ceb591478ea8bd99a9c0a3b125~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=XlGpC1hujgcq5FXFnadxIzqAK18%3D" alt="image.png" loading="lazy"></p>
<p>如果想要看到绿色，那么调整<code>100%</code>为<code>50%</code>，像这样<code>background: radial-gradient(circle at center, red 0, blue, green 50%);</code>：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d09aca675f07481fb72469577bea4695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=Nv4p5w8P8lb01I2Dg0W%2BSL%2FmUmI%3D" alt="image.png" loading="lazy"></p>
<hr>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(
    circle closest-side, 
    <span class="hljs-built_in">var</span>(--backgroundColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)), 
    <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)), 
    <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-number">100%</span>, 
    green <span class="hljs-number">100%</span>);
</code></pre>
<p><code>closest-side</code>用来指定径向渐变的<code>尺寸</code>。<br>
以背景的最近的边作为渐变的尺寸。<br>
宽度都要减去边的宽。（用calc计算属性<code>calc(100% - var(--borderWidth))</code>）<br>
也就是说，渐变从中心到最近的边去画。</p>
<p>通过<code>background</code>径向渐变去<code>画背景</code>和<code>边</code>框的效果是这样的;</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3e326b197634fbbb42e562b8195f1d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=jYbo0vVM%2BS0b9zQRZNZ2y2WB160%3D" alt="cover3.gif" loading="lazy"></p>
<h4 data-id="heading-5">鼠标进去，人大，但景不得大。</h4>
<p>设背景图，(1)、不重复；(2)、居中。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(
    circle closest-side, 
    <span class="hljs-built_in">var</span>(--backgroundColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)), 
    <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)), 
    <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-number">100%</span>, 
    green <span class="hljs-number">100%</span>) no-repeat center;
</code></pre>
<p>当scale(2)，那么背景要½，才能保持原样。<code>½ x 2 = 1</code>这样。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
    <span class="hljs-attr">--size</span>: <span class="hljs-number">280px</span>;

    <span class="hljs-attr">--backgroundColor</span>: <span class="hljs-number">#ecd078</span>;
    <span class="hljs-attr">--borderColor</span>: <span class="hljs-number">#c02942</span>;

    <span class="hljs-attr">--borderWidth</span>: <span class="hljs-number">5px</span>;

    <span class="hljs-attr">--scaleTimes</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* 放大倍数 */</span>

    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">var</span>(--size);
    <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--size);

    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;

    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle closest-side,
        <span class="hljs-built_in">var</span>(--backgroundColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)),
        <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> - <span class="hljs-built_in">var</span>(--borderWidth)),
        <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-number">100%</span>, green <span class="hljs-number">100%</span>) no-repeat center / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">100%</span>;

    <span class="hljs-attribute">transition</span>: <span class="hljs-number">0.5s</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-built_in">var</span>(--scaleTimes));
 }

<span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:hover</span> {
    // <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.35</span>)
    --scaleTimes: <span class="hljs-number">1.35</span>
}
</code></pre>
<p><code>no-repeat center / calc(100% / var(--scaleTimes)) 100%</code> <br>
背景<code>横</code>向<code>尺</code>寸设置为<code>calc(100% / 放大倍数)</code></p>
<p>鼠标移入，改变<code>--scaleTimes</code>，背景横尺寸根据这个放大倍数改而改。</p>
<p>效果如下：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7556778547744e5f9be5e37afeeda079~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=6bKhPgviJ5HbaudAi808nvS29Z8%3D" alt="cover4.gif" loading="lazy"></p>
<p>是不是有那<code>味</code>了。<br>
<code>人大</code>，<code>背景</code>保持<code>不变</code>。<br>
用<code>变量</code>去搞背景的<code>尺寸</code>问题，使背景保持不变。</p>
<p>至于那个绿色，还记得吗？是这一部分，延伸到四面八方的，设置了<code>green</code>，也就是这个值：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc428c30e6d24d72b8429f859009e619~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=0sHT2pl6SBisotSktesVLC19x7I%3D" alt="image.png" loading="lazy"></p>
<h4 data-id="heading-6">连接红线</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61a9aa3667d1442b8cd61a2643c1a9c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=Q8GrT5z29PS2swz0mhW5PFqR5uw%3D" alt="image.png" loading="lazy"></p>
<p>借助<code>outline</code>画线。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">outline</span>: <span class="hljs-built_in">var</span>(--borderWidth) solid <span class="hljs-built_in">var</span>(--borderColor);
<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">999px</span> <span class="hljs-number">999px</span>;
<span class="hljs-attribute">outline-offset</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">0px</span> - <span class="hljs-built_in">var</span>(--borderWidth)); // 即<span class="hljs-attribute">border</span>的offset设置为-<span class="hljs-number">5px</span>，目的是为了跟原来的渐变画的<span class="hljs-attribute">border</span>重叠。
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e127ec39f77c44a3b1b9897678764b76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=U0XHDp13Ot3d7C%2B90pDiIiaGbC4%3D" alt="cover5.gif" loading="lazy"></p>
<p>鼠标进，outline边的尺寸保持不变，所以<code>outline-offset</code>要动态变。</p>
<p><code>offset</code>的值(也就是变化的差距的值)的计算，就是<code>放大后的宽度</code>减去<code>原来的宽度</code>除以<code>2</code>.</p>
<p>就是<code>(size * scaleTimes - size) / 2</code>。</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e69154add7614ff98138241d27ee92c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=mH%2B420cb7OojZqF3%2B1g25O0dhG0%3D" alt="image.png" loading="lazy"></p>
<p>再就是要除以一个放大倍率<code>(size * scaleTimes - size) / 2 / scaleTimes</code>，得到真正被收缩的值。</p>
<p><code>(size * scaleTimes - size) / 2 / scaleTimes 最终会得到 (size - size / scaleTimes) / 2</code></p>
<blockquote>
<p>注：<br>
<code>(size * scaleTimes - size) / 2 / scaleTimes</code>最后再去除以scaleTimes的意思是，如果宽度是200的话，咱offset最多顶天了就是-100，也就是缩到极限了，缩到中心点了。我们没有除以倍率是因为我们一开始假设默认的倍率是1的情况。</p>
<p>放大到无限大的时候，这个offset的差距值就远远超过100，所以，正确的最终计算还要除以倍率。也就是<code>(size * scaleTimes - size) / 2 / scaleTimes</code></p>
</blockquote>
<hr>
<p><code>计算过程</code>：</p>
<p>x是size, y是scaleTimes：</p>
<p>上面式子简化成这样：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85557eda7da64888b5cc9920a202c56d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=Tc%2FIir5REXuZ0GPo0tdrKSpkZdo%3D" alt="image.png" loading="lazy"></p>
<p>然后拆成这样：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cddf6fcd3bf04be6a0223581f4257c84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=1kAGsbb5lNrZwRKBNXD6GOn2n4s%3D" alt="image.png" loading="lazy"></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62d4a30abfe14a8b905a86b0ff3782dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=8FpLWeRSNZz%2FfUdBwDD8GdalQjM%3D" alt="image.png" loading="lazy"></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7827897076f547c7b2e2dd513c58d7b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=XH%2FqE7Tx13zoTll29Nj1dL0UEqU%3D" alt="image.png" loading="lazy"></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e024ff13fc041b8952efd562cbd141c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=l2P7aEYDKXsp1Fxz0GcaDj%2BTGr0%3D" alt="image.png" loading="lazy"></p>
<p>也就是<code>(size - size / scaleTimes) / 2</code>。 这个得到是正数。收缩的offset是个负值，那么就是反过来<code>(size / scaleTimes - size) / 2</code></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">outline-offset</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-built_in">var</span>(--size) / <span class="hljs-built_in">var</span>(--scaleTimes) - <span class="hljs-built_in">var</span>(--size)) / <span class="hljs-number">2</span> - <span class="hljs-built_in">var</span>(--borderWidth));
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23794e0474a04516a2a519fe16ac03e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=xWLpj9fvTebKZ8jj8mJqphpHYCM%3D" alt="cover6.gif" loading="lazy"></p>
<h4 data-id="heading-7">防挡发</h4>
<p>加<code>padding-top</code>:</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">padding-top</span>: <span class="hljs-number">100px</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70918401522f4e8190ed7fa86bd4ffee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=zZBHA4xc2HETGOAgY%2B5%2FvZrlepU%3D" alt="cover7.gif" loading="lazy"></p>
<p>挡是不挡了，
但是<code>味</code>不对了，人下移了。</p>
<p>那么，设置背景图就搞content的内容就好了，padding不要管它就行了。也就是说，设个<code>content-box</code>给背景图叫它只管content，不管padding。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle closest-side,
            <span class="hljs-built_in">var</span>(--backgroundColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">99%</span> - <span class="hljs-built_in">var</span>(--borderWidth)),
            <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-built_in">calc</span>(<span class="hljs-number">99%</span> - <span class="hljs-built_in">var</span>(--borderWidth)),
            <span class="hljs-built_in">var</span>(--borderColor) <span class="hljs-number">100%</span>, green <span class="hljs-number">100%</span>) no-repeat center / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">100%</span> content-box;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/101793fac1b343d7b1806e6a1b118d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=uQzLt95HiVdZqwKS3MJuWr%2Fz69M%3D" alt="cover8.gif" loading="lazy"></p>
<p>已经完成了差不多全部了。<br>
但是圈外的东西能不能<code>不要了</code>。</p>
<p>如果想要一个东西<code>看不到</code>，<br>
我们就一股脑要不是overflow hidden，要不就是<code>用mask</code>。</p>
<h4 data-id="heading-8">多余的，不要</h4>
<p>加<code>mask</code>：</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">mask</span>: <span class="hljs-built_in">radial-gradient</span>(circle closest-side, <span class="hljs-number">#000</span> <span class="hljs-number">99%</span>, transparent) content-box no-repeat center / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">100%</span>;
</code></pre>
<p>这个mask途径的地方才显示，其他的都不显示。</p>
<p>所以我们拿上面那个渐变的圆来搞这个mask的圆。就可以了。</p>
<p>效果如下：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1610c5bbfa6740859c729aea2916aa87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=VScNk3wfcOEs4V0%2BS21YshNwkmU%3D" alt="cover9.gif" loading="lazy"></p>
<p>那圆外的头被搞掉了。</p>
<p>那么接着。</p>
<h4 data-id="heading-9">遮罩的区域</h4>
<p>区域范围：</p>
<p><strong>遮罩区域：上面一部分 + 下面头像那个正圆</strong>。</p>
<h5 data-id="heading-10"><code>mask上面部分</code></h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9df5ae4438a4890b0b8efc656eb897b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=PbmSSO0iMHe6JKVxOijCTo458hk%3D" alt="image.png" loading="lazy"></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#000</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) no-repeat center; // 全黑的渐变
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9de803f98d1c4d70867a301ea9ca0196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=hjdTe7CQF6sN55mBTT%2F%2FSVk6HEw%3D" alt="cover10.gif" loading="lazy"></p>
<p>看鼠标移入的效果，背景变大了，但是呢边<code>outline</code>没动。所以，背景要下移，至于下移多少，就看outline的收缩距离的值，也就是<code>outline-offset</code>这个值。</p>
<p>加个收缩变量值<code>--shrink</code>:</p>
<pre><code class="hljs language-css" lang="css">// <span class="hljs-attribute">border</span>收缩的变量
<span class="hljs-attr">--shrink</span>: <span class="hljs-built_in">calc</span>((<span class="hljs-built_in">var</span>(--size) / <span class="hljs-built_in">var</span>(--scaleTimes) - <span class="hljs-built_in">var</span>(--size)) / <span class="hljs-number">2</span> - <span class="hljs-built_in">var</span>(--borderWidth));

<span class="hljs-attribute">outline-offset</span>: <span class="hljs-built_in">var</span>(--shrink);
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#000</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) no-repeat center <span class="hljs-built_in">calc</span>(<span class="hljs-number">0px</span> - <span class="hljs-built_in">var</span>(--shrink));
</code></pre>
<p>至于为啥<code>0px - 收缩值</code>，因为这个收缩值是负数，我们背景是要下移，所以<code>0 减去一个负数</code>得正数，就是下移的距离。</p>
<p>所以得到的效果如下：</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04f8d56a25f24f34a60784aa6f00794e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=IuAgL4De4q7pNua%2BIxZRYyl%2B%2FC0%3D" alt="cover11.gif" loading="lazy"></p>
<p>接下来就是mask的尺寸了，你看上面效果是不是黑色区域随着鼠标进去，变大了。我们要它鼠标进去，不要大，就是跟之前圈圈一样，鼠标一进去头像大两倍，但背景保持不变，也就是乘以二分之一。</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#000</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) no-repeat center <span class="hljs-built_in">calc</span>(<span class="hljs-number">0px</span> - <span class="hljs-built_in">var</span>(--shrink)) / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">50%</span>;
</code></pre>
<p>注意这里：纵向写50%就好了。</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dde058016df4913a8e1ef4046a69f7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=Rr%2B9U35Z%2Ba1SBv3zyGLZtOdRBys%3D" alt="cover12.gif" loading="lazy"></p>
<p>这样，mask遮罩上面部分就完成了。</p>
<h5 data-id="heading-11"><code>mask下面部分</code></h5>
<p>下面部分是个圆。<code>radial-gradient(circle closest-side, #000 99%, transparent) var(--backgroundOption)</code></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attr">--backgroundOption</span>: content-box no-repeat center / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">100%</span>;


-webkit-<span class="hljs-attribute">mask</span>: 
    <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#000</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) no-repeat center <span class="hljs-built_in">calc</span>(<span class="hljs-number">0px</span> - <span class="hljs-built_in">var</span>(--shrink)) / <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span> / <span class="hljs-built_in">var</span>(--scaleTimes)) <span class="hljs-number">50%</span>, 
    <span class="hljs-built_in">radial-gradient</span>(circle closest-side, <span class="hljs-number">#000</span> <span class="hljs-number">99%</span>, transparent) <span class="hljs-built_in">var</span>(--backgroundOption);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a66efba0805440d392645ce69f5e1e9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=7hAF5tFqbK47wMGIPyRGZjV5bYo%3D" alt="cover13.gif" loading="lazy"></p>
<p>接下来就是要去除上面那两条竖边框。就是也是用<code>mask</code>去<code>遮</code>。</p>
<p>横向的背景就是<code>减</code>去<code>两</code>边的<code>竖</code>线的宽度：<code>calc(99% / var(--scaleTimes) - 2 * var(--borderWidth))</code>。</p>
<pre><code class="hljs language-css" lang="css">-webkit-<span class="hljs-attribute">mask</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#000</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) no-repeat center <span class="hljs-built_in">calc</span>(<span class="hljs-number">0px</span> - <span class="hljs-built_in">var</span>(--shrink)) / <span class="hljs-built_in">calc</span>(<span class="hljs-number">99%</span> / <span class="hljs-built_in">var</span>(--scaleTimes) - <span class="hljs-number">2</span> * <span class="hljs-built_in">var</span>(--borderWidth)) <span class="hljs-number">50%</span>, <span class="hljs-built_in">radial-gradient</span>(circle closest-side, <span class="hljs-number">#000</span> <span class="hljs-number">99%</span>, transparent) <span class="hljs-built_in">var</span>(--backgroundOption);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/775dcd75f7dd463d942966a53c0dd268~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55uP54Gv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1738017663&amp;x-signature=YrajwHGzsqtlKRxs3YW8tAAfqmc%3D" alt="cover14.gif" loading="lazy"></p>
<p>至此遮罩写完。</p>
<p>头出洞🕳效果也随之完成。</p>
<h2 data-id="heading-12">🔴 总结</h2>
<p>真的，我觉得前端把css<code>玩</code>得特<code>溜</code>的人绝非等闲之辈。<br>
你说，我js可能不会的能查上一查，<br>
css那些风骚奇淫怪技的一些效果，肚子里没点存货没点墨水，ddl延后多久，想破脑袋可能做出来都没达到完美交稿的效果。</p>
<blockquote>
<p>☎️ 希望对大家有所帮助，本文有些地方可能考虑不够周到，有些纰漏，就当抛砖引玉，还望您海涵，如有错误，望不吝赐教，欢迎评论区留言互相学习。感谢阅读，祝您开发有乐趣。</p>
</blockquote></div></div>
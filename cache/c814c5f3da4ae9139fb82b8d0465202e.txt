
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/datawalkman/p/18677724" title="发布于 2025-01-17 21:52">
    <span role="heading" aria-level="2">ubuntu mysql 通过ip登录指南</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h3>详细步骤：</h3>
<h3>1. 安装mysql</h3>
<p>首先，在ubuntu上安装mysql，打开终端，并执行以下命令：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">sudo</span> apt-<span style="color: rgba(0, 0, 0, 1)">get update
</span><span style="color: rgba(0, 128, 128, 1)">2</span> <span style="color: rgba(0, 0, 255, 1)">sudo</span> apt-get <span style="color: rgba(0, 0, 255, 1)">install</span> mysql-server</pre>
</div>
<h3><span style="font-size: 15px">2. 登录 MySQL</span></h3>
<div>
<p>首先，使用 MySQL 的 root 用户登录到 MySQL 服务器：</p>
<div>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">sudo</span> mysql -u root -p</pre>
</div>
<p>系统会提示你输入 root 用户的密码。默认是空，直接回车即可；</p>
<h3>3. 创建数据库用户</h3>
</div>
<div class="md-code-block">&nbsp;假设创建一个名为&nbsp;<code>shaun</code>&nbsp;的用户，并设置密码为&nbsp;<code>shaun001</code><span style="font-family: &quot;Courier New&quot;; font-size: 12px; background-color: rgba(245, 245, 245, 1); font-style: italic"><br></span></div>
<div class="md-code-block">
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> CREATE USER <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">%</span><span style="color: rgba(128, 0, 0, 1)">'</span> IDENTIFIED BY <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun001</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">2</span> GRANT ALL PRIVILEGES ON *.* TO <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">%</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">3</span> FLUSH PRIVILEGES;</pre>
</div>
<p>这里要注意：第一行代码中，'%'&nbsp; 标识允许任何ip访问，如果要限制ip，可以改为</p>
<div class="cnblogs_code">
<pre>CREATE USER <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">192.168.1.100</span><span style="color: rgba(128, 0, 0, 1)">'</span> IDENTIFIED BY <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun001</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;   //只允许192.168.1.100 的ip 以shaun访问

或者</span></pre>
<pre>CREATE <span>USER </span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">localhost</span><span style="color: rgba(128, 0, 0, 1)">' </span>IDENTIFIED BY 'shaun001'; //只允许localhost 的域名以shaun访问</pre>
</div>
<p>第二行代码 *.* 意为所有数据库，可以改为&nbsp;&nbsp;GRANT ALL PRIVILEGES ON database_name.* TO 'shaun'@'%';</p>
<p>如果已经存在一个&nbsp;'shaun'@'localhost' ，可以通过以下代码更改权限：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> RENAME USER <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">localhost</span><span style="color: rgba(128, 0, 0, 1)">'</span> TO <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">%</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">2</span> GRANT ALL PRIVILEGES ON *.* TO <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">%</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">3</span> <span style="color: rgba(0, 0, 0, 1)">FLUSH PRIVILEGES;
</span><span style="color: rgba(0, 128, 128, 1)">4</span> quit;</pre>
</div>
<p>第三行代码含义是刷新权限表，从而实现立刻生效;&nbsp; &nbsp;第四行代码 退出mysql&nbsp;</p>
<h3><span style="font-size: 15px">4. 配置mysql 绑定地址</span></h3>
<p>默认情况下，MySQL 只监听本地连接。要允许远程访问，需要修改 MySQL 配置文件：</p>
<ol start="1">
<li>
<p>打开 MySQL 配置文件（通常位于&nbsp;<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>&nbsp;或&nbsp;<code>/etc/my.cnf</code>）：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">sudo</span> nano /etc/mysql/mysql.conf.d/mysqld.cnf</pre>
</div>
<p>&nbsp;</p>
</li>
<li>找到&nbsp;<code>bind-address</code>&nbsp;这一行，将其值从&nbsp;<code>127.0.0.1</code>&nbsp;改为&nbsp;<code>0.0.0.0</code>（允许所有 IP 访问）或特定的 IP 地址：<br><span style="font-family: &quot;Courier New&quot;; font-size: 12px; background-color: rgba(245, 245, 245, 1)">&nbsp;bind-address = 0.0.0.0</span></li>
<li>保存文件：按&nbsp;<code>Ctrl + O</code>（字母“O”，不是数字零）。这将提示您确认文件名，按下&nbsp;<code>Enter</code>键保存。<br>退出 nano：按&nbsp;<code>Ctrl + X</code>&nbsp;进行退出。</li>
<li>&nbsp;重启mysql服务器以使更改生效：
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">sudo</span> systemctl restart mysql</pre>
</div>
</li>
</ol>
<h3>5.&nbsp;防火墙配置</h3>
<p>　　如果服务器启用了防火墙（如&nbsp;<code>ufw</code>），需要允许 MySQL 的默认端口（3306）的访问：　　</p>
<div class="cnblogs_code" style="margin-left: 30px">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> <span style="color: rgba(0, 0, 255, 1)">sudo</span> ufw allow <span style="color: rgba(128, 0, 128, 1)">3306</span>/tcp</pre>
</div>
<h3>6. 测试远程连接　　</h3>
<div class="cnblogs_code" style="margin-left: 30px">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> mysql -h 192.168.1.100 -u shaun -p</pre>
</div>
<p>　　输入shaun 对应的密码，确认即可，根据结果提示，看是否成功</p>
<h3>7. 撤销权限（如果需要）<span style="font-size: 14px">　　</span></h3>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 128, 1)">1</span> REVOKE ALL PRIVILEGES ON *.* FROM <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">shaun</span><span style="color: rgba(128, 0, 0, 1)">'</span>@<span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">%</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
</span><span style="color: rgba(0, 128, 128, 1)">2</span> FLUSH PRIVILEGES;</pre>
</div>
<p>这将移除用户&nbsp;<code>shaun</code>&nbsp;对所有数据库的所有权限。</p>
<br>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>


</div>


</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.010865433688657408" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-17 21:58">2025-01-17 21:52</span>&nbsp;
<a href="https://www.cnblogs.com/datawalkman">数据行者</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18677724" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18677724);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18677724', targetLink: 'https://www.cnblogs.com/datawalkman/p/18677724', title: 'ubuntu mysql 通过ip登录指南' })">举报</a>
</div>
        
<!----> <meta itemprop="headline" content="海康摄像头 web 对接"> <meta itemprop="keywords" content="前端,HTML,Vue.js"> <meta itemprop="datePublished" content="2024-12-18T09:25:45.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="哪里的破水瓶"> <meta itemprop="url" content="https://juejin.cn/user/4394111849466414"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-fcbde74a="">
            海康摄像头 web 对接
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-fcbde74a=""><div class="author-info-box" data-v-fcbde74a=""><div class="author-name" data-v-fcbde74a=""><a href="/user/4394111849466414/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-1800aadb="" data-v-fcbde74a=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-1800aadb="">
    哪里的破水瓶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-fcbde74a=""><time datetime="2024-12-18T09:25:45.000Z" title="Wed Dec 18 2024 09:25:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-fcbde74a="">
                    2024-12-18
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-fcbde74a=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-fcbde74a=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-fcbde74a=""></circle></svg> <span class="views-count" data-v-fcbde74a="">
                    12,115
                  </span> <span class="read-time" data-v-fcbde74a=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-fcbde74a=""><rect width="16" height="16" fill="none" data-v-fcbde74a=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-fcbde74a=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-fcbde74a=""></path></svg>
                    阅读5分钟
                  </span> <!----></div></div> <div style="flex:1;" data-v-fcbde74a=""></div> <!----> <!----></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-fcbde74a=""><div class="article-viewer markdown-body result"><p>真的烦躁，一个月拿着死工资，每天写着增删改查，不知道以后能做什么，有时候真的想离职，进广东电子厂....</p>
<p>这段时间，XXXX 要加一个海康监控，哎。</p>
<h2 data-id="heading-0">苦命开发</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.hikvision.com%2Fdownload%2F5cda567cf47ae80dd41a54b3%3Ftype%3D10%26id%3D4c945d18fa5f49638ce517ec32e24e24" target="_blank" title="https://open.hikvision.com/download/5cda567cf47ae80dd41a54b3?type=10&amp;id=4c945d18fa5f49638ce517ec32e24e24" ref="nofollow noopener noreferrer">从官网下载下来的web包</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/278b06e6827944fe956bb2d8965a30e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1741219668&amp;x-signature=NVzWG6Lt5J12JatVWLmvKglQ3nw%3D" alt="image.png" loading="lazy"></p>
<p>\webs\codebase 目录中有，第一个是插件，必须安装的， 后面两个JS文件是开发必要的。还要一个 JQ的，它内部使用了jq</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65e5762dc6634c0288807d10b225e15b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOq6YeM55qE56C05rC055O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1741219668&amp;x-signature=ZPAW8K1V8QjrxzdAegwTIvjVwpo%3D" alt="image.png" loading="lazy"></p>
<h3 data-id="heading-1">初始化插件</h3>
<p>引入了提供的jS后，就可以开始牛马了。。。。</p>
<p>首先注册插件，并检查更新</p>
<p>因为我这是4个摄像头，所以窗口是 2 * 2</p>
<p><code>WebVideoCtrl.I_InitPlugin</code>  是用于初始化插件，成功回调是<code>cbInitPluginComplete</code></p>
<p><code>WebVideoCtrl.I_CheckPluginVersion</code> 用于检查更新。</p>
<p>在自动登录这里，我准备了数组，包含登录端口密码等信息，建议每一个之后都要等1秒。多个账号登录，插件只加载一次即可。</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// 这里的代码会在文档完全加载后执行</span>
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_InitPlugin</span>({
        <span class="hljs-attr">iWndowType</span>: <span class="hljs-number">2</span>,    <span class="hljs-comment">// 设置分屏类型为 2*2，显示 4 个窗口</span>
        <span class="hljs-attr">bWndFull</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// 支持单窗口双击全屏</span>
        <span class="hljs-attr">bDebugMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 关闭调试模式</span>
        <span class="hljs-attr">cbInitPluginComplete</span>: <span class="hljs-keyword">async</span> () =&gt; {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"插件初始化完成"</span>)
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 加载插件</span>
                <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_InsertOBJECTPlugin</span>(<span class="hljs-string">"divPlugin"</span>)
                <span class="hljs-comment">// 检查插件是否最新</span>
                <span class="hljs-keyword">const</span> bFlag = <span class="hljs-keyword">await</span> <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_CheckPluginVersion</span>()
                <span class="hljs-keyword">if</span> (bFlag) {
                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">"检测到新的插件版本，双击开发包目录里的HCWebSDKPlugin.exe升级！"</span>)
                }

                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span>) {
                    <span class="hljs-comment">// 自动登陆</span>
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clickLogin</span>(item)
                    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>))
                }
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-title function_">alert</span>(<span class="hljs-string">"插件初始化失败，请确认是否已安装插件；如果未安装，请双击开发包目录里的HCWebSDKPlugin.exe安装！"</span>)
            }
        },
        <span class="hljs-attr">iTopHeight</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 插件窗口的最高高度</span>
    })
}
</code></pre>
<h3 data-id="heading-2">实现登录</h3>
<p>WebVideoCtrl.I_Login 是登录接口</p>
<ul>
<li>参数1：ip地址</li>
<li>参数2：1 是http，2 是https</li>
<li>参数3：端口</li>
<li>参数4：平台账户</li>
<li>参数5：平台密码</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 登陆</span>
<span class="hljs-title function_">clickLogin</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_Login</span>(item.<span class="hljs-property">ip</span>, <span class="hljs-number">1</span>, item.<span class="hljs-property">port</span>, <span class="hljs-string">'admin'</span>, <span class="hljs-string">'admin123'</span>, {
        <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'登陆成功'</span>)
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getChannelInfo</span>(item)
                }, <span class="hljs-number">1000</span>)
            }, <span class="hljs-number">10</span>)
        },
        <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">oError</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">ERROR_CODE_LOGIN_REPEATLOGIN</span> === oError.<span class="hljs-property">errorCode</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'已登录过！'</span>)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">" 登录失败！"</span>, oError.<span class="hljs-property">errorCode</span>, oError.<span class="hljs-property">errorMsg</span>)

            }
        }
    })
}
</code></pre>
<h3 data-id="heading-3">获取通道信息</h3>
<p>getChannelInfo 函数需要传递一个当前控制摄像头的信息对象。</p>
<p>模拟通道接口：<code>WebVideoCtrl.I_GetAnalogChannelInfo</code></p>
<p>这里会使用 jq的一些方法，会对获取的xml元素进行遍历，并将获取的信息，加入到数组集合中，进行预览视频。</p>
<ul>
<li>id：获取的通道号是预览的必要字段。</li>
<li>数字通道：支持高清甚至超高清分辨率，如 1080P、2K、4K 等，但是对网络要求较高</li>
<li>零通道：无法播放，坏掉了。</li>
<li>模拟通道：成本小，实时性高。</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 初始化通道</span>
<span class="hljs-title function_">getChannelInfo</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-comment">// 模拟通道</span>
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_GetAnalogChannelInfo</span>(item.<span class="hljs-property">ip</span>, {
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">xmlDoc</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> oChannels = $(xmlDoc).<span class="hljs-title function_">find</span>(<span class="hljs-string">'VideoInputChannel'</span>)
            $.<span class="hljs-title function_">each</span>(oChannels, <span class="hljs-function">(<span class="hljs-params">i, channelObj</span>) =&gt;</span> {
                <span class="hljs-keyword">let</span> id = $(channelObj).<span class="hljs-title function_">find</span>(<span class="hljs-string">'id'</span>).<span class="hljs-title function_">eq</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">text</span>(),
                    name = $(channelObj).<span class="hljs-title function_">find</span>(<span class="hljs-string">'name'</span>).<span class="hljs-title function_">eq</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">text</span>()
                <span class="hljs-keyword">if</span> (<span class="hljs-string">""</span> === name) {
                    name = <span class="hljs-string">"Camera "</span> + (i &lt; <span class="hljs-number">9</span> ? <span class="hljs-string">"0"</span> + (i + <span class="hljs-number">1</span>) : (i + <span class="hljs-number">1</span>))
                }
                <span class="hljs-keyword">const</span> ch = <span class="hljs-variable language_">this</span>.<span class="hljs-property">channel</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> arr.<span class="hljs-property">ip</span> === item.<span class="hljs-property">ip</span>)
                ch.<span class="hljs-property">channelId</span> = id
                ch.<span class="hljs-property">name</span> = name
            })
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item.<span class="hljs-property">ip</span> + <span class="hljs-string">'获取模拟通道成功！'</span>)

        },
        <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">oError</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ip + <span class="hljs-string">'获取模拟通道失败！'</span>, oError.<span class="hljs-property">errorCode</span>, oError.<span class="hljs-property">errorMsg</span>)

        }
    })
    <span class="hljs-comment">// 数字通道</span>
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_GetDigitalChannelInfo</span>(item.<span class="hljs-property">ip</span>, {
        <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
            <span class="hljs-comment">// console.log(item.ip + '获取数字通道成功！')</span>
        },
        <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">oError</span>) {
            <span class="hljs-comment">// console.log(item.ip + '获取数字通道失败！', oError.errorCode, oError.errorMsg)</span>
        }
    })
    <span class="hljs-comment">// 零通道</span>
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_GetZeroChannelInfo</span>(item.<span class="hljs-property">ip</span>, {
        <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
            <span class="hljs-comment">// console.log(item.ip + '获取零通道成功！')</span>
        },
        <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">oError</span>) {
            <span class="hljs-comment">// console.log(item.ip + '获取零通道失败！', oError.errorCode, oError.errorMsg)</span>
        }
    })
    <span class="hljs-comment">// 直接预览</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clickStartRealPlay</span>(item)
}
</code></pre>
<h3 data-id="heading-4">预览窗口</h3>
<p>clickStartRealPlay 函数需要传递一个当前控制摄像头的信息对象。</p>
<p><code>WebVideoCtrl.I_GetWindowStatus</code> 可以获取窗口的状态，比如传递 0 ，可以查看 第一个窗口的状态。返回值如果不是null，表示在播放了。</p>
<p><code>WebVideoCtrl.I_Stop</code> 用于关闭当前播放的窗口，参数 iWndIndex 用于控制关闭的那个窗口，默认会根据当前选中的窗口。</p>
<p><code>WebVideoCtrl.I_StartRealPlay</code> 预览视频</p>
<ul>
<li>参数一：ip地址 + 下划线 + 端口，拼接的字符串，比如：'192.168.1.101_80'</li>
<li>参数二：是码流，1 主码流，2 子码流</li>
<li>参数三：是前面通过通道获取的通道ID</li>
<li>参数四：默认是false，表示是否播放零通道</li>
<li>参数五：RTSP端口号</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 预览窗口</span>
<span class="hljs-title function_">clickStartRealPlay</span>(<span class="hljs-params">item</span>) {
    <span class="hljs-keyword">const</span> ips = item.<span class="hljs-property">ip</span> + <span class="hljs-string">'_'</span> + item.<span class="hljs-property">port</span>
    <span class="hljs-comment">// 获取窗口的状态</span>
    <span class="hljs-keyword">const</span> oWndInfo = <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_GetWindowStatus</span>(item.<span class="hljs-property">g_iWndIndex</span>)
    <span class="hljs-keyword">const</span> iRtspPort = <span class="hljs-string">''</span>
    <span class="hljs-keyword">const</span> iChannelID = item.<span class="hljs-property">channelId</span>
    <span class="hljs-keyword">const</span> bZeroChannel = item.<span class="hljs-property">zeroType</span>
    <span class="hljs-keyword">const</span> szInfo = <span class="hljs-string">''</span>

    <span class="hljs-keyword">const</span> startRealPlay = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
        <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_StartRealPlay</span>(ips, {
            <span class="hljs-attr">iWndIndex</span>: item.<span class="hljs-property">g_iWndIndex</span>,
            <span class="hljs-attr">iStreamType</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">iChannelID</span>: iChannelID,
            <span class="hljs-attr">bZeroChannel</span>: bZeroChannel,
            <span class="hljs-attr">iPort</span>: iRtspPort,
            <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ips + <span class="hljs-string">'开始预览成功！'</span>)
            },
            <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">oError</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ips + <span class="hljs-string">" 开始预览失败！"</span>, oError.<span class="hljs-property">errorCode</span>, oError.<span class="hljs-property">errorMsg</span>)
            }
        })
    }

    <span class="hljs-keyword">if</span> (oWndInfo != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// 已经在播放了，先停止</span>
        <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_Stop</span>({
            <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
                <span class="hljs-title function_">startRealPlay</span>()
            }
        })
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">startRealPlay</span>()
    }
}
</code></pre>
<h3 data-id="heading-5">摄像头功能控制</h3>
<p>接口：<code>WebVideoCtrl.I_PTZControl</code></p>
<ul>
<li>参数一：操作类型（1-上，2-下，3-左，4-右，5-左上，6-左下，7-右上，8-右下，9-自转，10-调焦+， 11-调焦-, 12-F聚焦+, 13-聚焦-, 14-光圈+, 15-光圈-</li>
<li>参数二：true 停止，false 启动</li>
<li>参数三：对象：iWndIndex 窗口号，默认为当前选中窗口，iPTZSpeed 云台速度，默认为4</li>
</ul>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"jiu"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{display: isOpen ? 'flex': 'none'}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"remote-control"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向左上转动"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top-start"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button top-left"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(5, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向上转动"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top-start"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(1, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-shangjiantou1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向右上转动"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top-start"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button top-right"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(7, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向左转动"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(3, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-zuojiantou"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"开启自动旋转"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button center"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"mouseDownPTZControl(9, false)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-zidongxuanzhuan"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向右转动"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(4, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-youjiantou"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向左下转动"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button bottom-left"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(6, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向下转动"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(2, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-xiajiantou1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"向右下转动"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button bottom-right"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(8, false)"</span>
                @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(1, true)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!-- 下方操作按钮 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"div-group"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{display: isOpen ? 'block': 'none'}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; justify-content:space-around;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button-group</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"焦距变大"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-groups"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(10, false)"</span> @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(11, true)"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-fangdajing-jia"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"焦距变小"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-groups"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(11, false)"</span> @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(11, true)"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-fangdajing-jian"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button-group</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button-group</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"焦点前调"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-groups"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(12, false)"</span> @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(12, true)"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-jiaodianqiantiao"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"焦点后调"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"top"</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">"light"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn-groups"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"mouseDownPTZControl(13, false)"</span> @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"mouseDownPTZControl(12, true)"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"iconfont icon-jiaodianhoutiao"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button-group</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- &lt;el-button-group&gt;
            &lt;el-tooltip content="光圈扩大" placement="top" effect="light"&gt;
                &lt;el-button&gt;
                    &lt;i class="iconfont icon-guangquankuoda"&gt;&lt;/i&gt;
                &lt;/el-button&gt;
            &lt;/el-tooltip&gt;
            &lt;el-tooltip content="光圈缩小" placement="top" effect="light"&gt;
                &lt;el-button&gt;
                    &lt;i class="iconfont icon-guangquansuoxiao"&gt;&lt;/i&gt;
                &lt;/el-button&gt;
            &lt;/el-tooltip&gt; --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button-group</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">mouseDownPTZControl</span>(<span class="hljs-params">iPTZIndex, selection</span>) {
    <span class="hljs-comment">// 获取窗口状态</span>
    <span class="hljs-keyword">const</span> oWndInfo = <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_GetWindowStatus</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span>.<span class="hljs-property">g_iWndIndex</span>)
    <span class="hljs-keyword">if</span> (oWndInfo == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// 如果是零通道，直接返回</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span>.<span class="hljs-property">zeroType</span>) {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">let</span> iPTZSpeed = selection ? <span class="hljs-number">0</span> : <span class="hljs-number">4</span>
    <span class="hljs-comment">// 表示开启了自动</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-number">9</span> === iPTZIndex &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">g_bPTZAuto</span>) {
        <span class="hljs-comment">// 将速度置为 0</span>
        iPTZSpeed = <span class="hljs-number">0</span>

    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">g_bPTZAuto</span> = <span class="hljs-literal">false</span>
    }

    <span class="hljs-comment">// 控制云平台</span>
    <span class="hljs-title class_">WebVideoCtrl</span>.<span class="hljs-title function_">I_PTZControl</span>(iPTZIndex, selection, {
        <span class="hljs-attr">iWndIndex</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span>.<span class="hljs-property">g_iWndIndex</span>, iPTZSpeed,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">xmlDoc</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-number">9</span> == iPTZIndex) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">g_bPTZAuto</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">g_bPTZAuto</span>
            }
        },
        <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">oError</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(oWndInfo.<span class="hljs-property">szDeviceIdentify</span> + <span class="hljs-string">" 开启云台失败！"</span>, oError.<span class="hljs-property">errorCode</span>, oError.<span class="hljs-property">errorMsg</span>)
        }
    })

}
</code></pre>
<p>到此就结束了，海康这个还不错，就是没有vue webpack的包，在webpack 的环境下，是会报错的。</p></div></div>
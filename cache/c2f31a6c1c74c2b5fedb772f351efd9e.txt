
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/hyxj/p/18906603" title="å‘å¸ƒäº 2025-06-01 23:22">
    <span role="heading" aria-level="2">QMediaPlayer+QVideoWidget+QAudioOutputå®ç°ä¸€ä¸ªç®€å•è§†é¢‘æ’­æ”¾å™¨-Qt6.8</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3412317/202506/3412317-20250601232206572-179413121.png" alt="QMediaPlayer+QVideoWidget+QAudioOutputå®ç°ä¸€ä¸ªç®€å•è§†é¢‘æ’­æ”¾å™¨-Qt6.8" class="desc_img">
        ä½¿ç”¨QMediaPlayer+QVideoWidget+QAudioOutputå®ç°ä¸€ä¸ªç®€å•è§†é¢‘æ’­æ”¾å™¨-Qt6.8
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>æ­¤ç¯‡æ˜¯æˆ‘åœ¨è§‚çœ‹<a href="https://www.cnblogs.com/seedoubleu/p/15665408.html" target="_blank">ä½¿ç”¨nginxæ­å»ºéŸ³è§†é¢‘ç‚¹æ’­æœåŠ¡å™¨ - seedoubleu - åšå®¢å›­</a>å,æƒ³ç€ä½¿ç”¨qt widgetå†™çš„ä¸€ä¸ªç®€å•æ’­æ”¾å™¨</p>
<p>å®Œæˆnginxæ­å»ºéŸ³è§†é¢‘ç‚¹æ’­æœåŠ¡å™¨çš„è¯,æˆ‘æ¨èä½¿ç”¨ffplayè¿›è¡ŒéªŒè¯.å†æ¨èä¸€ä¸ªè§†é¢‘<a href="https://www.bilibili.com/video/BV1a1421k7Eo?spm_id_from=333.788.videopod.episodes&amp;vd_source=b0eea03428e9cfdb88b44ab08c9ab5f8" target="_blank" rel="noopener nofollow">ã€éŸ³è§†é¢‘ã€‘FFmpegéŸ³è§†é¢‘å…¥é—¨åˆ°ç²¾é€š+å®æˆ˜è¯¾_å“”å“©å“”å“©_bilibili</a></p>
<p>åŒæ—¶æ¨èä¸€ä¸ªå¥½ç”¨çš„è§†é¢‘ä¸‹è½½å·¥å…·(æ”¯æŒbilibiliè§†é¢‘ä¸‹è½½)<a href="https://github.com/KurtBestor/Hitomi-Downloader" target="_blank" rel="noopener nofollow">KurtBestor/Hitomi-Downloader: ğŸ° Desktop utility to download images/videos/music/text from various websites, and more.</a></p>
<p>ä¸‹å›¾æ˜¯æœ€ç»ˆå†™å‡ºæ¥çš„ç•Œé¢(ä¸€å…±å°±ä¿©ç•Œé¢æ–‡ä»¶,ä¸€ä¸ªæ˜¯displayVideoæ’­æ”¾è§†é¢‘çª—å£,ä¸€ä¸ªæ˜¯videocontrolbarçš„è§†é¢‘æ§åˆ¶æ (è¯¦ç»†ä»£ç æŸ¥çœ‹<a href="https://github.com/haoyouxiaoju/my_learnt/tree/main/DisplayVideo" target="_blank" rel="noopener nofollow">my_learnt/DisplayVideo at main Â· haoyouxiaoju/my_learnt</a>)</p>
<ul>
<li>å¦‚æœæœ‰å…¶ä»–ä¸æ‡‚çš„åœ°æ–¹å¯ä»¥ç§ä¿¡æˆ‘,çœ‹åˆ°çš„è¯ä¼šå›å¤</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3412317/202506/3412317-20250601231503842-1940511917.png" alt="" loading="lazy"></p>
<p>å…¶ä¸­controlbarç®€å•çš„ä½¿ç”¨designeræ‹–æ‹½å‡ºæ¥!<br>
<img src="https://img2024.cnblogs.com/blog/3412317/202506/3412317-20250601231522462-1075369555.png" alt="" loading="lazy"></p>
<p>è¿™é‡Œåªå†™ä¸€äº›æ³¨æ„äº‹é¡¹:</p>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯qt6.8 åŒæ—¶é¡¹ç›®ä¹Ÿæ˜¯cmakeé¡¹ç›®</p>
<ul>
<li>åœ¨ä½¿ç”¨qrcç®¡ç†èµ„æºæ—¶,ä½ å¯èƒ½ä¼šå‘ç°QFileæ²¡æ³•æ‰¾åˆ°qrcç®¡ç†çš„æ–‡ä»¶è¿™æ—¶å€™ä½ å¾—åœ¨cmakeLists.txtä¸­æŸ¥çœ‹</li>
</ul>
<pre><code># å¯ç”¨ Qt èµ„æºæ”¯æŒ
set(CMAKE_AUTORCC ON)  # å¿…é¡»å¼€å¯(å¦åˆ™qrcæ–‡ä»¶æ— æ³•å‚ä¸ç¼–è¯‘)
</code></pre>
<ul>
<li>QVideoWidgetæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¸²æŸ“widget,éœ€è¦è®¾ç½®ä¸€ä¸‹é¼ æ ‡ç©¿é€</li>
</ul>
<pre><code>setAttribute(Qt::WA_TransparentForMouseEvents, true);
</code></pre>
<ul>
<li>åŒæ—¶ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°è§†é¢‘å¼€å¤´ä¼šé»‘å±</li>
</ul>
<pre><code>//å†™è¿™ä¸ªçš„åŸå› æ˜¯ä»¥ä¸ºè§†é¢‘å¼€å¤´ä¼šé»‘å±,å¦‚æœç›´æ¥è®¾ç½®playerçš„positionä¸º0ä¸èƒ½è§£å†³
//é€šè¿‡å°è¯•,è®¾ç½®105åˆšåˆšå¥½
//å¯èƒ½è·Ÿè§†é¢‘çš„å…³é”®å¸§æœ‰å…³å§
QTimer* timer = new QTimer;
connect(timer, &amp;QTimer::timeout, [=]() {
	qDebug() &lt;&lt; "Media status:" &lt;&lt; player-&gt;mediaStatus();
	qDebug() &lt;&lt; "æ˜¯å¦æ”¯æŒseek:" &lt;&lt; player-&gt;isSeekable(); // æ­¤æ—¶å†æ£€æŸ¥
	if (player-&gt;isSeekable() == true) {
		player-&gt;setPosition(105);
		qDebug() &lt;&lt; "durantion" &lt;&lt; player-&gt;duration();
		timer-&gt;stop();
        timer-&gt;deleteLater();
	}
	});
timer-&gt;start(1000); // æ¯ 100ms æ£€æŸ¥ä¸€æ¬¡ 
</code></pre>
<ul>
<li>è¿™é‡Œçš„è¯æ˜¯å› ä¸ºv_widgetå’ŒcontrolBaræ²¡æœ‰æŒ‚é åœ¨DisplayVideo,æ˜¯popupæ‰€ä»¥åœ¨ç§»åŠ¨å’Œresize DisplayVideoçš„æ—¶å€™è¦é‡æ–°è®¾ç½®v_widgetå’ŒcontrolBar,æç¤ºä¸€ä¸‹å¦‚æœæ„é€ å‡½æ•°ä¸­newå‡ºæ¥çš„widgetæ²¡æœ‰æŒ‚é åœ¨å…¶ä»–widgetçš„è¯è®°å¾—åœ¨ææ„å‡½æ•°ä¸­delete</li>
</ul>
<pre><code>void DisplayVideo::resizeEvent(QResizeEvent * event)
{
    QWidget::resizeEvent(event);
    v_widget-&gt;resize(event-&gt;size());
	bar-&gt;resize(QSize(event-&gt;size().width(), bar-&gt;height()));
    QPoint point = v_widget-&gt;mapToGlobal(QPoint(0, 0));
	bar-&gt;move(point.x(), point.y() + v_widget-&gt;height() - bar-&gt;height());
}

void DisplayVideo::moveEvent(QMoveEvent* event)
{
    QWidget::moveEvent(event);
    //if (bar-&gt;isVisible()) {
		bar-&gt;move(event-&gt;pos().x(), event-&gt;pos().y() + v_widget-&gt;height() - bar-&gt;height());
    //}
}
</code></pre>
<ul>
<li>è®¾ç½®è§†é¢‘æ’­æ”¾é€Ÿåº¦ä½¿ç”¨QCombobox,åœ¨ç‚¹å‡»comboboxæ—¶å‡ºç°å¼‚å¸¸,controlbarä¼šhideæ‰€ä»¥æ·»åŠ äº†äº‹ä»¶è¿‡æ»¤</li>
</ul>
<pre><code>// controlBarçš„æ„é€ å‡½æ•°æ·»åŠ 
ui.comboBox-&gt;installEventFilter(this);

bool VideoControlBar::eventFilter(QObject* obj, QEvent* event)
{
	if (obj == ui.comboBox &amp;&amp; event-&gt;type() == QEvent::MouseButtonPress) {
		QMouseEvent* mouseEvent = static_cast&lt;QMouseEvent*&gt;(event);
		if (mouseEvent-&gt;button() == Qt::LeftButton) {
			// é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­
			event-&gt;accept();
			ui.comboBox-&gt;showPopup();
			return true;
		}
	}
	return QWidget::eventFilter(obj, event);
}
</code></pre>
<ul>
<li>æˆ‘ç°åœ¨è¿˜æ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ä¸€ä¸ªé—®é¢˜å°±æ˜¯è®¾ç½®background-color:rgbaæ²¡æœ‰æ•ˆæœ,å¦‚æœä½ çŸ¥é“æ€ä¹ˆè§£å†³,è¯·å‘Šè¯‰æˆ‘</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3412317/202506/3412317-20250601231534540-1525795773.png" alt="" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.03871221396296296" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-01 23:22">2025-06-01 23:22</span>&nbsp;
<a href="https://www.cnblogs.com/hyxj">haoyouxiaoju</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18906603);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18906603', targetLink: 'https://www.cnblogs.com/hyxj/p/18906603', title: 'QMediaPlayer+QVideoWidget+QAudioOutputå®ç°ä¸€ä¸ªç®€å•è§†é¢‘æ’­æ”¾å™¨-Qt6.8' })">ä¸¾æŠ¥</a>
</div>
        
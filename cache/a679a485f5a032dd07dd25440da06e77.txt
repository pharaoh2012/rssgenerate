
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lyhabc/p/18716017/centos-ansible-deploy-sql-server-alwayson" title="发布于 2025-02-19 08:00">
    <span role="heading" aria-level="2">只需简单5步，Ansible脚本自动搭建AlwaysOn集群（已测试通过，可实际运行）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1 style="text-align: center;">只需简单5步，Ansible脚本自动搭建AlwaysOn集群（已测试通过，可实际运行）</h1>
<p>&nbsp;</p>
之前已经介绍过这套脚本，请看下面↓ <a href="https://mp.weixin.qq.com/s?__biz=MzkzODc0MzUxMw==&amp;mid=2247485834&amp;idx=1&amp;sn=c0929f59c8ab06abe8bbb014e15495b4&amp;scene=21#wechat_redirect" rel="noopener" target="_blank" data-itemshowtype="0" data-linktype="2">一分钟搞定！CentOS 7.9上用Ansible自动化部署SQL Server 2019</a>
<p data-tool="mdnice编辑器"><strong>注意：</strong></p>
<p data-tool="mdnice编辑器"><strong>这套ansible脚本不支持RHEL 7.X 和CentOS7.X系统!</strong></p>
<p data-tool="mdnice编辑器"><strong>这套ansible脚本不支持RHEL 7.X 和CentOS7.X系统!</strong></p>
<p data-tool="mdnice编辑器"><strong>这套ansible脚本不支持RHEL 7.X 和CentOS7.X系统!</strong></p>
<p data-tool="mdnice编辑器">使用RHEL 7.X 和CentOS7.X系统是<strong>完全无问题</strong>的，但是只能自己手动搭建AlwaysOn集群了</p>
<br><br>
<h2 data-tool="mdnice编辑器">具体搭建流程</h2>
<p data-tool="mdnice编辑器">搭建所需时间取决于网络环境，需要从微软源拉取安装包，操作系统可以使用CentOS 8.X 或者CentOS 9.x，本次实验使用的操作系统是CentOS 9.2</p>
<p data-tool="mdnice编辑器">节点信息如下：</p>
<table>
<thead>
<tr><th>
ip
</th><th>
主机名
</th><th>
角色
</th><th>
ansible角色
</th>
</tr>





</thead>
<tbody>
<tr>
<td>
192.168.22.71
</td>
<td>
wwwmssql71
</td>
<td>
从库
</td>
<td>
既是ansible控制机又是被控机
</td>





</tr>
<tr>
<td>
192.168.22.73
</td>
<td>
wwwmssql73
</td>
<td>
从库
</td>
<td>
被控机
</td>





</tr>
<tr>
<td>
192.168.22.76
</td>
<td>
wwwmssql76
</td>
<td>
主库
</td>
<td>
被控机
</td>





</tr>
<tr>
<td>
192.168.22.99
</td>
<td>
yahaha_listener
</td>
<td>
侦听器
</td>
<td>&nbsp;</td>





</tr>





</tbody>





</table>






<br><br>
<p data-tool="mdnice编辑器">1、在所有数据库节点上执行，创建shell脚本并执行shell脚本</p>
<p data-tool="mdnice编辑器">vi abc.sh</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>
#!/bin/bash
yum install -y epel-release
yum install -y &nbsp;ansible
yum install -y ansible-collection-microsoft-sql rhel-system-roles
yum config-manager --set-enabled highavailability
yum install -y &nbsp;fence-agents-all resource-agents&nbsp;
yum install -y&nbsp;bind-utils


cat &lt;&lt;EOF &gt;&gt; /etc/hosts
192.168.22.71 &nbsp;wwwmssql71
192.168.22.73 &nbsp;wwwmssql73
192.168.22.76 &nbsp;wwwmssql76
192.168.22.99 &nbsp;yahaha_listener
EOF</code></pre>
<br>
<p data-tool="mdnice编辑器">2、在192.168.22.71节点上执行，创建清单文件</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>cat &lt;&lt;EOF &gt;&gt; hosts.yml
all:
&nbsp; hosts:
&nbsp; &nbsp; 192.168.22.71:
&nbsp; &nbsp; &nbsp; ansible_user: root
&nbsp; &nbsp; &nbsp; ansible_ssh_pass:&nbsp;"你的密码"
&nbsp; &nbsp; &nbsp; mssql_ha_replica_type: primary
&nbsp; &nbsp; &nbsp; ha_cluster:
&nbsp; &nbsp; &nbsp; &nbsp; node_name: wwwmssql71
&nbsp; &nbsp; &nbsp; &nbsp; pcs_address: wwwmssql71
&nbsp; &nbsp; &nbsp; &nbsp; corosync_addresses:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - 192.168.22.71
&nbsp; &nbsp; 192.168.22.73:
&nbsp; &nbsp; &nbsp; ansible_user: root
&nbsp; &nbsp; &nbsp; ansible_ssh_pass:&nbsp;"你的密码"
&nbsp; &nbsp; &nbsp; mssql_ha_replica_type: synchronous
&nbsp; &nbsp; &nbsp; ha_cluster:
&nbsp; &nbsp; &nbsp; &nbsp; node_name: wwwmssql73
&nbsp; &nbsp; &nbsp; &nbsp; pcs_address: wwwmssql73
&nbsp; &nbsp; &nbsp; &nbsp; corosync_addresses:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - 192.168.22.73
&nbsp; &nbsp; 192.168.22.76:
&nbsp; &nbsp; &nbsp; ansible_user: root
&nbsp; &nbsp; &nbsp; ansible_ssh_pass:&nbsp;"你的密码"
&nbsp; &nbsp; &nbsp; mssql_ha_replica_type: synchronous
&nbsp; &nbsp; &nbsp; ha_cluster:
&nbsp; &nbsp; &nbsp; &nbsp; node_name: wwwmssql76
&nbsp; &nbsp; &nbsp; &nbsp; pcs_address: wwwmssql76
&nbsp; &nbsp; &nbsp; &nbsp; corosync_addresses:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - 192.168.22.76
EOF</code></pre>
<br>
<p data-tool="mdnice编辑器">3、在192.168.22.71节点上执行，测试被控机器的连通性</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>ssh root@192.168.22.71
ssh root@192.168.22.73
ssh root@192.168.22.76
ansible all -i hosts.yml -m ping</code></pre>
<img src="https://img2024.cnblogs.com/blog/257159/202502/257159-20250214194306938-1354203736.png" alt="">
<p>&nbsp;</p>
<br>
<p data-tool="mdnice编辑器">4、在192.168.22.71节点上执行，创建Playbook文件，自动安装SQL Server 企业版然后部署AlwaysOn，Playbook文件执行下面的任务：</p>
<p data-tool="mdnice编辑器">（1）安装SQL Server数据库并设置好数据库。</p>
<p data-tool="mdnice编辑器">（2）验证SQL Server和数据库工具是否正确配置。</p>
<p data-tool="mdnice编辑器">（3）创建必要的数据库端点和证书，并将证书复制到所有副本中，用于Always On可用性组（AG）端点身份验证。</p>
<p data-tool="mdnice编辑器">（4）在所有SQL Server副本中创建Pacemaker数据库登录用户。</p>
<p data-tool="mdnice编辑器">（5）创建pacemaker集群资源：ag cluster-clone和virtualip 。</p>
<p data-tool="mdnice编辑器">（6）打开用于健康检查探测的防火墙端口，AG端点（5022）和SQL Server端口（1433）。</p>
<p data-tool="mdnice编辑器">（7）最后，为AG创建一个AG侦听器。</p>
<p data-tool="mdnice编辑器">创建playbook.yaml文件 vi playbook.yaml</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>- hosts: all
&nbsp; vars:
&nbsp; &nbsp; mssql_accept_microsoft_odbc_driver_17_for_sql_server_eula:&nbsp;true
&nbsp; &nbsp; mssql_accept_microsoft_odbc_driver_for_sql_server_eula:&nbsp;true
&nbsp; &nbsp; mssql_accept_microsoft_cli_utilities_for_sql_server_eula:&nbsp;true
&nbsp; &nbsp; mssql_accept_microsoft_sql_server_standard_eula:&nbsp;true
&nbsp; &nbsp; mssql_version: 2022 &nbsp;# 数据库版本
&nbsp; &nbsp; mssql_password:&nbsp;"p@55w0rD"# sa 用户密码
&nbsp; &nbsp; mssql_edition: 2Q48Q-PB48J-DRCVN-GB844-X2H4Q &nbsp;# 设置产品密钥
&nbsp; &nbsp; mssql_datadir:&nbsp;"/data/mssql/1433/database/"# 设置数据库默认路径
&nbsp; &nbsp; mssql_logdir:&nbsp;"/data/mssql/1433/database/"# 设置数据库日志路径
&nbsp; &nbsp; mssql_manage_firewall:&nbsp;false
&nbsp; &nbsp; mssql_run_selinux_confined:&nbsp;false
&nbsp; &nbsp; mssql_ha_configure:&nbsp;true
&nbsp; &nbsp; mssql_manage_ha_cluster:&nbsp;true
&nbsp; &nbsp; mssql_ha_prep_for_pacemaker:&nbsp;true
&nbsp; &nbsp; mssql_ha_ag_cluster_type: external
&nbsp; &nbsp; mssql_ha_endpoint_port: 5022
&nbsp; &nbsp; mssql_ha_cert_name: ExampleCert
&nbsp; &nbsp; mssql_ha_master_key_password:&nbsp;"p@55w0rD1"
&nbsp; &nbsp; mssql_ha_private_key_password:&nbsp;"p@55w0rD2"
&nbsp; &nbsp; mssql_ha_endpoint_name: Example_Endpoint
&nbsp; &nbsp; mssql_ha_ag_name: ExampleAG &nbsp; &nbsp;&nbsp;# alwayson可用性组名称
&nbsp; &nbsp; mssql_ha_login: pacemakerLogin
&nbsp; &nbsp; mssql_ha_login_password:&nbsp;"p@55w0rD3"
&nbsp; &nbsp; mssql_ha_virtual_ip: 192.168.22.99 &nbsp;&nbsp;#虚拟IP
&nbsp; &nbsp; ha_cluster_cluster_name:&nbsp;"{{ mssql_ha_ag_name }}"#pacemaker集群名称
&nbsp; &nbsp; ha_cluster_hacluster_password:&nbsp;"p@55w0rD4"
&nbsp; &nbsp; ha_cluster_cluster_properties:
&nbsp; &nbsp; &nbsp; - attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: cluster-recheck-interval
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value: 2min
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: start-failure-is-fatal
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value:&nbsp;false
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: stonith-enabled
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value:&nbsp;false
&nbsp; &nbsp; ha_cluster_resource_primitives:
&nbsp; &nbsp; &nbsp; - id: ag_cluster
&nbsp; &nbsp; &nbsp; &nbsp; agent: ocf:mssql:ag
&nbsp; &nbsp; &nbsp; &nbsp; instance_attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: ag_name
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value:&nbsp;"{{ mssql_ha_ag_name }}"
&nbsp; &nbsp; &nbsp; &nbsp; meta_attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: failure-timeout
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value: 60s
&nbsp; &nbsp; &nbsp; - id: virtualip
&nbsp; &nbsp; &nbsp; &nbsp; agent: ocf:heartbeat:IPaddr2
&nbsp; &nbsp; &nbsp; &nbsp; instance_attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: ip
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value:&nbsp;"{{ mssql_ha_virtual_ip }}"
&nbsp; &nbsp; &nbsp; &nbsp; operations:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - action: monitor
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: interval
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value: 30s
&nbsp; &nbsp; ha_cluster_resource_clones:
&nbsp; &nbsp; &nbsp; - resource_id: ag_cluster
&nbsp; &nbsp; &nbsp; &nbsp; promotable: yes
&nbsp; &nbsp; &nbsp; &nbsp; meta_attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - attrs:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: notify
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value:&nbsp;true
&nbsp; &nbsp; ha_cluster_constraints_colocation:
&nbsp; &nbsp; &nbsp; - resource_leader:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: ag_cluster-clone
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; role: Promoted
&nbsp; &nbsp; &nbsp; &nbsp; resource_follower:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: virtualip
&nbsp; &nbsp; &nbsp; &nbsp; options:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: score
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value: INFINITY
&nbsp; &nbsp; ha_cluster_constraints_order:
&nbsp; &nbsp; &nbsp; - resource_first:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: ag_cluster-clone
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; action: promote
&nbsp; &nbsp; &nbsp; &nbsp; resource_then:
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id: virtualip
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; action: start
&nbsp; tasks:
&nbsp; &nbsp;- name: Run on all hosts to configure HA cluster
&nbsp; &nbsp; &nbsp;include_role:
&nbsp; &nbsp; &nbsp; &nbsp;name: microsoft.sql.server</code></pre>
<br>
<p data-tool="mdnice编辑器">5、在192.168.22.71节点上执行，运行Playbook文件</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>ansible-playbook &nbsp;-i hosts.yml &nbsp; playbook.yaml &nbsp;--flush-cache</code></pre>
<blockquote>★
<p>注意： 如果要多次运行playbook文件，需要先删除pacemaker集群，才能再次运行playbook</p>
</blockquote>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>--删除所有pacemaker集群
pcs cluster destroy --all</code></pre>
<br>
<p data-tool="mdnice编辑器">6、搭建完成，在SQL Server Management Studio（SSMS）中查看AG及其仪表板，然后查看已创建的集群资源</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>pcs status</code></pre>
<p data-tool="mdnice编辑器"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5s1xA6wz1wZ76ILKOtFDHNv4RAjJC48yRChDzVm2KXgHrCa98wOg8DQ/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5s1xA6wz1wZ76ILKOtFDHNv4RAjJC48yRChDzVm2KXgHrCa98wOg8DQ/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.40925925925925927" data-type="png" data-w="1080" data-imgfileid="100002220" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="1" data-fail="0"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp58UlZFNjicV5U2L2pmEHBYPNzt46qOib6EibkiahibXXL5cxPnkwZrkWu1JA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp58UlZFNjicV5U2L2pmEHBYPNzt46qOib6EibkiahibXXL5cxPnkwZrkWu1JA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.1961950059453032" data-type="png" data-w="841" data-imgfileid="100002218" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="2" data-fail="0"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5zQ1pUC5TlDkWkHxH8sUyz7DVqevlzdEialZDoVbOiambZ7Ubb1x2r55g/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5zQ1pUC5TlDkWkHxH8sUyz7DVqevlzdEialZDoVbOiambZ7Ubb1x2r55g/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.7884615384615384" data-type="png" data-w="832" data-imgfileid="100002221" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="3" data-fail="0"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5faTb2KbABudLWX242aeyy7m3sC42xz0VHO4zcPYYeeju0Xug13IQPA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5faTb2KbABudLWX242aeyy7m3sC42xz0VHO4zcPYYeeju0Xug13IQPA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.6167832167832168" data-type="png" data-w="715" data-imgfileid="100002219" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="4" data-fail="0"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5sytyMm8xibccojXiaywSgpEicxQuicENQS7DQ7KP4KfzCopw5pqaUKtGmw/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp5sytyMm8xibccojXiaywSgpEicxQuicENQS7DQ7KP4KfzCopw5pqaUKtGmw/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.6824074074074075" data-type="png" data-w="1080" data-imgfileid="100002222" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="5" data-fail="0"><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp58UlZFNjicV5U2L2pmEHBYPNzt46qOib6EibkiahibXXL5cxPnkwZrkWu1JA/640?wx_fmt=png&amp;from=appmsg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片" class="rich_pages wxw-img" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/4btH7yPYCW1icOQqJfBp6Gy566iciciarSp58UlZFNjicV5U2L2pmEHBYPNzt46qOib6EibkiahibXXL5cxPnkwZrkWu1JA/640?wx_fmt=png&amp;from=appmsg" data-ratio="0.1961950059453032" data-type="png" data-w="841" data-imgfileid="100002227" data-original-style="display: block;margin-top: 0px;margin-right: auto;margin-bottom: 0px;margin-left: auto;max-width: 100%;" data-index="6" data-fail="0"></p>
<blockquote>★
<p>这套脚本的小缺陷：无法预先创建数据库并加入到可用性组，需要在搭建完成之后，手动添加数据库到可用性组</p>
</blockquote>
<br><br>
<h2 data-tool="mdnice编辑器">只安装数据库，不部署AlwaysOn集群</h2>
<p data-tool="mdnice编辑器">如果只需要单独安装数据库，playbook书写如下即可</p>
<p data-tool="mdnice编辑器">vi playbook.yml</p>
<pre class="highlighter-hljs" data-tool="mdnice编辑器"><code>---
- hosts: localhost
&nbsp; vars:
&nbsp; &nbsp; mssql_accept_microsoft_odbc_driver_17_for_sql_server_eula:&nbsp;true
&nbsp; &nbsp; mssql_accept_microsoft_cli_utilities_for_sql_server_eula:&nbsp;true
&nbsp; &nbsp; mssql_accept_microsoft_sql_server_standard_eula:&nbsp;true
&nbsp; &nbsp; mssql_password:&nbsp;'RedH@123!'
&nbsp; &nbsp; mssql_edition:&nbsp;'Developer'
&nbsp; &nbsp; mssql_enable_sql_agent:&nbsp;true
&nbsp; &nbsp; mssql_install_fts:&nbsp;false
&nbsp; &nbsp; mssql_install_powershell:&nbsp;true
&nbsp; &nbsp; mssql_tune_for_fua_storage:&nbsp;true
&nbsp; &nbsp; mssql_datadir:&nbsp;"/data/mssql/1433/database"
&nbsp; &nbsp; mssql_logdir:&nbsp;"/data/mssql/1433/database"

&nbsp; roles:
&nbsp; &nbsp; - microsoft.sql.server
&nbsp;</code></pre>
<p>&nbsp;</p>
<p>&nbsp;<img src="https://img2024.cnblogs.com/blog/257159/202409/257159-20240908204310924-1005667056.png" alt="" class="medium-zoom-image"></p>
<p><strong>本文版权归作者所有，未经作者同意不得转载。</strong></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.042164117997685185" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-19 08:01">2025-02-19 08:00</span>&nbsp;
<a href="https://www.cnblogs.com/lyhabc">桦仔</a>&nbsp;
阅读(<span id="post_view_count">7</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18716017" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18716017);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18716017', targetLink: 'https://www.cnblogs.com/lyhabc/p/18716017/centos-ansible-deploy-sql-server-alwayson', title: '只需简单5步，Ansible脚本自动搭建AlwaysOn集群（已测试通过，可实际运行）' })">举报</a>
</div>
        
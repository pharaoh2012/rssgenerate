
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cj8988/p/18965418" title="发布于 2025-07-04 12:19">
    <span role="heading" aria-level="2">视频音频对嘴--Wav2Lip</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>&nbsp;</p>
<p>之前介绍了将图片加音频进行对嘴处理，生成新的视频：<br><br><strong>基础版：&nbsp;<a href="https://www.cnblogs.com/cj8988/p/18952604" target="_blank">https://www.cnblogs.com/cj8988/p/18952604</a></strong></p>
<p><strong>进阶版(加表情) ：<a href="https://www.cnblogs.com/cj8988/p/18957718" target="_blank">https://www.cnblogs.com/cj8988/p/18957718</a></strong></p>
<p>&nbsp;</p>
<p>这里介绍一个视频对嘴，一个视频加音频进行对嘴，生成新的视频。</p>
<p class="heading-element" dir="auto"><strong>Wav2Lip-HD：改进<a id="contextregion-repositorycrumb-wav2lip-link" class="AppHeader-context-item" href="https://github.com/Rudrabha/Wav2Lip" data-target="context-region-crumb.linkElement" data-analytics-event="{&quot;category&quot;:&quot;SiteHeaderComponent&quot;,&quot;action&quot;:&quot;context_region_crumb&quot;,&quot;label&quot;:&quot;Wav2Lip&quot;,&quot;screen_size&quot;:&quot;full&quot;}" data-view-component="true" rel="noopener nofollow"><span class="AppHeader-context-item-label " data-target="context-region-crumb.labelElement">Wav2Lip</span></a>以实现高保真视频。</strong></p>
<p class="heading-element" dir="auto">&nbsp;</p>
<h2 class="heading-element" dir="auto"><strong>一：源码下载</strong></h2>
<h3 class="heading-element" dir="auto">核心源码：<a href="https://github.com/saifhassan/Wav2Lip-HD" target="_blank" rel="noopener nofollow"><strong>https://github.com/saifhassan/Wav2Lip-HD</strong></a></h3>
<h3 class="heading-element" dir="auto"><strong>高清处理源码：<a href="https://github.com/xinntao/Real-ESRGAN" target="_blank" rel="noopener nofollow">https://github.com/xinntao/Real-ESRGAN</a></strong></h3>
<p>&nbsp;</p>
<p><strong>Real-ESRGAN解压后放到Wav2Lip-HD文件夹中。</strong></p>
<p><img alt="" width="575" height="433" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704105957058-383744307.png" class="lazyload"></p>
<p>&nbsp;</p>
<h2><strong>二：模型下载</strong></h2>
<p><strong>根据文档，下载相应模型，然后放到相应的位置上。</strong></p>
<p>&nbsp;</p>
<p><strong>Wav2Lip：</strong>&nbsp;<a href="https://drive.google.com/drive/folders/1tB_uz-TYMePRMZzrDMdShWUZZ0JK3SIZ" target="_blank" rel="noopener nofollow"><strong>https://drive.google.com/drive/folders/1tB_uz-TYMePRMZzrDMdShWUZZ0JK3SIZ</strong></a></p>
<p><strong>ESRGAN：</strong>&nbsp;<a href="https://drive.google.com/file/d/1Al8lEpnx2K-kDX7zL2DBcAuDnSKXACPb/view" target="_blank" rel="noopener nofollow"><strong>https://drive.google.com/file/d/1Al8lEpnx2K-kDX7zL2DBcAuDnSKXACPb/view</strong></a></p>
<p><strong>Face_Detection</strong>：&nbsp;<a href="https://drive.google.com/file/d/1uNLYCPFFmO-og3WSHyFytJQLLYOwH5uY/view" target="_blank" rel="noopener nofollow"><strong>https://drive.google.com/file/d/1uNLYCPFFmO-og3WSHyFytJQLLYOwH5uY/view</strong></a></p>
<p><strong>Real-ESRGAN</strong>：&nbsp;<a href="https://drive.google.com/drive/folders/1BLx6aMpHgFt41fJ27_cRmT8bt53kVAYG" target="_blank" rel="noopener nofollow"><strong>https://drive.google.com/drive/folders/1BLx6aMpHgFt41fJ27_cRmT8bt53kVAYG</strong></a></p>
<p><strong>Real-ESRGAN：</strong>&nbsp;<a href="https://drive.google.com/file/d/1qNIf8cJl_dQo3ivelPJVWFkApyEAGnLi/view" target="_blank" rel="noopener nofollow"><strong>https://drive.google.com/file/d/1qNIf8cJl_dQo3ivelPJVWFkApyEAGnLi/view</strong></a></p>
<p>&nbsp;</p>
<p>下载的相应模型就放到相应位置：</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704112029839-886426964.png" class="lazyload"></p>
<p>&nbsp;</p>
<p><strong>下载一个ffmpeg.exe 放到根目录下Wav2Lip-HD：<a href="https://ffmpeg.org/download.html" target="_blank" rel="noopener nofollow">https://ffmpeg.org/download.html</a></strong><br>（如果最新版本不行，可以下载6.1版本：ffmpeg version 6.1-full_build）</p>
<p>&nbsp;</p>
<h2><strong>三：运行</strong></h2>
<p><strong>（1）：安装一个虚拟环境（window的Anaconda）进行运行，这样就不会破坏本地的换，没有Anaconda的需要下载安装：<a href="https://www.anaconda.com/download/success" target="_blank" rel="noopener nofollow">https://www.anaconda.com/download/success</a></strong></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704112451352-790057739.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>（2）创建虚拟环境：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">创建虚拟环境，这里使用3.10的环境：</span>
conda create --name wavalip python=3.10

<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">查看环境：</span>
conda info --<span style="color: rgba(0, 0, 0, 1)">envs

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">激活环境：</span>
<span style="color: rgba(0, 0, 0, 1)">conda activate wavalip

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">退出：</span><span style="color: rgba(0, 128, 0, 1)">
#</span><span style="color: rgba(0, 128, 0, 1)"> conda deactivate</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>（3）运行：</p>
<p>需要先修改一下文件：<strong>run_final.bat。将视频和音频放到相应位置，然后修改这里的文件名字。</strong></p>
<p><img alt="" width="703" height="288" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704113335667-117398180.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>可以先注释代码中的&nbsp;REM Step 2 ~ REM Step 4，只保留第一个 Step 1。</p>
<p>第一步就是视频根据你的音频进行对嘴处理，生成新的视频。</p>
<p><strong>Step 2 ~&nbsp;Step 4 就是对你的视频进行高清处理，这一步是很耗时的，很慢的。</strong></p>
<p><img alt="" width="616" height="497" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704114245860-966644506.png" class="lazyload"></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">在虚拟环境中运行</span>
<span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">激活环境：</span>
<span style="color: rgba(0, 0, 0, 1)">conda activate wavalip

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">运行</span>
<span style="color: rgba(0, 0, 0, 1)">run_final.bat

</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">如果有报错，根据报错安装相应的包</span><span style="color: rgba(0, 128, 0, 1)">
#</span><span style="color: rgba(0, 128, 0, 1)"> pip  install  ...</span></pre>
</div>
<p>&nbsp;</p>
<p>不打开高清处理，应该还是很快的，生成的视频在文件夹：&nbsp;<strong>output_videos_wav2lip</strong> 中。没有问题后，可以打开<strong>Step 2 ~&nbsp;Step 4。打开后会很慢，建议找的视频和音频时长一样，而且尽量段一些，这样可以减少生成时间。</strong></p>
<p><strong>打开高清处理，生成的视频在：output_videos_hd 文件夹中。</strong></p>
<p>&nbsp;</p>
<p><strong>看了一下日志，先使用Wav2Lip生成对嘴视频，然后将视频拆分为每一帧图片（文件夹frames_wav2lip中查看），然后将所有图片高清处理（处理后的图片在文件夹frames_hd 中），最后将高清图片转为视频，并且加上音频。</strong></p>
<p><strong>最后生成的就是高清对嘴视频。（如果视频有两人，音频也有应该有两个人）。</strong></p>
<p>&nbsp;</p>
<p><strong>平台视频截图：</strong></p>
<p><img alt="" width="402" height="405" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704121454280-1438393045.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>高清视频截图：</p>
<p><img alt="" width="406" height="403" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250704121554642-657677732.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>很明显，如果条件可以，最好进行高清处理，这样生成的视频才能看。&nbsp;</p>
<p>&nbsp;</p>
<p>查看文档：</p>
<p><a href="https://github.com/saifhassan/Wav2Lip-HD" target="_blank" rel="noopener nofollow">https://github.com/saifhassan/Wav2Lip-HD</a></p>
<p><a href="https://github.com/Rudrabha/Wav2Lip" target="_blank" rel="noopener nofollow">https://github.com/Rudrabha/Wav2Lip</a></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-04 12:19">2025-07-04 12:19</span>&nbsp;
<a href="https://www.cnblogs.com/cj8988">Joy_CShow</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18965418);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18965418', targetLink: 'https://www.cnblogs.com/cj8988/p/18965418', title: '视频音频对嘴--Wav2Lip' })">举报</a>
</div>
        
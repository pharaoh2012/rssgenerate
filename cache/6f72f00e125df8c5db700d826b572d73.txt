<!----> <meta itemprop="headline" content="ğŸ—£ï¸é¢è¯•å®˜ï¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ case ä¹Ÿæƒ³æ¢è®¨ä¸€ä¸‹ ã€Œé¡µé¢ç™½å±å¦‚ä½•æ’æŸ¥ï¼Ÿã€"> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,å¼€æº"> <meta itemprop="datePublished" content="2025-04-18T02:05:01.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Luckyfif"> <meta itemprop="url" content="https://juejin.cn/user/3186806055252135"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ—£ï¸é¢è¯•å®˜ï¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ case ä¹Ÿæƒ³æ¢è®¨ä¸€ä¸‹ ã€Œé¡µé¢ç™½å±å¦‚ä½•æ’æŸ¥ï¼Ÿã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3186806055252135/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Luckyfif
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-04-18T02:05:01.000Z" title="Fri Apr 18 2025 02:05:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-04-18
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""></circle></svg> <span class="views-count" data-v-61fb5e44="">
                    3,272
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""></path></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><blockquote>
<p>å‰æ®µæ—¶é—´é¢è¯•å­—èŠ‚ï¼Œé¢è¯•å®˜å¯¹æˆ‘çš„åŸ‹ç‚¹é¡¹ç›®æ¯”è¾ƒæ„Ÿå…´è¶£ï¼ŒèŠç€èŠç€çªç„¶æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼ˆåŸè¯ï¼‰ï¼š<strong>æ—¢ç„¶è¯´åˆ°äº†è¿™æ ·ä¸€ä¸ªå«åšç›‘æ§ï¼Œå…¶å®æœ‰ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ case ä¹Ÿæƒ³æ¢è®¨ä¸€ä¸‹ï¼Œå°±æ˜¯æ¯”å¦‚è¯´ä½ æœ‰åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‡å¦‚ä½ çš„é¡µé¢è¢«åé¦ˆè¯´ç™½å±äº†ï¼Œå¯¹å§ï¼Ÿæ­£å¸¸æƒ…å†µä¸‹ä½ è¦å»æ’æŸ¥é—®é¢˜ã€è§£å†³é—®é¢˜ï¼Œé‚£æˆ‘æƒ³è®©ä½ å°±æ˜¯ç®€å•çš„æè¿°ä¸€ä¸‹ä½ ä¼šå»æ€ä¹ˆå»åšï¼Œå°±æ˜¯æŠŠä½ è¦å‡†å¤‡å¤„ç†çš„è¿‡ç¨‹ä¹Ÿæè¿°ä¸€ä¸‹ã€‚</strong></p>
</blockquote>
<p>æˆ‘çš„<strong>å›ç­”</strong>ï¼šæœ‰æåˆ°æ£€æŸ¥<code> DOM æŒ‚è½½</code> / <code>ç½‘ç»œè¯·æ±‚çŠ¶æ€</code> /<code> JS æ‰§è¡Œé”™è¯¯</code>ï¼Œä½†æœªè¦†ç›–<code>èµ„æºåŠ è½½å¤±è´¥</code>ã€<code>CDN å¼‚å¸¸</code> ç­‰åœºæ™¯ã€‚è™½ç„¶æœ‰ç®€å•äº†è§£è¿‡é¡µé¢ç™½å±ç›¸å…³çš„å†…å®¹ï¼Œä¸è¿‡è¿˜æ²¡åœ¨å®ä¹ å·¥ä½œä¸­é‡åˆ°è¿‡è¿™ç±»é—®é¢˜ï¼Œè¿˜æ˜¯ç¼ºå°‘äº†äº›ç³»ç»Ÿæ€§æ’æŸ¥çš„æ€ç»´ï¼Œè¿™ç¯‡æ–‡ç« å°±æ¥æ€»ç»“å­¦ä¹ ä¸€ä¸‹ã€‚ï¼ˆå…ˆäº†è§£é¡µé¢ç™½å±åŸå›  -&gt; æ¢³ç†ä¸€ä¸‹æ’æŸ¥æ€è·¯ -&gt; å­¦ä¹ ä¸‹å¦‚ä½•åœ¨SDKä¸­å®ç°ç™½å±æ£€æµ‹ï¼‰</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆæ¥æ€»è§ˆä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯é¡µé¢ç™½å±ï¼Ÿ</h2>
<ul>
<li>å‰ç«¯ç™½å±æ˜¯æŒ‡ç”¨æˆ·æ‰“å¼€ç½‘é¡µæ—¶ï¼Œé¡µé¢æœªèƒ½æ­£å¸¸åŠ è½½æˆ–æ¸²æŸ“ï¼Œå¯¼è‡´æµè§ˆå™¨æ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ã€‚</li>
<li>ä¸€èˆ¬æƒ…å†µä¸‹ æ˜¯ç”± JSæ‰§è¡Œé”™è¯¯ / èµ„æºåŠ è½½å¤±è´¥ / ç½‘ç»œé—®é¢˜ / æ¸²æŸ“é€»è¾‘é”™è¯¯ å¼•èµ·çš„ã€‚</li>
<li>åœ¨å•é¡µé¢åº”ç”¨ä¸­ï¼ˆSPAï¼‰ï¼Œå‰ç«¯ç™½å±é—®é¢˜ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œå¯èƒ½å¯¼è‡´ç”¨æˆ·æ— æ³•çœ‹åˆ°ä»»ä½•æœ‰æ•ˆå†…å®¹ã€‚</li>
<li>è€Œè§£å†³ç™½å±é—®é¢˜çš„å…³é”®æ˜¯ï¼šå¿«é€Ÿå®šä½å¹¶ä¿®å¤é”™è¯¯ï¼Œç¡®ä¿èµ„æºæ­£ç¡®åŠ è½½å’Œæ¸²æŸ“ã€‚</li>
</ul>
<blockquote>
<p>ç™½å±é—®é¢˜æœ¬è´¨ä¸Šæ˜¯æµè§ˆå™¨æ¸²æŸ“æµæ°´çº¿çš„æ–­è£‚ï¼Œä» DNS è§£æ -&gt; èµ„æºåŠ è½½ -&gt; JS æ‰§è¡Œ -&gt; DOM æ„å»º -&gt; æ¸²æŸ“æ ‘ç”Ÿæˆ -&gt; é¡µé¢ç»˜åˆ¶çš„å®Œæ•´é“¾è·¯ä¸­ï¼Œä»»ä¸€ç¯èŠ‚çš„å¼‚å¸¸éƒ½å¯èƒ½å¯¼è‡´æœ€ç»ˆå‘ˆç°çš„ç©ºç™½ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€å†æ¥ç³»ç»Ÿæ€§æ¢³ç†ä¸€ä¸‹æ’æŸ¥æ€è·¯</h2>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef1ef63fec04e8e9c5e2aa7fdbc3a0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVja3lmaWY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1752329903&amp;x-signature=smfHBD6Dp6XZuMV%2FTC%2BXdOCVcHM%3D" alt="LuckyfifåŸåˆ›" width="100%" loading="lazy">
<p align="center">å›¾ä¸ºåŸåˆ›, è‹¥éœ€è½¬è½½ å¯ä»¥å¤‡æ³¨å‡ºå¤„âœ¨</p>
<blockquote>
<p>çœ‹å®Œè¿™ä¹ˆå¤æ‚çš„æ’æŸ¥æµç¨‹, æ¥æ€è€ƒä¸‹ä¸€ä¸ªé¡µé¢ç™½å± çœŸçš„å€¼å¾—å¦‚æ­¤è®¤çœŸå¯¹å¾…å—? (é—®é—®é‚£äº›å¤§å‚cç«¯çš„å¤§ä½¬ä»¬å°±çŸ¥é“äº†)</p>
<p>ç”¨æˆ·ä½“é‡è¶Šå¤§, é¡µé¢ç™½å±æ—¶é—´èƒ½å¸¦æ¥çš„è´Ÿé¢å½±å“å°±è¶Šèƒ½å‘ˆç°æŒ‡æ•°çº§å¢é•¿, æ¯”å¦‚è¯´:</p>
<ul>
<li><strong>ä¸šåŠ¡å±‚é¢</strong>ï¼šç”µå•†åœºæ™¯ä¸‹æ¯å¢åŠ 1ç§’ç™½å±æ—¶é—´è½¬åŒ–ç‡ä¸‹é™7%</li>
<li><strong>æŠ€æœ¯å±‚é¢</strong>ï¼šå¯èƒ½å¼•å‘é›ªå´©æ•ˆåº”ï¼ˆå¦‚ CDN æ•…éšœå¯¼è‡´å…¨ç«™ä¸å¯ç”¨ï¼‰</li>
<li><strong>ä½“éªŒå±‚é¢</strong>ï¼šç”¨æˆ·ç•™å­˜ç‡ä¸‹é™40%+</li>
</ul>
</blockquote>
<h3 data-id="heading-2">1. ç¬¬ä¸€é˜¶æ®µï¼šå¿«é€Ÿå®šä½é—®é¢˜å±‚çº§</h3>
<h4 data-id="heading-3">æµè§ˆå™¨æ§åˆ¶å°å››æ­¥è¯Šæ–­æ³•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Step 1 - æ£€æµ‹æ–‡æ¡£åŠ è½½é˜¶æ®µ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOMContentLoaded:'</span>, performance.<span class="hljs-property">timing</span>.<span class="hljs-property">domContentLoadedEventEnd</span> - performance.<span class="hljs-property">timing</span>.<span class="hljs-property">navigationStart</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Load Event:'</span>, performance.<span class="hljs-property">timing</span>.<span class="hljs-property">loadEventEnd</span> - performance.<span class="hljs-property">timing</span>.<span class="hljs-property">navigationStart</span>);

<span class="hljs-comment">// Step 2 - æ£€æŸ¥å…³é”®é”™è¯¯</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Global Error:'</span>, e.<span class="hljs-property">message</span>, e.<span class="hljs-property">filename</span>, e.<span class="hljs-property">lineno</span>);
}, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// Step 3 - éªŒè¯ DOM æŒ‚è½½ç‚¹ï¼ˆReact/Vue é‡ç‚¹ï¼‰</span>
<span class="hljs-keyword">const</span> rootNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>);
<span class="hljs-keyword">if</span> (!rootNode || rootNode.<span class="hljs-property">childNodes</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æŒ‚è½½èŠ‚ç‚¹å¼‚å¸¸:'</span>, rootNode);
}

<span class="hljs-comment">// Step 4 - ç½‘ç»œçŠ¶æ€æ£€æµ‹</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/health-check'</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç½‘ç»œè¿é€šæ€§å¼‚å¸¸:'</span>, e);
});
</code></pre>
<p><strong>å…¸å‹é—®é¢˜åœºæ™¯</strong>ï¼š</p>
<ul>
<li>Vue/React æœªæ•è·çš„åˆå§‹åŒ–é”™è¯¯å¯¼è‡´ root èŠ‚ç‚¹ä¸ºç©º</li>
<li>æµè§ˆå™¨æ’ä»¶æ³¨å…¥çš„è„šæœ¬å¼•å‘å…¨å±€é”™è¯¯</li>
</ul>
<h3 data-id="heading-4">2. ç¬¬äºŒé˜¶æ®µï¼šç½‘ç»œå±‚æ·±åº¦æ£€æµ‹</h3>
<h4 data-id="heading-5">ï¼ˆ1ï¼‰å…³é”®èµ„æºç€‘å¸ƒæµåˆ†æ</h4>
<p>ä½¿ç”¨ Chrome DevTools çš„&nbsp;<strong>Network é¢æ¿</strong>ï¼š</p>
<ol>
<li>
<p>è¿‡æ»¤&nbsp;<code>JS|CSS|IMG</code>&nbsp;ç±»å‹èµ„æº</p>
</li>
<li>
<p>æ£€æŸ¥å…³é”®èµ„æºçš„ï¼š</p>
<ul>
<li><strong>HTTP çŠ¶æ€ç </strong>ï¼ˆé‡ç‚¹ 404/403/500ï¼‰</li>
<li><strong>Timing æ˜ç»†</strong>ï¼ˆTTFB æ˜¯å¦å¼‚å¸¸ï¼‰</li>
</ul>
</li>
<li>
<p>å³é”®èµ„æº â†’&nbsp;<code>Copy as cURL</code>&nbsp;éªŒè¯ CDN å¯ç”¨æ€§</p>
</li>
</ol>
<h4 data-id="heading-6">ï¼ˆ2ï¼‰CDN æ•…éšœä¸“é¡¹æ’æŸ¥</h4>
<pre><code class="hljs language-base" lang="base"># å¤šèŠ‚ç‚¹æ¢æµ‹ï¼ˆéœ€å®‰è£… httpieï¼‰
http https://cdn.example.com/main.js --verify=no \
  --headers \ 
  --proxy=http:http://1.1.1.1:8080 \  # åˆ‡æ¢ä¸åŒä»£ç†èŠ‚ç‚¹
  --download &gt; /dev/null

# DNS æ±¡æŸ“æ£€æµ‹
nslookup cdn.example.com 8.8.8.8   # å¯¹æ¯”ä¸åŒ DNS ç»“æœ
nslookup cdn.example.com 114.114.114.114
</code></pre>
<p><strong>ç»å…¸æ¡ˆä¾‹</strong>ï¼š<br>
æŸç«™ç‚¹å›  CDN èŠ‚ç‚¹æœªåŒæ­¥æœ€æ–°è¯ä¹¦ï¼Œå¯¼è‡´éƒ¨åˆ†ç”¨æˆ·æµè§ˆå™¨æ‹¦æˆª HTTPS è¯·æ±‚å¼•å‘ç™½å±</p>
<h4 data-id="heading-7">ï¼ˆ3ï¼‰èµ„æºå®Œæ•´æ€§æ ¡éªŒï¼ˆSRI å®æˆ˜ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å¸¦ SRI æ ¡éªŒçš„èµ„æºåŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.example.com/react.production.min.js"</span> 
        <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-xxxx"</span>
        <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>æ’æŸ¥è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>æ§åˆ¶å°å‡ºç°&nbsp;<code>Integrity checksum failed</code>&nbsp;é”™è¯¯</li>
<li>æ¯”å¯¹æœåŠ¡å™¨èµ„æº hash å€¼ï¼š</li>
</ul>
<pre><code class="hljs language-base" lang="base">openssl dgst -sha384 -binary react.production.min.js | openssl base64 -A
</code></pre>
<h3 data-id="heading-8">3. ç¬¬ä¸‰é˜¶æ®µï¼šæ¸²æŸ“å±‚æ•…éšœå®šä½</h3>
<h4 data-id="heading-9">ï¼ˆ1ï¼‰SPA æ¡†æ¶ç‰¹æœ‰é™·é˜±</h4>
<p><strong>Vue åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)
}).$mount(<span class="hljs-string">'#app'</span>)  <span class="hljs-comment">// è‹¥ #app èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œé™é»˜å¤±è´¥ï¼</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>);
<span class="hljs-keyword">if</span> (!root) {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">'å®¹å™¨ä¸¢å¤±ï¼Œé™çº§æ˜¾ç¤ºåŸºç¡€å†…å®¹'</span>); 
} <span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({ <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>) }).$mount(root);
}
</code></pre>
<p><strong>React åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é”™è¯¯è¾¹ç•Œç»„ä»¶ï¼ˆæ•è·æ¸²æŸ“å±‚é”™è¯¯ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">captureException</span>(error);
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">reload</span>();  <span class="hljs-comment">// é™çº§ç­–ç•¥</span>
  }
  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>; }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
&lt;<span class="hljs-title class_">ErrorBoundary</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">ErrorBoundary</span>&gt;
</code></pre>
<h4 data-id="heading-10">ï¼ˆ2ï¼‰CSS æ¸²æŸ“é˜»å¡</h4>
<p><strong>æ£€æµ‹æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>æµè§ˆå™¨åœ°å€æ è¾“å…¥&nbsp;<code>about:blank</code>&nbsp;æ¸…ç©ºé¡µé¢</li>
<li>é€æ­¥åŠ è½½ CSS æ–‡ä»¶ï¼Œè§‚å¯Ÿå¸ƒå±€å˜åŒ–</li>
<li>æ£€æŸ¥&nbsp;<code>z-index</code>&nbsp;å¼‚å¸¸å¯¼è‡´å…ƒç´ ä¸å¯è§</li>
</ol>
<p><strong>å…¸å‹æ¡ˆä¾‹</strong>ï¼š<br>
æŸé¡µé¢å› &nbsp;<code>body { display: none !important; }</code>&nbsp;å†…è”æ ·å¼å¯¼è‡´ç™½å±</p>
<h3 data-id="heading-11">4. ç¬¬å››é˜¶æ®µï¼šæ€§èƒ½ç»´åº¦æ·±åº¦åˆ†æ</h3>
<h4 data-id="heading-12">ï¼ˆ1ï¼‰ä¸»çº¿ç¨‹é˜»å¡æ£€æµ‹</h4>
<p><strong>Long Tasks API</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function"><span class="hljs-params">list</span> =&gt;</span> {
  list.<span class="hljs-title function_">getEntries</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">duration</span> &gt; <span class="hljs-number">50</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'ä¸»çº¿ç¨‹é˜»å¡:'</span>, entry);
    }
  });
});
observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'longtask'</span>] });
</code></pre>
<h4 data-id="heading-13">ï¼ˆ2ï¼‰å†…å­˜æ³„æ¼è¿½è¸ª</h4>
<p><strong>Chrome Memory é¢æ¿æ“ä½œ</strong>ï¼š</p>
<ol>
<li>ç”Ÿæˆå †å¿«ç…§ï¼ˆHeap Snapshotï¼‰</li>
<li>ç­›é€‰&nbsp;<code>Detached DOM tree</code>&nbsp;æ£€æŸ¥æœªé‡Šæ”¾èŠ‚ç‚¹</li>
<li>å¯¹æ¯”å¤šæ¬¡å¿«ç…§ï¼ŒæŸ¥æ‰¾æŒç»­å¢é•¿çš„å¯¹è±¡</li>
</ol>
<p><strong>å…¸å‹æ¡ˆä¾‹</strong>ï¼š<br>
æœªé”€æ¯çš„ WebSocket ç›‘å¬å™¨æŒç»­ç´¯ç§¯å¯¼è‡´å†…å­˜æº¢å‡º</p>
<h4 data-id="heading-14">ï¼ˆ3ï¼‰å…³é”®æŒ‡æ ‡é˜ˆå€¼</h4>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>è­¦å‘Šé˜ˆå€¼</th><th>ä¸¥é‡é˜ˆå€¼</th><th>æµ‹é‡å·¥å…·</th></tr></thead><tbody><tr><td>FCP</td><td>&gt;2s</td><td>&gt;4s</td><td>Lighthouse</td></tr><tr><td>JS æ€»æ‰§è¡Œæ—¶é—´</td><td>&gt;3s</td><td>&gt;5s</td><td>Chrome Performance é¢æ¿</td></tr><tr><td>æœªå‹ç¼©èµ„æºå æ¯”</td><td>&gt;30%</td><td>&gt;50%</td><td>Webpack Bundle Analyzer</td></tr></tbody></table>
<hr>
<h3 data-id="heading-15">5. ç¬¬äº”é˜¶æ®µï¼šç¯å¢ƒç‰¹å¼‚æ€§é—®é¢˜</h3>
<h4 data-id="heading-16">ï¼ˆ1ï¼‰æµè§ˆå™¨å…¼å®¹æ€§</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨ Feature Detection ä»£æ›¿ UA æ£€æµ‹</span>
<span class="hljs-keyword">if</span> (!(<span class="hljs-string">'IntersectionObserver'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>)) {
  <span class="hljs-title function_">loadPolyfill</span>(<span class="hljs-string">'intersection-observer'</span>).<span class="hljs-title function_">then</span>(initApp);
}
</code></pre>
<h4 data-id="heading-17">ï¼ˆ2ï¼‰è¿è¥å•†åŠ«æŒæ£€æµ‹</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ£€æŸ¥é¡µé¢æ˜¯å¦è¢«æ³¨å…¥ç¬¬ä¸‰æ–¹è„šæœ¬</span>
<span class="hljs-keyword">const</span> thirdPartyScripts = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">scripts</span>).<span class="hljs-title function_">filter</span>(
  <span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> !s.<span class="hljs-property">src</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hostname</span>)
);
<span class="hljs-keyword">if</span> (thirdPartyScripts.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
  <span class="hljs-title function_">reportException</span>(<span class="hljs-string">'è¿è¥å•†åŠ«æŒ'</span>, thirdPartyScripts);
}
</code></pre>
<h4 data-id="heading-18">ï¼ˆ3ï¼‰æœ¬åœ°ç¯å¢ƒå¹²æ‰°</h4>
<ul>
<li>ç¦ç”¨æ‰€æœ‰æµè§ˆå™¨æ’ä»¶ï¼ˆå°¤å…¶æ˜¯å¹¿å‘Šæ‹¦æˆªå™¨ï¼‰</li>
<li>æ¸…é™¤&nbsp;<code>Service Worker</code>&nbsp;ç¼“å­˜ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js">navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">getRegistrations</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">regs</span> =&gt;</span> {
  regs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">reg</span> =&gt;</span> reg.<span class="hljs-title function_">unregister</span>())
})
</code></pre>
<h4 data-id="heading-19">ï¼ˆ4ï¼‰å…œåº•ç­–ç•¥</h4>
<ul>
<li>ç”¨æˆ·æ“ä½œè§†é¢‘å½•åˆ¶ï¼ˆæ¥å…¥rrwebç­‰å·¥å…·, å¤§å…¬å¸ç›‘æ§ä½“ç³»ä¸‹ä¸€èˆ¬éƒ½æœ‰ç”¨åˆ°, æ²¡æœ‰ç”¨ä¸Šçš„å»ºè®®ä¹Ÿå¯ä»¥åŠ ä¸Šï¼‰</li>
<li>ç‰¹å®šè®¾å¤‡è¿œç¨‹è°ƒè¯•ï¼ˆä½¿ç”¨Chrome Remote Debuggingï¼‰</li>
</ul>
<h2 data-id="heading-20">ä¸‰ã€ç™½å±æ£€æµ‹ SDK  è¦æ€ä¹ˆå†™?</h2>
<blockquote>
<p>è¿™é‡Œå°±ç»™å¤§å®¶æ”¾éƒ¨åˆ†æœ€è¿‘å†™çš„ä»£ç , ä¸»è¦ç”¨çš„æ˜¯<code>åŠ¨æ€æ£€æµ‹æ ¹èŠ‚ç‚¹</code>+<code>é»„é‡‘æ¯”ä¾‹é‡‡æ ·ç®—æ³•</code>+<code>é‡‡æ ·ç‚¹æ£€æµ‹</code>ä¸‰ç§æ–¹æ³•æ¥æ£€æµ‹ç™½å±æƒ…å†µ, æ„Ÿå…´è¶£çš„ä¹Ÿå¯ä»¥å»æˆ‘çš„ä»£ç ä»“åº“çœ‹ä¸‹å®Œæ•´çš„ä»£ç  - <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMzz2022%2FByteTop" target="_blank" title="https://github.com/Mzz2022/ByteTop" ref="nofollow noopener noreferrer">ByteTop - è½»é‡çº§Webç«¯åŸ‹ç‚¹ç›‘æ§å¹³å°</a></p>
</blockquote>
<h3 data-id="heading-21">æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-22">1. æ™ºèƒ½æ ¹èŠ‚ç‚¹æ£€æµ‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> rootSelectors = [<span class="hljs-string">"#root"</span>, <span class="hljs-string">"#app"</span>, <span class="hljs-string">"#main"</span>, <span class="hljs-string">"#container"</span>];
<span class="hljs-keyword">const</span> rootNode = rootSelectors.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">selector</span> =&gt;</span> 
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(selector)
) || <span class="hljs-string">"body"</span>;
<span class="hljs-keyword">const</span> wrapperSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">"html"</span>, <span class="hljs-string">"body"</span>, rootNode.<span class="hljs-title function_">toLowerCase</span>()]);
</code></pre>
<ul>
<li><strong>ç­–ç•¥</strong>ï¼šä¼˜å…ˆçº§éå†å¸¸è§æ¡†æ¶æŒ‚è½½ç‚¹é€‰æ‹©å™¨ï¼ˆ#root â†’ #app â†’ #main â†’ ...ï¼‰</li>
<li><strong>é™çº§</strong>ï¼šæœªåŒ¹é…æ—¶è‡ªåŠ¨é™çº§åˆ° body å…ƒç´ </li>
<li><strong>ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ Set æ•°æ®ç»“æ„å®ç° O(1) å¤æ‚åº¦æŸ¥è¯¢</li>
</ul>
<h4 data-id="heading-23">2. é»„é‡‘æ¯”ä¾‹é‡‡æ ·ç®—æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> goldenRatio = <span class="hljs-number">0.618</span>;
<span class="hljs-keyword">const</span> points = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: config.<span class="hljs-property">sampleCount</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
  <span class="hljs-attr">x</span>: i % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> 
    ? <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
    : <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(),
  <span class="hljs-attr">y</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
}));
</code></pre>
<ul>
<li><strong>è§†è§‰èšç„¦</strong>ï¼š61.8% åŒºåŸŸå¯†é›†é‡‡æ ·ï¼Œç¬¦åˆäººç±»è§†è§‰ç„¦ç‚¹åˆ†å¸ƒè§„å¾‹</li>
<li><strong>æŠ—å¯¹ç§°å¹²æ‰°</strong>ï¼šé€šè¿‡å¥‡å¶ç´¢å¼•å®ç°å·¦å³é•œåƒåˆ†å¸ƒï¼Œç ´è§£å±…ä¸­å¸ƒå±€è¯¯åˆ¤</li>
<li><strong>éšæœºæ‰°åŠ¨</strong>ï¼šåœ¨é»„é‡‘æ¯”ä¾‹åŒºåŸŸå†…å¼•å…¥éšæœºåæ ‡ï¼Œé¿å…å›ºå®šè·¯å¾„é‡‡æ ·</li>
</ul>
<h4 data-id="heading-24">3. å¤åˆç‰¹å¾æ£€æµ‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> identifiers = [
  element.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>(),          <span class="hljs-comment">// æ ‡ç­¾ç‰¹å¾</span>
  element.<span class="hljs-property">id</span> ? <span class="hljs-string">`#<span class="hljs-subst">${element.id}</span>`</span> : <span class="hljs-string">""</span>,    <span class="hljs-comment">// ID ç‰¹å¾</span>
  ...<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(element.<span class="hljs-property">classList</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> <span class="hljs-string">`.<span class="hljs-subst">${c}</span>`</span>) <span class="hljs-comment">// ç±»åç‰¹å¾</span>
];

<span class="hljs-keyword">if</span> (identifiers.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> wrapperSet.<span class="hljs-title function_">has</span>(id))) {
  emptyCount++;
}
</code></pre>
<ul>
<li><strong>ä¸‰çº§ç‰¹å¾æå–</strong>ï¼šæ ‡ç­¾åã€IDã€ç±»åå…¨æ–¹ä½æ ‡è¯†å…ƒç´ </li>
<li><strong>åŠ¨æ€ç±»åæ”¯æŒ</strong>ï¼šå…¼å®¹ CSS Modules ç­‰å“ˆå¸Œç±»ååœºæ™¯</li>
<li><strong>é«˜æ•ˆåŒ¹é…</strong>ï¼šSet æ•°æ®ç»“æ„å®ç°å¿«é€Ÿç‰¹å¾æ¯”å¯¹</li>
</ul>
<h4 data-id="heading-25">4. åŠ¨æ€é˜ˆå€¼ç­–ç•¥</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">return</span> emptyCount / config.<span class="hljs-property">sampleCount</span> &gt;= config.<span class="hljs-property">threshold</span>;
</code></pre>
<ul>
<li><strong>æ¯”ä¾‹æ§åˆ¶</strong>ï¼šé€šè¿‡é˜ˆå€¼å‚æ•°æ§åˆ¶è¯¯æŠ¥ç‡ä¸æ¼æŠ¥ç‡çš„å¹³è¡¡</li>
<li><strong>åœºæ™¯é€‚é…</strong>ï¼šç§»åŠ¨ç«¯æ¨è 0.7-0.8ï¼ŒPC ç«¯æ¨è 0.8-0.9</li>
<li><strong>åŠ¨æ€æ„ŸçŸ¥</strong>ï¼šæ ¹æ®è®¾å¤‡ç±»å‹è‡ªåŠ¨è°ƒèŠ‚é˜ˆå€¼ï¼ˆéœ€æ‰©å±•å®ç°ï¼‰</li>
</ul>
<h3 data-id="heading-26">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CheckWhiteScreenOptions</span> {
&nbsp; <span class="hljs-comment">/** é‡‡æ ·ç‚¹æ•°é‡ (é»˜è®¤: 20) */</span>
&nbsp; sampleCount?: <span class="hljs-built_in">number</span>;
&nbsp; <span class="hljs-comment">/** ç©ºç™½ç‚¹åˆ¤å®šé˜ˆå€¼ (0-1, é»˜è®¤ 0.8) */</span>
&nbsp; threshold?: <span class="hljs-built_in">number</span>;
&nbsp; <span class="hljs-comment">/** æ’é™¤çš„éª¨æ¶å±ç±»å (é»˜è®¤: 'skeleton') */</span>
&nbsp; skeletonClass?: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">const</span> checkWhiteScreen = (options?: <span class="hljs-title class_">CheckWhiteScreenOptions</span>): <span class="hljs-function"><span class="hljs-params">boolean</span> =&gt;</span> {
&nbsp; <span class="hljs-keyword">const</span> config = {
&nbsp; &nbsp; <span class="hljs-attr">sampleCount</span>: <span class="hljs-number">20</span>,
&nbsp; &nbsp; <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.8</span>,
&nbsp; &nbsp; <span class="hljs-attr">skeletonClass</span>: <span class="hljs-string">"skeleton"</span>,
&nbsp; &nbsp; ...options,
&nbsp; };
&nbsp; <span class="hljs-keyword">try</span> {
&nbsp; &nbsp; <span class="hljs-comment">// 1. æ’é™¤éª¨æ¶å±åœºæ™¯</span>
&nbsp; &nbsp; <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(config.<span class="hljs-property">skeletonClass</span>).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
&nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
&nbsp; &nbsp; }  

&nbsp; &nbsp; <span class="hljs-comment">// 2. åŠ¨æ€æ£€æµ‹æ ¹èŠ‚ç‚¹</span>
&nbsp; &nbsp; <span class="hljs-keyword">const</span> rootSelectors = [<span class="hljs-string">"#root"</span>, <span class="hljs-string">"#app"</span>, <span class="hljs-string">"#main"</span>, <span class="hljs-string">"#container"</span>];
&nbsp; &nbsp; <span class="hljs-keyword">const</span> rootNode =
&nbsp; &nbsp; &nbsp; rootSelectors.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">selector</span>) =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(selector)) ||
&nbsp; &nbsp; &nbsp; <span class="hljs-string">"body"</span>;
&nbsp; &nbsp; <span class="hljs-keyword">const</span> wrapperSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">"html"</span>, <span class="hljs-string">"body"</span>, rootNode.<span class="hljs-title function_">toLowerCase</span>()]);
    
&nbsp; &nbsp; <span class="hljs-comment">// 3. é»„é‡‘æ¯”ä¾‹é‡‡æ ·ç®—æ³•</span>
&nbsp; &nbsp; <span class="hljs-keyword">const</span> goldenRatio = <span class="hljs-number">0.618</span>;
&nbsp; &nbsp; <span class="hljs-keyword">const</span> points = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: config.<span class="hljs-property">sampleCount</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
&nbsp; &nbsp; &nbsp; <span class="hljs-attr">x</span>:
&nbsp; &nbsp; &nbsp; &nbsp; i % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ? <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(),
&nbsp; &nbsp; &nbsp; <span class="hljs-attr">y</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> * goldenRatio * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(),
&nbsp; &nbsp; }));  

&nbsp; &nbsp; <span class="hljs-comment">// 4. é‡‡æ ·ç‚¹æ£€æµ‹</span>
&nbsp; &nbsp; <span class="hljs-keyword">let</span> emptyCount = <span class="hljs-number">0</span>;
&nbsp; &nbsp; points.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">point</span>) =&gt;</span> {
&nbsp; &nbsp; &nbsp; <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">elementFromPoint</span>(point.<span class="hljs-property">x</span>, point.<span class="hljs-property">y</span>);
&nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> (!element) {
&nbsp; &nbsp; &nbsp; &nbsp; emptyCount++;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span>;
&nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; &nbsp; <span class="hljs-keyword">const</span> identifiers = [
&nbsp; &nbsp; &nbsp; &nbsp; element.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>(),
&nbsp; &nbsp; &nbsp; &nbsp; element.<span class="hljs-property">id</span> ? <span class="hljs-string">`#<span class="hljs-subst">${element.id}</span>`</span> : <span class="hljs-string">""</span>,
&nbsp; &nbsp; &nbsp; &nbsp; ...<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(element.<span class="hljs-property">classList</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">c</span>) =&gt;</span> <span class="hljs-string">`.<span class="hljs-subst">${c}</span>`</span>),
&nbsp; &nbsp; &nbsp; ];
&nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> (identifiers.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> wrapperSet.<span class="hljs-title function_">has</span>(id))) {
&nbsp; &nbsp; &nbsp; &nbsp; emptyCount++;
&nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; });
&nbsp; &nbsp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"emptyCount"</span>, emptyCount, <span class="hljs-string">" config:"</span>, config);
    
&nbsp; &nbsp; <span class="hljs-comment">// 5. é˜ˆå€¼åˆ¤æ–­</span>
&nbsp; &nbsp; <span class="hljs-keyword">return</span> emptyCount / config.<span class="hljs-property">sampleCount</span> &gt;= config.<span class="hljs-property">threshold</span>;
&nbsp; } <span class="hljs-keyword">catch</span> (e) {
&nbsp; &nbsp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"[ç™½å±æ£€æµ‹å¼‚å¸¸]"</span>, e);
&nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
&nbsp; }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> checkWhiteScreen;
<span class="hljs-comment">// // è‡ªå®šä¹‰é…ç½®</span>
<span class="hljs-comment">// const isWhite = checkWhiteScreen({</span>
<span class="hljs-comment">// &nbsp; sampleCount: 30,</span>
<span class="hljs-comment">// &nbsp; threshold: 0.75,</span>
<span class="hljs-comment">// &nbsp; skeletonClass: 'loading-skeleton'</span>
<span class="hljs-comment">// });</span>

<span class="hljs-comment">// // ç§»åŠ¨ç«¯é€‚é…é…ç½®</span>

<span class="hljs-comment">// checkWhiteScreen({</span>
<span class="hljs-comment">// &nbsp; sampleCount: 15, &nbsp;// å‡å°‘é‡‡æ ·ç‚¹</span>
<span class="hljs-comment">// &nbsp; threshold: 0.7 &nbsp; &nbsp;// é™ä½é˜ˆå€¼</span>
<span class="hljs-comment">// });</span>

<span class="hljs-comment">// // åå°ç®¡ç†ç³»ç»Ÿ</span>
<span class="hljs-comment">// checkWhiteScreen({</span>
<span class="hljs-comment">// &nbsp; skeletonClass: 'ant-skeleton' // åŒ¹é…UIæ¡†æ¶</span>
<span class="hljs-comment">// });</span>

<span class="hljs-comment">// // é«˜ç²¾åº¦æ£€æµ‹</span>
<span class="hljs-comment">// checkWhiteScreen({</span>
<span class="hljs-comment">// &nbsp; sampleCount: 50, &nbsp;// å¢åŠ é‡‡æ ·å¯†åº¦</span>
<span class="hljs-comment">// &nbsp; threshold: 0.9 &nbsp; &nbsp;// ä¸¥æ ¼åˆ¤å®š</span>
<span class="hljs-comment">// });</span>
</code></pre>
<hr>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c8c390352d43d1a973914ab6d42b36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVja3lmaWY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1752329903&amp;x-signature=EhVIG5OKiVcNivkG2yNgIp8cXE8%3D" alt="å›¾ç‰‡.png" loading="lazy"></p>
<p align="center">è¿™é‡Œçš„ä¸ŠæŠ¥åŠŸèƒ½æ˜¯å…¶ä»–ä»£ç å®ç°çš„, éƒ½æ”¾åœ¨<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="> github</a> é‡Œé¢äº†ğŸ˜Š</p>
<h2 data-id="heading-27">æ€»ç»“</h2>
<blockquote>
<p>ç»ˆäºå†™å®Œäº†, æœ€åçš„æœ€å, æˆ‘è¿™é‡Œæƒ³è¯´: ä»ä¸€æœˆä»½å¼€å§‹åšåŸ‹ç‚¹ç›‘æ§ç›¸å…³çš„é¡¹ç›®, å¾ˆéš¾ä½†ä¹Ÿå¾ˆæœ‰æ„æ€, è¾¹å®ä¹ è¾¹æŠ½ç©ºåšè‡ªå·±çš„é¡¹ç›®, å¥½åœ¨é¢è¯•è¿‡ç¨‹ä¸­è¿™ä¸ªé¡¹ç›®ä¹Ÿä¸ºæˆ‘åŠ äº†å¾ˆå¤šåˆ†, å¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥å»ç‚¹ä¸ªstar(<del>è™½ç„¶ç›®å‰æ˜¯å¼€æºçš„, ä½†ä¸ç¡®å®šåç»­ä¼šä¸ä¼šçŸ­æš‚é—­æº, ç‚¹äº†starå°±å¯ä»¥è·å¾—æ°¸ä¹…ä¿å­˜ä¸‹æ¥</del>), åç»­è¿˜ä¼šåˆ©ç”¨ç©ºé—²æ—¶é—´ç»§ç»­å®Œå–„( è‡ªå»ºæœåŠ¡ç«¯+å¯è§†åŒ–åˆ†æå¹³å°+SDK ) <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMzz2022%2FByteTop" target="_blank" title="https://github.com/Mzz2022/ByteTop" ref="nofollow noopener noreferrer">ByteTop - è½»é‡çº§Webç«¯åŸ‹ç‚¹ç›‘æ§å¹³å°</a> <del>åå­—çèµ·çš„, è¿˜è¯·å¤§ä½¬ä»¬å‹¿å–·ğŸ˜­</del></p>
</blockquote></div></div>
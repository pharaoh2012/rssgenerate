<!----> <meta itemprop="headline" content="æˆ‘å°†å°è£…å²ä¸Šæœ€ä¼˜é›…çš„ Axios "> <meta itemprop="keywords" content="å‰ç«¯"> <meta itemprop="datePublished" content="2025-08-06T04:40:43.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¼˜é›…å“¥"> <meta itemprop="url" content="https://juejin.cn/user/2586522652258894"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å°†å°è£…å²ä¸Šæœ€ä¼˜é›…çš„ Axios 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2586522652258894/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¼˜é›…å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-08-06T04:40:43.000Z" title="Wed Aug 06 2025 04:40:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-08-06
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""></circle></svg> <span class="views-count" data-v-61fb5e44="">
                    4,257
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""></path></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><blockquote>
<p>ç»è¿‡ä¸€ä¸Šåˆçš„åå¤æ‰“ç£¨ï¼Œç»ˆäºå†™å‡ºäº†è¿™ä¸ªè®©æˆ‘æ»¡æ„çš„ HTTP å®¢æˆ·ç«¯å°è£…ã€‚å½“æˆ‘æŠŠä»£ç å‘ç»™æœ‹å‹æ—¶ï¼Œä»–ç«Ÿç„¶æŒ‘å‡ºäº†ä¸€å †é—®é¢˜ï¼è¿˜å¥½æˆ‘éƒ½ä¸€ä¸€è§£å†³äº†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ¯ ä¸ºä»€ä¹ˆè¦é‡æ–°å°è£… Axiosï¼Ÿ</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ Axios æ˜¯ JavaScript ä¸–ç•Œé‡Œæœ€å—æ¬¢è¿çš„ HTTP å®¢æˆ·ç«¯ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯éœ€è¦ï¼š</p>
<ul>
<li>ğŸ”„ <strong>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</strong> - ä¸æƒ³åœ¨æ¯ä¸ªè¯·æ±‚é‡Œå†™é‡å¤çš„ try-catch</li>
<li>ğŸš« <strong>è¯·æ±‚å–æ¶ˆæœºåˆ¶</strong> - ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢é¡µé¢æ—¶å–æ¶ˆæ— ç”¨è¯·æ±‚</li>
<li>ğŸ” <strong>è‡ªåŠ¨é‡è¯•åŠŸèƒ½</strong> - ç½‘ç»œä¸ç¨³å®šæ—¶è‡ªåŠ¨é‡è¯•</li>
<li>ğŸ¨ <strong>TypeScript å®Œç¾æ”¯æŒ</strong> - ç±»å‹å®‰å…¨ï¼ŒIDE æ™ºèƒ½æç¤º</li>
<li>ğŸ—ï¸ <strong>å¤šå®ä¾‹ç®¡ç†</strong> - ä¸åŒ API æœåŠ¡éœ€è¦ä¸åŒé…ç½®</li>
</ul>
<p>å¸‚é¢ä¸Šçš„å°è£…è¦ä¹ˆå¤ªç®€å•ï¼Œè¦ä¹ˆå¤ªå¤æ‚ã€‚æ‰€ä»¥æˆ‘å†³å®šå†™ä¸€ä¸ª<strong>æ—¢ä¼˜é›…åˆå®ç”¨</strong>çš„ç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-1">ğŸ¨ è®¾è®¡ç†å¿µ</h2>
<p>è¿™ä¸ªå°è£…çš„è®¾è®¡éµå¾ªå‡ ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>ğŸ¯ æ¸è¿›å¼å¢å¼º</strong> - å¯ä»¥åƒåŸç”Ÿ Axios ä¸€æ ·ç®€å•ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å¯ç”¨é«˜çº§åŠŸèƒ½</li>
<li><strong>ğŸ”’ ç±»å‹å®‰å…¨</strong> - å®Œæ•´çš„ TypeScript æ”¯æŒï¼Œç¼–è¯‘æ—¶å‘ç°é—®é¢˜</li>
<li><strong>ğŸ§© çµæ´»æ‰©å±•</strong> - æ”¯æŒå¤šå®ä¾‹ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€ä¸šåŠ¡å®šåˆ¶</li>
<li><strong>âš¡ æ€§èƒ½ä¼˜å…ˆ</strong> - è‡ªåŠ¨å»é‡ã€æ™ºèƒ½é‡è¯•ã€å†…å­˜ç®¡ç†</li>
<li><strong>ğŸ“– æ–‡æ¡£å‹å¥½</strong> - ä¸°å¯Œçš„ç¤ºä¾‹å’Œæ³¨é‡Šï¼Œä¸Šæ‰‹å³ç”¨</li>
</ol>
<h2 data-id="heading-2">ğŸ“œ å®Œæ•´æºç </h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Axios</span>, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">CustomParamsSerializer</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosResponse</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">InternalAxiosRequestConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Method</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;
<span class="hljs-keyword">import</span> { stringify } <span class="hljs-keyword">from</span> <span class="hljs-string">"qs"</span>;

<span class="hljs-comment">// åŸºç¡€é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">defaultConfig</span>: <span class="hljs-title class_">AxiosRequestConfig</span> = {
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">6000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json;charset=utf-8"</span>
  },
  <span class="hljs-attr">paramsSerializer</span>: {
    <span class="hljs-attr">serialize</span>: stringify <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">CustomParamsSerializer</span>
  }
};

<span class="hljs-comment">// å“åº”æ•°æ®åŸºç¡€ç»“æ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseResponse</span> {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  message?: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// å»é™¤ä¸BaseResponseå†²çªçš„å­—æ®µ</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OmitBaseResponse</span>&lt;T&gt; = <span class="hljs-title class_">Omit</span>&lt;T, keyof <span class="hljs-title class_">BaseResponse</span>&gt;;

<span class="hljs-comment">// å“åº”æ•°æ®ç±»å‹å®šä¹‰ - é¿å…å±æ€§å†²çªï¼Œç¡®ä¿BaseResponseä¼˜å…ˆçº§</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseData</span>&lt;T = <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">BaseResponse</span> &amp; <span class="hljs-title class_">OmitBaseResponse</span>&lt;T&gt;;

<span class="hljs-comment">// å“åº”æ•°æ®éªŒè¯å‡½æ•°ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseValidator</span>&lt;T = <span class="hljs-built_in">any</span>&gt; = <span class="hljs-function">(<span class="hljs-params">data: ResponseData&lt;T&gt;</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">// é‡è¯•é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RetryConfig</span> {
  retries?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// é‡è¯•æ¬¡æ•°</span>
  retryDelay?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰</span>
  retryCondition?: <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// é‡è¯•æ¡ä»¶</span>
}

<span class="hljs-comment">// æ‹¦æˆªå™¨é…ç½®ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterceptorsConfig</span> {
  requestInterceptor?: <span class="hljs-function">(<span class="hljs-params">config: InternalAxiosRequestConfig</span>) =&gt;</span> <span class="hljs-title class_">InternalAxiosRequestConfig</span>;
  requestErrorInterceptor?: <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
  responseInterceptor?: <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse&lt;ResponseData&lt;<span class="hljs-built_in">any</span>&gt;&gt;</span>) =&gt;</span> <span class="hljs-built_in">any</span>;
  responseErrorInterceptor?: <span class="hljs-function">(<span class="hljs-params">error: AxiosError</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt;;
}

<span class="hljs-comment">// è¯·æ±‚å”¯ä¸€é”®</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">RequestKey</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">symbol</span>;

<span class="hljs-comment">/**
 * å¢å¼ºå‹ HTTP å®¢æˆ·ç«¯ï¼ŒåŸºäº Axios å°è£…
 * æ”¯æŒæ‹¦æˆªå™¨é…ç½®ã€è¯·æ±‚å–æ¶ˆã€å¤šå®ä¾‹ç®¡ç†ç­‰åŠŸèƒ½
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClient</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AxiosInstance</span>;
  <span class="hljs-keyword">private</span> requestInterceptorId?: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> responseInterceptorId?: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">abortControllers</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">RequestKey</span>, <span class="hljs-title class_">AbortController</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

  <span class="hljs-comment">/**
   * åˆ›å»º HTTP å®¢æˆ·ç«¯å®ä¾‹
   * <span class="hljs-doctag">@param</span> customConfig è‡ªå®šä¹‰ Axios é…ç½®
   * <span class="hljs-doctag">@param</span> interceptors è‡ªå®šä¹‰æ‹¦æˆªå™¨é…ç½®
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">customConfig?: AxiosRequestConfig, interceptors?: InterceptorsConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = <span class="hljs-title class_">Axios</span>.<span class="hljs-title function_">create</span>({ ...defaultConfig, ...customConfig });
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initInterceptors</span>(interceptors);
  }

  <span class="hljs-comment">/** åˆå§‹åŒ–æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">initInterceptors</span>(interceptors?: <span class="hljs-title class_">InterceptorsConfig</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initRequestInterceptor</span>(interceptors?.<span class="hljs-property">requestInterceptor</span>, interceptors?.<span class="hljs-property">requestErrorInterceptor</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initResponseInterceptor</span>(interceptors?.<span class="hljs-property">responseInterceptor</span>, interceptors?.<span class="hljs-property">responseErrorInterceptor</span>);
  }

  <span class="hljs-comment">/** åˆå§‹åŒ–è¯·æ±‚æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">initRequestInterceptor</span>(customInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"requestInterceptor"</span>], customErrorInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"requestErrorInterceptor"</span>]): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// é»˜è®¤è¯·æ±‚æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">const</span> defaultInterceptor = (<span class="hljs-attr">config</span>: <span class="hljs-title class_">InternalAxiosRequestConfig</span>): <span class="hljs-function"><span class="hljs-params">InternalAxiosRequestConfig</span> =&gt;</span> {
      <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™è¯·æ±‚æ‹¦æˆªå™¨çš„é»˜è®¤ä¸šåŠ¡é€»è¾‘ */</span>
      <span class="hljs-comment">// ç¤ºä¾‹: æ·»åŠ token</span>
      <span class="hljs-comment">// const token = localStorage.getItem('token');</span>
      <span class="hljs-comment">// if (token) {</span>
      <span class="hljs-comment">//   config.headers.Authorization = `Bearer ${token}`;</span>
      <span class="hljs-comment">// }</span>

      <span class="hljs-comment">// ç¤ºä¾‹: æ·»åŠ æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜</span>
      <span class="hljs-comment">// if (config.method?.toUpperCase() === 'GET') {</span>
      <span class="hljs-comment">//   config.params = { ...config.params, _t: Date.now() };</span>
      <span class="hljs-comment">// }</span>

      <span class="hljs-keyword">return</span> config;
    };

    <span class="hljs-comment">// é»˜è®¤è¯·æ±‚é”™è¯¯æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">const</span> defaultErrorInterceptor = (<span class="hljs-attr">error</span>: <span class="hljs-title class_">AxiosError</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; =&gt; {
      <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™è¯·æ±‚é”™è¯¯æ‹¦æˆªå™¨çš„é»˜è®¤ä¸šåŠ¡é€»è¾‘ */</span>
      <span class="hljs-comment">// ç¤ºä¾‹: å¤„ç†è¯·æ±‚å‰çš„é”™è¯¯</span>
      <span class="hljs-comment">// console.error('è¯·æ±‚é…ç½®é”™è¯¯:', error);</span>

      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    };

    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(customInterceptor || defaultInterceptor, customErrorInterceptor || defaultErrorInterceptor);
  }

  <span class="hljs-comment">/** åˆå§‹åŒ–å“åº”æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">initResponseInterceptor</span>(customInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"responseInterceptor"</span>], customErrorInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"responseErrorInterceptor"</span>]): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// é»˜è®¤å“åº”æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">defaultInterceptor</span> = (<span class="hljs-params">response: AxiosResponse&lt;ResponseData&lt;<span class="hljs-built_in">any</span>&gt;&gt;</span>) =&gt; {
      <span class="hljs-keyword">const</span> requestKey = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestKey</span>(response.<span class="hljs-property">config</span>);
      <span class="hljs-keyword">if</span> (requestKey) <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">delete</span>(requestKey);

      <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™å“åº”æ‹¦æˆªå™¨çš„é»˜è®¤ä¸šåŠ¡é€»è¾‘ */</span>
      <span class="hljs-comment">// ç¤ºä¾‹: å¤„ç†ä¸åŒçš„å“åº”ç </span>
      <span class="hljs-comment">// const { code, message } = response.data;</span>
      <span class="hljs-comment">// switch(code) {</span>
      <span class="hljs-comment">//   case 200:</span>
      <span class="hljs-comment">//     return response.data;</span>
      <span class="hljs-comment">//   case 401:</span>
      <span class="hljs-comment">//     // æœªæˆæƒå¤„ç†</span>
      <span class="hljs-comment">//     break;</span>
      <span class="hljs-comment">//   case 403:</span>
      <span class="hljs-comment">//     // æƒé™ä¸è¶³å¤„ç†</span>
      <span class="hljs-comment">//     break;</span>
      <span class="hljs-comment">//   default:</span>
      <span class="hljs-comment">//     // å…¶ä»–é”™è¯¯å¤„ç†</span>
      <span class="hljs-comment">//     console.error('è¯·æ±‚é”™è¯¯:', message);</span>
      <span class="hljs-comment">// }</span>

      <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
    };

    <span class="hljs-comment">// é»˜è®¤å“åº”é”™è¯¯æ‹¦æˆªå™¨</span>
    <span class="hljs-keyword">const</span> defaultErrorInterceptor = (<span class="hljs-attr">error</span>: <span class="hljs-title class_">AxiosError</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; =&gt; {
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">config</span>) {
        <span class="hljs-keyword">const</span> requestKey = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestKey</span>(error.<span class="hljs-property">config</span>);
        <span class="hljs-keyword">if</span> (requestKey) <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">delete</span>(requestKey);
      }

      <span class="hljs-comment">// å¤„ç†è¯·æ±‚è¢«å–æ¶ˆçš„æƒ…å†µ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Axios</span>.<span class="hljs-title function_">isCancel</span>(error)) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"è¯·æ±‚å·²è¢«å–æ¶ˆ:"</span>, error.<span class="hljs-property">message</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"è¯·æ±‚å·²è¢«å–æ¶ˆ"</span>));
      }

      <span class="hljs-comment">// ç½‘ç»œé”™è¯¯å¤„ç†</span>
      <span class="hljs-keyword">if</span> (!(error <span class="hljs-keyword">as</span> <span class="hljs-title class_">AxiosError</span>).<span class="hljs-property">response</span>) {
        <span class="hljs-keyword">if</span> ((error <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">code</span> === <span class="hljs-string">"ECONNABORTED"</span> || (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">AxiosError</span>).<span class="hljs-property">message</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"timeout"</span>)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•"</span>));
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"</span>));
      }

      <span class="hljs-comment">// HTTPçŠ¶æ€ç é”™è¯¯å¤„ç†</span>
      <span class="hljs-keyword">const</span> status = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">AxiosError</span>).<span class="hljs-property">response</span>?.<span class="hljs-property">status</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-attr">commonErrors</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt; = {
        <span class="hljs-number">400</span>: <span class="hljs-string">"è¯·æ±‚å‚æ•°é”™è¯¯"</span>,
        <span class="hljs-number">401</span>: <span class="hljs-string">"æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•"</span>,
        <span class="hljs-number">403</span>: <span class="hljs-string">"æƒé™ä¸è¶³"</span>,
        <span class="hljs-number">404</span>: <span class="hljs-string">"è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨"</span>,
        <span class="hljs-number">408</span>: <span class="hljs-string">"è¯·æ±‚è¶…æ—¶"</span>,
        <span class="hljs-number">500</span>: <span class="hljs-string">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"</span>,
        <span class="hljs-number">502</span>: <span class="hljs-string">"ç½‘å…³é”™è¯¯"</span>,
        <span class="hljs-number">503</span>: <span class="hljs-string">"æœåŠ¡æš‚ä¸å¯ç”¨"</span>,
        <span class="hljs-number">504</span>: <span class="hljs-string">"ç½‘å…³è¶…æ—¶"</span>
      };

      <span class="hljs-keyword">const</span> message = commonErrors[status] || <span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼ˆçŠ¶æ€ç ï¼š<span class="hljs-subst">${status}</span>ï¼‰`</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(message));
    };

    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseInterceptorId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(customInterceptor || defaultInterceptor, customErrorInterceptor || defaultErrorInterceptor);
  }

  <span class="hljs-comment">/** ç”Ÿæˆè¯·æ±‚å”¯ä¸€æ ‡è¯† */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getRequestKey</span>(<span class="hljs-attr">config</span>: <span class="hljs-title class_">AxiosRequestConfig</span>): <span class="hljs-title class_">RequestKey</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">url</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${config.method?.toUpperCase()}</span>-<span class="hljs-subst">${config.url}</span>`</span>;
  }

  <span class="hljs-comment">/** è®¾ç½®å–æ¶ˆæ§åˆ¶å™¨ - ç”¨äºå–æ¶ˆé‡å¤è¯·æ±‚æˆ–ä¸»åŠ¨å–æ¶ˆè¯·æ±‚ */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">setupCancelController</span>(<span class="hljs-attr">config</span>: <span class="hljs-title class_">AxiosRequestConfig</span>, requestKey?: <span class="hljs-title class_">RequestKey</span>): <span class="hljs-title class_">AxiosRequestConfig</span> {
    <span class="hljs-keyword">const</span> key = requestKey || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestKey</span>(config);
    <span class="hljs-keyword">if</span> (!key) <span class="hljs-keyword">return</span> config;

    <span class="hljs-comment">// å¦‚æœå·²æœ‰ç›¸åŒkeyçš„è¯·æ±‚ï¼Œå…ˆå–æ¶ˆå®ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(key);

    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">set</span>(key, controller);

    <span class="hljs-keyword">return</span> {
      ...config,
      <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>
    };
  }

  <span class="hljs-comment">/** ç§»é™¤è¯·æ±‚æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">removeRequestInterceptor</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span> !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">eject</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// é‡ç½®IDï¼Œé¿å…é‡å¤ç§»é™¤</span>
    }
  }

  <span class="hljs-comment">/** ç§»é™¤å“åº”æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">removeResponseInterceptor</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseInterceptorId</span> !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">eject</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">responseInterceptorId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseInterceptorId</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// é‡ç½®IDï¼Œé¿å…é‡å¤ç§»é™¤</span>
    }
  }

  <span class="hljs-comment">/** åŠ¨æ€è®¾ç½®è¯·æ±‚æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">setRequestInterceptor</span>(customInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"requestInterceptor"</span>], customErrorInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"requestErrorInterceptor"</span>]): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRequestInterceptor</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initRequestInterceptor</span>(customInterceptor, customErrorInterceptor);
  }

  <span class="hljs-comment">/** åŠ¨æ€è®¾ç½®å“åº”æ‹¦æˆªå™¨ */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">setResponseInterceptor</span>(customInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"responseInterceptor"</span>], customErrorInterceptor?: <span class="hljs-title class_">InterceptorsConfig</span>[<span class="hljs-string">"responseErrorInterceptor"</span>]): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeResponseInterceptor</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initResponseInterceptor</span>(customInterceptor, customErrorInterceptor);
  }

  <span class="hljs-comment">/** è·å– Axios å®ä¾‹ */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">AxiosInstance</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>;
  }

  <span class="hljs-comment">/**
   * å–æ¶ˆæŸä¸ªè¯·æ±‚
   * <span class="hljs-doctag">@param</span> key è¯·æ±‚å”¯ä¸€æ ‡è¯†
   * <span class="hljs-doctag">@param</span> message å–æ¶ˆåŸå› 
   * <span class="hljs-doctag">@returns</span> æ˜¯å¦æˆåŠŸå–æ¶ˆ
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">cancelRequest</span>(<span class="hljs-attr">key</span>: <span class="hljs-title class_">RequestKey</span>, message?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">const</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (controller) {
      controller.<span class="hljs-title function_">abort</span>(message || <span class="hljs-string">`å–æ¶ˆè¯·æ±‚: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(key)}</span>`</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">delete</span>(key);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">/**
   * å–æ¶ˆæ‰€æœ‰è¯·æ±‚
   * <span class="hljs-doctag">@param</span> message å–æ¶ˆåŸå› 
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">cancelAllRequests</span>(message?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">controller, key</span>) =&gt;</span> {
      controller.<span class="hljs-title function_">abort</span>(message || <span class="hljs-string">`å–æ¶ˆæ‰€æœ‰è¯·æ±‚: <span class="hljs-subst">${<span class="hljs-built_in">String</span>(key)}</span>`</span>);
    });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">clear</span>();
  }

  <span class="hljs-comment">/**
   * åˆ¤æ–­æ˜¯å¦ä¸ºå–æ¶ˆé”™è¯¯
   * <span class="hljs-doctag">@param</span> error é”™è¯¯å¯¹è±¡
   * <span class="hljs-doctag">@returns</span> æ˜¯å¦ä¸ºå–æ¶ˆé”™è¯¯
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">isCancel</span>(<span class="hljs-attr">error</span>: <span class="hljs-built_in">unknown</span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Axios</span>.<span class="hljs-title function_">isCancel</span>(error);
  }

  <span class="hljs-comment">/**
   * ç¡çœ å‡½æ•°
   * <span class="hljs-doctag">@param</span> ms æ¯«ç§’æ•°
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-attr">ms</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, ms));
  }

  <span class="hljs-comment">/**
   * é€šç”¨è¯·æ±‚æ–¹æ³•
   * <span class="hljs-doctag">@param</span> method è¯·æ±‚æ–¹æ³•
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> request&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">method</span>: <span class="hljs-title class_">Method</span>, <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">const</span> { requestKey, retry, ...restConfig } = config || {};

    <span class="hljs-comment">// è®¾ç½®åˆç†çš„é»˜è®¤é‡è¯•æ¡ä»¶</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">defaultRetryCondition</span> = (<span class="hljs-params">error: AxiosError</span>) =&gt; {
      <span class="hljs-comment">// é»˜è®¤åªé‡è¯•ç½‘ç»œé”™è¯¯æˆ–5xxæœåŠ¡å™¨é”™è¯¯</span>
      <span class="hljs-keyword">return</span> !error.<span class="hljs-property">response</span> || (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &lt; <span class="hljs-number">600</span>);
    };

    <span class="hljs-keyword">const</span> retryConfig = {
      <span class="hljs-attr">retries</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">retryDelay</span>: <span class="hljs-number">1000</span>,
      <span class="hljs-attr">retryCondition</span>: defaultRetryCondition,
      ...retry
    };

    <span class="hljs-keyword">let</span> <span class="hljs-attr">lastError</span>: <span class="hljs-built_in">any</span>;
    <span class="hljs-keyword">const</span> key = requestKey || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestKey</span>({ ...restConfig, method, url });

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt;= retryConfig.<span class="hljs-property">retries</span>; attempt++) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// é‡è¯•å‰æ¸…é™¤æ—§çš„AbortControllerï¼ˆé¿å…é‡è¯•è¯·æ±‚è¢«è¯¯å–æ¶ˆï¼‰</span>
        <span class="hljs-keyword">if</span> (attempt &gt; <span class="hljs-number">0</span> &amp;&amp; key) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">delete</span>(key);
        }

        <span class="hljs-keyword">const</span> requestConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupCancelController</span>({ ...restConfig, method, url }, requestKey);

        <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™é€šç”¨è¯·æ±‚å‰çš„ä¸šåŠ¡é€»è¾‘ */</span>
        <span class="hljs-comment">// ç¤ºä¾‹: è®°å½•è¯·æ±‚æ—¥å¿—</span>
        <span class="hljs-comment">// console.log(`[${method.toUpperCase()}] ${url}:`, restConfig);</span>

        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">request</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt;(requestConfig);

        <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™é€šç”¨è¯·æ±‚åçš„ä¸šåŠ¡é€»è¾‘ */</span>
        <span class="hljs-comment">// ç¤ºä¾‹: è®°å½•å“åº”æ—¥å¿—</span>
        <span class="hljs-comment">// console.log(`[${method.toUpperCase()}] ${url} å“åº”:`, response.data);</span>

        <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
      } <span class="hljs-keyword">catch</span> (error) {
        lastError = error;

        <span class="hljs-comment">// å¦‚æœæ˜¯æœ€åä¸€æ¬¡å°è¯•æˆ–ä¸æ»¡è¶³é‡è¯•æ¡ä»¶æˆ–è¯·æ±‚è¢«å–æ¶ˆï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯</span>
        <span class="hljs-keyword">if</span> (attempt === retryConfig.<span class="hljs-property">retries</span> || !retryConfig.<span class="hljs-title function_">retryCondition</span>(error <span class="hljs-keyword">as</span> <span class="hljs-title class_">AxiosError</span>) || <span class="hljs-title class_">HttpClient</span>.<span class="hljs-title function_">isCancel</span>(error)) {
          <span class="hljs-keyword">break</span>;
        }

        <span class="hljs-comment">// å»¶è¿Ÿåé‡è¯•</span>
        <span class="hljs-keyword">if</span> (retryConfig.<span class="hljs-property">retryDelay</span> &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sleep</span>(retryConfig.<span class="hljs-property">retryDelay</span>);
        }
      }
    }

    <span class="hljs-comment">/* åœ¨è¿™é‡Œå†™è¯·æ±‚å¼‚å¸¸çš„é€šç”¨å¤„ç†é€»è¾‘ */</span>
    <span class="hljs-comment">// ç¤ºä¾‹: ç»Ÿä¸€é”™è¯¯æç¤º</span>
    <span class="hljs-comment">// if (lastError instanceof Error) {</span>
    <span class="hljs-comment">//   console.error('è¯·æ±‚å¤±è´¥:', lastError.message);</span>
    <span class="hljs-comment">// }</span>

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(lastError);
  }

  <span class="hljs-comment">/**
   * GET è¯·æ±‚
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> get&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>&lt;T&gt;(<span class="hljs-string">"get"</span>, url, config);
  }

  <span class="hljs-comment">/**
   * POST è¯·æ±‚
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> data è¯·æ±‚æ•°æ®
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> post&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>&lt;T&gt;(<span class="hljs-string">"post"</span>, url, { ...config, data });
  }

  <span class="hljs-comment">/**
   * PUT è¯·æ±‚
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> data è¯·æ±‚æ•°æ®
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> put&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>&lt;T&gt;(<span class="hljs-string">"put"</span>, url, { ...config, data });
  }

  <span class="hljs-comment">/**
   * DELETE è¯·æ±‚
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>&lt;T&gt;(<span class="hljs-string">"delete"</span>, url, config);
  }

  <span class="hljs-comment">/**
   * PATCH è¯·æ±‚
   * <span class="hljs-doctag">@param</span> url è¯·æ±‚åœ°å€
   * <span class="hljs-doctag">@param</span> data è¯·æ±‚æ•°æ®
   * <span class="hljs-doctag">@param</span> config è¯·æ±‚é…ç½®
   * <span class="hljs-doctag">@returns</span> å“åº”æ•°æ®
   */</span>
  <span class="hljs-keyword">public</span> patch&lt;T = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>, config?: <span class="hljs-title class_">AxiosRequestConfig</span> &amp; { requestKey?: <span class="hljs-title class_">RequestKey</span>; retry?: <span class="hljs-title class_">RetryConfig</span> }): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ResponseData</span>&lt;T&gt;&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">request</span>&lt;T&gt;(<span class="hljs-string">"patch"</span>, url, { ...config, data });
  }
}

<span class="hljs-comment">// é»˜è®¤å¯¼å‡ºå®ä¾‹ - å¯ç›´æ¥ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HttpClient</span>;
</code></pre>
<h2 data-id="heading-3">ğŸ› ï¸ ä½¿ç”¨æŒ‡å—</h2>
<h3 data-id="heading-4">1. åŸºç¡€è¯·æ±‚æ“ä½œï¼šGET/POST ç­‰å¸¸ç”¨æ–¹æ³•</h3>
<p>ä»»ä½• HTTP å®¢æˆ·ç«¯æœ€æ ¸å¿ƒçš„åŠŸèƒ½éƒ½æ˜¯å¤„ç†åŸºç¡€è¯·æ±‚ï¼ŒHttpClient å¯¹å¸¸ç”¨çš„ HTTP æ–¹æ³•è¿›è¡Œäº†å‹å¥½å°è£…ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒã€‚</p>
<p>é¦–å…ˆå®šä¹‰æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ•°æ®ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-comment">// åˆ†é¡µå“åº”é€šç”¨æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageResponse</span>&lt;T&gt; {
  <span class="hljs-attr">list</span>: T[];       <span class="hljs-comment">// æ•°æ®åˆ—è¡¨</span>
  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;   <span class="hljs-comment">// æ€»æ¡æ•°</span>
  <span class="hljs-attr">page</span>: <span class="hljs-built_in">number</span>;    <span class="hljs-comment">// å½“å‰é¡µç </span>
  <span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>;    <span class="hljs-comment">// æ¯é¡µæ¡æ•°</span>
}
</code></pre>
<p>åŸºç¡€è¯·æ±‚æ“ä½œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">basicRequests</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. GET è¯·æ±‚ï¼ˆå¸¦æŸ¥è¯¢å‚æ•°ï¼‰</span>
    <span class="hljs-keyword">const</span> userPage = <span class="hljs-keyword">await</span> http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/api/users'</span>, {
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> }
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬<span class="hljs-subst">${userPage.page}</span>é¡µï¼Œå…±<span class="hljs-subst">${userPage.total}</span>ä¸ªç”¨æˆ·:`</span>, userPage.<span class="hljs-property">list</span>);

    <span class="hljs-comment">// 2. POST è¯·æ±‚ï¼ˆæäº¤æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">const</span> newUser = <span class="hljs-keyword">await</span> http.<span class="hljs-property">post</span>&lt;{ <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> }&gt;(<span class="hljs-string">'/api/users'</span>, {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
      <span class="hljs-attr">email</span>: <span class="hljs-string">'zhangsan@example.com'</span>
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°å¢ç”¨æˆ·ID:'</span>, newUser.<span class="hljs-property">id</span>);

    <span class="hljs-comment">// 3. PUT è¯·æ±‚ï¼ˆæ›´æ–°æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">const</span> updatedUser = <span class="hljs-keyword">await</span> http.<span class="hljs-property">put</span>&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users/1'</span>, {
      <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰ä¸‰'</span>,
      <span class="hljs-attr">email</span>: <span class="hljs-string">'zhangsansan@example.com'</span>
    });

    <span class="hljs-comment">// 4. DELETE è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> deleteRes = <span class="hljs-keyword">await</span> http.<span class="hljs-property">delete</span>&lt;{ <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span>; message?: <span class="hljs-built_in">string</span> }&gt;(<span class="hljs-string">'/api/users/1'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ é™¤ç»“æœ:'</span>, deleteRes.<span class="hljs-property">success</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ç»Ÿä¸€é”™è¯¯å¤„ç†</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? error.<span class="hljs-property">message</span> : error);
  }
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>æ³›å‹å‚æ•°ç›´æ¥æŒ‡å®šå“åº”æ•°æ®ç±»å‹ï¼Œè·å¾—å®Œæ•´çš„ç±»å‹æç¤º</li>
<li>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ— éœ€åœ¨æ¯ä¸ªè¯·æ±‚ä¸­é‡å¤ç¼–å†™ try-catch</li>
<li>è‡ªåŠ¨å¤„ç†è¯·æ±‚å‚æ•°åºåˆ—åŒ–å’Œå“åº”æ•°æ®è§£æ</li>
</ul>
<h3 data-id="heading-5">2. å¤šå®ä¾‹ç®¡ç†ï¼šä¸ºä¸åŒ API æœåŠ¡åˆ›å»ºä¸“å±å®¢æˆ·ç«¯</h3>
<p>åœ¨å¤æ‚é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦ä¸å¤šä¸ª API æœåŠ¡äº¤äº’ï¼Œæ¯ä¸ªæœåŠ¡å¯èƒ½æœ‰ä¸åŒçš„åŸºç¡€è·¯å¾„ã€è¶…æ—¶è®¾ç½®æˆ–è®¤è¯æ–¹å¼ã€‚HttpClient æ”¯æŒåˆ›å»ºå¤šä¸ªç‹¬ç«‹å®ä¾‹ï¼Œå®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰å•†å“æ•°æ®æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">stock</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">// 1. åˆ›å»ºç”¨æˆ·æœåŠ¡ä¸“ç”¨å®ä¾‹</span>
<span class="hljs-keyword">const</span> userApi = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.example.com/user'</span>,  <span class="hljs-comment">// ç”¨æˆ·æœåŠ¡åŸºç¡€è·¯å¾„</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>                           <span class="hljs-comment">// è¶…æ—¶è®¾ç½®ä¸º10ç§’</span>
});

<span class="hljs-comment">// 2. åˆ›å»ºå•†å“æœåŠ¡ä¸“ç”¨å®ä¾‹ï¼ˆå¸¦ç‰¹æ®Šè¯·æ±‚å¤´ï¼‰</span>
<span class="hljs-keyword">const</span> productApi = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.example.com/product'</span>,  <span class="hljs-comment">// å•†å“æœåŠ¡åŸºç¡€è·¯å¾„</span>
  <span class="hljs-attr">headers</span>: { <span class="hljs-string">'X-Product-Token'</span>: <span class="hljs-string">'special-token'</span> }  <span class="hljs-comment">// å•†å“æœåŠ¡éœ€è¦çš„ç‰¹æ®Šå¤´éƒ¨</span>
});

<span class="hljs-comment">// ä½¿ç”¨å¤šå®ä¾‹å¤„ç†ä¸åŒæœåŠ¡çš„è¯·æ±‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMultiInstances</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// è°ƒç”¨ç”¨æˆ·æœåŠ¡API</span>
  <span class="hljs-keyword">const</span> userPage = <span class="hljs-keyword">await</span> userApi.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/list'</span>);
  
  <span class="hljs-comment">// è°ƒç”¨å•†å“æœåŠ¡API</span>
  <span class="hljs-keyword">const</span> productPage = <span class="hljs-keyword">await</span> productApi.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">Product</span>&gt;&gt;(<span class="hljs-string">'/list'</span>);
  
  <span class="hljs-comment">// ä¸¤ä¸ªå®ä¾‹çš„é…ç½®å®Œå…¨éš”ç¦»ï¼Œä¸ä¼šç›¸äº’å½±å“</span>
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­å¯¹æ¥å¤šä¸ªå¾®æœåŠ¡</li>
<li>åŒæ—¶éœ€è¦è®¿é—®å†…éƒ¨APIå’Œç¬¬ä¸‰æ–¹API</li>
<li>ä¸åŒæ¥å£æœ‰ä¸åŒçš„è¶…æ—¶éœ€æ±‚ï¼ˆå¦‚æ™®é€šæ¥å£5ç§’ï¼Œæ–‡ä»¶ä¸Šä¼ 60ç§’ï¼‰</li>
</ul>
<h3 data-id="heading-6">3. è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼šä¸šåŠ¡é€»è¾‘ä¸è¯·æ±‚å¤„ç†çš„è§£è€¦</h3>
<p>æ‹¦æˆªå™¨æ˜¯å¤„ç†è¯·æ±‚/å“åº”å…¬å…±é€»è¾‘çš„æœ€ä½³æ–¹å¼ï¼ŒHttpClient å…è®¸åœ¨åˆå§‹åŒ–æ—¶é…ç½®è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œå°†è®¤è¯ã€æ—¥å¿—ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚</p>
<p>æœ€å¸¸è§çš„åœºæ™¯æ˜¯å¤„ç†è®¤è¯é€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»ºå¸¦æƒé™éªŒè¯çš„HTTPå®¢æˆ·ç«¯å®ä¾‹</span>
<span class="hljs-keyword">const</span> authHttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>(
  { <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.example.com/auth'</span> },  <span class="hljs-comment">// åŸºç¡€é…ç½®</span>
  {
    <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ è®¤è¯Token</span>
    <span class="hljs-attr">requestInterceptor</span>: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
      <span class="hljs-keyword">if</span> (token) {
        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      }
      <span class="hljs-keyword">return</span> config;
    },
    
    <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç†è®¤è¯å¤±è´¥</span>
    <span class="hljs-attr">responseInterceptor</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
      <span class="hljs-comment">// æœªæˆæƒï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ</span>
      <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">401</span>) {
        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>);
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
      }
      <span class="hljs-keyword">return</span> response;
    }
  }
);
</code></pre>
<p><strong>æ‹¦æˆªå™¨çš„å…¸å‹ç”¨é€”</strong>ï¼š</p>
<ul>
<li>æ·»åŠ å…¨å±€è®¤è¯ä¿¡æ¯ï¼ˆTokenã€API Keyç­‰ï¼‰</li>
<li>ç»Ÿä¸€å¤„ç†é”™è¯¯ç ï¼ˆå¦‚401æœªæˆæƒã€403æƒé™ä¸è¶³ï¼‰</li>
<li>å®ç°è¯·æ±‚/å“åº”æ—¥å¿—è®°å½•</li>
<li>æ·»åŠ è¯·æ±‚æ—¶é—´æˆ³é˜²æ­¢ç¼“å­˜</li>
</ul>
<h3 data-id="heading-7">4. åŠ¨æ€ä¿®æ”¹æ‹¦æˆªå™¨ï¼šè¿è¡Œæ—¶çµæ´»è°ƒæ•´è¯·æ±‚è¡Œä¸º</h3>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶æ ¹æ®ä¸šåŠ¡åœºæ™¯åŠ¨æ€æ”¹å˜è¯·æ±‚/å“åº”å¤„ç†é€»è¾‘ï¼ŒHttpClient æä¾›äº†åŠ¨æ€ä¿®æ”¹æ‹¦æˆªå™¨çš„èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ—¥å¿—æ•°æ®æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LogData</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dynamicInterceptors</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// åœºæ™¯1ï¼šä¸´æ—¶æ·»åŠ æ—¥å¿—æ‹¦æˆªå™¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logInterceptor</span> = (<span class="hljs-params">response: AxiosResponse&lt;ResponseData&lt;PageResponse&lt;LogData&gt;&gt;&gt;</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯·æ±‚[<span class="hljs-subst">${response.config.url}</span>]è¿”å›<span class="hljs-subst">${response.data.total}</span>æ¡æ—¥å¿—`</span>);
    <span class="hljs-keyword">return</span> response;
  };

  <span class="hljs-comment">// è®¾ç½®æ–°çš„å“åº”æ‹¦æˆªå™¨</span>
  http.<span class="hljs-title function_">setResponseInterceptor</span>(logInterceptor);
  
  <span class="hljs-comment">// å‘é€è¯·æ±‚æ—¶ä¼šæ‰§è¡Œæ–°çš„æ‹¦æˆªå™¨</span>
  <span class="hljs-keyword">await</span> http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">LogData</span>&gt;&gt;(<span class="hljs-string">'/api/logs'</span>);

  <span class="hljs-comment">// åœºæ™¯2ï¼šå®Œæˆæ—¥å¿—æ”¶é›†åï¼Œæ¢å¤é»˜è®¤æ‹¦æˆªå™¨</span>
  http.<span class="hljs-title function_">setResponseInterceptor</span>();

  <span class="hljs-comment">// åœºæ™¯3ï¼šåŠ¨æ€æ›´æ–°è®¤è¯ä¿¡æ¯ï¼ˆå¦‚Tokenåˆ·æ–°åï¼‰</span>
  <span class="hljs-keyword">const</span> newToken = <span class="hljs-string">'new-auth-token'</span>;
  http.<span class="hljs-title function_">setRequestInterceptor</span>(<span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${newToken}</span>`</span>;
    <span class="hljs-keyword">return</span> config;
  });
}
</code></pre>
<p><strong>å®ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä¸´æ—¶å¼€å¯è°ƒè¯•æ—¥å¿—</li>
<li>Tokenè¿‡æœŸååŠ¨æ€æ›´æ–°è®¤è¯ä¿¡æ¯</li>
<li>ç‰¹å®šé¡µé¢éœ€è¦ç‰¹æ®Šçš„è¯·æ±‚å¤´</li>
<li>A/Bæµ‹è¯•æ—¶åˆ‡æ¢ä¸åŒçš„APIå¤„ç†é€»è¾‘</li>
</ul>
<h3 data-id="heading-8">5. è¯·æ±‚å–æ¶ˆï¼šä¼˜åŒ–ç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€å·§</h3>
<p>åœ¨ç”¨æˆ·å¿«é€Ÿæ“ä½œæˆ–é¡µé¢åˆ‡æ¢æ—¶ï¼Œå–æ¶ˆæ— ç”¨çš„è¯·æ±‚å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚HttpClient æä¾›äº†å¤šç§çµæ´»çš„è¯·æ±‚å–æ¶ˆæ–¹å¼ã€‚</p>
<h4 data-id="heading-9">5.1 ä¸»åŠ¨å–æ¶ˆå•ä¸ªè¯·æ±‚</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancelSingleRequest</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> requestKey = <span class="hljs-string">'user-list'</span>;  <span class="hljs-comment">// å®šä¹‰å”¯ä¸€æ ‡è¯†</span>

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å‘èµ·è¯·æ±‚æ—¶æŒ‡å®šrequestKey</span>
    <span class="hljs-keyword">const</span> promise = http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/api/users'</span>, { requestKey });

    <span class="hljs-comment">// æ¨¡æ‹Ÿï¼š200msåå–æ¶ˆè¯·æ±‚ï¼ˆä¾‹å¦‚ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢äº†é¡µé¢ï¼‰</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      http.<span class="hljs-title function_">cancelRequest</span>(requestKey, <span class="hljs-string">'æ•°æ®å·²è¿‡æ—¶'</span>);
    }, <span class="hljs-number">200</span>);

    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> promise;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå–æ¶ˆé”™è¯¯</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">HttpClient</span>.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>);
    }
  }
}
</code></pre>
<h4 data-id="heading-10">5.2 è‡ªåŠ¨å–æ¶ˆé‡å¤è¯·æ±‚</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cancelDuplicate</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// è¿ç»­å‘èµ·ç›¸åŒå‚æ•°çš„è¯·æ±‚</span>
  http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/api/users'</span>, { <span class="hljs-attr">params</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// è¢«å–æ¶ˆ</span>
  http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/api/users'</span>, { <span class="hljs-attr">params</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// è¢«å–æ¶ˆ</span>
  <span class="hljs-keyword">const</span> latestData = <span class="hljs-keyword">await</span> http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">User</span>&gt;&gt;(<span class="hljs-string">'/api/users'</span>, { <span class="hljs-attr">params</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// æœ€ç»ˆç”Ÿæ•ˆ</span>
}
</code></pre>
<h4 data-id="heading-11">5.3 é¡µé¢å¸è½½æ—¶å–æ¶ˆæ‰€æœ‰è¯·æ±‚</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨React/Vueç­‰æ¡†æ¶çš„ç»„ä»¶å¸è½½é’©å­ä¸­è°ƒç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onPageUnmount</span>(<span class="hljs-params"></span>) {
  http.<span class="hljs-title function_">cancelAllRequests</span>(<span class="hljs-string">'é¡µé¢å·²å…³é—­'</span>);
}

<span class="hljs-comment">// æˆ–è€…ç›‘å¬é¡µé¢å…³é—­äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
  http.<span class="hljs-title function_">cancelAllRequests</span>(<span class="hljs-string">'ç”¨æˆ·ç¦»å¼€é¡µé¢'</span>);
});
</code></pre>
<p><strong>å¸¦æ¥çš„å¥½å¤„</strong>ï¼š</p>
<ul>
<li>å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚å’ŒæœåŠ¡å™¨è´Ÿè½½</li>
<li>é¿å…è¿‡æ—¶æ•°æ®è¦†ç›–æœ€æ–°æ•°æ®</li>
<li>é˜²æ­¢é¡µé¢è·³è½¬åä»å¼¹å‡ºé”™è¯¯æç¤º</li>
<li>å‡å°‘å†…å­˜å ç”¨å’Œæ½œåœ¨çš„å†…å­˜æ³„æ¼</li>
</ul>
<h3 data-id="heading-12">6. æ–‡ä»¶ä¸Šä¼ ï¼šå¤§æ–‡ä»¶å¤„ç†çš„æœ€ä½³å®è·µ</h3>
<p>æ–‡ä»¶ä¸Šä¼ æ˜¯å‰ç«¯å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œå°¤å…¶éœ€è¦æ³¨æ„è¶…æ—¶è®¾ç½®å’Œæ•°æ®æ ¼å¼ã€‚HttpClient å¯ä»¥è½»æ¾é…ç½®é€‚åˆæ–‡ä»¶ä¸Šä¼ çš„å‚æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰ä¸Šä¼ ç»“æœæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UploadResult</span> {
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;      <span class="hljs-comment">// ä¸Šä¼ åçš„æ–‡ä»¶URL</span>
  <span class="hljs-attr">filename</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ–‡ä»¶å</span>
  <span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>;     <span class="hljs-comment">// æ–‡ä»¶å¤§å°</span>
}

<span class="hljs-comment">// å¤„ç†æ–‡ä»¶ä¸Šä¼ </span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">uploadFile</span>(<span class="hljs-params">file: File</span>) {
  <span class="hljs-comment">// åˆ›å»ºFormDataå¯¹è±¡</span>
  <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'file'</span>, file);
  
  <span class="hljs-comment">// å¯é€‰ï¼šæ·»åŠ å…¶ä»–è¡¨å•å­—æ®µ</span>
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'category'</span>, <span class="hljs-string">'document'</span>);
  formData.<span class="hljs-title function_">append</span>(<span class="hljs-string">'description'</span>, <span class="hljs-string">'ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£'</span>);

  <span class="hljs-comment">// åˆ›å»ºä¸Šä¼ ä¸“ç”¨å®ä¾‹ï¼ˆé…ç½®æ›´é•¿çš„è¶…æ—¶ï¼‰</span>
  <span class="hljs-keyword">const</span> uploadHttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>({
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">60000</span>,  <span class="hljs-comment">// ä¸Šä¼ è¶…æ—¶è®¾ä¸º60ç§’</span>
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'multipart/form-data'</span> }
  });

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> uploadHttp.<span class="hljs-property">post</span>&lt;<span class="hljs-title class_">UploadResult</span>&gt;(<span class="hljs-string">'/api/upload'</span>, formData);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œè®¿é—®åœ°å€:'</span>, result.<span class="hljs-property">url</span>);
    <span class="hljs-keyword">return</span> result.<span class="hljs-property">url</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶ä¸Šä¼ å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<p><strong>ä¸Šä¼ ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¤§æ–‡ä»¶ä¸Šä¼ ä½¿ç”¨ä¸“é—¨çš„å®ä¾‹ï¼Œè®¾ç½®è¾ƒé•¿è¶…æ—¶</li>
<li>é…åˆè¿›åº¦æ¡å±•ç¤ºä¸Šä¼ è¿›åº¦ï¼ˆå¯é€šè¿‡ Axios çš„ onUploadProgress å®ç°ï¼‰</li>
<li>è€ƒè™‘åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶ï¼ˆè¶…è¿‡100MBçš„æ–‡ä»¶ï¼‰</li>
<li>é‡è¦æ–‡ä»¶ä¸Šä¼ å¯é…ç½®é‡è¯•æœºåˆ¶</li>
</ul>
<h3 data-id="heading-13">7. å¹¶å‘è¯·æ±‚å¤„ç†ï¼šé«˜æ•ˆè·å–å¤šæºæ•°æ®</h3>
<p>å®é™…å¼€å‘ä¸­ç»å¸¸éœ€è¦åŒæ—¶è¯·æ±‚å¤šä¸ªæ¥å£ï¼Œç„¶åæ±‡æ€»å¤„ç†æ•°æ®ã€‚HttpClient ç»“åˆ Promise API å¯ä»¥ä¼˜é›…åœ°å¤„ç†å¹¶å‘è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨Promise.allå¤„ç†å¹¶å‘è¯·æ±‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleConcurrentRequests</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> [userRes, productRes] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
      http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users/1'</span>),                <span class="hljs-comment">// è·å–ç”¨æˆ·è¯¦æƒ…</span>
      http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">PageResponse</span>&lt;<span class="hljs-title class_">Product</span>&gt;&gt;(<span class="hljs-string">'/api/products'</span>) <span class="hljs-comment">// è·å–å•†å“åˆ—è¡¨</span>
    ]);

    <span class="hljs-comment">// æ‰€æœ‰è¯·æ±‚æˆåŠŸåå¤„ç†æ•°æ®</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·è¯¦æƒ…:'</span>, userRes);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å•†å“åˆ—è¡¨:'</span>, productRes.<span class="hljs-property">list</span>);
    
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ•°æ®æ•´åˆ</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">user</span>: userRes,
      <span class="hljs-attr">products</span>: productRes.<span class="hljs-property">list</span>
    };
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªè¯·æ±‚å¤±è´¥éƒ½ä¼šè¿›å…¥è¿™é‡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¹¶å‘è¯·æ±‚å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<p><strong>å¹¶å‘å¤„ç†æŠ€å·§</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>Promise.all</code> å¤„ç†ç›¸äº’ä¾èµ–çš„å¹¶å‘è¯·æ±‚ï¼ˆä¸€å¤±è´¥å…¨å¤±è´¥ï¼‰</li>
<li>ä½¿ç”¨ <code>Promise.allSettled</code> å¤„ç†å¯ä»¥ç‹¬ç«‹å¤±è´¥çš„è¯·æ±‚</li>
<li>å¯¹å¤§é‡å¹¶å‘è¯·æ±‚è¿›è¡Œåˆ†æ‰¹å¤„ç†ï¼Œé¿å…æµè§ˆå™¨é™åˆ¶</li>
<li>ç»“åˆè¯·æ±‚å–æ¶ˆæœºåˆ¶ï¼Œåœ¨æŸä¸ªå…³é”®è¯·æ±‚å¤±è´¥æ—¶å–æ¶ˆå…¶ä»–è¯·æ±‚</li>
</ul>
<h3 data-id="heading-14">8. è¯·æ±‚é‡è¯•ï¼šæå‡ç½‘ç»œä¸ç¨³å®šåœºæ™¯çš„å¯é æ€§</h3>
<p>ç½‘ç»œæ³¢åŠ¨æ˜¯å‰ç«¯è¯·æ±‚å¤±è´¥çš„å¸¸è§åŸå› ï¼ŒHttpClient å†…ç½®çš„é‡è¯•æœºåˆ¶å¯ä»¥è‡ªåŠ¨å¤„ç†è¿™ç±»é—®é¢˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h4 data-id="heading-15">8.1 åŸºç¡€é‡è¯•é…ç½®ï¼ˆä½¿ç”¨é»˜è®¤ç­–ç•¥ï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨é»˜è®¤é‡è¯•æ¡ä»¶</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">basicRetryWithDefaults</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> http.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users/1'</span>, {
      <span class="hljs-attr">retry</span>: {
        <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span>,       <span class="hljs-comment">// æœ€å¤šé‡è¯•3æ¬¡</span>
        <span class="hljs-attr">retryDelay</span>: <span class="hljs-number">1000</span>  <span class="hljs-comment">// æ¯æ¬¡é‡è¯•é—´éš”1ç§’</span>
        <span class="hljs-comment">// é»˜è®¤ç­–ç•¥ï¼šåªé‡è¯•ç½‘ç»œé”™è¯¯æˆ–5xxæœåŠ¡å™¨é”™è¯¯</span>
      }
    });
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ‰€æœ‰é‡è¯•éƒ½å¤±è´¥äº†:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<h4 data-id="heading-16">8.2 è‡ªå®šä¹‰é‡è¯•æ¡ä»¶</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªå®šä¹‰é‡è¯•é€»è¾‘</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customRetryCondition</span>(<span class="hljs-params">userData: User</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> http.<span class="hljs-property">post</span>&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">'/api/users'</span>, userData, {
      <span class="hljs-attr">retry</span>: {
        <span class="hljs-attr">retries</span>: <span class="hljs-number">2</span>,       <span class="hljs-comment">// é‡è¯•2æ¬¡</span>
        <span class="hljs-attr">retryDelay</span>: <span class="hljs-number">500</span>,  <span class="hljs-comment">// é‡è¯•é—´éš”500ms</span>
        <span class="hljs-attr">retryCondition</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
          <span class="hljs-comment">// è‡ªå®šä¹‰æ¡ä»¶ï¼šç½‘ç»œé”™è¯¯ã€è¶…æ—¶æˆ–5xxé”™è¯¯æ‰é‡è¯•</span>
          <span class="hljs-keyword">return</span> !error.<span class="hljs-property">response</span> || 
                 error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> === <span class="hljs-number">408</span> || 
                 (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &lt; <span class="hljs-number">600</span>);
        }
      }
    });
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é‡è¯•å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
}
</code></pre>
<p><strong>é‡è¯•ç­–ç•¥å»ºè®®</strong>ï¼š</p>
<ul>
<li>è¯»æ“ä½œï¼ˆGETï¼‰é€‚åˆé‡è¯•ï¼Œå†™æ“ä½œï¼ˆPOST/PUTï¼‰éœ€è°¨æ…</li>
<li>é‡è¯•æ¬¡æ•°ä¸å®œè¿‡å¤šï¼ˆé€šå¸¸2-3æ¬¡ï¼‰ï¼Œé¿å…åŠ é‡æœåŠ¡å™¨è´Ÿæ‹…</li>
<li>ä½¿ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼ˆretryDelay é€æ¸å¢åŠ ï¼‰</li>
<li>å¯¹æ˜ç¡®çš„å®¢æˆ·ç«¯é”™è¯¯ï¼ˆå¦‚400ã€401ã€403ï¼‰ä¸é‡è¯•</li>
</ul>
<h3 data-id="heading-17">9. è®¿é—®åŸå§‹ Axios å®ä¾‹ï¼šå…¼å®¹ç‰¹æ®Šéœ€æ±‚</h3>
<p>è™½ç„¶ HttpClient å°è£…äº†å¸¸ç”¨åŠŸèƒ½ï¼Œä½†æŸäº›ç‰¹æ®Šåœºæ™¯å¯èƒ½éœ€è¦ç›´æ¥ä½¿ç”¨ Axios åŸç”Ÿ APIã€‚HttpClient æä¾›äº†è·å–åŸå§‹å®ä¾‹çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è·å–åŸå§‹Axioså®ä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOriginalAxiosInstance</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> axiosInstance = http.<span class="hljs-title function_">getInstance</span>();
  
  <span class="hljs-comment">// ç¤ºä¾‹1ï¼šä½¿ç”¨Axiosçš„cancelTokenï¼ˆæ—§ç‰ˆå–æ¶ˆæ–¹å¼ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">CancelToken</span> = <span class="hljs-title class_">Axios</span>.<span class="hljs-property">CancelToken</span>;
  <span class="hljs-keyword">const</span> source = <span class="hljs-title class_">CancelToken</span>.<span class="hljs-title function_">source</span>();
  
  axiosInstance.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/special'</span>, {
    <span class="hljs-attr">cancelToken</span>: source.<span class="hljs-property">token</span>
  });
  
  <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚</span>
  source.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'Operation canceled by the user.'</span>);
  
  <span class="hljs-comment">// ç¤ºä¾‹2ï¼šä½¿ç”¨Axiosçš„æ‹¦æˆªå™¨API</span>
  <span class="hljs-keyword">const</span> myInterceptor = axiosInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
    <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response,
    <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  );
  
  <span class="hljs-comment">// ç§»é™¤æ‹¦æˆªå™¨</span>
  axiosInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">eject</span>(myInterceptor);
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸€äº› HttpClient æœªå°è£…çš„ Axios ç‰¹æ€§</li>
<li>é›†æˆä¾èµ–åŸå§‹ Axios å®ä¾‹çš„ç¬¬ä¸‰æ–¹åº“</li>
<li>å¤„ç†æç‰¹æ®Šçš„è¯·æ±‚åœºæ™¯</li>
<li>å¹³æ»‘è¿ç§»ç°æœ‰åŸºäº Axios çš„ä»£ç </li>
</ul>
<h2 data-id="heading-18">ğŸ¤” æ’æ›²ï¼šæœ‹å‹çš„æ— æƒ…å˜²ç¬‘</h2>
<p>åœ¨æˆ‘ä»¬å®Œæˆæœ¬æ¬¡å°è£…å‰ï¼Œè¿˜æœ‰ä¸€ä¸ªå°æ’æ›²ï¼šæˆ‘å¾—æ„æ´‹æ´‹åœ°æŠŠè¿™ä¸ª"å²ä¸Šæœ€ä¼˜é›…"çš„å°è£…å‘ç»™æœ‹å‹ç‚«è€€ï¼Œå¿ƒæƒ³ç€ä»–è‚¯å®šä¼šå¤¸æˆ‘ä¸¤å¥ã€‚ç»“æœä»–å‘æ¥äº†ä¸€å¤§æ®µæ–‡å­—...</p>
<h3 data-id="heading-19">ç¬¬ä¸€è½®æ”»å‡»ï¼šç±»å‹å®šä¹‰é—®é¢˜</h3>
<p><strong>æœ‹å‹</strong>: "ä½ è¿™ä»£ç æœ‰ç‚¹é—®é¢˜å•Š ğŸ˜ ä½ è¿™ä¸ª <code>ResponseData</code> ç±»å‹æ‰©å±•æ€§ä¸è¶³ï¼š"</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ çš„é—®é¢˜ä»£ç </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseData</span>&lt;T = <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">BaseResponse</span> &amp; T;

<span class="hljs-comment">// å½“ T ä¸­åŒ…å« code æˆ– message å­—æ®µæ—¶ä¼šå†²çª</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserWithCode</span> {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ä¸BaseResponseå†²çª</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">type</span> <span class="hljs-title class_">TestType</span> = <span class="hljs-title class_">ResponseData</span>&lt;<span class="hljs-title class_">UserWithCode</span>&gt;; <span class="hljs-comment">// codeå­—æ®µå˜æˆneverç±»å‹ï¼</span>
</code></pre>
<p><strong>æˆ‘</strong>: "ä¸å¯èƒ½ï¼ç»å¯¹ä¸å¯èƒ½ï¼ï¼ˆæ›¹æ“.gifï¼‰"</p>
<p>ç„¶åæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæœç„¶æŠ¥é”™äº†... ğŸ˜…</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿®å¤åçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">OmitBaseResponse</span>&lt;T&gt; = <span class="hljs-title class_">Omit</span>&lt;T, keyof <span class="hljs-title class_">BaseResponse</span>&gt;;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseData</span>&lt;T = <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">BaseResponse</span> &amp; <span class="hljs-title class_">OmitBaseResponse</span>&lt;T&gt;;
</code></pre>
<h3 data-id="heading-20">ç¬¬äºŒè½®æ”»å‡»ï¼šè¯·æ±‚å–æ¶ˆé€»è¾‘ç¼ºé™·</h3>
<p><strong>æœ‹å‹</strong>: "è¿˜æœ‰ä½ è¿™ä¸ª <code>setupCancelController</code> æœªå¤„ç†è‡ªå®šä¹‰ <code>requestKey</code> å†²çªï¼Œå½“ç”¨æˆ·ä¼ å…¥è‡ªå®šä¹‰ <code>requestKey</code> æ—¶ï¼Œè‹¥ä¸å†…éƒ¨ç”Ÿæˆçš„é”®é‡å¤ï¼Œä¼šå¯¼è‡´å–æ¶ˆé€»è¾‘æ··ä¹±ã€‚"</p>
<p><strong>æˆ‘</strong>: "è¿™... è¿™åº”è¯¥ä¸ä¼šå§ï¼Ÿ"</p>
<p><strong>æœ‹å‹</strong>: "ä½ çœ‹ï¼Œä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">setupCancelController</span>(<span class="hljs-params">config: AxiosRequestConfig, requestKey?: RequestKey</span>) {
  <span class="hljs-keyword">const</span> key = requestKey || <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRequestKey</span>(config);
  <span class="hljs-comment">// ç›´æ¥å–æ¶ˆï¼Œä½†æ²¡æœ‰å†²çªè­¦å‘Š</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancelRequest</span>(key);
}
</code></pre>
<p>å¦‚æœæœ‰é‡å¤keyæ€ä¹ˆåŠï¼Ÿå»ºè®®åŠ ä¸ªè­¦å‘Šã€‚"</p>
<p><strong>æˆ‘</strong>: "ä½†æ˜¯æˆ‘è¿™é‡Œç›´æ¥å–æ¶ˆé‡å¤è¯·æ±‚ä¸æ˜¯æŒºå¥½çš„å—ï¼Ÿè¿™æ˜¯é˜²é‡å¤æœºåˆ¶å•Šï¼"</p>
<p><strong>æœ‹å‹</strong>: "å—¯...è¿™ä¸ªå€’æ˜¯æœ‰é“ç†ã€‚é‚£ç®—äº†ï¼Œè¿™ä¸ªé—®é¢˜ä¸å¤§ã€‚"</p>
<h3 data-id="heading-21">ç¬¬ä¸‰è½®æ”»å‡»ï¼šé‡è¯•æœºåˆ¶è¾¹ç•Œé—®é¢˜</h3>
<p><strong>æœ‹å‹</strong>: "ä½†æ˜¯ä½ è¿™ä¸ªé‡è¯•é€»è¾‘æœ‰é—®é¢˜ï¼é‡è¯•æ—¶æœªé‡ç½® <code>AbortController</code>ï¼š"</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ çš„é—®é¢˜ä»£ç </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt;= retryConfig.<span class="hljs-property">retries</span>; attempt++) {
  <span class="hljs-comment">// æ¯æ¬¡éƒ½ä¼šè°ƒç”¨setupCancelControllerï¼Œåˆ›å»ºæ–°çš„controller</span>
  <span class="hljs-comment">// ä½†æ—§çš„è¿˜åœ¨Mapä¸­ï¼Œå¯èƒ½å¯¼è‡´é‡è¯•è¯·æ±‚è¢«è¯¯å–æ¶ˆ</span>
  <span class="hljs-keyword">const</span> requestConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupCancelController</span>({...restConfig, method, url}, requestKey);
}
</code></pre>
<p><strong>æˆ‘</strong>: "è¿™... è¿™æ˜¯è¾¹ç¼˜æƒ…å†µï¼"</p>
<p><strong>æœ‹å‹</strong>: "è¾¹ç¼˜æƒ…å†µä¹Ÿæ˜¯æƒ…å†µå•Šï¼è¿˜æœ‰ä½ çš„ <code>retryCondition</code> é»˜è®¤å€¼ç¼ºå¤±ï¼Œå½“ç”¨æˆ·æœªé…ç½®æ—¶ï¼Œä¼šé»˜è®¤é‡è¯•æ‰€æœ‰é”™è¯¯ï¼ˆåŒ…æ‹¬400ç­‰å®¢æˆ·ç«¯é”™è¯¯ï¼‰ï¼Œä¸ç¬¦åˆé¢„æœŸã€‚"</p>
<p><strong>æˆ‘</strong>: "å¥½å§å¥½å§ï¼Œæˆ‘æ”¹è¿˜ä¸è¡Œå—... ğŸ˜¤"</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿®å¤åçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">defaultRetryCondition</span> = (<span class="hljs-params">error: AxiosError</span>) =&gt; {
  <span class="hljs-comment">// é»˜è®¤åªé‡è¯•ç½‘ç»œé”™è¯¯æˆ–5xxæœåŠ¡å™¨é”™è¯¯</span>
  <span class="hljs-keyword">return</span> !error.<span class="hljs-property">response</span> || (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">500</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> &lt; <span class="hljs-number">600</span>);
};

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt;= retryConfig.<span class="hljs-property">retries</span>; attempt++) {
  <span class="hljs-comment">// é‡è¯•å‰æ¸…é™¤æ—§æ§åˆ¶å™¨</span>
  <span class="hljs-keyword">if</span> (attempt &gt; <span class="hljs-number">0</span> &amp;&amp; key) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">abortControllers</span>.<span class="hljs-title function_">delete</span>(key);
  }
  <span class="hljs-keyword">const</span> requestConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupCancelController</span>({...restConfig, method, url}, requestKey);
}
</code></pre>
<h3 data-id="heading-22">ç¬¬å››è½®æ”»å‡»ï¼šæ‹¦æˆªå™¨ç®¡ç†é—®é¢˜</h3>
<p><strong>æœ‹å‹</strong>: "è¿˜æœ‰ä½ çš„æ‹¦æˆªå™¨ç§»é™¤é€»è¾‘ä¸ä¸¥è°¨ï¼Œåªé€šè¿‡ <code>interceptorId</code> ç§»é™¤ï¼Œä½†æœªé‡ç½® <code>interceptorId</code>ï¼Œå¯èƒ½å¯¼è‡´åç»­é‡å¤ç§»é™¤æ— æ•ˆï¼š"</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ çš„é—®é¢˜ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">removeRequestInterceptor</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">eject</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span>);
    <span class="hljs-comment">// æ²¡æœ‰é‡ç½®IDï¼</span>
  }
}
</code></pre>
<p><strong>æˆ‘</strong>: "è¿™... å¥½å§ï¼Œç¡®å®åº”è¯¥é‡ç½®ä¸€ä¸‹ã€‚"</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿®å¤åçš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">public</span> <span class="hljs-title function_">removeRequestInterceptor</span>(): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span> !== <span class="hljs-literal">undefined</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">eject</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestInterceptorId</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// é‡ç½®ID</span>
  }
}
</code></pre>
<h3 data-id="heading-23">ç¬¬äº”è½®æ”»å‡»ï¼šå…¶ä»–ç»†èŠ‚é—®é¢˜</h3>
<p><strong>æœ‹å‹</strong>: "å“ˆå“ˆï¼Œåˆ«æ€¥ã€‚ä¸è¿‡ä½ è¿˜æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong><code>Content-Type</code> ç¡¬ç¼–ç é—®é¢˜</strong> - é»˜è®¤å¼ºåˆ¶è®¾ç½®ä¸º <code>application/json</code>ï¼Œä½†ä¸Šä¼ æ–‡ä»¶æ—¶éœ€è¦ <code>multipart/form-data</code>ï¼Œéœ€æ‰‹åŠ¨è¦†ç›–ï¼Œä¸å¤Ÿçµæ´»ã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯ä¿¡æ¯å¤„ç†å†—ä½™</strong> - å“åº”é”™è¯¯æ‹¦æˆªå™¨ä¸­å¯¹é”™è¯¯ä¿¡æ¯çš„åŒ…è£…ä¼šä¸¢å¤±åŸå§‹é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¸åˆ©äºè°ƒè¯•ã€‚</p>
</li>
<li>
<p><strong><code>requestKey</code> ç±»å‹å£°æ˜ä¸æ˜ç¡®</strong> - å®šä¹‰ä¸º <code>string | symbol</code>ï¼Œä½†ç”¨æˆ·ä¼ å…¥ <code>symbol</code> æ—¶ï¼Œè°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºä¸å‹å¥½ã€‚"</p>
</li>
</ol>
<p><strong>æˆ‘</strong>: "åœåœåœï¼ä½ è¿™æ˜¯åœ¨ code review è¿˜æ˜¯åœ¨æ‰¾èŒ¬ï¼Ÿï¼"</p>
<p><strong>æœ‹å‹</strong>: "å½“ç„¶æ˜¯ code review å•¦ï¼Œä¸è¿‡åé¢è¿™å‡ ä¸ªç¡®å®æ¯”è¾ƒé¸¡è›‹é‡ŒæŒ‘éª¨å¤´ï¼Œå‰é¢å‡ ä¸ªç¡®å®éœ€è¦ä¿®å¤ã€‚"</p>
<h3 data-id="heading-24">æˆ‘çš„åå‡»ä¸åˆ†æ</h3>
<p>ç»è¿‡ä¸€ç•ª"å‹å¥½"çš„è®¨è®ºï¼ˆä¸»è¦æ˜¯æˆ‘è¢«æ•™è‚²ï¼‰ï¼Œæˆ‘å†·é™åˆ†æäº†ä¸€ä¸‹ï¼š</p>
<p><strong>ç¡®å®æœ‰ä»·å€¼çš„é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰ï¼š</strong></p>
<ul>
<li>âœ… <strong>ResponseData ç±»å‹å†²çª</strong> - å¾ˆé‡è¦ï¼ç¡®å®ä¼šå¯¼è‡´ <code>never</code> ç±»å‹é—®é¢˜</li>
<li>âœ… <strong>é‡è¯•æœºåˆ¶çš„é»˜è®¤æ¡ä»¶ç¼ºå¤±</strong> - é‡è¦ï¼åº”è¯¥æœ‰åˆç†çš„é»˜è®¤é‡è¯•æ¡ä»¶</li>
<li>âœ… <strong>æ‹¦æˆªå™¨IDé‡ç½®é—®é¢˜</strong> - ä¸­ç­‰é‡è¦ï¼Œç¡®å®åº”è¯¥é‡ç½®ID</li>
<li>âœ… <strong>é‡è¯•æ—¶AbortControlleré‡ç½®</strong> - ä¸­ç­‰é‡è¦ï¼Œç†è®ºä¸Šå­˜åœ¨é—®é¢˜</li>
</ul>
<p><strong>è¿‡äºè‹›åˆ»æˆ–è®¾è®¡é€‰æ‹©é—®é¢˜ï¼š</strong></p>
<ul>
<li>âŒ <strong>requestKeyå†²çªè­¦å‘Š</strong> - å½“å‰è®¾è®¡å·²ç»é€šè¿‡å–æ¶ˆæ—§è¯·æ±‚å¤„ç†äº†ï¼Œè­¦å‘Šæ˜¯å¤šä½™çš„</li>
<li>âŒ <strong>Content-Typeç¡¬ç¼–ç </strong> - è¿™æ˜¯å¸¸è§çš„é»˜è®¤è®¾ç½®ï¼ŒAxiosä¼šè‡ªåŠ¨è¦†ç›–FormData</li>
<li>âŒ <strong>é”™è¯¯ä¿¡æ¯åŒ…è£…</strong> - ä¿ç•™åŸå§‹é”™è¯¯æ˜¯å¥½çš„ï¼Œä½†å½“å‰è®¾è®¡ä¹Ÿåˆç†</li>
<li>âŒ <strong>æ‹¦æˆªå™¨ç»„åˆæ¨¡å¼</strong> - å½“å‰çš„è¦†ç›–æ¨¡å¼æ˜¯ä¸»æµè®¾è®¡ï¼Œç»„åˆæ¨¡å¼ä¼šå¢åŠ å¤æ‚æ€§</li>
</ul>
<p><strong>ä¸»è§‚æ€§é—®é¢˜ï¼š</strong></p>
<ul>
<li>ğŸ¤” <strong>requestKeyç±»å‹é™åˆ¶</strong> - symbolæ”¯æŒæ˜¯ç‰¹æ€§ï¼Œä¸æ˜¯ç¼ºé™·</li>
</ul>
<p>æœ€ç»ˆæˆ‘ä¸å¾—ä¸æ‰¿è®¤ï¼š<strong>æœ‹å‹çš„æŠ€æœ¯åŠŸåº•æ˜¯ä¸é”™çš„ï¼Œæå‡ºäº†ä¸€äº›ç¡®å®å­˜åœ¨çš„è¾¹ç¼˜é—®é¢˜ã€‚ä½†æœ‰äº›å»ºè®®è¿‡äº"å®Œç¾ä¸»ä¹‰"ï¼Œå¯èƒ½ä¼šè®©ä»£ç å˜å¾—è¿‡äºå¤æ‚ã€‚</strong></p>
<p>ä¿®å¤äº†å‰4ä¸ªé‡è¦é—®é¢˜åï¼Œæœ‹å‹ç»ˆäºç‚¹å¤´è¯´ï¼š"ç°åœ¨çœ‹èµ·æ¥åƒä¸ªæ­£ç»çš„å°è£…äº†ï¼ä¸è¿‡ä½ å¾—æ‰¿è®¤ï¼Œå¥½çš„ä»£ç ä¸ä»…è¦èƒ½è·‘ï¼Œè¿˜è¦ç»å¾—èµ·åŒè¡Œçš„å®¡è§†ã€‚" ğŸ˜‚</p>
<h2 data-id="heading-25">ğŸš€ å†™åœ¨æœ€å</h2>
<p>ç»è¿‡è¿™ä¸€ä¸Šåˆçš„"æ¿€æƒ…"ç¼–ç  + æœ‹å‹çš„"æ— æƒ…"å˜²ç¬‘ + æˆ‘çš„"ä¸æœæ°”"ä¿®å¤ï¼Œè¿™ä¸ª HTTP å®¢æˆ·ç«¯å°è£…ç»ˆäºå˜å¾—æ›´åŠ å¥å£®äº†ã€‚</p>
<p>ä»æœ€åˆçš„è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œåˆ°è¢«æœ‹å‹æ— æƒ…æ‰“è„¸ï¼Œå†åˆ°æœ€åçš„è™šå¿ƒä¿®å¤ï¼Œè¿™ä¸ªè¿‡ç¨‹è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°ï¼š</p>
<ol>
<li><strong>æ²¡æœ‰å®Œç¾çš„ä»£ç </strong> - æ€»æœ‰ä½ æƒ³ä¸åˆ°çš„è¾¹ç¼˜æƒ…å†µ</li>
<li><strong>Code Review å¾ˆé‡è¦</strong> - åˆ«äººçš„è§†è§’èƒ½å‘ç°ä½ çš„ç›²ç‚¹</li>
<li><strong>ä¿æŒå¼€æ”¾å¿ƒæ€</strong> - è¢«æŒ‡å‡ºé—®é¢˜æ˜¯å¥½äº‹ï¼Œä¸æ˜¯åäº‹</li>
<li><strong>æœ‹å‹å¾ˆé‡è¦</strong> - èƒ½"å˜²ç¬‘"ä½ ä»£ç çš„æœ‹å‹æ‰æ˜¯çœŸæœ‹å‹ ğŸ˜„</li>
</ol>
<p>ç°åœ¨è¿™ä¸ªå°è£…ä¸ä»…è§£å†³äº†æ—¥å¸¸å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œè¿˜å…·å¤‡äº†ä¼ä¸šçº§é¡¹ç›®çš„ç¨³å®šæ€§ã€‚</p>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ğŸ¯ <strong>å¼€ç®±å³ç”¨</strong> - æ— éœ€å¤æ‚é…ç½®ï¼Œé»˜è®¤å°±å¾ˆå¥½ç”¨</li>
<li>ğŸ”§ <strong>é«˜åº¦å¯å®šåˆ¶</strong> - æ”¯æŒå„ç§ä¸šåŠ¡åœºæ™¯çš„å®šåˆ¶éœ€æ±‚</li>
<li>ğŸ›¡ï¸ <strong>ç±»å‹å®‰å…¨</strong> - TypeScript å®Œç¾æ”¯æŒï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
<li>âš¡ <strong>æ€§èƒ½å‡ºè‰²</strong> - æ™ºèƒ½å»é‡ã€é‡è¯•ã€å–æ¶ˆæœºåˆ¶</li>
<li>ğŸ“š <strong>æ–‡æ¡£å®Œå–„</strong> - è¯¦ç»†çš„ç¤ºä¾‹å’Œæ³¨é‡Š</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿåœ¨ä¸º HTTP è¯·æ±‚å°è£…è€Œè‹¦æ¼ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ–¹æ¡ˆã€‚è®°ä½ï¼Œ<strong>å¥½çš„ä»£ç æ˜¯æ”¹å‡ºæ¥çš„ï¼Œä¸æ˜¯å†™å‡ºæ¥çš„</strong>ï¼</p>
<hr>
<p><strong>ä½ æœ‰è¿‡ç±»ä¼¼è¢«æœ‹å‹"å˜²ç¬‘"ä»£ç çš„ç»å†å—ï¼Ÿä½ è§‰å¾—è¿™ä¸ªå°è£…æ€ä¹ˆæ ·ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹ï¼</strong> ğŸ¤—</p>
<h2 data-id="heading-26">å…¶ä»–ç²¾å½©æ–‡ç« </h2>
<p><a href="https://juejin.cn/post/7538701316909596691" target="_blank" title="https://juejin.cn/post/7538701316909596691">ä¼˜é›…ï¼å¤ªä¼˜é›…ï¼æ–¯å·´æ‹‰è¥¿ï¼æ€ä¹ˆè®©AIå†™å‡ºæœ€ä¼˜é›…çš„ä»£ç </a></p></div></div>
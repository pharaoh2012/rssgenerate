
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/bcsg/p/18716362" title="发布于 2025-02-14 23:29">
    <span role="heading" aria-level="2">Windows Teminal 自定义标题</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="背景与痛点">背景与痛点</h2>
<p><img src="https://img2024.cnblogs.com/blog/3590070/202502/3590070-20250214231907912-505265059.png" alt="" loading="lazy"></p>
<p><strong>场景</strong>：<br>
开发环境，用命令行开了好几个微服务，窗口标题都是一样的，不好分清哪个窗口是哪个服务的了。所有窗口默认显示相同的标题（如"C:\Windows\System32\cmd.exe dotnet run"）。窗口多了，切换也不方便。<br>
<strong>解决方案</strong>：<br>
使用Windows Teminal 来运行命令启动服务，然后自定义动态设置窗口标题为<code>目录名(完整路径)</code>格式。 例如：</p>
<p><code>YDT_Gateway(D:\Project\...\YDT_Gateway)</code></p>
<h2 id="实现效果">实现效果</h2>
<p><img src="https://img2024.cnblogs.com/blog/3590070/202502/3590070-20250214232152901-68860289.png" alt="" loading="lazy"></p>
<hr>
<h2 id="实现步骤详解">实现步骤详解</h2>
<h4 id="步骤-1确认配置文件路径">步骤 1：确认配置文件路径</h4>
<p>在 PowerShell 中运行以下命令查看配置文件路径：</p>
<pre><code>  $PROFILE
</code></pre>
<p>你会看到类似这样的路径（具体路径可能因系统而异）：<br>
<code>C:\Users\你的用户名\Documents\PowerShell\Microsoft.PowerShell_profile.ps1</code></p>
<h4 id="步骤-2创建配置目录和文件">步骤 2：创建配置目录和文件</h4>
<p>如果&nbsp;<code>Documents\PowerShell</code>&nbsp;目录不存在，手动创建：<br>
<code>New-Item -Type Directory -Path (Split-Path $PROFILE -Parent) -Force</code><br>
创建配置文件：<br>
<code>New-Item -Type File -Path $PROFILE -Force</code></p>
<h3 id="2-添加自动更新标题的代码">2. 添加自动更新标题的代码</h3>
<h4 id="步骤-1用记事本打开配置文件">步骤 1：用记事本打开配置文件</h4>
<p><code>notepad $PROFILE</code><br>
或使用其他编辑器（如 VS Code）：<br>
<code>code $PROFILE</code></p>
<h4 id="步骤-2粘贴以下代码">步骤 2：粘贴以下代码</h4>
<pre><code>  function prompt {
    # 获取当前完整路径（字符串格式）
    $currentPath = (Get-Location).Path
  
    # 提取最后一级目录名（兼容根目录）
    $folderName = if ($currentPath -match '\\$') {
      # 处理根目录（如 D:\）
      (Split-Path $currentPath -Parent) | Split-Path -Leaf
    } else {
      Split-Path $currentPath -Leaf
    }
  
    # 设置标题格式：最后一级目录名(完整路径)
    $host.UI.RawUI.WindowTitle = "$folderName($currentPath)"
  
    # 保留默认提示符（此行不可删除）
    "PS $($executionContext.SessionState.Path.CurrentLocation)$('&gt;' * ($nestedPromptLevel + 1)) "
  }
  
</code></pre>
<h4 id="步骤-3保存文件">步骤 3：保存文件</h4>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.034362393726851855" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-14 23:29">2025-02-14 23:29</span>&nbsp;
<a href="https://www.cnblogs.com/bcsg">dotNet编程拾光</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18716362" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18716362);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18716362', targetLink: 'https://www.cnblogs.com/bcsg/p/18716362', title: 'Windows Teminal 自定义标题' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/janus2003/p/19049624" title="发布于 2025-08-20 22:26">
    <span role="heading" aria-level="2">ESP32 串口通信代码 (VS Code 开发环境)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;"><br>#include &lt;Arduino.h&gt;

// 定义使用的串口
#define SERIAL1_RX_PIN 9  // 根据您的ESP32开发板调整
#define SERIAL1_TX_PIN 10 // 根据您的ESP32开发板调整

// 全局变量
HardwareSerial Serial1(1); // 使用串口1
String inputString = "";   // 存储接收到的数据
bool stringComplete = false; // 是否接收到完整字符串

void setup() {
  // 初始化串口0（用于调试）
  Serial.begin(115200);
  
  // 初始化串口1（用于外部通信）
  Serial1.begin(115200, SERIAL_8N1, SERIAL1_RX_PIN, SERIAL1_TX_PIN);
  
  // 等待串口初始化完成
  delay(1000);
  
  Serial.println("ESP32 Serial Communication Example");
  Serial.println("Type a message and press Enter to send via Serial1");
  Serial.println("Messages received on Serial1 will be displayed here");
}

void loop() {
  // 检查串口0（调试端口）是否有数据输入
  if (Serial.available()) {
    char inChar = (char)Serial.read();
    
    // 如果收到换行符，则认为输入完成
    if (inChar == '\n') {
      // 通过串口1发送数据
      Serial1.println(inputString);
      Serial.print("Sent: ");
      Serial.println(inputString);
      
      // 清空输入字符串
      inputString = "";
      stringComplete = false;
    } else {
      // 将字符添加到输入字符串
      inputString += inChar;
    }
  }
  
  // 检查串口1是否有数据返回
  if (Serial1.available()) {
    String response = Serial1.readStringUntil('\n');
    Serial.print("Received: ");
    Serial.println(response);
  }
  
  // 短暂延迟以减少CPU使用率
  delay(10);
}
</pre>
</div>
<p>　　</p>
<h2>PlatformIO配置文件 (platformio.ini)</h2>
<div class="cnblogs_Highlighter">
<pre class="brush:cpp;gutter:true;">[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
</pre>
</div>
<p>　　</p>
<h2>使用说明</h2>
<ol start="1">
<li>
<p class="ds-markdown-paragraph">硬件连接：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">根据您的ESP32开发板调整RX和TX引脚</p>
</li>
<li>
<p class="ds-markdown-paragraph">常见的ESP32开发板可以使用默认的GPIO9(RX)和GPIO10(TX)</p>
</li>
<li>
<p class="ds-markdown-paragraph">如果需要与其他设备通信，请正确连接TX到RX，RX到TX</p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph">功能说明：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">代码初始化了两个串口：Serial(用于调试)和Serial1(用于外部通信)</p>
</li>
<li>
<p class="ds-markdown-paragraph">在Serial输入消息并按回车，消息将通过Serial1发送</p>
</li>
<li>
<p class="ds-markdown-paragraph">从Serial1接收到的任何数据都会显示在Serial监视器上</p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph">在VS Code中运行：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">安装PlatformIO插件</p>
</li>
<li>
<p class="ds-markdown-paragraph">创建新项目，选择ESP32开发板</p>
</li>
<li>
<p class="ds-markdown-paragraph">将代码复制到src/main.cpp</p>
</li>
<li>
<p class="ds-markdown-paragraph">连接ESP32开发板</p>
</li>
<li>
<p class="ds-markdown-paragraph">点击PlatformIO的Upload and Monitor按钮</p>
</li>
</ul>
</li>
</ol>
<h2>注意事项</h2>
<ul>
<li>
<p class="ds-markdown-paragraph">请根据您的实际硬件调整RX/TX引脚定义</p>
</li>
<li>
<p class="ds-markdown-paragraph">确保通信双方的波特率设置一致(本例中使用115200)</p>
</li>
<li>
<p class="ds-markdown-paragraph">如果需要更复杂的协议，可以扩展此代码实现数据帧解析等功能</p>
</li>
</ul>
<p class="ds-markdown-paragraph">这个示例提供了基本的双向串口通信功能，您可以根据实际需求进行扩展和修改</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-20 22:26">2025-08-20 22:26</span>&nbsp;
<a href="https://www.cnblogs.com/janus2003">Janus2003</a>&nbsp;
阅读(<span id="post_view_count">80</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19049624);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19049624', targetLink: 'https://www.cnblogs.com/janus2003/p/19049624', title: 'ESP32 串口通信代码 (VS Code 开发环境)' })">举报</a>
</div>
        
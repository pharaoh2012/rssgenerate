
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/code-daily/p/18830657" title="发布于 2025-04-17 13:21">
    <span role="heading" aria-level="2">解锁.NET 9性能优化黑科技：从内存管理到Web性能的最全指南</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<section id="nice" style="background: linear-gradient(90deg, rgba(50, 0, 0, 0.03) 0, rgba(255, 255, 255, 0) 0) left top / 20px 20px repeat scroll padding-box border-box, linear-gradient(360deg, rgba(50, 0, 0, 0.04) 0, rgba(255, 255, 255, 0) 0) repeat rgba(0, 0, 0, 0); width: auto; font-family: Optima, PingFangSC-light, serif; font-size: 16px; color: rgba(0, 0, 0, 1); line-height: 1.5em; word-spacing: 0; letter-spacing: 0; overflow-wrap: break-word; text-align: left; padding: 0 10px; margin: 0" data-tool="mdnice编辑器" data-website="https://www.mdnice.com">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">引言：性能优化的重要性与 .NET 9 的性能提升</span></h2>
<blockquote class="custom-blockquote multiquote-1" style="border-radius: 8px; background: none left top / auto no-repeat scroll padding-box border-box rgba(64, 184, 250, 0.1); width: auto; height: auto; box-shadow: 0 0 rgba(0, 0, 0, 0); display: block; overflow-x: auto; overflow-y: auto; border: 1px solid rgba(64, 184, 255, 0.4); padding: 10px 10px 10px 20px; margin: 20px 0" data-tool="mdnice编辑器"><span style="display: block; color: rgba(64, 184, 250, 0.5); font-size: 28px; line-height: 1.5em; letter-spacing: 0; text-align: left; font-weight: bold">❝</span>
<p style="text-indent: 0; color: rgba(59, 59, 59, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal; padding: 8px 0; margin: 0">性能优化不仅关乎代码执行效率，还直接影响用户满意度和系统可扩展性。例如，一个响应缓慢的 Web 应用可能导致用户流失，而一个内存占用过高的服务可能增加云端部署的成本。</p>
</blockquote>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">性能优化是确保应用程序在高负载和资源受限环境下高效运行的关键。无论是构建 Web 应用、微服务还是桌面程序，性能瓶颈都可能导致用户体验下降、资源浪费甚至系统崩溃。</p>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">.NET 9为开发者带来了一系列强大的性能优化工具和改进，涵盖内存管理、异步编程、代码执行效率和 Web 应用性能等多个方面。</p>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">本文将深入探讨 .NET 9 中的性能优化，帮助您了解如何利用这些新特性提升应用的性能，并提供实用的建议和最佳实践。无论您是初学者还是经验丰富的开发者，本文都将为您提供有效的参考。</p>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">.NET 9 在多个领域实现了突破性改进，包括：</p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">内存管理</strong>：引入动态适应应用大小（DATAS）的垃圾回收模式，优化内存使用。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">异步编程</strong>：减少启动开销并增强网络性能，提升应用的响应性。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">代码执行</strong>：即时编译器（JIT）的优化，如循环改进和边界检查消除，提升代码效率。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">Web 性能</strong>：Kestrel 服务器的性能提升和 HTTP/3 支持，加速网络传输。</section>
</li>
</ul>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">内存管理与垃圾回收</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">内存管理是 .NET 应用性能的基础。垃圾回收（GC）机制通过自动回收不再使用的对象，减轻了开发者的内存管理负担。然而，GC 的行为直接影响应用的性能，尤其是在高并发或内存受限的场景中。频繁的 GC 操作可能导致暂停时间增加，而内存碎片可能降低可用内存的效率。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">动态适应应用大小（DATAS）</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">.NET 9 引入了一项重要的垃圾回收改进：动态适应应用大小（DATAS）。这一特性默认启用，旨在根据应用的实际内存需求动态调整堆大小，在内存使用和性能之间找到平衡点。与传统的固定堆大小模式相比，DATAS 能够更好地适应“突发”工作负载，在负载高峰时分配更多内存，而在负载降低时释放多余资源。</p>
<h4 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 18px; color: rgba(245, 172, 7, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: inline-block; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 2px solid rgba(245, 172, 7, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 2px 10px; margin: 0">DATAS 的工作原理</span></h4>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">DATAS 的核心在于动态性和自适应性，其主要机制包括：</p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">动态调整堆大小</strong>：DATAS 监控应用中长期存活的对象数量，并根据这一数据设置下一次 GC 触发前的最大分配量。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">吞吐量与内存平衡</strong>：它根据应用的吞吐量需求调整内存分配，确保性能不会因内存限制而显著下降。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">堆数量管理</strong>：初始使用单个堆，并根据需要增加或减少堆数量。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">定期全堆压缩</strong>：为防止内存碎片化，DATAS 会定期执行全堆压缩 GC。</section>
</li>
</ul>
<h4 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 18px; color: rgba(245, 172, 7, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: inline-block; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 2px solid rgba(245, 172, 7, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 2px 10px; margin: 0">基准测试数据</span></h4>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">DATAS 的效果在基准测试中得到了验证。例如，在 TechEmpower 的 JSON 和 Fortunes 测试中：</p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">工作集大小</strong>：改善超过 80%，显著减少内存占用。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">吞吐量</strong>：仅下降 2-3%（每秒请求数，RPS），表明性能影响极小。</section>
</li>
</ul>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">以下是测试数据的一个示例：</p>
<section class="table-container" style="overflow-x: auto; padding: 0; margin: 0" data-tool="mdnice编辑器">
<table style="display: table; text-align: left">
<thead>
<tr>
<th style="color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.5em; letter-spacing: 0.02em; text-align: left; font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(240, 240, 240, 1); width: auto; height: auto; border-radius: 0; min-width: 85px; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">基准测试</strong></th>
<th style="color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.5em; letter-spacing: 0.02em; text-align: left; font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(240, 240, 240, 1); width: auto; height: auto; border-radius: 0; min-width: 85px; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">机器规格</strong></th>
<th style="color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.5em; letter-spacing: 0.02em; text-align: left; font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(240, 240, 240, 1); width: auto; height: auto; border-radius: 0; min-width: 85px; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">吞吐量减少</strong></th>
<th style="color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.5em; letter-spacing: 0.02em; text-align: left; font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(240, 240, 240, 1); width: auto; height: auto; border-radius: 0; min-width: 85px; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">工作集改善</strong></th>
</tr>
</thead>
<tbody style="font-size: 14px; line-height: 1.5em; letter-spacing: 0.02em; text-align: left; font-weight: normal; border-image: initial; border: 0">
<tr style="color: rgba(89, 89, 89, 1); background: none left top / auto no-repeat scroll padding-box border-box rgba(255, 255, 255, 1); width: auto; height: auto">
<td style="min-width: 85px; border-radius: 0; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px">TechEmpower JSON, Fortunes</td>
<td style="min-width: 85px; border-radius: 0; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px">48-core, Linux</td>
<td style="min-width: 85px; border-radius: 0; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px">2-3% (RPS)</td>
<td style="min-width: 85px; border-radius: 0; border: 1px solid rgba(204, 204, 204, 0.4); padding: 5px 10px">&gt;80%</td>
</tr>
</tbody>
</table>
</section>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">这些数据表明，DATAS 在内存受限环境（如容器化应用）中尤为出色，能够显著降低内存使用，同时保持高吞吐量。</p>
<h4 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 18px; color: rgba(245, 172, 7, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: inline-block; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 2px solid rgba(245, 172, 7, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 2px 10px; margin: 0">适用场景</span></h4>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">DATAS 的设计使其适用于多种场景：</p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">容器化应用</strong>：在 Kubernetes 等平台中，DATAS 帮助应用更高效地利用有限内存。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">云服务</strong>：动态调整内存使用，降低云端成本。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">高并发应用</strong>：减少 GC 暂停时间，提升响应速度。</section>
</li>
</ul>
<h4 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 18px; color: rgba(245, 172, 7, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: inline-block; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 2px solid rgba(245, 172, 7, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 2px 10px; margin: 0">配置 DATAS</span></h4>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">DATAS 默认启用，但开发者可以通过运行时配置调整其行为。例如，可以通过设置环境变量或配置文件禁用 DATAS，或调整其参数以满足特定需求。更多详情可参考微软官方文档。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">内存管理的最佳实践</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">除了利用 DATAS，开发者还可以通过以下实践优化内存使用：</p>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">最小化对象分配</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">重用对象</strong>：使用对象池（如 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">MemoryPool&lt;T&gt;</code>）管理缓冲区，避免频繁分配。例如：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>var&nbsp;pool&nbsp;=&nbsp;MemoryPool&lt;byte&gt;.Shared;
using&nbsp;var&nbsp;memoryOwner&nbsp;=&nbsp;pool.Rent(1024);
var&nbsp;buffer&nbsp;=&nbsp;memoryOwner.Memory;</code></pre>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">避免不必要分配</strong>：使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">string.Create</code> 结合 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">Span&lt;T&gt;</code> 构建字符串，减少中间对象：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>string&nbsp;result&nbsp;=&nbsp;string.Create(10,&nbsp;state,&nbsp;(span,&nbsp;state)&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;span.Fill('a');&nbsp;//&nbsp;示例填充逻辑
});</code></pre>
</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">适当使用值类型</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">对于小型、不可变的数据，使用结构体（struct）可以减少堆分配。例如：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>public&nbsp;struct&nbsp;Point
{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;X&nbsp;{&nbsp;get;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;Y&nbsp;{&nbsp;get;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;Point(int&nbsp;x,&nbsp;int&nbsp;y)&nbsp;=&gt;&nbsp;(X,&nbsp;Y)&nbsp;=&nbsp;(x,&nbsp;y);
}</code></pre>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">注意：避免在栈上分配过大的结构体，以免引发性能问题。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">利用 Span 和 Memory</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">这些类型允许在不分配额外内存的情况下操作内存块。例如：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>int[]&nbsp;array&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3];
Span&lt;int&gt;&nbsp;span =&nbsp;array.AsSpan();
for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;span.Length;&nbsp;i++)
{
&nbsp;&nbsp;&nbsp;&nbsp;span[i]&nbsp;*=&nbsp;2;&nbsp;//&nbsp;修改原数组，无额外分配
}</code></pre>
</section>
</li>
</ul>
</section>
</li>
</ol>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">通过这些实践，开发者可以显著减少 GC 压力，提升应用的内存效率和稳定性。</p>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">异步编程增强</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">异步编程在处理 I/O 密集型操作（如网络请求、文件读写）时尤为重要。通过 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; height: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">async</code> 和 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; height: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">await</code>，开发者可以编写非阻塞代码，提升应用的响应性和吞吐量。.NET 9 在异步编程方面进行了多项优化，包括减少启动开销、改进类型检查性能以及增强网络和 JSON 序列化的异步支持。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">异步编程的改进</span></h3>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">减少启动开销</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">.NET 9 优化了 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">AsyncTaskMethodBuilder.AwaitUnsafeOnCompleted</code> 方法，移除了即时编译（tier 0）中的装箱操作，降低了异步方法启动的性能开销。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">在高频调用的场景中，这项改进显著提升了性能。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">类型检查优化</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">类型检查方法（如 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">typeof(T).IsGenericType</code>）被优化为固有函数（intrinsics），性能大幅提升。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">例如，<code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">Parallel.ForAsync</code> 的类型检查代码大小从 .NET 8 的 250 字节减少到 .NET 9 的 6 字节，执行效率显著提高。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">网络性能提升</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">TLS 握手</strong>：分配从 5.03 KB 降至 3.3 KB，平均时间从 2.652 ms 降至 2.581 ms。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">HTTP GET 请求</strong>：平均时间从 92.42 us 降至 77.13 us，分配从 1.98 KB 降至 1.8 KB。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">这些改进直接提升了异步 I/O 操作的效率。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">JSON 序列化增强</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">.NET 9 为 JSON 序列化器添加了 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">PipeWriter</code> 的异步重载，提升了流式 JSON 序列化的性能。例如：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>await&nbsp;JsonSerializer.SerializeAsync(pipeWriter,&nbsp;data);</code></pre>
</section>
</li>
</ul>
</section>
</li>
</ol>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">异步编程的最佳实践</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">为了充分利用 .NET 9 的异步改进，开发者应遵循以下实践：</p>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">优先使用 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; height: auto; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">async</code> 和 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; height: auto; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">await</code></strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">避免同步阻塞操作。例如，使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">await Task.Delay(1000)</code> 而不是 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">Thread.Sleep(1000)</code>：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>async&nbsp;Task&nbsp;DelayAsync()
{
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;Task.Delay(1000);
&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine("延迟完成");
}</code></pre>
</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">实现 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; height: auto; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">IAsyncDisposable</code></strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">对于需要异步清理资源的类，使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">IAsyncDisposable</code>：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>public&nbsp;class&nbsp;MyResource&nbsp;:&nbsp;IAsyncDisposable
{
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ValueTask&nbsp;DisposeAsync()
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;异步释放资源
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ValueTask.CompletedTask;
&nbsp;&nbsp;&nbsp;&nbsp;}
}</code></pre>
</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">避免 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; height: auto; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">async void</code></strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">除事件处理程序外，使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">async Task</code> 替代 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">async void</code>，以便捕获异常和等待完成。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">合理配置 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; height: auto; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">ConfigureAwait</code></strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">在库代码中，使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">ConfigureAwait(false)</code> 避免上下文切换：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>await&nbsp;Task.Run(()&nbsp;=&gt;&nbsp;{&nbsp;/*&nbsp;工作&nbsp;*/&nbsp;}).ConfigureAwait(false);</code></pre>
</section>
</li>
</ul>
</section>
</li>
</ol>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">这些实践能够帮助开发者编写高效的异步代码，充分利用 .NET 9 的性能提升。</p>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">代码优化</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">代码优化是提升应用性能的关键，特别是在计算密集型任务中。.NET 9 的即时编译器（JIT）引入了多项改进，包括循环优化、内联增强和边界检查消除，显著提升了代码执行效率。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">循环优化</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">循环是性能敏感代码的常见结构，.NET 9 的 JIT 对其进行了优化：</p>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">向下计数循环</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">将 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">for (int i = 0; i &lt; n; i++)</code> 优化为 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">for (int i = n-1; i &gt;= 0; i--)</code>，利用 CPU 的零标志减少比较指令。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">归纳变量优化</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">识别并简化循环中的归纳变量，减少重复计算。例如，预计算数组地址。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">复杂循环识别</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">增强了对复杂循环的识别能力，生成更高效的机器码。</section>
</li>
</ul>
</section>
</li>
</ol>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">内联改进</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">内联通过将小型方法嵌入调用点减少调用开销，.NET 9 改进了内联能力：</p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">泛型方法</strong>：提升了对小型泛型方法的内联支持。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">效果</strong>：减少代码大小和执行时间，例如属性获取器被内联后性能显著提升。</section>
</li>
</ul>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">边界检查消除</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">数组访问的边界检查虽然确保了安全性，但增加了开销。NET 9 的 JIT 在安全情况下消除这些检查。例如：</p>
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0" data-tool="mdnice编辑器"><code>int&nbsp;sum&nbsp;=&nbsp;0;
for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;array.Length;&nbsp;i++)
{
&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;array[i];
}</code></pre>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">JIT 识别出 <code style="color: rgba(53, 148, 247, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; height: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">i</code> 在安全范围内，消除边界检查，加快循环执行。</p>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">这些优化由 JIT 自动应用，开发者无需修改代码即可受益。</p>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">Web 应用性能</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">Web 应用的性能直接影响用户体验和服务器负载。.NET 9 通过优化 Kestrel 服务器和支持 HTTP/3，提升了 Web 应用的效率。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">Kestrel 服务器优化</span></h3>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">网络性能</strong>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">TLS 握手分配减少，HTTP GET 请求时间缩短。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">HTTP/3 支持</strong>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">基于 QUIC 协议的 HTTP/3 通过 0-RTT 握手和拥塞控制减少延迟。</section>
</li>
</ul>
</section>
</li>
</ol>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">Web 性能最佳实践</span></h3>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">响应压缩</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">启用 Gzip 或 Brotli：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>services.AddResponseCompression(options&nbsp;=&gt;
{
&nbsp;&nbsp;&nbsp;&nbsp;options.Providers.Add&lt;GzipCompressionProvider&gt;();
});
app.UseResponseCompression();</code></pre>
</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">捆绑和压缩静态资源</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">使用工具压缩 JS 和 CSS 文件。</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">缓存策略</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">使用 <code style="background: none left top / auto no-repeat scroll padding-box border-box rgba(27, 31, 35, 0.05); width: auto; border-radius: 4px; overflow-wrap: break-word; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; border-top: 3px none rgba(0, 0, 0, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 2px 4px; margin: 0 2px">IMemoryCache</code> 缓存数据：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>if&nbsp;(!cache.TryGetValue(key,&nbsp;out&nbsp;var&nbsp;data))
{
&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;await&nbsp;GetDataAsync();
&nbsp;&nbsp;&nbsp;&nbsp;cache.Set(key,&nbsp;data,&nbsp;TimeSpan.FromMinutes(10));
}</code></pre>
</section>
</li>
</ul>
</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0"><strong style="color: rgba(53, 148, 247, 1); font-weight: bold; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: auto; border-radius: 0; border: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 0">启用 HTTP/2 和 HTTP/3</strong></p>
<ul style="list-style-type: disc; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">配置 Kestrel：
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0"><code>app.UseKestrel(options&nbsp;=&gt;
{
&nbsp;&nbsp;&nbsp;&nbsp;options.ListenAnyIP(5000,&nbsp;o&nbsp;=&gt;&nbsp;o.Protocols&nbsp;=&nbsp;HttpProtocols.Http1AndHttp2AndHttp3);
});</code></pre>
</section>
</li>
</ul>
</section>
</li>
</ol>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">性能测量与分析</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">性能优化需要科学的测量工具，如 BenchmarkDotNet 和 Visual Studio Profiler。</p>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">BenchmarkDotNet</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">用于微基准测试：</p>
<pre class="custom highlighter-hljs" style="border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.55); text-align: left; padding: 0; margin: 10px 0" data-tool="mdnice编辑器"><code>[MemoryDiagnoser]
public&nbsp;class&nbsp;Benchmarks
{
&nbsp;&nbsp;&nbsp;&nbsp;[Benchmark]
&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;TestMethod()
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;测试代码
&nbsp;&nbsp;&nbsp;&nbsp;}
}</code></pre>
<h3 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: block; flex-direction: unset; float: unset; height: auto; justify-content: unset; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; border-top: 1px none rgba(0, 0, 0, 1); border-right: 1px none rgba(0, 0, 0, 1); border-bottom: 4px solid rgba(64, 184, 250, 1); border-left: 1px none rgba(0, 0, 0, 1); padding: 0; margin: 30px 0 15px" data-tool="mdnice编辑器"><span class="content" style="font-size: 20px; color: rgba(64, 184, 250, 1); line-height: 1.5em; letter-spacing: 0; align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; font-weight: bold; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 0 0 0 25px; border: 1px none rgba(0, 0, 0, 1)">Visual Studio Profiler</span></h3>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">用于应用级分析：</p>
<ol style="list-style-type: decimal; color: rgba(0, 0, 0, 1); padding: 0 0 0 25px; margin: 8px 0" data-tool="mdnice编辑器">
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">打开“性能探查器”。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">选择分析类型。</section>
</li>
<li>
<section style="margin-top: 5px; margin-bottom: 5px; color: rgba(89, 89, 89, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; font-weight: normal">运行并分析结果。</section>
</li>
</ol>
<hr style="border-radius: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; height: 1px; border-top: 2px solid rgba(59, 170, 250, 1); border-right: 3px none rgba(0, 0, 0, 0.4); border-bottom: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); padding: 0; margin: 10px 0" data-tool="mdnice编辑器">
<h2 style="align-items: unset; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; display: flex; flex-direction: unset; float: unset; height: auto; justify-content: center; line-height: 1.5em; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0; margin: 30px 0 15px; border: 1px none rgba(0, 0, 0, 1)" data-tool="mdnice编辑器"><span class="content" style="font-size: 22px; line-height: 1.8em; letter-spacing: 0; align-items: unset; background: linear-gradient(0deg, rgba(231, 247, 252, 1) 40%, rgba(0, 0, 0, 0) 40%) left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); border-radius: 0; box-shadow: none; color: rgba(112, 188, 234, 1); display: block; font-weight: bold; font-style: normal; flex-direction: unset; float: unset; height: auto; justify-content: unset; overflow-x: unset; overflow-y: unset; position: relative; text-align: left; text-indent: 0; text-shadow: none; transform: none; width: auto; -webkit-box-reflect: unset; padding: 0 10px 0 0; margin: 0; border: 1px none rgba(0, 0, 0, 1)">结语</span></h2>
<p style="color: rgba(43, 43, 43, 1); font-size: 14px; line-height: 1.8em; letter-spacing: 0.02em; text-align: left; text-indent: 0; padding: 8px 0; margin: 0" data-tool="mdnice编辑器">.NET 9 通过 DATAS、异步优化、JIT 改进和 Web 性能提升，为开发者提供了强大的性能优化工具。结合本文的总结，我们可以构建更高效的 .NET 应用，提升用户体验并降低资源消耗。</p>
</section>
</div>
<div id="MySignature" role="contentinfo">
    <p>
    本文来自博客园，作者：<a href="https://www.cnblogs.com/code-daily/" target="_blank">AI·NET极客圈</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/code-daily/p/18830657" target="_blank">https://www.cnblogs.com/code-daily/p/18830657</a> 
</p>
<br>
<img src="https://images.cnblogs.com/cnblogs_com/blogs/272929/galleries/2447197/o_250311050355_AI.NET%20Logo.png" width="61.8%">

<p>
    欢迎关注我的公众号，作为.NET程序员，我们聚焦人工智能技术，深入探讨AI的前沿应用与发展趋势，为你立体呈现人工智能的无限可能，让我们共同携手走在科技最前沿。
</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.6968890599513888" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-17 13:31">2025-04-17 13:21</span>&nbsp;
<a href="https://www.cnblogs.com/code-daily">AI·NET极客圈</a>&nbsp;
阅读(<span id="post_view_count">800</span>)&nbsp;
评论(<span id="post_comment_count">4</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18830657);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18830657', targetLink: 'https://www.cnblogs.com/code-daily/p/18830657', title: '解锁.NET 9性能优化黑科技：从内存管理到Web性能的最全指南' })">举报</a>
</div>
        
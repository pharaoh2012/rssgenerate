
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/anqiphp/p/19025435" title="发布于 2025-08-06 17:14">
    <span role="heading" aria-level="2">微前端：qiankun框架在开发中遇到的问题</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>基座是Vue3.0 + element plus配合 子应用&nbsp;Vue2.0 + element ui导致的样式冲突问题</h1>
<h4>element-plus默认命名空间为el，el会作为其编译后的class名及css前缀。支持 <a href="https://element-plus.org/zh-CN/guide/namespace.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4?login=from_csdn" target="_blank" rel="noopener nofollow">自定义命名空间</a></h4>
<h4>&nbsp;首先在App.vue中定义：<span class="hljs-tag"><span class="hljs-attr">namespace=<span class="hljs-string">"ep"；具体代码如下：</span></span></span></h4>
<div class="cnblogs_code">
<pre>&lt;template&gt;
  &lt;el-config-provider <span style="color: rgba(0, 0, 255, 1)">namespace</span>=<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">ep</span><span style="color: rgba(128, 0, 0, 1)">"</span>&gt;
    &lt;RouterView /&gt;
  &lt;/el-config-provider&gt;
&lt;/template&gt;</pre>
</div>
<h4>其次设置 SCSS 和 CSS 变量，创建 /src/assets/styles/element/index.scss, index.scss具体内容如下：</h4>
<div class="cnblogs_code">
<pre>@forward <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">element-plus/theme-chalk/src/mixins/config.scss</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)"> with (
  $</span><span style="color: rgba(0, 0, 255, 1)">namespace</span>: <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">ep</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">
);</span></pre>
</div>
<h4>因为我使用的是 qiankun + vue3.0 + webpack，所以需要在webpack 的 preprocessorOptions 中设置。找到vite.config.js文件，</h4>
<h4>preprocessorOptions 中设置&nbsp;additionalData: `@use "@/assets/styles/element/index.scss" as *;`,</h4>
<h4>具体修改内容如下：</h4>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">    css: {
      preprocessorOptions: {
        scss: {
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 全局注入变量/混合宏（路径需根据项目调整）
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> additionalData: `@import "@/styles/variables.scss";`,</span>
          additionalData: `@use <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">@/assets/styles/element/index.scss</span><span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(0, 0, 255, 1)">as</span> *<span style="color: rgba(0, 0, 0, 1)">;`,
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 解决旧版 API 警告（Sass 版本兼容）</span>
          api: <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">modern-compiler</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">,
        },
      },</span></pre>
</div>
<h4>到这里后，还有一点比较坑，我相信很多人也遇到了，就是配置完 依然不起作用，样式还是乱的，一步一深坑，跟着官方文档也得踩。其实答案就在你的main.js里；一般引入 element-plus 时，我们用的是</h4>
<div class="cnblogs_code">
<pre>import ElementPlus <span style="color: rgba(0, 0, 255, 1)">from</span> <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">element-plus</span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(0, 0, 0, 1)">;
import </span><span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">element-plus/dist/index.css</span><span style="color: rgba(128, 0, 0, 1)">'</span>; </pre>
</div>
<h3>需要注意的是：index.css是编译压缩过的，还用这个样式就等于没了，因为我们换了前缀命名，index.css还是默认 el 的；需要改为引入&nbsp;import 'element-plus/theme-chalk/src/index.scss';&nbsp;</h3>
<h4>main.js文件修改如下：</h4>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">import 'element-plus/dist/index.css'</span>
import <span style="color: rgba(128, 0, 0, 1)">'</span><span style="color: rgba(128, 0, 0, 1)">element-plus/theme-chalk/src/index.scss</span><span style="color: rgba(128, 0, 0, 1)">'</span>;</pre>
</div>
<h4>然后重新启动项目就🆗，前人踩坑后人乘凉..........</h4>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h4>&nbsp;</h4>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-06 17:14">2025-08-06 17:14</span>&nbsp;
<a href="https://www.cnblogs.com/anqiphp">安琪吖</a>&nbsp;
阅读(<span id="post_view_count">19</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19025435);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19025435', targetLink: 'https://www.cnblogs.com/anqiphp/p/19025435', title: '微前端：qiankun框架在开发中遇到的问题' })">举报</a>
</div>
        

		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/robots2/p/18707552" title="发布于 2025-02-10 11:55">
    <span role="heading" aria-level="2">本地搭建DeepSeek和知识库 Dify做智能体Agent(推荐)</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>一、基础信息</h1>
<p>1、硬件环境：</p>
<p>CPU &gt;= 2 Core</p>
<p>显存/RAM ≥ 16 GiB（推荐）</p>
<p>2、软件</p>
<p>（1）Ollama</p>
<p>Ollama 是一款跨平台的大模型管理客户端（MacOS、Windows、Linux），旨在无缝部署大型语言模型 (LLM)，例如 DeepSeek、Llama、Mistral 等。Ollama 提供大模型一键部署，所有使用数据均会保存在本地机器内，提供全方面的数据隐私和安全性。</p>
<p>（2）Dify</p>
<p>Dify 作为同样开源的 AI 应用开发平台，提供完整的私有化部署方案。通过将本地部署的 DeepSeek 服务无缝集成到 Dify 平台，企业可以在确保数据隐私的前提下，在本地服务器环境内构建功能强大的 AI 应用。</p>
<p>（3）docker</p>
<p>需要使用docker拉取镜像并运行，简化部署逻辑</p>
<h1>二、部署DeepSeek-R1</h1>
<p>1、部署Ollama</p>
<p>（1）打开官网</p>
<p>https://ollama.com/</p>
<p>（2）下载对应系统的Ollama</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208161127456-223288974.png" class="medium-zoom-image" height="219" width="298"></p>
<p>（3）安装</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208161349628-1260523306.png" class="medium-zoom-image" height="245" width="199"></p>
<p>&nbsp;</p>
<p>(4)验证--终端执行</p>
<p>ollama -v</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208161620682-14965065.png" class="medium-zoom-image" height="101" width="351"></p>
<p>2、使用ollama安装DeepSeek-r1模型</p>
<p>（1）ollama安装DeepSeek模型</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; ollama run deepseek-r1:7b</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;注：根据本机配置，选择合适的DeepSeek模型进行部署。本机推荐安装 7B 尺寸模型，大约需要拉取4.7GB数据，可以在ollama官网搜索模型，查看模型大小</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208162209578-1460737862.png" class="medium-zoom-image" height="153" width="516"></p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208163309562-1634026087.png" class="medium-zoom-image" height="359" width="397"></p>
<p>（2）安装后验证</p>
<p>安装完成，直接输入问题即可，可以看到回复信息</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250208175828474-934124902.png" class="medium-zoom-image" height="314" width="706"></p>
<h1>三、部署Dify社区版</h1>
<p>1、下载代码</p>
<p>（1）git方式下载</p>
<p>git clone https://github.com/langgenius/dify.git</p>
<p>（2）web方式下载</p>
<p>打开链接：https://github.com/langgenius/dify.git</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210113950466-413003741.png" height="250" width="478"></p>
<p>2、进入目录</p>
<p>cd dify/docker</p>
<p>3、复制配置文件</p>
<p>cp .env.example .env</p>
<p>4、docker配置代理（已配置的话可以忽略该步骤）</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210114249897-509258789.png" height="229" width="555"></p>
<pre class="language-json highlighter-hljs"><code>内容如下：
"registry-mirrors": [
    "https://dockerpull.org",
    "https://docker.1panel.dev",
    "https://docker.foreverlink.love",
    "https://docker.fxxk.dedyn.io",
    "https://docker.xn--6oq72ry9d5zx.cn",
    "https://docker.zhai.cm",
    "https://docker.5z5f.com",
    "https://a.ussh.net",
    "https://docker.cloudlayer.icu",
    "https://hub.littlediary.cn",
    "https://hub.crdz.gq",
    "https://docker.unsee.tech",
    "https://docker.kejilion.pro",
    "https://registry.dockermirror.com",
    "https://hub.rat.dev",
    "https://dhub.kubesre.xyz",
    "https://docker.nastool.de",
    "https://docker.udayun.com",
    "https://docker.rainbond.cc",
    "https://hub.geekery.cn",
    "https://docker.1panelproxy.com",
    "https://atomhub.openatom.cn",
    "https://docker.m.daocloud.io",
    "https://docker.1ms.run",
    "https://docker.linkedbus.com"
]</code></pre>
<p>5、使用docker拉取镜像并运行</p>
<p>docker compose up -d</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210114330946-1913227719.png" height="245" width="588"></p>
<p>&nbsp;</p>
<h1>四、设置 DeepSeek 接入至 Dify</h1>
<p>1、浏览器打开dify，初始化管理员信息</p>
<p>http://127.0.0.1</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210114648682-1073165247.png" height="523" width="575"></p>
<p>2、设置模型</p>
<p>右上角头像==》设置==》模型供应商==》Ollama</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210115027850-1332079577.png" height="323" width="333"></p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210115112258-98445734.png" height="187" width="555"></p>
<p>3、设置模型信息</p>
<p>基础url：http://127.0.0.1:11434</p>
<p><img src="https://img2024.cnblogs.com/blog/2350829/202502/2350829-20250210115424737-1091437064.png" height="604" width="491"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-family: &quot;PingFang SC&quot;, &quot;Smart Quotes&quot;, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif">参考文章：</span></p>
<p><span style="font-family: &quot;PingFang SC&quot;, &quot;Smart Quotes&quot;, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif">1、在MAC系统下安装Docker、Dify以及docker镜像加速</span></p>
<p><span style="font-family: &quot;PingFang SC&quot;, &quot;Smart Quotes&quot;, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif">https://cloud.tencent.com/developer/article/2478585</span></p>
<p><span style="font-family: &quot;PingFang SC&quot;, &quot;Smart Quotes&quot;, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif">2、本地搭建Dify</span></p>
<p><span style="font-family: &quot;PingFang SC&quot;, &quot;Smart Quotes&quot;, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans SC&quot;, &quot;Noto Sans CJK SC&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif">https://blog.csdn.net/piaoxue820/article/details/138191528</span></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015087149043981481" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-10 11:56">2025-02-10 11:55</span>&nbsp;
<a href="https://www.cnblogs.com/robots2">黑水滴</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18707552" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18707552);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18707552', targetLink: 'https://www.cnblogs.com/robots2/p/18707552', title: '本地搭建DeepSeek和知识库 Dify做智能体Agent(推荐)' })">举报</a>
</div>
	
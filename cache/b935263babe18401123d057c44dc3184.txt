
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deali/p/18992863" title="å‘å¸ƒäº 2025-07-19 14:33">
    <span role="heading" aria-level="2">ä½¿ç”¨django-crispy-formsç¾åŒ–è¡¨å•UI</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æ¬§å…‹ï¼Œç»§ç»­æ¥å†™è¿™ä¸ªä¸­å°é¡¹ç›®è¡ç”Ÿå‡ºæ¥çš„ç³»åˆ—æ–‡ç« </p>
<p>ä»Šå¤©ä»‹ç»ä¸€ä¸ªå¯ä»¥ç¾åŒ–ç•Œé¢çš„åº“</p>
<p>Django å¼€å‘è®²ç©¶ä¸ªå¿«ï¼Œå¤©ä¸‹æ­¦åŠŸï¼Œå”¯å¿«ä¸ç ´</p>
<p>forms åŠŸèƒ½è‡ªç„¶æ˜¯è¦ç”¨çš„ï¼Œè‡ªå¸¦è¡¨å• UI ç”Ÿæˆå’ŒéªŒè¯ï¼Œå®ç° demo æ—¶éå¸¸æ–¹ä¾¿</p>
<p>ä¹‹å‰æˆ‘åœ¨ DjangoStarter æ¡†æ¶é‡Œå·²ç»å°è£…äº†ä¸€å¥— forms è¡Œä¸ºå’Œæ ·å¼äº†ï¼Œåœ¨ <code>src/django_starter/contrib/forms</code> é‡Œ</p>
<p>è¿™å¥—å·²ç»ä¸é”™äº†ï¼Œä¹Ÿæ˜¯ç”¨ TailwindCSS æ¥å®ç°æ ·å¼ï¼ŒæŒºå¥½çœ‹çš„</p>
<p>ä¸è¿‡åœ¨å¼€å‘ä¸­å°é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº† django-crispy-forms è¿™ä¸ªåº“ï¼Œæä¾›äº†æ›´å¤šç¾åŒ–è¡¨å• UI çš„çµæ´»æ€§ã€‚</p>
<h2 id="djangostarteré‡Œçš„å®ç°">DjangoStarteré‡Œçš„å®ç°</h2>
<p>å…ˆæ¥çœ‹çœ‹ DjangoStarter æ¡†æ¶çš„å®ç°</p>
<pre><code class="language-php"> forms
 â”œâ”€ widgets
 â”‚  â”œâ”€ __init__.py
 â”‚  â”œâ”€ multiple_file.py
 â”‚  â””â”€ flowbite_date_picker.py
 â”œâ”€ templates
 â”‚  â””â”€ django_starter
 â”‚     â””â”€ forms
 â”‚        â”œâ”€ widgets
 â”‚        â””â”€ form_template.html
 â”œâ”€ __init__.py
 â”œâ”€ widget_classes.py
 â”œâ”€ mixins.py
 â””â”€ base.py
</code></pre>
<h3 id="template">template</h3>
<p>src/django_starter/contrib/forms/templates/django_starter/forms/form_template.html</p>
<pre><code class="language-django">{% for field in form %}
    &lt;div&gt;
        &lt;label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
               for="{{ field.id_for_label }}"&gt;{{ field.label }}&lt;/label&gt;
        {{ field }}
        &lt;div class="mt-2 text-sm text-gray-500 dark:text-gray-200"&gt;
            {{ field.help_text }}
        &lt;/div&gt;
        &lt;div class="mt-2 text-sm text-red-600 dark:text-red-500"&gt;
            {{ field.errors }}
        &lt;/div&gt;
    &lt;/div&gt;
{% endfor %}
</code></pre>
<h3 id="widgets">widgets</h3>
<p>src/django_starter/contrib/forms/widgets/flowbite_date_picker.py</p>
<pre><code class="language-python">from django import forms

class FlowbiteDatePickerWidget(forms.DateInput):
    template_name = 'django_starter/forms/widgets/flowbite_date_picker.html'

    def __init__(self, attrs=None, custom_class=''):
        final_attrs = {'class': custom_class}
        if attrs:
            final_attrs.update(attrs)
        super(FlowbiteDatePickerWidget, self).__init__(attrs=final_attrs)
</code></pre>
<p>src/django_starter/contrib/forms/widgets/multiple_file.py</p>
<pre><code class="language-python">from django import forms


class MultipleFileInput(forms.ClearableFileInput):
    allow_multiple_selected = True


class MultipleFileField(forms.FileField):
    def __init__(self, *args, **kwargs):
        kwargs.setdefault("widget", MultipleFileInput())
        super().__init__(*args, **kwargs)

    def clean(self, data, initial=None):
        single_file_clean = super().clean
        if isinstance(data, (list, tuple)):
            result = [single_file_clean(d, initial) for d in data]
        else:
            result = [single_file_clean(data, initial)]
        return result
</code></pre>
<h3 id="forms-ä»£ç ">forms ä»£ç </h3>
<p>src/django_starter/contrib/forms/mixins.py</p>
<pre><code class="language-python">from django import forms
from .widget_classes import *


class BaseFormMixin:
    """æä¾›è¡¨å•æ ·å¼çš„é€šç”¨æ··å…¥ç±»"""

    widget_classes = {
        forms.TextInput: TEXT_INPUT_CLASS,
        forms.Textarea: TEXT_AREA_CLASS,
        forms.EmailInput: TEXT_INPUT_CLASS,
        forms.PasswordInput: PASSWORD_INPUT_CLASS,
        forms.Select: SELECT_CLASS,
        forms.DateInput: DATE_INPUT_CLASS,
        forms.NumberInput: NUMBER_INPUT_CLASS,
    }

    def apply_widget_classes(self):
        """æ ¹æ®widgetç±»å‹ä¸ºè¡¨å•å­—æ®µåº”ç”¨æ ·å¼"""
        for field_name, field in self.fields.items():
            widget_class = self.widget_classes.get(type(field.widget))
            if widget_class:
                field.widget.attrs.update({'class': widget_class})

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.apply_widget_classes()
</code></pre>
<p>widget_classes.py çš„ä»£ç å°±ä¸è´´äº†</p>
<p>å°±æ˜¯ Tailwind CSS çš„æ ·å¼</p>
<h2 id="crispy-forms-æ˜¯å’‹å®ç°çš„">crispy-forms æ˜¯å’‹å®ç°çš„</h2>
<p>å®‰è£…åï¼Œç®€å•é…ç½®ä¸‹å°±èƒ½ç”¨äº†</p>
<p>ä½¿ç”¨èµ·æ¥ç±»ä¼¼ä¸‹é¢è¿™æ ·</p>
<pre><code class="language-django">{% load crispy_forms_tags %}

&lt;div class="sm:col-span-6"&gt;
    {{ form.name|as_crispy_field }}
&lt;/div&gt;

&lt;div class="sm:col-span-3"&gt;
    {{ form.dvr_brand|as_crispy_field }}
&lt;/div&gt;

&lt;div class="sm:col-span-3"&gt;
    {{ form.dvr_model|as_crispy_field }}
&lt;/div&gt;

&lt;div class="sm:col-span-3"&gt;
    {{ form.dvr_ip|as_crispy_field }}
&lt;/div&gt;

&lt;div class="sm:col-span-3"&gt;
    {{ form.status|as_crispy_field }}
&lt;/div&gt;
</code></pre>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>å®‰è£…ä¾èµ–</p>
<pre><code class="language-bash">pdm install django-crispy-forms
</code></pre>
<p>ç„¶åæ·»åŠ åˆ°</p>
<pre><code class="language-python">INSTALLED_APPS = (
    ...
    'crispy_forms',
)
</code></pre>
<h3 id="template-packs">Template packs</h3>
<p>ç„¶åè¿˜å¾—å®‰è£… Template packs</p>
<p>ä¸ç„¶åªæ˜¯ä¸ªç©ºå£³</p>
<p>å®˜æ–¹æ”¯æŒçš„åªæœ‰ Bootstrap ç³»åˆ—ï¼Œæœ‰ç‚¹ out äº†</p>
<p>å¥½åœ¨ç¤¾åŒºä¹Ÿæä¾›äº†ä¸å°‘ï¼Œè¿™é‡Œæˆ‘åªå…³æ³¨ Tailwind CSS çš„åº“ï¼Œåå­—æ˜¯  <a href="https://github.com/django-crispy-forms/crispy-tailwind" target="_blank" rel="noopener nofollow">crispy-tailwind</a></p>
<pre><code class="language-bash">pdm add crispy-tailwind
</code></pre>
<p>å…¶ä»– UI åº“è¿˜æœ‰å¾ˆå¤šï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨å®˜ç½‘çœ‹åˆ°: <a href="https://django-crispy-forms.readthedocs.io/en/latest/install.html#template-packs" target="_blank" rel="noopener nofollow">https://django-crispy-forms.readthedocs.io/en/latest/install.html#template-packs</a></p>
<p>è¿™ä¸ªåŒæ ·ä¹Ÿå¾—æ·»åŠ è¿›å»</p>
<pre><code class="language-python">INSTALLED_APPS = (
    ...
    'crispy_forms',
    'crispy_tailwind',
)
</code></pre>
<h3 id="é…ç½®">é…ç½®</h3>
<p>åœ¨é…ç½®æ–‡ä»¶é‡Œä¿®æ”¹é»˜è®¤çš„ Template Packs</p>
<p>src/config/settings/components/crispy_forms.py</p>
<pre><code class="language-python">CRISPY_ALLOWED_TEMPLATE_PACKS = "tailwind"
CRISPY_TEMPLATE_PACK = "tailwind"
</code></pre>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>
<p>æœ€ç®€å•çš„ç”¨æ³•æ˜¯åªä¿®æ”¹æ¨¡æ¿æ–‡ä»¶</p>
<pre><code class="language-django">{% load crispy_forms_tags %}

&lt;form method="post" class="my-class"&gt;
    {{ my_formset|crispy }}
&lt;/form&gt;
</code></pre>
<p>ç›®å‰ä¸­å°é¡¹ç›®ä¹Ÿåªç”¨åˆ°äº†è¿™ä¸ª</p>
<p>æ­é… <code>django-select2</code> å¯ä»¥å®ç°ä¸‹æ‹‰æœç´¢æ¡†</p>
<p>ä¸è¿‡æ ·å¼ä¸å¥½æ”¹ï¼Œæˆ‘æŠ˜è…¾äº†ä¸€æ®µæ—¶é—´ä¹Ÿæ²¡æ”¹å¥½ï¼Œç´¢æ€§å…ˆä¸ç†äº†ï¼Œåæ­£å°±æ˜¯ä¸€ä¸ªå¿«é€Ÿå®ç°çš„ DEMO</p>
<p>åç»­æœ‰éœ€æ±‚å†ç”¨ React é‡å†™é¡µé¢å°±è¡Œäº†</p>
<h2 id="å°ç»“">å°ç»“</h2>
<p>æˆ‘å‘ç° Django ç›¸å…³çš„æŠ€æœ¯è¿˜ç®—æ˜¯æ¯”è¾ƒå°ä¼—çš„</p>
<p>ä¸€èˆ¬å†™è¿™ç§æ–‡ç« å°±æ²¡ä»€ä¹ˆäººçœ‹</p>
<p>æˆ‘åš Django ä¹Ÿå¥½å‡ å¹´çš„æ—¶é—´äº†ï¼Œæ¡†æ¶æºç çœ‹äº†ï¼Œè„šæ‰‹æ¶ä¹Ÿæäº†ï¼Œç”¨å¾—éå¸¸é¡ºæ‰‹</p>
<p>è™½ç„¶ç°åœ¨ python çš„ web æ¡†æ¶æœ‰å¾ˆå¤šï¼Œä¸è¿‡æ‰€æœ‰é¡¹ç›®æœ€ç»ˆéƒ½ä¼šæˆä¸º Django çš„æ ·å­ğŸ¤£</p>
<p>å°±è¿™æ ·å§ï¼Œpython é¡¹ç›®è¿™ä¸€å—ï¼Œæˆ‘è¿˜æ˜¯ä¼šç»§ç»­åšæŒ Django ï¼Œæ¯•ç«Ÿæ˜¯çœŸçš„æ–¹ä¾¿å¥½ç”¨</p>
<p>å½“ç„¶ä¹Ÿä¸æ’æ–¥å°è¯•æ–°çš„ç©æ„ï¼Œæ¯”å¦‚æœ€è¿‘æœ‰ä¸ª <a href="https://docs.litestar.dev/2/" target="_blank" rel="noopener nofollow">Litestar</a> å·ç§°è¦å¹²æ‰ FastAPI çš„ï¼Œæ„Ÿè§‰æŒºæœ‰æ„æ€çš„ï¼Œæœ‰æ—¶é—´å¯ä»¥è¯•è¯•çœ‹</p>

</div>
<div id="MySignature" role="contentinfo">
    å¾®ä¿¡å…¬ä¼—å·ï¼šã€Œç¨‹åºè®¾è®¡å®éªŒå®¤ã€
ä¸“æ³¨äºäº’è”ç½‘çƒ­é—¨æ–°æŠ€æœ¯æ¢ç´¢ä¸å›¢é˜Ÿæ•æ·å¼€å‘å®è·µï¼ŒåŒ…æ‹¬æ¶æ„è®¾è®¡ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®åˆ†æç®—æ³•ã€ç§»åŠ¨ç«¯å¼€å‘ã€Linuxã€Webå‰åç«¯å¼€å‘ç­‰ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨æŠ€æœ¯ï¼Œåˆ†äº«å­¦ä¹ å®è·µç»éªŒã€‚
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-19 14:33">2025-07-19 14:33</span>&nbsp;
<a href="https://www.cnblogs.com/deali">ç¨‹åºè®¾è®¡å®éªŒå®¤</a>&nbsp;
é˜…è¯»(<span id="post_view_count">147</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18992863);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18992863', targetLink: 'https://www.cnblogs.com/deali/p/18992863', title: 'ä½¿ç”¨django-crispy-formsç¾åŒ–è¡¨å•UI' })">ä¸¾æŠ¥</a>
</div>
        
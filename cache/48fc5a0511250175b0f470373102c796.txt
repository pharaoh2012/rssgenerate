
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wujuncheng/p/18806184" title="发布于 2025-04-02 16:21">
    <span role="heading" aria-level="2">记一个.NET AOT交叉编译时的坑</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="记一个net-aot交叉编译时的坑">记一个.NET AOT交叉编译时的坑</h1>
<h3 id="背景">背景：</h3>
<p>使用.NET9开发的Avalonia项目需要部署到Linux-arm64</p>
<h3 id="踩坑">踩坑：</h3>
<p>根据官方<a href="https://learn.microsoft.com/zh-cn/dotnet/core/deploying/native-aot/cross-compile" target="_blank" rel="noopener nofollow">AOT交叉编译文档</a>配置后执行打包</p>
<pre><code class="language-shell">dotnet publish -r linux-arm64
</code></pre>
<p>提示<code>error : The PrivateSdkAssemblies ItemGroup is required for _ComputeAssembliesToCompileToNative</code></p>
<h3 id="找答案">找答案：</h3>
<p>通过在Github上查找，找到了一个<a href="https://github.com/dotnet/runtime/blob/main/src/coreclr/nativeaot/docs/compiling.md#cross-architecture-compilation" target="_blank" rel="noopener nofollow">AOT交叉编译的文档</a></p>
<p>这个文档指出了如果需要交叉编译到对应的编译器，需要对应的ILCompiler包，如果需要交叉编译到Linux-arm64，则需要<code>runtime.linux-arm64.Microsoft.DotNet.ILCompiler</code>包</p>
<h3 id="解决">解决：</h3>
<p>添加<code>runtime.linux-arm64.Microsoft.DotNet.ILCompiler</code>NUGET包后再执行<code>dotnet publish -r linux-arm64</code>，编译成功</p>
<h3 id="后续">后续：</h3>
<p>编译成功后再删除<code>runtime.linux-arm64.Microsoft.DotNet.ILCompiler</code>包引用，再次执行交叉编译，貌似也能成功，可能只是需要这个包把对应的ILCompiler下载回来，后续就不用特别引用了</p>

</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.5790309387939815" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-02 16:21">2025-04-02 16:21</span>&nbsp;
<a href="https://www.cnblogs.com/wujuncheng">吴俊城</a>&nbsp;
阅读(<span id="post_view_count">90</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18806184" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18806184);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18806184', targetLink: 'https://www.cnblogs.com/wujuncheng/p/18806184', title: '记一个.NET AOT交叉编译时的坑' })">举报</a>
</div>
	

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/songyao666/p/18851321" title="发布于 2025-04-28 11:52">
    <span role="heading" aria-level="2">浏览器如何确定最终的CSS属性值？解析计算优先级与规则</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="前言">前言</h2>
<p>上篇文章中有提到CSS值的处理过程，但如果想要确定一个元素的最终样式值可以不需要这么多步。实际上我们写的任何一个标签元素无论写没写样式，它都会有一套完整的样式。理解这一点非常重要‼️</p>
<p>比如：一个简单的<code>p</code>标签</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428114921008-596406122.png" alt="" loading="lazy"></p>
<p>打开浏览器控制台，选中元素，切换到<code>computed</code>选项，勾选<code>show all</code>，这里就能够看到元素的所有CSS样式，尽管你什么样式也没写，它们也是有默认值的。任何标签都是这样，只不过默认值可能不一样。</p>
<h2 id="一道面试题">一道面试题</h2>
<pre><code>&lt;div style="color: red;"&gt;
 &nbsp; &nbsp;&lt;p&gt;前端&lt;/p&gt;
 &nbsp; &nbsp;&lt;a href="#"&gt;南玖&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>很简单的一段代码，只需回答出这两个元素各自的文字颜色。</p>
<p>如果能够正确回答出，并知道其中的原理，OK那么这篇文章要讲的内容你都掌握了，如果不能，那么这篇文章需要好好阅读并理解一番。</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428114936565-313539995.png" alt="" loading="lazy"></p>
<p>答案是一红一蓝。</p>
<h2 id="css属性值的确定步骤">CSS属性值的确定步骤</h2>
<p>要确定属性值的话，我们可以先想想CSS属性值都可以从哪里来？</p>
<p>声明值？继承？默认值？</p>
<p>想了想CSS值好像也只能从这三个地方来获取，再加上一个比较权重，我们是不是就可以确定一个CSS属性的值了？</p>
<p>ok，浏览器也确实是按这些步骤来确定CSS属性值的：</p>
<ul>
<li>声明值：这里包含开发者自定义声明与用户代理的样式表【user agent stylesheet】（相当于浏览器默认样式表需要与默认值区分开）</li>
<li>比较权重：因为可能会有重复声明</li>
<li>继承：如果前两步还没确定值并且这个属性是可以继承的话，那么这个时候就可以使用继承值</li>
<li>默认值：最后如果还是无法确认值的话才会使用默认值</li>
</ul>
<h3 id="声明值">声明值</h3>
<p>第一步是确认声明值，还是以上面代码为例</p>
<pre><code>&lt;div style="color: red;"&gt;
 &nbsp; &nbsp;&lt;p&gt;前端&lt;/p&gt;
 &nbsp; &nbsp;&lt;a href="#"&gt;南玖&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428114951034-61935584.png" alt="" loading="lazy"></p>
<p>当前<code>div</code>既有开发者自定义声明样式（红框）也有用户代理样式（蓝框），这两块都属于声明值。</p>
<h3 id="比较权重">比较权重</h3>
<p>再把代码做点变更</p>
<pre><code>&lt;div style="color: red;"&gt;
 &nbsp; &nbsp;&lt;p style="margin: 2px;"&gt;前端&lt;/p&gt;
 &nbsp; &nbsp;&lt;a href="#"&gt;南玖&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>注意看此时<code>p</code>标签的外边距</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115002326-789371504.png" alt="" loading="lazy"></p>
<p>由于开发者自定义声明样式表与用户代理样式表都有定义<code>margin</code>值，最终应用的是开发者自定义声明样式表，所以<strong>开发者自定义声明样式表的权重要高于用户代理样式表</strong></p>
<p>如果同为开发者自定义声明的样式表有冲突，则按正常的样式权重进行比较。对比较规则不了解的同学可以查看<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_cascade/Specificity" target="_blank" rel="noopener nofollow">文档</a></p>
<h3 id="继承">继承</h3>
<p>同样还是上面的代码，我们可以看到对于<code>p</code>标签我们既没有声明他的文字颜色，用户代理样式表同样也没声明文字颜色，那么它的红色是从哪来的呢？</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115012613-973537242.png" alt="" loading="lazy"></p>
<p>答案是继承自<code>div</code>的文字颜色，因为前两步都不能确定<code>p</code>标签的<code>color</code>属性值，而<code>color</code>又恰好是可以继承的，并且父元素又正好有定义<code>color</code>属性的值。所以此时<code>p</code>标签就会继承父元素的<code>color</code>属性，渲染成红色字体。</p>
<p>这里需要注意的是继承采用就近原则，与权重无关</p>
<p>比如：</p>
<pre><code>&lt;div style="color: yellow !important;"&gt;
 &nbsp; &nbsp;&lt;div style="color: red;"&gt;
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;p style="margin: 2px;"&gt;前端&lt;/p&gt;
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a href="#"&gt;南玖&lt;/a&gt;
 &nbsp; &nbsp;&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115023571-16329868.png" alt="" loading="lazy"></p>
<p>这里虽然<code>important</code>的权重更高，但最终继承的还是最近的属性值。</p>
<h3 id="默认值">默认值</h3>
<p>如果前三步都没能确认属性的值，则会使用默认值。</p>
<p>代码同上，比如还是<code>p</code>标签，我们没有自定义声明它的<code>font-size</code>，用户代理样式表也同样没有声明，它的父级元素同样没有声明，这也就说明对于<code>font-size</code>来说既没有声明值也没有继承值，那它最终渲染是按多大的字号来呈现的呢？</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115035147-1578571507.png" alt="" loading="lazy"></p>
<p>答案就是默认值，谷歌浏览器对于<code>p</code>标签的默认字号为16px。</p>
<h2 id="面试题解答">面试题解答</h2>
<pre><code>&lt;div style="color: red;"&gt;
 &nbsp; &nbsp;&lt;p&gt;前端&lt;/p&gt;
 &nbsp; &nbsp;&lt;a href="#"&gt;南玖&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115052135-944001930.png" alt="" loading="lazy"></p>
<p><code>p</code>标签文字为红色这很好理解，因为继承自父元素的color值。</p>
<p>问题在于为什么<code>a</code>标签没有继承呢？</p>
<p><img src="https://img2024.cnblogs.com/blog/1525717/202504/1525717-20250428115103399-2067109077.png" alt="" loading="lazy"></p>
<p>因为对于<code>a</code>标签来说，虽然没有自定义声明<code>color</code>，但用户代理样式表中有声明<code>color</code>，所以会直接使用用户代理样式表中的<code>color</code>值，而不会使用继承值。</p>

</div>
<div id="MySignature" role="contentinfo">
    <div style="color: blueviolet">
<div>作者：<a href="https://bettersong.github.io/nanjiu/">前端南玖</a></div>
<div>出处：<a href="https://www.cnblogs.com/songyao666/">https://www.cnblogs.com/songyao666/
</a></div>
<div>每日面试题：<a href="https://github.com/bettersong/interview" target="new">Github</a></div>
<p>-------------------------------------------</p>
<p>如果这篇文章有帮助到你，❤️关注+点赞❤️鼓励一下作者，文章公众号首发，关注 前端南玖 第一时间获取最新的文章～</p>
<p>扫描下方二维码关注公众号，回复进群，拉你进前端学习交流群</p>
<div style="display:flex">
<img src="https://blog-static.cnblogs.com/files/songyao666/nanjiu.gif?t=2" alt="逐梦wx" width="380" height="190">
</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.30136052978703703" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-28 11:52">2025-04-28 11:52</span>&nbsp;
<a href="https://www.cnblogs.com/songyao666">前端南玖</a>&nbsp;
阅读(<span id="post_view_count">8</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18851321);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18851321', targetLink: 'https://www.cnblogs.com/songyao666/p/18851321', title: '浏览器如何确定最终的CSS属性值？解析计算优先级与规则' })">举报</a>
</div>
        
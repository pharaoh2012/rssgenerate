
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kazusarua/p/18760206" title="发布于 2025-03-09 02:06">
    <span role="heading" aria-level="2">最简单的方式：如何在wsl2上配置CDUA开发环境</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="step0序言">step0：序言</h1>
<p>这篇文章可以帮助你以一个最为简单的方式迈出CUDA的第一步，从此一入CUDA深似海，从此头发是路人。</p>
<p>前提：你需要在Windows 11上：</p>
<ul>
<li>电脑中有nvidia显卡以及驱动，由于wsl cuda不支持maxwell gpu架构，所以需要10系以上的显卡</li>
<li>安装wsl2，配置ubuntu镜像并确定能够进入。</li>
</ul>
<p>此处使用：</p>
<ul>
<li>操作系统镜像为：ubuntu 22.04.3 LTS</li>
<li>安装cuda版本：12.8.1</li>
</ul>
<p><strong>注意，在wsl上配置cuda与在普通Linux上配置有程序上的不同，务必注意！</strong></p>
<h1 id="step1前期准备">step1：前期准备</h1>
<p>由于此处使用的ubuntu 22.04.x版本，我们需要做一些前期配置</p>
<p>可以从这个链接中查询cuda 12.8.1和操作系统，内核，gcc，glibc版本的对应关系：<a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html" target="_blank" rel="noopener nofollow">https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html</a></p>
<p>理论上来说其他版本也不一定不支持，但是出于少给自己找麻烦的需求，按照官方教程更新版本</p>
<p>确认操作系统和工具链版本：</p>
<pre><code>lsb_release -a # 确认操作系统版本
gcc -v # 确认gcc版本
cmake --version # 确认cmake版本
ldd --version # 确认glibc版本
</code></pre>
<p>安装gcc12.3.0：</p>
<pre><code>sudo apt install gcc-12 g++-12 -y
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-12 100
sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-12 100
gcc --version # 确认gcc版本

</code></pre>
<p>安装cmake（截至本文撰写cmake latest version为3.22.1）：</p>
<pre><code>sudo apt install cmake
cmake --version
</code></pre>
<p>至此，先期工具链已经配置完成。</p>
<h1 id="step2安装cuda-toolkit">step2：安装CUDA toolkit</h1>
<p>CUDA toolkit是开发过程中必备的工具链，本阶段我们需要安装并配置。</p>
<p>参考官方教程：</p>
<ul>
<li><a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=WSL-Ubuntu&amp;target_version=2.0&amp;target_type=deb_local" target="_blank" rel="noopener nofollow">https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=WSL-Ubuntu&amp;target_version=2.0&amp;target_type=deb_local</a></li>
<li><a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html#getting-started-with-cuda-on-wsl" target="_blank" rel="noopener nofollow">https://docs.nvidia.com/cuda/wsl-user-guide/index.html#getting-started-with-cuda-on-wsl</a></li>
</ul>
<p>既有的运行用的CUDA和编译开发用的CUDA toolkit完全是两个东西，不要搞混。</p>
<p>严格按照以下代码执行，顺序不要改变：</p>
<pre><code>sudo apt-key del 7fa2af80
wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/12.8.1/local_installers/cuda-repo-wsl-ubuntu-12-8-local_12.8.1-1_amd64.deb
sudo dpkg -i cuda-repo-wsl-ubuntu-12-8-local_12.8.1-1_amd64.deb
sudo cp /var/cuda-repo-wsl-ubuntu-12-8-local/cuda-*-keyring.gpg /usr/share/keyrings/
sudo apt-get update
sudo apt-get -y install cuda-toolkit-12-8
sudo apt-get install cuda
</code></pre>
<h1 id="step3尝试编译并运行sample项目">step3：尝试编译并运行sample项目</h1>
<p>nvidia官方提供了一个sample项目，用于初学者快速上手CUDA：</p>
<p>执行如下代码，从github中clone并构建</p>
<pre><code>git clone https://github.com/NVIDIA/cuda-samples.git
cd cuda-samples/
mkdir build &amp;&amp; cd build
export PATH=/usr/local/cuda-12.8/bin/:$PATH
cmake ..
</code></pre>
<p>也可以进入某一个具体项目路径下编译并运行，此处以vectorAdd为例：</p>
<pre><code>cd Samples/0_Introduction/vectorAdd
cmake .
make
./vectorAdd
</code></pre>
<p>如果一切顺利，你将会看到如下输出：</p>
<pre><code>~/cuda-samples/Samples/0_Introduction/vectorAdd$ ./vectorAdd 
[Vector addition of 50000 elements]
Copy input data from the host memory to the CUDA device
CUDA kernel launch with 196 blocks of 256 threads
Copy output data from the CUDA device to the host memory
Test PASSED
Done
</code></pre>
<p>至此，已经完成了所有配置，你应该能够在自己的wsl中自由编译并运行CUDA程序了。</p>
<p>下一期我们开始正式进入CUDA的世界，从CUDA kernel开始，压榨GPU的每一寸性能，在这个过程中你会深切感受到算力的强大。</p>
<p>以上，感谢阅读，如果你认为这篇文章有帮助，关注雪豹喵，关注雪豹谢谢喵。</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="1.1712851787222223" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-09 02:06">2025-03-09 02:06</span>&nbsp;
<a href="https://www.cnblogs.com/kazusarua">真昼小天使daisuki</a>&nbsp;
阅读(<span id="post_view_count">84</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18760206" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18760206);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18760206', targetLink: 'https://www.cnblogs.com/kazusarua/p/18760206', title: '最简单的方式：如何在wsl2上配置CDUA开发环境' })">举报</a>
</div>
        
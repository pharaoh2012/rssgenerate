
		<h5 class="posthead">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/glowinghe/p/18778042" title="发布于 2025-03-17 23:52">
    <span role="heading" aria-level="2">dify 1.0.1无法在ollama下新增LLM模型</span>
    

</a>

		</h5>
		<div class="postText">    <div id="cnblogs_post_description" style="display: none">
        
        dify LLM ollama deepseek
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>原来在0.15很正常，升到1.0.0之后就不行 了，再后来1.0.1出来后，以为问题都解决了，没想到还是有问题。</p>
<p>具体是：添加ollama是容易了，但是添加模型（比如deepseek）还是不行。表现为点“保存”后，按钮一直灰色无响应，浏览器并不锁死。看后台进程，在一段时间后（超时）出来红色的错误：</p>
<div class="cnblogs_code">
<pre>……<br>plugin_daemon-1&nbsp; | 2025/03/17 15:13:15 runtime_lifetime.go:76: [ERROR]init environment failed: failed to install dependencies: signal: killed, output: Resolved 38 packages in 2m 15s<br>……</pre>
</div>
<p>以为是dify有问题，或者以前残留的数据有原因，做了一切能做的，包括删除项目，清除存储文件，甚至docker存储的虚拟磁盘都删了，还是不行。</p>
<p>后来参阅一篇文章《【踩坑】pip安装依赖卡在Installing build dependencies ...》，地址：https://blog.csdn.net/m0_51371693/article/details/144268469</p>
<p>有所触动，升级了一下numpy和pip的版本:</p>
<div class="cnblogs_code">
<pre>PS C:\Users\Admin&gt; pip <span style="color: rgba(0, 0, 255, 1)">install</span> numpy -i https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/simple</span>
Looking <span style="color: rgba(0, 0, 255, 1)">in</span> indexes: https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/simple</span>
Requirement already satisfied: numpy <span style="color: rgba(0, 0, 255, 1)">in</span> c:\users\Admin\appdata\local\programs\python\python310\lib\site-packages (<span style="color: rgba(128, 0, 128, 1)">1.24</span>.<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">)

[notice] A new release of pip is available: </span><span style="color: rgba(128, 0, 128, 1)">23.2</span>.<span style="color: rgba(128, 0, 128, 1)">1</span> -&gt; <span style="color: rgba(128, 0, 128, 1)">25.0</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">
[notice] To update, run: python.exe </span>-m pip <span style="color: rgba(0, 0, 255, 1)">install</span> --<span style="color: rgba(0, 0, 0, 1)">upgrade pip
PS C:\Users\Admin</span>&gt; python.exe -m pip <span style="color: rgba(0, 0, 255, 1)">install</span> --<span style="color: rgba(0, 0, 0, 1)">upgrade pip
Looking </span><span style="color: rgba(0, 0, 255, 1)">in</span> indexes: https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/simple</span>
Requirement already satisfied: pip <span style="color: rgba(0, 0, 255, 1)">in</span> c:\users\Admin\appdata\local\programs\python\python310\lib\site-packages (<span style="color: rgba(128, 0, 128, 1)">23.2</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">)
Collecting pip
  Downloading https:</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/packages/c9/bc/b7db44f5f39f9d0494071bddae6880eb645970366d0a200022a1a93d57f5/pip-25.0.1-py3-none-any.whl (1.8 MB)</span>
     ---------------------------------------- <span style="color: rgba(128, 0, 128, 1)">1.8</span>/<span style="color: rgba(128, 0, 128, 1)">1.8</span> MB <span style="color: rgba(128, 0, 128, 1)">4.0</span> MB/s eta <span style="color: rgba(128, 0, 128, 1)">0</span>:<span style="color: rgba(128, 0, 128, 1)">00</span>:<span style="color: rgba(128, 0, 128, 1)">00</span><span style="color: rgba(0, 0, 0, 1)">
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip </span><span style="color: rgba(128, 0, 128, 1)">23.2</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">
    Uninstalling pip</span>-<span style="color: rgba(128, 0, 128, 1)">23.2</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">:
      Successfully uninstalled pip</span>-<span style="color: rgba(128, 0, 128, 1)">23.2</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">
Successfully installed pip</span>-<span style="color: rgba(128, 0, 128, 1)">25.0</span>.<span style="color: rgba(128, 0, 128, 1)">1</span><span style="color: rgba(0, 0, 0, 1)">
PS C:\Users\Admin</span>&gt; pip <span style="color: rgba(0, 0, 255, 1)">install</span> numpy -i https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/simple</span>
Looking <span style="color: rgba(0, 0, 255, 1)">in</span> indexes: https:<span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">pypi.tuna.tsinghua.edu.cn/simple</span>
Requirement already satisfied: numpy <span style="color: rgba(0, 0, 255, 1)">in</span> c:\users\Admin\appdata\local\programs\python\python310\lib\site-packages (<span style="color: rgba(128, 0, 128, 1)">1.24</span>.<span style="color: rgba(128, 0, 128, 1)">2</span><span style="color: rgba(0, 0, 0, 1)">)
PS C:\Users\Admin</span>&gt;</pre>
</div>
<p>再添加LLM模型居然立即成功了。看来是pip版本过低了？我的python版本:</p>
<div class="cnblogs_code">
<pre>PS C:\Users\Admin&gt;<span style="color: rgba(0, 0, 0, 1)"> py
Python </span><span style="color: rgba(128, 0, 128, 1)">3.10</span>.<span style="color: rgba(128, 0, 128, 1)">10</span> (tags/v3.<span style="color: rgba(128, 0, 128, 1)">10.10</span>:aad5f6a, Feb  <span style="color: rgba(128, 0, 128, 1)">7</span> <span style="color: rgba(128, 0, 128, 1)">2023</span>, <span style="color: rgba(128, 0, 128, 1)">17</span>:<span style="color: rgba(128, 0, 128, 1)">20</span>:<span style="color: rgba(128, 0, 128, 1)">36</span>) [MSC v.<span style="color: rgba(128, 0, 128, 1)">1929</span> <span style="color: rgba(128, 0, 128, 1)">64</span><span style="color: rgba(0, 0, 0, 1)"> bit (AMD64)] on win32
Type </span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">help</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">copyright</span><span style="color: rgba(128, 0, 0, 1)">"</span>, <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">credits</span><span style="color: rgba(128, 0, 0, 1)">"</span> or <span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">license</span><span style="color: rgba(128, 0, 0, 1)">"</span> <span style="color: rgba(0, 0, 255, 1)">for</span> <span style="color: rgba(0, 0, 255, 1)">more</span><span style="color: rgba(0, 0, 0, 1)"> information.
</span>&gt;&gt;&gt;</pre>
</div>
<p>是装了好久的，看来是大数据变化太快了。下图是添加deepseek成功的样子：</p>
<p><img src="https://img2024.cnblogs.com/blog/2907695/202503/2907695-20250317234519129-451648623.png" alt="" loading="lazy"></p>
<p>希望给有遇到类似情况的朋友参考。</p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>
</div>
		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.01732407163425926" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-17 23:56">2025-03-17 23:52</span>&nbsp;
<a href="https://www.cnblogs.com/glowinghe">何辉煌</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18778042" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18778042);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18778042', targetLink: 'https://www.cnblogs.com/glowinghe/p/18778042', title: 'dify 1.0.1无法在ollama下新增LLM模型' })">举报</a>

		</p>
	

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Kay-Larry/p/18729044" title="å‘å¸ƒäº 2025-02-21 13:17">
    <span role="heading" aria-level="2">autohue.jsï¼šè®©ä½ çš„å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“ï¼Œç»äº†ï¼</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>å…ˆæ¥çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæ‹¿ä¸€ä¸ªç½‘ç«™ä¸¾ä¾‹</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d77846da42f4496b3fce343a1100180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=SeFDJP9P27MxA%2Fk5bQty8GGsMwo%3D" referrerpolicy="no-referrer">
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¸¸è§çš„ç½‘ç«™ banner å›¾å®¹å™¨ï¼Œå¤§å°ä¸ºä¸º 1910*560 ï¼Œçœ‹èµ·æ¥èƒŒæ™¯å›¾å®Œç¾çš„å……æ»¡äº†å®½åº¦ï¼Œä½†æ˜¯å›¾ç‰‡åŸå§‹å¤§å°æ—¶ï¼Œå´æ˜¯ï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a7921b1792c470287a9d227155ca679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=dTGo5%2FnTfZhgj8lp6mGIsN6Kf6M%3D" referrerpolicy="no-referrer">
<p>å®ƒçš„å®½åº¦åªæœ‰ 1440 ï¼Œä¸” background-size è®¾ç½®çš„æ˜¯ contain ï¼Œå³ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œé‚£ä¹ˆå¯ä»¥æ–­å®šå®ƒä¸¤è¾¹çš„è“è‰²æ˜¯ä¾é èƒŒæ™¯è‰²å¡«å……çš„ã€‚</p>
<p><strong>é‚£ä¹ˆé—®é¢˜æ¥äº†</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ª è½®æ’­ banner ï¼Œå¦‚æœå¸Œæœ›æ·»åŠ ä¸€å¼ ä¸æ˜¯è“è‰²çš„å›¾ç‰‡å‘¢ï¼Ÿéš¾é“è¦ç»™æ¯å¼ å›¾ç‰‡æå‰æ ‡æ³¨å¥½èƒŒæ™¯é¢œè‰²å—ï¼Ÿè¿™æ˜¾ç„¶æ˜¯éå¸¸æ­»æ¿çš„åšæ³•ã€‚</p>
<p>æ‰€ä»¥éœ€è¦ä»å›¾ç‰‡ä¸­æå–åˆ°å›¾ç‰‡çš„ä¸»é¢˜è‰²ï¼Œå½“ç„¶è¿™å¯¹äº js æ¥è¯´ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰ä¼—å¤šçš„å¼€æºåº“ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p>
<h2 id="æ¢ç´¢">æ¢ç´¢</h2>
<p>é¦–å…ˆåœ¨ç½‘ç»œä¸Šæ‰¾åˆ°äº†ä»¥ä¸‹å‡ ä¸ªåº“ï¼š</p>
<ul>
<li><a href="https://github.com/lokesh/color-thief" title="https://github.com/lokesh/color-thief" target="_blank" rel="noopener nofollow">color-thief</a> è¿™æ˜¯ä¸€æ¬¾åŸºäº JavaScript å’Œ Canvas çš„å·¥å…·ï¼Œèƒ½å¤Ÿä»å›¾åƒä¸­æå–ä¸»è¦é¢œè‰²æˆ–ä»£è¡¨æ€§çš„è°ƒè‰²æ¿</li>
<li><a href="https://github.com/jariz/vibrant.js" title="https://github.com/jariz/vibrant.js" target="_blank" rel="noopener nofollow">vibrant.js</a> è¯¥æ’ä»¶æ˜¯ Android æ”¯æŒåº“ä¸­ Palette ç±»çš„ JavaScript ç‰ˆæœ¬ï¼Œå¯ä»¥ä»å›¾åƒä¸­æå–çªå‡ºçš„é¢œè‰²</li>
<li><a href="https://github.com/briangonzalez/rgbaster.js" title="https://github.com/briangonzalez/rgbaster.js" target="_blank" rel="noopener nofollow">rgbaster.js</a> è¿™æ˜¯ä¸€æ®µå°å‹è„šæœ¬ï¼Œå¯ä»¥è·å–å›¾ç‰‡çš„ä¸»è‰²ã€æ¬¡è‰²ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿å®ç°ä¸€äº›ç²¾å½©çš„ Web äº¤äº’æ•ˆæœ</li>
</ul>
<p>æˆ‘å–æœ€è½»é‡åŒ–çš„ rgbaster.js ï¼ˆæ­¤åº“éå¸¸æç¬‘ï¼Œç”¨ TS ç¼–å†™ï¼Œnpm åŒ…å´æ²¡æœ‰æŒ‡å®š types ï¼‰ æ¥æµ‹è¯•åå‘ç°ï¼Œå®ƒç»™æˆ‘åœ¨ä¸€ä¸ªæ¸å˜è‰²å›¾ç‰‡ä¸­ï¼Œè¿”å›äº†ä¸ƒä¸‡å¤šä¸ªè‰²å€¼ï¼Œå½“ç„¶ï¼Œå®ƒå‡†ç¡®çš„æå–å‡ºäº†é¢ç§¯æœ€å¤§çš„è‰²å€¼ï¼Œä½†æ˜¯è¿™ä¸ªè‰²å€¼ä¸æ˜¯å›¾ç‰‡è¾¹ç¼˜çš„é¢œè‰²ï¼Œå¯¼è‡´è®¾ç½®ä¸ºèƒŒæ™¯è‰²åï¼Œå¹¶ä¸èƒ½å®Œç¾çš„èåˆã€‚</p>
<p>å¦å¤–çš„æ’ä»¶å„ä½å¯ä»¥å‚è€ƒè¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li>æ–‡ç«  1ï¼š<a href="https://blog.csdn.net/weixin_42998707/article/details/108011092" title="https://blog.csdn.net/weixin_42998707/article/details/108011092" target="_blank" rel="noopener nofollow">blog.csdn.net/weixin_4299â€¦</a></li>
<li>æ–‡ç«  2ï¼š<a href="https://juejin.cn/post/6844903511956815885" title="https://juejin.cn/post/6844903511956815885" target="_blank" rel="noopener nofollow">juejin.cn/post/684490â€¦</a></li>
<li>æ–‡ç«  3ï¼š<a href="https://www.zhangxinxu.com/wordpress/2014/08/image-dominant-color-get-rgbaster-js" title="https://www.zhangxinxu.com/wordpress/2014/08/image-dominant-color-get-rgbaster-js" target="_blank" rel="noopener nofollow">www.zhangxinxu.com/wordpress/2â€¦</a></li>
</ul>
<p>å¯ä»¥å‘ç°ï¼Œè¿™äº›æ’ä»¶ä¸»è¦åŠŸèƒ½å°±æ˜¯å–è‰²ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œå¯¹äºä¸€ä¸ªå›¾ç‰‡é¢œè‰²åˆ†æå·¥å…·æ¥è¯´ï¼Œä»–ä»¬åšçš„å¾ˆåˆ°ä½ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œä»–ä»¬å¾€å¾€æ˜¯ä¸é€‚ç”¨çš„ã€‚</p>
<p>åœ¨æ–‡ç«  2 ä¸­ï¼Œä½œè€…å¯¹æ¯”äº†ä¸‰æ¬¾æ’ä»¶å¯¹äºå›¾ç‰‡å®¹å™¨èƒŒæ™¯è‰²çš„åº”ç”¨ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯ rgbaster æ•ˆæœå¥½ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬åˆšåˆšä¹Ÿæ‹¿ä»–è¯•äº†ï¼Œå®ƒå¹¶ä¸èƒ½é€‚ç”¨äºé¢œè‰²å¤æ‚åº¦é«˜çš„ã€æ¸å˜è‰²çš„å›¾ç‰‡ã€‚</p>
<h2 id="æ€è€ƒ">æ€è€ƒ</h2>
<p>æ—¢ç„¶åˆåˆåˆæ²¡æœ‰äººåšè¿™ä»¶äº‹ï¼Œæ­£æ‰€è°“æˆ‘ä¸å…¥åœ°ç‹±è°å…¥åœ°ç‹±ï¼Œæˆ‘æ‰‹å†™ä¸€ä¸ª</p>
<p>æ•´ç†ä¸€ä¸‹éœ€æ±‚ï¼Œæˆ‘å‘ç°æˆ‘å¸Œæœ›å¾—åˆ°çš„æ˜¯ï¼š</p>
<ol>
<li>å›¾ç‰‡çš„ä¸»é¢˜è‰²ï¼ˆé¢ç§¯å æ¯”æœ€å¤§ï¼‰</li>
<li>æ¬¡ä¸»é¢˜è‰²ï¼ˆé¢ç§¯å æ¯”ç¬¬äºŒå¤§ï¼‰</li>
<li>åˆé€‚çš„èƒŒæ™¯è‰²ï¼ˆå³å›¾ç‰‡è¾¹ç¼˜é¢œè‰²ï¼Œæ¸å˜æ—¶ï¼Œéœ€è¦è¾¹ç¼˜é¢œè‰²æ¥è®¾ç½®èƒŒæ™¯è‰²ï¼‰</li>
</ol>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±å·²ç»å¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†éœ€æ±‚äº†ï¼Œ1+2 å¯ä»¥ç”Ÿæˆç›¸å…³çš„ ä¸»é¢˜ TAG ã€ä¸»é¢˜èƒŒæ™¯ï¼Œ3 å¯ä»¥ä½¿ç•™ç™½çš„å›¾ç‰‡å®¹å™¨å®Œç¾èåˆã€‚</p>
<h2 id="å¼€æ">å¼€æ</h2>
<p><strong>âš âš  æœ¬å°èŠ‚å†…å®¹éå¸¸ç¡¬æ ¸ï¼Œå¦‚æœä¸æƒ³æ·±ç©¶åŸç†å¯ä»¥ç›´æ¥<a href="#heading-6" title="#heading-6" rel="noopener nofollow">è·³è¿‡</a>ï¼Œæ–‡ç« æœ«å°¾æœ‰ç”¨æ³•å’Œæ•ˆæœå›¾ âš âš </strong></p>
<h3 id="æ€è·¯">æ€è·¯</h3>
<p>é¦–å…ˆéœ€è¦é¿å…ä¸Šé¢æåˆ°çš„æ’ä»¶çš„ç¼ºç‚¹ï¼Œå³å¯¹æ¸å˜å›¾ç‰‡è¦åšå¥½å¤„ç†ï¼Œä¸èƒ½å–å‡ºæˆåƒä¸Šä¸‡çš„é¢œè‰²ï¼Œä½“éªŒå¤ªå·®ä¸”å®ç”¨æ€§ä¸å¼ºï¼Œå¯¹äºæ¸å˜è‰²è¿˜æœ‰ä¸€ç‚¹ï¼Œå³åœ¨æ¸å˜è·¯å¾„ä¸Šï¼Œæ¯ä¸€ç‚¹çš„é¢œè‰²éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦å°†ä»–ä»¬ä»¥ä¸€ä¸ªé˜ˆå€¼åˆ†ç±»ï¼ŒæŒ‘é€‰å‡ºä¸€ä¼—ç›¸è¿‘è‰²ï¼Œå¹¶è®¡ç®—å‡ºä¸€ä¸ªå¹³å‡è‰²ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¼è‡´ä¸»é¢˜è‰²å¤ªç²¾å‡†è¿›è€Œæ²¡æœ‰ä»£è¡¨æ€§ã€‚</p>
<p>å¯¹äºèƒŒæ™¯è‰²ï¼Œéœ€è¦æŒ‰æƒ…å†µåˆ†æï¼Œå¦‚æœåªæ˜¯å¸Œæœ›åšä¸€ä¸ªåè°ƒçš„é¡µé¢ï¼Œé‚£ä¹ˆå¤§å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸»é¢˜è‰²åšæ¸å˜è¿‡æ¸¡æˆ–è’™å±‚ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºè¿™ç§æ•ˆæœ</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13ad6e69b69b4e208bd0dd20c5089ad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=aOBwn9e8CqsU5wyFVa3UOg735G0%3D" referrerpolicy="no-referrer">
<p>ä½†æ˜¯å¦‚æœå¸Œæœ›èƒŒæ™¯ä¸å›¾ç‰‡å®Œç¾è¡”æ¥ï¼Œè®©äººçœ‹ä¸å‡ºå›¾ç‰‡è¾¹ç•Œçš„æ„Ÿè§‰ï¼Œå°±éœ€è¦å•ç‹¬å¯¹è¾¹ç¼˜é¢œè‰²å–è‰²äº†ã€‚</p>
<p>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå›¾ç‰‡åˆ†è¾¨ç‡è¿‡å¤§ï¼Œåœ¨éå†åƒç´ ç‚¹æ—¶ä¼šéå¸¸æ¶ˆè€—æ€§èƒ½ï¼Œæ‰€ä»¥éœ€è¦é™ä½é‡‡æ ·ç‡ï¼Œè™½ç„¶ä¼šå¯¼è‡´ä¸€äº›ç²¾åº¦ä¸Šçš„ä¸¢å¤±ï¼Œä½†æ˜¯è°ƒæ•´ä¸ºä¸€ä¸ªåˆé€‚çš„å€¼ååº”è¯¥åŸºæœ¬å¯ç”¨ã€‚</p>
<p>å‰©ä½™çš„ç»†èŠ‚é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ä¸‹é¢çš„ä»£ç ä¸­è§£é‡Š</p>
<h3 id="ä½¿ç”¨-javescript-ç¼–ç ">ä½¿ç”¨ JaveScript ç¼–ç </h3>
<p>æ¥ä¸‹æ¥æˆ‘å°†è¯¦ç»†æè¿° autohue.js çš„å®ç°è¿‡ç¨‹ï¼Œç”±äºæœ¬äººå¯¹<code>è‰²å½©ç§‘å­¦</code>ä¸ç”šäº†è§£ï¼Œå¦‚æœ‰è§£é‡Šä¸åˆ°ä½æˆ–é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡ºã€‚</p>
<p>é¦–å…ˆç¼–å†™ä¸€ä¸ªå…¥å£ä¸»å‡½æ•°ï¼Œæˆ‘ç›®å‰è€ƒè™‘åˆ°çš„å‚æ•°åº”è¯¥æœ‰ï¼š</p>
<pre><code class="language-ts">export default async function colorPicker(imageSource: HTMLImageElement | string, options?: autoColorPickerOptions)
type thresholdObj = { primary?: number; left?: number; right?: number; top?: number; bottom?: number }
interface autoColorPickerOptions {
/**
* - é™é‡‡æ ·åçš„æœ€å¤§å°ºå¯¸ï¼ˆé»˜è®¤ 100px ï¼‰
* - é™é‡‡æ ·åçš„å›¾ç‰‡å°ºå¯¸ä¸ä¼šè¶…è¿‡è¯¥å€¼ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´
* - é™é‡‡æ ·åçš„å›¾ç‰‡å°ºå¯¸è¶Šå°ï¼Œå¤„ç†é€Ÿåº¦è¶Šå¿«ï¼Œä½†å¯èƒ½ä¼šå½±å“é¢œè‰²æå–çš„å‡†ç¡®æ€§
**/
maxSize?: number
/**
* - Lab è·ç¦»é˜ˆå€¼ï¼ˆé»˜è®¤ 10 ï¼‰
* - ä½äºæ­¤å€¼çš„é¢œè‰²å½’ä¸ºåŒä¸€ç°‡ï¼Œå»ºè®® 8~12
* - å€¼è¶Šå¤§ï¼Œé¢œè‰²è¶Šå®¹æ˜“è¢«åˆå¹¶ï¼Œæå–çš„é¢œè‰²è¶Šå°‘
* - å€¼è¶Šå°ï¼Œé¢œè‰²è¶Šå®¹æ˜“è¢«åŒºåˆ†ï¼Œæå–çš„é¢œè‰²è¶Šå¤š
**/
threshold?: number | thresholdObj
}
</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Š Lab ï¼Œå…¨ç§°ï¼š<code>CIE L*a*b</code> ï¼Œ<code>CIE L*a*b*</code> æ˜¯<code>CIE XYZ</code>è‰²å½©æ¨¡å¼çš„æ”¹è¿›å‹ã€‚å®ƒçš„â€œLâ€ï¼ˆæ˜äº®åº¦ï¼‰ï¼Œâ€œaâ€ï¼ˆç»¿è‰²åˆ°çº¢è‰²ï¼‰å’Œâ€œbâ€ï¼ˆè“è‰²åˆ°é»„è‰²ï¼‰ä»£è¡¨è®¸å¤šçš„å€¼ã€‚ä¸ XYZ æ¯”è¾ƒï¼Œ<code>CIE L*a*b*</code>çš„è‰²å½©æ›´é€‚åˆäºäººçœ¼æ„Ÿè§‰çš„è‰²å½©ï¼Œæ­£æ‰€è°“<code>æ„ŸçŸ¥å‡åŒ€</code></p>
</blockquote>
<p>ç„¶åéœ€è¦å®ç°ä¸€ä¸ªæ­£å¸¸çš„ loadImg æ–¹æ³•ï¼Œä½¿ç”¨ canvas å¼‚æ­¥åŠ è½½å›¾ç‰‡</p>
<pre><code class="language-ts">function loadImage(imageSource: HTMLImageElement | string): Promise&lt;HTMLImageElement&gt; {
return new Promise((resolve, reject) =&gt; {
let img: HTMLImageElement
if (typeof imageSource === 'string') {
img = new Image()
img.crossOrigin = 'Anonymous'
img.src = imageSource
} else {
img = imageSource
}
if (img.complete) {
resolve(img)
} else {
img.onload = () =&gt; resolve(img)
img.onerror = (err) =&gt; reject(err)
}
})
}
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±è·å–åˆ°äº†å›¾ç‰‡å¯¹è±¡ã€‚</p>
<p>ç„¶åä¸ºäº†å›¾ç‰‡è¿‡å¤§ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œé™é‡‡æ ·å¤„ç†</p>
<pre><code class="language-ts">// åˆ©ç”¨ Canvas å¯¹å›¾ç‰‡è¿›è¡Œé™é‡‡æ ·ï¼Œè¿”å› ImageData å¯¹è±¡
function getImageDataFromImage(img: HTMLImageElement, maxSize: number = 100): ImageData {
const canvas = document.createElement('canvas')
let width = img.naturalWidth
let height = img.naturalHeight
if (width &gt; maxSize || height &gt; maxSize) {
const scale = Math.min(maxSize / width, maxSize / height)
width = Math.floor(width * scale)
height = Math.floor(height * scale)
}
canvas.width = width
canvas.height = height
const ctx = canvas.getContext('2d')
if (!ctx) {
throw new Error('æ— æ³•è·å– Canvas ä¸Šä¸‹æ–‡')
}
ctx.drawImage(img, 0, 0, width, height)
return ctx.getImageData(0, 0, width, height)
}

</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œé™é‡‡æ ·ï¼šé™é‡‡æ ·ï¼ˆ Downsampling ï¼‰æ˜¯æŒ‡åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œé€šè¿‡å‡å°‘æ•°æ®çš„é‡‡æ ·ç‡æˆ–åˆ†è¾¨ç‡æ¥é™ä½æ•°æ®é‡çš„è¿‡ç¨‹ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨ä¿æŒåŸå§‹ä¿¡æ¯å¤§è‡´ç‰¹å¾çš„æƒ…å†µä¸‹ï¼Œå‡å°‘æ•°æ®çš„å¤æ‚åº¦å’Œå­˜å‚¨éœ€æ±‚ã€‚è¿™é‡Œç®€å•ç†è§£ä¸ºå°†å›¾ç‰‡å¼ºåˆ¶å‹ç¼©ä¸º 100*100 ä»¥å†…ï¼Œä¹Ÿæ˜¯ canvas å‹ç¼©å›¾ç‰‡çš„å¸¸è§åšæ³•ã€‚</p>
</blockquote>
<p>å¾—åˆ°å›¾åƒä¿¡æ¯åï¼Œå°±å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåƒç´ éå†å¤„ç†äº†ï¼Œæ­£å¦‚æ€è€ƒä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç›¸è¿‘è‰²æå–å¹¶å–å¹³å‡è‰²ï¼Œå¹¶æœ€ç»ˆè·å–åˆ°ä¸»é¢˜è‰²ã€æ¬¡ä¸»é¢˜è‰²ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ‰ç®—ç›¸è¿‘è‰²ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œåœ¨ å¸¸è§„çš„ rgb ä¸­ç›´æ¥è®¡ç®—æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸€ä¸ªæ„ŸçŸ¥å‡åŒ€çš„é—®é¢˜</p>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œæ„ŸçŸ¥å‡åŒ€ï¼šXYZ ç³»ç»Ÿå’Œåœ¨å®ƒçš„è‰²åº¦å›¾ä¸Šè¡¨ç¤ºçš„ä¸¤ç§é¢œè‰²ä¹‹é—´çš„è·ç¦»ä¸é¢œè‰²è§‚å¯Ÿè€…æ„ŸçŸ¥çš„å˜åŒ–ä¸ä¸€è‡´ï¼Œè¿™ä¸ªé—®é¢˜å«åšæ„ŸçŸ¥å‡åŒ€æ€§(perceptual uniformity)é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯é¢œè‰²ä¹‹é—´æ•°å­—ä¸Šçš„å·®åˆ«ä¸è§†è§‰æ„ŸçŸ¥ä¸ä¸€è‡´ã€‚ç”±äºæˆ‘ä»¬éœ€è¦åœ¨é¢œè‰²ç°‡ä¸­è®¡ç®—å‡ºå¹³å‡è‰²ï¼Œé‚£ä¹ˆå¯¹äºäººçœ¼æ¥è¯´å“ªäº›é¢œè‰²æ˜¯ç›¸è¿‘çš„ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ sRGB è½¬åŒ–ä¸º Lab è‰²å½©ç©ºé—´ï¼ˆæ„ŸçŸ¥å‡åŒ€çš„ï¼‰ï¼Œå†è®¡ç®—å…¶æ¬§æ°è·ç¦»ï¼Œåœ¨æŸä¸€é˜ˆå€¼å†…çš„é¢œè‰²ï¼Œå³å¯è®¤ä¸ºæ˜¯ç›¸è¿‘è‰²ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦å°† rgb è½¬åŒ–ä¸º Lab è‰²å½©ç©ºé—´</p>
<pre><code class="language-ts">// å°† sRGB è½¬æ¢ä¸º Lab è‰²å½©ç©ºé—´
function rgbToLab(r: number, g: number, b: number): [number, number, number] {
let R = r / 255,
G = g / 255,
B = b / 255
R = R &gt; 0.04045 ? Math.pow((R + 0.055) / 1.055, 2.4) : R / 12.92
G = G &gt; 0.04045 ? Math.pow((G + 0.055) / 1.055, 2.4) : G / 12.92
B = B &gt; 0.04045 ? Math.pow((B + 0.055) / 1.055, 2.4) : B / 12.92

let X = R * 0.4124 + G * 0.3576 + B * 0.1805
let Y = R * 0.2126 + G * 0.7152 + B * 0.0722
let Z = R * 0.0193 + G * 0.1192 + B * 0.9505

X = X / 0.95047
Y = Y / 1.0
Z = Z / 1.08883

const f = (t: number) =&gt; (t &gt; 0.008856 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116)
const fx = f(X)
const fy = f(Y)
const fz = f(Z)
const L = 116 * fy - 16
const a = 500 * (fx - fy)
const bVal = 200 * (fy - fz)
return [L, a, bVal]
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°ä½¿ç”¨äº†çœ‹èµ·æ¥å¾ˆå¤æ‚çš„ç®—æ³•ï¼Œä¸å¿…æ·±ç©¶ï¼Œè¿™æ˜¯å®ƒçš„å¤§æ¦‚è§£é‡Šï¼š</p>
<ol>
<li>
<p>è·å–åˆ° rgb å‚æ•°</p>
</li>
<li>
<p>è½¬åŒ–ä¸ºçº¿æ€§ rgb ï¼ˆç§»é™¤ gamma çŸ«æ­£ï¼‰ï¼Œå¸¸é‡ <strong>0.04045</strong> æ˜¯ sRGB ï¼ˆæ ‡å‡† TGB ï¼‰é¢œè‰²ç©ºé—´ä¸­çš„ä¸€ä¸ªé˜ˆå€¼ï¼Œç”¨äºåŒºåˆ†éçº¿æ€§å’Œçº¿æ€§çš„ sRGB å€¼ï¼Œå…·ä½“æ¥è¯´ï¼Œå½“ sRGB é¢œè‰²åˆ†é‡å¤§äº 0.04045 æ—¶ï¼Œéœ€è¦é€šè¿‡ gamma æ ¡æ­£ï¼ˆå³é‡‡ç”¨ <code>((R + 0.055) / 1.055) ^ 2.4</code>ï¼‰æ¥å¾—åˆ°çº¿æ€§ RGB ï¼›å¦‚æœå°äºç­‰äº 0.04045 ï¼Œåˆ™ç›´æ¥è¿›è¡Œçº¿æ€§è½¬æ¢ï¼ˆå³ <code>R / 12.92</code>ï¼‰</p>
</li>
<li>
<p>çº¿æ€§ RGB åˆ° XYZ ç©ºé—´çš„è½¬æ¢ï¼Œè½¬æ¢å…¬å¼å¦‚ä¸‹ï¼š</p>
</li>
</ol>
<ul>
<li><code>X = R * 0.4124 + G * 0.3576 + B * 0.1805</code></li>
<li><code>Y = R * 0.2126 + G * 0.7152 + B * 0.0722</code></li>
<li><code>Z = R * 0.0193 + G * 0.1192 + B * 0.9505</code></li>
</ul>
<ol start="4">
<li>
<p>å½’ä¸€åŒ– XYZ å€¼ï¼Œä¸ºäº†å‚è€ƒç™½ç‚¹ï¼ˆ D65 ï¼‰ï¼Œæ ‡å‡†ç™½ç‚¹çš„ XYZ å€¼æ˜¯ <code>(0.95047, 1.0, 1.08883)</code>ã€‚æ‰€ä»¥éœ€è¦é€šè¿‡é™¤ä»¥è¿™äº›å¸¸æ•°æ¥è¿›è¡Œå½’ä¸€åŒ–</p>
</li>
<li>
<p>XYZ åˆ° Lab çš„è½¬æ¢ï¼Œå…¬å¼å‡½æ•°ï¼šconst f = (t: number) =&gt; (t &gt; 0.008856 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116)</p>
</li>
<li>
<p>è®¡ç®— L, a, b åˆ†é‡</p>
</li>
</ol>
<p><strong>L</strong>ï¼šäº®åº¦åˆ†é‡ï¼ˆè¡¨ç¤ºé¢œè‰²çš„æ˜æš—ç¨‹åº¦ï¼‰</p>
<ul>
<li><code>L = 116 * fy - 16</code></li>
</ul>
<p><strong>a</strong>ï¼šç»¿è‰²åˆ°çº¢è‰²çš„è‰²å·®åˆ†é‡</p>
<ul>
<li><code>a = 500 * (fx - fy)</code></li>
</ul>
<p><strong>b</strong>ï¼šè“è‰²åˆ°é»„è‰²çš„è‰²å·®åˆ†é‡</p>
<ul>
<li><code>b = 200 * (fy - fz)</code></li>
</ul>
<p>æ¥ä¸‹æ¥å®ç°èšç±»ç®—æ³•</p>
<pre><code class="language-ts">/**
* å¯¹æ»¡è¶³æ¡ä»¶çš„åƒç´ è¿›è¡Œèšç±»
* @param imageData å›¾ç‰‡åƒç´ æ•°æ®
* @param condition åˆ¤æ–­åƒç´ æ˜¯å¦å±äºæŒ‡å®šåŒºåŸŸçš„æ¡ä»¶å‡½æ•°ï¼ˆå‚æ•° x, y ï¼‰
* @param threshold Lab è·ç¦»é˜ˆå€¼ï¼Œä½äºæ­¤å€¼çš„é¢œè‰²å½’ä¸ºåŒä¸€ç°‡ï¼Œå»ºè®® 8~12
*/
function clusterPixelsByCondition(imageData: ImageData, condition: (x: number, y: number) =&gt; boolean, threshold: number = 10): Cluster[] {
const clusters: Cluster[] = []
const data = imageData.data
const width = imageData.width
const height = imageData.height
for (let y = 0; y &lt; height; y++) {
for (let x = 0; x &lt; width; x++) {
if (!condition(x, y)) continue
const index = (y * width + x) * 4
if (data[index + 3] === 0) continue // å¿½ç•¥é€æ˜åƒç´ 
const r = data[index]
const g = data[index + 1]
const b = data[index + 2]
const lab = rgbToLab(r, g, b)
let added = false
for (const cluster of clusters) {
const d = labDistance(lab, cluster.averageLab)
if (d &lt; threshold) {
cluster.count++
cluster.sumRgb[0] += r
cluster.sumRgb[1] += g
cluster.sumRgb[2] += b
cluster.sumLab[0] += lab[0]
cluster.sumLab[1] += lab[1]
cluster.sumLab[2] += lab[2]
cluster.averageRgb = [cluster.sumRgb[0] / cluster.count, cluster.sumRgb[1] / cluster.count, cluster.sumRgb[2] / cluster.count]
cluster.averageLab = [cluster.sumLab[0] / cluster.count, cluster.sumLab[1] / cluster.count, cluster.sumLab[2] / cluster.count]
added = true
break
}
}
if (!added) {
clusters.push({
count: 1,
sumRgb: [r, g, b],
sumLab: [lab[0], lab[1], lab[2]],
averageRgb: [r, g, b],
averageLab: [lab[0], lab[1], lab[2]]
})
}
}
}
return clusters
}
</code></pre>
<p>å‡½æ•°å†…éƒ¨æœ‰ä¸€ä¸ª labDistance çš„è°ƒç”¨ï¼ŒlabDistance æ˜¯è®¡ç®— Lab é¢œè‰²ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»çš„</p>
<pre><code class="language-ts">// è®¡ç®— Lab ç©ºé—´çš„æ¬§æ°è·ç¦»
function labDistance(lab1: [number, number, number], lab2: [number, number, number]): number {
const dL = lab1[0] - lab2[0]
const da = lab1[1] - lab2[1]
const db = lab1[2] - lab2[2]
return Math.sqrt(dL * dL + da * da + db * db)
}
</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œæ¬§æ°è·ç¦»ï¼šEuclidean Distance ï¼Œæ˜¯ä¸€ç§åœ¨å¤šç»´ç©ºé—´ä¸­æµ‹é‡ä¸¤ä¸ªç‚¹ä¹‹é—´â€œç›´çº¿â€è·ç¦»çš„æ–¹æ³•ã€‚è¿™ç§è·ç¦»çš„è®¡ç®—åŸºäºæ¬§å‡ é‡Œå¾—å‡ ä½•ä¸­ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å…¬å¼ï¼Œé€šè¿‡è®¡ç®—ä¸¤ç‚¹åœ¨å„ä¸ªç»´åº¦ä¸Šçš„å·®çš„å¹³æ–¹å’Œï¼Œç„¶åå–å¹³æ–¹æ ¹å¾—åˆ°ã€‚æ¬§æ°è·ç¦»æ˜¯æŒ‡ n ç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„çœŸå®è·ç¦»ï¼Œæˆ–è€…å‘é‡çš„è‡ªç„¶é•¿åº¦ï¼ˆå³è¯¥ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼‰ã€‚</p>
</blockquote>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªå‡½æ•°é‡‡ç”¨äº†ç±»ä¼¼ K-means çš„èšç±»æ–¹å¼ï¼Œå°†å°äºç”¨æˆ·ä¼ å…¥é˜ˆå€¼çš„é¢œè‰²å½’ä¸ºä¸€ç°‡ï¼Œå¹¶å–å¹³å‡è‰²(ä½¿ç”¨ Lab å€¼)ã€‚</p>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œèšç±»ç®—æ³•ï¼šClustering Algorithm æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå…¶ç›®çš„æ˜¯å°†æ•°æ®é›†ä¸­çš„å…ƒç´ åˆ†æˆä¸åŒçš„ç»„ï¼ˆç°‡ï¼‰ï¼Œä½¿å¾—åŒä¸€ç»„å†…çš„å…ƒç´ ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œè€Œä¸åŒç»„ä¹‹é—´çš„å…ƒç´ ç›¸ä¼¼åº¦è¾ƒä½ã€‚è¿™é‡Œæ˜¯å°†ç›¸è¿‘è‰²å½’ä¸ºä¸€ç°‡ã€‚</p>
</blockquote>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œé¢œè‰²ç°‡ï¼šç°‡æ˜¯èšç±»ç®—æ³•ä¸­ä¸€ä¸ªå¸¸è§çš„æ¦‚å¿µï¼Œå¯ä»¥å¤§è‡´ç†è§£ä¸º "ä¸€ç±»"</p>
</blockquote>
<p>å¾—åˆ°äº†é¢œè‰²ç°‡é›†åˆåï¼Œå°±å¯ä»¥æŒ‰ç…§ count å¤§å°æ¥åˆ¤æ–­å“ªä¸ªæ˜¯ä¸»é¢˜è‰²äº†</p>
<pre><code class="language-ts">// å¯¹å…¨å›¾æ‰€æœ‰åƒç´ è¿›è¡Œèšç±»
let clusters = clusterPixelsByCondition(imageData, () =&gt; true, threshold.primary)
clusters.sort((a, b) =&gt; b.count - a.count)
const primaryCluster = clusters[0]
const secondaryCluster = clusters.length &gt; 1 ? clusters[1] : clusters[0]
const primaryColor = rgbToHex(primaryCluster.averageRgb)
const secondaryColor = rgbToHex(secondaryCluster.averageRgb)
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»è·å–åˆ°äº†ä¸»é¢˜è‰²ã€æ¬¡ä¸»é¢˜è‰² ğŸ‰ğŸ‰ğŸ‰</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­è®¡ç®—è¾¹ç¼˜é¢œè‰²</p>
<p>æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œåªæ˜¯æŠŠé˜ˆå€¼è®¾å°ä¸€ç‚¹ï¼Œæˆ‘è¿™é‡Œç›´æ¥è®¾ç½®ä¸º 1 ï¼ˆ threshold.top ç­‰éƒ½æ˜¯ 1 ï¼‰</p>
<pre><code class="language-ts">// åˆ†åˆ«å¯¹ä¸Šã€å³ã€ä¸‹ã€å·¦è¾¹ç¼˜è¿›è¡Œèšç±»
const topClusters = clusterPixelsByCondition(imageData, (_x, y) =&gt; y &lt; margin, threshold.top)
topClusters.sort((a, b) =&gt; b.count - a.count)
const topColor = topClusters.length &gt; 0 ? rgbToHex(topClusters[0].averageRgb) : primaryColor

const bottomClusters = clusterPixelsByCondition(imageData, (_x, y) =&gt; y &gt;= height - margin, threshold.bottom)
bottomClusters.sort((a, b) =&gt; b.count - a.count)
const bottomColor = bottomClusters.length &gt; 0 ? rgbToHex(bottomClusters[0].averageRgb) : primaryColor

const leftClusters = clusterPixelsByCondition(imageData, (x, _y) =&gt; x &lt; margin, threshold.left)
leftClusters.sort((a, b) =&gt; b.count - a.count)
const leftColor = leftClusters.length &gt; 0 ? rgbToHex(leftClusters[0].averageRgb) : primaryColor

const rightClusters = clusterPixelsByCondition(imageData, (x, _y) =&gt; x &gt;= width - margin, threshold.right)
rightClusters.sort((a, b) =&gt; b.count - a.count)
const rightColor = rightClusters.length &gt; 0 ? rgbToHex(rightClusters[0].averageRgb) : primaryColor
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±è·å–åˆ°äº†ä¸Šä¸‹å·¦å³å››æ¡è¾¹çš„é¢œè‰² ğŸ‰ğŸ‰ğŸ‰</p>
<p>è¿™æ ·å¤§è‡´çš„å·¥ä½œå°±å®Œæˆäº†ï¼Œæœ€åæˆ‘ä»¬å°†éœ€è¦çš„å±æ€§å¯¼å‡ºç»™ç”¨æˆ·ï¼Œæˆ‘ä»¬çš„ä¸»å‡½æ•°æœ€ç»ˆé•¿è¿™æ ·ï¼š</p>
<pre><code class="language-ts">/**
* ä¸»å‡½æ•°ï¼šæ ¹æ®å›¾ç‰‡è‡ªåŠ¨æå–é¢œè‰²
* @param imageSource å›¾ç‰‡ URL æˆ– HTMLImageElement
* @returns è¿”å›åŒ…å«ä¸»è¦é¢œè‰²ã€æ¬¡è¦é¢œè‰²å’ŒèƒŒæ™¯è‰²å¯¹è±¡ï¼ˆä¸Šã€å³ã€ä¸‹ã€å·¦ï¼‰çš„ç»“æœ
*/
export default async function colorPicker(imageSource: HTMLImageElement | string, options?: autoColorPickerOptions): Promise&lt;AutoHueResult&gt; {
const { maxSize, threshold } = __handleAutoHueOptions(options)
const img = await loadImage(imageSource)
// é™é‡‡æ ·ï¼ˆæœ€å¤§å°ºå¯¸ 100px ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰
const imageData = getImageDataFromImage(img, maxSize)

// å¯¹å…¨å›¾æ‰€æœ‰åƒç´ è¿›è¡Œèšç±»
let clusters = clusterPixelsByCondition(imageData, () =&gt; true, threshold.primary)
clusters.sort((a, b) =&gt; b.count - a.count)
const primaryCluster = clusters[0]
const secondaryCluster = clusters.length &gt; 1 ? clusters[1] : clusters[0]
const primaryColor = rgbToHex(primaryCluster.averageRgb)
const secondaryColor = rgbToHex(secondaryCluster.averageRgb)

// å®šä¹‰è¾¹ç¼˜å®½åº¦ï¼ˆå•ä½åƒç´ ï¼‰
const margin = 10
const width = imageData.width
const height = imageData.height

// åˆ†åˆ«å¯¹ä¸Šã€å³ã€ä¸‹ã€å·¦è¾¹ç¼˜è¿›è¡Œèšç±»
const topClusters = clusterPixelsByCondition(imageData, (_x, y) =&gt; y &lt; margin, threshold.top)
topClusters.sort((a, b) =&gt; b.count - a.count)
const topColor = topClusters.length &gt; 0 ? rgbToHex(topClusters[0].averageRgb) : primaryColor

const bottomClusters = clusterPixelsByCondition(imageData, (_x, y) =&gt; y &gt;= height - margin, threshold.bottom)
bottomClusters.sort((a, b) =&gt; b.count - a.count)
const bottomColor = bottomClusters.length &gt; 0 ? rgbToHex(bottomClusters[0].averageRgb) : primaryColor

const leftClusters = clusterPixelsByCondition(imageData, (x, _y) =&gt; x &lt; margin, threshold.left)
leftClusters.sort((a, b) =&gt; b.count - a.count)
const leftColor = leftClusters.length &gt; 0 ? rgbToHex(leftClusters[0].averageRgb) : primaryColor

const rightClusters = clusterPixelsByCondition(imageData, (x, _y) =&gt; x &gt;= width - margin, threshold.right)
rightClusters.sort((a, b) =&gt; b.count - a.count)
const rightColor = rightClusters.length &gt; 0 ? rgbToHex(rightClusters[0].averageRgb) : primaryColor

return {
primaryColor,
secondaryColor,
backgroundColor: {
top: topColor,
right: rightColor,
bottom: bottomColor,
left: leftColor
}
}
}

</code></pre>
<p>è¿˜è®°å¾—æœ¬å°èŠ‚ä¸€å¼€å§‹æåˆ°çš„å‚æ•°å—ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ maxSize ï¼ˆå‹ç¼©å¤§å°ï¼Œç”¨äºé™é‡‡æ ·ï¼‰ã€threshold ï¼ˆé˜ˆå€¼ï¼Œç”¨äºè®¾ç½®ç°‡å¤§å°ï¼‰</p>
<p>ä¸ºäº†ç”¨æˆ·å‹å¥½ï¼Œæˆ‘è¿˜ç¼–å†™äº† threshold å‚æ•°çš„å¯é€‰ç±»å‹ï¼šnumber | thresholdObj</p>
<pre><code class="language-ts">type thresholdObj = { primary?: number; left?: number; right?: number; top?: number; bottom?: number }
</code></pre>
<p>å¯ä»¥å•ç‹¬è®¾ç½®ä¸»é˜ˆå€¼ã€ä¸Šä¸‹å·¦å³å››è¾¹é˜ˆå€¼ï¼Œä»¥é€‚åº”æ›´ä¸ªæ€§åŒ–çš„æƒ…å†µã€‚</p>
<h2 id="autohuejs-è¯ç”Ÿäº†">autohue.js è¯ç”Ÿäº†</h2>
<p>åå­—çš„ç”±æ¥ï¼šç§‰æ‰¿ä¸€è´¯å‘½åä¹ æƒ¯ï¼Œauto å®¶æ—æˆå‘˜åˆå¤šä¸€ä¸ªï¼Œä¸é¢œè‰²æœ‰å…³çš„å•è¯æœ‰å¥½å¤šä¸ªï¼Œæˆ‘å–äº†æœ€çŸ­æœ€å¥½è®°çš„ä¸€ä¸ª hue(è‰²ç›¸)ï¼Œä¹Ÿæ¯”è¾ƒå¥‘åˆæ’ä»¶ç”¨é€”ã€‚</p>
<p>æ­¤æ’ä»¶å·²åœ¨ github å¼€æºï¼š<strong><a href="https://github.com/Auto-Plugin/autohue.js" title="https://github.com/Auto-Plugin/autohue.js" target="_blank" rel="noopener nofollow">GitHub autohue.js</a></strong></p>
<p>npm ä¸»é¡µï¼š<strong><a href="https://www.npmjs.com/package/autohue.js" title="https://www.npmjs.com/package/autohue.js" target="_blank" rel="noopener nofollow">NPM autohue.js</a></strong></p>
<p>åœ¨çº¿ä½“éªŒï¼š<a href="https://auto-plugin.github.io/index/autohue.js/" title="https://auto-plugin.github.io/index/autohue.js/" target="_blank" rel="noopener nofollow">autohue.js å®˜æ–¹é¦–é¡µ</a></p>
<h3 id="å®‰è£…ä¸ä½¿ç”¨">å®‰è£…ä¸ä½¿ç”¨</h3>
<pre><code class="language-shell">pnpm i autohue.js
</code></pre>
<pre><code class="language-ts">import autohue from 'autohue.js'

autohue(url, {
threshold: {
primary: 10,
left: 1,
bottom: 12
},
maxSize: 50
})
.then((result) =&gt; {
// ä½¿ç”¨ console.log æ‰“å°å‡ºè‰²å—å…ƒç´  s
console.log(`%c${result.primaryColor}`, 'color: #fff; background: ' + result.primaryColor, 'main')
console.log(`%c${result.secondaryColor}`, 'color: #fff; background: ' + result.secondaryColor, 'sub')
console.log(`%c${result.backgroundColor.left}`, 'color: #fff; background: ' + result.backgroundColor.left, 'bg-left')
console.log(`%c${result.backgroundColor.right}`, 'color: #fff; background: ' + result.backgroundColor.right, 'bg-right')
console.log(`%clinear-gradient to right`, 'color: #fff; background: linear-gradient(to right, ' + result.backgroundColor.left + ', ' + result.backgroundColor.right + ')', 'bg')
bg.value = `linear-gradient(to right, ${result.backgroundColor.left}, ${result.backgroundColor.right})`
})
.catch((err) =&gt; console.error(err))

</code></pre>
<h2 id="æœ€ç»ˆæ•ˆæœ">æœ€ç»ˆæ•ˆæœ</h2>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f12b9b60723e4904a17b127267b2cc25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=ks155oLNvAT1jQpLw1SMeG2bKqk%3D" referrerpolicy="no-referrer">
<p>å¤æ‚è¾¹ç¼˜æ•ˆæœ</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa6c3317d84749718ad30ae88bb4bda5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=B2EgDDoqazFdpB1Mqto52dzKOc0%3D" referrerpolicy="no-referrer">
<p>çºµå‘æ¸å˜æ•ˆæœï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯ left å’Œ right è¾¹çš„å€¼ï¼Œå¯èƒ½ä½¿ç”¨ top å’Œ bottom æ•ˆæœæ›´ä½³ï¼‰</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe207c4dfc2a461e9f6a7dd04b0ea3a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=8J4w88RIlGwDCvoAHc74%2BAY7hQc%3D" referrerpolicy="no-referrer">
<p>çº¯è‰²æ•ˆæœï¼ˆå› ä¸ºå•ç‹¬å¯¹è¾¹ç¼˜é‡‡æ ·ï¼Œæ‰€ä»¥æ— è®ºå›¾ç‰‡å†…å®¹å¤šå¤æ‚ï¼Œçº¯è‰²åŸºæœ¬çœ‹ä¸å‡ºè¾¹ç•Œï¼‰</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bddbdc43e244bb4b41e3676617b29e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=WqBxwWdA4A03id3rE4ntnFWCu3g%3D" referrerpolicy="no-referrer">
<p>çªå˜è¾¹ç¼˜æ•ˆæœï¼ˆæ­¤æ—¶ç”¨ css åšæ¸å˜è’™å±‚åº”è¯¥æ•ˆæœä¼šæ›´å¥½ï¼‰</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/596fb4fc81454766abb44912ab12c020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1740554069&amp;x-signature=sb6PB5oqkEzss9LWxSeaAjWRtHo%3D" referrerpolicy="no-referrer">
<p>æ¨ªå‘æ¸å˜æ•ˆæœï¼ˆä½¿ç”¨çš„æ˜¯ left å’Œ right çš„è‰²å€¼ï¼‰ï¼ŒåŸºæœ¬çœ‹ä¸å‡ºè¾¹ç•Œ</p>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/370371059" title="https://zhuanlan.zhihu.com/p/370371059" target="_blank" rel="noopener nofollow">zhuanlan.zhihu.com/p/370371059</a></li>
<li><a href="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85%E7%85%A7%E6%98%8E%E5%A7%94%E5%91%98%E4%BC%9A/10021151?fromtitle=CIE&amp;fromid=8649998" title="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85%E7%85%A7%E6%98%8E%E5%A7%94%E5%91%98%E4%BC%9A/10021151?fromtitle=CIE&amp;fromid=8649998" target="_blank" rel="noopener nofollow">baike.baidu.com/item/%E5%9Bâ€¦</a></li>
<li><a href="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%85%89%E6%BA%90D65/20792406" title="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%85%89%E6%BA%90D65/20792406" target="_blank" rel="noopener nofollow">baike.baidu.com/item/%E6%A0â€¦</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E8%B7%9D%E7%A6%BB" title="https://zh.wikipedia.org/wiki/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E8%B7%9D%E7%A6%BB" target="_blank" rel="noopener nofollow">zh.wikipedia.org/wiki/%E6%ACâ€¦</a></li>
<li><a href="https://blog.csdn.net/weixin_42560067/article/details/116182991" title="https://blog.csdn.net/weixin_42560067/article/details/116182991" target="_blank" rel="noopener nofollow">blog.csdn.net/weixin_4256â€¦</a></li>
<li><a href="https://zh.wikipedia.org/wiki/K-%E5%B9%B3%E5%9D%87%E7%AE%97%E6%B3%95" title="https://zh.wikipedia.org/wiki/K-%E5%B9%B3%E5%9D%87%E7%AE%97%E6%B3%95" target="_blank" rel="noopener nofollow">zh.wikipedia.org/wiki/K-%E5%â€¦</a></li>
<li><a href="https://blog.csdn.net/weixin_42998707/article/details/108011092" title="https://blog.csdn.net/weixin_42998707/article/details/108011092" target="_blank" rel="noopener nofollow">blog.csdn.net/weixin_4299â€¦</a></li>
<li><a href="https://juejin.cn/post/6844903511956815885" title="https://juejin.cn/post/6844903511956815885" target="_blank" rel="noopener nofollow">juejin.cn/post/684490â€¦</a></li>
</ul>
<h2 id="ç•ªå¤–">ç•ªå¤–</h2>
<p>Auto å®¶æ—çš„å…¶ä»–æˆå‘˜</p>
<ul>
<li><a href="https://github.com/Auto-Plugin" title="https://github.com/Auto-Plugin" target="_blank" rel="noopener nofollow">Auto-Plugin</a>/<strong><a href="https://github.com/Auto-Plugin/autofit.js" title="https://github.com/Auto-Plugin/autofit.js" target="_blank" rel="noopener nofollow">autofit.js</a></strong> autofit.js è¿„ä»Šä¸ºæ­¢æœ€æ˜“ç”¨çš„è‡ªé€‚åº”å·¥å…·</li>
<li><a href="https://github.com/Auto-Plugin" title="https://github.com/Auto-Plugin" target="_blank" rel="noopener nofollow">Auto-Plugin</a>/<strong><a href="https://github.com/Auto-Plugin/autolog.js" title="https://github.com/Auto-Plugin/autolog.js" target="_blank" rel="noopener nofollow">autolog.js</a></strong> autolog.js è½»é‡åŒ–å°å¼¹çª—</li>
<li><a href="https://github.com/Auto-Plugin" title="https://github.com/Auto-Plugin" target="_blank" rel="noopener nofollow">Auto-Plugin</a>/<strong><a href="https://github.com/Auto-Plugin/autouno" title="https://github.com/Auto-Plugin/autouno" target="_blank" rel="noopener nofollow">autouno</a></strong> autouno ç›´è§‰çš„ UnoCSS é¢„è®¾æ–¹æ¡ˆ</li>
<li><a href="https://github.com/Auto-Plugin" title="https://github.com/Auto-Plugin" target="_blank" rel="noopener nofollow">Auto-Plugin</a>/<strong><a href="https://github.com/Auto-Plugin/autohue.js" title="https://github.com/Auto-Plugin/autohue.js" target="_blank" rel="noopener nofollow">autohue.js</a></strong> æœ¬å“ ä¸€ä¸ªè‡ªåŠ¨æå–å›¾ç‰‡ä¸»é¢˜è‰²è®©å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“çš„å·¥å…·</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.04383544474652778" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-21 13:18">2025-02-21 13:17</span>&nbsp;
<a href="https://www.cnblogs.com/Kay-Larry">ç¥ç‹Â·å¾·è±å„æ–¯</a>&nbsp;
é˜…è¯»(<span id="post_view_count">91</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18729044" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18729044);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18729044', targetLink: 'https://www.cnblogs.com/Kay-Larry/p/18729044', title: 'autohue.jsï¼šè®©ä½ çš„å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“ï¼Œç»äº†ï¼' })">ä¸¾æŠ¥</a>
</div>
        
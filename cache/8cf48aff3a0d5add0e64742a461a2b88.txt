
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huangSir-devops/p/18848417" title="发布于 2025-04-26 21:45">
    <span role="heading" aria-level="2">K8s新手系列之K8s中的资源</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="k8s中资源的概念">K8s中资源的概念</h2>
<p>在kubernetes中，所有的内容都抽象为资源，用户需要通过操作资源来管理kubernetes。</p>
<blockquote>
<p>kubernetes的本质上就是一个集群系统，用户可以在集群中部署各种服务，所谓的部署服务，其实就是在kubernetes集群中运行一个个的容器，并将指定的程序跑在容器中。kubernetes的最小管理单元是pod而不是容器，所以只能将容器放在Pod中，而kubernetes一般也不会直接管理Pod，而是通过Pod控制器来管理Pod的。Pod可以提供服务之后，就要考虑如何访问Pod中服务，kubernetes提供了Service资源实现这个功能。当然，如果Pod中程序的数据需要持久化，kubernetes还提供了各种存储系统。</p>
</blockquote>
<p>简单点说，k8s中一切皆是资源</p>
<h2 id="k8s中的内置资源">K8s中的内置资源</h2>
<h3 id="查看k8s中所有的内置资源">查看K8s中所有的内置资源</h3>
<p>通过<code>kubectl api-resources</code>命令可以查看K8s中所有的内置资源。</p>
<pre><code>[root@master01 ~/pod]# kubectl api-resources
NAME                              SHORTNAMES                                      APIVERSION                             NAMESPACED   KIND
bindings                                                                          v1                                     true         Binding
componentstatuses                 cs                                              v1                                     false        ComponentStatus
configmaps                        cm                                              v1                                     true         ConfigMap
endpoints                         ep                                              v1                                     true         Endpoints
events                            ev                                              v1                                     true         Event
limitranges                       limits                                          v1                                     true         LimitRange
namespaces                        ns                                              v1                                     false        Namespace
nodes                             no                                              v1                                     false        Node
persistentvolumeclaims            pvc                                             v1                                     true         PersistentVolumeClaim
persistentvolumes                 pv                                              v1                                     false        PersistentVolume
pods                              po                                              v1                                     true         Pod
podtemplates                                                                      v1                                     true         PodTemplate
replicationcontrollers            rc                                              v1                                     true         ReplicationController
resourcequotas                    quota                                           v1                                     true         ResourceQuota
secrets                                                                           v1                                     true         Secret
serviceaccounts                   sa                                              v1                                     true         ServiceAccount
services                          svc                                             v1                                     true         Service
mutatingwebhookconfigurations                                                     admissionregistration.k8s.io/v1        false        MutatingWebhookConfiguration
validatingwebhookconfigurations                                                   admissionregistration.k8s.io/v1        false        ValidatingWebhookConfiguration
customresourcedefinitions         crd,crds                                        apiextensions.k8s.io/v1                false        CustomResourceDefinition
apiservices                                                                       apiregistration.k8s.io/v1              false        APIService
controllerrevisions                                                               apps/v1                                true         ControllerRevision
daemonsets                        ds                                              apps/v1                                true         DaemonSet
deployments                       deploy                                          apps/v1                                true         Deployment
replicasets                       rs                                              apps/v1                                true         ReplicaSet
statefulsets                      sts                                             apps/v1                                true         StatefulSet
tokenreviews                                                                      authentication.k8s.io/v1               false        TokenReview
localsubjectaccessreviews                                                         authorization.k8s.io/v1                true         LocalSubjectAccessReview
selfsubjectaccessreviews                                                          authorization.k8s.io/v1                false        SelfSubjectAccessReview
selfsubjectrulesreviews                                                           authorization.k8s.io/v1                false        SelfSubjectRulesReview
subjectaccessreviews                                                              authorization.k8s.io/v1                false        SubjectAccessReview
horizontalpodautoscalers          hpa                                             autoscaling/v2                         true         HorizontalPodAutoscaler
cronjobs                          cj                                              batch/v1                               true         CronJob
jobs                                                                              batch/v1                               true         Job
certificatesigningrequests        csr                                             certificates.k8s.io/v1                 false        CertificateSigningRequest
leases                                                                            coordination.k8s.io/v1                 true         Lease
bgpconfigurations                                                                 crd.projectcalico.org/v1               false        BGPConfiguration
bgpfilters                                                                        crd.projectcalico.org/v1               false        BGPFilter
bgppeers                                                                          crd.projectcalico.org/v1               false        BGPPeer
blockaffinities                                                                   crd.projectcalico.org/v1               false        BlockAffinity
caliconodestatuses                                                                crd.projectcalico.org/v1               false        CalicoNodeStatus
clusterinformations                                                               crd.projectcalico.org/v1               false        ClusterInformation
felixconfigurations                                                               crd.projectcalico.org/v1               false        FelixConfiguration
globalnetworkpolicies                                                             crd.projectcalico.org/v1               false        GlobalNetworkPolicy
globalnetworksets                                                                 crd.projectcalico.org/v1               false        GlobalNetworkSet
hostendpoints                                                                     crd.projectcalico.org/v1               false        HostEndpoint
ipamblocks                                                                        crd.projectcalico.org/v1               false        IPAMBlock
ipamconfigs                                                                       crd.projectcalico.org/v1               false        IPAMConfig
ipamhandles                                                                       crd.projectcalico.org/v1               false        IPAMHandle
ippools                                                                           crd.projectcalico.org/v1               false        IPPool
ipreservations                                                                    crd.projectcalico.org/v1               false        IPReservation
kubecontrollersconfigurations                                                     crd.projectcalico.org/v1               false        KubeControllersConfiguration
networkpolicies                                                                   crd.projectcalico.org/v1               true         NetworkPolicy
networksets                                                                       crd.projectcalico.org/v1               true         NetworkSet
endpointslices                                                                    discovery.k8s.io/v1                    true         EndpointSlice
events                            ev                                              events.k8s.io/v1                       true         Event
flowschemas                                                                       flowcontrol.apiserver.k8s.io/v1beta3   false        FlowSchema
prioritylevelconfigurations                                                       flowcontrol.apiserver.k8s.io/v1beta3   false        PriorityLevelConfiguration
ingressclasses                                                                    networking.k8s.io/v1                   false        IngressClass
ingresses                         ing                                             networking.k8s.io/v1                   true         Ingress
networkpolicies                   netpol                                          networking.k8s.io/v1                   true         NetworkPolicy
runtimeclasses                                                                    node.k8s.io/v1                         false        RuntimeClass
apiservers                                                                        operator.tigera.io/v1                  false        APIServer
imagesets                                                                         operator.tigera.io/v1                  false        ImageSet
installations                                                                     operator.tigera.io/v1                  false        Installation
tigerastatuses                                                                    operator.tigera.io/v1                  false        TigeraStatus
poddisruptionbudgets              pdb                                             policy/v1                              true         PodDisruptionBudget
bgpconfigurations                 bgpconfig,bgpconfigs                            projectcalico.org/v3                   false        BGPConfiguration
bgpfilters                                                                        projectcalico.org/v3                   false        BGPFilter
bgppeers                                                                          projectcalico.org/v3                   false        BGPPeer
blockaffinities                   blockaffinity,affinity,affinities               projectcalico.org/v3                   false        BlockAffinity
caliconodestatuses                caliconodestatus                                projectcalico.org/v3                   false        CalicoNodeStatus
clusterinformations               clusterinfo                                     projectcalico.org/v3                   false        ClusterInformation
felixconfigurations               felixconfig,felixconfigs                        projectcalico.org/v3                   false        FelixConfiguration
globalnetworkpolicies             gnp,cgnp,calicoglobalnetworkpolicies            projectcalico.org/v3                   false        GlobalNetworkPolicy
globalnetworksets                                                                 projectcalico.org/v3                   false        GlobalNetworkSet
hostendpoints                     hep,heps                                        projectcalico.org/v3                   false        HostEndpoint
ipamconfigurations                ipamconfig                                      projectcalico.org/v3                   false        IPAMConfiguration
ippools                                                                           projectcalico.org/v3                   false        IPPool
ipreservations                                                                    projectcalico.org/v3                   false        IPReservation
kubecontrollersconfigurations                                                     projectcalico.org/v3                   false        KubeControllersConfiguration
networkpolicies                   cnp,caliconetworkpolicy,caliconetworkpolicies   projectcalico.org/v3                   true         NetworkPolicy
networksets                       netsets                                         projectcalico.org/v3                   true         NetworkSet
profiles                                                                          projectcalico.org/v3                   false        Profile
clusterrolebindings                                                               rbac.authorization.k8s.io/v1           false        ClusterRoleBinding
clusterroles                                                                      rbac.authorization.k8s.io/v1           false        ClusterRole
rolebindings                                                                      rbac.authorization.k8s.io/v1           true         RoleBinding
roles                                                                             rbac.authorization.k8s.io/v1           true         Role
priorityclasses                   pc                                              scheduling.k8s.io/v1                   false        PriorityClass
csidrivers                                                                        storage.k8s.io/v1                      false        CSIDriver
csinodes                                                                          storage.k8s.io/v1                      false        CSINode
csistoragecapacities                                                              storage.k8s.io/v1                      true         CSIStorageCapacity
storageclasses                    sc                                              storage.k8s.io/v1                      false        StorageClass
volumeattachments                                                                 storage.k8s.io/v1                      false        VolumeAttachment
</code></pre>
<h4 id="各列字段详解">各列字段详解：</h4>
<ul>
<li>NAME：表示资源的名称</li>
<li>SHORTNAMES：表示资源的简称，例如Pod可以简写为po</li>
</ul>
<pre><code>[root@master01 ~/pod]# kubectl get Pod
NAME        READY   STATUS    RESTARTS   AGE
nginx-pod   1/1     Running   0          30m
[root@master01 ~/pod]# kubectl get po
NAME        READY   STATUS    RESTARTS   AGE
nginx-pod   1/1     Running   0          30m
</code></pre>
<ul>
<li>APIVERSION：资源所属的API组及版本，对应Manifests文件中apiVersion字段</li>
<li>NAMESPACED：表示是否受namespace（命名空间）的隔离，true代表受隔离。false代表不受隔离</li>
<li>KIND：表示资源类型（如 Pod、Deployment）。对应Manifests文件中Kind字段</li>
</ul>
<h3 id="内置资源的分类">内置资源的分类</h3>
<h4 id="工作负载workloads相关">工作负载（Workloads）相关</h4>
<ul>
<li>
<p>Pod：最小的部署单元，包含一个或多个容器。</p>
</li>
<li>
<p>Deployment：管理无状态应用的副本和滚动更新。</p>
</li>
<li>
<p>StatefulSet：适用于有状态应用（如数据库），保障有序性和持久存储。</p>
</li>
<li>
<p>DaemonSet：确保每个节点运行一个Pod（如日志采集器）。</p>
</li>
<li>
<p>Job/CronJob：执行一次性或定时任务。</p>
</li>
</ul>
<h4 id="网络networking相关">网络（Networking）相关</h4>
<ul>
<li>
<p>Service：为 Pod 提供稳定的网络端点（负载均衡）。</p>
</li>
<li>
<p>Ingress：管理外部 HTTP/HTTPS 流量路由。</p>
</li>
<li>
<p>NetworkPolicy：定义 Pod 间的网络访问规则。</p>
</li>
</ul>
<h4 id="存储storage相关">存储（Storage）相关</h4>
<ul>
<li>
<p>PersistentVolume (PV)：集群级别的存储资源（如云磁盘）。</p>
</li>
<li>
<p>PersistentVolumeClaim (PVC)：用户对存储的请求（绑定PV）。</p>
</li>
<li>
<p>StorageClass：动态按需创建存储（如定义SSD类型）。</p>
</li>
</ul>
<h4 id="配置与安全configuration--security相关">配置与安全（Configuration &amp; Security）相关</h4>
<ul>
<li>
<p>ConfigMap：存储非敏感配置（如环境变量）。</p>
</li>
<li>
<p>Secret：管理敏感信息（密码、密钥）。</p>
</li>
<li>
<p>ServiceAccount：为 Pod 分配身份和权限。</p>
</li>
</ul>
<h4 id="集群管理cluster-management相关">集群管理（Cluster Management）相关</h4>
<ul>
<li>
<p>Node：表示集群中的工作节点。</p>
</li>
<li>
<p>Namespace：逻辑隔离资源（如 dev/prod 环境）。</p>
</li>
<li>
<p>ResourceQuota：限制命名空间的资源使用量。</p>
</li>
</ul>
<h3 id="查看指定的内置资源">查看指定的内置资源</h3>
<h4 id="查看master组件状态">查看master组件状态</h4>
<pre><code>[root@master01 ~]# kubectl get componentstatuses
Warning: v1 ComponentStatus is deprecated in v1.19+
NAME                 STATUS    MESSAGE   ERROR
controller-manager   Healthy   ok
scheduler            Healthy   ok
etcd-0               Healthy
# 使用简写方式
[root@master01 ~]# kubectl get cs
Warning: v1 ComponentStatus is deprecated in v1.19+
NAME                 STATUS    MESSAGE   ERROR
controller-manager   Healthy   ok
scheduler            Healthy   ok
etcd-0               Healthy
</code></pre>
<h4 id="查看集群节点状态">查看集群节点状态</h4>
<pre><code>[root@master01 ~]# kubectl get nodes
NAME       STATUS   ROLES           AGE     VERSION
master01   Ready    control-plane   7h24m   v1.26.15
node01     Ready    &lt;none&gt;          7h23m   v1.26.15
node02     Ready    &lt;none&gt;          7h23m   v1.26.15
# 使用简写方式
[root@master01 ~]# kubectl get no
NAME       STATUS   ROLES           AGE     VERSION
master01   Ready    control-plane   7h24m   v1.26.15
node01     Ready    &lt;none&gt;          7h23m   v1.26.15
node02     Ready    &lt;none&gt;          7h23m   v1.26.15
</code></pre>
<h4 id="查看pod状态">查看pod状态</h4>
<pre><code>[root@master01 ~]# kubectl get pod
NAME        READY   STATUS    RESTARTS   AGE
nginx-pod   1/1     Running   0          54m
# 使用简写方式
[root@master01 ~]# kubectl get po
NAME        READY   STATUS    RESTARTS   AGE
nginx-pod   1/1     Running   0          54m
</code></pre>
<h4 id="一次查看多个资源">一次查看多个资源</h4>
<pre><code># 查看master组件状态、集群状态、pod状态
[root@master01 ~]# kubectl get cs,no,po
Warning: v1 ComponentStatus is deprecated in v1.19+
NAME                                 STATUS    MESSAGE   ERROR
componentstatus/controller-manager   Healthy   ok
componentstatus/scheduler            Healthy   ok
componentstatus/etcd-0               Healthy

NAME            STATUS   ROLES           AGE     VERSION
node/master01   Ready    control-plane   7h25m   v1.26.15
node/node01     Ready    &lt;none&gt;          7h25m   v1.26.15
node/node02     Ready    &lt;none&gt;          7h25m   v1.26.15

NAME            READY   STATUS    RESTARTS   AGE
pod/nginx-pod   1/1     Running   0          55m

</code></pre>
<h2 id="查看k8s集群中资源的文档">查看K8s集群中资源的文档</h2>
<p>可以通过<code>kubectl explain &lt;资源的类型.属性&gt;</code>来进行查看<br>
例如：</p>
<pre><code>kubectl explain po
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3468887/202504/3468887-20250426211106154-1371295968.png" alt="image" loading="lazy"></p>
<pre><code>kubectl explain po.kind
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3468887/202504/3468887-20250426211146471-1285930115.png" alt="image" loading="lazy"></p>
<h2 id="k8s中资源管理方式">K8s中资源管理方式</h2>
<p>K8s中资源管理方式常用的主要有以下两种方式：</p>
<ul>
<li>声明式管理：用户通过定义 Manifests 文件 描述资源的期望状态，K8s 自动协调实际状态与目标一致</li>
<li>命令式管理：直接通过 kubectl 命令快速操作资源，适合临时调试或简单场景。</li>
</ul>
<h3 id="声明式管理">声明式管理</h3>
<p>用户通过定义 Manifests 文件 描述资源的期望状态，K8s 自动协调实际状态与目标一致。适合生产环境使用。</p>
<h4 id="创建更新资源">创建/更新资源</h4>
<pre><code># 应用 Manifest 文件（创建或更新资源）
kubectl apply -f manifests.yaml

# 应用目录下所有 Manifest 文件
kubectl apply -f manifests/
</code></pre>
<h4 id="删除资源">删除资源</h4>
<pre><code>kubectl delete -f manifests.yaml
</code></pre>
<h4 id="查看生成的资源配置">查看生成的资源配置</h4>
<pre><code># 查看实际生效的配置（含集群填充的默认值）
kubectl get pod nginx-pod -o yaml
</code></pre>
<h3 id="命令式管理">命令式管理</h3>
<p>直接通过 kubectl 命令快速操作资源，适合临时调试或简单场景。</p>
<h4 id="通过命令式创建资源">通过命令式创建资源</h4>
<p>语法：</p>
<pre><code>kubectl run NAME --image=image [--env="key=value"] [--port=port] [--dry-run=server|client] [--overrides=inline-json]
[--command] -- [COMMAND] [args...] [options]
</code></pre>
<p>案例：</p>
<pre><code>  # 启动一个nginx的pod
  kubectl run nginx --image=nginx

  # 启动一个hazelcast/hazelcast的pod，指定暴漏的端口为5701
  kubectl run hazelcast --image=hazelcast/hazelcast --port=5701

  # 启动一个hazelcast/hazelcast的pod，指定环境变量
  kubectl run hazelcast --image=hazelcast/hazelcast --env="DNS_DOMAIN=cluster" --env="POD_NAMESPACE=default"

  # 启动一个hazelcast/hazelcast的pod，指定标签
  kubectl run hazelcast --image=hazelcast/hazelcast --labels="app=hazelcast,env=prod"

  # 模拟创建一个nginx的pod，生成对应的manifests文件，而不会实际创建资源
  kubectl run nginx --image=nginx --dry-run=client

  # 创建一个busybox的pod，指定重启方式为永不重启
  kubectl run -i -t busybox --image=busybox --restart=Never

</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/huangSir-devops/" target="_blank">huangSir-devops</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/huangSir-devops/p/18848417" target="_blank">https://www.cnblogs.com/huangSir-devops/p/18848417</a>，微信Vac666666，欢迎交流</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.18999992678125" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-26 21:45">2025-04-26 21:45</span>&nbsp;
<a href="https://www.cnblogs.com/huangSir-devops">huangSir-devops</a>&nbsp;
阅读(<span id="post_view_count">11</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18848417);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18848417', targetLink: 'https://www.cnblogs.com/huangSir-devops/p/18848417', title: 'K8s新手系列之K8s中的资源' })">举报</a>
</div>
        
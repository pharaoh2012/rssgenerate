
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yanshajiuzhou/p/18701894" title="发布于 2025-02-06 23:35">
    <span role="heading" aria-level="2">中介者模式</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        中介者模式的目的是把多方会谈变成双方会谈，从而实现多方的松耦合。用一个中介对象来封装一系列的对象交互。这样，系统中的各个对象不直接互相引用，而是通过中介者进行交互，从而降低了系统的耦合度。
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<span data-cke-copybin-start="1"><span data-cke-copybin-start="1">​</span></span><span id="cke_bm_1105S">中介者（Mediator）模式属于行为型模式的一种。</span>
<p>中介者模式的目的是把多方会谈变成双方会谈，从而实现多方的松耦合。用一个中介对象来封装一系列的对象交互。这样，系统中的各个对象不直接互相引用，而是通过中介者进行交互，从而降低了系统的耦合度。</p>
<p><strong>MVC模式</strong>以及<strong>MVVM模式</strong>都可以看作是中介者模式的扩展。中介者模式能减少对象之间混乱无序的依赖关系。类所拥有的依赖关系越少，就越易于修改、 扩展或复用。</p>
<p>在真实世界中，飞机驾驶员不会直接相互沟通来决定哪一架飞机先降落，而是通过<strong>塔台</strong>来进行沟通，此时的塔台就是一个中介者对象。</p>
<p>当多个类之间存在复杂的交互，而这些交互又不希望在各个类之间直接进行时；当系统中的对象之间需要有统一的协调，但不想让这些对象直接依赖彼此时，都可以使用中介者模式。</p>
<p>中介者模式通常有以下组成部分：&nbsp;</p>
<ul>
<li>Mediator（中介者接口）：定义了一个接口，用于与多个同事对象进行交互。</li>
<li>ConcreteMediator（具体中介者）：实现中介者接口，协调和管理多个同事对象的交互。</li>
<li>Colleague（同事类）：所有同事类都知道中介者对象，它们通过中介者与其他同事类进行交互。</li>
<li>ConcreteColleague（具体同事类）：每个具体同事类都向中介者发出请求并接收来自中介者的通知。</li>
</ul>
<p>我们模拟一个简单的聊天室应用。聊天室相当于一个中介者。</p>
<p>1、Mediator: 中介者接口</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="4" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20Mediator%3A%20%E4%B8%AD%E4%BB%8B%E8%80%85%E6%8E%A5%E5%8F%A3%5Cninterface%20ChatRoom%20%7B%5Cn%20%20%20%20void%20sendMessage(String%20message%2C%20User%20user)%3B%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// Mediator: 中介者接口
<span class="hljs-keyword">interface <span class="hljs-title class_">ChatRoom {
    <span class="hljs-keyword">void <span class="hljs-title function_">sendMessage<span class="hljs-params">(String message, User user);
}</span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202502/1171560-20250206233550787-2074026096.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>2、ConcreteMediator: 具体中介者</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="3" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20ConcreteMediator%3A%20%E5%85%B7%E4%BD%93%E4%B8%AD%E4%BB%8B%E8%80%85%5Cnclass%20ConcreteChatRoom%20implements%20ChatRoom%20%7B%5Cn%20%20%20%20%40Override%5Cn%20%20%20%20public%20void%20sendMessage(String%20message%2C%20User%20user)%20%7B%5Cn%20%20%20%20%20%20%20%20System.out.println(user.getName()%20%2B%20%5C%22%20sends%20message%3A%20%5C%22%20%2B%20message)%3B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E4%B8%AD%E4%BB%8B%E8%80%85%E9%80%9A%E7%9F%A5%E6%89%80%E6%9C%89%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%5Cn%20%20%20%20%20%20%20%20for%20(User%20u%20%3A%20users)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(u%20!%3D%20user)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20u.receiveMessage(message)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20private%20List%3CUser%3E%20users%20%3D%20new%20ArrayList%3C%3E()%3B%5Cn%20%20%20%20%5Cn%20%20%20%20%2F%2F%20%E6%B3%A8%E5%86%8C%E7%94%A8%E6%88%B7%5Cn%20%20%20%20public%20void%20addUser(User%20user)%20%7B%5Cn%20%20%20%20%20%20%20%20users.add(user)%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// ConcreteMediator: 具体中介者
<span class="hljs-keyword">class <span class="hljs-title class_">ConcreteChatRoom <span class="hljs-keyword">implements <span class="hljs-title class_">ChatRoom {
    <span class="hljs-meta">@Override
    <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title function_">sendMessage<span class="hljs-params">(String message, User user) {
        System.out.println(user.getName() + <span class="hljs-string">" sends message: " + message);
        <span class="hljs-comment">// 中介者通知所有其他用户
        <span class="hljs-keyword">for (User u : users) {
            <span class="hljs-keyword">if (u != user) {
                u.receiveMessage(message);
            }
        }
    }

    <span class="hljs-keyword">private List&lt;User&gt; users = <span class="hljs-keyword">new <span class="hljs-title class_">ArrayList&lt;&gt;();
    
    <span class="hljs-comment">// 注册用户
    <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title function_">addUser<span class="hljs-params">(User user) {
        users.add(user);
    }
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202502/1171560-20250206233550787-2074026096.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>3、Colleague: 同事类</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="2" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20Colleague%3A%20%E5%90%8C%E4%BA%8B%E7%B1%BB%5Cnabstract%20class%20User%20%7B%5Cn%20%20%20%20protected%20ChatRoom%20chatRoom%3B%5Cn%20%20%20%20protected%20String%20name%3B%5Cn%5Cn%20%20%20%20public%20User(ChatRoom%20chatRoom%2C%20String%20name)%20%7B%5Cn%20%20%20%20%20%20%20%20this.chatRoom%20%3D%20chatRoom%3B%5Cn%20%20%20%20%20%20%20%20this.name%20%3D%20name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20String%20getName()%20%7B%5Cn%20%20%20%20%20%20%20%20return%20name%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20abstract%20void%20sendMessage(String%20message)%3B%5Cn%20%20%20%20public%20abstract%20void%20receiveMessage(String%20message)%3B%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// Colleague: 同事类
<span class="hljs-keyword">abstract <span class="hljs-keyword">class <span class="hljs-title class_">User {
    <span class="hljs-keyword">protected ChatRoom chatRoom;
    <span class="hljs-keyword">protected String name;

    <span class="hljs-keyword">public <span class="hljs-title function_">User<span class="hljs-params">(ChatRoom chatRoom, String name) {
        <span class="hljs-built_in">this.chatRoom = chatRoom;
        <span class="hljs-built_in">this.name = name;
    }

    <span class="hljs-keyword">public String <span class="hljs-title function_">getName<span class="hljs-params">() {
        <span class="hljs-keyword">return name;
    }

    <span class="hljs-keyword">public <span class="hljs-keyword">abstract <span class="hljs-keyword">void <span class="hljs-title function_">sendMessage<span class="hljs-params">(String message);
    <span class="hljs-keyword">public <span class="hljs-keyword">abstract <span class="hljs-keyword">void <span class="hljs-title function_">receiveMessage<span class="hljs-params">(String message);
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202502/1171560-20250206233550787-2074026096.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>4、ConcreteColleague: 具体同事类</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="1" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20ConcreteColleague%3A%20%E5%85%B7%E4%BD%93%E5%90%8C%E4%BA%8B%E7%B1%BB%5Cnclass%20ConcreteUser%20extends%20User%20%7B%5Cn%20%20%20%20public%20ConcreteUser(ChatRoom%20chatRoom%2C%20String%20name)%20%7B%5Cn%20%20%20%20%20%20%20%20super(chatRoom%2C%20name)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%40Override%5Cn%20%20%20%20public%20void%20sendMessage(String%20message)%20%7B%5Cn%20%20%20%20%20%20%20%20chatRoom.sendMessage(message%2C%20this)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%40Override%5Cn%20%20%20%20public%20void%20receiveMessage(String%20message)%20%7B%5Cn%20%20%20%20%20%20%20%20System.out.println(name%20%2B%20%5C%22%20received%3A%20%5C%22%20%2B%20message)%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// ConcreteColleague: 具体同事类
<span class="hljs-keyword">class <span class="hljs-title class_">ConcreteUser <span class="hljs-keyword">extends <span class="hljs-title class_">User {
    <span class="hljs-keyword">public <span class="hljs-title function_">ConcreteUser<span class="hljs-params">(ChatRoom chatRoom, String name) {
        <span class="hljs-built_in">super(chatRoom, name);
    }

    <span class="hljs-meta">@Override
    <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title function_">sendMessage<span class="hljs-params">(String message) {
        chatRoom.sendMessage(message, <span class="hljs-built_in">this);
    }

    <span class="hljs-meta">@Override
    <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title function_">receiveMessage<span class="hljs-params">(String message) {
        System.out.println(name + <span class="hljs-string">" received: " + message);
    }
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202502/1171560-20250206233550787-2074026096.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>5、客户端</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="0" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%A0%81%5Cnpublic%20class%20MediatorPatternDemo%20%7B%5Cn%20%20%20%20public%20static%20void%20main(String%5B%5D%20args)%20%7B%5Cn%20%20%20%20%20%20%20%20ConcreteChatRoom%20chatRoom%20%3D%20new%20ConcreteChatRoom()%3B%5Cn%5Cn%20%20%20%20%20%20%20%20User%20user1%20%3D%20new%20ConcreteUser(chatRoom%2C%20%5C%22Alice%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20User%20user2%20%3D%20new%20ConcreteUser(chatRoom%2C%20%5C%22Bob%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20User%20user3%20%3D%20new%20ConcreteUser(chatRoom%2C%20%5C%22Charlie%5C%22)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20chatRoom.addUser(user1)%3B%5Cn%20%20%20%20%20%20%20%20chatRoom.addUser(user2)%3B%5Cn%20%20%20%20%20%20%20%20chatRoom.addUser(user3)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20user1.sendMessage(%5C%22Hi%20everyone!%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20user2.sendMessage(%5C%22Hello%20Alice!%5C%22)%3B%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// 客户端代码
<span class="hljs-keyword">public <span class="hljs-keyword">class <span class="hljs-title class_">MediatorPatternDemo {
    <span class="hljs-keyword">public <span class="hljs-keyword">static <span class="hljs-keyword">void <span class="hljs-title function_">main<span class="hljs-params">(String[] args) {
        <span class="hljs-type">ConcreteChatRoom <span class="hljs-variable">chatRoom <span class="hljs-operator">= <span class="hljs-keyword">new <span class="hljs-title class_">ConcreteChatRoom();

        <span class="hljs-type">User <span class="hljs-variable">user1 <span class="hljs-operator">= <span class="hljs-keyword">new <span class="hljs-title class_">ConcreteUser(chatRoom, <span class="hljs-string">"Alice");
        <span class="hljs-type">User <span class="hljs-variable">user2 <span class="hljs-operator">= <span class="hljs-keyword">new <span class="hljs-title class_">ConcreteUser(chatRoom, <span class="hljs-string">"Bob");
        <span class="hljs-type">User <span class="hljs-variable">user3 <span class="hljs-operator">= <span class="hljs-keyword">new <span class="hljs-title class_">ConcreteUser(chatRoom, <span class="hljs-string">"Charlie");

        chatRoom.addUser(user1);
        chatRoom.addUser(user2);
        chatRoom.addUser(user3);

        user1.sendMessage(<span class="hljs-string">"Hi everyone!");
        user2.sendMessage(<span class="hljs-string">"Hello Alice!");
    }
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202502/1171560-20250206233550787-2074026096.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>中介者模式的<strong>优缺点。</strong></p>
<p>优点：</p>
<ul>
<li>降低耦合度：通过将对象的交互逻辑集中到中介者中，减少了对象之间的直接依赖。</li>
<li>易于扩展：如果需要添加新的同事类，只需让其继承User类并实现相关功能，而不需要修改其他对象的代码。</li>
<li>集中控制：所有交互逻辑都集中在中介者类中，便于管理和控制复杂的交互流程。</li>
</ul>
<p>缺点：</p>
<ul>
<li>中介者过于复杂：当系统中的对象过多时，中介者可能会变得非常复杂，甚至成为“上帝对象”。</li>
<li>不适用所有场景：对于简单的系统，使用中介者模式可能会过度设计，反而增加了不必要的复杂性。</li>
</ul>
<p style="text-align: right"><span style="color: rgba(0, 204, 255, 1)">坚持往前走，不回头、不放弃，冰封万里也能走到春暖花开。-- 烟沙九洲</span></p>
<div>
<div style="position: fixed; right: 0; top: 0; width: 18px; height: 100%; z-index: 99999; pointer-events: none; background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAKeCAYAAACoI0vdAAAAAXNSR0IArs4c6QAAAeFJREFUeF7t0qENAAAIBDHYf2lGqEEe+oJofufp9unP9MiSGWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwMUBMJwCnyNbHuwAAAAASUVORK5CYII=&quot;); background-size: 100% 100%; background-repeat: no-repeat">&nbsp;</div>
<button class="move-button" style="position: fixed; right: 18px; left: auto; top: 50%; z-index: 99999; display: none">◀</button></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.027512861556712963" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-06 23:36">2025-02-06 23:35</span>&nbsp;
<a href="https://www.cnblogs.com/yanshajiuzhou">烟沙九洲</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18701894" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18701894);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18701894', targetLink: 'https://www.cnblogs.com/yanshajiuzhou/p/18701894', title: '中介者模式' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/SuperBigSaltFish0/p/18798989" title="发布于 2025-03-28 23:38">
    <span role="heading" aria-level="2">verilog实现32位有符号流水乘法器</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="verilog实现32位有符号流水乘法器">verilog实现32位有符号流水乘法器</h1>
<h2 id="14bit乘法流程">1.4bit乘法流程</h2>
<h3 id="1无符号x无符号二进制乘法器">1.无符号X无符号二进制乘法器</h3>
<p>以下为4bit乘法器流程（2X6）</p>
<pre><code>	0 0 0 0 0 0 1 0     (2)
X	0 0 0 0 0 1 1 0     (6)
    --------------------- 
	0 0 0 0 0 0 0 0     (0)
	0 0 0 0 0 1 0 0     (4)
	0 0 0 0 1 0 0 0     (8)
	0 0 0 0 0 0 0 0     (0)
	0 0 0 0 0 0 0 0     (0)
	0 0 0 0 0 0 0 0     (0)
	0 0 0 0 0 0 0 0     (0)
	0 0 0 0 0 0 0 0     (0)
    ---------------------	
	0 0 0 0 1 1 0 0     (12)
</code></pre>
<font color="red">
注：4bit乘4bit的乘法器，其最大结果位宽为8，即4+4，所用在计算的时候，需要将乘数和被乘数通过符号位扩展到8bit，当然，对于无符号乘法来说，扩展的没有作用，但是对于有符号来说，是必须的，设计的模块为有符号和无符号通用的寄存器，所用建议无符号也进行位宽扩展。
</font>
<h3 id="2有符号x有符号二进制乘法器">2.有符号X有符号二进制乘法器</h3>
<p>以下为4bit乘法器流程（-2 X -6）</p>
<pre><code>	1 1 1 1 1 1 1 0     (-2)
 X	1 1 1 1 1 0 1 0     (-6)
    --------------------- 
	0 0 0 0 0 0 0 0		
	1 1 1 1 1 1 0 0		
	0 0 0 0 0 0 0 0		
	1 1 1 1 0 0 0 0		
	1 1 1 0 0 0 0 0     
	1 1 0 0 0 0 0 0     
	1 0 0 0 0 0 0 0     
	0 0 0 0 0 0 0 0     
    ---------------------	
	0 0 0 0 1 1 0 0     (12) 
</code></pre>
<h3 id="3有符号x无符号二进制乘法器">3.有符号X无符号二进制乘法器</h3>
<pre><code> 	1 1 1 1 1 1 1 0     (-2)
 X	0 0 0 0 0 1 1 0     (6)
    --------------------- 
	0 0 0 0 0 0 0 0		
 	1 1 1 1 1 1 0 0		
	1 1 1 1 1 0 0 0		
	0 0 0 0 0 0 0 0		
	0 0 0 0 0 0 0 0     
	0 0 0 0 0 0 0 0     
	0 0 0 0 0 0 0 0     
	0 0 0 0 0 0 0 0     
    ---------------------	
	1 1 1 1 0 1 0 0     (-12)
</code></pre>
<h3 id="4无符号x有符号二进制乘法器">4.无符号X有符号二进制乘法器</h3>
<pre><code> 	0 0 0 0 0 0 1 0     (2)
 X	1 1 1 1 1 0 1 0     (-6)
    --------------------- 
	0 0 0 0 0 0 0 0		
 	0 0 0 0 0 1 0 0		
	0 0 0 0 0 0 0 0		
	0 0 0 1 0 0 0 0		
	0 0 1 0 0 0 0 0     
	0 1 0 0 0 0 0 0     
	1 0 0 0 0 0 0 0     
	0 0 0 0 0 0 0 0     
    ---------------------	
	1 1 1 1 0 1 0 0     (-12)
</code></pre>
<h2 id="2流程简化">2.流程简化</h2>
<p>由上面4种情况可以总结出一个规律，符号不影响计算流程，只影响截位位置。</p>
<p>​	例如无符号X有符号二进制乘法器为例：bin(00000010) = dec(2),但是对于bin(11111010)将其当作有符号数来说为dec(-6),当作无符号来说为dec(250),即dec(2)*dec(250)的结果只取低8位的话，当作有符号数即为bin(11110100) = dec(-12)。那么以为着计算有符号数乘法的时候，只需要将其当作无符号数进行计算，最后控制截位位置就可以计算有符号计算器。</p>
<p>那么以下将对16bit乘法进行简化，以-1000 X -1200</p>
<h3 id="1位宽扩展">1.位宽扩展</h3>
<pre><code>dec(-1000) = bin(11111111111111111111110000011000) = dec(4294966296)
dec(-1200) = bin(11111111111111111111101101010000) = dec(4294966096)
</code></pre>
<h3 id="2乘数指数分解">2.乘数指数分解</h3>
<pre><code>dec(4294966096) = 1*2^31 + 1*2^30 + 1*2^29 + 1*2^28 + 
1*2^27 + 1*2^26 + 1*2^25 + 1*2^24 + 1*2^23 + 1*2^22 + 
1*2^21 + 1*2^20 + 1*2^19 + 1*2^18 + 1*2^17 + 1*2^16 + 
1*2^15 + 1*2^14 + 1*2^13 + 1*2^12 + 1*2^11 + 0*2^10 + 
1*2^9 + 1*2^8 + 0*2^7 + 1*2^6 + 0*2^5 + 1*2^4 + 0*2^3 + 
0*2^2 + 0*2^1 + 0*2^0
则：
dec(4294966296) * dec(4294966096) = dec(4294966296)*2^31 + dec(4294966296)*2^30 + 
dec(4294966296)*2^29 + dec(4294966296)*2^28 + dec(4294966296)*2^27 +
dec(4294966296)*2^26 + dec(4294966296)*2^25 + dec(4294966296)*2^24 + 
dec(4294966296)*2^23 + dec(4294966296)*2^22 + dec(4294966296)*2^21 + 
dec(4294966296)*2^20 + dec(4294966296)*2^19 + dec(4294966296)*2^18 + 
dec(4294966296)*2^17 + dec(4294966296)*2^16 + dec(4294966296)*2^15 + 
dec(4294966296)*2^14 + dec(4294966296)*2^13 + dec(4294966296)*2^12 + 
dec(4294966296)*2^11 + 0*2^10 + dec(4294966296)*2^9 + dec(4294966296)*2^8 + 
0*2^7 + dec(4294966296)*2^6 + 0*2^5 + dec(4294966296)*2^4 + 0*2^3 + 
0*2^2 + 0*2^1 + 0*2^0
</code></pre>
<p>这公式看着复杂一大堆，但是如果把指数看作左移运算符，那么，乘法就转化为左移和加法了。</p>
<h3 id="3流水线加法">3.流水线加法</h3>
<p>假设<code>num = a + b + c + d + e + f + g + h</code>,将其转化为流水线加法</p>
<div style="text-align: center"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="467" height="227" viewBox="-0.5 -0.5 467 227" content="<mxfile host=&quot;Electron&quot; modified=&quot;2025-03-28T14:41:27.911Z&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36&quot; version=&quot;21.2.8&quot; etag=&quot;QU2krXP4jOB8XXTEE7Q0&quot; type=&quot;device&quot;><diagram name=&quot;第 1 页&quot; id=&quot;OolHbxllDTwcR6uB0KDE&quot;>7ZrNjpswFIWfJtsqYAjJtjNpu2ilSlm0s3SDB6gAR46ZkD59TbAxxEZiNMAdpNlE+PgH7PvlooO9Qg9Z+ZXhU/yDhiRdueuwXKHHletuN4H4rYRrLXjIrYWIJWEtOVo4JP+IFNdSLZKQnDsNOaUpT05d8UjznBx5R8OM0Uu32TNNu3c94YgYwuGIU1P9lYQ8ltNyA61/I0kUqzs7m11dk2HVWM7kHOOQXloS2q/QA6OU11dZ+UDSau3UutT9vvTUNg/GSM6HdJDrfuZXNTcSiqnKImU8phHNcbrX6mdGizwk1QBrUdJtvlN6EqIjxL+E86uMGy44FVLMs1TWkjLhv6vun3xZemrVPJZy5Fvhqgo5Z9dWp6r41K7T3W4l1a+eXzWpzgqdacGOUkKSIMwioiK2MxfSacIjsCY0I+I2ogkjKebJS3d4LAGLmnY6BuJChsEeEvk4Lzgt5KDYCJIOQbVqlzjh5HDCtwldxD+uu9xyPMI4KXsx6Zmd6uBLXuUftuH3ovH3pBS3yFfN3rIe3lIQHYCaPz5WsutPmogRm4C567uABXeRqGmXve6C0TzGoPj4Bq9/wHlt3hQAvG6WwuuEKTUwU+orgjh6Sg0MRI/wiAZwiG6XgugA1CZ4U9tTKnJnS6k7g9cQnFeE4HhV2fz9AzthTnWU02knVQSXVNXztCgl8JTuACn9MFNCsrgpUEpNO/UMTqkHaKecxfipKSn1LZROYM4GB8U0URE4pT6giXI+XJSQbDYKklLTR8XwlAL6KGcxRkpT2mFUI/sGSncWSoPBYRyfUot7SiLTQcz+DXXb4x9nANVdnoFyRgfVtRkoQFBd00AJUB0jUrN7qL5vx3OAukAPNT6oNg8FuCNl2ZISoJqRmt1G9X2RmwPU5dmoCTKqzUZBgmraKAEqAgfV9wBBXaCTGh9Ui5NCgBtSlh0pAaqZUmbflLoDFTkzgro8MzVBRrWYKVBQrWbKBwfV28KBipZnpiY4NGUxU+oUH8ipKauZMt99s5upzR2o/oygusaa5EX27pbEm+6LnSjqs5T1Rrw+kIr2/wE=</diagram></mxfile>"><defs><filter id="dropShadow"><feGaussianBlur in="SourceAlpha" stdDeviation="1.7" result="blur"></feGaussianBlur><feOffset in="blur" dx="3" dy="3" result="offsetBlur"></feOffset><feFlood flood-color="#3D4574" flood-opacity="0.4" result="offsetColor"></feFlood><feComposite in="offsetColor" in2="offsetBlur" operator="in" result="offsetBlur"></feComposite><feBlend in="SourceGraphic" in2="offsetBlur"></feBlend></filter></defs><g filter="url(#dropShadow)"><path d="M 20 20 L 20.03 40 L 50.03 40 L 50.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 50 48.88 L 46.52 41.87 L 50.02 43.63 L 53.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="0" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 1px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">a</div></div></div></foreignObject><text x="20" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">a</text></switch></g><path d="M 80 20 L 80.03 40 L 50.49 40 L 50.31 43.64" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 50.05 48.88 L 46.9 41.72 L 50.31 43.64 L 53.89 42.06 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="60" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 61px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">b</div></div></div></foreignObject><text x="80" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">b</text></switch></g><path d="M 140 20 L 140.03 40 L 170.03 40 L 170.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 170 48.88 L 166.52 41.87 L 170.02 43.63 L 173.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="120" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 121px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">c</div></div></div></foreignObject><text x="140" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">c</text></switch></g><path d="M 200 20 L 200.03 40 L 170.49 40 L 170.31 43.64" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 170.05 48.88 L 166.9 41.72 L 170.31 43.64 L 173.89 42.06 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="180" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 181px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">d</div></div></div></foreignObject><text x="200" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">d</text></switch></g><path d="M 260 20 L 260.03 40 L 290.03 40 L 290.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 290 48.88 L 286.52 41.87 L 290.02 43.63 L 293.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="240" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 241px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">e</div></div></div></foreignObject><text x="260" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">e</text></switch></g><path d="M 320 20 L 320.03 40 L 290.03 40 L 290.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 290 48.88 L 286.52 41.87 L 290.02 43.63 L 293.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="300" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 301px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">f</div></div></div></foreignObject><text x="320" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">f</text></switch></g><path d="M 380 20 L 380.03 40 L 410.03 40 L 410.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 410 48.88 L 406.52 41.87 L 410.02 43.63 L 413.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="360" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 361px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">g</div></div></div></foreignObject><text x="380" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">g</text></switch></g><path d="M 440 20 L 440.03 40 L 410.03 40 L 410.02 43.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 410 48.88 L 406.52 41.87 L 410.02 43.63 L 413.52 41.89 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="420" y="0" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 10px; margin-left: 421px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">h</div></div></div></foreignObject><text x="440" y="14" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">h</text></switch></g><path d="M 50 70 L 50.03 100 L 83.63 100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 88.88 100 L 81.88 103.5 L 83.63 100 L 81.88 96.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="30" y="50" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 60px; margin-left: 31px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig0</div></div></div></foreignObject><text x="50" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig0</text></switch></g><path d="M 170 70 L 170.03 100 L 136.37 100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 131.12 100 L 138.12 96.5 L 136.37 100 L 138.12 103.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="150" y="50" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 60px; margin-left: 151px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig1</div></div></div></foreignObject><text x="170" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig1</text></switch></g><path d="M 290 70 L 290.03 100 L 323.63 100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 328.88 100 L 321.88 103.5 L 323.63 100 L 321.88 96.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="270" y="50" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 60px; margin-left: 271px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig2</div></div></div></foreignObject><text x="290" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig2</text></switch></g><path d="M 410 70 L 410.03 100 L 376.37 100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 371.12 100 L 378.12 96.5 L 376.37 100 L 378.12 103.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="390" y="50" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 60px; margin-left: 391px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig3</div></div></div></foreignObject><text x="410" y="64" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig3</text></switch></g><path d="M 110 110 L 110.03 140 L 203.63 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 208.88 140 L 201.88 143.5 L 203.63 140 L 201.88 136.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="90" y="90" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 100px; margin-left: 91px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig4</div></div></div></foreignObject><text x="110" y="104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig4</text></switch></g><path d="M 350 110 L 350.03 140 L 256.37 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 251.12 140 L 258.12 136.5 L 256.37 140 L 258.12 143.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="330" y="90" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 100px; margin-left: 331px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig5</div></div></div></foreignObject><text x="350" y="104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig5</text></switch></g><path d="M 230 150 L 230 193.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"></path><path d="M 230 198.88 L 226.5 191.88 L 230 193.63 L 233.5 191.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"></path><rect x="210" y="130" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 140px; margin-left: 211px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">dig6</div></div></div></foreignObject><text x="230" y="144" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">dig6</text></switch></g><rect x="210" y="200" width="40" height="20" rx="3" ry="3" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"></rect><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; width: 38px; height: 1px; padding-top: 210px; margin-left: 211px"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0; text-align: center"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgba(0, 0, 0, 1); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal">num</div></div></div></foreignObject><text x="230" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">num</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"></g><a transform="translate(0,-5)" href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg></div>
<h3 id="4按需截位">4.按需截位</h3>
<pre><code>dec(4294966296) * dec(4294966096) = hex(FFFFF76800124F80)
其中16bit乘16bit的乘法器，最大位宽为32bit，取后32bit，即
hex(00124F80) = dec(1200000)
</code></pre>
<p>一个完整的乘法流程就算完成了。</p>
<h2 id="3verilog实现">3.verilog实现</h2>
<details> <summary><font size="4" color="orange">16位有符号乘法器代码</font></summary> <pre><code class="language-verilog">
`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 2025/03/28 22:54:41
// Design Name: 
// Module Name: multiplier_16
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 16位有符号乘法器
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////
module multiplier_16
#(  
    parameter A_WIDTH  = 16 ,//数据A的位宽
    parameter A_SIGNED = 1  ,//数据A是否有符号
    parameter B_WIDTH  = 16 ,//数据B的位宽
    parameter B_SIGNED = 1  //数据B是否有符号
)
(
    input       clk ,
    input       rst ,
    input   [A_WIDTH-1:0]   A,
    input   [B_WIDTH-1:0]   B,
    output  [A_WIDTH + B_WIDTH - 1:0]   P
    );
    wire [32-1:0]    C;
    wire [32-1:0]    D;
    assign C = A_SIGNED?{{32-A_WIDTH{A[A_WIDTH-1]}},A}:{{32-A_WIDTH{1'b0}},A};
    assign D = B_SIGNED?{{32-B_WIDTH{B[B_WIDTH-1]}},B}:{{32-B_WIDTH{1'b0}},B};
//*************************************************
    genvar  i0;
    reg [31:0]  sum0 [15:0];
    generate
        for (i0 = 0;i0&lt;=15 ;i0=i0+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum0[i0]    &lt;= 0;
                end
                else begin
                    case({D[2*i0+1],D[2*i0]})
                        2'b00:begin
                            sum0[i0]    &lt;= 0 &lt;&lt;  (2*i0);
                        end
                        2'b01:begin
                            sum0[i0]    &lt;= (0 + C)  &lt;&lt;  (2*i0);
                        end
                        2'b10:begin
                            sum0[i0]    &lt;= ({C[30:0],1'b0} + 0)  &lt;&lt;  (2*i0);
                        end
                        2'b11:begin
                            sum0[i0]    &lt;= ({C[30:0],1'b0} + C)  &lt;&lt;  (2*i0);
                        end                        
                    endcase
                end
            end
        end       
    endgenerate
    genvar  i1;
    reg [31:0]  sum1 [7:0];
    generate
        for (i1 = 0;i1&lt;=7 ;i1=i1+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum1[i1]    &lt;= 0;
                end
                else begin
                    sum1[i1]    &lt;= sum0[2*i1] + sum0[2*i1+1];
                end
            end
        end       
    endgenerate
    genvar  i2;
    reg [31:0]  sum2 [3:0];
    generate
        for (i2 = 0;i2&lt;=3 ;i2=i2+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum2[i2]    &lt;= 0;
                end
                else begin
                    sum2[i2]    &lt;= sum1[2*i2] + sum1[2*i2+1];
                end
            end
        end       
    endgenerate
    genvar  i3;
    reg [31:0]  sum3 [1:0];
    generate
        for (i3 = 0;i3&lt;=1 ;i3=i3+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum3[i3]    &lt;= 0;
                end
                else begin
                    sum3[i3]    &lt;= sum2[2*i3] + sum2[2*i3+1];
                end
            end
        end       
    endgenerate
    reg [31:0]  sum4;
    always @(posedge clk)begin
        if(rst)begin
            sum4    &lt;= 0;
        end
        else begin
            sum4    &lt;= sum3[0] + sum3[1];
        end
    end
    assign P = sum4;
endmodule</code></pre> </details>
<details>  <summary><font size="4" color="orange">32位有符号乘法器代码</font></summary>  <pre><code class="language-cpp">
`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: 
// Engineer: 
// 
// Create Date: 2024/09/11 22:21:12
// Design Name: 
// Module Name: multiplier_pp
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////
module multiplier
#(  
    parameter A_WIDTH  = 32 ,//数据A的位宽
    parameter A_SIGNED = 1  ,//数据A是否有符号
    parameter B_WIDTH  = 32 ,//数据B的位宽
    parameter B_SIGNED = 1  //数据B是否有符号
)
(
    input       clk ,
    input       rst ,
    input   [A_WIDTH-1:0]   A,
    input   [B_WIDTH-1:0]   B,
    output  [A_WIDTH + B_WIDTH - 1:0]   P
    );
    wire [64-1:0]    C;
    wire [64-1:0]    D;
    assign C = A_SIGNED?{{64-A_WIDTH{A[A_WIDTH-1]}},A}:{{64-A_WIDTH{1'b0}},A};
    assign D = B_SIGNED?{{64-B_WIDTH{B[B_WIDTH-1]}},B}:{{64-B_WIDTH{1'b0}},B};
//*************************************************
    genvar  i0;
    reg [63:0]  sum0 [31:0];
    generate
        for (i0 = 0;i0&lt;=31 ;i0=i0+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum0[i0]    &lt;= 0;
                end
                else begin
                    case({D[2*i0+1],D[2*i0]})
                        2'b00:begin
                            sum0[i0]    &lt;= 0 &lt;&lt;  (2*i0);
                        end
                        2'b01:begin
                            sum0[i0]    &lt;= (0 + C)  &lt;&lt;  (2*i0);
                        end
                        2'b10:begin
                            sum0[i0]    &lt;= ({C[62:0],1'b0} + 0)  &lt;&lt;  (2*i0);
                        end
                        2'b11:begin
                            sum0[i0]    &lt;= ({C[62:0],1'b0} + C)  &lt;&lt;  (2*i0);
                        end                        
                    endcase
                end
            end
        end       
    endgenerate
    genvar  i1;
    reg [63:0]  sum1 [15:0];
    generate
        for (i1 = 0;i1&lt;=15 ;i1=i1+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum1[i1]    &lt;= 0;
                end
                else begin
                    sum1[i1]    &lt;= sum0[2*i1] + sum0[2*i1+1];
                end
            end
        end       
    endgenerate
    genvar  i2;
    reg [63:0]  sum2 [7:0];
    generate
        for (i2 = 0;i2&lt;=7 ;i2=i2+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum2[i2]    &lt;= 0;
                end
                else begin
                    sum2[i2]    &lt;= sum1[2*i2] + sum1[2*i2+1];
                end
            end
        end       
    endgenerate
    genvar  i3;
    reg [63:0]  sum3 [3:0];
    generate
        for (i3 = 0;i3&lt;=3 ;i3=i3+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum3[i3]    &lt;= 0;
                end
                else begin
                    sum3[i3]    &lt;= sum2[2*i3] + sum2[2*i3+1];
                end
            end
        end       
    endgenerate
    genvar  i4;
    reg [63:0]  sum4 [1:0];
    generate
        for (i4 = 0;i4&lt;=1 ;i4=i4+1 ) begin
            always @(posedge clk)begin
                if(rst)begin
                    sum4[i4]    &lt;= 0;
                end
                else begin
                    sum4[i4]    &lt;= sum3[2*i4] + sum3[2*i4+1];
                end
            end
        end       
    endgenerate
    reg [63:0]  sum5;
    always @(posedge clk)begin
        if(rst)begin
            sum5    &lt;= 0;
        end
        else begin
            sum5    &lt;= sum4[0] + sum4[1];
        end
    end
    assign P = sum5;
endmodule</code> </pre> </details>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="1.1914970786180556" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-28 23:39">2025-03-28 23:38</span>&nbsp;
<a href="https://www.cnblogs.com/SuperBigSaltFish0">超级大咸鱼</a>&nbsp;
阅读(<span id="post_view_count">61</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18798989" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18798989);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18798989', targetLink: 'https://www.cnblogs.com/SuperBigSaltFish0/p/18798989', title: 'verilog实现32位有符号流水乘法器' })">举报</a>
</div>
        
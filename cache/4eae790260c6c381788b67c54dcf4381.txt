
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/haoxianrui/p/18683051" title="å‘å¸ƒäº 2025-01-21 10:05">
    <span role="heading" aria-level="2">ã€Œyoulai-bootã€å…¥é—¨ç¯‡ï¼šä»0åˆ°1æ­å»º Javaã€Spring Bootã€Spring Security ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/675291/202501/675291-20250121095917679-540016379.png" alt="ã€Œyoulai-bootã€å…¥é—¨ç¯‡ï¼šä»0åˆ°1æ­å»º Javaã€Spring Bootã€Spring Security ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿ" class="desc_img">
        æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Java å’Œ Spring Boot 3ï¼Œä»é›¶å¼€å§‹æ„å»ºå¼€æºçš„ youlai-boot ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿï¼Œæ¶µç›– MySQLã€Redis æ•´åˆåŠ Spring Securityï¼Œé€‚åˆå‰ç«¯å¼€å‘è€…å’Œåç«¯åˆå­¦è€…ã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>ğŸš€ ä½œè€…ä¸»é¡µï¼š <a href="https://www.youlai.tech" target="_blank" rel="noopener nofollow">æœ‰æ¥æŠ€æœ¯</a><br>
ğŸ”¥ å¼€æºé¡¹ç›®ï¼š <a href="https://gitee.com/youlaitech/youlai-mall" target="_blank" rel="noopener nofollow">youlai-mall </a>ï¸±<a href="https://gitee.com/youlaiorg/vue3-element-admin" target="_blank" rel="noopener nofollow">vue3-element-admin</a>ï¸±<a href="https://gitee.com/youlaiorg/youlai-boot" target="_blank" rel="noopener nofollow">youlai-boot</a>ï¸±<a href="https://gitee.com/youlaiorg/vue-uniapp-template" target="_blank" rel="noopener nofollow">vue-uniapp-template</a><br>
ğŸŒº ä»“åº“ä¸»é¡µï¼š <a href="https://gitcode.com/org/youlai" target="_blank" rel="noopener nofollow">GitCode</a>ï¸± <a href="https://gitee.com/haoxr" target="_blank" rel="noopener nofollow">Gitee</a>  ï¸± <a href="https://github.com/haoxianrui" target="_blank" rel="noopener nofollow">Github</a><br>
ğŸ’– æ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­è¯„è®º ğŸ“ å¦‚æœ‰é”™è¯¯æ•¬è¯·çº æ­£ï¼</p>
</blockquote>
<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æœ¬æ–‡åŸºäº <strong>Java</strong> å’Œ <strong>Spring Boot 3</strong>ï¼Œä» 0 åˆ° 1 å®Œæˆä¸€ä¸ªä¼ä¸šçº§åç«¯é¡¹ç›®çš„å¼€å‘ã€‚ä¾æ¬¡æ•´åˆ <strong>MySQL</strong> å’Œ <strong>Redis</strong>ï¼Œå®ç°åŸºç¡€çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰æ¥å£ï¼Œå¹¶é€šè¿‡ <strong>Spring Security</strong> å®Œæˆç™»å½•è®¤è¯ä¸æ¥å£æƒé™æ§åˆ¶ï¼Œæœ€ç»ˆæ„å»ºå®Œæ•´çš„ä¼ä¸šçº§å®‰å…¨ç®¡ç†æ¡†æ¶ã€‚</p>
<p>ä½œä¸ºå¼€æºé¡¹ç›®<a href="https://gitee.com/youlaiorg/youlai-boot" target="_blank" rel="noopener nofollow"><strong>youlai-boot</strong></a> çš„å…¥é—¨ç¯‡ï¼Œæœ¬æ–‡æ—¨åœ¨å¸®åŠ©å‰ç«¯å¼€å‘è€…æˆ–åç«¯åˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹ Java åç«¯å¼€å‘ã€‚é€šè¿‡ä¸€æ­¥æ­¥å®è·µï¼ŒæŒæ¡é¡¹ç›®çš„æ ¸å¿ƒé€»è¾‘ä¸å®ç°ç»†èŠ‚ï¼Œä¸ä»…èƒ½æ”¾å¿ƒä½¿ç”¨ï¼Œè¿˜èƒ½è½»æ¾æ‰©å±•å’ŒäºŒæ¬¡å¼€å‘ã€‚</p>
<h1 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h1>
<p>æœ¬ç« èŠ‚ä»‹ç»å®‰è£… Java å¼€å‘æ‰€éœ€çš„ç¯å¢ƒï¼ŒåŒ…æ‹¬ JDKã€Maven å’Œ IntelliJ IDEAï¼ˆç®€ç§° IDEAï¼‰ï¼Œè¿™äº›å·¥å…·æ˜¯ Java å¼€å‘çš„æ ¸å¿ƒç¯å¢ƒã€‚</p>
<hr>
<h2 id="å®‰è£…-jdk">å®‰è£… JDK</h2>
<p><strong>JDKï¼ˆJava Development Kitï¼‰</strong> æ˜¯ Java å¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…å«ç¼–è¯‘å™¨ã€è¿è¡Œæ—¶ç¯å¢ƒç­‰ï¼Œæ”¯æŒ Java åº”ç”¨ç¨‹åºçš„å¼€å‘ä¸è¿è¡Œã€‚</p>
<h3 id="ä¸‹è½½-jdk">ä¸‹è½½ JDK</h3>
<p>è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ JDK å®‰è£…åŒ…ï¼š<br>
<a href="https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.exe" target="_blank" rel="noopener nofollow">https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.exe</a></p>
<h3 id="å®‰è£…-jdk-1">å®‰è£… JDK</h3>
<p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£…åŒ…ï¼Œæ ¹æ®å¼•å¯¼å®Œæˆå®‰è£…ã€‚<br>
ç¤ºä¾‹å®‰è£…è·¯å¾„ï¼š<code>D:\Java\jdk-17.0.3.1</code></p>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h3>
<ul>
<li>æ‰“å¼€ <strong>ç³»ç»Ÿå±æ€§</strong> -&gt; <strong>é«˜çº§ç³»ç»Ÿè®¾ç½®</strong> -&gt; <strong>ç¯å¢ƒå˜é‡</strong></li>
<li>æ–°å»ºç³»ç»Ÿå˜é‡ <code>JAVA_HOME</code>ï¼Œå€¼ä¸º <code>D:\Java\jdk-17.0.3.1</code></li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/image-20241127172500691.png" alt="" loading="lazy"></p>
<ul>
<li>åœ¨ <code>Path</code> ç¯å¢ƒå˜é‡ä¸­ï¼Œæ·»åŠ  <code>%JAVA_HOME%\bin</code></li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/image-20241127172531273.png" alt="" loading="lazy"></p>
<h3 id="éªŒè¯å®‰è£…">éªŒè¯å®‰è£…</h3>
<p>åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ Java ç‰ˆæœ¬ï¼š</p>
<pre><code class="language-bash">java -version
</code></pre>
<p>è¾“å‡ºç±»ä¼¼å¦‚ä¸‹å†…å®¹è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241127174145418.png" alt="" loading="lazy"></p>
<hr>
<h2 id="å®‰è£…-maven">å®‰è£… Maven</h2>
<p><strong>Maven</strong> æ˜¯ä¸€ä¸ªæµè¡Œçš„ Java æ„å»ºå’Œä¾èµ–ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äºå‰ç«¯çš„ npmï¼Œç”¨äºç®¡ç†é¡¹ç›®çš„æ„å»ºæµç¨‹åŠç¬¬ä¸‰æ–¹ä¾èµ–åº“ã€‚</p>
<h3 id="ä¸‹è½½-maven">ä¸‹è½½ Maven</h3>
<p>è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼Œä¸‹è½½æœ€æ–°çš„ <code>bin.zip</code> æ–‡ä»¶ï¼š<a href="https://maven.apache.org/download.cgi" target="_blank" rel="noopener nofollow">https://maven.apache.org/download.cgi</a></p>
<p>å°† <code>bin.zip</code> è§£å‹åˆ°æœ¬åœ°ç›®å½•ï¼Œç¤ºä¾‹è§£å‹è·¯å¾„ï¼š<code>D:\Soft\apache-maven-3.9.5</code></p>
<h3 id="é…ç½®é˜¿é‡Œäº‘é•œåƒ">é…ç½®é˜¿é‡Œäº‘é•œåƒ</h3>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ <code>D:\Soft\apache-maven-3.9.5\conf\settings.xml</code>ï¼Œåœ¨ <code>&lt;mirrors&gt;</code> èŠ‚ç‚¹ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-xml">&lt;mirrors&gt;
    &lt;mirror&gt;
        &lt;id&gt;alimaven&lt;/id&gt;
        &lt;name&gt;aliyun maven&lt;/name&gt;
        &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
        &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;       
    &lt;/mirror&gt;
&lt;/mirrors&gt;
</code></pre>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡-1">é…ç½®ç¯å¢ƒå˜é‡</h3>
<ul>
<li>æ–°å»ºç³»ç»Ÿå˜é‡ <code>M2_HOME</code>ï¼Œå€¼ä¸º <code>D:\Soft\apache-maven-3.9.5</code></li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/image-20241127175409747.png" alt="" loading="lazy"></p>
<ul>
<li>åœ¨ <code>Path</code> ç¯å¢ƒå˜é‡ä¸­ï¼Œæ·»åŠ  <code>%M2_HOME%\bin</code></li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/wps2.jpg" alt="" loading="lazy"></p>
<h3 id="éªŒè¯å®‰è£…-1">éªŒè¯å®‰è£…</h3>
<p>åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ Maven ç‰ˆæœ¬ï¼š</p>
<pre><code class="language-bash">mvn -v
</code></pre>
<p>è¾“å‡ºç±»ä¼¼å¦‚ä¸‹å†…å®¹è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241127180216250.png" alt="" loading="lazy"></p>
<hr>
<h2 id="å®‰è£…-idea">å®‰è£… IDEA</h2>
<p><strong>IntelliJ IDEA</strong> æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Java é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œç”± JetBrains å¼€å‘ï¼Œå¹¿æ³›ç”¨äº Java é¡¹ç›®çš„å¼€å‘ã€è°ƒè¯•å’Œè¿è¡Œã€‚</p>
<h3 id="ä¸‹è½½-idea">ä¸‹è½½ IDEA</h3>
<p>è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼Œä¸‹è½½é€‚åˆæ‚¨ç³»ç»Ÿçš„å®‰è£…åŒ…ï¼š<br>
<a href="https://www.jetbrains.com/idea/download" target="_blank" rel="noopener nofollow">https://www.jetbrains.com/idea/download</a></p>
<h3 id="å®‰è£…-idea-1">å®‰è£… IDEA</h3>
<p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£…åŒ…ï¼ŒæŒ‰å¼•å¯¼å®Œæˆå®‰è£…å³å¯ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241128104857210.png" alt="" loading="lazy"></p>
<p>å…·ä½“çš„é…ç½®åœ¨åˆ›å»ºé¡¹ç›®ä¹‹å‰è¯´æ˜ã€‚</p>
<h2 id="å®‰è£…-mysql">å®‰è£… MySQL</h2>
<h3 id="å®‰è£…-mysql-æœåŠ¡">å®‰è£… MySQL æœåŠ¡</h3>
<ul>
<li><strong>Windows å®‰è£… MySQL 8</strong>ï¼š<a href="https://youlai.blog.csdn.net/article/details/133272887" target="_blank" rel="noopener nofollow">https://youlai.blog.csdn.net/article/details/133272887</a></li>
<li><strong>Linux  å®‰è£… MySQL 8</strong>ï¼š<a href="https://youlai.blog.csdn.net/article/details/130398179" target="_blank" rel="noopener nofollow">https://youlai.blog.csdn.net/article/details/130398179</a></li>
</ul>
<h3 id="å®‰è£…-mysql-å¯è§†åŒ–å·¥å…·">å®‰è£… MySQL å¯è§†åŒ–å·¥å…·</h3>
<p>æ¨èä½¿ç”¨ <strong>Navicat</strong>ï¼Œè¿™æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œä½†éœ€è¦ä»˜è´¹ã€‚å¦‚æœä½ å› æœªä»˜è´¹è€Œé‡åˆ°ä½¿ç”¨é™åˆ¶ï¼Œå¯ä»¥é€‰æ‹© <strong>DBeaver</strong> ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>Navicat å®˜æ–¹ä¸‹è½½åœ°å€</strong>ï¼š<a href="https://www.navicat.com.cn/download/navicat-premium" target="_blank" rel="noopener nofollow">https://www.navicat.com.cn/download/navicat-premium</a></li>
<li><strong>DBeaver å®˜æ–¹ä¸‹è½½åœ°å€</strong>ï¼š<a href="https://dbeaver.io/" target="_blank" rel="noopener nofollow">https://dbeaver.io/</a></li>
</ul>
<p>ä¸‹è½½å¹¶å®‰è£… Navicat åï¼Œä½ å°†è·å¾— <strong>14 å¤©çš„å…è´¹è¯•ç”¨æœŸ</strong>ã€‚å®‰è£…å®Œæˆåï¼Œè¿æ¥åˆ° MySQL æœåŠ¡ï¼Œå³å¯å¯¹æ•°æ®åº“å’Œè¡¨è¿›è¡Œå¯è§†åŒ–æ“ä½œï¼Œä½“éªŒéå¸¸æµç•…ã€‚</p>
<p><strong>Navicat ç•Œé¢æ•ˆæœï¼š</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20250115170806505.png" alt="" loading="lazy"></p>
<h2 id="å®‰è£…-redis">å®‰è£… Redis</h2>
<h3 id="å®‰è£…-redis-æœåŠ¡">å®‰è£… Redis æœåŠ¡</h3>
<ul>
<li><strong>Windows å®‰è£… Redis</strong>ï¼š<a href="https://youlai.blog.csdn.net/article/details/133410293" target="_blank" rel="noopener nofollow">https://youlai.blog.csdn.net/article/details/133410293</a></li>
<li><strong>Linux å®‰è£… Redis</strong>ï¼š<a href="https://youlai.blog.csdn.net/article/details/130439335" target="_blank" rel="noopener nofollow">https://youlai.blog.csdn.net/article/details/130439335</a></li>
</ul>
<h3 id="å®‰è£…-redis-å¯è§†åŒ–å·¥å…·">å®‰è£… Redis å¯è§†åŒ–å·¥å…·</h3>
<p>æ¨èä½¿ç”¨å¼€æºçš„ <strong>AnotherRedisDesktopManager</strong>ï¼Œè¿™æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ä¸”å…è´¹çš„ Redis å¯è§†åŒ–å·¥å…·ã€‚</p>
<ul>
<li><strong>AnotherRedisDesktopManager ä¸‹è½½åœ°å€</strong>ï¼š<a href="https://gitee.com/qishibo/AnotherRedisDesktopManager/releases" target="_blank" rel="noopener nofollow">https://gitee.com/qishibo/AnotherRedisDesktopManager/releases</a></li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/2983a0881f3361783b37e31862f2da02.png" alt="" loading="lazy"></p>
<p><strong>å®‰è£…æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ä¸‹è½½å®‰è£…ç¨‹åºï¼ˆ.exe æ–‡ä»¶ï¼‰ã€‚</li>
<li>æŒ‰ç…§å®‰è£…å‘å¯¼é€æ­¥æ“ä½œï¼Œå®Œæˆå®‰è£…ã€‚</li>
</ol>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»â€œæ–°å»ºè¿æ¥â€ã€‚</li>
<li>è¾“å…¥ Redis æœåŠ¡å™¨çš„è¿æ¥ä¿¡æ¯ï¼ˆå¦‚ä¸»æœºåœ°å€ã€ç«¯å£ã€å¯†ç ç­‰ï¼‰ã€‚</li>
<li>è¿æ¥æˆåŠŸåï¼Œå³å¯å¯¹ Redis æ•°æ®è¿›è¡Œå¯è§†åŒ–æ“ä½œã€‚</li>
</ol>
<p><strong>AnotherRedisDesktopManager ç•Œé¢æ•ˆæœï¼š</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/49210f908669a078d930113c1558f68b.png" alt="" loading="lazy"></p>
<p><strong>è¿æ¥æˆåŠŸç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/6d9c76824e2094c20e631b636d484531.png" alt="" loading="lazy"></p>
<h1 id="é¡¹ç›®æ­å»º">é¡¹ç›®æ­å»º</h1>
<h2 id="æ–°å»ºé¡¹ç›®">æ–°å»ºé¡¹ç›®</h2>
<p>æ‰“å¼€ <strong>IDEA</strong>ï¼Œé€‰æ‹© <strong>Projects â†’ New Project</strong>ã€‚</p>
<ol>
<li><strong>é¡¹ç›®åç§°</strong>ï¼šè¾“å…¥ <code>youlai-boot</code>ï¼ˆå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰ã€‚</li>
<li><strong>é¡¹ç›®ç±»å‹</strong>ï¼šé€‰æ‹© <strong>Maven</strong>ã€‚</li>
<li><strong>JDK ç‰ˆæœ¬</strong>ï¼šé€‰æ‹© <strong>JDK 17</strong>ï¼ˆç¡®ä¿å·²å®‰è£… JDK 17ï¼‰ã€‚</li>
<li><strong>é¡¹ç›®ä¿¡æ¯</strong>ï¼š
<ul>
<li><strong>Group</strong>ï¼šå¡«å†™ <code>com.youlai</code>ï¼ˆå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰ã€‚</li>
<li><strong>Artifact</strong>ï¼šå¡«å†™ <code>youlai-boot</code>ï¼ˆå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰ã€‚</li>
<li><strong>Package name</strong>ï¼šå¡«å†™ <code>com.youlai.boot</code>ï¼ˆå¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://www.youlai.tech/storage/blog/image-20241128124956778.png" alt="" loading="lazy"></p>
<p>ç‚¹å‡» <strong>Next</strong>ï¼Œåœ¨å·¦ä¾§çš„ä¾èµ–åˆ—è¡¨ä¸­å‹¾é€‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129131335505.png" alt="" loading="lazy"></p>
<p>å®Œæˆé¡¹ç›®åˆå§‹åŒ–åï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241128130027516.png" alt="" loading="lazy"></p>
<h2 id="é…ç½®å¼€å‘ç¯å¢ƒ">é…ç½®å¼€å‘ç¯å¢ƒ</h2>
<h3 id="é…ç½®-jdk">é…ç½® JDK</h3>
<p>é€šè¿‡ <strong>File â†’ Project Structure</strong>ï¼ˆå¿«æ·é”® <strong>Ctrl + Alt + Shift + S</strong>ï¼‰æ‰“å¼€é¡¹ç›®ç»“æ„é…ç½®é¢æ¿ï¼Œç¡®ä¿ <strong>Project</strong> å’Œ <strong>Modules</strong> ä½¿ç”¨çš„ SDK ç‰ˆæœ¬ä¸ºå‰é¢å®‰è£…çš„ JDK 17ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241128164048566.png" alt="" loading="lazy"></p>
<h3 id="é…ç½®-maven">é…ç½® Maven</h3>
<p>é€šè¿‡ <strong>File  â†’ Settings</strong>ï¼ˆå¿«æ·é”® <strong>Ctrl + Alt + S</strong>ï¼‰æ‰“å¼€è®¾ç½®é¢æ¿ï¼Œåˆ‡æ¢åˆ° <strong>Maven</strong> é€‰é¡¹ï¼Œå¹¶å°† Maven è®¾ç½®ä¸ºå‰é¢å®‰è£…åˆ°æœ¬åœ°çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241128164823123.png" alt="" loading="lazy"></p>
<h3 id="éªŒè¯é…ç½®">éªŒè¯é…ç½®</h3>
<p>åœ¨ IDEA çš„ Terminal ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ <code>mvn -v</code>ï¼ŒéªŒè¯ Maven æ˜¯å¦æ­£ç¡®ä½¿ç”¨äº† JDK 17ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129130035208.png" alt="" loading="lazy"></p>
<h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h2>
<h3 id="åˆ›å»ºç¬¬ä¸€ä¸ªæ¥å£">åˆ›å»ºç¬¬ä¸€ä¸ªæ¥å£</h3>
<ol>
<li>åœ¨ <code>src/main/java</code> ç›®å½•ä¸‹çš„ <code>com.youlai.boot</code> åŒ…ä¸­ï¼Œæ–°å»ºä¸€ä¸ªåä¸º <code>controller</code> çš„åŒ…ã€‚</li>
<li>åœ¨ <code>controller</code> åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>TestController</code> çš„ Java ç±»ã€‚</li>
<li>åœ¨ <code>TestController</code> ç±»ä¸­æ·»åŠ ä¸€ä¸ªç®€å•çš„ <code>hello-world</code> æ¥å£ã€‚</li>
</ol>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129132039510.png" alt="" loading="lazy"></p>
<p>ä»¥ä¸‹æ˜¯ <code>TestController</code> ç±»çš„ä»£ç ï¼š</p>
<pre><code class="language-java">/**
 * æµ‹è¯•æ¥å£
 *
 * @author youlai
 */
@RestController
public class TestController {

    @GetMapping("/hello-world")
    public String test() {
        return "hello world";
    }

}
</code></pre>
<h3 id="å¯åŠ¨æµ‹è¯•">å¯åŠ¨æµ‹è¯•</h3>
<p>åœ¨é¡¹ç›®çš„å³ä¸Šè§’ï¼Œç‚¹å‡» ğŸ (æ‰‹åŠ¨ç»¿è‰²)å›¾æ ‡ä»¥è°ƒè¯•è¿è¡Œé¡¹ç›®ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129132302035.png" alt="" loading="lazy"></p>
<p>æ§åˆ¶å°æ˜¾ç¤º <code>Tomcat å·²åœ¨ç«¯å£ 8080 (http) </code>ï¼Œè¡¨ç¤ºåº”ç”¨æˆåŠŸå¯åŠ¨</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129133403785.png" alt="" loading="lazy"></p>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <code>http://localhost:8080/hello-world</code>ï¼Œé¡µé¢å°†æ˜¾ç¤º <code>hello world</code>ï¼Œè¡¨ç¤ºæ¥å£æ­£å¸¸è¿è¡Œã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129133430981.png" alt="" loading="lazy"></p>
<h2 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</h2>
<p>ä¸ºå®ç°åº”ç”¨ä¸ MySQL çš„è¿æ¥ä¸æ“ä½œï¼Œæ•´åˆ MyBatis-Plus å¯ç®€åŒ–æ•°æ®åº“æ“ä½œï¼Œå‡å°‘é‡å¤çš„ CRUD ä»£ç ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œå®ç°é«˜æ•ˆã€ç®€æ´ã€å¯ç»´æŠ¤çš„æŒä¹…å±‚å¼€å‘ã€‚</p>
<h3 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h3>
<p>ä½¿ç”¨ MySQL å¯è§†åŒ–å·¥å…· (Navicat) æ‰§è¡Œä¸‹é¢è„šæœ¬å®Œæˆæ•°æ®åº“çš„åˆ›å»ºåä¸º youlai-boot çš„æ•°æ®åº“ï¼Œå…¶ä¸­åŒ…å«æµ‹è¯•çš„ç”¨æˆ·è¡¨</p>
<pre><code class="language-sql">    -- ----------------------------
    -- 1. åˆ›å»ºæ•°æ®åº“
    -- ----------------------------
    CREATE DATABASE IF NOT EXISTS youlai_boot DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_general_ci;

    -- ----------------------------
    -- 2. åˆ›å»ºè¡¨ &amp;&amp; æ•°æ®åˆå§‹åŒ–
    -- ----------------------------
    use youlai_boot;
	
	-- ----------------------------
    -- Table structure for sys_user
    -- ----------------------------
    DROP TABLE IF EXISTS `sys_user`;
    CREATE TABLE `sys_user` (
        `id` int NOT NULL AUTO_INCREMENT,
        `username` varchar(64) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·å',
        `nickname` varchar(64) NULL DEFAULT NULL COMMENT 'æ˜µç§°',
        `gender` tinyint(1) NULL DEFAULT 1 COMMENT 'æ€§åˆ«(1-ç”· 2-å¥³ 0-ä¿å¯†)',
        `password` varchar(100) NULL DEFAULT NULL COMMENT 'å¯†ç ',
        `dept_id` int NULL DEFAULT NULL COMMENT 'éƒ¨é—¨ID',
        `avatar` varchar(255) NULL DEFAULT '' COMMENT 'ç”¨æˆ·å¤´åƒ',
        `mobile` varchar(20) NULL DEFAULT NULL COMMENT 'è”ç³»æ–¹å¼',
        `status` tinyint(1) NULL DEFAULT 1 COMMENT 'çŠ¶æ€(1-æ­£å¸¸ 0-ç¦ç”¨)',
        `email` varchar(128) NULL DEFAULT NULL COMMENT 'ç”¨æˆ·é‚®ç®±',
        `create_time` datetime NULL DEFAULT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
        `create_by` bigint NULL DEFAULT NULL COMMENT 'åˆ›å»ºäººID',
        `update_time` datetime NULL DEFAULT NULL COMMENT 'æ›´æ–°æ—¶é—´',
        `update_by` bigint NULL DEFAULT NULL COMMENT 'ä¿®æ”¹äººID',
        `is_deleted` tinyint(1) NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤æ ‡è¯†(0-æœªåˆ é™¤ 1-å·²åˆ é™¤)',
        PRIMARY KEY (`id`) USING BTREE
    ) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = 'ç”¨æˆ·è¡¨' ROW_FORMAT = DYNAMIC;

    -- ----------------------------
    -- Records of sys_user
    -- ----------------------------
    INSERT INTO `sys_user` VALUES (1, 'root', 'æœ‰æ¥æŠ€æœ¯', 0, '$2a$10$xVWsNOhHrCxh5UbpCE7/HuJ.PAOKcYAqRxD2CO2nVnJS.IAXkr5aq', NULL, 'https://foruda.gitee.com/images/1723603502796844527/03cdca2a_716974.gif', '18866668888', 1, 'youlaitech@163.com', NULL, NULL, NULL, NULL, 0);
    INSERT INTO `sys_user` VALUES (2, 'admin', 'ç³»ç»Ÿç®¡ç†å‘˜', 1, '$2a$10$xVWsNOhHrCxh5UbpCE7/HuJ.PAOKcYAqRxD2CO2nVnJS.IAXkr5aq', 1, 'https://foruda.gitee.com/images/1723603502796844527/03cdca2a_716974.gif', '18866668887', 1, '', now(), NULL, now(), NULL, 0);
    INSERT INTO `sys_user` VALUES (3, 'websocket', 'æµ‹è¯•å°ç”¨æˆ·', 1, '$2a$10$xVWsNOhHrCxh5UbpCE7/HuJ.PAOKcYAqRxD2CO2nVnJS.IAXkr5aq', 3, 'https://foruda.gitee.com/images/1723603502796844527/03cdca2a_716974.gif', '18866668886', 1, 'youlaitech@163.com', now(), NULL, now(), NULL, 0);

</code></pre>
<h3 id="æ·»åŠ ä¾èµ–">æ·»åŠ ä¾èµ–</h3>
<p>é¡¹ç›® <code>pom.xml</code> æ·»åŠ  MySQL é©±åŠ¨å’Œ Mybatis-Plus ä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;!-- MySQL 8 é©±åŠ¨ --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;com.mysql&lt;/groupId&gt;
	&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
	&lt;version&gt;9.1.0&lt;/version&gt;
	&lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- Druid æ•°æ®åº“è¿æ¥æ±  --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
	&lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
	&lt;version&gt;1.2.24&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- MyBatis Plus Starter--&gt;
&lt;dependency&gt;
	&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
	&lt;artifactId&gt;mybatis-plus-spring-boot3-starter&lt;/artifactId&gt;
	&lt;version&gt;3.5.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="é…ç½®æ•°æ®æº">é…ç½®æ•°æ®æº</h3>
<p>å°† <code>src/main/resources/application.properties</code> æ–‡ä»¶ä¿®æ”¹ä¸º <code>src/main/resources/application.yml</code>ï¼Œå› ä¸ºæˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨ yml æ ¼å¼ã€‚ç„¶åï¼Œåœ¨ yml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-yaml">server:
  port: 8080
  
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/youlai_boot?useSSL=false&amp;serverTimezone==Asia/Shanghai&amp;&amp;characterEncoding=utf8
    username: root
    password: 123456

mybatis-plus:
  configuration:
    # é©¼å³°å‘½åæ˜ å°„
    map-underscore-to-camel-case: true
    # æ‰“å° sql æ—¥å¿—
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto # ä¸»é”®ç­–ç•¥
      logic-delete-field: is_deleted # å…¨å±€é€»è¾‘åˆ é™¤å­—æ®µï¼ˆå¯é€‰ï¼‰
</code></pre>
<h2 id="å¢åˆ æ”¹æŸ¥æ¥å£">å¢åˆ æ”¹æŸ¥æ¥å£</h2>
<h3 id="å®‰è£…-mybatisx-æ’ä»¶">å®‰è£… MybatisX æ’ä»¶</h3>
<p>åœ¨ IDEA ä¸­ä¾æ¬¡ç‚¹å‡» <strong>File â†’ Settings</strong>ï¼ˆå¿«æ·é”® <strong>Ctrl + Alt + S</strong>ï¼‰ï¼Œæ‰“å¼€è®¾ç½®é¢æ¿ï¼Œåˆ‡æ¢åˆ° <strong>Plugins</strong> é€‰é¡¹å¡ï¼Œæœç´¢ <strong>MybatisX</strong> å¹¶å®‰è£…æ’ä»¶ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129180051551.png" alt="image-20241129180051551" loading="lazy"></p>
<h3 id="è‡ªåŠ¨ä»£ç ç”Ÿæˆ">è‡ªåŠ¨ä»£ç ç”Ÿæˆ</h3>
<p>åœ¨ IDEA å³ä¾§å¯¼èˆªæ ç‚¹å‡» <strong>Database</strong>ï¼Œæ‰“å¼€æ•°æ®åº“é…ç½®é¢æ¿ï¼Œé€‰æ‹©æ–°å¢æ•°æ®æºã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129180148500.png" alt="" loading="lazy"></p>
<p>è¾“å…¥æ•°æ®åº“çš„ <strong>ä¸»æœºåœ°å€</strong>ã€<strong>ç”¨æˆ·å</strong> å’Œ <strong>å¯†ç </strong>ï¼Œæµ‹è¯•è¿æ¥æˆåŠŸåç‚¹å‡» <code>OK</code> ä¿å­˜ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129180534866.png" alt="" loading="lazy"></p>
<p>é…ç½®å®Œæ•°æ®æºåï¼Œå±•å¼€æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå³å‡» <strong>sys_user</strong> è¡¨ï¼Œé€‰æ‹© <strong>MybatisX-Generator</strong> æ‰“å¼€ä»£ç ç”Ÿæˆé¢æ¿ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129181402702.png" alt="" loading="lazy"></p>
<p>è®¾ç½®ä»£ç ç”Ÿæˆçš„ç›®æ ‡è·¯å¾„ï¼Œå¹¶é€‰æ‹© <strong>Mybatis-Plus 3 + Lombok</strong> ä»£ç é£æ ¼ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129182206666.png" alt="" loading="lazy"></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129181916422.png" alt="" loading="lazy"></p>
<p>ç‚¹å‡» <code>Finish</code> ç”Ÿæˆï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸å…³ä»£ç ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241129182513179.png" alt="" loading="lazy"></p>
<p>MybatisX ç”Ÿæˆçš„ä»£ç å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><code>SysUserMapper.java</code> æ–‡ä»¶æœªæ ‡æ³¨ <code>@Mapper</code> æ³¨è§£ï¼Œå¯¼è‡´æ— æ³•è¢« Spring Boot è¯†åˆ«ä¸º Mybatis çš„ Mapper æ¥å£ã€‚å¦‚æœå·²é…ç½® <code>@MapperScan</code>ï¼Œå¯ä»¥çœç•¥æ­¤æ³¨è§£ï¼Œä½†æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨ <code>SysUserMapper.java</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>@Mapper</code> æ³¨è§£ã€‚æ³¨æ„é¿å…å¯¼å…¥é”™è¯¯çš„åŒ…ã€‚</li>
</ul>
<p><img src="https://www.youlai.tech/storage/blog/image-20241204150356053.png" alt="" loading="lazy"></p>
<h3 id="æ·»åŠ å¢åˆ æ”¹æŸ¥æ¥å£">æ·»åŠ å¢åˆ æ”¹æŸ¥æ¥å£</h3>
<p>åœ¨ <code>controller</code> åŒ…ä¸‹åˆ›å»º <code>UserController.java</code>ï¼Œç¼–å†™ç”¨æˆ·ç®¡ç†æ¥å£ï¼š</p>
<pre><code class="language-java">/**
 * ç”¨æˆ·æ§åˆ¶å±‚
 *
 * @author youlai
 * @since 2024/12/04
 */
@RestController
@RequestMapping("/users")
@RequiredArgsConstructor
public class UserController {

    private final SysUserService userService;

    /**
     * è·å–ç”¨æˆ·åˆ—è¡¨
     */
    @GetMapping
    public List&lt;SysUser&gt; listUsers() {
        return userService.list();
    }

    /**
     * è·å–ç”¨æˆ·è¯¦æƒ…
     */
    @GetMapping("/{id}")
    public SysUser getUserById(@PathVariable Long id) {
        return userService.getById(id);
    }

    /**
     * æ–°å¢ç”¨æˆ·
     */
    @PostMapping
    public String createUser(@RequestBody SysUser user) {
        userService.save(user);
        return "ç”¨æˆ·åˆ›å»ºæˆåŠŸ";
    }

    /**
     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯
     */
    @PutMapping("/{id}")
    public String updateUser(@PathVariable Long id, @RequestBody SysUser user) {
        userService.updateById(user);
        return "ç”¨æˆ·æ›´æ–°æˆåŠŸ";
    }

    /**
     * åˆ é™¤ç”¨æˆ·
     */
    @DeleteMapping("/{id}")
    public String deleteUser(@PathVariable Long id) {
        userService.removeById(id);
        return "ç”¨æˆ·åˆ é™¤æˆåŠŸ";
    }

}

</code></pre>
<p><img src="https://www.youlai.tech/storage/blog/image-20241204152327778.png" alt="" loading="lazy"></p>
<h3 id="æ¥å£æµ‹è¯•">æ¥å£æµ‹è¯•</h3>
<p>é‡æ–°å¯åŠ¨åº”ç”¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://localhost:8080/users%EF%BC%8C%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E3%80%82" target="_blank" rel="noopener nofollow">http://localhost:8080/usersï¼ŒæŸ¥çœ‹ç”¨æˆ·æ•°æ®ã€‚</a></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241204161516388.png" alt="" loading="lazy"></p>
<p>å…¶ä»–å¢åˆ æ”¹æ¥å£å¯ä»¥é€šè¿‡åç»­æ•´åˆæ¥å£æ–‡æ¡£è¿›è¡Œæµ‹è¯•ã€‚</p>
<h2 id="é›†æˆ-knife4j-æ¥å£æ–‡æ¡£">é›†æˆ Knife4j æ¥å£æ–‡æ¡£</h2>
<p><strong>Knife4j</strong> æ˜¯åŸºäº <strong>Swagger2</strong> å’Œ <strong>OpenAPI3</strong> çš„å¢å¼ºè§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨æä¾›æ›´å‹å¥½çš„ç•Œé¢å’Œæ›´å¤šåŠŸèƒ½æ‰©å±•ï¼Œå¸®åŠ©å¼€å‘è€…æ›´ä¾¿æ·åœ°è°ƒè¯•å’Œæµ‹è¯• APIã€‚ä»¥ä¸‹æ˜¯é€šè¿‡å‚è€ƒ Knife4j å®˜æ–¹æ–‡æ¡£ <a href="https://doc.xiaominfo.com/docs/quick-start" target="_blank" rel="noopener nofollow">Spring Boot 3 æ•´åˆ Knife4j</a> å®ç°é›†æˆçš„è¿‡ç¨‹ã€‚</p>
<h3 id="æ·»åŠ ä¾èµ–-1">æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ <code>pom.xml</code> æ–‡ä»¶ä¸­å¼•å…¥ Knife4j çš„ä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;
    &lt;artifactId&gt;knife4j-openapi3-jakarta-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;4.5.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="é…ç½®æ¥å£æ–‡æ¡£">é…ç½®æ¥å£æ–‡æ¡£</h3>
<p>åœ¨ <code>application.yml</code> æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚æ³¨æ„ï¼Œ<code>packages-to-scan</code> éœ€è¦é…ç½®ä¸ºé¡¹ç›®çš„åŒ…è·¯å¾„ï¼Œä»¥ç¡®ä¿æ¥å£èƒ½å¤Ÿè¢«æ­£ç¡®æ‰«æï¼Œå…¶ä»–é…ç½®ä¿æŒé»˜è®¤å³å¯ã€‚</p>
<pre><code class="language-yaml"># springdoc-openapi é¡¹ç›®é…ç½®
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
  group-configs:
    - group: 'default'
      paths-to-match: '/**'
      packages-to-scan: com.youlai.boot.controller # éœ€è¦ä¿®æ”¹æˆè‡ªå·±é¡¹ç›®çš„æ¥å£åŒ…è·¯å¾„
# knife4jçš„å¢å¼ºé…ç½®ï¼Œä¸éœ€è¦å¢å¼ºå¯ä»¥ä¸é…
knife4j:
  enable: true
  # æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒï¼Œtrue è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒï¼Œæ¥å£æ–‡æ¡£å°†è¢«ç¦ç”¨
  production: false
  setting:
    language: zh_cn # è®¾ç½®æ–‡æ¡£è¯­è¨€ä¸ºä¸­æ–‡
</code></pre>
<p>æ·»åŠ æ¥å£æ–‡æ¡£é…ç½®ï¼Œåœ¨ <code>com.youlai.boot.config</code> æ·»åŠ  <code>OpenApiConfig</code> æ¥å£æ–‡æ¡£é…ç½®</p>
<pre><code class="language-java">package com.youlai.boot.config;

import io.swagger.v3.oas.models.Components;
import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import io.swagger.v3.oas.models.security.SecurityRequirement;
import io.swagger.v3.oas.models.security.SecurityScheme;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springdoc.core.customizers.GlobalOpenApiCustomizer;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.env.Environment;
import org.springframework.http.HttpHeaders;

/**
 * OpenAPI æ¥å£æ–‡æ¡£é…ç½®
 *
 * @author youlai
 */
@Configuration
@RequiredArgsConstructor
@Slf4j
public class OpenApiConfig {

    private final Environment environment;

    /**
     * æ¥å£ä¿¡æ¯
     */

    @Bean
    public OpenAPI openApi() {

        String appVersion = environment.getProperty("project.version", "1.0.0");

        return new OpenAPI()
                .info(new Info()
                        .title("ç³»ç»Ÿæ¥å£æ–‡æ¡£")
                        .version(appVersion)
                )
                // é…ç½®å…¨å±€é‰´æƒå‚æ•°-Authorize
                .components(new Components()
                        .addSecuritySchemes(HttpHeaders.AUTHORIZATION,
                                new SecurityScheme()
                                        .name(HttpHeaders.AUTHORIZATION)
                                        .type(SecurityScheme.Type.APIKEY)
                                        .in(SecurityScheme.In.HEADER)
                                        .scheme("Bearer")
                                        .bearerFormat("JWT")
                        )
                );
    }


    /**
     * å…¨å±€è‡ªå®šä¹‰æ‰©å±•
     * &lt;p&gt;
     * åœ¨OpenAPIè§„èŒƒä¸­ï¼ŒOperation æ˜¯ä¸€ä¸ªè¡¨ç¤º API ç«¯ç‚¹ï¼ˆEndpointï¼‰æˆ–æ“ä½œçš„å¯¹è±¡ã€‚
     * æ¯ä¸ªè·¯å¾„ï¼ˆPathï¼‰å¯¹è±¡å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Operation å¯¹è±¡ï¼Œç”¨äºæè¿°ä¸è¯¥è·¯å¾„ç›¸å…³è”çš„ä¸åŒ HTTP æ–¹æ³•ï¼ˆä¾‹å¦‚ GETã€POSTã€PUT ç­‰ï¼‰ã€‚
     */
    @Bean
    public GlobalOpenApiCustomizer globalOpenApiCustomizer() {
        return openApi -&gt; {
            // å…¨å±€æ·»åŠ é‰´æƒå‚æ•°
            if (openApi.getPaths() != null) {
                openApi.getPaths().forEach((s, pathItem) -&gt; {
                    // ç™»å½•æ¥å£/éªŒè¯ç ä¸éœ€è¦æ·»åŠ é‰´æƒå‚æ•°
                    if ("/api/v1/auth/login".equals(s)) {
                        return;
                    }
                    // æ¥å£æ·»åŠ é‰´æƒå‚æ•°
                    pathItem.readOperations()
                            .forEach(operation -&gt;
                                    operation.addSecurityItem(new SecurityRequirement().addList(HttpHeaders.AUTHORIZATION))
                            );
                });
            }
        };
    }

}
</code></pre>
<h3 id="å®Œå–„æ¥å£æ–‡æ¡£">å®Œå–„æ¥å£æ–‡æ¡£</h3>
<p><strong>å®Œå–„æ¥å£æè¿°</strong></p>
<p>åœ¨å·²æœ‰çš„ REST æ¥å£ä¸­ï¼Œä½¿ç”¨ OpenAPI è§„èŒƒæ³¨è§£æ¥æè¿°æ¥å£çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥ä¾¿é€šè¿‡ Knife4j ç”Ÿæˆæ›´åŠ æ¸…æ™°çš„æ¥å£æ–‡æ¡£ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä¸ºç”¨æˆ·çš„å¢åˆ æ”¹æŸ¥æ¥å£æ·»åŠ æ–‡æ¡£æè¿°æ³¨è§£çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-java">@Tag(name = "ç”¨æˆ·æ¥å£")
@RestController
@RequestMapping("/users")
@RequiredArgsConstructor
public class UserController {

    private final SysUserService userService;

    @Operation(summary = "è·å–ç”¨æˆ·åˆ—è¡¨")
    @GetMapping
    public List&lt;SysUser&gt; listUsers() {
        return userService.list();
    }

    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
    @GetMapping("/{id}")
    public SysUser getUserById(
            @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
    ) {
        return userService.getById(id);
    }

    @Operation(summary = "æ–°å¢ç”¨æˆ·")
    @PostMapping
    public String createUser(@RequestBody SysUser user) {
        userService.save(user);
        return "æ–°å¢ç”¨æˆ·æˆåŠŸ";
    }

    @Operation(summary = "ä¿®æ”¹ç”¨æˆ·")
    @PutMapping("/{id}")
    public String updateUser(
            @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id,
            @RequestBody SysUser user
    ) {
        userService.updateById(user);
        return "ä¿®æ”¹ç”¨æˆ·æˆåŠŸ";
    }

    @Operation(summary = "åˆ é™¤ç”¨æˆ·")
    @DeleteMapping("/{id}")
    public String deleteUser(
            @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
    ) {
        userService.removeById(id);
        return "ç”¨æˆ·åˆ é™¤æˆåŠŸ";
    }

}
</code></pre>
<p><strong>å®Œå–„å®ä½“ç±»æè¿°</strong></p>
<p>åœ¨ <code>SysUser</code> å®ä½“ç±»ä¸­ä¸ºæ¯ä¸ªå­—æ®µæ·»åŠ  <code>@Schema</code> æ³¨è§£ï¼Œç”¨äºåœ¨æ¥å£æ–‡æ¡£ä¸­æ˜¾ç¤ºå­—æ®µçš„è¯¦ç»†è¯´æ˜åŠç¤ºä¾‹å€¼ï¼š</p>
<pre><code class="language-java">@Schema(description = "ç”¨æˆ·å¯¹è±¡")
@TableName(value = "sys_user")
@Data
public class SysUser implements Serializable {

    @Schema(description = "ç”¨æˆ·ID", example = "1")
    @TableId(type = IdType.AUTO)
    private Integer id;

    @Schema(description = "ç”¨æˆ·å", example = "admin")
    private String username;

    @Schema(description = "æ˜µç§°", example = "ç®¡ç†å‘˜")
    private String nickname;

    @Schema(description = "æ€§åˆ«ï¼ˆ1-ç”·ï¼Œ2-å¥³ï¼Œ0-ä¿å¯†ï¼‰", example = "1")
    private Integer gender;

    @Schema(description = "ç”¨æˆ·å¤´åƒURL", example = "https://example.com/avatar.png")
    private String avatar;

    @Schema(description = "è”ç³»æ–¹å¼", example = "13800000000")
    private String mobile;

    @Schema(description = "ç”¨æˆ·é‚®ç®±", example = "admin@example.com")
    private String email;
    
    // ... 
}
</code></pre>
<h3 id="ä½¿ç”¨æ¥å£æ–‡æ¡£">ä½¿ç”¨æ¥å£æ–‡æ¡£</h3>
<p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œé‡æ–°å¯åŠ¨åº”ç”¨å¹¶è®¿é—®ç”Ÿæˆçš„æ¥å£æ–‡æ¡£ã€‚</p>
<ul>
<li>Swagger UI æ–‡æ¡£åœ°å€ï¼š<a href="http://localhost:8080/swagger-ui/index.html" target="_blank" rel="noopener nofollow">http://localhost:8080/swagger-ui/index.html</a></li>
<li>Knife4j æ–‡æ¡£åœ°å€ï¼š<a href="http://localhost:8080/doc.html" target="_blank" rel="noopener nofollow">http://localhost:8080/doc.html</a></li>
</ul>
<p>é€šè¿‡å·¦ä¾§çš„æ¥å£åˆ—è¡¨æŸ¥çœ‹å¢åˆ æ”¹æŸ¥æ¥å£ï¼Œå¹¶ç‚¹å‡»å…·ä½“æ¥å£æŸ¥çœ‹è¯¦ç»†å‚æ•°è¯´æ˜åŠç¤ºä¾‹å€¼ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241204181853122.png" alt="" loading="lazy"></p>
<p>æ¥ç€ï¼Œå¯ä»¥é€šè¿‡æ¥å£æ–‡æ¡£æ–°å¢ç”¨æˆ·ï¼Œæ¥å£è¿”å›æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®åº“è¡¨ä¸­æ–°å¢äº†ä¸€æ¡ç”¨æˆ·æ•°æ®ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241204181600480.png" alt="" loading="lazy"></p>
<h2 id="é›†æˆ-redis-ç¼“å­˜">é›†æˆ Redis ç¼“å­˜</h2>
<p>Redis æ˜¯å½“å‰å¹¿æ³›ä½¿ç”¨çš„é«˜æ€§èƒ½ç¼“å­˜ä¸­é—´ä»¶ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡ç³»ç»Ÿæ€§èƒ½ï¼Œå‡è½»æ•°æ®åº“å‹åŠ›ï¼Œå‡ ä¹æˆä¸ºç°ä»£åº”ç”¨çš„æ ‡é…ã€‚</p>
<h3 id="æ·»åŠ ä¾èµ–-2">æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ <code>pom.xml</code> æ–‡ä»¶ä¸­æ·»åŠ  Spring Boot Redis ä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="é…ç½®-redis-è¿æ¥">é…ç½® Redis è¿æ¥</h3>
<p>åœ¨ <code>application.yml</code> æ–‡ä»¶ä¸­é…ç½® Redis è¿æ¥ä¿¡æ¯ï¼š</p>
<pre><code class="language-yaml">spring:
  data:
    redis:
      database: 0    # Redis æ•°æ®åº“ç´¢å¼•
      host: localhost  # Redis ä¸»æœºåœ°å€
      port: 6379  # Redis ç«¯å£
      # å¦‚æœRedis æœåŠ¡æœªè®¾ç½®å¯†ç ï¼Œéœ€è¦å°†passwordåˆ æ‰æˆ–æ³¨é‡Šï¼Œè€Œä¸æ˜¯è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²
      password: 123456
      timeout: 10s
</code></pre>
<h3 id="è‡ªå®šä¹‰åºåˆ—åŒ–">è‡ªå®šä¹‰åºåˆ—åŒ–</h3>
<p>Spring Boot é»˜è®¤ä½¿ç”¨ <code>JdkSerializationRedisSerializer</code> è¿›è¡Œåºåˆ—åŒ–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ <code>RedisTemplate</code>ï¼Œå°†å…¶ä¿®æ”¹ä¸ºæ›´æ˜“è¯»çš„ <code>String</code> å’Œ <code>JSON</code> åºåˆ—åŒ–æ–¹å¼ï¼š</p>
<pre><code class="language-java">/**
 *  Redis è‡ªåŠ¨è£…é…é…ç½®
 *
 * @author youlai
 * @since 2024/12/5
 */
@Configuration
public class RedisConfig {

    /**
     * è‡ªå®šä¹‰ RedisTemplate
     * &lt;p&gt;
     * ä¿®æ”¹ Redis åºåˆ—åŒ–æ–¹å¼ï¼Œé»˜è®¤ JdkSerializationRedisSerializer
     *
     * @param redisConnectionFactory {@link RedisConnectionFactory}
     * @return {@link RedisTemplate}
     */
    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {

        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
        redisTemplate.setConnectionFactory(redisConnectionFactory);

        redisTemplate.setKeySerializer(RedisSerializer.string());
        redisTemplate.setValueSerializer(RedisSerializer.json());

        redisTemplate.setHashKeySerializer(RedisSerializer.string());
        redisTemplate.setHashValueSerializer(RedisSerializer.json());

        redisTemplate.afterPropertiesSet();
        return redisTemplate;
    }

}

</code></pre>
<h3 id="å•å…ƒæµ‹è¯•">å•å…ƒæµ‹è¯•</h3>
<p>åœ¨ <code>src/test/java</code> ç›®å½•çš„ <code>com.youlai.boot</code> åŒ…ä¸‹åˆ›å»º <code>RedisTests</code> å•å…ƒæµ‹è¯•ç±»ï¼Œç”¨äºéªŒè¯æ•°æ®çš„å­˜å‚¨ä¸è¯»å–ã€‚</p>
<pre><code class="language-java">@SpringBootTest
@Slf4j
class RedisTests {

    @Autowired
    private RedisTemplate&lt;String, Object&gt; redisTemplate;

    @Autowired
    private SysUserService userService;

    @Test
    void testSetAndGet() {
        Long userId = 1L;
        // 1. ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯
        SysUser user = userService.getById(userId);
        log.info("ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ä¿¡æ¯: {}", user);

        // 2. å°†ç”¨æˆ·ä¿¡æ¯ç¼“å­˜åˆ° Redis
        redisTemplate.opsForValue().set("user:" + userId, user);

        // 3. ä» Redis ä¸­è·å–ç¼“å­˜çš„ç”¨æˆ·ä¿¡æ¯
        SysUser cachedUser = (SysUser) redisTemplate.opsForValue().get("user:" + userId);
        log.info("ä» Redis ä¸­è·å–ç”¨æˆ·ä¿¡æ¯: {}", cachedUser);
    }
}
</code></pre>
<p>ç‚¹å‡»æµ‹è¯•ç±»æ–¹æ³•å·¦ä¾§çš„ â–¶ï¸ å›¾æ ‡è¿è¡Œå•å…ƒæµ‹è¯•ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241205172902017.png" alt="" loading="lazy"></p>
<p>è¿è¡Œåï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œè‹¥æ§åˆ¶å°æˆåŠŸæ‰“å°ä» Redis è·å–çš„ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤º Spring Boot å·²æˆåŠŸé›†æˆ Redisã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241205174150218.png" alt="" loading="lazy"></p>
<h2 id="å®Œå–„--web-æ¡†æ¶">å®Œå–„  Web æ¡†æ¶</h2>
<h3 id="ç»Ÿä¸€å“åº”å¤„ç†">ç»Ÿä¸€å“åº”å¤„ç†</h3>
<hr>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç»Ÿä¸€å“åº”ï¼Ÿ</strong></p>
<p>é»˜è®¤æ¥å£è¿”å›çš„æ•°æ®ç»“æ„ä»…åŒ…å«ä¸šåŠ¡æ•°æ®ï¼Œç¼ºå°‘çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯ï¼Œæ— æ³•æ¸…æ™°è¡¨è¾¾æ“ä½œç»“æœã€‚é€šè¿‡ç»Ÿä¸€å°è£…å“åº”ç»“æ„ï¼Œå¯ä»¥æå‡æ¥å£çš„è§„èŒƒæ€§ï¼Œä¾¿äºå‰åç«¯ååŒå¼€å‘å’Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸è§„èŒƒä¸è§„èŒƒå“åº”æ•°æ®çš„å¯¹æ¯”ï¼šå·¦ä¾§æ˜¯é»˜è®¤è¿”å›çš„éæ ‡å‡†æ•°æ®ï¼Œå³ä¾§æ˜¯ç»Ÿä¸€å°è£…åçš„è§„èŒƒæ•°æ®ã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241211135138054.png" alt="" loading="lazy"></p>
<hr>
<p><strong>å®šä¹‰ç»Ÿä¸€ä¸šåŠ¡çŠ¶æ€ç </strong></p>
<p>åœ¨ <code>com.youlai.boot.common.result</code> åŒ…ä¸‹åˆ›å»º <code>ResultCode</code>  æšä¸¾ï¼Œé”™è¯¯ç è§„èŒƒå‚è€ƒ <a href="https://developer.aliyun.com/article/766288" target="_blank" rel="noopener nofollow">é˜¿é‡Œå¼€å‘æ‰‹å†Œ-é”™è¯¯ç è®¾è®¡</a>ã€‚</p>
<pre><code class="language-java">package com.youlai.boot.common.result;

import java.io.Serializable;
import lombok.Getter;

/**
 * ç»Ÿä¸€ä¸šåŠ¡çŠ¶æ€ç æšä¸¾
 *
 * @author youlai
 */
@Getter
public enum ResultCode implements Serializable {

    SUCCESS("00000", "æ“ä½œæˆåŠŸ"),
    TOKEN_INVALID("A0230", "Token æ— æ•ˆæˆ–å·²è¿‡æœŸ"),
    ACCESS_UNAUTHORIZED("A0301", "è®¿é—®æœªæˆæƒ"),
    SYSTEM_ERROR("B0001", "ç³»ç»Ÿé”™è¯¯");

    private final String code;
    private final String message;

    ResultCode(String code, String message) {
        this.code = code;
        this.message = message;
    }
}
</code></pre>
<hr>
<p><strong>åˆ›å»ºç»Ÿä¸€å“åº”ç»“æ„</strong></p>
<p>å®šä¹‰ <code>Result</code> ç±»ï¼Œå°è£…å“åº”ç ã€æ¶ˆæ¯å’Œæ•°æ®ã€‚</p>
<pre><code class="language-java">package com.youlai.boot.common.result;

import lombok.Data;
import java.io.Serializable;

/**
 * ç»Ÿä¸€å“åº”ç»“æ„
 *
 * @author youlai
 **/
@Data
public class Result&lt;T&gt; implements Serializable {
    // å“åº”ç 
    private String code;
    // å“åº”æ•°æ®
    private T data;
    // å“åº”ä¿¡æ¯
    private String msg;

    /**
     * æˆåŠŸå“åº”
     */
    public static &lt;T&gt; Result&lt;T&gt; success(T data) {
        Result&lt;T&gt; result = new Result&lt;&gt;();
        result.setCode(ResultCode.SUCCESS.getCode());
        result.setMsg(ResultCode.SUCCESS.getMsg());
        result.setData(data);
        return result;
    }

    /**
     * å¤±è´¥å“åº”
     */
    public static &lt;T&gt; Result&lt;T&gt; failed(ResultCode resultCode) {
        Result&lt;T&gt; result = new Result&lt;&gt;();
        result.setCode(resultCode.getCode());
        result.setMsg(resultCode.getMsg());
        return result;
    }

    /**
     * å¤±è´¥å“åº”(ç³»ç»Ÿé»˜è®¤é”™è¯¯)
     */
    public static &lt;T&gt; Result&lt;T&gt; failed() {
        Result&lt;T&gt; result = new Result&lt;&gt;();
        result.setCode(ResultCode.SYSTEM_ERROR.getCode());
        result.setMsg(ResultCode.SYSTEM_ERROR.getMsg());
        return result;
    }

}
</code></pre>
<hr>
<p><strong>å°è£…æ¥å£è¿”å›ç»“æœ</strong></p>
<p>è°ƒæ•´æ¥å£ä»£ç ï¼Œè¿”å›ç»Ÿä¸€çš„å“åº”æ ¼å¼ã€‚</p>
<pre><code class="language-java">@Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
@GetMapping("/{id}")
public Result&lt;SysUser&gt; getUserById(
    @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
) {
    SysUser user = userService.getById(id);
    return Result.success(user);
}
</code></pre>
<hr>
<p><strong>æ•ˆæœé¢„è§ˆ</strong></p>
<p>æ¥å£è¿”å›ç»“æ„å˜ä¸ºæ ‡å‡†æ ¼å¼ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241217162820446.png" alt="æ ‡å‡†å“åº”ç»“æœ" loading="lazy"></p>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ¥å£å“åº”æ•°æ®å·²å®Œæˆç»Ÿä¸€å°è£…ï¼Œå…·å¤‡è‰¯å¥½çš„è§„èŒƒæ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæœ‰åŠ©äºå‰åç«¯ååŒå¼€å‘ä¸é”™è¯¯å®šä½ã€‚</p>
<h3 id="å…¨å±€å¼‚å¸¸å¤„ç†">å…¨å±€å¼‚å¸¸å¤„ç†</h3>
<hr>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å…¨å±€å¼‚å¸¸å¤„ç†</strong></p>
<p>å¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ŒæŠ›å‡ºçš„ä¸šåŠ¡å¼‚å¸¸å’Œç³»ç»Ÿå¼‚å¸¸ä¼šä»¥éæ ‡å‡†æ ¼å¼è¿”å›ï¼Œç»™å‰ç«¯çš„æ•°æ®å¤„ç†å’Œé—®é¢˜æ’æŸ¥å¸¦æ¥å›°éš¾ã€‚ä¸ºäº†è§„èŒƒæ¥å£å“åº”æ•°æ®æ ¼å¼ï¼Œéœ€è¦å¼•å…¥å…¨å±€å¼‚å¸¸å¤„ç†ã€‚</p>
<p>ä»¥ä¸‹æ¥å£æ¨¡æ‹Ÿäº†ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ä¸­çš„å¼‚å¸¸ï¼š</p>
<pre><code class="language-java">@Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
@GetMapping("/{id}")
public Result&lt;SysUser&gt; getUserById(
    @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
) {
    // æ¨¡æ‹Ÿå¼‚å¸¸
    int i = 1 / 0;

    SysUser user = userService.getById(id);
    return Result.success(user);
}
</code></pre>
<p>å½“å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œé»˜è®¤è¿”å›çš„æ•°æ®æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241218002327617.png" alt="" loading="lazy"></p>
<p>è¿™ç±»éæ ‡å‡†çš„å“åº”æ ¼å¼æ—¢ä¸ç›´è§‚ï¼Œä¹Ÿä¸åˆ©äºå‰åç«¯åä½œã€‚</p>
<p><strong>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</strong></p>
<p>åœ¨ <code>com.youlai.boot.common.exception</code> åŒ…ä¸‹åˆ›å»ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œç”¨äºæ•è·å’Œå¤„ç†ç³»ç»Ÿå¼‚å¸¸ã€‚</p>
<pre><code class="language-java">package com.youlai.boot.common.exception;

import com.youlai.boot.common.result.Result;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.bind.annotation.RestControllerAdvice;

/**
 * å…¨å±€å¼‚å¸¸å¤„ç†å™¨
 *
 * @author youlai
 */
@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    /**
     * å¤„ç†ç³»ç»Ÿå¼‚å¸¸
     * &lt;p&gt;
     * å…œåº•å¼‚å¸¸å¤„ç†ï¼Œå¤„ç†æœªè¢«æ•è·çš„å¼‚å¸¸
     */
    @ExceptionHandler(Exception.class)
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    public &lt;T&gt; Result&lt;T&gt; handleNullPointerException(Exception e) {
        log.error(e.getMessage(), e);
        return Result.failed("ç³»ç»Ÿå¼‚å¸¸:" + e.getMessage());
    }

}
</code></pre>
<p><strong>éªŒè¯å…¨å±€å¼‚å¸¸å¤„ç†</strong></p>
<p>å†æ¬¡è®¿é—®ç”¨æˆ·æ¥å£  <a target="_blank">localhost:8080/users/1</a> ï¼Œå¯ä»¥çœ‹åˆ°å“åº”å·²ç»åŒ…å«çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯ï¼Œæ•°æ®æ ¼å¼å˜å¾—æ›´åŠ è§„èŒƒï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241218002541937.png" alt="" loading="lazy"></p>
<p><strong>è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸</strong></p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½éœ€è¦å¯¹ç‰¹å®šçš„ä¸šåŠ¡å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚é€šè¿‡è‡ªå®šä¹‰å¼‚å¸¸ç±» <code>BusinessException</code>ï¼Œå¯ä»¥å®ç°æ›´çµæ´»çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚</p>
<pre><code class="language-java">package com.youlai.boot.common.exception;

import com.youlai.boot.common.result.ResultCode;
import lombok.Getter;

/**
 * è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
 *
 * @author youlai
 */
@Getter
public class BusinessException extends RuntimeException {

    public ResultCode resultCode;

    public BusinessException(ResultCode errorCode) {
        super(errorCode.getMsg());
        this.resultCode = errorCode;
    }

    public BusinessException(String message) {
        super(message);
    }

}
</code></pre>
<p>åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¸­æ·»åŠ ä¸šåŠ¡å¼‚å¸¸å¤„ç†é€»è¾‘</p>
<pre><code class="language-java">@RestControllerAdvice
@Slf4j
public class GlobalExceptionHandler {

    /**
     * å¤„ç†è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
     */
    @ExceptionHandler(BusinessException.class)
    public &lt;T&gt; Result&lt;T&gt; handleBusinessException(BusinessException e) {
        log.error(e.getMessage(), e);
        if(e.getResultCode()!=null){
            return Result.failed(e.getResultCode());
        }
        return Result.failed(e.getMessage());
    }

}
</code></pre>
<p>æ¨¡æ‹Ÿä¸šåŠ¡å¼‚å¸¸</p>
<pre><code class="language-java">    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
    @GetMapping("/{id}")
    public Result&lt;SysUser&gt; getUserById(
            @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
    ) {
        SysUser user = userService.getById(-1);
        // æ¨¡æ‹Ÿå¼‚å¸¸
        if (user == null) {
            throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        return Result.success(user);
    }

</code></pre>
<p>è¯·æ±‚ä¸å­˜åœ¨çš„ç”¨æˆ·æ—¶ï¼Œå“åº”å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241218011857731.png" alt="" loading="lazy"></p>
<p>é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†çš„å¼•å…¥å’Œè‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸çš„å®šä¹‰ï¼Œæ¥å£çš„å“åº”æ•°æ®å¾—ä»¥æ ‡å‡†åŒ–ï¼Œæå‡äº†å‰åç«¯åä½œçš„æ•ˆç‡å’Œç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</p>
<h3 id="æ—¥å¿—è¾“å‡ºé…ç½®">æ—¥å¿—è¾“å‡ºé…ç½®</h3>
<p>æ—¥å¿—ä½œä¸ºä¼ä¸šçº§åº”ç”¨é¡¹ç›®ä¸­çš„é‡è¦ä¸€ç¯ï¼Œä¸ä»…æ˜¯è°ƒè¯•é—®é¢˜çš„å…³é”®æ‰‹æ®µï¼Œæ›´æ˜¯ç”¨æˆ·é—®é¢˜æ’æŸ¥å’Œäº‰è®®è§£å†³çš„å¼ºæœ‰åŠ›æ”¯æŒå·¥å…·</p>
<p><strong>é…ç½® <code>logback-spring.xml</code> æ—¥å¿—æ–‡ä»¶</strong></p>
<p>åœ¨ <code>src/main/resources</code> ç›®å½•ä¸‹ï¼Œæ–°å¢ <code>logback-spring.xml</code> é…ç½®æ–‡ä»¶ã€‚åŸºäº Spring Boot "çº¦å®šä¼˜äºé…ç½®" çš„è®¾è®¡ç†å¿µï¼Œé¡¹ç›®é»˜è®¤ä¼šè‡ªåŠ¨åŠ è½½å¹¶ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶ã€‚</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º --&gt;
&lt;configuration&gt;

    &lt;!-- SpringBooté»˜è®¤logbackçš„é…ç½® --&gt;
    &lt;include resource="org/springframework/boot/logging/logback/defaults.xml"/&gt;

    &lt;springProperty scope="context" name="APP_NAME" source="spring.application.name"/&gt;
    &lt;property name="LOG_HOME" value="/logs/${APP_NAME}"/&gt;

    &lt;!-- 1. è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;
    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;!-- &lt;withJansi&gt;true&lt;/withJansi&gt;--&gt;
        &lt;!--æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€ä½çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯--&gt;
        &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
            &lt;level&gt;DEBUG&lt;/level&gt;
        &lt;/filter&gt;
        &lt;encoder&gt;
            &lt;Pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/Pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- 2. è¾“å‡ºåˆ°æ–‡ä»¶  --&gt;
    &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;!-- å½“å‰è®°å½•çš„æ—¥å¿—æ–‡æ¡£å®Œæ•´è·¯å¾„ --&gt;
        &lt;file&gt;${LOG_HOME}/log.log&lt;/file&gt;
        &lt;encoder&gt;
            &lt;!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼--&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} -%5level ---[%15.15thread] %-40.40logger{39} : %msg%n%n&lt;/pattern&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰å¤§å°å’Œæ—¶é—´è®°å½• --&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;
            &lt;!-- æ»šåŠ¨åçš„æ—¥å¿—æ–‡ä»¶å‘½åæ¨¡å¼ --&gt;
            &lt;fileNamePattern&gt;${LOG_HOME}/%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;!-- å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å° --&gt;
            &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;
            &lt;!-- æœ€å¤§ä¿ç•™30å¤©çš„æ—¥å¿— --&gt;
            &lt;maxHistory&gt;30&lt;/maxHistory&gt;
            &lt;!-- æ€»æ—¥å¿—æ–‡ä»¶å¤§å°ä¸è¶…è¿‡3GB --&gt;
            &lt;totalSizeCap&gt;1GB&lt;/totalSizeCap&gt;
        &lt;/rollingPolicy&gt;
        &lt;!-- ä¸´ç•Œå€¼è¿‡æ»¤å™¨ï¼Œè¾“å‡ºå¤§äºINFOçº§åˆ«æ—¥å¿— --&gt;
        &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
            &lt;level&gt;INFO&lt;/level&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;!-- æ ¹æ—¥å¿—è®°å½•å™¨é…ç½® --&gt;
    &lt;root level="INFO"&gt;
        &lt;!-- å¼•ç”¨ä¸Šé¢å®šä¹‰çš„ä¸¤ä¸ªappenderï¼Œæ—¥å¿—å°†åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶ --&gt;
        &lt;appender-ref ref="CONSOLE"/&gt;
        &lt;appender-ref ref="FILE"/&gt;
    &lt;/root&gt;
&lt;/configuration&gt;
</code></pre>
<p><strong>æŸ¥çœ‹æ—¥å¿—è¾“å‡ºæ•ˆæœ</strong></p>
<p>æ·»åŠ é…ç½®æ–‡ä»¶åï¼Œå¯åŠ¨é¡¹ç›®å¹¶è§¦å‘ç›¸å…³æ—¥å¿—è¡Œä¸ºï¼Œæ§åˆ¶å°å’Œæ—¥å¿—æ–‡ä»¶ä¼šåŒæ—¶è¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼š</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241218112111080.png" alt="" loading="lazy"></p>
<h2 id="é›†æˆ--spring-security">é›†æˆ  Spring Security</h2>
<p>Spring Security æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨æ¡†æ¶ï¼Œå¯ç”¨äºèº«ä»½è®¤è¯å’Œæƒé™ç®¡ç†ã€‚</p>
<h3 id="æ·»åŠ ä¾èµ–-3">æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ <code>pom.xml</code> æ·»åŠ  <code>Spring Security</code> ä¾èµ–</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="è·å–ç”¨æˆ·è®¤è¯ä¿¡æ¯">è·å–ç”¨æˆ·è®¤è¯ä¿¡æ¯</h3>
<p>ä»æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯(ç”¨æˆ·åã€å¯†ç ã€è§’è‰²)ï¼Œç”¨äºå’Œå‰ç«¯è¾“å…¥çš„ç”¨æˆ·åå¯†ç åšåˆ¤è¯»ï¼Œå¦‚æœè®¤è¯æˆåŠŸï¼Œå°†è§’è‰²æƒé™ä¿¡æ¯ç»‘å®šåˆ°ç”¨æˆ·ä¼šè¯ï¼Œç®€å•æ¦‚æ‹¬å°±æ˜¯æä¾›ç»™è®¤è¯æˆæƒçš„ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<p><strong>å®šä¹‰ç”¨æˆ·è®¤è¯ä¿¡æ¯ç±» UserDetails</strong></p>
<p>åˆ›å»º <code>com.youlai.boot.security.model</code> åŒ…ï¼Œæ–°å»º <code>SysUserDetails</code> ç”¨æˆ·è®¤è¯ä¿¡æ¯å¯¹è±¡ï¼Œç»§æ‰¿ Spring Security çš„ UserDetails æ¥å£</p>
<pre><code class="language-java">/**
 * Spring Security ç”¨æˆ·è®¤è¯ä¿¡æ¯å¯¹è±¡
 * &lt;p&gt;
 * å°è£…äº†ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å’Œæƒé™ä¿¡æ¯ï¼Œä¾› Spring Security è¿›è¡Œç”¨æˆ·è®¤è¯ä¸æˆæƒã€‚
 * å®ç°äº† {@link UserDetails} æ¥å£ï¼Œæä¾›ç”¨æˆ·çš„æ ¸å¿ƒä¿¡æ¯ã€‚
 *
 * @author youlai
 */
@Data
@NoArgsConstructor
public class SysUserDetails implements UserDetails {

    /**
     * ç”¨æˆ·ID
     */
    private Integer userId;

    /**
     * ç”¨æˆ·å
     */
    private String username;

    /**
     * å¯†ç 
     */
    private String password;

    /**
     * è´¦å·æ˜¯å¦å¯ç”¨ï¼ˆtrueï¼šå¯ç”¨ï¼Œfalseï¼šç¦ç”¨ï¼‰
     */
    private Boolean enabled;

    /**
     * ç”¨æˆ·è§’è‰²æƒé™é›†åˆ
     */
    private Collection&lt;SimpleGrantedAuthority&gt; authorities;

    /**
     * æ ¹æ®ç”¨æˆ·è®¤è¯ä¿¡æ¯åˆå§‹åŒ–ç”¨æˆ·è¯¦æƒ…å¯¹è±¡
     */
    public SysUserDetails(SysUser user) {
        this.userId = user.getId();
        this.username = user.getUsername();
        this.password = user.getPassword();
        this.enabled = ObjectUtil.equal(user.getStatus(), 1);

        // åˆå§‹åŒ–è§’è‰²æƒé™é›†åˆ
        this.authorities = CollectionUtil.isNotEmpty(user.getRoles())
                ? user.getRoles().stream()
                // è§’è‰²ååŠ ä¸Šå‰ç¼€ "ROLE_"ï¼Œç”¨äºåŒºåˆ†è§’è‰² (ROLE_ADMIN) å’Œæƒé™ (sys:user:add)
                .map(role -&gt; new SimpleGrantedAuthority("ROLE_" + role))
                .collect(Collectors.toSet())
                : Collections.emptySet();
    }

    @Override
    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {
        return this.authorities;
    }

    @Override
    public String getPassword() {
        return this.password;
    }

    @Override
    public String getUsername() {
        return this.username;
    }

    @Override
    public boolean isEnabled() {
        return this.enabled;
    }
}
</code></pre>
<p><strong>è·å–ç”¨æˆ·è®¤è¯ä¿¡æ¯æœåŠ¡ç±»</strong></p>
<p>åˆ›å»º <code>com.youlai.boot.security.service</code> åŒ…ï¼Œæ–°å»º <code>SysUserDetailsService</code> ç”¨æˆ·è®¤è¯ä¿¡æ¯åŠ è½½æœåŠ¡ç±»ï¼Œç»§æ‰¿ Spring Security çš„ UserDetailsService æ¥å£</p>
<pre><code class="language-java">/**
 * ç”¨æˆ·è®¤è¯ä¿¡æ¯åŠ è½½æœåŠ¡ç±»
 * &lt;p&gt;
 * åœ¨ç”¨æˆ·ç™»å½•æ—¶ï¼ŒSpring Security ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥ç±»çš„ {@link #loadUserByUsername(String)} æ–¹æ³•ï¼Œ
 * è·å–å°è£…åçš„ç”¨æˆ·ä¿¡æ¯å¯¹è±¡ {@link SysUserDetails}ï¼Œç”¨äºåç»­çš„èº«ä»½éªŒè¯å’Œæƒé™ç®¡ç†ã€‚
 *
 * @author youlai
 */
@Service
@RequiredArgsConstructor
public class SysUserDetailsService implements UserDetailsService {

    private final SysUserService userService;

    /**
     * æ ¹æ®ç”¨æˆ·ååŠ è½½ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯
     */
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        // æŸ¥è¯¢ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
        SysUser user = userService.getOne(new LambdaQueryWrapper&lt;SysUser&gt;()
                .eq(SysUser::getUsername, username)
        );
        if (user == null) {
            throw new UsernameNotFoundException(username);
        }
        // æ¨¡æ‹Ÿè®¾ç½®è§’è‰²ï¼Œå®é™…åº”ä»æ•°æ®åº“è·å–ç”¨æˆ·è§’è‰²ä¿¡æ¯
        Set&lt;String&gt; roles = Set.of("ADMIN");
        user.setRoles(roles);

        // æ¨¡æ‹Ÿè®¾ç½®æƒé™ï¼Œå®é™…åº”ä»æ•°æ®åº“è·å–ç”¨æˆ·æƒé™ä¿¡æ¯
        Set&lt;String&gt; perms = Set.of("sys:user:query");
        user.setPerms(perms);

        // å°†æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°çš„ç”¨æˆ·ä¿¡æ¯å°è£…æˆ Spring Security éœ€è¦çš„ UserDetails å¯¹è±¡
        return new SysUserDetails(user);
    }
}
</code></pre>
<h3 id="è®¤è¯é‰´æƒå¼‚å¸¸å¤„ç†">è®¤è¯é‰´æƒå¼‚å¸¸å¤„ç†</h3>
<p>åœ¨ <code>com.youlai.boot.common.util</code> æ·»åŠ å“åº”å·¥å…·ç±»  <code>ResponseUtils</code></p>
<pre><code class="language-java">@Slf4j
public class ResponseUtils {

    /**
     * å¼‚å¸¸æ¶ˆæ¯è¿”å›(é€‚ç”¨è¿‡æ»¤å™¨ä¸­å¤„ç†å¼‚å¸¸å“åº”)
     *
     * @param response  HttpServletResponse
     * @param resultCode å“åº”ç»“æœç 
     */
    public static void writeErrMsg(HttpServletResponse response, ResultCode resultCode) {
        // æ ¹æ®ä¸åŒçš„ç»“æœç è®¾ç½®HTTPçŠ¶æ€
        int status = switch (resultCode) {
            case ACCESS_UNAUTHORIZED, 
            	ACCESS_TOKEN_INVALID 
                    -&gt; HttpStatus.UNAUTHORIZED.value();
            default -&gt; HttpStatus.BAD_REQUEST.value();
        };

        response.setStatus(status);
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());

        try (PrintWriter writer = response.getWriter()) {
            String jsonResponse = JSONUtil.toJsonStr(Result.failed(resultCode));
            writer.print(jsonResponse);
            writer.flush(); // ç¡®ä¿å°†å“åº”å†…å®¹å†™å…¥åˆ°è¾“å‡ºæµ
        } catch (IOException e) {
            log.error("å“åº”å¼‚å¸¸å¤„ç†å¤±è´¥", e);
        }
    }

}
</code></pre>
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th><code>AuthenticationEntryPoint</code></th>
<th><code>AccessDeniedHandler</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¯¹åº”å¼‚å¸¸</strong></td>
<td><code>AuthenticationException</code></td>
<td><code>AccessDeniedException</code></td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>ç”¨æˆ·æœªè®¤è¯ï¼ˆæ— å‡­è¯æˆ–å‡­è¯æ— æ•ˆï¼‰</td>
<td>ç”¨æˆ·å·²è®¤è¯ä½†æ— æƒé™</td>
</tr>
<tr>
<td><strong>è¿”å› HTTP çŠ¶æ€ç </strong></td>
<td><code>401 Unauthorized</code></td>
<td><code>403 Forbidden</code></td>
</tr>
<tr>
<td><strong>å¸¸è§ä½¿ç”¨ä½ç½®</strong></td>
<td>ç”¨äºå¤„ç†èº«ä»½è®¤è¯å¤±è´¥çš„å…¨å±€å…¥å£é€»è¾‘</td>
<td>ç”¨äºå¤„ç†æƒé™ä¸è¶³æ—¶çš„é€»è¾‘</td>
</tr>
</tbody>
</table>
<p><strong>ç”¨æˆ·æœªè®¤è¯å¤„ç†å™¨</strong></p>
<pre><code class="language-java">/**
 * æœªè®¤è¯å¤„ç†å™¨
 *
 * @author youlai
 */
@Slf4j
public class MyAuthenticationEntryPoint implements AuthenticationEntryPoint {

    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) {
        if (authException instanceof BadCredentialsException) {
            // ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
            ResponseUtils.writeErrMsg(response, ResultCode.USER_PASSWORD_ERROR);
        } else {
            // token æ— æ•ˆæˆ–è€… token è¿‡æœŸ
            ResponseUtils.writeErrMsg(response, ResultCode.TOKEN_INVALID);
        }
    }
    
}
</code></pre>
<p><strong>æ— æƒé™è®¿é—®å¤„ç†å™¨</strong></p>
<pre><code class="language-java">/**
 * æ— æƒé™è®¿é—®å¤„ç†å™¨
 *
 * @author youlai
 */
public class MyAccessDeniedHandler implements AccessDeniedHandler {

    @Override
    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) {
        ResponseUtils.writeErrMsg(response, ResultCode.ACCESS_UNAUTHORIZED);
    }

}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<p>éœ€è¦åœ¨å…¨å±€å¼‚å¸¸ä¸èƒ½æ•è·è®¤è¯å’Œé‰´æƒå¼‚å¸¸ï¼Œä¸ç„¶ä¸èƒ½äº¤ç»™ spring security å¼‚å¸¸å¤„ç†å™¨å¤„ç†</p>
<pre><code class="language-java">public class GlobalExceptionHandler {

    /**
     * å¤„ç†ç³»ç»Ÿå¼‚å¸¸
     * &lt;p&gt;
     * å…œåº•å¼‚å¸¸å¤„ç†ï¼Œå¤„ç†æœªè¢«æ•è·çš„å¼‚å¸¸
     */
    @ExceptionHandler(Exception.class)
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    public &lt;T&gt; Result&lt;T&gt; handleNullPointerException(Exception e) throws Exception {
        // å¦‚æœæ˜¯ Spring Security çš„è®¤è¯å¼‚å¸¸æˆ–æˆæƒå¼‚å¸¸ï¼Œç›´æ¥æŠ›å‡ºï¼Œäº¤ç”± Spring Security çš„å¼‚å¸¸å¤„ç†å™¨å¤„ç†
        if (e instanceof AccessDeniedException
                || e instanceof AuthenticationException) {
            throw e;
        }

        log.error(e.getMessage(), e);
        return Result.failed("ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜");
    }

}
</code></pre>
<h3 id="è®¤è¯æˆæƒé…ç½®">è®¤è¯æˆæƒé…ç½®</h3>
<p>åœ¨ <code>com.youlai.boot.config</code> åŒ…ä¸‹æ–°å»º <code>SecurityConfig</code> ç”¨æ¥ Spring Security å®‰å…¨é…ç½®</p>
<pre><code class="language-java">/**
 * Spring Security å®‰å…¨é…ç½®
 *
 * @author youlai
 */
@Configuration
@EnableWebSecurity  // å¯ç”¨ Spring Security çš„ Web å®‰å…¨åŠŸèƒ½ï¼Œå…è®¸é…ç½®å®‰å…¨è¿‡æ»¤é“¾
@EnableMethodSecurity // å¯ç”¨æ–¹æ³•çº§åˆ«çš„å®‰å…¨æ§åˆ¶ï¼ˆå¦‚ @PreAuthorize ç­‰ï¼‰
public class SecurityConfig {

    /**
     * å¿½ç•¥è®¤è¯çš„ URI åœ°å€
     */
    private final String[] IGNORE_URIS = {"/api/v1/auth/login"};

    /**
     * é…ç½®å®‰å…¨è¿‡æ»¤é“¾ï¼Œç”¨äºå®šä¹‰å“ªäº›è¯·æ±‚éœ€è¦è®¤è¯æˆ–æˆæƒ
     */
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {

        // é…ç½®è®¤è¯ä¸æˆæƒè§„åˆ™
        http
                .authorizeHttpRequests(requestMatcherRegistry -&gt;
                        requestMatcherRegistry
                                .requestMatchers(IGNORE_URIS).permitAll() // ç™»å½•æ¥å£æ— éœ€è®¤è¯
                                .anyRequest().authenticated() // å…¶ä»–è¯·æ±‚å¿…é¡»è®¤è¯
                )
                // ä½¿ç”¨æ— çŠ¶æ€è®¤è¯ï¼Œç¦ç”¨ Session ç®¡ç†ï¼ˆå‰åç«¯åˆ†ç¦» + JWTï¼‰
                .sessionManagement(configurer -&gt;
                        configurer.sessionCreationPolicy(SessionCreationPolicy.STATELESS)
                )
                // ç¦ç”¨ CSRF é˜²æŠ¤ï¼ˆå‰åç«¯åˆ†ç¦»é€šè¿‡ Token éªŒè¯ï¼Œä¸éœ€è¦ CSRFï¼‰
                .csrf(AbstractHttpConfigurer::disable)
                // ç¦ç”¨é»˜è®¤çš„è¡¨å•ç™»å½•åŠŸèƒ½
                .formLogin(AbstractHttpConfigurer::disable)
                // ç¦ç”¨ HTTP Basic è®¤è¯ï¼ˆç»Ÿä¸€ä½¿ç”¨ JWT è®¤è¯ï¼‰
                .httpBasic(AbstractHttpConfigurer::disable)
                // ç¦ç”¨ X-Frame-Options å“åº”å¤´ï¼Œå…è®¸é¡µé¢è¢«åµŒå¥—åˆ° iframe ä¸­
                .headers(headers -&gt;
                        headers.frameOptions(HeadersConfigurer.FrameOptionsConfig::disable)
                )
                // å¼‚å¸¸å¤„ç†
                .exceptionHandling(configurer -&gt; {
                    configurer
                            .authenticationEntryPoint(new MyAuthenticationEntryPoint()) // æœªè®¤è¯å¤„ç†å™¨
                            .accessDeniedHandler(new MyAccessDeniedHandler()); // æ— æƒé™è®¿é—®å¤„ç†å™¨
                });
            
            ;

        return http.build();
    }

    /**
     * é…ç½®å¯†ç åŠ å¯†å™¨
     *
     * @return å¯†ç åŠ å¯†å™¨
     */
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
    
     /**
     * ç”¨äºé…ç½®ä¸éœ€è¦è®¤è¯çš„ URI åœ°å€
     */
    @Bean
    public WebSecurityCustomizer webSecurityCustomizer() {
        return (web) -&gt; {
            web.ignoring().requestMatchers(
                    "/v3/api-docs/**",
                    "/swagger-ui/**",
                    "/swagger-ui.html",
                    "/webjars/**",
                    "/doc.html"
            );
        };
    }

    /**
     *è®¤è¯ç®¡ç†å™¨
     */
    @Bean
    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {
        return configuration.getAuthenticationManager();
    }
}

</code></pre>
<h3 id="token-å·¥å…·ç±»">Token å·¥å…·ç±»</h3>
<p>åœ¨ <code>com.youlai.boot.security.manager</code> åŒ…ä¸‹æ–°å»º <code>JwtTokenManager</code> ï¼Œç”¨äºç”Ÿæˆå’Œè§£æ token</p>
<pre><code class="language-java">/**
 * JWT Token ç®¡ç†ç±»
 *
 * @author youlai
 */
@Service
public class JwtTokenManager {

    /**
     * JWT å¯†é’¥ï¼Œç”¨äºç­¾åå’Œè§£ç­¾å
     */
    private final String secretKey = " SecretKey012345678901234567890123456789012345678901234567890123456789";

    /**
     * è®¿é—®ä»¤ç‰Œæœ‰æ•ˆæœŸ(å•ä½ï¼šç§’), é»˜è®¤ 1 å°æ—¶
     */
    private final Integer accessTokenTimeToLive = 3600;

    /**
     *  ç”Ÿæˆ JWT è®¿é—®ä»¤ç‰Œ - ç”¨äºç™»å½•è®¤è¯æˆåŠŸåç”Ÿæˆ JWT Token
     *
     * @param authentication ç”¨æˆ·è®¤è¯ä¿¡æ¯
     * @return JWT è®¿é—®ä»¤ç‰Œ
     */
    public String generateToken(Authentication authentication) {
        SysUserDetails userDetails = (SysUserDetails) authentication.getPrincipal();
        Map&lt;String, Object&gt; payload = new HashMap&lt;&gt;();
        // å°†ç”¨æˆ· ID æ”¾å…¥ JWT è½½è·ä¸­ï¼Œ å¦‚æœ‰å…¶ä»–æ‰©å±•å­—æ®µä¹Ÿå¯ä»¥æ”¾å…¥
        payload.put("userId", userDetails.getUserId());

        // å°†ç”¨æˆ·çš„è§’è‰²å’Œæƒé™ä¿¡æ¯æ”¾å…¥ JWT è½½è·ä¸­ï¼Œä¾‹å¦‚ï¼š["ROLE_ADMIN", "sys:user:query"]
        Set&lt;String&gt; authorities = authentication.getAuthorities().stream()
                .map(GrantedAuthority::getAuthority)
                .collect(Collectors.toSet());
        payload.put("authorities", authorities);

        Date now = new Date();
        payload.put(JWTPayload.ISSUED_AT, now);

        // è®¾ç½®è¿‡æœŸæ—¶é—´ -1 è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
        if (accessTokenTimeToLive != -1) {
            Date expiresAt = DateUtil.offsetSecond(now, accessTokenTimeToLive);
            payload.put(JWTPayload.EXPIRES_AT, expiresAt);
        }
        payload.put(JWTPayload.SUBJECT, authentication.getName());
        payload.put(JWTPayload.JWT_ID, IdUtil.simpleUUID());

        return JWTUtil.createToken(payload, secretKey.getBytes());
    }


    /**
     * è§£æ JWT Token è·å– Authentication å¯¹è±¡ - ç”¨äºæ¥å£è¯·æ±‚æ—¶è§£æ JWT Token è·å–ç”¨æˆ·ä¿¡æ¯
     *
     * @param token JWT Token
     * @return Authentication å¯¹è±¡
     */
    public Authentication parseToken(String token) {

        JWT jwt = JWTUtil.parseToken(token);
        JSONObject payloads = jwt.getPayloads();
        SysUserDetails userDetails = new SysUserDetails();
        userDetails.setUserId(payloads.getInt("userId")); // ç”¨æˆ·ID
        userDetails.setUsername(payloads.getStr(JWTPayload.SUBJECT)); // ç”¨æˆ·å
        // è§’è‰²é›†åˆ
        Set&lt;SimpleGrantedAuthority&gt; authorities = payloads.getJSONArray("authorities")
                .stream()
                .map(authority -&gt; new SimpleGrantedAuthority(Convert.toStr(authority)))
                .collect(Collectors.toSet());

        return new UsernamePasswordAuthenticationToken(userDetails, "", authorities);
    }

    /**
     *  éªŒè¯ JWT Token æ˜¯å¦æœ‰æ•ˆ
     *
     * @param token JWT Token ä¸æºå¸¦ Bearer å‰ç¼€
     * @return æ˜¯å¦æœ‰æ•ˆ
     */
    public boolean validateToken(String token) {
        JWT jwt = JWTUtil.parseToken(token);
        // æ£€æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ(éªŒç­¾ + æ˜¯å¦è¿‡æœŸ)
        return jwt.setKey(secretKey.getBytes()).validate(0);
    }

}
</code></pre>
<h3 id="ç™»å½•è®¤è¯æ¥å£">ç™»å½•è®¤è¯æ¥å£</h3>
<p>åœ¨ <code>com.youlai.boot.controller</code> åŒ…ä¸‹æ–°å»º <code>AuthController</code></p>
<pre><code class="language-java">/**
 * è®¤è¯æ§åˆ¶å™¨
 *
 * @author youlai
 */
@Tag(name = "01.è®¤è¯ä¸­å¿ƒ")
@RestController
@RequestMapping("/api/v1/auth")
@RequiredArgsConstructor
public class AuthController {

    // è®¤è¯ç®¡ç†å™¨ - ç”¨äºæ‰§è¡Œè®¤è¯
    private final AuthenticationManager authenticationManager;

    // JWT ä»¤ç‰ŒæœåŠ¡ç±» - ç”¨äºç”Ÿæˆ JWT ä»¤ç‰Œ
    private final JwtTokenManager jwtTokenManager;

    @Operation(summary = "ç™»å½•")
    @PostMapping("/login")
    public Result&lt;String&gt; login(
            @Parameter(description = "ç”¨æˆ·å", example = "admin") @RequestParam String username,
            @Parameter(description = "å¯†ç ", example = "123456") @RequestParam String password
    ) {

        // 1. åˆ›å»ºç”¨äºå¯†ç è®¤è¯çš„ä»¤ç‰Œï¼ˆæœªè®¤è¯ï¼‰
        UsernamePasswordAuthenticationToken authenticationToken =
                new UsernamePasswordAuthenticationToken(username.trim(), password);

        // 2. æ‰§è¡Œè®¤è¯ï¼ˆè®¤è¯ä¸­ï¼‰
        Authentication authentication = authenticationManager.authenticate(authenticationToken);

        // 3. è®¤è¯æˆåŠŸåç”Ÿæˆ JWT ä»¤ç‰Œï¼ˆå·²è®¤è¯ï¼‰
        String accessToken = jwtTokenManager.generateToken(authentication);

        return Result.success(accessToken);
    }
}
</code></pre>
<p>è®¿é—®æœ¬åœ°æ¥å£æ–‡æ¡£ <a href="http://localhost:8080/doc.html" target="_blank" rel="noopener nofollow">http://localhost:8080/doc.html</a> é€‰æ‹©ç™»å½•æ¥å£è¿›è¡Œè°ƒè¯•å‘é€è¯·æ±‚ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœç™»å½•æˆåŠŸè¿”å›è®¿é—®ä»¤ç‰Œ token</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241222162606665.png" alt="image-20241222162606665" loading="lazy"></p>
<p>è®¿é—® <a href="https://jwt.io/" target="_blank" rel="noopener nofollow">https://jwt.io/</a> è§£æè¿”å›çš„ token ï¼Œä¸»è¦åˆ†ä¸ºä¸‰éƒ¨åˆ†  Header(å¤´éƒ¨) ã€Payload(è´Ÿè½½) å’Œ Signature(ç­¾å) ï¼Œå…¶ä¸­è´Ÿè½½é™¤äº†å›ºå®šå­—æ®µä¹‹å¤–ï¼Œè¿˜å‡ºç°è‡ªå®šä¹‰æ‰©å±•çš„å­—æ®µ userIdã€‚</p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241222163923899.png" alt="" loading="lazy"></p>
<h3 id="è®¿é—®é‰´æƒ">è®¿é—®é‰´æƒ</h3>
<p>æˆ‘ä»¬æ‹¿è·å–ç”¨æˆ·åˆ—è¡¨ä¸¾ä¾‹ï¼Œé¦–å…ˆéœ€è¦éªŒè¯æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥ç™»å½•æ‹¿åˆ°çš„è®¿é—®ä»¤ç‰Œ token æ˜¯å¦æœ‰æ•ˆï¼ˆéªŒç­¾ã€æ˜¯å¦è¿‡æœŸç­‰ï¼‰ï¼Œç„¶åéœ€è¦æ ¡éªŒè¯¥ç”¨æˆ·æ˜¯å¦æœ‰è®¿é—®æ¥å£çš„æƒé™ï¼Œæœ¬èŠ‚å°±å›´ç»•ä»¥ä¸Šé—®é¢˜å±•å¼€ã€‚</p>
<p><strong>éªŒè¯è§£æ Token è¿‡æ»¤å™¨</strong></p>
<p>æ–°å»º <code>com.youlai.boot.security.filter</code>  æ·»åŠ   <code>JwtValidationFilter</code> è¿‡æ»¤å™¨ ç”¨äºéªŒè¯å’Œè§£ætoken</p>
<pre><code class="language-java">/**
 * JWT Token éªŒè¯å’Œè§£æè¿‡æ»¤å™¨
 * &lt;p&gt;
 * è´Ÿè´£ä»è¯·æ±‚å¤´ä¸­è·å– JWT Tokenï¼ŒéªŒè¯å…¶æœ‰æ•ˆæ€§å¹¶å°†ç”¨æˆ·ä¿¡æ¯è®¾ç½®åˆ° Spring Security ä¸Šä¸‹æ–‡ä¸­ã€‚
 * å¦‚æœ Token æ— æ•ˆæˆ–è§£æå¤±è´¥ï¼Œç›´æ¥è¿”å›é”™è¯¯å“åº”ã€‚
 * &lt;/p&gt;
 *
 * @author youlai
 */
public class JwtAuthenticationFilter extends OncePerRequestFilter {

    private static final String BEARER_PREFIX = "Bearer ";

    private final JwtTokenManager jwtTokenManager;

    public JwtAuthenticationFilter(JwtTokenManager jwtTokenManager) {
        this.jwtTokenManager = jwtTokenManager;
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        String token = request.getHeader(HttpHeaders.AUTHORIZATION);
        try {
            if (StrUtil.isNotBlank(token) &amp;&amp; token.startsWith(BEARER_PREFIX)) {
                // å»é™¤ Bearer å‰ç¼€
                token = token.substring(BEARER_PREFIX.length());
                // æ ¡éªŒ JWT Token ï¼ŒåŒ…æ‹¬éªŒç­¾å’Œæ˜¯å¦è¿‡æœŸ
                boolean isValidate = jwtTokenService.validateToken(token);
                if (!isValidate) {
                    writeErrMsg(response, ResultCode.TOKEN_INVALID);
                    return;
                }
                // å°† Token è§£æä¸º Authentication å¯¹è±¡ï¼Œå¹¶è®¾ç½®åˆ° Spring Security ä¸Šä¸‹æ–‡ä¸­
                Authentication authentication = jwtTokenManager.parseToken(token);
                SecurityContextHolder.getContext().setAuthentication(authentication);
            }
        } catch (Exception e) {
            SecurityContextHolder.clearContext();
            writeErrMsg(response, ResultCode.TOKEN_INVALID);
            return;
        }
        
        // æ—  Token æˆ– Token éªŒè¯é€šè¿‡æ—¶ï¼Œç»§ç»­æ‰§è¡Œè¿‡æ»¤é“¾ã€‚
        // å¦‚æœè¯·æ±‚ä¸åœ¨ç™½åå•å†…ï¼ˆä¾‹å¦‚ç™»å½•æ¥å£ã€é™æ€èµ„æºç­‰ï¼‰ï¼Œ
        // åç»­çš„ AuthorizationFilter ä¼šæ ¹æ®é…ç½®çš„æƒé™è§„åˆ™å’Œå®‰å…¨ç­–ç•¥è¿›è¡Œæƒé™æ ¡éªŒã€‚
        // ä¾‹å¦‚ï¼š
        // - åŒ¹é…åˆ° permitAll() çš„è§„åˆ™ä¼šç›´æ¥æ”¾è¡Œã€‚
        // - éœ€è¦è®¤è¯çš„è¯·æ±‚ä¼šæ ¡éªŒ SecurityContext ä¸­æ˜¯å¦å­˜åœ¨æœ‰æ•ˆçš„ Authenticationã€‚
        // è‹¥æ— æœ‰æ•ˆ Authentication æˆ–æƒé™ä¸è¶³ï¼Œåˆ™è¿”å› 403 Forbiddenã€‚
        filterChain.doFilter(request, response);
    }

    /**
     * å¼‚å¸¸æ¶ˆæ¯è¿”å›
     *
     * @param response  HttpServletResponse
     * @param resultCode å“åº”ç»“æœç 
     */
    public static void writeErrMsg(HttpServletResponse response, ResultCode resultCode) {
        int status = switch (resultCode) {
            case ACCESS_UNAUTHORIZED, TOKEN_INVALID -&gt; HttpStatus.UNAUTHORIZED.value();
            default -&gt; HttpStatus.BAD_REQUEST.value();
        };

        response.setStatus(status);
        response.setContentType(MediaType.APPLICATION_JSON_VALUE);
        response.setCharacterEncoding(StandardCharsets.UTF_8.name());

        try (PrintWriter writer = response.getWriter()) {
            String jsonResponse = JSONUtil.toJsonStr(Result.failed(resultCode));
            writer.print(jsonResponse);
            writer.flush();
        } catch (IOException e) {
            // æ—¥å¿—è®°å½•ï¼šæ•è·å“åº”å†™å…¥å¤±è´¥å¼‚å¸¸
            // LOGGER.error("Error writing response", e);
        }
    }
}
</code></pre>
<p><strong>æ·»åŠ  JWT éªŒè¯å’Œè§£æè¿‡æ»¤å™¨</strong></p>
<p>åœ¨ SecurityConfig è¿‡æ»¤å™¨é“¾æ·»åŠ  JWT tokenæ ¡éªŒå’Œè§£ææˆ Authentication å¯¹è±¡çš„è¿‡æ»¤å™¨ã€‚</p>
<pre><code class="language-java">/**
 * Spring Security å®‰å…¨é…ç½®
 *
 * @author youlai
 */
@RequiredArgsConstructor
public class SecurityConfig {

    // JWT Token æœåŠ¡ , ç”¨äº Token çš„ç”Ÿæˆã€è§£æã€éªŒè¯ç­‰æ“ä½œ
    private final JwtTokenManager jwtTokenManager;

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
      	return http 
                // ... 
                // JWT éªŒè¯å’Œè§£æè¿‡æ»¤å™¨
                .addFilterBefore(new JwtAuthenticationFilter(jwtTokenManager), UsernamePasswordAuthenticationFilter.class)
		  .build();
    }

    // ...
}

</code></pre>
<p><strong>è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£</strong></p>
<pre><code class="language-java">
@RestController
@RequestMapping("/users")
@RequiredArgsConstructor
public class UserController {

    private final SysUserService userService;

    @Operation(summary = "è·å–ç”¨æˆ·åˆ—è¡¨")
    @GetMapping
    @PreAuthorize("hasAuthority('sys:user:query')")
    public List&lt;SysUser&gt; listUsers() {
        return userService.list();
    }
    
}
</code></pre>
<p>è®¿é—®ä¸€ä¸ªä¸»è¦æµ‹è¯•è®¿é—®å‡­æ®ä»¤ç‰Œæ˜¯å¦è®¤è¯ä»¥åŠå¯¹åº”çš„ç”¨æˆ·æ˜¯å¦æœ‰è®¿é—®è¯¥æ¥å£æ‰€éœ€çš„æƒé™ï¼Œä¸Šé¢è·å–ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨çš„æ¥å£æœªé…ç½®åœ¨securityçš„ç™½åå•ä¸­ï¼Œä¹Ÿå°±æ˜¯éœ€è¦è®¤è¯ï¼Œä¸”è¢« @PreAuthorize("hasAuthority('sys:user:query')") æ ‡è®°è¯´æ˜ç”¨æˆ·éœ€è¦æœ‰ <code>sys:user:query</code>çš„æƒé™ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„é‰´æƒã€‚</p>
<p><strong>æ­£å¸¸è®¿é—®</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241224175237422.png" alt="" loading="lazy"></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241224175350088.png" alt="image-20241224175350088" loading="lazy"></p>
<p><strong>ä¸æºå¸¦ token è®¿é—®</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241224175510723.png" alt="" loading="lazy"></p>
<p><strong>æºå¸¦é”™è¯¯/è¿‡æœŸçš„ token</strong></p>
<p><img src="https://www.youlai.tech/storage/blog/image-20241224175837092.png" alt="" loading="lazy"></p>
<p><strong>æœ‰è®¿é—®æƒé™</strong></p>
<p>ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ <code>sys:user:query</code></p>
<pre><code class="language-java">public class UserController {

    @Operation(summary = "è·å–ç”¨æˆ·åˆ—è¡¨")
    @GetMapping
    @PreAuthorize("hasAuthority('sys:user:query')")  // éœ€è¦ sys:user:query æƒé™
    public List&lt;SysUser&gt; listUsers() {
        return userService.list();
    }
    
}
</code></pre>
<p><img src="https://www.youlai.tech/storage/blog/image-20241225000633295.png" alt="image-20241225000633295" loading="lazy"></p>
<p><strong>æ— è®¿é—®æƒé™</strong></p>
<p>ç”¨æˆ·æ²¡æœ‰æ‹¥æœ‰çš„æƒé™ <code>sys:user:info</code></p>
<pre><code class="language-java">public class UserController {

    @Operation(summary = "è·å–ç”¨æˆ·è¯¦æƒ…")
    @GetMapping("/{id}")
    @PreAuthorize("hasAuthority('sys:user:info')") // éœ€è¦ sys:user:info æƒé™
    public Result&lt;SysUser&gt; getUserById(
            @Parameter(description = "ç”¨æˆ·ID") @PathVariable Long id
    ) {
        SysUser user = userService.getById(id);
    }     
}
</code></pre>
<p><img src="https://www.youlai.tech/storage/blog/image-20241225000802438.png" alt="" loading="lazy"></p>
<h1 id="ç»“è¯­">ç»“è¯­</h1>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæ‚¨å°†äº†è§£ä¼ä¸šçº§åç«¯å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½å’Œé¡¹ç›®ä»æ­å»ºåˆ°éƒ¨ç½²çš„å®Œæ•´æµç¨‹ã€‚å¦‚æœ‰å…´è¶£ï¼Œæ¬¢è¿è®¿é—®å¼€æºé¡¹ç›®ï¼š<a href="https://gitee.com/youlaiorg" target="_blank" rel="noopener nofollow">https://gitee.com/youlaiorg</a>ï¼Œå…³æ³¨å…¬ä¼—å· æœ‰æ¥æŠ€æœ¯ï¼Œæˆ–æ·»åŠ å¾®ä¿¡ï¼ˆå¾®ä¿¡å·ï¼šhaoxianruiï¼‰å‚ä¸å¼€æºäº¤æµã€‚</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.3466893622951389" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-21 10:06">2025-01-21 10:05</span>&nbsp;
<a href="https://www.cnblogs.com/haoxianrui">æœ‰æ¥æŠ€æœ¯</a>&nbsp;
é˜…è¯»(<span id="post_view_count">157</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">3</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18683051" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18683051);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18683051', targetLink: 'https://www.cnblogs.com/haoxianrui/p/18683051', title: 'ã€Œyoulai-bootã€å…¥é—¨ç¯‡ï¼šä»0åˆ°1æ­å»º Javaã€Spring Bootã€Spring Security ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿ' })">ä¸¾æŠ¥</a>
</div>
        
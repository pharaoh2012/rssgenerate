
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/guhunjun/p/18668891" title="发布于 2025-01-13 16:46">
    <span role="heading" aria-level="2">html2canvas使用注意要点</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>作者：咕魂<br>
日期：2025年1月13日</p>
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#注意事项" rel="noopener nofollow">注意事项</a></li><li><a href="#实现方法" rel="noopener nofollow">实现方法</a></li></ul></div><p></p>
<h1 id="注意事项">注意事项</h1>
<ul>
<li>
<p>不要给svg加style属性，会导致实际布局与图片布局不一致</p>
</li>
<li>
<p>不要使用overflow：hidden属性，文本超出长度转换为省略号将无法使用</p>
</li>
</ul>
<pre><code class="language-js">// 替换方案
// js限制字符串长度
formatStr(text) {
    let maxLength = 20;
    switch(this.col){
        case 2:
            maxLength = 20;
            break;
        case 3:
            maxLength = 15;
            break;
        case 4:
            maxLength = 12;
            break;
        case 5:
            maxLength = 10;
            break;
    }
    let currentWidth = 0;
    let truncatedText = '';
    let maxWidth = maxLength * 8;
    for (let char of text) {
        // 判断字符是中文字符（Unicode范围来大致判断）
        let pattern = /[^a-zA-Z0-9.,;:!?\-_@#$%^&amp;*()+=&lt;&gt;{}[\]\/\\|]/;
        if (pattern.test(char)) {
            currentWidth += 13; // 假设中文字符宽度为16px，可根据实际字体调整
        } else {
            currentWidth += 8; // 假设英文字符宽度为8px，可根据实际字体调整
        }
        if (currentWidth &lt;= maxWidth) {
            truncatedText += char;
        } else {
            return truncatedText + '...';
        }
    }
    return truncatedText;
}
</code></pre>
<ul>
<li>其他待补充</li>
</ul>
<blockquote>
<ul>
<li>长度最大差不多是在2w像素</li>
</ul>
</blockquote>
<h1 id="实现方法">实现方法</h1>
<p>CDN引入来源地址：<a href="https://www.html2canvas.cn/" target="_blank" rel="noopener nofollow">html2canvas中文文档</a></p>
<pre><code class="language-js">// 需要转换为图片的元素：paper
html2canvas(document.querySelector(".paper")).then(canvas =&gt; {
    // 显示截图效果
    // document.body.appendChild(canvas);
    // 下载canvas图片
    const a = document.createElement("a");
    a.download = `${this.date}.png`;
    a.href = canvas.toDataURL("image/png");
    a.click();
    // 移除canvas
    canvas.remove();
    alert('截图成功');
});
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="21.89836920539236" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-13 16:47">2025-01-13 16:46</span>&nbsp;
<a href="https://www.cnblogs.com/guhunjun">敲可耐的咕魂君</a>&nbsp;
阅读(<span id="post_view_count">30</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18668891" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18668891);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18668891', targetLink: 'https://www.cnblogs.com/guhunjun/p/18668891', title: 'html2canvas使用注意要点' })">举报</a>
</div>
        
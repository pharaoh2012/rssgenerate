
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ffzj/p/18711473" title="发布于 2025-02-12 14:10">
    <span role="heading" aria-level="2">手把手教你在个人电脑部署本地知识库（基于RAGFlow + DeepSeek [+ Ollama]）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>1.&nbsp;&nbsp;&nbsp; 实现方案及准备工作</h1>
<p class="2">按照教程一步一步操作，基本没有什么太大难度，稍显麻烦的可能就是因网络问题有些资源无法下载，对于镜像无法下载的问题，文中也提供了替代的方法，但是github访问不稳定这点，如果你不是上网达人，只能找朋友求助了。</p>
<p class="2">本文档提供了两种部署方法：半本地化部署、完全本地化部署，你可以根据自己的需求选择。</p>
<p class="2">部署本地知识库的工具有很多，RAGFlow、FastGPT、DIFY、AnythingLLM等，他们各有特点，本文以RAGFlow为例。</p>
<p class="2">本文讲述的是在Windows操作系统中进行的部署，但实际上在Linux系统中部署差别也不是很大，因为本文的部署主要是基于docker-compose。</p>
<h2>1.1.&nbsp;&nbsp; 安装docker桌面版</h2>
<p class="20">docker桌面版用于容器化运行ragflow相关组件。</p>
<p class="20">官网下载地址：<a href="https://www.docker.com/" rel="noopener nofollow">https://www.docker.com/</a></p>
<p class="20">下载后安装，一直下一步，直至安装成功。</p>
<p class="20">这里有一点需要注意，很多虚拟机软件包括docker默认会使用Hyper-V，比如先安装vmware再安装docker后，可能就会引起冲突，建议先卸载本机上的虚拟机软件，再安装docker。</p>
<p class="20">安装完成后，打开docker desktop（下文称docker桌面版），点右上角的设置（齿轮）按钮，选择Resource -&gt; Advanced，修改此处的路径，下载的镜像、docker运行期间占用的虚拟磁盘空间，都会使用这个目录。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108536-480477532.png" alt=""></p>
<p class="20">&nbsp;</p>
<h1>2.&nbsp;&nbsp;&nbsp; 半本地化部署</h1>
<p class="20">半本地化部署是指知识库工具部署在本地，但语言模型不部署在本地，而是接入互联网模型提供商提供的接口。这种方式对本机性能要求不算太高，但需要按用量付费，且文件安全性较完全本地化部署要差一些。</p>
<h2>2.1.&nbsp;&nbsp; 克隆ragflow仓库</h2>
<p class="20">选择一个盘符，确保其剩余空间大于100GB。</p>
<p class="20">打开docker桌面版，点击右下角的“Terminal”进入终端模式。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108601-1397820138.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">输入下面命令进入选择的盘符。</p>
<p>cd e:\</p>
<p>&nbsp;</p>
<p class="2">然后输入下面命令克隆仓库。</p>
<p>git <strong>clone</strong> <strong>https</strong>://github.com/infiniflow/ragflow.git</p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108674-963801887.png" alt=""></p>
<p>&nbsp;</p>
<p class="20">如果提示git命令不存在，可能是本机没有安装git，通过下列地址下载安装：<a href="https://git-scm.com/" rel="noopener nofollow">https://git-scm.com/</a></p>
<p class="20">因为github连接的不稳定性，这里可能会有一些问题，可根据报错自行上网寻找解决方法或向朋友求助。</p>
<p class="20">&nbsp;</p>
<p class="20">克隆成功后，会创建E:\ragflow目录，执行如下命令。</p>
<p>cd ragflow</p>
<p>git checkout -f v0.16.0</p>
<h2>2.2.&nbsp;&nbsp; 修改.env文件</h2>
<p class="20">在“我的电脑”中，进入刚刚克隆的目录，进入其子目录docker下，用文本编辑器打开.env文件。</p>
<p class="20">决定要下载的版本，配置文件中提供了两个版本，一个是v0.16.0-slim（第84行），一个是v0.16.0（第87行），两者的区别是，前者不会预下载嵌入模型，默认会安装前者，为了方便这里改为后者。</p>
<p class="20">修改前。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108514-1113807626.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">但因为<span lang="EN-US">DockerHub官方镜像源很早开始就无法访问了，直接修改还不行。如果你能正常下载，如上面修改就行；但大概率是不能正常下载的，这里提供了一种解决办法，可以按<span lang="EN-US"><a href="https://www.cnblogs.com/ffzj/p/18711315" target="_blank">docker<span lang="EN-US"><span lang="EN-US">镜像无法下载问题解决</span></span></a>中的步骤来操作。</span></span></p>
<p class="2">操作完成后，将新的镜像地址填写进来。最终如下图。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108614-447663380.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2"><span lang="EN-US">.env的第二处修改，是将<span lang="EN-US">HF_ENDPOINT=https://hf-mirror.com这一行取消注释，因为一般情况下我们是访问不了<span lang="EN-US">huggingface。修改后如下。</span></span></span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108487-1927697916.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">第三处修改，包括多个组件的密码，比如<span lang="EN-US">MYSQL_PASSWORD（第<span lang="EN-US">46行），等号后面的值改为自己要设定的密码。</span></span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108516-432590877.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h2>2.3.&nbsp;&nbsp; 修改docker-compose-base.yml文件</h2>
<p class="20">这个文件的修改并非强制，主要是指定挂载文件的路径，比如MySQL的数据文件存放目录。</p>
<p class="20">如下图，我配置了将MySQL文件存放到e:\docker\ragflow\mysql目录下。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108534-706377321.png" alt="" width="567" height="327"></p>
<p class="20">&nbsp;</p>
<p class="2">以下是代码文本，注意driver_opts:这一行必须与上一行对齐，type: none以及下面两行缩进两个字符间距。</p>
<p>&nbsp;&nbsp;&nbsp; driver_opts:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type: none</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; device: /e/docker/ragflow/mysql/</p>
<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;o: bind</p>
<p>&nbsp;</p>
<p>还有一种情况，即默认的镜像无法下载成功时，使用<a href="https://www.cnblogs.com/ffzj/p/18711315" target="_blank">docker官网镜像无法下载解决</a>方法后，需要在这里修改镜像地址。</p>
<h2>2.4.&nbsp;&nbsp; 启动容器</h2>
<p class="20">回到docker桌面版，确保此时位于ragflow目录。因为我用的是nvidia显卡，所以用docker-compose-gpu.yml文件来启动，如果是其他情况，可以用docker-compose.yml文件。</p>
<p>docker compose -f docker/docker-compose-gpu.yml up -d</p>
<p>&nbsp;</p>
<p class="20">初次运行，docker会下载多个镜像。如果出同下面这种错误，说明拉取镜像失败。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108549-2102920399.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">在前面<span lang="EN-US"><span lang="EN-US"><span lang="EN-US">修改.env<span lang="EN-US"><span lang="EN-US">文件</span></span></span></span>时我们已经提到了，目前<span lang="EN-US">docker官网的镜像直接访问不了，请按<span lang="EN-US"><a href="https://www.cnblogs.com/ffzj/p/18711315" target="_blank">docker<span lang="EN-US"><span lang="EN-US">镜像无法下载问题解决</span></span></a>中的步骤来操作。</span></span></span></p>
<p class="2">启动成功后，在<span lang="EN-US">Containers中就会出现<span lang="EN-US">ragflow相关组件。</span></span></p>
<p class="2"><span lang="EN-US"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108621-629322384.png" alt=""></span></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h2>2.5.&nbsp;&nbsp; 删除容器</h2>
<p class="20">只有需要修改配置文件时，才需要执行此操作。</p>
<p class="20">使用下面的命令删除容器。</p>
<p>docker compose -f docker/docker-compose-gpu.yml down</p>
<p>&nbsp;</p>
<p class="20">修改配置文件后，再重新启动容器。</p>
<p>docker compose -f docker/docker-compose-gpu.yml up -d</p>
<p>&nbsp;</p>
<h1>3.&nbsp;&nbsp;&nbsp; 首次登录</h1>
<p class="2">在docker桌面版的Containers中，找到ragflow-server，点击其右侧的Show all ports。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108578-1809572487.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">点击<span lang="EN-US">80:80。</span></p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108126-879667899.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">系统会在默认浏览器中打开登录地址<span lang="EN-US"><a href="http://localhost/login" rel="noopener nofollow">http://localhost/login</a>。</span></p>
<p class="2">点击注册，来注册一个账号。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108672-2081967226.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">用注册的账号登录后，点击右上角<span lang="EN-US">English右侧的下拉图标，可将语言切换为简体中文。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108548-181778398.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h1>4.&nbsp;&nbsp;&nbsp; 完全本地化部署</h1>
<p class="20">完全本地化部署是指所有组件都部署在本地，这一步并不是必须的，取决于你的需求，同时对电脑配置有一定要求。如果不需要，可以跳过这一步，继续从<a>添加互联网模型</a>开始。</p>
<h2>4.1.&nbsp;&nbsp; 部署要求</h2>
<p class="20">系统：Windows、Linux均可，本文以Windows为例。</p>
<p class="20">显卡：7B参数模型需要NVIDIA GeForce RTX 3060 Ti或更高端显卡，14B参数模型需要NVIDIA GeForce RTX 4080或更高端显卡。</p>
<p class="20">内存：7B参数模型推荐32GB内存，14B参数模型推荐64GB内存。</p>
<p class="20">CPU：Intel Core i5 12400或同级别以上CPU。</p>
<p class="20">磁盘：剩余磁盘空间大于100GB。</p>
<h2>4.2.&nbsp;&nbsp; 下载ollama并运行本地模型</h2>
<p class="20">ollama是一个模型管理工具，可以通过它下载多种不同模型。ollama官网地址：<a href="https://ollama.com/" rel="noopener nofollow">https://ollama.com/</a>。</p>
<p class="20">下载后安装，安装成功后在浏览器打开<a href="http://127.0.0.1:11434/" rel="noopener nofollow">http://127.0.0.1:11434/</a>。如果页面上显示Ollama is running，表示安装成功。如果下载页面加载失败，可以到github中下载OllamaSetup.exe，下载页面：https://github.com/ollama/ollama/releases。</p>
<p class="20">&nbsp;</p>
<p class="20">仅下载ollama还不行，还必须下载需要的模型。</p>
<p class="20">ollama默认将模型下载到C盘，因此我们需要修改模型下载目录。</p>
<p class="20">1.打开系统设置，进入系统属性或系统变量设置。</p>
<p class="20">2.创建一个新的系统变量或修改现有的环境变量，变量名为OLLAMA_MODELS。</p>
<p class="20">3.将变量的值设置为ollama模型文件下载路径，例如d:\ollama。</p>
<p class="20">设置完以后重启Ollama服务即可。</p>
<p class="20">&nbsp;</p>
<p class="20">打开ollama官网，在导航栏上找到Models，点击进入。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108550-347042299.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">在这个页面中可以搜索到各类模型，找到我们需要下载的模型。点击进入该模型详情页面。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108560-2028157495.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">在模型页面选择需要下载的参数规模，一般个人电脑最多只能支持到<span lang="EN-US">14b，然后点击右侧的“复制”按钮，复制下载模型的命令。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108556-1518763096.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">打开<span lang="EN-US">windows命令提示符工具（<span lang="EN-US">WIN +R快捷键，然后输入<span lang="EN-US">cmd，回车）。点击右键粘贴命令，回车，<span lang="EN-US">ollama会自动下载模型。</span></span></span></span></p>
<p class="2"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108165-357147352.png" alt="" width="510" height="160"></span></span></span></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">安装完成后，可以通过<span lang="EN-US">CTRL+D快捷键退出会话。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108158-986402273.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">可以通过<span lang="EN-US">ollama list命令查看已安装的模型。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108676-905163484.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h2>4.3.&nbsp;&nbsp; 添加本地模型</h2>
<p class="20">点击右上角的头像，在设置页面点击“模型供应商”，在列表中找到Ollama，点击其下方的“添加模型”。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108231-1396087378.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">模型类型根据情况选择。</p>
<p class="2"><span lang="EN-US">chat：语言（会话、聊天）模型。</span></p>
<p class="2"><span lang="EN-US">embedding：嵌入模型，用于将文本向量化。</span></p>
<p class="2"><span lang="EN-US">rerank：重排模型，用于对检索结果进行再次排序，在<span lang="EN-US">ragflow中创建助理时，默认使用矢量余弦相似性进行这一处理，除非指定了<span lang="EN-US">rerank模型。</span></span></span></p>
<p class="2"><span lang="EN-US">image2text：图片转文本模型。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108501-1962659021.png" alt="" width="544" height="286"></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">模型名称必须与<span lang="EN-US">ollama中的名称一致，如想将<span lang="EN-US">deepseek-r1:7b添加为本地模型，就需要将其完整名称复制到文本框中。</span></span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108578-1779044029.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">基础<span lang="EN-US">Url：因为<span lang="EN-US">ragflow是基于<span lang="EN-US">docker运行，但是<span lang="EN-US">ollama是直接安装在宿主机的，因此基础<span lang="EN-US">Url填写：<span lang="EN-US">http://host.docker.internal:11434</span></span></span></span></span></span></p>
<p class="2"><span lang="EN-US">API-Key：留空。</span></p>
<p class="2">最大<span lang="EN-US">token数：根据需要填写，不超过<span lang="EN-US">8192。</span></span></p>
<p class="2">填写完成后单击右下角“确定”。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108529-817354883.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">如果要继续添加本地模型，可以点击<span lang="EN-US">ollama中的“添加模型”按钮，进行添加。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108204-870817050.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h1>5.&nbsp;&nbsp;&nbsp; 添加互联网模型</h1>
<p class="2">本章中只描述半本地化部署的模型添加方法，完全本地化部署的模型添加方法请参考的添加本地模型步骤。</p>
<h2>5.1.&nbsp;&nbsp; 获取API KEY</h2>
<p class="20">本文以DeepSeek为例，进入DeepSeek开放平台，<a href="https://platform.deepseek.com/" rel="noopener nofollow">https://platform.deepseek.com/</a>。</p>
<p class="20">在API Keys中，创建API key。然后复制并保存。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108561-481068398.png" alt=""></p>
<h2>5.2.&nbsp;&nbsp; 添加模型</h2>
<p class="20">点击右上角头像。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108514-426085858.png" alt=""></p>
<p class="2">点击“模型提供商”，在列表中找到自己期望的模型供应商，以<span lang="EN-US">DeepSeek为例，点击“添加模型”。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108583-1147831535.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">在弹出的窗口中填写上一步<span lang="EN-US"><span lang="EN-US">获取的API KEY</span>，确定。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108529-1677769736.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">添加成功后，可以在页面上半部分的已添加模型列表中，看到刚刚添加的<span lang="EN-US">DeepSeek了。</span></p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108604-1607240466.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<h1>6.&nbsp;&nbsp;&nbsp; 添加知识库与对话</h1>
<h2>6.1.&nbsp;&nbsp; 修改系统模型</h2>
<p class="20">在模型供应商中，点击右上角的“系统模型设置”。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108517-1511516733.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">在其中选择各类模型的默认模型，比如聊天模型选deepseek等。</p>
<p class="2">嵌入模型和Rerank模型一般不必修改。</p>
<p class="20">Img2txt、Sequence2txt、TTS这三种模型，可以等需要用到的时候，添加模型后，再来配置。其中img2txt模型用于识别图片，Sequence2txt模型用于识别语音，TTS模型用于生成语音。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108537-463963162.png" alt=""></p>
<p class="20">&nbsp;</p>
<h2>6.2.&nbsp;&nbsp; 添加知识库</h2>
<p class="20">点击上方导航栏的“知识库”，进入知识库页面，点击右侧的“创建知识库”按钮。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108500-1141379817.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">在弹出窗口中，输入名称后确定，进入知识库配置页面。</p>
<p class="2">设置知识库的各项参数。</p>
<p class="2">文档语言：“中文”。</p>
<p class="2">嵌入模型：默认不变。</p>
<p class="2">解析方法：取决后面需要上传到知识库的文件类型，每一种在页面右侧都有说明和示例，我要上传的是一个存放在<span lang="EN-US">EXCEL中的问答对，所以我选择<span lang="EN-US">Q&amp;A。</span></span></p>
<p class="2">其他信息如果不懂就不调整。</p>
<p class="2">确认后保存。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108602-753767816.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">在数据集中新增文件，选择本地文件。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108570-824693133.png" alt=""></p>
<p class="2">&nbsp;</p>
<p>&nbsp;</p>
<p class="2">在弹出的窗口中，上传准备好的知识库文档。</p>
<p class="2">上传成功后，单击文件右侧的解析按钮开始解析文件，解析成功后，解析状态会变为“成功”。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108571-747645857.png" alt=""></p>
<p class="2">&nbsp;</p>
<p class="2">单击“检索测试”，在该页面中进行问答测试。通过调整相似度阈值和关键字相似度权重两个参数，来测试什么样的设置能获得相对精准的回答。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108588-1655744730.png" alt=""></p>
<p class="2">&nbsp;</p>
<h2>6.3.&nbsp;&nbsp; 创建对话</h2>
<p class="20">点击上方导航栏的“聊天”，再点击“新建助理”。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108486-884479618.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">给助理设置一个姓名，最底部的知识库中选择刚刚创建的知识库。</p>
<p class="2">然后点击窗口上方的“提示引擎”。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108618-1344850913.png" alt="" width="702" height="915"></p>
<p class="2">&nbsp;</p>
<p class="2">在窗口中根据需要修改提示词，因为我需要助手严格按知识库中的内容作答，不要回答其他内容，所以在默认的提示词基础上做了一点修改。</p>
<p class="2">再根据上一步添加知识库时的测试，设置合适的相似度阈值和关键词相似度权重。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108244-256847833.png" alt="" width="691" height="665"></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">提示引擎设置完成后，点击窗口上方的“模型设置”。</p>
<p class="2">选择期望使用的模型，以及模型的回复风格。</p>
<p class="2">注意模型下拉列表中，<span lang="EN-US">Ollama下面的是<span lang="EN-US"><span lang="EN-US">本地模型</span>，上面的<span lang="EN-US">DeepSeek是接入供应商的<span lang="EN-US">API，需要按用量付费的。实际使用中，我们要么选择半本地化部署，要么选择完全本地化部署，一般是不太会出现二者皆有的情况，这里只是为了方便演示。</span></span></span></span></p>
<p class="2">最大<span lang="EN-US">token数，如果助手给出的回答中预估内容比较长，可以适当增加最大<span lang="EN-US">token数。</span></span></p>
<p class="2">一切确定后，单击“确定”按钮，创建助手成功。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108621-684537968.png" alt="" width="656" height="621"></p>
<p class="2">&nbsp;</p>
<p class="2">&nbsp;</p>
<p class="2">点击聊天右侧的“<span lang="EN-US">+”号，创建新的对话。</span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108570-1661272063.png" alt=""></span></p>
<p class="2">&nbsp;</p>
<p class="2">然后就可以开始对话了。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108615-184221860.png" alt=""></p>
<p class="2">&nbsp;</p>
<h2>6.4.&nbsp;&nbsp; 分享助手</h2>
<p class="20">有时候助手需要分享给别人使用，点击右上角头像，进入API页面，点击API KEY按钮。</p>
<p class="20"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108223-921205432.png" alt=""></p>
<p class="20">&nbsp;</p>
<p class="2">在弹出的窗口中点击“创建新密钥”，然后确定。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108501-2034200216.png" alt="" width="514" height="268"></p>
<p class="2">&nbsp;</p>
<p class="2">点击上方导航栏“聊天”，回到聊天页面。</p>
<p class="2">鼠标光标停留在智能助手上方时，会出现一个设置按钮，将光标移动上去，在弹出的列表中选择“嵌入网站”。</p>
<p class="2"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108602-488404346.png" alt="" width="702" height="366"></p>
<p class="2">&nbsp;</p>
<p class="2">将<span lang="EN-US">src后面引号内的内容复制出来，将<span lang="EN-US">localhost替换为本机<span lang="EN-US">IP或域名，就可以分享给别人使用了。</span></span></span></p>
<p class="2"><span lang="EN-US"><img src="https://img2024.cnblogs.com/blog/1959921/202502/1959921-20250212123108587-1436552883.png" alt="" width="661" height="347"></span></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.5065493482106481" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-12 14:11">2025-02-12 14:10</span>&nbsp;
<a href="https://www.cnblogs.com/ffzj">饭饭12</a>&nbsp;
阅读(<span id="post_view_count">400</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18711473" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18711473);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18711473', targetLink: 'https://www.cnblogs.com/ffzj/p/18711473', title: '手把手教你在个人电脑部署本地知识库（基于RAGFlow + DeepSeek [+ Ollama]）' })">举报</a>
</div>
        
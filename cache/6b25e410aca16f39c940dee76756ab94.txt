<!----> <meta itemprop="headline" content="ä¸€è¡Œä»£ç ï¼Œå°†ç½‘é¡µå…ƒç´ å˜æˆå›¾ç‰‡ï¼æ¯” html2canvas å¿« 93 å€çš„æˆªå›¾ç¥å™¨æ¥äº†ï¼"> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"> <meta itemprop="datePublished" content="2025-06-09T00:59:42.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹‹è™é™ˆéšæ˜“"> <meta itemprop="url" content="https://juejin.cn/user/1239904846873326"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€è¡Œä»£ç ï¼Œå°†ç½‘é¡µå…ƒç´ å˜æˆå›¾ç‰‡ï¼æ¯” html2canvas å¿« 93 å€çš„æˆªå›¾ç¥å™¨æ¥äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904846873326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹‹è™é™ˆéšæ˜“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-06-09T00:59:42.000Z" title="Mon Jun 09 2025 00:59:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-06-09
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""></circle></svg> <span class="views-count" data-v-61fb5e44="">
                    9,759
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""></path></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å†œæ‘ç¨‹åºå‘˜ï¼Œç‹¬ç«‹å¼€å‘è€…ï¼Œè¡Œä¸šè§‚å¯Ÿå‘˜ï¼Œå‰ç«¯ä¹‹è™é™ˆéšæ˜“ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä¸“é—¨åˆ†äº«ä»£ç æŠ€æœ¯ï¼Œç¼–ç¨‹èµ„è®¯ï¼Œè¡Œä¸šçƒ­ç‚¹çš„å…¬ä¼—å·ï¼Œæ¬¢è¿å…³æ³¨ã€‚</p>
<ul>
<li>ä¸ªäººç½‘ç«™ 1ï¸âƒ£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchensuiyi.me" target="_blank" title="https://chensuiyi.me" ref="nofollow noopener noreferrer">chensuiyi.me</a></li>
<li>ä¸ªäººç½‘ç«™ 2ï¸âƒ£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fme.yicode.tech" target="_blank" title="https://me.yicode.tech" ref="nofollow noopener noreferrer">me.yicode.tech</a></li>
<li>æŠ€æœ¯ç¾¤ï¼Œæé’±ç¾¤ï¼Œé—²èŠç¾¤ï¼Œè‡ªé©¾ç¾¤ï¼Œæƒ³å…¥ç¾¤çš„åœ¨æˆ‘ä¸ªäººç½‘ç«™è”ç³»æˆ‘ã€‚</li>
</ul>
<p>ä¸€é”®ä¸‰è¿ (<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>)ï¼Œå¯ä»¥ç»™æˆ‘æä¾›æ›å…‰ï¼Œå¸¦æ¥ä¸€ä»½æ—©é¤æ”¶å…¥ï¼Œè°¢è°¢å¤§å®¶~~</p>
<hr>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2baa61b124724cc49ec147ac30407393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL6JmO6ZmI6ZqP5piT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1755480100&amp;x-signature=kkBx11xf2Vq0G4LxdQobhrRmBj0%3D" alt="" loading="lazy"></p>
<p>ä½ æ˜¯å¦æ›¾ç»ä¸ºäº†ä¿å­˜ç½‘é¡µä¸Šçš„ä¸€ä¸ªç²¾ç¾è®¾è®¡è€Œçƒ¦æ¼ï¼Ÿæ˜¯å¦æƒ³è¿‡æŠŠåŠ¨æ€ç”Ÿæˆçš„æ•°æ®å›¾è¡¨åˆ†äº«ç»™åŒäº‹ï¼Ÿä»Šå¤©è¦ä»‹ç»çš„ <strong>snapDOM</strong> ä¸ä»…èƒ½å®Œç¾è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿˜èƒ½ä»¥æƒŠäººçš„é€Ÿåº¦å®Œæˆä»»åŠ¡ã€‚</p>
<h2 data-id="heading-0">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ snapDOMï¼Ÿ</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™äº›éœ€æ±‚ï¼š</p>
<ul>
<li>ğŸ“± <strong>ç¤¾äº¤åˆ†äº«</strong>ï¼šç”¨æˆ·æƒ³æŠŠè‡ªå·±çš„æˆå°±å¡ç‰‡åˆ†äº«åˆ°æœ‹å‹åœˆ</li>
<li>ğŸ“Š <strong>æŠ¥è¡¨å¯¼å‡º</strong>ï¼šè€æ¿è¦æ±‚æŠŠç½‘é¡µä¸Šçš„æ•°æ®å›¾è¡¨æ”¾è¿› PPT</li>
<li>ğŸ¨ <strong>è®¾è®¡ä¿å­˜</strong>ï¼šè®¾è®¡å¸ˆéœ€è¦ä¿å­˜åŠ¨æ€ç”Ÿæˆçš„æ•ˆæœå›¾</li>
<li>ğŸ›’ <strong>è¥é”€æ¨å¹¿</strong>ï¼šç”µå•†éœ€è¦ç”Ÿæˆå•†å“çš„ä¿ƒé”€æµ·æŠ¥</li>
</ul>
<p>ä¼ ç»Ÿæ–¹æ¡ˆè¦ä¹ˆéœ€è¦åç«¯æ”¯æŒï¼Œè¦ä¹ˆä½¿ç”¨ç¬¨é‡çš„åº“ï¼Œè€Œ snapDOM è®©è¿™ä¸€åˆ‡å˜å¾—å¼‚å¸¸ç®€å•ã€‚</p>
<h2 data-id="heading-1">âš¡ æ ¸å¿ƒç‰¹æ€§ä¸€è§ˆ</h2>
<h3 data-id="heading-2">1ã€‚ğŸš€ æè‡´æ€§èƒ½</h3>
<p>æ¥çœ‹çœ‹è¿™ç»„ä»¤äººéœ‡æ’¼çš„æ€§èƒ½æ•°æ®ï¼š</p>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¯” html2canvas å¿«</th><th>æ¯” dom-to-image å¿«</th></tr></thead><tbody><tr><td>å°å…ƒç´  (200Ã—100)</td><td><strong>6.46å€</strong></td><td>32.27å€</td></tr><tr><td>ä¸­ç­‰å¤§å° (400Ã—300)</td><td><strong>7.28å€</strong></td><td>32.66å€</td></tr><tr><td>æ•´é¡µæˆªå›¾ (1200Ã—800)</td><td><strong>13.17å€</strong></td><td>35.29å€</td></tr><tr><td>è¶…å¤§å…ƒç´  (4000Ã—2000)</td><td><strong>93.31å€</strong> ğŸ”¥</td><td>133.12å€</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Š <em>æ•°æ®æ¥æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzumerlab%2Fsnapdom%23benchmarks" target="_blank" title="https://github.com/zumerlab/snapdom#benchmarks" ref="nofollow noopener noreferrer">snapDOM å®˜æ–¹åŸºå‡†æµ‹è¯•</a>ï¼Œæµ‹è¯•ç¯å¢ƒä¸º headless Chromiumï¼Œä½¿ç”¨çœŸå® DOM èŠ‚ç‚¹ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿è¡Œ <code>npm run test:benchmark</code> åœ¨æœ¬åœ°éªŒè¯è¿™äº›æ•°æ®ã€‚</em></p>
</blockquote>
<h3 data-id="heading-3">2ã€‚ğŸ¨ å®Œç¾è¿˜åŸ</h3>
<p>snapDOM èƒ½å¤Ÿç²¾ç¡®æ•è·ï¼š</p>
<ul>
<li>âœ… æ‰€æœ‰ CSS æ ·å¼ (åŒ…æ‹¬ç»§æ‰¿æ ·å¼)</li>
<li>âœ… ::before å’Œ ::after ä¼ªå…ƒç´ </li>
<li>âœ… Shadow DOM å’Œ Web Components</li>
<li>âœ… å†…åµŒå­—ä½“å’ŒèƒŒæ™¯å›¾ç‰‡</li>
<li>âœ… Font Awesomeã€Material Icons ç­‰å›¾æ ‡å­—ä½“</li>
<li>âœ… CSS åŠ¨ç”»çš„å½“å‰å¸§çŠ¶æ€</li>
</ul>
<h3 data-id="heading-4">3ã€‚ğŸ¯ çµæ´»è¾“å‡º</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.my-card'</span>);

<span class="hljs-comment">// SVG - çŸ¢é‡å›¾ï¼Œå¯æ— æŸç¼©æ”¾</span>
<span class="hljs-keyword">const</span> svg = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toSvg</span>(element);

<span class="hljs-comment">// PNG - æœ€å¸¸ç”¨çš„æ ¼å¼</span>
<span class="hljs-keyword">const</span> png = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toPng</span>(element);

<span class="hljs-comment">// JPG - é€‚åˆç…§ç‰‡ç±»å†…å®¹</span>
<span class="hljs-keyword">const</span> jpg = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toJpg</span>(element, { <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span> });

<span class="hljs-comment">// WebP - ç°ä»£åŒ–æ ¼å¼ï¼Œä½“ç§¯æ›´å°</span>
<span class="hljs-keyword">const</span> webp = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toWebp</span>(element);

<span class="hljs-comment">// Canvas - éœ€è¦äºŒæ¬¡å¤„ç†æ—¶ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toCanvas</span>(element);
</code></pre>
<h2 data-id="heading-5">ğŸ› ï¸ å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-6">å®‰è£…æ–¹å¼</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># NPM / Yarn</span>
npm i @zumer/snapdom
yarn add @zumer/snapdom

<span class="hljs-comment"># æˆ–ä½¿ç”¨ CDNï¼ˆé›¶é…ç½®ï¼‰</span>
&lt;script src=<span class="hljs-string">"https://unpkg.com/@zumer/snapdom@latest/dist/snapdom.min.js"</span>&gt;&lt;/script&gt;

<span class="hljs-comment"># ES Module</span>
import { snapdom } from <span class="hljs-string">'@zumer/snapdom'</span>;
</code></pre>
<h3 data-id="heading-7">åŸºç¡€ç¤ºä¾‹</h3>
<h4 data-id="heading-8">1ã€‚ä¸€é”®æˆªå›¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-keyword">const</span> card = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.user-card'</span>);
<span class="hljs-keyword">const</span> image = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toPng</span>(card);

<span class="hljs-comment">// æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(image);
</code></pre>
<h4 data-id="heading-9">2ã€‚é«˜çº§é…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºå¯é‡ç”¨çš„æˆªå›¾å®ä¾‹</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.chart-container'</span>);
<span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
    <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// 2å€æ¸…æ™°åº¦</span>
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#fff'</span>, <span class="hljs-comment">// èƒŒæ™¯è‰²</span>
    <span class="hljs-attr">embedFonts</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å†…åµŒå­—ä½“</span>
    <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å‹ç¼©ä¼˜åŒ–</span>
});

<span class="hljs-comment">// å¯¼å‡ºä¸åŒæ ¼å¼</span>
<span class="hljs-keyword">const</span> png = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>();
<span class="hljs-keyword">const</span> jpg = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toJpg</span>({ <span class="hljs-attr">quality</span>: <span class="hljs-number">0.9</span> });

<span class="hljs-comment">// ç›´æ¥è§¦å‘ä¸‹è½½</span>
<span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">download</span>({
    <span class="hljs-attr">format</span>: <span class="hljs-string">'png'</span>,
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'chart-report-2024'</span>
});
</code></pre>
<h2 data-id="heading-10">ğŸ“‹ å®æˆ˜åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">1ã€‚ğŸ† æˆå°±åˆ†äº«å¡ç‰‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¸¸æˆæˆå°±åˆ†äº«</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">shareAchievement</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> card = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.achievement-card'</span>);

    <span class="hljs-comment">// ç”Ÿæˆåˆ†äº«å›¾ç‰‡</span>
    <span class="hljs-keyword">const</span> image = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toPng</span>(card, { <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span> });

    <span class="hljs-comment">// è°ƒç”¨åˆ†äº« API</span>
    navigator.<span class="hljs-title function_">share</span>({
        <span class="hljs-attr">files</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([<span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toBlob</span>(card)], <span class="hljs-string">'achievement.png'</span>)],
        <span class="hljs-attr">title</span>: <span class="hljs-string">'æˆ‘è·å¾—äº†æ–°æˆå°±ï¼'</span>
    });
}
</code></pre>
<h3 data-id="heading-12">2ã€‚ğŸ“Š æ•°æ®æŠ¥è¡¨å¯¼å‡º</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å‡º ECharts å›¾è¡¨åŠå…¶æ•°æ®è¡¨æ ¼</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportReport</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> reportSection = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.report-section'</span>);

    <span class="hljs-comment">// é¢„åŠ è½½èµ„æºä»¥ä¼˜åŒ–æ€§èƒ½</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">preCache</span>(reportSection);

    <span class="hljs-comment">// ç”Ÿæˆé«˜æ¸…æŠ¥è¡¨å›¾ç‰‡</span>
    <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">download</span>(reportSection, {
        <span class="hljs-attr">format</span>: <span class="hljs-string">'png'</span>,
        <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
        <span class="hljs-attr">filename</span>: <span class="hljs-string">`report-<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString().split(<span class="hljs-string">'T'</span>)[<span class="hljs-number">0</span>]}</span>`</span>
    });
}
</code></pre>
<h3 data-id="heading-13">3ã€‚ğŸ¨ åŠ¨æ€æµ·æŠ¥ç”Ÿæˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”µå•†ä¿ƒé”€æµ·æŠ¥</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePoster</span>(<span class="hljs-params">productData</span>) {
    <span class="hljs-comment">// åŠ¨æ€å¡«å……æ•°æ®</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.poster-title'</span>).<span class="hljs-property">textContent</span> = productData.<span class="hljs-property">name</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.poster-price'</span>).<span class="hljs-property">textContent</span> = <span class="hljs-string">`Â¥<span class="hljs-subst">${productData.price}</span>`</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.poster-image'</span>).<span class="hljs-property">src</span> = productData.<span class="hljs-property">image</span>;

    <span class="hljs-comment">// ç­‰å¾…å›¾ç‰‡åŠ è½½</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100</span>));

    <span class="hljs-comment">// ç”Ÿæˆæµ·æŠ¥</span>
    <span class="hljs-keyword">const</span> poster = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.poster-container'</span>);
    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toBlob</span>(poster, { <span class="hljs-attr">scale</span>: <span class="hljs-number">3</span> });

    <span class="hljs-comment">// ä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ–ç›´æ¥åˆ†äº«</span>
    <span class="hljs-keyword">return</span> blob;
}
</code></pre>
<h2 data-id="heading-14">ğŸ”§ é«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-15">1ã€‚ğŸ” æå‡å›¾ç‰‡æ¸…æ™°åº¦</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç§»åŠ¨ç«¯åˆ†äº«å›¾ç‰‡å»ºè®®ä½¿ç”¨ 2-3 å€ç¼©æ”¾</span>
<span class="hljs-keyword">const</span> hdImage = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toPng</span>(element, {
    <span class="hljs-attr">scale</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> * <span class="hljs-number">2</span>
});
</code></pre>
<h3 data-id="heading-16">2ã€‚ğŸ” å¤„ç†æ•æ„Ÿä¿¡æ¯</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- HTML æ ‡è®° --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-info"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-capture</span>=<span class="hljs-string">"placeholder"</span> <span class="hljs-attr">data-placeholder-text</span>=<span class="hljs-string">"ç”¨æˆ·ID"</span>&gt;</span> 13800138000 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-capture</span>=<span class="hljs-string">"exclude"</span>&gt;</span> æ•æ„Ÿä¿¡æ¯ï¼ˆæˆªå›¾æ—¶ä¼šè¢«å¿½ç•¥ï¼‰ <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-17">3ã€‚âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { preCache } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šé¡µé¢åŠ è½½æ—¶é¢„ç¼“å­˜</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">preCache</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, { <span class="hljs-attr">embedFonts</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… èµ„æºé¢„åŠ è½½å®Œæˆ'</span>);
});

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šæŒ‰éœ€é¢„ç¼“å­˜</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">captureWithCache</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-comment">// é¦–æ¬¡æˆªå›¾å‰é¢„ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (!element.<span class="hljs-property">dataset</span>.<span class="hljs-property">cached</span>) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">preCache</span>(element);
        element.<span class="hljs-property">dataset</span>.<span class="hljs-property">cached</span> = <span class="hljs-string">'true'</span>;
    }

    <span class="hljs-keyword">return</span> snapdom.<span class="hljs-title function_">toPng</span>(element);
}
</code></pre>
<h3 data-id="heading-18">4ã€‚ğŸ¯ æ‰¹é‡å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡å¯¼å‡ºå¤šä¸ªå…ƒç´ </span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">batchExport</span>(<span class="hljs-params">selector</span>) {
    <span class="hljs-keyword">const</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(selector);
    <span class="hljs-keyword">const</span> images = [];

    <span class="hljs-comment">// ä½¿ç”¨ Promise.all å¹¶è¡Œå¤„ç†</span>
    <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(elements).<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> (el, index) =&gt; {
        <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> snapdom.<span class="hljs-title function_">toBlob</span>(el);
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">name</span>: <span class="hljs-string">`export-<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>.png`</span>,
            blob
        };
    });

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
}
</code></pre>
<h2 data-id="heading-19">âš ï¸ æ³¨æ„äº‹é¡¹ä¸é™åˆ¶</h2>
<h3 data-id="heading-20">éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</h3>
<ol>
<li>
<p><strong>ğŸŒ è·¨åŸŸèµ„æº</strong>ï¼šå¤–éƒ¨å›¾ç‰‡å¿…é¡»æ”¯æŒ CORSï¼Œå¦åˆ™æ— æ³•æ•è·</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ä»£ç†æˆ–ç¡®ä¿å›¾ç‰‡æœåŠ¡å™¨é…ç½®æ­£ç¡®çš„ CORS å¤´</span>
img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'anonymous'</span>;
</code></pre>
</li>
<li>
<p><strong>ğŸ–¼ï¸ iframe é™åˆ¶</strong>ï¼šæ— æ³•æ•è· iframe å†…éƒ¨å†…å®¹</p>
</li>
<li>
<p><strong>ğŸ Safari å…¼å®¹</strong>ï¼šWebP æ ¼å¼åœ¨ Safari ä¸Šä¼šè‡ªåŠ¨é™çº§ä¸º PNG</p>
</li>
<li>
<p><strong>ğŸ“¦ å¤§å‹é¡µé¢</strong>ï¼šè¶…å¤§é¡µé¢å»ºè®®åˆ†åŒºåŸŸæˆªå›¾ï¼Œé¿å…å†…å­˜æº¢å‡º</p>
</li>
</ol>
<h2 data-id="heading-21">ğŸ†š ä¸å…¶ä»–åº“çš„å¯¹æ¯”</h2>





















































<table><thead><tr><th>ç‰¹æ€§</th><th>snapDOM</th><th>html2canvas</th><th>dom-to-image</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>â­â­â­â­â­</td><td>â­â­</td><td>â­</td></tr><tr><td>å‡†ç¡®åº¦</td><td>â­â­â­â­â­</td><td>â­â­â­</td><td>â­â­â­â­</td></tr><tr><td>æ–‡ä»¶å¤§å°</td><td>æå°</td><td>è¾ƒå¤§</td><td>ä¸­ç­‰</td></tr><tr><td>ä¾èµ–</td><td>æ— </td><td>æ— </td><td>æ— </td></tr><tr><td>SVG æ”¯æŒ</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>Shadow DOM</td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td>ç»´æŠ¤çŠ¶æ€</td><td>æ´»è·ƒ</td><td>æ´»è·ƒ</td><td>åœæ»</td></tr></tbody></table>
<h2 data-id="heading-22">ğŸ’¡ æ€»ç»“</h2>
<p>snapDOM æ˜¯ä¸€ä¸ªçœŸæ­£åšåˆ° <code>ç®€å•</code>ã€<code>å¿«é€Ÿ</code>ã€<code>å‡†ç¡®</code> çš„ç½‘é¡µæˆªå›¾å·¥å…·ã€‚å®ƒçš„å‡ºç°è®©å‰ç«¯æˆªå›¾åŠŸèƒ½çš„å®ç°å˜å¾—å¼‚å¸¸è½»æ¾ï¼š</p>
<ul>
<li>ğŸ¯ <strong>ä¸€è¡Œä»£ç </strong>å³å¯å®ç°æˆªå›¾åŠŸèƒ½</li>
<li>âš¡ <strong>æ€§èƒ½æè‡´</strong>å¿«åˆ°è®©äººéš¾ä»¥ç½®ä¿¡</li>
<li>ğŸ¨ <strong>å®Œç¾è¿˜åŸ</strong>æ‰€è§å³æ‰€å¾—</li>
<li>ğŸ“¦ <strong>é›¶ä¾èµ–</strong>è½»é‡æ— è´Ÿæ‹…</li>
</ul>
<p>æ— è®ºä½ æ˜¯éœ€è¦å®ç°ç¤¾äº¤åˆ†äº«ã€æŠ¥è¡¨å¯¼å‡ºï¼Œè¿˜æ˜¯å†…å®¹ä¿å­˜åŠŸèƒ½ï¼ŒsnapDOM éƒ½æ˜¯ç›®å‰æœ€ä½³çš„é€‰æ‹©ã€‚å®ƒä¸ä»…å…è´¹å¼€æºï¼Œè¿˜æœ‰ç€æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒã€‚</p>
<p><strong>ç«‹å³å°è¯•ï¼š</strong></p>
<ul>
<li>ğŸ“¦ é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzumerlab%2Fsnapdom" target="_blank" title="https://github.com/zumerlab/snapdom" ref="nofollow noopener noreferrer">github.com/zumerlab/snâ€¦</a></li>
<li>ğŸ® åœ¨çº¿æ¼”ç¤ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzumerlab.github.io%2Fsnapdom%2F" target="_blank" title="https://zumerlab.github.io/snapdom/" ref="nofollow noopener noreferrer">zumerlab.github.io/snapdom/</a></li>
<li>ğŸ“š è¯¦ç»†æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzumerlab%2Fsnapdom%23readme" target="_blank" title="https://github.com/zumerlab/snapdom#readme" ref="nofollow noopener noreferrer">github.com/zumerlab/snâ€¦</a></li>
</ul>
<hr>
<p><em>ğŸ’¬ å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šéœ€è¦çš„äººã€‚æŠ€æœ¯çš„ä»·å€¼åœ¨äºåˆ†äº«ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¨åŠ¨å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼</em></p></div></div>
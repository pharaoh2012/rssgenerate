
        <h2>
            <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yzqnet/p/18807556" title="发布于 2025-04-03 12:16">
    <span role="heading" aria-level="2">Lazarus信创之路：启程，自动升级程序</span>
    

</a>

        </h2>
        <div class="postbody">
            <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>　　相信国内做Delphi开发的不在少数，信创大趋势下，很多转Lazarus开发了。最近我也研究了一下，决定也转到这下面来，主要考虑：1、商业化方便，无版权纠纷；2、兼容Delphi语法，上手很快；3、原有的源码还可以再利用。</p>
<p>　　首先，我规划一个云诊所的产品，主要是给诊所使用，利用三层技术，兼顾了C/S的操作便利与B/S的实施方便。第一步要先写一个自动升级程序，软件肯定要不断的迭代，有了新版本就要能自动升级，那么我考虑要实现如下功能：</p>
<p>　　１、升级包有完整的目录结构，因为每次升级不可能就一个文件，多个文件或者报表模板保持软件安装目录的结构，方便覆盖升级；</p>
<p>　　２、能自动解压缩；</p>
<p>　　３、支持HTTPS协议，目前HTTPS为主流，也更安全。</p>
<p>&nbsp;</p>
<p>　　实现效果如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/1692909/202504/1692909-20250403121039474-278029671.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>　　开发中主要遇到几个问题：</p>
<p>　　１、MessageBox提示框中文乱码，搜遍网上的解决方案，有的说要改源码编辑器编码，有的说要用Utf8ToAnsi转一下，其实都不对，主要是这个代码：</p>
<p><img src="https://img2024.cnblogs.com/blog/1692909/202504/1692909-20250403121355856-142066273.png" alt="" loading="lazy"></p>
<p>&nbsp;　　２、解压缩过程中获取解压文件名中文乱码，主要解决代码如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/1692909/202504/1692909-20250403121551440-1816381684.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/1692909/202504/1692909-20250403121521369-644070163.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/1692909/202504/1692909-20250403121459009-1352388648.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

        </div>
        <p class="postfoot">
            posted on 
<span id="post-date" data-last-update-days="0.0022914113506944445" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-03 12:16">2025-04-03 12:16</span>&nbsp;
<a href="https://www.cnblogs.com/yzqnet">yzqnet</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18807556" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18807556);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18807556', targetLink: 'https://www.cnblogs.com/yzqnet/p/18807556', title: 'Lazarus信创之路：启程，自动升级程序' })">举报</a>

        </p>
    
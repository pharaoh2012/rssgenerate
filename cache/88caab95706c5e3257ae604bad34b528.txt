
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/charlee44/p/18871743" title="发布于 2025-05-11 21:57">
    <span role="heading" aria-level="2">详解SLAM中的李群和李代数（中）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        详解介绍了SLAM中的李群和李代数的相关的知识，并对其中的公式进行了详细的推导。
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="1-概述">1 概述</h1>
<p>在上一篇文章<a href="https://charlee44.com/post.html?id=00f985ccb5ed4c51a4259af1b5693a99" target="_blank" rel="noopener nofollow">《详解SLAM中的李群和李代数（上）》</a>中，我们已经通过对李群求导引出了李代数。在这篇文章中，我们就系统总结一下李代数的相关知识。</p>
<h1 id="2-李代数">2 李代数</h1>
<h2 id="21-定义">2.1 定义</h2>
<p>李代数是一个向量空间<span class="math inline">\(\mathfrak{g}\)</span>与一个二元运算的组合。其中的二元运算称为李括号（Lie bracket），记为<span class="math inline">\([\cdot,\cdot]: \mathfrak{g} \times \mathfrak{g} \rightarrow \mathfrak{g}\)</span>。在这个公式中：</p>
<ul>
<li><span class="math inline">\([\cdot,\cdot]\)</span>是一个<strong>二元运算符</strong>，表示两个元素之间的某种“乘法”操作。当然它不是普通的乘法，常见的运算操作是向量叉乘 <span class="math inline">\(\times\)</span> 或矩阵的换位子<span class="math inline">\([A,B] = AB - BA\)</span>。</li>
<li><span class="math inline">\(\mathfrak{g}\)</span> 是李代数的集合（通常是一个向量空间），<span class="math inline">\(\mathfrak{g} \times\mathfrak{g}\)</span> 就是说我们要从这个集合里取两个元素做运算，<span class="math inline">\(\rightarrow \mathfrak{g}\)</span>表示运算的结果仍然属于同一个集合 <span class="math inline">\(\mathfrak{g}\)</span>。也就是说李括号运算把两个李代数中的元素变成另一个李代数中的元素。其实就是<strong>封闭性</strong>的意思。</li>
</ul>
<p>李代数需要满足以下三个公理：</p>
<ol>
<li>
<p><strong>双线性</strong>：对于所有<span class="math inline">\(x, y, z \in \mathfrak{g}\)</span>和所有标量<span class="math inline">\(a, b\)</span>，有：</p>
<p></p><div class="math display">\[[ax + by, z] = a[x, z] + b[y, z],\quad [z, ax + by] = a[z, x] + b[z, y] 
\]</div><p></p></li>
<li>
<p><strong>反对称性</strong>：对于所有<span class="math inline">\(x, y \in \mathfrak{g}\)</span>，有：</p>
<p></p><div class="math display">\[[x, y] = -[y, x]
\]</div><p></p><p>特别地，这意味着<span class="math inline">\([x,x]=0\)</span>。</p>
</li>
<li>
<p><strong>雅可比恒等式</strong>：对于所有<span class="math inline">\(x, y, z \in \mathfrak{g}\)</span>，有：</p>
<p></p><div class="math display">\[[x,[y,z]] + [y,[z,x]] + [z,[x,y]] = 0 
\]</div><p></p></li>
</ol>
<p>如果是第一次接触到李代数这个概念，这三个特性公理并不太好理解，因为缺少实际的使用场景。但是这里还是举一个例子来加深印象。例如，三维向量空间<span class="math inline">\(\mathbb{R}^3\)</span>和其上定义的叉乘<span class="math inline">\(\times\)</span>构成了一个李代数<span class="math inline">\((\mathbb{R}^3, \times)\)</span>，李括号为<span class="math inline">\([\boldsymbol{u}, \boldsymbol{v}] = \boldsymbol{u} \times \boldsymbol{v}\)</span>。它符合李代数的三个公理：</p>
<ol>
<li>
<p><strong>双线性</strong>：假设有向量<span class="math inline">\(\boldsymbol{u} = (1, 0, 0)\)</span>，<span class="math inline">\(\boldsymbol{v} = (0, 1, 0)\)</span>，<span class="math inline">\(\boldsymbol{w} = (0, 0, 1)\)</span>，以及标量<span class="math inline">\(a=2\)</span>，<span class="math inline">\(b=3\)</span>。</p>
<ul>
<li>计算<span class="math inline">\([a\boldsymbol{u} + b\boldsymbol{v}, \boldsymbol{w}]\)</span>：</li>
</ul>
<p></p><div class="math display">\[[(2, 0, 0) + (0, 3, 0), (0, 0, 1)] = [(2, 3, 0), (0, 0, 1)] = (3, -2, 0)
\]</div><p></p><ul>
<li>计算<span class="math inline">\(a[\boldsymbol{u}, \boldsymbol{w}] + b[\boldsymbol{v}, \boldsymbol{w}]\)</span>：</li>
</ul>
<p></p><div class="math display">\[2[(1, 0, 0), (0, 0, 1)] + 3[(0, 1, 0), (0, 0, 1)] = 2(0, 1, 0) + 3(-1, 0, 0) = (3, -2, 0)
\]</div><p></p><p>两式结果相等，符合双线性公理。</p>
</li>
<li>
<p><strong>反对称性</strong>：假设<span class="math inline">\(\boldsymbol{u} = (1, 0, 0)\)</span>和<span class="math inline">\(\boldsymbol{v} = (0, 1, 0)\)</span>。</p>
<ul>
<li>计算<span class="math inline">\([\boldsymbol{u}, \boldsymbol{v}]\)</span>：<p></p><div class="math display">\[(1, 0, 0) \times (0, 1, 0) = (0, 0, 1)
\]</div><p></p></li>
<li>计算 <span class="math inline">\([\boldsymbol{v}, \boldsymbol{u}]\)</span>：<p></p><div class="math display">\[(0, 1, 0) \times (1, 0, 0) = (0, 0, -1)
\]</div><p></p></li>
</ul>
<p>可以看到<span class="math inline">\([\boldsymbol{u}, \boldsymbol{v}] = -( [\boldsymbol{v}, \boldsymbol{u}] )\)</span>，这符合反对称性。</p>
</li>
<li>
<p><strong>雅可比恒等式</strong>：假设<span class="math inline">\(\boldsymbol{u} = (1, 0, 0)\)</span>, <span class="math inline">\(\boldsymbol{v} = (0, 1, 0)\)</span>, <span class="math inline">\(\boldsymbol{w} = (0, 0, 1)\)</span>。</p>
<ul>
<li>计算<span class="math inline">\([\boldsymbol{u}, [\boldsymbol{v}, \boldsymbol{w}]]\)</span>：<p></p><div class="math display">\[[\boldsymbol{u}, (0, 1, 0) \times (0, 0, 1)] = [(1, 0, 0), (1, 0, 0)] = (0, 0, 0)
\]</div><p></p></li>
<li>计算 <span class="math inline">\([\boldsymbol{v}, [\boldsymbol{w}, \boldsymbol{u}]]\)</span>：<p></p><div class="math display">\[[\boldsymbol{v}, (0, 0, 1) \times (1, 0, 0)] = [(0, 1, 0), (0, 1, 0)] = (0, 0, 0)
\]</div><p></p></li>
<li>计算 <span class="math inline">\([\boldsymbol{w}, [\boldsymbol{u}, \boldsymbol{v}]]\)</span>：<p></p><div class="math display">\[[\boldsymbol{w}, (1, 0, 0) \times (0, 1, 0)] = [(0, 0, 1), (0, 0, 1)] = (0, 0, 0)
\]</div><p></p></li>
</ul>
<p>因此，</p>
<p></p><div class="math display">\[[\boldsymbol{u}, [\boldsymbol{v}, \boldsymbol{w}]] + [\boldsymbol{v}, [\boldsymbol{w}, \boldsymbol{u}]] + [\boldsymbol{w}, [\boldsymbol{u}, \boldsymbol{v}]] = (0, 0, 0) + (0, 0, 0) + (0, 0, 0) = (0, 0, 0)
\]</div><p></p><p>这验证了雅可比恒等式成立。</p>
</li>
</ol>
<blockquote>
<p>注意，笔者这里对于李代数的定义与《视觉SLAM十四讲》上的定义略有不同，但是表达的实际的含义是一样的，读者可以自行体会。</p>
</blockquote>
<h2 id="22-李代数">2.2 李代数<span class="math inline">\(\mathfrak{so}(3)\)</span></h2>
<p>在上一篇文章<a href="https://charlee44.com/post.html?id=00f985ccb5ed4c51a4259af1b5693a99" target="_blank" rel="noopener nofollow">《详解SLAM中的李群和李代数（上）》</a>中笔者实现了对特殊正交群<span class="math inline">\(SO(3)\)</span>的求导：</p>
<p></p><div class="math display">\[R(t) = \exp([\boldsymbol{\omega}(t)]_\times t)
\]</div><p></p><p>其中<span class="math inline">\(\exp\)</span>表示矩阵指数运算，<span class="math inline">\(\boldsymbol{\omega}(t)\)</span>是表达旋转矩阵的旋转向量，<span class="math inline">\([\boldsymbol{\omega}(t)]_{\times}\)</span>是其对应的反对称矩阵。去掉用于求导的自变量<span class="math inline">\(t\)</span>，那么可以定义<span class="math inline">\(SO(3)\)</span>对应的李代数是：</p>
<p></p><div class="math display">\[\mathfrak{so}(3) = \left\{ [\boldsymbol{\omega}]_\times \in \mathbb{R}^{3 \times 3} \mid {\omega} \in \mathbb{R}^3 \right\}
\]</div><p></p><p>也就是说，<span class="math inline">\(\mathfrak{so}(3)\)</span>是所有<strong>实<span class="math inline">\(3\times 3\)</span>反对称矩阵</strong>构成的集合，对应的李括号是两个元素之间的换位子（commutator）。</p>
<h2 id="23-的李括号">2.3 <span class="math inline">\(\mathfrak{so}(3)\)</span>的李括号</h2>
<p>这里的李括号也就是换位子运算具体定义是：对于任意<span class="math inline">\(X, Y \in \mathfrak{so}(3)\)</span>，有：</p>
<p></p><div class="math display">\[[X, Y] = XY - YX
\]</div><p></p><p>例如，在<span class="math inline">\(\mathfrak{so}(3)\)</span>中，如果<span class="math inline">\(X = [\boldsymbol{\omega}_1]_\times\)</span>和<span class="math inline">\(Y = [\boldsymbol{\omega}_2]_\times\)</span>，则：</p>
<p></p><div class="math display">\[[[\boldsymbol{\omega}_1]_\times, [\boldsymbol{\omega}_2]_\times] = [\boldsymbol{\omega}_1]_\times [\boldsymbol{\omega}_2]_\times - [\boldsymbol{\omega}_2]_\times [\boldsymbol{\omega}_1]_\times 
\]</div><p></p><p>这个表达式的结果仍然是一个反对称矩阵，并且它对应于向量<span class="math inline">\(\boldsymbol{\omega}_1 \times \boldsymbol{\omega}_2\)</span>的反对称矩阵，即：</p>
<p></p><div class="math display">\[[[\boldsymbol{\omega}_1]_\times, [\boldsymbol{\omega}_2]_\times] = [\boldsymbol{\omega}_1 \times \boldsymbol{\omega}_2]_\times
\]</div><p></p><p>这意味着在<span class="math inline">\(\mathfrak{so}(3)\)</span>中，李括号运算等价于三维向量空间中的叉积运算，<span class="math inline">\(\mathfrak{so}(3)\)</span>与上一小节中介绍的李代数<span class="math inline">\((\mathbb{R}^3, \times)\)</span>的含义基本相同。</p>
<p>举例验证一下，假设有两个向量<span class="math inline">\(\boldsymbol{\omega}_1 = (1, 0, 0)^T\)</span>和<span class="math inline">\(\boldsymbol{\omega}_2 = (0, 1, 0)^T\)</span>，它们对应的反对称矩阵分别是：</p>
<p></p><div class="math display">\[[\boldsymbol{\omega}_1]_\times = \begin{bmatrix}
0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; -1 \\
0 &amp; 1 &amp; 0
\end{bmatrix}, \quad [\boldsymbol{\omega}_2]_\times = \begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix} \]</div><p></p><p>计算它们的李括号：</p>
<p></p><div class="math display">\[[[\boldsymbol{\omega}_1]_\times, [\boldsymbol{\omega}_2]_\times] = \begin{bmatrix}
0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; -1 \\
0 &amp; 1 &amp; 0
\end{bmatrix} \begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix} - \begin{bmatrix}
0 &amp; 0 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
-1 &amp; 0 &amp; 0
\end{bmatrix} \begin{bmatrix}
0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; -1 \\
0 &amp; 1 &amp; 0
\end{bmatrix}\]</div><p></p><p></p><div class="math display">\[= \begin{bmatrix}
0 &amp; 0 &amp; 0 \\
1 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; -1
\end{bmatrix} - \begin{bmatrix}
0 &amp; 0 &amp; -1 \\
0 &amp; 0 &amp; 0 \\
1 &amp; 0 &amp; 0
\end{bmatrix} = \begin{bmatrix}
0 &amp; 0 &amp; 1 \\
-1 &amp; 0 &amp; 0 \\
0 &amp; -1 &amp; 0
\end{bmatrix}\]</div><p></p><p>这正是<span class="math inline">\([0, 0, 1]^T\)</span>向量对应的反对称矩阵，也就是<span class="math inline">\(\boldsymbol{\omega}_1 \times \boldsymbol{\omega}_2 = (0, 0, 1)^T\)</span>。</p>
<h2 id="24-李代数">2.4 李代数<span class="math inline">\(\mathfrak{se}(3)\)</span></h2>
<p>与引出特殊正交群<span class="math inline">\(SO(3)\)</span>的李代数<span class="math inline">\(\mathfrak{so}(3)\)</span>的推导一样，也可以对特殊欧式群 <span class="math inline">\(SE(3)\)</span>对时间<span class="math inline">\(t\)</span>微分来引出对应的李代数<span class="math inline">\(\mathfrak{se}(3)\)</span>。假设一个刚体在三维空间随时间做<strong>欧式运动</strong>（即<strong>刚体运动</strong>，同时包括<strong>旋转和平移</strong>），那么欧式变换矩阵可以表示为：</p>
<p></p><div class="math display">\[T(t) = 
\begin{bmatrix}
R(t) &amp; \boldsymbol{p}(t) \\
\mathbf{0}^T &amp; 1
\end{bmatrix}
\in SE(3)
\]</div><p></p><p>其中：</p>
<ul>
<li><span class="math inline">\(R(t) \in SO(3)\)</span> 表示旋转；</li>
<li><span class="math inline">\(\boldsymbol{p}(t) \in \mathbb{R}^3\)</span> 表示平移；</li>
<li>整个矩阵是一个<span class="math inline">\(4 \times 4\)</span>的齐次变换矩阵。</li>
</ul>
<p>对<span class="math inline">\(T(t)\)</span>的自变量时间<span class="math inline">\(t\)</span>进行微分，即：</p>
<p></p><div class="math display">\[\frac{d}{dt} T(t) = \frac{d}{dt}
\begin{bmatrix}
R(t) &amp; \boldsymbol{p}(t) \\
\mathbf{0}^T &amp; 1
\end{bmatrix}=
\begin{bmatrix}
\frac{d}{dt} R(t) &amp; \frac{d}{dt} \boldsymbol{p}(t) \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>其中<span class="math inline">\(\frac{d}{dt} R(t) = [\boldsymbol{\omega}(t)]_\times R(t)\)</span>，这一点我们在前面引出李代数<span class="math inline">\(\mathfrak{so}(3)\)</span>的时候推导过。<span class="math inline">\(\boldsymbol{p}(t)\)</span>表示位移，那么<span class="math inline">\(\boldsymbol{p}(t)\)</span>对时间<span class="math inline">\(t\)</span>求导，即<span class="math inline">\(\frac{d}{dt} \boldsymbol{p}(t) = \boldsymbol{v}(t)\)</span>是瞬时线速度。</p>
<p>因此：</p>
<p></p><div class="math display">\[\frac{d}{dt} T(t) = 
\begin{bmatrix}
[\boldsymbol{\omega}(t)]_\times R(t) &amp; \boldsymbol{v}(t) \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\tag{1}
\]</div><p></p><p>需要进一步说明的是，<span class="math inline">\(\boldsymbol{v}(t)\)</span> 是<strong>空间坐标系下的线速度</strong>。我们知道速度是一种矢量，而欧式变换包含旋转和平移两种变换，那么空间坐标系下线速度<span class="math inline">\(\boldsymbol{v}(t)\)</span>可以分解成：</p>
<ol>
<li><strong>由于旋转引起的“附加速度”</strong>：即使没有自身的平移，只要它在旋转，它上面的点也会因为旋转而产生一个速度。</li>
<li><strong>由于自身平移产生的速度</strong>：这是物体本身在自己坐标系下的移动速度。</li>
</ol>
<p>数学表达如下：</p>
<p></p><div class="math display">\[\boldsymbol{v}(t) = [\boldsymbol{\omega}(t)]_\times \boldsymbol{p}(t) + \boldsymbol{v}_{\text{body}}(t) \tag{2}
\]</div><p></p><p>这个公式其实就是刚体运动学中的速度合成公式：</p>
<ul>
<li><span class="math inline">\(\boldsymbol{v}_{\text{body}}\)</span>就是刚体自身平移产生的速度，即<strong>体坐标系</strong>下的线速度；</li>
<li><span class="math inline">\(\boldsymbol{\omega}(t)\)</span>是刚体的角速度，通常也在<strong>体坐标系</strong>下表示；</li>
<li><span class="math inline">\(\boldsymbol{p}(t)\)</span>表示相对于刚体原点的位置向量。</li>
<li><span class="math inline">\([\boldsymbol{\omega}(t)]_\times \boldsymbol{p}(t)\)</span>就是由于旋转引起的附加速度，其是一种典型的圆周运动的速度：<span class="math inline">\(\boldsymbol{\omega}(t)\)</span>方向垂直于圆周面，<span class="math inline">\(\boldsymbol{p}(t)\)</span>定义了到旋转中心的距离半径，两者叉乘，即得因刚体旋转而具有的切向速度。</li>
</ul>
<p>将式(2)代入式(1)，有：</p>
<p></p><div class="math display">\[\begin{align*}
\frac{d}{dt} T(t) 
&amp;= \begin{bmatrix}
[\boldsymbol{\omega}(t)]_\times R(t) &amp; [\boldsymbol{\omega}(t)]_\times \boldsymbol{p}(t) + \boldsymbol{v}_{\text{body}}(t) \\
\mathbf{0}^T &amp; 0
\end{bmatrix} \\
&amp;= \begin{bmatrix}
[\boldsymbol{\omega}(t)]_\times &amp; \boldsymbol{v}_{\text{body}}(t) \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\begin{bmatrix}
R(t) &amp; \boldsymbol{p}(t) \\
\mathbf{0}^T &amp; 1
\end{bmatrix}
\\
\end{align*}
\]</div><p></p><p>如果令：</p>
<p></p><div class="math display">\[\xi(t) =
\begin{bmatrix}
[\boldsymbol{\omega}(t)]_\times &amp; \boldsymbol{v}_{\text{body}}(t) \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>那么有：</p>
<p></p><div class="math display">\[\frac{d}{dt} T(t) = \xi(t) T(t)
\]</div><p></p><p>显然，在初始时刻欧式变换矩阵为单位矩阵，即<span class="math inline">\(T(0) = I_4\)</span>，那么有微分方程：</p>
<p></p><div class="math display">\[\frac{d}{dt} T(t) = \xi(t) T(t), \quad T(0) = I_4
\]</div><p></p><p>这就又回到了上一篇文章<a href="https://charlee44.com/post.html?id=00f985ccb5ed4c51a4259af1b5693a99" target="_blank" rel="noopener nofollow">《详解SLAM中的李群和李代数（上）》</a>中介绍的一阶线性微分方程，其解为：</p>
<p></p><div class="math display">\[T(t) = \exp(\xi(t) t)
\]</div><p></p><p>这就是从李代数<span class="math inline">\(\mathfrak{se}(3)\)</span>到李群<span class="math inline">\(SE(3)\)</span>的<strong>指数映射</strong>，矩阵<span class="math inline">\(\xi(t)\)</span>就是<span class="math inline">\(SE(3)\)</span>的李代数中集合的元素。</p>
<p>进一步的，去掉自变量<span class="math inline">\(t\)</span>，将<span class="math inline">\(\boldsymbol{v}_{\text{body}}\)</span>重命名为<span class="math inline">\(\boldsymbol{v}\)</span>，李代数 <span class="math inline">\(\mathfrak{se}(3)\)</span> 是所有形如：</p>
<p></p><div class="math display">\[\xi = 
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\in \mathbb{R}^{4 \times 4}
\]</div><p></p><p>的矩阵构成的集合，其中 <span class="math inline">\(\boldsymbol{\omega}, \boldsymbol{v} \in \mathbb{R}^3\)</span>。</p>
<p>将其简记为：</p>
<p></p><div class="math display">\[\mathfrak{se}(3) = \left\{
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\,\middle|\, \boldsymbol{\omega}, \boldsymbol{v} \in \mathbb{R}^3 \right\}
\]</div><p></p><p>如果，<span class="math inline">\(\mathfrak{se}(3)\)</span>也可以用一个六维向量来表示：</p>
<p></p><div class="math display">\[\boldsymbol{\eta} = 
\begin{bmatrix}
\boldsymbol{\omega} \\
\boldsymbol{v}
\end{bmatrix}
\in \mathbb{R}^6
\]</div><p></p><p>并定义对应的映射：</p>
<p></p><div class="math display">\[\hat{\boldsymbol{\eta}} =
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>所以<span class="math inline">\(\mathfrak{se}(3)\)</span>也可以表示为：</p>
<p></p><div class="math display">\[\mathfrak{se}(3) = \left\{ \hat{\boldsymbol{\eta}} \,\middle|\, \boldsymbol{\eta} \in \mathbb{R}^6 \right\}
\]</div><p></p><h2 id="25-的李括号">2.5 <span class="math inline">\(\mathfrak{se}(3)\)</span>的李括号</h2>
<p><span class="math inline">\(\mathfrak{se}(3)\)</span> 中的李括号仍然是矩阵换位子。对于任意两个 <span class="math inline">\(\xi_1, \xi_2 \in \mathfrak{se}(3)\)</span>，有：</p>
<p></p><div class="math display">\[[\xi_1, \xi_2] = \xi_1 \xi_2 - \xi_2 \xi_1
\]</div><p></p><p>如果写成向量形式 <span class="math inline">\(\boldsymbol{\eta}_1 = (\boldsymbol{\omega}_1, \boldsymbol{v}_1)^T\)</span>, <span class="math inline">\(\boldsymbol{\eta}_2 = (\boldsymbol{\omega}_2, \boldsymbol{v}_2)^T\)</span>，则可以推出：</p>
<p></p><div class="math display">\[[\boldsymbol{\eta}_1, \boldsymbol{\eta}_2] =
\begin{bmatrix}
\boldsymbol{\omega}_1 \times \boldsymbol{\omega}_2 \\
\boldsymbol{\omega}_1 \times \boldsymbol{v}_2 - \boldsymbol{\omega}_2 \times \boldsymbol{v}_1
\end{bmatrix}
\]</div><p></p><p>这是通过<strong>直接计算矩阵乘积</strong>和<strong>利用叉积与反对称矩阵的关系</strong>推导出来的，估计也不是很常用，因此略掉推导过程。</p>
<h1 id="3-指数映射">3 指数映射</h1>
<h2 id="31-预备知识">3.1 预备知识</h2>
<h3 id="311-泰勒公式">3.1.1 泰勒公式</h3>
<p>设一个函数 <span class="math inline">\(f(x)\)</span> 在点 <span class="math inline">\(x = a\)</span> 处无穷可导，那么它可以展开为如下形式的<strong>泰勒级数</strong>：</p>
<p></p><div class="math display">\[f(x) = \sum_{n=0}^\infty \frac{f^{(n)}(a)}{n!}(x - a)^n
\]</div><p></p><p>这个式子的意思是：用无穷多个多项式项来逼近原函数 <span class="math inline">\(f(x)\)</span>。</p>
<p>如果取 <span class="math inline">\(a = 0\)</span>，则称为<strong>麦克劳林级数（Maclaurin series）</strong>：</p>
<p></p><div class="math display">\[f(x) = \sum_{n=0}^\infty \frac{f^{(n)}(0)}{n!}x^n
\]</div><p></p><p>根据这个定义，有：</p>
<p></p><div class="math display">\[e^x = \sum_{n=0}^\infty \frac{1}{n!}x^n = 1 + x + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots \\
\sin(x) = x - \frac{x^3}{3!} + \frac{x^5}{5!} - \frac{x^7}{7!} + \cdots = \sum_{n=0}^\infty (-1)^n \frac{x^{2n+1}}{(2n+1)!}\\
\cos(x) = 1 - \frac{x^2}{2!} + \frac{x^4}{4!} - \frac{x^6}{6!} + \cdots = \sum_{n=0}^\infty (-1)^n \frac{x^{2n}}{(2n)!}
\]</div><p></p><h3 id="312-反对称矩阵的幂次规律">3.1.2 反对称矩阵的幂次规律</h3>
<p>给定一个<strong>单位</strong>三维向量 <span class="math inline">\(\boldsymbol{\omega} = (\omega_1, \omega_2, \omega_3)^T\)</span>，其对应的反对称矩阵 <span class="math inline">\([\boldsymbol{\omega}]_\times\)</span> 为：</p>
<p></p><div class="math display">\[[\boldsymbol{\omega}]_\times = 
\begin{bmatrix}
0 &amp; -\omega_3 &amp; \omega_2 \\
\omega_3 &amp; 0 &amp; -\omega_1 \\
-\omega_2 &amp; \omega_1 &amp; 0
\end{bmatrix}
\]</div><p></p><p>假设 <span class="math inline">\(A = [\boldsymbol{\omega}]_\times\)</span>，我们首先计算 <span class="math inline">\(A^2\)</span>：</p>
<p></p><div class="math display">\[A^2 = [\boldsymbol{\omega}]_\times^2 = 
\begin{bmatrix}
0 &amp; -\omega_3 &amp; \omega_2 \\
\omega_3 &amp; 0 &amp; -\omega_1 \\
-\omega_2 &amp; \omega_1 &amp; 0
\end{bmatrix}
\begin{bmatrix}
0 &amp; -\omega_3 &amp; \omega_2 \\
\omega_3 &amp; 0 &amp; -\omega_1 \\
-\omega_2 &amp; \omega_1 &amp; 0
\end{bmatrix}
\]</div><p></p><p>进行矩阵乘法运算后得到：</p>
<p></p><div class="math display">\[A^2 = 
\begin{bmatrix}
-\omega_2^2 - \omega_3^2 &amp; \omega_1 \omega_2 &amp; \omega_1 \omega_3 \\
\omega_1 \omega_2 &amp; -\omega_1^2 - \omega_3^2 &amp; \omega_2 \omega_3 \\
\omega_1 \omega_3 &amp; \omega_2 \omega_3 &amp; -\omega_1^2 - \omega_2^2
\end{bmatrix}
\]</div><p></p><p>因为这里<span class="math inline">\(\boldsymbol{\omega}\)</span> 是<strong>单位向量</strong>（即 <span class="math inline">\(\omega_1^2 + \omega_2^2 + \omega_3^2 = 1\)</span>），则：</p>
<p></p><div class="math display">\[A^2 = 
\begin{bmatrix}
-(1 - \omega_1^2) &amp; \omega_1 \omega_2 &amp; \omega_1 \omega_3 \\
\omega_1 \omega_2 &amp; -(1 - \omega_2^2) &amp; \omega_2 \omega_3 \\
\omega_1 \omega_3 &amp; \omega_2 \omega_3 &amp; -(1 - \omega_3^2)
\end{bmatrix}
\]</div><p></p><p>进一步简化为：</p>
<p></p><div class="math display">\[A^2 = 
\begin{bmatrix}
-\omega_1^2 &amp; \omega_1 \omega_2 &amp; \omega_1 \omega_3 \\
\omega_1 \omega_2 &amp; -\omega_2^2 &amp; \omega_2 \omega_3 \\
\omega_1 \omega_3 &amp; \omega_2 \omega_3 &amp; -\omega_3^2
\end{bmatrix}
= \boldsymbol{\omega} \boldsymbol{\omega}^T - \mathbf{I}
\]</div><p></p><p>这里 <span class="math inline">\(\mathbf{I}\)</span> 是单位矩阵，<span class="math inline">\(\boldsymbol{\omega} \boldsymbol{\omega}^T\)</span> 是外积矩阵。</p>
<p>接下来计算 <span class="math inline">\(A^3\)</span>：</p>
<p></p><div class="math display">\[A^3 = A \cdot A^2 = [\boldsymbol{\omega}]_\times \cdot (\boldsymbol{\omega} \boldsymbol{\omega}^T - \mathbf{I})
\]</div><p></p><p>注意到 <span class="math inline">\([\boldsymbol{\omega}]_\times \boldsymbol{\omega} = \mathbf{0}\)</span> （因为反对称矩阵作用于自身方向的向量结果为零向量），因此：</p>
<p></p><div class="math display">\[A^3 = -[\boldsymbol{\omega}]_\times + [\boldsymbol{\omega}]_\times (\boldsymbol{\omega} \boldsymbol{\omega}^T) = -[\boldsymbol{\omega}]_\times = -A
\]</div><p></p><p>所以：</p>
<p></p><div class="math display">\[A^3 = -A
\]</div><p></p><p>再来看计算<span class="math inline">\(A^4\)</span>：</p>
<p></p><div class="math display">\[A^4 = A \cdot A^3 = A \cdot (-A) = -A^2
\]</div><p></p><p>根据前面的结果 <span class="math inline">\(A^2 = \boldsymbol{\omega} \boldsymbol{\omega}^T - \mathbf{I}\)</span>，于是：</p>
<p></p><div class="math display">\[A^4 = -(\boldsymbol{\omega} \boldsymbol{\omega}^T - \mathbf{I}) = -A^2
\]</div><p></p><p>因此：</p>
<p></p><div class="math display">\[A^4 = -A^2
\]</div><p></p><p>最后计算 <span class="math inline">\(A^5\)</span>：</p>
<p></p><div class="math display">\[A^5 = A \cdot A^4 = A \cdot (-A^2) = -A^3 = -(-A) = A
\]</div><p></p><p>所以：</p>
<p></p><div class="math display">\[A^5 = A
\]</div><p></p><p>通过上述推导，我们可以总结出反对称矩阵 <span class="math inline">\(A = [\boldsymbol{\omega}]_\times\)</span> 的一些重要幂次规律：</p>
<ul>
<li><strong><span class="math inline">\(A = [\boldsymbol{\omega}]_\times\)</span></strong></li>
<li><strong><span class="math inline">\(A^2 = \boldsymbol{\omega} \boldsymbol{\omega}^T-\mathbf{I}\)</span></strong></li>
<li><strong><span class="math inline">\(A^3 = -A\)</span></strong></li>
<li><strong><span class="math inline">\(A^4 = -A^2\)</span></strong></li>
<li><strong><span class="math inline">\(A^5 = A\)</span></strong></li>
<li><strong><span class="math inline">\(A^6 = A^2\)</span></strong></li>
<li><strong><span class="math inline">\(A^7 = -A\)</span></strong></li>
<li><strong><span class="math inline">\(A^8 = -A^2\)</span></strong></li>
</ul>
<p>这些规律表明，对于反对称矩阵 <span class="math inline">\(A = [\boldsymbol{\omega}]_\times\)</span>，其高次幂具有周期性，并且可以归约为 <span class="math inline">\(A\)</span>、<span class="math inline">\(A^2\)</span> 和 <span class="math inline">\(-A\)</span> 的线性组合。</p>
<h3 id="313-chasles定理">3.1.3 Chasles定理</h3>
<p>从<span class="math inline">\(SO(3)\)</span>李代数的推导可以知道，任何旋转变换可以等效为绕某个固定轴的旋转来表示，那么欧式变换（刚体变换）是不是也有类似的性质呢？确实如此，刚体运动学的Chasles定理指出：</p>
<blockquote>
<p><strong>任何一个刚体的位移都可以视为绕某条直线（称为螺旋轴或瞬时转动轴）的旋转加上沿这条直线的平移。</strong></p>
</blockquote>
<p>换句话说，任何刚体的位移可以分解为绕一个特定方向的旋转加上沿着这个方向的平移。这种组合运动被称为<strong>螺旋运动</strong>，这条特定方向确定的直线就是<strong>螺旋轴</strong>。在刚体运动过程中，这条直线是保持不变的。</p>
<p>根据前面<span class="math inline">\(SE(3)\)</span>李代数推导可知，欧式变换可以表示为：</p>
<p></p><div class="math display">\[T = \exp(\xi)
\]</div><p></p><p>如同旋转变换的旋转向量可以分解成单位轴向量和旋转角度一样，<strong>螺旋运动</strong>也可以由以下两个量来确定：</p>
<ol>
<li><strong>单位螺旋轴 <span class="math inline">\(\hat{s}\)</span></strong>：描述运动的方向（包括旋转轴和平移方向）。</li>
<li><strong>标量 <span class="math inline">\(\theta\)</span></strong>：描述沿这个螺旋轴运动了多远。</li>
</ol>
<p>即：</p>
<p></p><div class="math display">\[\xi = \hat{s} \theta
\]</div><p></p><p>于是整个运动就可以写成：</p>
<p></p><div class="math display">\[T = \exp(\hat{s} \theta)
\]</div><p></p><p>又因为：</p>
<p></p><div class="math display">\[\xi = 
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\in \mathbb{R}^{4 \times 4}
\]</div><p></p><p>对这个矩阵提取<span class="math inline">\(\theta\)</span>，很显然：</p>
<ul>
<li><span class="math inline">\([\boldsymbol{\omega}]_\times = \theta \cdot [\boldsymbol{\omega}_{\text{unit}}]_\times\)</span></li>
<li><span class="math inline">\(\mathbf{0}^T = \theta \cdot \mathbf{0}^T\)</span></li>
<li><span class="math inline">\(0 = \theta \cdot 0\)</span></li>
</ul>
<p>那么必然存在单位螺旋轴 <span class="math inline">\(\hat{s}\)</span> 的矩阵：</p>
<p></p><div class="math display">\[\hat{s} =
\begin{bmatrix}
[\boldsymbol{\omega}_{\text{unit}}]_\times &amp; \boldsymbol{v}_{\text{unit}} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>能满足<span class="math inline">\(\boldsymbol{v} = \theta \cdot \boldsymbol{v}_{\text{unit}}\)</span>。这里的<span class="math inline">\(\boldsymbol{\omega}_{\text{unit}}\)</span> 是单位旋转轴，<span class="math inline">\(\boldsymbol{v}_{\text{unit}}\)</span> 是单位平移速度向量。</p>
<p>可能在这里有的读者会觉得有点难以理解，平移和旋转是两个独立的运动，为什么会共享同一个参数<span class="math inline">\(\theta\)</span>？其实这里把螺旋运动理解成向一个木板拧螺丝就行了，拧螺丝拧的角度越大，打进木板的距离就越远。这里的<span class="math inline">\(\theta\)</span>是一个统一的“运动参数”，它决定了旋转了多少、平移了多少，就像是“沿某个固定运动方向走多远”的度量。</p>
<p>数学上的表达总结如下：</p>
<p></p><div class="math display">\[{\xi} = \theta \cdot \hat{s}
= \theta \cdot
\begin{bmatrix}
[\boldsymbol{\omega}_{\text{unit}}]_\times &amp; \boldsymbol{v}_{\text{unit}} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}=
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><h2 id="32-上的指数映射">3.2 <span class="math inline">\(SO(3)\)</span>上的指数映射</h2>
<p>根据前面的推导，已知旋转矩阵 <span class="math inline">\(R \in SO(3)\)</span> 可以通过李代数 <span class="math inline">\(\mathfrak{so}(3)\)</span> 的指数映射来表示：</p>
<p></p><div class="math display">\[R = \exp([\boldsymbol{\omega}]_\times)
\]</div><p></p><p>这里的<span class="math inline">\(\boldsymbol{\omega}\)</span>就是旋转向量，我们知道向量都等于自身的单位向量与模长的乘积，那么可以令<span class="math inline">\(a\)</span>为<span class="math inline">\(\boldsymbol{\omega}\)</span>的单位向量，<span class="math inline">\(\theta\)</span> 为 <span class="math inline">\(\boldsymbol{\omega}\)</span>的模长。也即是：</p>
<p></p><div class="math display">\[\boldsymbol{\omega} = {\theta}a 
\]</div><p></p><p>取反对称矩阵，有：</p>
<p></p><div class="math display">\[[\boldsymbol{\omega}]_\times = [{\theta}a]_\times = {\theta}[a]_\times
\]</div><p></p><p>令<span class="math inline">\(A = [a]_\times\)</span>，根据预备知识介绍的泰勒公式，将标量指数函数推广到矩阵指数函数上，有：</p>
<p></p><div class="math display">\[R = \exp({\theta}A) = \sum_{n=0}^\infty \frac{({\theta}A)^n}{n!}
\]</div><p></p><p>将 <span class="math inline">\(\exp(\theta A)\)</span> 展开为泰勒级数：</p>
<p></p><div class="math display">\[\exp(\theta A) = I + \theta A + \frac{\theta^2}{2!} A^2 + \frac{\theta^3}{3!} A^3 + \frac{\theta^4}{4!} A^4 + \cdots
\]</div><p></p><p>利用预备知识中提到的反对称矩阵的（如 <span class="math inline">\(A^3 = -A\)</span>, <span class="math inline">\(A^4 = -A^2\)</span> 等），我们可以把所有项都写成 <span class="math inline">\(I, A, A^2\)</span> 的线性组合：</p>
<p></p><div class="math display">\[\begin{aligned}
\exp(\theta A) &amp;= I + \theta A + \frac{\theta^2}{2!} A^2 
-\frac{\theta^3}{3!} A 
-\frac{\theta^4}{4!} A^2 
+\frac{\theta^5}{5!} A 
+\cdots \\
&amp;= I + \left(\theta - \frac{\theta^3}{3!} + \frac{\theta^5}{5!} - \cdots\right) A \\
&amp;\quad + \left(\frac{\theta^2}{2!} - \frac{\theta^4}{4!} + \cdots\right) A^2
\end{aligned}
\]</div><p></p><p>再利用预备知识中的正弦和余弦的泰勒公式展开：</p>
<ul>
<li><span class="math inline">\(\sin\theta = \theta - \frac{\theta^3}{3!} + \frac{\theta^5}{5!} - \cdots\)</span></li>
<li><span class="math inline">\(1 - \cos\theta = \frac{\theta^2}{2!} - \frac{\theta^4}{4!} + \cdots\)</span></li>
</ul>
<p>所以：</p>
<p></p><div class="math display">\[\exp(\theta A) = I + \sin\theta \cdot A + (1 - \cos\theta) \cdot A^2
\]</div><p></p><p>也可以表达为：</p>
<p></p><div class="math display">\[\exp(\theta [a]_\times) = \cos\theta I + (1 - \cos\theta) a{a}^T +\sin\theta [a]_\times
\]</div><p></p><p>其中，<span class="math inline">\(a\)</span>为<span class="math inline">\(\mathfrak{so}(3)\)</span>集合中元素<span class="math inline">\(\boldsymbol{\omega}\)</span>的单位向量，<span class="math inline">\(A\)</span>为<span class="math inline">\(a\)</span>的反对称矩阵，<span class="math inline">\(\theta\)</span> 为<span class="math inline">\(\boldsymbol{\omega}\)</span>的模长。其实这里的<span class="math inline">\(\boldsymbol{\omega}\)</span>就是旋转矩阵的<strong>旋转向量</strong>，这个公式也就是著名的罗德里格公式。</p>
<p>通过以上推导表明，<span class="math inline">\(\mathfrak{so}(3)\)</span>其实就是<strong>旋转向量</strong>组成的向量空间，指数映射就是罗德里格公式。通过罗德里格公式，任意一个向量都可以对应到<span class="math inline">\(SO(3)\)</span>中的旋转矩阵。反之，将<span class="math inline">\(SO(3)\)</span>对应到<span class="math inline">\(\mathfrak{so}(3)\)</span>就是对数映射，当然这里就是不用列出对数表达式，在《视觉SLAM十四讲》的第3讲中介绍了更简便的计算方法：</p>
<p></p><div class="math display">\[\theta = \arccos\left( \frac{\operatorname{tr}(R) - 1}{2} \right),Ra = a
\]</div><p></p><p>在书上没有给出<span class="math inline">\(Ra = a\)</span>的具体解的过程，因为可能有多个解的情况，表述起来比较麻烦，大概的求解过程是：</p>
<table>
<thead>
<tr>
<th>步骤</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.</td>
<td>计算旋转角度：<span class="math inline">\(\theta = \arccos\left( \frac{\operatorname{tr}(R) - 1}{2} \right)\)</span></td>
</tr>
<tr>
<td>2.</td>
<td>若 <span class="math inline">\(\theta = 0\)</span>：返回 <span class="math inline">\(\boldsymbol{\omega} = \mathbf{0}\)</span> 或任意方向</td>
</tr>
<tr>
<td>3.</td>
<td>若 <span class="math inline">\(\theta = \pi\)</span>：构造 <span class="math inline">\(\boldsymbol{\omega} \boldsymbol{\omega}^T = \frac{1}{2}(R + I)\)</span>，取最大特征值对应的单位特征向量</td>
</tr>
<tr>
<td>4.</td>
<td>否则：计算反对称部分 <span class="math inline">\(S = \frac{1}{2}(R - R^T)\)</span>，提取 <span class="math inline">\(\boldsymbol{\omega} = \frac{1}{2\sin\theta} \begin{bmatrix} S_{32} \\ S_{13} \\ S_{21} \end{bmatrix}\)</span>，然后归一化</td>
</tr>
</tbody>
</table>
<p>其实从求解对数映射的解就可以看出，指数映射是一个满射，而不是单射。也就是任意<span class="math inline">\(SO(3)\)</span>集合中的元素，都能在<span class="math inline">\(\mathfrak{so}(3)\)</span>中找到一个元素与之对应；但是可能存在多个<span class="math inline">\(\mathfrak{so}(3)\)</span>中的元素对应于一个<span class="math inline">\(SO(3)\)</span>集合中的元素。其实这个不难理解，旋转是有周期性的，旋转360度和不转是一样的，只有范围限定在<span class="math inline">\((-\pi, +\pi]\)</span>之间，两者才可以一一对应。</p>
<h2 id="33-上的指数映射">3.3 <span class="math inline">\(SE(3)\)</span>上的指数映射</h2>
<p>根据前面的推导，特殊欧式群<span class="math inline">\(SE(3)\)</span>的李代数<span class="math inline">\(\mathfrak{se}(3)\)</span>，可以用一个4维矩阵表示，包含旋转和平移信息：</p>
<p></p><div class="math display">\[\xi = 
\begin{bmatrix}
[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\in \mathbb{R}^{4 \times 4}
\]</div><p></p><p>其中 <span class="math inline">\(\boldsymbol{\omega}\)</span> 就是特殊正交群<span class="math inline">\(SO(3)\)</span>的李代数的向量表示，<span class="math inline">\(\boldsymbol{v}\)</span> 表示平移速度。</p>
<p>根据准备知识中介绍的Chasles定理，有：</p>
<p></p><div class="math display">\[T = \exp(\xi) = \exp(\hat{s} \theta)
\]</div><p></p><p>其中<span class="math inline">\(\hat{s}\)</span>是单位螺旋轴矩阵：</p>
<p></p><div class="math display">\[\hat{s} =
\begin{bmatrix}
[\boldsymbol{\omega}_{\text{unit}}]_\times &amp; \boldsymbol{v}_{\text{unit}} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p><span class="math inline">\(\theta\)</span>则描述沿这个螺旋轴运动了多远。使用泰勒公式展开指数函数，有：</p>
<p></p><div class="math display">\[\exp({\xi}) = \sum_{n=0}^\infty \frac{(\hat{s}\theta)^n}{n!} = I + \hat{s} \theta + \frac{(\hat{s} \theta)^2}{2!} + \frac{(\hat{s} \theta)^3}{3!} + \cdots
\]</div><p></p><p>因此关键在于计算每一项<span class="math inline">\((\hat{s}\theta)^n\)</span>。对于第0项：</p>
<p></p><div class="math display">\[I = 
\begin{bmatrix}
I &amp; \mathbf{0} \\
\mathbf{0}^T &amp; 1
\end{bmatrix}
\]</div><p></p><p>对于第1项，前面求<span class="math inline">\(SO(3)\)</span>的时候已经定义<span class="math inline">\(A = [\boldsymbol{\omega}_{\text{unit}}]_\times\)</span>，则：</p>
<p></p><div class="math display">\[\hat{s}\theta =
\begin{bmatrix}
\theta A &amp; \theta \boldsymbol{v}_{\text{unit}} \\
\mathbf{0}^T &amp; 0
\end{bmatrix} = 
\begin{bmatrix}
\theta A &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>对于第2项：</p>
<p></p><div class="math display">\[\frac{(\hat{s} \theta)^2}{2!} = \frac{1}{2!}
\begin{bmatrix}
(\theta A)^2 &amp; \theta A \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}=
\begin{bmatrix}
\frac{(\theta A)^2}{2!} &amp; \frac{(\theta A) \boldsymbol{v}}{2!} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>对于第3项：</p>
<p></p><div class="math display">\[\frac{(\hat{s} \theta)^3}{3!} = \frac{1}{3!}
\begin{bmatrix}
(\theta A)^3 &amp; (\theta A)^2 \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}=
\begin{bmatrix}
\frac{(\theta A)^3}{3!} &amp; \frac{(\theta A)^2 \boldsymbol{v}}{3!} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}
\]</div><p></p><p>以此类推，把所有项加起来，分块相加，有：</p>
<p></p><div class="math display">\[\begin{align*}
\exp({\xi}) &amp;= I + \hat{s} \theta + \frac{(\hat{s} \theta)^2}{2!} + \frac{(\hat{s} \theta)^3}{3!} + \cdots \\
&amp;= \begin{bmatrix}
I &amp; \mathbf{0} \\
\mathbf{0}^T &amp; 1
\end{bmatrix} + 
\begin{bmatrix}
\theta A &amp; \boldsymbol{v} \\
\mathbf{0}^T &amp; 0
\end{bmatrix} + 
\begin{bmatrix}
\frac{(\theta A)^2}{2!} &amp; \frac{(\theta A) \boldsymbol{v}}{2!} \\
\mathbf{0}^T &amp; 0
\end{bmatrix}+
\begin{bmatrix}
\frac{(\theta A)^3}{3!} &amp; \frac{(\theta A)^2 \boldsymbol{v}}{3!} \\
\mathbf{0}^T &amp; 0
\end{bmatrix} + \cdots\\
&amp;=\begin{bmatrix}
\sum_{n=0}^\infty \frac{({\theta}A)^n}{n!} &amp; \sum_{n=1}^\infty \frac{(\theta A)^{n-1} \boldsymbol{v}}{n!} \\
\mathbf{0}^T &amp; 1 \\
\end{bmatrix}
\end{align*}
\]</div><p></p><p>对于这个结果的左上角元素，其实就是<span class="math inline">\(SO(3)\)</span>的指数映射：</p>
<p></p><div class="math display">\[\exp(\theta A) = \sum_{n=0}^\infty \frac{({\theta}A)^n}{n!} 
\]</div><p></p><p>而对于右上角元素，可以将索引平移一下，令 <span class="math inline">\(k = n - 1\)</span>，则：</p>
<p></p><div class="math display">\[\sum_{k=0}^\infty \frac{(\theta A)^k \boldsymbol{v}}{(k+1)!}
\]</div><p></p><p>因此，<span class="math inline">\(SE(3)\)</span>指数映射可以写成：</p>
<p></p><div class="math display">\[\exp({\xi}) =
\begin{bmatrix}
\exp(\theta A) &amp; \sum_{n=0}^\infty \frac{(\theta A)^n \boldsymbol{v}}{(n+1)!} \\
\mathbf{0}^T &amp; 1
\end{bmatrix}
\]</div><p></p><p>但是为了进一步方便表达右上角元素的表达式，引入<strong>左不变雅可比矩阵</strong><span class="math inline">\(J\)</span>：</p>
<p></p><div class="math display">\[J = \sum_{n=0}^\infty \frac{(\theta A)^n}{(n+1)!}
\]</div><p></p><p>接下来利用预备知识中介绍的反对称矩阵的周期性规律计算<span class="math inline">\(J\)</span>：</p>
<p></p><div class="math display">\[\begin{align*}
J &amp;= I + \frac{\theta}{2!}{A} + \frac{{\theta}^{2}}{3!}{A^2} + \frac{{\theta}^{3}}{4!}{A^3} + \cdots \\
&amp;= I + \frac{1}{\theta}(\frac{\theta^{2}}{2!} - \frac{{\theta}^{4}}{4!} + \cdots) {A} + \frac{1}{\theta}(\frac{{\theta}^{3}}{3!}-\frac{{\theta}^{5}}{5!} + \cdots) {A^2}
\end{align*}
\]</div><p></p><p>利用预备知识中的正弦和余弦的泰勒公式展开：</p>
<ul>
<li><span class="math inline">\(\theta - \sin\theta = \frac{\theta^3}{3!} + \frac{\theta^5}{5!} - \cdots\)</span></li>
<li><span class="math inline">\(1 - \cos\theta = \frac{\theta^2}{2!} - \frac{\theta^4}{4!} + \cdots\)</span></li>
</ul>
<p>可以得到：</p>
<p></p><div class="math display">\[J = I + \frac{1 - \cos\theta}{\theta} A + \frac{\theta - \sin\theta}{\theta} A^2
\]</div><p></p><p>由于<span class="math inline">\(A = [a]_\times\)</span>，因此<span class="math inline">\(J\)</span>也可以表达为：</p>
<p></p><div class="math display">\[\begin{align*}
J &amp;= I + \frac{1 - \cos\theta}{\theta} [a]_\times + \frac{\theta - \sin\theta}{\theta} ({a}{a^T}-\mathbf{I})\\
&amp;= \frac{\sin\theta}{\theta}I + (1 - \frac{\sin\theta}{\theta}){a}{a^T} + \frac{1 - \cos\theta}{\theta} [a]_\times\\
\end{align*}
\]</div><p></p><p><span class="math inline">\(SE(3)\)</span>的指数映射最终结果如下：</p>
<p></p><div class="math display">\[\exp({\xi}) =
\begin{bmatrix}
\exp([\boldsymbol{\omega}]_\times) &amp; J\boldsymbol{v} \\
\mathbf{0}^T &amp; 1
\end{bmatrix}
\]</div><p></p><p>其中：</p>
<ul>
<li><strong>旋转部分</strong> <span class="math inline">\(R = \exp([\boldsymbol{\omega}]_\times)\)</span>即<span class="math inline">\(SO(3)\)</span>的指数映射。</li>
<li><strong>平移部分</strong> <span class="math inline">\(\boldsymbol{t} = J\boldsymbol{v}\)</span>, 其中J是左不变雅可比矩阵：<p></p><div class="math display">\[J = I + \frac{1 - \cos\theta}{\theta} A + \frac{\theta - \sin\theta}{\theta}
\]</div><p></p>或<p></p><div class="math display">\[J=\frac{\sin\theta}{\theta}I + (1 - \frac{\sin\theta}{\theta}){a}{a^T} + \frac{1 - \cos\theta}{\theta} [a]_\times
\]</div><p></p></li>
</ul>
<p>与<span class="math inline">\(SO(3)\)</span>类似，也可以推导出<span class="math inline">\(SE(3)\)</span>到<span class="math inline">\(\mathfrak{se}(3)\)</span>的对数映射。旋转部分可以按照之前介绍的<span class="math inline">\(SO(3)\)</span>到<span class="math inline">\(\mathfrak{so}(3)\)</span>的对数映射求出；平移部分由于<span class="math inline">\(J\)</span>已知（通过左不变雅可比矩阵求得），可以解<span class="math inline">\(\boldsymbol{t} = J\boldsymbol{v}\)</span>这个线性方程组来解得。具体数学表达式如下：</p>
<p></p><div class="math display">\[\theta = \arccos\left( \frac{\operatorname{tr}(R) - 1}{2} \right),Ra = a,\boldsymbol{t} = J\boldsymbol{v}
\]</div><p></p><h1 id="4-总结">4 总结</h1>
<p>作为本篇的结束，整理了一张特殊正交群的内容的表格，如下所示：</p>
<table>
<thead>
<tr>
<th style="text-align: center">内容</th>
<th style="text-align: center">特殊正交群</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">李群</td>
<td style="text-align: center"><span class="math inline">\(SO(3) = \{ R \in \mathbb{R}^{3\times3} \mid R^T R = I, \det(R) = 1\}\)</span></td>
</tr>
<tr>
<td style="text-align: center">李代数</td>
<td style="text-align: center"><span class="math inline">\(\mathfrak{so}(3) = \left\{ [\boldsymbol{\omega}]_\times \in \mathbb{R}^{3 \times 3} \mid {\omega} \in \mathbb{R}^3 \right\}\)</span></td>
</tr>
<tr>
<td style="text-align: center">向量表示</td>
<td style="text-align: center"><span class="math inline">\({\omega} \in \mathbb{R}^3\)</span></td>
</tr>
<tr>
<td style="text-align: center">李括号</td>
<td style="text-align: center"><span class="math inline">\([[\boldsymbol{\omega}_1]_\times, [\boldsymbol{\omega}_2]_\times] = [\boldsymbol{\omega}_1]_\times [\boldsymbol{\omega}_2]_\times - [\boldsymbol{\omega}_2]_\times [\boldsymbol{\omega}_1]_\times\)</span> 或者 叉乘<span class="math inline">\(\times\)</span></td>
</tr>
<tr>
<td style="text-align: center">指数映射</td>
<td style="text-align: center"><span class="math inline">\(\exp(\theta [a]_\times) = \cos\theta I + (1 - \cos\theta) a{a}^T +\sin\theta [a]_\times\)</span></td>
</tr>
<tr>
<td style="text-align: center">对数映射</td>
<td style="text-align: center"><span class="math inline">\(\theta = \arccos\left( \frac{\operatorname{tr}(R) - 1}{2} \right),Ra = a\)</span></td>
</tr>
</tbody>
</table>
<p>特殊欧式群的内容则如下表所示：</p>
<table>
<thead>
<tr>
<th style="text-align: center">内容</th>
<th style="text-align: center">特殊欧式群</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">李群</td>
<td style="text-align: center"><span class="math inline">\(SE(3)=\bigg\{ T = \begin{bmatrix} R &amp; t \\ 0 &amp; 1 \end{bmatrix} \in \mathbb{R}^{4\times4} \mid R \in SO(3) ,t \in \mathbb{R}^3 \bigg\}\)</span></td>
</tr>
<tr>
<td style="text-align: center">李代数</td>
<td style="text-align: center"><span class="math inline">\(\mathfrak{se}(3) = \left\{\xi = \begin{bmatrix}[\boldsymbol{\omega}]_\times &amp; \boldsymbol{v} \\ \mathbf{0}^T &amp; 0 \\ \end{bmatrix} \in \mathbb{R}^{4 \times 4} \mid \boldsymbol{\omega}, \boldsymbol{v} \in \mathbb{R}^3 \right\}\)</span></td>
</tr>
<tr>
<td style="text-align: center">向量表示</td>
<td style="text-align: center"><span class="math inline">\(\boldsymbol{\eta} = \begin{bmatrix} \boldsymbol{\omega} \\ \boldsymbol{v} \end{bmatrix} \in \mathbb{R}^6\)</span></td>
</tr>
<tr>
<td style="text-align: center">李括号</td>
<td style="text-align: center"><span class="math inline">\([\xi_1, \xi_2] = \xi_1 \xi_2 - \xi_2 \xi_1\)</span> 或者 <span class="math inline">\([\boldsymbol{\eta}_1, \boldsymbol{\eta}_2] = \begin{bmatrix} \boldsymbol{\omega}_1 \times \boldsymbol{\omega}_2 \\ \boldsymbol{\omega}_1 \times \boldsymbol{v}_2 - \boldsymbol{\omega}_2 \times \boldsymbol{v}_1 \end{bmatrix}\)</span></td>
</tr>
<tr>
<td style="text-align: center">指数映射</td>
<td style="text-align: center"><span class="math inline">\(\exp({\xi}) = \begin{bmatrix} \exp([\boldsymbol{\omega}]_\times) &amp; J\boldsymbol{v} \\ \mathbf{0}^T &amp; 1 \\ \end{bmatrix}\\J=\frac{\sin\theta}{\theta}I + (1 - \frac{\sin\theta}{\theta}){a}{a^T} + \frac{1 - \cos\theta}{\theta} [a]_\times\)</span></td>
</tr>
<tr>
<td style="text-align: center">对数映射</td>
<td style="text-align: center"><span class="math inline">\(\theta = \arccos\left( \frac{\operatorname{tr}(R) - 1}{2} \right),Ra = a,\boldsymbol{t} = J\boldsymbol{v}\)</span></td>
</tr>
</tbody>
</table>
<p>注意可能符号与书上的符号略有差异，读者可以自行对照参考。</p>
<p>另外，笔者也想说一点内容之外的感受。除非具有相当的抽象能力，第一次接触到像李群和李代数这样的知识是很难理解到位的，因为你完全没有应用这些知识的场景，再怎么认真看书，也不过是泛泛而过。在这种情况下，不如好好推导一遍其中的原理，举一些实际的例子来加深映像。另外，这些数学知识既高深又抽象（笔者大概翻阅了一下《李理论》的相关知识，本文的这些推导在行家面前估计不值一哂），我们也不用过多去纠结，主打一个能自己说服自己即可。如果读者只是像我一样的普通人，可能需要在以后的应用和实践中来更深入地理解这些知识了；目前我们需要做的，就是不要排斥这个新的工具，然后理解它，利用它——真理之道，就在其中。</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.01487311415625" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-11 21:57">2025-05-11 21:57</span>&nbsp;
<a href="https://www.cnblogs.com/charlee44">charlee44</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18871743);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18871743', targetLink: 'https://www.cnblogs.com/charlee44/p/18871743', title: '详解SLAM中的李群和李代数（中）' })">举报</a>
</div>
        
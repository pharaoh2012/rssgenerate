
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jevonsflash/p/18911657" title="发布于 2025-06-05 10:03">
    <span role="heading" aria-level="2">[学习笔记] 从零开始虚拟化搭建数据库服务器</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#一-创建虚拟机并安装centos-7" rel="noopener nofollow">一. 创建虚拟机并安装CentOS 7</a></li><li><a href="#二-安装vmware-tools" rel="noopener nofollow">二. 安装VMware Tools</a></li><li><a href="#三-安装常用工具" rel="noopener nofollow">三. 安装常用工具</a><ul><li><a href="#确保联网" rel="noopener nofollow">确保联网</a></li><li><a href="#配置网络" rel="noopener nofollow">配置网络</a></li></ul></li><li><a href="#四-安装服务" rel="noopener nofollow">四. 安装服务</a><ul><li><a href="#安装-sql-server-2017" rel="noopener nofollow">安装 SQL Server 2017</a></li><li><a href="#安装-openssl" rel="noopener nofollow">安装 OpenSSL</a></li><li><a href="#安装-redis" rel="noopener nofollow">安装 Redis</a></li><li><a href="#安装-rabbitmq" rel="noopener nofollow">安装 RabbitMQ</a></li></ul></li></ul></div><p></p>
<h2 id="一-创建虚拟机并安装centos-7">一. 创建虚拟机并安装CentOS 7</h2>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825389-1305414928.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>硬件参数根据需求进行设置</p>
<p>CD/DVD 源选择CentOS7的 ISO 镜像</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825332-217441518.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>安装过程略..</p>
<h2 id="二-安装vmware-tools">二. 安装VMware Tools</h2>
<p>等待安装结束，从菜单中选择安装VMware Tools，此时<br>
CD/DVD 源会自动挂载到虚拟机中。</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825333-574570396.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>从虚拟机进入CentOS 7 系统</p>
<p>运行，创建挂载目录</p>
<pre><code>sudo mkdir -p /mnt/cdrom

</code></pre>
<p>运行</p>
<pre><code>lsblk

</code></pre>
<p>查看CD/DVD驱动器设备：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825380-252923666.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>运行命令，挂载CD/DVD驱动器</p>
<pre><code>sudo mount /dev/sr0 /mnt/cdrom

</code></pre>
<p>执行结果如下，表明挂载成功</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825348-585812055.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>进入挂载目录，解压VMware Tools安装包</p>
<pre><code>cp /mnt/cdrom/VMwareTools-*.tar.gz /tmp/
cd /tmp
tar -zxvf VMwareTools-*.tar.gz
</code></pre>
<p>如果缺少编译工具和内核头文件，可以运行以下命令安装：</p>
<pre><code>yum install -y gcc make perl kernel-devel kernel-headers
</code></pre>
<p>进入解压后的目录，运行以下命令安装VMware Tools：</p>
<pre><code>cd vmware-tools-distrib
sudo ./vmware-install.pl
</code></pre>
<p>执行一路回车即可，安装完成后会提示：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825427-883297454.png" alt="在这里插入图片描述" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825369-1538718084.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>安装成功结果：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825416-57110023.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="三-安装常用工具">三. 安装常用工具</h2>
<h3 id="确保联网">确保联网</h3>
<p>当前没有任何网络工具，如何确定系统已经接入互联网？</p>
<p>以访问百度为例，运行以下命令：</p>
<pre><code>echo &gt; /dev/tcp/www.baidu.com/80 &amp;&amp; echo "ok" || echo "not ok"

</code></pre>
<p>显示ok，则表明已经联网。</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825460-449015719.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>因为CentOS7已停止维护，所以需要手动添加 repo 源。运行：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825307-957052514.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>安装网络工具</p>
<pre><code class="language-bash">
yum install -y wget curl net-tools vim epel-release
</code></pre>
<h3 id="配置网络">配置网络</h3>
<p>将虚拟机自动获取的IP地址改为静态IP地址。</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825406-2061108261.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>开放ssh的22端口</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825306-1131144560.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>打开sshd</p>
<pre><code class="language-bash">sudo systemctl start sshd
sudo systemctl enable sshd
</code></pre>
<p>打开防火墙，运行</p>
<pre><code>sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --reload

</code></pre>
<p>运行结结果：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825352-1015731169.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>此时可以通过ssh登录了，接下来可以安装SQL-Server、Redis等服务。</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825573-1178251796.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="四-安装服务">四. 安装服务</h2>
<p>配置SELinux，打开码编辑器，并将SELINUX=enforcing 改为 SELINUX=permissive</p>
<pre><code>vi /etc/selinux/config
</code></pre>
<h3 id="安装-sql-server-2017">安装 SQL Server 2017</h3>
<pre><code>sudo curl -o /etc/yum.repos.d/mssql-server.repo https://packages.microsoft.com/config/rhel/7/mssql-server-2017.repo
sudo yum install -y mssql-server
sudo /opt/mssql/bin/mssql-conf setup
sudo firewall-cmd --zone=public --add-port=1433/tcp --permanent
sudo firewall-cmd --reload
systemctl status mssql-server
systemctl enable mssql-server
</code></pre>
<h3 id="安装-openssl">安装 OpenSSL</h3>
<pre><code>wget https://www.openssl.org/source/openssl-1.1.1.tar.gz
tar -xvf openssl-1.1.1.tar.gz
cd openssl-1.1.1
./config --prefix=/usr/local/openssl shared zlib
make &amp;&amp; make install
sudo ldconfig
ln -s /usr/local/openssl/bin/openssl /usr/bin/openssl
ln -s /usr/local/openssl/lib/libssl.so.1.1 /usr/lib64/libssl.so.1.1
ln -s /usr/local/openssl/lib/libcrypto.so.1.1 /usr/lib64/libcrypto.so.1.1

</code></pre>
<h3 id="安装-redis">安装 Redis</h3>
<pre><code>tar -zxvf redis-7.4.0.tar.gz
cd redis-7.4.0
make &amp;&amp; make install
ln -s /usr/local/bin/redis-server /usr/bin/redis-server
cp redis.conf /etc/redis/
sudo firewall-cmd --zone=public --add-port=6379/tcp --permanent
sudo firewall-cmd --reload
</code></pre>
<p>新建redis启动脚本</p>
<pre><code>vi /usr/lib/systemd/system/redis.service
</code></pre>
<pre><code class="language-ini">[Unit]
Description=Redis persistent key-value database
After=network.target

[Service]
LimitNOFILE=10032
ExecStart=/usr/bin/redis-server /etc/redis/redis.conf --supervised systemd
ExecStop=/usr/libexec/redis-shutdown
Type=simple
User=redis
Group=redis
RuntimeDirectory=redis
RuntimeDirectoryMode=0755

[Install]
WantedBy=multi-user.target

</code></pre>
<p>执行命令</p>
<pre><code>
systemctl daemon-reload
systemctl start redis
systemctl enable redis

</code></pre>
<h3 id="安装-rabbitmq">安装 RabbitMQ</h3>
<p>安装Erlang</p>
<pre><code>cd /tmp/
curl -sfL -O https://github.com/rabbitmq/erlang-rpm/releases/download/v26.2.5.11/erlang-26.2.5.11-1.el7.x86_64.rpm
yum install -y erlang-26.2.5.11-1.el7.x86_64.rpm

</code></pre>
<p>安装RabbitMQ</p>
<pre><code>curl -sfL -O https://github.com/rabbitmq/rabbitmq-server/releases/download/v4.1.0/rabbitmq-server-4.1.0-1.el8.noarch.rpm
yum install rabbitmq-server-4.1.0-1.el8.noarch.rpm

</code></pre>
<p>添加防火墙</p>
<pre><code>sudo firewall-cmd --zone=public --add-port=5672/tcp --permanent

sudo firewall-cmd --zone=public --add-port=25672/tcp --permanent

sudo firewall-cmd --zone=public --add-port=4369/tcp --permanent
</code></pre>
<p>配置外部访问的用户</p>
<pre><code># 1. 添加用户 sa，并设置密码（将 yourpassword 替换成你实际使用的密码）
sudo rabbitmqctl add_user sa yourpassword

# 2. 给用户 sa 设置为管理员角色
sudo rabbitmqctl set_user_tags sa administrator

# 3. 设置该用户对默认虚拟主机 "/" 拥有全部权限
sudo rabbitmqctl set_permissions -p / sa ".*" ".*" ".*"

</code></pre>
<p>启动RabbitMQ的Web管理插件</p>
<pre><code>sudo rabbitmq-plugins list | grep management
sudo rabbitmq-plugins enable rabbitmq_management
sudo systemctl restart rabbitmq-server

</code></pre>
<p>运行结果：</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825493-1895793011.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>访问RabbitMQ管理界面，默认地址为 <a href="http://127.0.0.1:15672" target="_blank" rel="noopener nofollow">http://127.0.0.1:15672</a>，使用刚才创建的用户 sa 和密码登录。</p>
<p><img src="https://img2024.cnblogs.com/blog/644861/202506/644861-20250605095825441-1511958927.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>..</p>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/jevonsflash/" target="_blank">林晓lx</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/jevonsflash/p/18911657" target="_blank">https://www.cnblogs.com/jevonsflash/p/18911657</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.18036987672453703" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-05 10:03">2025-06-05 10:03</span>&nbsp;
<a href="https://www.cnblogs.com/jevonsflash">林晓lx</a>&nbsp;
阅读(<span id="post_view_count">83</span>)&nbsp;
评论(<span id="post_comment_count">5</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18911657);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18911657', targetLink: 'https://www.cnblogs.com/jevonsflash/p/18911657', title: '[学习笔记] 从零开始虚拟化搭建数据库服务器' })">举报</a>
</div>
        
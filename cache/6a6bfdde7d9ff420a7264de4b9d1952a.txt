
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wuty/p/19040401" title="发布于 2025-08-15 22:10">
    <span role="heading" aria-level="2">WPF 实现支持动态调整高度的文本显示控件</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><strong>1、需求：有个应用在做升级的时候，显示版本信息时候，宽度的一样的情况下，需要动态高度，即是有一个最小的高度，最大的高度，超出最大高度则显示滑动条显示。</strong></p>
<p>如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202506/1063618-20250606185706939-697187110.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><strong>2、明确需求后，开始动工：</strong></p>
<p>　<strong>　2.1、创建一个Border，设置&nbsp;&nbsp;MaxHeight="503" MinHeight="207"</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Window </span><span style="color: rgba(255, 0, 0, 1)">x:Class</span><span style="color: rgba(0, 0, 255, 1)">="autoHeightControl.MainWindow"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:x</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:d</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/expression/blend/2008"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:mc</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:local</span><span style="color: rgba(0, 0, 255, 1)">="clr-namespace:autoHeightControl"</span><span style="color: rgba(255, 0, 0, 1)">
        mc:Ignorable</span><span style="color: rgba(0, 0, 255, 1)">="d"</span><span style="color: rgba(255, 0, 0, 1)">
        Title</span><span style="color: rgba(0, 0, 255, 1)">="MainWindow"</span><span style="color: rgba(255, 0, 0, 1)"> Height</span><span style="color: rgba(0, 0, 255, 1)">="450"</span><span style="color: rgba(255, 0, 0, 1)"> Width</span><span style="color: rgba(0, 0, 255, 1)">="800"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
   

    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Border
                 </span><span style="color: rgba(255, 0, 0, 1)">Width</span><span style="color: rgba(0, 0, 255, 1)">="360"</span><span style="color: rgba(255, 0, 0, 1)">
                 MaxHeight</span><span style="color: rgba(0, 0, 255, 1)">="503"</span><span style="color: rgba(255, 0, 0, 1)">
                 MinHeight</span><span style="color: rgba(0, 0, 255, 1)">="207"</span><span style="color: rgba(255, 0, 0, 1)">
                 Padding</span><span style="color: rgba(0, 0, 255, 1)">="30,10,30,20"</span><span style="color: rgba(255, 0, 0, 1)">
                  Background</span><span style="color: rgba(0, 0, 255, 1)">="Gray"</span><span style="color: rgba(255, 0, 0, 1)"> 
                  CornerRadius</span><span style="color: rgba(0, 0, 255, 1)">="10"</span><span style="color: rgba(255, 0, 0, 1)">
                 x:Name</span><span style="color: rgba(0, 0, 255, 1)">="MainBorder"</span>
                 <span style="color: rgba(0, 0, 255, 1)">&gt;</span>

            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="*"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock
                          </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="ThemeTextBlock"</span><span style="color: rgba(255, 0, 0, 1)">
                          Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)">
                          Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,20,0,0"</span><span style="color: rgba(255, 0, 0, 1)">
                          HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Left"</span><span style="color: rgba(255, 0, 0, 1)">
                          FontSize</span><span style="color: rgba(0, 0, 255, 1)">="20"</span><span style="color: rgba(255, 0, 0, 1)">
                          FontWeight</span><span style="color: rgba(0, 0, 255, 1)">="Bold"</span><span style="color: rgba(255, 0, 0, 1)">
                          Text</span><span style="color: rgba(0, 0, 255, 1)">="发现新版本!"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">新版本信息</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock  </span><span style="color: rgba(255, 0, 0, 1)">Text</span><span style="color: rgba(0, 0, 255, 1)">="新版本信息"</span><span style="color: rgba(255, 0, 0, 1)"> TextWrapping</span><span style="color: rgba(0, 0, 255, 1)">="WrapWithOverflow"</span><span style="color: rgba(255, 0, 0, 1)"> Margin</span><span style="color: rgba(0, 0, 255, 1)">="0 16 0 8"</span><span style="color: rgba(255, 0, 0, 1)">   FontSize</span><span style="color: rgba(0, 0, 255, 1)">="16"</span><span style="color: rgba(255, 0, 0, 1)">
                FontWeight</span><span style="color: rgba(0, 0, 255, 1)">="SemiBold"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">TextBlock</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">内容显示</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
          <strong>      <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="2"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ScrollViewer </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="Viewer"</span><span style="color: rgba(255, 0, 0, 1)">
             Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,10"</span><span style="color: rgba(255, 0, 0, 1)">
             CanContentScroll</span><span style="color: rgba(0, 0, 255, 1)">="False"</span><span style="color: rgba(255, 0, 0, 1)">
             HorizontalScrollBarVisibility</span><span style="color: rgba(0, 0, 255, 1)">="Disabled"</span><span style="color: rgba(255, 0, 0, 1)">
             VerticalScrollBarVisibility</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span><span style="color: rgba(255, 0, 0, 1)">
             PanningMode</span><span style="color: rgba(0, 0, 255, 1)">="VerticalOnly"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                       
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="textContentBlock"</span><span style="color: rgba(255, 0, 0, 1)">  TextWrapping</span><span style="color: rgba(0, 0, 255, 1)">="Wrap"</span><span style="color: rgba(255, 0, 0, 1)"> Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,0,10,10"</span><span style="color: rgba(255, 0, 0, 1)"> FontSize</span><span style="color: rgba(0, 0, 255, 1)">="14"</span><span style="color: rgba(255, 0, 0, 1)"> 
                                Text</span><span style="color: rgba(0, 0, 255, 1)">="发哈尽快老师的发发哈扣篮大赛好发的发哈尽"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">ScrollViewer</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></strong>
<br><br><br>
                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">按钮区域</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="3"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">StackPanel
         </span><span style="color: rgba(255, 0, 0, 1)">Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,10,0,0"</span><span style="color: rgba(255, 0, 0, 1)">
         HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Right"</span><span style="color: rgba(255, 0, 0, 1)">
         VerticalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Center"</span><span style="color: rgba(255, 0, 0, 1)">
         Orientation</span><span style="color: rgba(0, 0, 255, 1)">="Horizontal"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Button
                                 </span><span style="color: rgba(255, 0, 0, 1)">HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Left"</span><span style="color: rgba(255, 0, 0, 1)">
             Background</span><span style="color: rgba(0, 0, 255, 1)">="#E7E7E7"</span><span style="color: rgba(255, 0, 0, 1)">
             Content</span><span style="color: rgba(0, 0, 255, 1)">="稍后再说"</span><span style="color: rgba(255, 0, 0, 1)">
             Foreground</span><span style="color: rgba(0, 0, 255, 1)">="#000000"</span>
                         <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Button
             </span><span style="color: rgba(255, 0, 0, 1)">Margin</span><span style="color: rgba(0, 0, 255, 1)">="10,0"</span><span style="color: rgba(255, 0, 0, 1)">
             HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Right"</span><span style="color: rgba(255, 0, 0, 1)">
             Background</span><span style="color: rgba(0, 0, 255, 1)">="#0052D9"</span><span style="color: rgba(255, 0, 0, 1)">
             Content</span><span style="color: rgba(0, 0, 255, 1)">="立即升级"</span><span style="color: rgba(255, 0, 0, 1)">
             Foreground</span><span style="color: rgba(0, 0, 255, 1)">="#ffffff"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">StackPanel</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Border</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Window</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p>发现整个控件的高度，不会随着&nbsp;&nbsp;<strong>textContentBlock&nbsp;</strong>的内容大小自动适应高度，而是以最大的高度：503px 显示，如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202508/1063618-20250815213714647-687526700.png" alt="image" width="604" height="640" loading="lazy"></p>
<p>&nbsp;　　<strong>2.2、使用Snoop 监控MainBorder ，发现只有手动设置 最外层的&nbsp;&nbsp;MainBorder 的 Height 属性才能修改整个控件的高度，而在超出MaxHeight ，则按MaxHeight 显示，小于MinHeight 则按&nbsp;MinHeight显示</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202508/1063618-20250815215053163-884374689.gif" alt="动态高度博客1" width="1450" height="613" loading="lazy"></p>
<p>&nbsp;</p>
<p><strong>　　2.3、这样思路就转移到如何动态设置&nbsp;MainBorder&nbsp; 的高度了。</strong></p>
<p>由于&nbsp;<strong>textContentBlock 外层套了一层&nbsp;ScrollViewer，我们可以使用&nbsp;ScrollViewer的&nbsp;ExtentHeight 动态获取文本的高度</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202508/1063618-20250815215931692-1209202007.gif" alt="动态高度博客2" width="1460" height="617" loading="lazy"></p>
<p>&nbsp;</p>
<p>于是我们可以把&nbsp;&nbsp;MainBorder 的高度 Height 与&nbsp;<strong>ScrollViewer 的&nbsp;<strong>ExtentHeight&nbsp; 关联起来</strong></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><strong>3、解决方法</strong></strong></p>
<p><strong><strong>　　3.1、新增一个 高度转换器</strong></strong></p>
<div class="cnblogs_code">
<pre> <span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> HeightToHeightConverter : IValueConverter
 {
     </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">object</span> Convert(<span style="color: rgba(0, 0, 255, 1)">object</span> value, Type targetType, <span style="color: rgba(0, 0, 255, 1)">object</span><span style="color: rgba(0, 0, 0, 1)"> parameter, CultureInfo culture)
     {
         </span><span style="color: rgba(0, 0, 255, 1)">return</span> (<span style="color: rgba(0, 0, 255, 1)">double</span>)value + <span style="color: rgba(128, 0, 128, 1)">207</span><span style="color: rgba(0, 0, 0, 1)">;
     }

     </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">object</span> ConvertBack(<span style="color: rgba(0, 0, 255, 1)">object</span> value, Type targetType, <span style="color: rgba(0, 0, 255, 1)">object</span><span style="color: rgba(0, 0, 0, 1)"> parameter, CultureInfo culture)
     {
         </span><span style="color: rgba(0, 0, 255, 1)">throw</span> <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> NotImplementedException();
     }
 }</span></pre>
</div>
<p>&nbsp;</p>
<p><strong>　　3.2、Mainborder 的高度增加与ScrollViewer 的&nbsp;ExtentHeight 的绑定</strong></p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Window </span><span style="color: rgba(255, 0, 0, 1)">x:Class</span><span style="color: rgba(0, 0, 255, 1)">="autoHeightControl.MainWindow"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:x</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/winfx/2006/xaml"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:d</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.microsoft.com/expression/blend/2008"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:mc</span><span style="color: rgba(0, 0, 255, 1)">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span><span style="color: rgba(255, 0, 0, 1)">
        xmlns:local</span><span style="color: rgba(0, 0, 255, 1)">="clr-namespace:autoHeightControl"</span><span style="color: rgba(255, 0, 0, 1)">
        mc:Ignorable</span><span style="color: rgba(0, 0, 255, 1)">="d"</span><span style="color: rgba(255, 0, 0, 1)">
        Title</span><span style="color: rgba(0, 0, 255, 1)">="MainWindow"</span><span style="color: rgba(255, 0, 0, 1)"> Height</span><span style="color: rgba(0, 0, 255, 1)">="450"</span><span style="color: rgba(255, 0, 0, 1)"> Width</span><span style="color: rgba(0, 0, 255, 1)">="800"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    
   <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Window.Resources</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">local:HeightToHeightConverter </span><span style="color: rgba(255, 0, 0, 1)">x:Key</span><span style="color: rgba(0, 0, 255, 1)">="HeightToHeightConverter"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">local:HeightToHeightConverter</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Window.Resources</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

 

    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Border
                 </span><span style="color: rgba(255, 0, 0, 1)">Width</span><span style="color: rgba(0, 0, 255, 1)">="360"</span><span style="color: rgba(255, 0, 0, 1)">
                 MaxHeight</span><span style="color: rgba(0, 0, 255, 1)">="503"</span><span style="color: rgba(255, 0, 0, 1)">
                 MinHeight</span><span style="color: rgba(0, 0, 255, 1)">="207"</span><strong><span style="color: rgba(255, 0, 0, 1)">
                 Height</span><span style="color: rgba(0, 0, 255, 1)">="</span><span style="color: rgba(128, 128, 0, 1)">{Binding ElementName=Viewer,Path=ExtentHeight,Converter={StaticResource HeightToHeightConverter}}</span><span style="color: rgba(0, 0, 255, 1)">"</span></strong><span style="color: rgba(255, 0, 0, 1)">
                    Padding</span><span style="color: rgba(0, 0, 255, 1)">="30,10,30,20"</span><span style="color: rgba(255, 0, 0, 1)">
                  Background</span><span style="color: rgba(0, 0, 255, 1)">="Gray"</span><span style="color: rgba(255, 0, 0, 1)"> 
                  CornerRadius</span><span style="color: rgba(0, 0, 255, 1)">="10"</span><span style="color: rgba(255, 0, 0, 1)">
                 x:Name</span><span style="color: rgba(0, 0, 255, 1)">="MainBorder"</span>
                 <span style="color: rgba(0, 0, 255, 1)">&gt;</span>

            <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="*"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">RowDefinition </span><span style="color: rgba(255, 0, 0, 1)">Height</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid.RowDefinitions</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock
                          </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="ThemeTextBlock"</span><span style="color: rgba(255, 0, 0, 1)">
                          Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="0"</span><span style="color: rgba(255, 0, 0, 1)">
                          Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,20,0,0"</span><span style="color: rgba(255, 0, 0, 1)">
                          HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Left"</span><span style="color: rgba(255, 0, 0, 1)">
                          FontSize</span><span style="color: rgba(0, 0, 255, 1)">="20"</span><span style="color: rgba(255, 0, 0, 1)">
                          FontWeight</span><span style="color: rgba(0, 0, 255, 1)">="Bold"</span><span style="color: rgba(255, 0, 0, 1)">
                          Text</span><span style="color: rgba(0, 0, 255, 1)">="发现新版本!"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">新版本信息</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="1"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock  </span><span style="color: rgba(255, 0, 0, 1)">Text</span><span style="color: rgba(0, 0, 255, 1)">="新版本信息"</span><span style="color: rgba(255, 0, 0, 1)"> TextWrapping</span><span style="color: rgba(0, 0, 255, 1)">="WrapWithOverflow"</span><span style="color: rgba(255, 0, 0, 1)"> Margin</span><span style="color: rgba(0, 0, 255, 1)">="0 16 0 8"</span><span style="color: rgba(255, 0, 0, 1)">   FontSize</span><span style="color: rgba(0, 0, 255, 1)">="16"</span><span style="color: rgba(255, 0, 0, 1)">
                FontWeight</span><span style="color: rgba(0, 0, 255, 1)">="SemiBold"</span><span style="color: rgba(0, 0, 255, 1)">&gt;&lt;/</span><span style="color: rgba(128, 0, 0, 1)">TextBlock</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">内容显示</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="2"</span><span style="color: rgba(255, 0, 0, 1)"> Background</span><span style="color: rgba(0, 0, 255, 1)">="Red"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

                  
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">ScrollViewer </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="Viewer"</span><span style="color: rgba(255, 0, 0, 1)">
                                  Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,10"</span><span style="color: rgba(255, 0, 0, 1)">
                                  CanContentScroll</span><span style="color: rgba(0, 0, 255, 1)">="False"</span><span style="color: rgba(255, 0, 0, 1)">
                                  HorizontalScrollBarVisibility</span><span style="color: rgba(0, 0, 255, 1)">="Disabled"</span><span style="color: rgba(255, 0, 0, 1)">
                                  VerticalScrollBarVisibility</span><span style="color: rgba(0, 0, 255, 1)">="Auto"</span><span style="color: rgba(255, 0, 0, 1)">
                                  PanningMode</span><span style="color: rgba(0, 0, 255, 1)">="VerticalOnly"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">TextBlock </span><span style="color: rgba(255, 0, 0, 1)">x:Name</span><span style="color: rgba(0, 0, 255, 1)">="textBlock"</span><span style="color: rgba(255, 0, 0, 1)">  TextWrapping</span><span style="color: rgba(0, 0, 255, 1)">="Wrap"</span><span style="color: rgba(255, 0, 0, 1)"> Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,0,10,10"</span><span style="color: rgba(255, 0, 0, 1)"> FontSize</span><span style="color: rgba(0, 0, 255, 1)">="14"</span><span style="color: rgba(255, 0, 0, 1)"> 
                                   Text</span><span style="color: rgba(0, 0, 255, 1)">="快老师的发发哈扣篮大赛好发的发哈尽哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽哈哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽扣篮大赛好发的发哈尽快老师的发发哈扣篮大赛好发的发哈尽哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽哈哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽哈扣篮大赛好发的发哈尽发哈尽快老师的发发哈扣篮大赛好发的发哈尽扣篮大赛好发的发哈尽"</span> <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>

                    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">ScrollViewer</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>

                <span style="color: rgba(0, 128, 0, 1)">&lt;!--</span><span style="color: rgba(0, 128, 0, 1)">按钮区域</span><span style="color: rgba(0, 128, 0, 1)">--&gt;</span>

                <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Grid </span><span style="color: rgba(255, 0, 0, 1)">Grid.Row</span><span style="color: rgba(0, 0, 255, 1)">="3"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">StackPanel
         </span><span style="color: rgba(255, 0, 0, 1)">Margin</span><span style="color: rgba(0, 0, 255, 1)">="0,10,0,0"</span><span style="color: rgba(255, 0, 0, 1)">
         HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Right"</span><span style="color: rgba(255, 0, 0, 1)">
         VerticalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Center"</span><span style="color: rgba(255, 0, 0, 1)">
         Orientation</span><span style="color: rgba(0, 0, 255, 1)">="Horizontal"</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Button
                                 </span><span style="color: rgba(255, 0, 0, 1)">HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Left"</span><span style="color: rgba(255, 0, 0, 1)">
             Background</span><span style="color: rgba(0, 0, 255, 1)">="#E7E7E7"</span><span style="color: rgba(255, 0, 0, 1)">
             Content</span><span style="color: rgba(0, 0, 255, 1)">="稍后再说"</span><span style="color: rgba(255, 0, 0, 1)">
             Foreground</span><span style="color: rgba(0, 0, 255, 1)">="#000000"</span>
                         <span style="color: rgba(0, 0, 255, 1)">/&gt;</span>

                        <span style="color: rgba(0, 0, 255, 1)">&lt;</span><span style="color: rgba(128, 0, 0, 1)">Button
             </span><span style="color: rgba(255, 0, 0, 1)">Margin</span><span style="color: rgba(0, 0, 255, 1)">="10,0"</span><span style="color: rgba(255, 0, 0, 1)">
             HorizontalAlignment</span><span style="color: rgba(0, 0, 255, 1)">="Right"</span><span style="color: rgba(255, 0, 0, 1)">
             Background</span><span style="color: rgba(0, 0, 255, 1)">="#0052D9"</span><span style="color: rgba(255, 0, 0, 1)">
             Content</span><span style="color: rgba(0, 0, 255, 1)">="立即升级"</span><span style="color: rgba(255, 0, 0, 1)">
             Foreground</span><span style="color: rgba(0, 0, 255, 1)">="#ffffff"</span><span style="color: rgba(0, 0, 255, 1)">/&gt;</span>
                    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">StackPanel</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
                <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
            <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
        <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Border</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
    <span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Grid</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span>
<span style="color: rgba(0, 0, 255, 1)">&lt;/</span><span style="color: rgba(128, 0, 0, 1)">Window</span><span style="color: rgba(0, 0, 255, 1)">&gt;</span></pre>
</div>
<p>　　3.3、效果如下图：</p>
<p><img src="https://img2024.cnblogs.com/blog/1063618/202508/1063618-20250815220558867-1274872905.gif" alt="动态高度博客3" width="936" height="715" loading="lazy"></p>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://learn.microsoft.com/zh-cn/dotnet/api/system.windows.controls.scrollviewer.extentheight?view=windowsdesktop-7.0" rel="noopener nofollow">ScrollViewer.ExtentHeight 属性 (System.Windows.Controls) | Microsoft Learn</a></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.009722222222222222" data-date-updated="2025-08-15 22:24">2025-08-15 22:10</span>&nbsp;
<a href="https://www.cnblogs.com/wuty">wuty007</a>&nbsp;
阅读(<span id="post_view_count">25</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19040401);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19040401', targetLink: 'https://www.cnblogs.com/wuty/p/19040401', title: 'WPF 实现支持动态调整高度的文本显示控件' })">举报</a>
</div>
        
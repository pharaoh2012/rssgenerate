
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/noear/p/18815657" title="发布于 2025-04-08 23:14">
    <span role="heading" aria-level="2">无耳 Solon Ai MCP，发布工具服务，使用工具服务。效果预览！</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        solon-ai-mcp 是 solon-ai 的扩展特性。提供 mcp 协议的支持。通过它，可以方便的发布 Tool Service，方便的使用 Tool Service。
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>solon-ai-mcp 是 solon-ai 的扩展特性。提供 mcp 协议的支持。通过它，可以方便的发布 Tool Service，方便的使用 Tool Service。</p>
<h2 id="引入依赖包">引入依赖包</h2>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.noear&lt;/groupId&gt;
    &lt;artifactId&gt;solon-ai-mcp&lt;/artifactId&gt;
    &lt;version&gt;3.1.3-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h2 id="服务端演示发布工具服务">服务端演示（发布工具服务）</h2>
<p>引入依赖包后，服务端默认不会启用，需要通过配置启用。</p>
<pre><code class="language-yaml">solon.ai.mcp.server:  
  enabled: true            
  sseEndpoint: "/mcp/sse"  
</code></pre>
<p>启用 mcp server 后，所有组件的 <code>@FunctionMapping</code> 方法，会自动成为 mcp server 的 tool 服务。</p>
<pre><code class="language-java">@Component
public class McpServerTool {
    @FunctionMapping(description = "查询天气预报")
    public String getWeather(@FunctionParam(description = "城市位置") String location) {
        return "晴，14度";
    }
}

public class McpServerApp {
    public static void main(String[] args) {
        Solon.start(McpServerApp.class, args);
    }
}
</code></pre>
<h2 id="客户端演示使用工具服务">客户端演示（使用工具服务）</h2>
<p>客户端可以使用原生的 modelcontextprotocol 接口，也可以使用 McpClientWrapper (包装简化过)</p>
<ul>
<li>直接调用</li>
</ul>
<pre><code class="language-java">public void case1(){
    McpClientWrapper mcpClient = new McpClientWrapper("http://localhost:8080", "/mcp/sse");

    String rst = mcpClient.callToolAsText("getWeather", Map.of("location", "杭州"));
}
</code></pre>
<ul>
<li>绑定给模型使用</li>
</ul>
<pre><code class="language-java">public void case2(){
    McpClientWrapper mcpClient = new McpClientWrapper("http://localhost:8080", "/mcp/sse");
    ChatModel chatModel = ChatModel.of("http://127.0.0.1:11434/api/chat")
                .provider("ollama")
                .model("qwen2.5:1.5b")
                .build();

    ChatResponse resp = chatModel.prompt("杭州今天的天气怎么样？")
            .options(options -&gt; {
                //转为函数集合用于绑定
                options.functionAdd(mcpClient.toFunctions());
            })
            .call();
}
</code></pre>
<h2 id="项目仓库地址">项目仓库地址</h2>
<ul>
<li>gitee：<a href="https://gitee.com/opensolon/solon-ai" target="_blank" rel="noopener nofollow">https://gitee.com/opensolon/solon-ai</a></li>
<li>gitcode: <a href="https://gitcode.com/opensolon/solon-ai" target="_blank" rel="noopener nofollow">https://gitcode.com/opensolon/solon-ai</a></li>
<li>github：<a href="https://github.com/opensolon/solon-ai" target="_blank" rel="noopener nofollow">https://github.com/opensolon/solon-ai</a></li>
</ul>
<h2 id="官网">官网</h2>
<ul>
<li><a href="https://solon.noear.org/article/learn-solon-ai" target="_blank" rel="noopener nofollow">https://solon.noear.org/article/learn-solon-ai</a></li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0457999828599537" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-08 23:14">2025-04-08 23:14</span>&nbsp;
<a href="https://www.cnblogs.com/noear">带刺的坐椅</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18815657" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18815657);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18815657', targetLink: 'https://www.cnblogs.com/noear/p/18815657', title: '无耳 Solon Ai MCP，发布工具服务，使用工具服务。效果预览！' })">举报</a>
</div>
        
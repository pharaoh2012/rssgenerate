
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/supermao12/p/18729431" title="å‘å¸ƒäº 2025-02-21 16:11">
    <span role="heading" aria-level="2">ollama-deepseek éƒ¨ç½²</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="é€‰æ‹©äº‘èµ„æº">é€‰æ‹©äº‘èµ„æº</h3>
<pre><code class="language-powershell">é€‰ç”¨æ™ºæ˜Ÿäº‘ 4090 é«˜æ€§èƒ½ 1.57 ä¸€å°æ—¶ windowsæ“ä½œç³»ç»Ÿ
å¯ä»¥ä¿®æ”¹å¸¦å®½æ¥å¢åŠ ä¸‹è½½é€Ÿåº¦
ä½¿ç”¨mstscè¿œç¨‹ç™»å½•
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215163352199-1947385710.png" alt="" loading="lazy"></p>
<h3 id="ä½¿ç”¨ollama">ä½¿ç”¨ollama</h3>
<pre><code class="language-powershell">https://ollama.com/
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215163504212-1168424730.png" alt="" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215164042549-1064634141.png" alt="" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215164120336-229674983.png" alt="" loading="lazy"></p>
<p><strong>ollama run deepseek-r1:8b</strong></p>
<pre><code class="language-powershell">
&lt;/think&gt;
è¦å°†æ¨¡å‹è¿›è¡Œè‡ªå®šä¹‰è®­ç»ƒï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
1. **é€‰æ‹©ä¸€ä¸ªå¼€æºå·¥å…·æˆ–æ¡†æ¶**ï¼šå¦‚TensorFlowã€PyTorchç­‰ã€‚
2. **å‡†å¤‡æ•°æ®é›†**ï¼šæ”¶é›†éœ€è¦è®­ç»ƒçš„æ•°æ®ï¼Œå¹¶å¯¹å…¶è¿›è¡Œé¢„å¤„ç†ï¼Œå¦‚æ¸…æ´—ã€å»å™ªå’Œæ ¼å¼åŒ–ã€‚
3. **å®šä¹‰æ¨¡å‹ç»“æ„**ï¼šæ ¹æ®éœ€æ±‚è®¾è®¡æ¨¡å‹ï¼Œä½¿ç”¨æ‰€é€‰çš„æ¡†æ¶æ¥å®ç°ã€‚
4. **ç¼–å†™è®­ç»ƒé€»è¾‘**ï¼šç¼–å†™è®­ç»ƒå¾ªç¯ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ åˆ°æ‰€éœ€çš„ä»»åŠ¡ã€‚
5. **æ‰§è¡Œè®­ç»ƒ**ï¼šä½¿ç”¨è®­ç»ƒæ•°æ®è¿è¡Œæ¨¡å‹ï¼Œå¹¶ç›‘æ§è®­ç»ƒè¿›åº¦åŠæŸå¤±æ›²çº¿ã€‚
6. **è¯„ä¼°ç»“æœ**ï¼šåœ¨è®­ç»ƒå®Œæˆåï¼Œå¯¹æ¨¡å‹è¿›è¡ŒéªŒè¯å’Œæµ‹è¯•ï¼Œä»¥è¯„ä¼°å…¶æ€§èƒ½å’Œå‡†ç¡®æ€§ã€‚
é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨å¯ä»¥å¯¹æ¨¡å‹è¿›è¡Œè‡ªå®šä¹‰è®­ç»ƒã€‚
&gt;&gt;&gt;

C:\Users\vipuser&gt;ollama list
NAME              ID              SIZE      MODIFIED
deepseek-r1:8b    28f8fd6cdc67    4.9 GB    2 minutes ago

C:\Users\vipuser&gt;
</code></pre>
<h4 id="ä½¿ç”¨ollamaåµŒå…¥å¼æ¨¡å‹">ä½¿ç”¨ollamaåµŒå…¥å¼æ¨¡å‹</h4>
<pre><code class="language-powershell">
C:\Users\vipuser&gt;ollama pull nomic-embed-text
pulling manifest
pulling 970aa74c0a90... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 274 MB
pulling c71d239df917... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  11 KB
pulling ce4a164fc046... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   17 B
pulling 31df23ea7daa... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  420 B
verifying sha256 digest
writing manifest
success

C:\Users\vipuser&gt;
</code></pre>
<h4 id="ä½¿ç”¨anythingllm">ä½¿ç”¨Anythingllm</h4>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215170035848-626596748.png" alt="" loading="lazy"><br>
é€‰æ‹©ollama å†é€‰æ‹©å¯¹åº”æ¨¡å‹ deepseek</p>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215172050351-1997869175.png" alt="" loading="lazy"></p>
<p><strong>åµŒå…¥å¼æ¨¡å‹ä¸æ•°æ®å‘é‡åŒ–</strong><br>
<img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215180345341-1184664617.png" alt="" loading="lazy"><br>
æ•°æ®å‘é‡åŒ–ï¼šæŠŠæ•°æ®å˜æˆaièƒ½å¿«é€Ÿè¯†åˆ«æ£€ç´¢çš„ä¸€ç§æ ¼å¼ã€‚ç”±åµŒå…¥æ•°æ®åº“æ¥å®Œæˆ<br>
å½“ä½¿ç”¨æœ¬èº«ä¸æ”¯æŒåµŒå…¥å¼•æ“çš„ LLM æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦é¢å¤–æŒ‡å®šç”¨äºåµŒå…¥æ–‡æœ¬çš„å‡­æ®ã€‚<br>
åµŒå…¥æ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºçŸ¢é‡çš„è¿‡ç¨‹ã€‚éœ€è¦è¿™äº›å‡­æ®æ‰èƒ½å°†æ‚¨çš„æ–‡ä»¶å’Œæç¤ºè½¬æ¢ä¸º AnythingLLM å¯ä»¥ç”¨æ¥å¤„ç†çš„æ ¼å¼ã€‚<br>
<img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215172331148-1187868273.png" alt="" loading="lazy"><br>
æ›´æ”¹åµŒå…¥å¼é¦–é€‰é¡¹</p>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250215173059928-1510989954.png" alt="" loading="lazy"><br>
æŠ•å–‚æ–‡ä»¶ç»™AnythingLLM</p>
<h2 id="windowså®‰è£…å¤§æ¨¡å‹">windowså®‰è£…å¤§æ¨¡å‹</h2>
<p>1.windowså®‰è£…4090é©±åŠ¨<br>
2.windowså®‰è£…wsl2<br>
3.åœ¨wsl2é‡Œé¢å®‰è£…æ‰€éœ€ä¾èµ–</p>
<p>RTX 4090æ˜¾å¡é©±åŠ¨éœ€è¦å…ˆå®‰è£…åœ¨Windowsä¸Š<br>
WSL2æä¾›äº†ä¸€ä¸ªæ¨¡æ‹ŸLinuxç¯å¢ƒçš„èƒ½åŠ›ï¼Œè¿™æ ·å¯ä»¥è®©ä½ åœ¨Windowsä¸Šè¿è¡Œæ·±åº¦å­¦ä¹ ä»»åŠ¡æ—¶ï¼Œè·å¾—æ›´å¥½çš„å¯¹CUDAå’ŒGPUåŠ é€Ÿçš„æ”¯æŒã€‚<br>
åœ¨WSL2ä¸­ï¼Œä½ å°†èƒ½å¤Ÿåƒåœ¨Linuxä¸Šé‚£æ ·å®‰è£…å’Œè¿è¡Œæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆå¦‚PyTorchã€TensorFlowï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ©ç”¨CUDAåŠ é€Ÿæ¥è®­ç»ƒå’Œæ¨ç†AIå¤§æ¨¡å‹ã€‚</p>
<h3 id="å®‰è£…wslubuntuç³»ç»Ÿ">å®‰è£…wslã€ubuntuç³»ç»Ÿ</h3>
<pre><code class="language-powershell">[powershell admin]

dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
wsl.exe --update
wsl --set-default-version 2
</code></pre>
<pre><code class="language-powershell">https://apps.microsoft.com/detail/9pn20msr04dw?hl=zh-CN&amp;gl=CN
æ‰‹åŠ¨å®‰è£…ubuntu
äº‘å‚å•†è™šæ‹ŸåŒ–æ— æ³•è™šæ‹Ÿbiosç¡¬ä»¶è™šæ‹ŸåŒ–
</code></pre>
<h3 id="linux-ubuntu-nvidiaé©±åŠ¨ä¸cuda">Linux Ubuntu nvidiaé©±åŠ¨ä¸cuda</h3>
<pre><code class="language-powershell">sudo apt update
sudo apt upgrade
sudo apt install nvidia-driver-535
(base) root@ubuntu22:~# nvidia-smi
Sun Feb 16 00:06:26 2025
+---------------------------------------------------------------------------------------+
| NVIDIA-SMI 535.129.03             Driver Version: 535.129.03   CUDA Version: 12.2     |
|-----------------------------------------+----------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage | GPU-Util  Compute M. |
|                                         |                      |               MIG M. |
|=========================================+======================+======================|
|   0  NVIDIA GeForce RTX 4090        Off | 00000000:00:08.0 Off |                  Off |
| 30%   32C    P8              10W / 450W |     13MiB / 24564MiB |      0%      Default |
|                                         |                      |                  N/A |
+-----------------------------------------+----------------------+----------------------+

+---------------------------------------------------------------------------------------+
| Processes:                                                                            |
|  GPU   GI   CI        PID   Type   Process name                            GPU Memory |
|        ID   ID                                                             Usage      |
|=======================================================================================|
|    0   N/A  N/A       765      G   /usr/lib/xorg/Xorg                            4MiB |
+---------------------------------------------------------------------------------------+
(base) root@ubuntu22:~#

cudaç½‘å€
https://developer.nvidia.com/cuda-11-8-0-download-archive?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=Ubuntu&amp;target_version=22.04&amp;target_type=runfile_local

wget https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda_11.8.0_520.61.05_linux.run
sudo sh cuda_11.8.0_520.61.05_linux.run
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250216003818743-1240499210.png" alt="" loading="lazy"></p>
<pre><code class="language-powershell">===========
= Summary =
===========

Driver:   Not Selected
Toolkit:  Installed in /usr/local/cuda-11.8/

Please make sure that
 -   PATH includes /usr/local/cuda-11.8/bin
 -   LD_LIBRARY_PATH includes /usr/local/cuda-11.8/lib64, or, add /usr/local/cuda-11.8/lib64 to /etc/ld.so.conf and run ldconfig as root

To uninstall the CUDA Toolkit, run cuda-uninstaller in /usr/local/cuda-11.8/bin
***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 520.00 is required for CUDA 11.8 functionality to work.
To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file:
    sudo &lt;CudaInstaller&gt;.run --silent --driver

Logfile is /var/log/cuda-installer.log
(base) root@ubuntu22:~#

export PATH=$PATH:/usr/local/cuda-11.8/bin
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda-11.8/lib64
export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/cuda-11.8/lib64

(base) root@ubuntu22:~# nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2022 NVIDIA Corporation
Built on Wed_Sep_21_10:33:58_PDT_2022
Cuda compilation tools, release 11.8, V11.8.89
Build cuda_11.8.r11.8/compiler.31833905_0
(base) root@ubuntu22:~#
</code></pre>
<h3 id="å®‰è£…ollama-ä½¿ç”¨deepseek">å®‰è£…ollama ä½¿ç”¨deepseek</h3>
<pre><code class="language-powershell">
(base) root@ubuntu22:~# curl -fsSL https://ollama.com/install.sh | sh
(base) root@ubuntu22:~# ollama run deepseek-r1:8b
pulling manifest
pulling 6340dc3229b0... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 4.9 GB
pulling 369ca498f347... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  387 B
pulling 6e4c38e1172f... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 1.1 KB
pulling f4d24e9138dd... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  148 B
pulling 0cb05c6e4e02... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–  487 B
verifying sha256 digest
writing manifest
success
&gt;&gt;&gt; ä½ å¥½
&lt;think&gt;

&lt;/think&gt;

ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®å¿™çš„å—ï¼Ÿæ— è®ºæ˜¯é—®é¢˜ã€å»ºè®®è¿˜æ˜¯é—²èŠï¼Œæˆ‘éƒ½åœ¨è¿™é‡Œä¸ºä½ æœåŠ¡ã€‚ğŸ˜Š

&gt;&gt;&gt; ä½ æ˜¯deepseekå—
&lt;think&gt;
å—¯ï¼Œä½ æ˜¯æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹å§ï¼Ÿé‚£æˆ‘å¯ä»¥é—®ä½ ä¸€äº›é—®é¢˜äº†ã€‚ä½ èƒ½å¸®åŠ©æˆ‘äº†è§£æ›´å¤šå…³äºäººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ çš„å†…å®¹å—ï¼Ÿ
&lt;/think&gt;

ä½ å¥½ï¼æˆ‘æ˜¯ç”±ä¸­å›½çš„æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰å…¬å¸å¼€å‘çš„æ™ºèƒ½åŠ©æ‰‹DeepSeek-R1ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ‘ä¼šå°½åŠ›ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚è¯·é—®æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥ä¸º
æ‚¨æœåŠ¡çš„ï¼Ÿ

&gt;&gt;&gt;
Use Ctrl + d or /bye to exit.
&gt;&gt;&gt;
(base) root@ubuntu22:~#
</code></pre>
<h3 id="å®‰è£…docker">å®‰è£…docker</h3>
<pre><code class="language-powershell">(base) root@ubuntu22:~# apt install docker.io -y
(base) root@ubuntu22:~# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
(base) root@ubuntu22:~#
(base) root@ubuntu22:~# sudo mkdir -p /etc/systemd/system/docker.service.d
(base) root@ubuntu22:~# cat /etc/systemd/system/docker.service.d/http-proxy.conf
[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
(base) root@ubuntu22:~# systemctl daemon-reload
(base) root@ubuntu22:~# systemctl restart docker
(base) root@ubuntu22:~#

xshellè¿œç¨‹ä¼ å…¥ä»£ç†æ¥å®ç°ä¸Šè°·æ­Œ
è‹¥ç»å¸¸å¤±è´¥å°è¯•æ¢vtworayç«¯å£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è„šæœ¬proxy_tunnel

(base) root@ubuntu22:~# docker images
REPOSITORY                 TAG       IMAGE ID       CREATED        SIZE
mintplexlabs/anythingllm   latest    b040b5d3c0db   25 hours ago   2.51GB

(base) root@ubuntu22:~# export STORAGE_LOCATION=$HOME/anythingllm &amp;&amp; \
mkdir -p $STORAGE_LOCATION &amp;&amp; \
touch "$STORAGE_LOCATION/.env" &amp;&amp; \
docker run -d -p 3001:3001 \
--cap-add SYS_ADMIN \
-v ${STORAGE_LOCATION}:/app/server/storage \
-v ${STORAGE_LOCATION}/.env:/app/server/.env \
-e STORAGE_DIR="/app/server/storage" \
--network host \
--privileged \
mintplexlabs/anythingllm
a7cb9e4e6250f2aff1ad92eb108cf69591855548239d89ff82ff8cbd2c84af35
(base) root@ubuntu22:~# 

è‹¥å®¹å™¨è‡ªåŠ¨é€€å‡ºï¼Œåˆ™å¢åŠ æƒé™
sudo chown -R 1000:1000 $HOME/anythingllm
sudo chmod -R 755 $HOME/anythingllm
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250216113348277-223402844.png" alt="" loading="lazy"></p>
<h3 id="nginxè·¯ç”±è½¬å‘å¯é€‰">nginxè·¯ç”±è½¬å‘ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="language-powershell">sudo vi /etc/nginx/sites-available/redirect_to_container
server {
    listen 8800;  # æœ¬åœ°çš„ 8800 ç«¯å£

    location / {
        proxy_pass http://localhost:3001;  # è½¬å‘åˆ°å®¹å™¨çš„ 3001 ç«¯å£
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
# åˆ›å»ºç¬¦å·é“¾æ¥åˆ° sites-enabled ç›®å½•
sudo ln -s /etc/nginx/sites-available/redirect_to_container /etc/nginx/sites-enabled/

# æµ‹è¯• Nginx é…ç½®
sudo nginx -t
sudo systemctl restart nginx

</code></pre>
<h3 id="è¿›è¡Œå›¾å½¢åŒ–é…ç½®">è¿›è¡Œå›¾å½¢åŒ–é…ç½®</h3>
<p><img src="https://img2024.cnblogs.com/blog/2415164/202502/2415164-20250216143252595-245310116.png" alt="" loading="lazy"></p>
<h3 id="å…¶ä»–">å…¶ä»–</h3>
<p>ctrl+p æ‰“å°å¯¹htmlæ”¹æˆpdf<br>
docker desktopå¯èƒ½éœ€è¦æ›´æ–°windowsï¼Œéœ€è¦æˆåŠŸæ‰§è¡Œwsl --update</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.005500540986111111" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-21 16:11">2025-02-21 16:11</span>&nbsp;
<a href="https://www.cnblogs.com/supermao12">supermao12</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18729431" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18729431);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18729431', targetLink: 'https://www.cnblogs.com/supermao12/p/18729431', title: 'ollama-deepseek éƒ¨ç½²' })">ä¸¾æŠ¥</a>
</div>
        
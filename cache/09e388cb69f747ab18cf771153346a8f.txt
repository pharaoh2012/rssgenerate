
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mllt/p/18624183/nas-ug-gitlab" title="发布于 2024-12-23 17:06">
    <span role="heading" aria-level="2">【NAS】绿联NAS+极狐Gitlab+1Panel</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1-准备域名">1. 准备域名</h2>
<p>例如我的 <code>???.mllt.cc</code></p>
<h2 id="2-内网穿透">2. 内网穿透</h2>
<p>我使用的Natfrp（<a href="https://www.natfrp.com/tunnel/%EF%BC%89" target="_blank" rel="noopener nofollow">https://www.natfrp.com/tunnel/）</a></p>
<p>创建HTTP隧道（对应端口10080）创建HTTP隧道（对应端口10443）<br>
注意这两隧道要一致，以便绑定同一个域名???.mllt.cc</p>
<p>然后在域名解析那里，将???.mllt.cc解析到隧道地址</p>
<h2 id="3使用1panel申请ssl证书下载证书key和crt">3.使用1panel申请SSL证书，下载证书key和crt</h2>
<p>命名格式为<br>
???.mllt.cc.crt   ???.mllt.cc.key<br>
有这两个文件</p>
<p>ok，到目前为止，域名，穿透，SSL证书，都准备好了</p>
<h2 id="4-绿联-docker-项目-">4 绿联-&gt;docker-&gt;项目-&gt;</h2>
<pre><code>version: '3.8'
services:
  web:
    image: 'registry.gitlab.cn/omnibus/gitlab-jh:latest'
    restart: no
    hostname: '???.mllt.cc'
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url 'https://???.mllt.cc'
        gitlab_rails['gitlab_shell_ssh_port'] = 10022
    ports:
      - '10080:80'
      - '10443:443'
      - '10022:22'
    volumes:
      - '/volume1/docker/gitlab/config:/etc/gitlab'
      - '/volume1/docker/gitlab/logs:/var/log/gitlab'
      - '/volume1/docker/gitlab/data:/var/opt/gitlab'
    shm_size: '256m'
</code></pre>
<p>/volume1 就是共享文件夹。docker是默认就有的，gitlab自己创建，里面的文件夹记得提前创建</p>
<p>基本就OK了，然后把???.mllt.cc.crt   ???.mllt.cc.key 上传到<code>/volume1/docker/gitlab/config/ssl</code>里面，里面本来就有这俩文件，先删除了再上传</p>
<p>然后就可以了</p>
<h2 id="5获取登录密码账号root">5.获取登录密码(账号root)</h2>
<pre><code>/volume1/docker/gitlab/config/initial_root_password
</code></pre>
<p>6.修改密码 额 先切换中文吧</p>
<h2 id="6切换中文">6.切换中文</h2>
<p><img src="https://img2024.cnblogs.com/blog/2571021/202412/2571021-20241223154149960-1126760890.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/2571021/202412/2571021-20241223154235593-170843907.png" alt="image" loading="lazy"></p>
<p>都中文了，自己设置去。</p>
<p>记得先修改密码，然后重新登录</p>
<h2 id="7配置邮件">7.配置邮件</h2>
<p>官方文档：<a href="https://gitlab.cn/docs/omnibus/settings/smtp.html" target="_blank" rel="noopener nofollow">https://gitlab.cn/docs/omnibus/settings/smtp.html</a><br>
如果你对邮件方面不是很懂，那你把基础的东西设置了就行</p>
<pre><code>gitlab_rails['smtp_enable'] = true
gitlab_rails['smtp_address'] = "smtp.qiye.163.com"
gitlab_rails['smtp_port'] = 25
gitlab_rails['smtp_user_name'] = "发送邮件的账号"
gitlab_rails['smtp_password'] = "发送邮件的密码"
gitlab_rails['smtp_pool'] = true #SMTP连接池
gitlab_rails['gitlab_email_from'] = ''
gitlab_rails['gitlab_email_reply_to'] = ''
</code></pre>
<p>如果你懂的话你可以多配置一些，把SSL都整上，如果你不是很懂，那就别配置的太复杂了</p>
<h2 id="8外观更改">8.外观更改</h2>
<p><a href="https://gitlab.cn/docs/jh/administration/appearance.html" target="_blank" rel="noopener nofollow">https://gitlab.cn/docs/jh/administration/appearance.html</a></p>

</div>
<div id="MySignature" role="contentinfo">
        <hr>
        <div style="background:#bbded6;color:snow;text-align:center;font-weight:bold;font-size:1.5em;">
        版&nbsp;权&nbsp;声&nbsp;明
         </div>
    <div style="background:#ffb6b9;color:snow;text-align:center;">
    <br>
    作者：<a href="https://www.cnblogs.com/mllt/" target="_blank">萌狼蓝天</a>
    <br>
    QQ：3447902411（仅限技术交流，添加请说明方向)
    <br>
    转载请注明原文链接：<a href="https://www.cnblogs.com/mllt/p/18624183/nas-ug-gitlab" target="_blank">https://www.cnblogs.com/mllt/p/18624183/nas-ug-gitlab</a>
    <br><br>
     </div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0484507575" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-23 17:07">2024-12-23 17:06</span>&nbsp;
<a href="https://www.cnblogs.com/mllt">萌狼蓝天</a>&nbsp;
阅读(<span id="post_view_count">76</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18624183" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18624183);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18624183', targetLink: 'https://www.cnblogs.com/mllt/p/18624183/nas-ug-gitlab', title: '【NAS】绿联NAS+极狐Gitlab+1Panel' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/leyan-lian/p/18937216" title="发布于 2025-06-19 21:43">
    <span role="heading" aria-level="2">SenseVoice部署，并调用api接口</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#安装python" rel="noopener nofollow">安装Python</a></li><li><a href="#代码下载" rel="noopener nofollow">代码下载</a></li><li><a href="#虚拟环境" rel="noopener nofollow">虚拟环境</a></li><li><a href="#安装依赖" rel="noopener nofollow">安装依赖</a></li><li><a href="#下载模型" rel="noopener nofollow">下载模型</a></li><li><a href="#修改启用webuipy" rel="noopener nofollow">修改启用webui.py</a></li><li><a href="#启用apipy" rel="noopener nofollow">启用api.py</a></li></ul></div><p></p>
<h1 id="安装python">安装Python</h1>
<p>这个网上找下教程安装下就可以，版本应该没有什么要求，我装的是3.10.7<br>
记得设置pip镜像，不然后面下载包会很慢。</p>
<pre><code>pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/
</code></pre>
<h1 id="代码下载">代码下载</h1>
<p>​<br>
GitHub网址:<a href="https://github.com/FunAudioLLM/SenseVoice" target="_blank" rel="noopener nofollow">https://github.com/FunAudioLLM/SenseVoice</a></p>
<p>​可以通过git下载或者直接在github下载zip包：</p>
<pre><code>git clone https://github.com/FunAudioLLM/SenseVoice.git
</code></pre>
<p>解压出来文件夹是这样子的：<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214146394-175266902.png" class="lazyload"></p>
<h1 id="虚拟环境">虚拟环境</h1>
<ol>
<li><strong>进入项目根文件夹</strong> ，运行cmd命令：<br>
<strong>创建虚拟环境(出现.venv文件夹就算成功了)</strong></li>
</ol>
<pre><code>python -m venv .venv
</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214156323-788647470.png" class="lazyload"></p>
<ol start="2">
<li>激活虚拟环境(命令行前面出现.venv就算成功了):</li>
</ol>
<pre><code>.venv\Scripts\activate
</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214206097-1942422773.png" class="lazyload"></p>
<h1 id="安装依赖">安装依赖</h1>
<pre><code>pip install -r requirements.txt
</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214215873-1349856908.png" class="lazyload"></p>
<h1 id="下载模型">下载模型</h1>
<pre><code>modelscope download --model iic/SenseVoiceSmall --local_dir model/iic/SenseVoiceSmall
</code></pre>
<pre><code>modelscope download --model iic/speech_fsmn_vad_zh-cn-16k-common-pytorch --local_dir model/iic/speech_fsmn_vad_zh-cn-16k-common-pytorch
</code></pre>
<p>下载成功后model/iic中会出现这两个文件夹<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214226785-450454098.png" class="lazyload"></p>
<h1 id="修改启用webuipy">修改启用webui.py</h1>
<p>默认启动只能本地访问，因为我是服务器部署想要公网访问并且想要修改他的默认端口，需要修改下webui.py文件<br>
将最后的demo.launch()改为demo.launch(server_name="0.0.0.0", server_port=8888)，后面该为自己想要的端口号就可以<br>
然后命令行运行(首次运行会下载一些东西):</p>
<pre><code>python webui.py
</code></pre>
<p>出现这个代表运行成功<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214239139-499483911.png" class="lazyload"><br>
然后就可以访问网页了。<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214249394-2114342561.png" class="lazyload"></p>
<h1 id="启用apipy">启用api.py</h1>
<p>上面是启用的网页版，如果想要接口请求要启用api.py，9999改为自己想要的端口就可以</p>
<pre><code>uvicorn api:app --host 0.0.0.0 --port 9999 --reload
</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214258131-173615515.png" class="lazyload"></p>
<p>然后就可以通过/api/v1/asr接口访问了。<br>
<img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3302349/202506/3302349-20250619214304863-31853455.png" class="lazyload"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-19 21:44">2025-06-19 21:43</span>&nbsp;
<a href="https://www.cnblogs.com/leyan-lian">乐言z</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18937216);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18937216', targetLink: 'https://www.cnblogs.com/leyan-lian/p/18937216', title: 'SenseVoice部署，并调用api接口' })">举报</a>
</div>
        
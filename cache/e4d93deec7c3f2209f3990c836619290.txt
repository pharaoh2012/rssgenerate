
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jsccc520/p/18913731" title="发布于 2025-06-06 11:02">
    <span role="heading" aria-level="2">十步,做一个基于Claw Cloud的天气推送</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<div style="text-align: right">
作者:<font color="brown">故事我忘了<sup>￠</sup></font><br>
个人微信公众号:<font color="blue">程序猿的月光宝盒</font><br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/blog-cc/0c89c806-7e3d-41c5-9d72-84dcecaec490" width="150px">
</div>
<hr>
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#前言" rel="noopener nofollow">前言</a></li><li><a href="#步骤分解" rel="noopener nofollow">步骤分解</a><ul><li><a href="#步骤一" rel="noopener nofollow">步骤一</a></li><li><a href="#步骤二" rel="noopener nofollow">步骤二</a></li><li><a href="#步骤三" rel="noopener nofollow">步骤三</a></li><li><a href="#步骤四" rel="noopener nofollow">步骤四</a></li><li><a href="#步骤五" rel="noopener nofollow">步骤五</a></li><li><a href="#步骤六" rel="noopener nofollow">步骤六</a></li><li><a href="#步骤七" rel="noopener nofollow">步骤七</a></li><li><a href="#步骤八" rel="noopener nofollow">步骤八</a></li><li><a href="#步骤九" rel="noopener nofollow">步骤九</a></li><li><a href="#步骤十" rel="noopener nofollow">步骤十</a></li><li><a href="#对应的节点鼠标移上去点三个小点点rename就好了" rel="noopener nofollow">对应的节点,鼠标移上去点三个小点,点<code>rename</code>就好了
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606071805034_1749165485040.png" alt="250606071805034.png#100%" loading="lazy"></a></li></ul></li><li><a href="#后记" rel="noopener nofollow">后记</a></li></ul></div><p></p>

<h1 id="前言">前言</h1>
<p>本篇目的</p>
<ul>
<li>为了填b站自己挖的坑(说公众号有教程 实际只有开通爪云教程没有案例教程)</li>
<li>为了自己记录<br>
以下步骤  默认你已经会在App Store 中安装n8n</li>
</ul>
<h1 id="步骤分解">步骤分解</h1>
<h2 id="步骤一">步骤一</h2>
<p>点击n8n图标进入 n8n页面<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606063554866_1749162954891.png" alt="250606063554866.png#100%" loading="lazy"></p>
<h2 id="步骤二">步骤二</h2>
<p>点击Add Workflow<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/585960181544780800_1749162993906.png" alt="585960181544780800.png#100%" loading="lazy"></p>
<h2 id="步骤三">步骤三</h2>
<ul>
<li>点击底部"add"</li>
<li>点击时钟"on a schedule"<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606063756173_1749163076197.png" alt="250606063756173.png#100%" loading="lazy"></li>
</ul>
<h2 id="步骤四">步骤四</h2>
<p>设置每天早上 9am<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606063908600_1749163148605.png" alt="250606063908600.png#100%" loading="lazy"></p>
<h2 id="步骤五">步骤五</h2>
<p>设置本工作流的时区</p>
<ul>
<li>点击工作流右上角的三个点</li>
<li>点击setting</li>
<li>找到Timezone,输入 <code>+08</code>,下拉框找到北京</li>
<li>选择北京,并点保存<br>
这样,时区就设置好了  否则时区是对不上中国本土时间的哦</li>
</ul>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606064150645_1749163310650.png" alt="250606064150645.png#100%" loading="lazy"><br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606064300575_1749163380613.png" alt="250606064300575.png#100%" loading="lazy"></p>
<h2 id="步骤六">步骤六</h2>
<blockquote>
<p>以杭州为例</p>
</blockquote>
<p>添加请求节点,获取杭州天气</p>
<p>http request说明:</p>
<ul>
<li>默认get请求不变</li>
<li>url写:<code>http://t.weather.itboy.net/api/weather/city/101210101</code>
<ul>
<li>其中 <code>101210101</code> 为城市编码,这里是杭州</li>
</ul>
</li>
<li>点击 <code>add option</code>,选择 Response</li>
<li>在format那里选择json,表示这个请求返回的格式是json格式</li>
<li>然后你点一下 右上角的 <code>test</code>,右边选择 json(可选可不选,选了更清晰),就能看到天气了,说明没问题 ,然后左上角点 <code>Back to canvas</code>退回流程界面</li>
</ul>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606064603512_1749163563523.png" alt="250606064603512.png#100%" loading="lazy"></p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606064703294_1749163623307.png" alt="250606064703294.png#100%" loading="lazy"></p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606064913694_1749163753702.png" alt="250606064913694.png#100%" loading="lazy"></p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606065242946_1749163962986.png" alt="250606065242946.png#100%" loading="lazy"></p>
<h2 id="步骤七">步骤七</h2>
<p>上一步只是获取了接口请求的结果,然后我们要对结果进行自定义的清洗</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606065720845_1749164240868.png" alt="250606065720845.png#100%" loading="lazy"></p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606065756405_1749164276440.png" alt="250606065756405.png#100%" loading="lazy"><br>
然后再跳出的框中,复制如下代码</p>
<pre><code class="language-JavaScript">// 处理返回的 json 格式的数据并拼接成字符串
// 只处理了当天的数据

shidu = items[0].json.data.shidu;
pm25 = items[0].json.data.pm25;
pm10 = items[0].json.data.pm10;
quality = items[0].json.data.quality;
wendu = items[0].json.data.wendu;
ganmao = items[0].json.data.ganmao;
high = items[0].json.data.forecast[0].high;
low = items[0].json.data.forecast[0].low;
fx = items[0].json.data.forecast[0].fx;
fl = items[0].json.data.forecast[0].fl;
type = items[0].json.data.forecast[0].type;
ymd = items[0].json.data.forecast[0].ymd;
week = items[0].json.data.forecast[0].week;

var yubao = `杭州今日天气预报：\n` +
            `📅 日期: ${ymd} (${week})\n` +
            `🌤 天气: ${type}\n` +
            `🌡 温度: ${low} ~ ${high}\n` +
            `🎐 风力: ${fx} ${fl}\n` +
            `📊 空气质量: ${quality} (PM2.5: ${pm25} | PM10: ${pm10})\n` +
            `💧 湿度: ${shidu}\n` +
            `⚠️ 提示: ${ganmao}`;

// 中文写回到到 json 中
items[0].json.yubao = yubao;
// 转义换行符,为了在后续的节点中正确解析换行
items[0].json.yubao_escaped = yubao.replace(/\n/g, "\\n");  

return items;
</code></pre>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606065848999_1749164329025.png" alt="250606065848999.png#100%" loading="lazy"></p>
<p>再点击右上角的齿轮,设置返回</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606070151640_1749164511654.png" alt="250606070151640.png#100%" loading="lazy"></p>
<p>此时,可以右上角的<code>Test</code>再测一下</p>
<p>不出意外,json那拉到最下,是有我们添加的自定义节点的</p>
<p>后续我们用<code>yubao_escaped</code>那个</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606070252711_1749164572757.png" alt="250606070252711.png#100%" loading="lazy"></p>
<h2 id="步骤八">步骤八</h2>
<p>上面七步已经从接口获取了天气,并清洗完成,</p>
<p>接下来就是推送消息</p>
<p>这里可以推送的方式很多,因为之前做数藏推送,我用wxpusher多  这里就以这个举例子,本来是可以推送到微信的,但是最近微信封很严重,wxpusher官方建议用app了  那这里就用app</p>
<blockquote>
<p>本次不教怎么用wxpusher,自行学习</p>
</blockquote>
<p>返回工作流,添加http节点</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606070458888_1749164698907.png" alt="250606070458888.png#100%" loading="lazy"></p>
<p>根据wxpusher的要求填写相关请求信息,这里不赘述wxpusher的使用方法</p>
<p>Tips:</p>
<blockquote>
<p>唯一要注意的是获取上一步我们清洗好的数据然后发送</p>
<p>用的是<code>{{ $json.yubao_escaped }}</code>,如果作为json的value,注意用双引号括起来</p>
</blockquote>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606070822988_1749164903005.png" alt="250606070822988.png#100%" loading="lazy"></p>
<h2 id="步骤九">步骤九</h2>
<p>然后返回工作流,测试一下</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606071258819_1749165178854.png" alt="250606071258819.png#100%" loading="lazy"></p>
<p>显示成功,手机也看下</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/IMG_3900_1749165412768.PNG" alt="IMG_3900.PNG#100%" loading="lazy"></p>
<h2 id="步骤十">步骤十</h2>
<p>写注释</p>
<p>写注释</p>
<p>写注释</p>
<h2 id="对应的节点鼠标移上去点三个小点点rename就好了">对应的节点,鼠标移上去点三个小点,点<code>rename</code>就好了<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606071805034_1749165485040.png" alt="250606071805034.png#100%" loading="lazy"></h2>
<p>以上</p>
<h1 id="后记">后记</h1>
<ul>
<li>这个例子只是抛转一下<br>
可以做的事情由你决定<br>
但是别违法违纪</li>
<li>上文提到的城市编码:<code>https://blog.csdn.net/u013193363/article/details/44851897</code></li>
<li>推送可以有很多方式,这里再介绍/记录几个开源的</li>
</ul>
<blockquote>
<p>时间: 2025年6月6日 07:21:49</p>
<p>博客园挂了哈哈哈,会员费不够啊<br>
<img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606072231576_1749165751582.png" alt="250606072231576.png#100%" loading="lazy"></p>
</blockquote>
<p>以下引用自仓库:</p>
<p><code>Awesome-NAS-Docker</code>:<code>https://github.com/TWO-ICE/Awesome-NAS-Docker</code></p>
<p>感谢作者</p>
<p><img src="https://fastly.jsdelivr.net/gh/Klaus-Kin/pic-bed@main/new-blog/2025-06/250606072424216_1749165864220.png" alt="250606072424216.png#100%" loading="lazy"></p>
<table>
<thead>
<tr>
<th style="text-align: center">项目标题</th>
<th style="text-align: center">项目简介</th>
<th style="text-align: center">项目地址</th>
<th style="text-align: center">教程</th>
<th style="text-align: center">star</th>
<th style="text-align: center">最近更新</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center">PushDeer</td>
<td style="text-align: center">多端实时消息推送服务方案</td>
<td style="text-align: center"><a href="https://github.com/easychen/pushdeer" target="_blank" rel="noopener nofollow">点我查看</a></td>
<td style="text-align: center"><a href="https://zhuanlan.zhihu.com/p/1893041703331533830" target="_blank" rel="noopener nofollow">查看教程</a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/7b325d87b666ba75d9de03b37a740095e050e3a56cc38744a7ba07c1a3eb3393/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f656173796368656e2f70757368646565723f266c6162656c3d" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/7b325d87b666ba75d9de03b37a740095e050e3a56cc38744a7ba07c1a3eb3393/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f656173796368656e2f70757368646565723f266c6162656c3d" alt="Star" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/d0a338bb9b0fa3b5fa4df8eff52e36b815bab4dc5a718013391b959873e265b5/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f656173796368656e2f70757368646565723f6c6162656c" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/d0a338bb9b0fa3b5fa4df8eff52e36b815bab4dc5a718013391b959873e265b5/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f656173796368656e2f70757368646565723f6c6162656c" alt="Last Commit" loading="lazy"></a></td>
</tr>
<tr>
<td style="text-align: center">ntfy</td>
<td style="text-align: center">跨平台消息推送服务，部署简单</td>
<td style="text-align: center"><a href="https://github.com/binwiederhier/ntfy" target="_blank" rel="noopener nofollow">点我查看</a></td>
<td style="text-align: center"><a href="https://zhuanlan.zhihu.com/p/1893040445153576679" target="_blank" rel="noopener nofollow">查看教程</a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/94cdf3b8a71ef759573a8221ff5f19e22e9e47953b93111ffef7e2d3b38a3b0c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f62696e776965646572686965722f6e7466793f266c6162656c3d" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/94cdf3b8a71ef759573a8221ff5f19e22e9e47953b93111ffef7e2d3b38a3b0c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f62696e776965646572686965722f6e7466793f266c6162656c3d" alt="Star" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/38471eb6fc2c5f64dd8a3ab3ab2b112ffa12bae770a1188e1fb76912509b3ac1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f62696e776965646572686965722f6e7466793f6c6162656c" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/38471eb6fc2c5f64dd8a3ab3ab2b112ffa12bae770a1188e1fb76912509b3ac1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f62696e776965646572686965722f6e7466793f6c6162656c" alt="Last Commit" loading="lazy"></a></td>
</tr>
<tr>
<td style="text-align: center">Bark</td>
<td style="text-align: center">基于APNs将消息直达iPhone锁屏</td>
<td style="text-align: center"><a href="https://github.com/Finb/Bark" target="_blank" rel="noopener nofollow">点我查看</a></td>
<td style="text-align: center"><a href="https://zhuanlan.zhihu.com/p/1890870563641217497" target="_blank" rel="noopener nofollow">查看教程</a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/2631cfcdbe4dcc08e525a344743e3cad51fdc6689912b42ab753af3ba8e2573b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f46696e622f4261726b3f266c6162656c3d" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/2631cfcdbe4dcc08e525a344743e3cad51fdc6689912b42ab753af3ba8e2573b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f46696e622f4261726b3f266c6162656c3d" alt="Star" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/6eed7a15d36275896f1974cfb970ae81f3cece3214eb6cc7c914452b56b59b80/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f46696e622f4261726b3f6c6162656c" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/6eed7a15d36275896f1974cfb970ae81f3cece3214eb6cc7c914452b56b59b80/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f46696e622f4261726b3f6c6162656c" alt="Last Commit" loading="lazy"></a></td>
</tr>
<tr>
<td style="text-align: center">Gotify</td>
<td style="text-align: center">快速搭建本地实时消息推送平台</td>
<td style="text-align: center"><a href="https://github.com/gotify/server" target="_blank" rel="noopener nofollow">点我查看</a></td>
<td style="text-align: center"><a href="https://zhuanlan.zhihu.com/p/1890564606608520626" target="_blank" rel="noopener nofollow">查看教程</a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/2366408b16b7aceb269da07d548c067eddd92a8be38128d6554f2e7a088a84dc/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f676f746966792f7365727665723f266c6162656c3d" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/2366408b16b7aceb269da07d548c067eddd92a8be38128d6554f2e7a088a84dc/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f676f746966792f7365727665723f266c6162656c3d" alt="Star" loading="lazy"></a></td>
<td style="text-align: center"><a href="https://camo.githubusercontent.com/f517f83d8f2d1b51acc74f56f36b844f2c601880d4af8906d8ea1d144ec45aef/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f676f746966792f7365727665723f6c6162656c" target="_blank" rel="noopener nofollow"><img src="https://camo.githubusercontent.com/f517f83d8f2d1b51acc74f56f36b844f2c601880d4af8906d8ea1d144ec45aef/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6173742d636f6d6d69742f676f746966792f7365727665723f6c6162656c" alt="Last Commit" loading="lazy"></a></td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.007593585891203704" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-06 11:03">2025-06-06 11:02</span>&nbsp;
<a href="https://www.cnblogs.com/jsccc520">故事我忘了°</a>&nbsp;
阅读(<span id="post_view_count">11</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18913731);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18913731', targetLink: 'https://www.cnblogs.com/jsccc520/p/18913731', title: '十步,做一个基于Claw Cloud的天气推送' })">举报</a>
</div>
        
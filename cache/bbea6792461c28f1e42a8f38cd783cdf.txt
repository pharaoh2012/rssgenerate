
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/youlanjihua/p/18898005" title="发布于 2025-05-27 09:35">
    <span role="heading" aria-level="2">鸿蒙仓颉开发语言实战教程：自定义组件</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-id="p124945a-qZA3UVsu">关于仓颉开发语言我们已经连续分享了很多天，相信大家对于仓颉开发语言已经有了一定的了解。今天我们继续进阶，分享一个仓颉开发语言中的自定义组件知识。</p>
<p data-id="p124945a-DnG2hnCY">本文案例就以上一篇文章中的自定义tabbar为例，因为我们自己开发的tabbar一直放在index.cj文件中总是不太好的，还是要把它拿出来封装一下。</p>
<p data-id="p124945a-1u1kbvuE">为了较大型项目的文件管理，我在cangjie文件夹下创建了components文件夹，然后在这里创建组件文件，我创建的是yltabbar.cj.</p>
<p data-id="pa028eb2-C3KiLblf"><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202505/f76f34e7462983ce441544752c1b1ab7b8f0b2.png" data-type="block"></p>
<p data-id="p124945a-Z60EGlYc">创建文件之后，可以看到依然是初始化了一行代码，我们还是把四大引用拿过来，然后添加build方法，注意自定义组件就不需要@Entry来修饰了，只用@Component：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>
internal import ohos.base.*
internal import ohos.component.*
internal import ohos.state_manage.*
import ohos.state_macro_manage.*
@Component
public class yltababar {
    func build() {
    	
    }
}</code></pre>
</div>
<p data-id="p124945a-lofPvS6h">然后把tabbar的内容复制到build方法下。</p>
<p data-id="p124945a-331OQQcw">现在如果我们想要给自定义组件传递一些参数，比如tabbar的元素列表，你就可以这样写：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>var tabList: Array&lt;TabItem&gt;</code></pre>
</div>
<p data-id="p124945a-0TZvtydy">这是一个父子单向传递的参数，只能由父组件传递给自组件。我们还有一个参数currenttabIndex，用来记录当前选择的元素序号，这个参数在父组件中也需要用到，这时候就需要使用@Link修饰符：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>@Link var currenttabIndex:Int64</code></pre>
</div>
<p data-id="p124945a-zoE3yc14">现在就可以在页面中使用组件并传递参数了：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>yltababar(tabList:this.tabList,currenttabIndex:this.currenttabIndex)</code></pre>
</div>
<p data-id="p124945a-BZd9Oci0">最后跟大家分享封装组件的完整代码：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>package ohos_app_cangjie_entry.components
internal import ohos.base.*
internal import ohos.component.*
internal import ohos.state_manage.*
import ohos.state_macro_manage.*
import cj_res_entry.app
import ohos_app_cangjie_entry.model.TabItem
import std.os.posix.link
import std.console.Console
@Component
public class yltababar {
    var tabList: Array&lt;TabItem&gt;
    @Link var currenttabIndex:Int64
    var controller: TabsController = TabsController()
    func build() {
    	Row {
                ForEach(this.tabList, itemGeneratorFunc: {item: TabItem, index: Int64 =&gt;
                            Column {
                                if(this.currenttabIndex == index){
                                    Image(item.selectIcon).width(28).height(28)
                                    Text(item.title).fontSize(15).fontColor(0xd84642).margin(top: 3)
                                }else {
                                     Image(item.icon).width(28).height(28)
                                    Text(item.title).fontSize(15).fontColor(Color.GRAY).margin(top: 3)
                                 }
                            }
                        .onClick({evet =&gt; this.currenttabIndex = index;this.controller.changeIndex(Int32(this.currenttabIndex))})
            })
        }
        .width(100.percent)
        .height(60)
        .alignItems(VerticalAlign.Center)
        .justifyContent(FlexAlign.SpaceAround)
    }
}</code></pre>
</div>
<p data-id="p838747a-XF2cypcY">&nbsp;#HarmonyOS语言##仓颉##购物#&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.06501820290046297" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-27 09:35">2025-05-27 09:35</span>&nbsp;
<a href="https://www.cnblogs.com/youlanjihua">幽蓝计划</a>&nbsp;
阅读(<span id="post_view_count">42</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18898005);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18898005', targetLink: 'https://www.cnblogs.com/youlanjihua/p/18898005', title: '鸿蒙仓颉开发语言实战教程：自定义组件' })">举报</a>
</div>
        
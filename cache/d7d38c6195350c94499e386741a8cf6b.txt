
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yanshajiuzhou/p/18675941" title="发布于 2025-01-16 23:45">
    <span role="heading" aria-level="2">迭代器模式</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        迭代器就是提供一种方法顺序访问一个聚合对象中的各个元素，而又不需要暴露该对象的内部表示。迭代器模式的主要思想是将集合的遍历行为抽取为单独的迭代器对象。
    </div>
<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span id="cke_bm_543S">迭代器（Iterator）模式属于<strong>行为型</strong>模式的一种。</span></p>
<p>迭代器就是提供一种方法<strong>顺序访问</strong>一个聚合对象中的各个元素，而又不需要暴露该对象的内部表示。</p>
<p>在 Java 中，迭代器模式最常见的实现就是 <strong>java.util.Iterator</strong> 接口。我们经常在Java的集合类中使用的&nbsp;<strong>Iterator&nbsp;</strong>遍历，就是使用的迭代器模式。<strong>java.util.Enumeration</strong> 接口，<strong>java.util.ListIterator</strong> 接口都是迭代器模式的应用。<strong>java.util.ListIterator</strong> 接口是 <strong>Iterator</strong> 的增强版，支持双向遍历（hasPrevious()、previous()）。</p>
<p>迭代器模式使调用者总是以<strong>相同接口遍历不同类型</strong>的集合，又保证了调用者对集合内部的数据结构一无所知。这种方式不仅对客户端来说非常方便，&nbsp;而且能避免客户端在直接与集合交互时执行错误或有害的操作，从而起到保护集合的作用。</p>
<p>迭代器模式的主要思想是将集合的遍历行为抽取为单独的迭代器对象。</p>
<p>迭代器模式通常有以下组成部分：&nbsp;</p>
<ul>
<li>Iterator（迭代器接口）：定义访问和遍历元素的方法。</li>
<li>ConcreteIterator（具体迭代器）：实现 Iterator 接口，负责具体集合的遍历逻辑，记录遍历的位置。</li>
<li>Aggregate（聚合接口）：定义创建迭代器的方法。</li>
<li>ConcreteAggregate（具体聚合类）：实现 Aggregate 接口，提供具体集合的数据存储，并返回相应的迭代器实例。</li>
<li>客户端（Client）：使用自定义集合和迭代器。</li>
</ul>
<p>我们创建一个简单的自定义集合类 MyCollection，以及对应的迭代器。</p>
<p>1、迭代器接口</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="3" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%8E%A5%E5%8F%A3%5Cninterface%20Iterator%3CT%3E%20%7B%5Cn%20%20%20%20boolean%20hasNext()%3B%20%2F%2F%20%E6%98%AF%E5%90%A6%E8%BF%98%E6%9C%89%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0%5Cn%20%20%20%20T%20next()%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// 迭代器接口
<span class="hljs-keyword">interface <span class="hljs-title class_">Iterator&lt;T&gt; {
    <span class="hljs-type">boolean <span class="hljs-title function_">hasNext<span class="hljs-params">(); <span class="hljs-comment">// 是否还有下一个元素
    T <span class="hljs-title function_">next<span class="hljs-params">();          <span class="hljs-comment">// 获取下一个元素
}</span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202501/1171560-20250116234509261-2013156858.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>2、聚合接口</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="2" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20%E8%81%9A%E5%90%88%E6%8E%A5%E5%8F%A3%5Cninterface%20Aggregate%3CT%3E%20%7B%5Cn%20%20%20%20Iterator%3CT%3E%20createIterator()%3B%20%2F%2F%20%E5%88%9B%E5%BB%BA%E8%BF%AD%E4%BB%A3%E5%99%A8%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// 聚合接口
<span class="hljs-keyword">interface <span class="hljs-title class_">Aggregate&lt;T&gt; {
    Iterator&lt;T&gt; <span class="hljs-title function_">createIterator<span class="hljs-params">(); <span class="hljs-comment">// 创建迭代器
}</span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202501/1171560-20250116234509261-2013156858.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>3、自定义集合类，类中定义了迭代器内部类</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="1" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22%2F%2F%20%E8%87%AA%E5%AE%9A%E4%B9%89%E9%9B%86%E5%90%88%E7%B1%BB%5Cnclass%20MyCollection%3CT%3E%20implements%20Aggregate%3CT%3E%20%7B%5Cn%20%20%20%20private%20T%5B%5D%20items%3B%20%20%2F%2F%20%E5%AD%98%E5%82%A8%E5%85%83%E7%B4%A0%E7%9A%84%E6%95%B0%E7%BB%84%5Cn%20%20%20%20private%20int%20size%3B%20%20%20%2F%2F%20%E5%BD%93%E5%89%8D%E9%9B%86%E5%90%88%E5%A4%A7%E5%B0%8F%5Cn%5Cn%20%20%20%20%40SuppressWarnings(%5C%22unchecked%5C%22)%5Cn%20%20%20%20public%20MyCollection(int%20capacity)%20%7B%5Cn%20%20%20%20%20%20%20%20items%20%3D%20(T%5B%5D)%20new%20Object%5Bcapacity%5D%3B%5Cn%20%20%20%20%20%20%20%20size%20%3D%200%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20void%20add(T%20item)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(size%20%3C%20items.length)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20items%5Bsize%2B%2B%5D%20%3D%20item%3B%5Cn%20%20%20%20%20%20%20%20%7D%20else%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20IllegalStateException(%5C%22Collection%20is%20full%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20int%20size()%20%7B%5Cn%20%20%20%20%20%20%20%20return%20size%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20public%20T%20get(int%20index)%20%7B%5Cn%20%20%20%20%20%20%20%20if%20(index%20%3E%3D%200%20%26%26%20index%20%3C%20size)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20items%5Bindex%5D%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20throw%20new%20IndexOutOfBoundsException(%5C%22Index%20out%20of%20bounds%5C%22)%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E8%BF%AD%E4%BB%A3%E5%99%A8%5Cn%20%20%20%20%40Override%5Cn%20%20%20%20public%20Iterator%3CT%3E%20createIterator()%20%7B%5Cn%20%20%20%20%20%20%20%20return%20new%20MyCollectionIterator()%3B%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%2F%2F%20%E5%86%85%E9%83%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%B1%BB%5Cn%20%20%20%20private%20class%20MyCollectionIterator%20implements%20Iterator%3CT%3E%20%7B%5Cn%20%20%20%20%20%20%20%20private%20int%20currentIndex%20%3D%200%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%40Override%5Cn%20%20%20%20%20%20%20%20public%20boolean%20hasNext()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20currentIndex%20%3C%20size%3B%20%2F%2F%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E8%BF%98%E6%9C%89%E5%85%83%E7%B4%A0%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%40Override%5Cn%20%20%20%20%20%20%20%20public%20T%20next()%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20if%20(hasNext())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20items%5BcurrentIndex%2B%2B%5D%3B%20%2F%2F%20%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E5%85%83%E7%B4%A0%E5%B9%B6%E7%A7%BB%E5%8A%A8%E6%8C%87%E9%92%88%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20IllegalStateException(%5C%22No%20more%20elements%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-comment">// 自定义集合类
<span class="hljs-keyword">class <span class="hljs-title class_">MyCollection&lt;T&gt; <span class="hljs-keyword">implements <span class="hljs-title class_">Aggregate&lt;T&gt; {
    <span class="hljs-keyword">private T[] items;  <span class="hljs-comment">// 存储元素的数组
    <span class="hljs-keyword">private <span class="hljs-type">int size;   <span class="hljs-comment">// 当前集合大小

    <span class="hljs-meta">@SuppressWarnings("unchecked")
    <span class="hljs-keyword">public <span class="hljs-title function_">MyCollection<span class="hljs-params">(<span class="hljs-type">int capacity) {
        items = (T[]) <span class="hljs-keyword">new <span class="hljs-title class_">Object[capacity];
        size = <span class="hljs-number">0;
    }

    <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title function_">add<span class="hljs-params">(T item) {
        <span class="hljs-keyword">if (size &lt; items.length) {
            items[size++] = item;
        } <span class="hljs-keyword">else {
            <span class="hljs-keyword">throw <span class="hljs-keyword">new <span class="hljs-title class_">IllegalStateException(<span class="hljs-string">"Collection is full");
        }
    }

    <span class="hljs-keyword">public <span class="hljs-type">int <span class="hljs-title function_">size<span class="hljs-params">() {
        <span class="hljs-keyword">return size;
    }

    <span class="hljs-keyword">public T <span class="hljs-title function_">get<span class="hljs-params">(<span class="hljs-type">int index) {
        <span class="hljs-keyword">if (index &gt;= <span class="hljs-number">0 &amp;&amp; index &lt; size) {
            <span class="hljs-keyword">return items[index];
        }
        <span class="hljs-keyword">throw <span class="hljs-keyword">new <span class="hljs-title class_">IndexOutOfBoundsException(<span class="hljs-string">"Index out of bounds");
    }

    <span class="hljs-comment">// 返回一个迭代器
    <span class="hljs-meta">@Override
    <span class="hljs-keyword">public Iterator&lt;T&gt; <span class="hljs-title function_">createIterator<span class="hljs-params">() {
        <span class="hljs-keyword">return <span class="hljs-keyword">new <span class="hljs-title class_">MyCollectionIterator();
    }

    <span class="hljs-comment">// 内部迭代器类
    <span class="hljs-keyword">private <span class="hljs-keyword">class <span class="hljs-title class_">MyCollectionIterator <span class="hljs-keyword">implements <span class="hljs-title class_">Iterator&lt;T&gt; {
        <span class="hljs-keyword">private <span class="hljs-type">int <span class="hljs-variable">currentIndex <span class="hljs-operator">= <span class="hljs-number">0;

        <span class="hljs-meta">@Override
        <span class="hljs-keyword">public <span class="hljs-type">boolean <span class="hljs-title function_">hasNext<span class="hljs-params">() {
            <span class="hljs-keyword">return currentIndex &lt; size; <span class="hljs-comment">// 判断是否还有元素
        }

        <span class="hljs-meta">@Override
        <span class="hljs-keyword">public T <span class="hljs-title function_">next<span class="hljs-params">() {
            <span class="hljs-keyword">if (hasNext()) {
                <span class="hljs-keyword">return items[currentIndex++]; <span class="hljs-comment">// 返回当前元素并移动指针
            }
            <span class="hljs-keyword">throw <span class="hljs-keyword">new <span class="hljs-title class_">IllegalStateException(<span class="hljs-string">"No more elements");
        }
    }
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202501/1171560-20250116234509261-2013156858.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>4、客户端</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="0" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22lang%22%3A%22java%22%2C%22code%22%3A%22public%20class%20IteratorPatternDemo%20%7B%5Cn%20%20%20%20public%20static%20void%20main(String%5B%5D%20args)%20%7B%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%5Cn%20%20%20%20%20%20%20%20MyCollection%3CString%3E%20collection%20%3D%20new%20MyCollection%3C%3E(5)%3B%5Cn%20%20%20%20%20%20%20%20collection.add(%5C%22A%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20collection.add(%5C%22B%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20collection.add(%5C%22C%5C%22)%3B%5Cn%20%20%20%20%20%20%20%20collection.add(%5C%22D%5C%22)%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96%E9%9B%86%E5%90%88%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8%5Cn%20%20%20%20%20%20%20%20Iterator%3CString%3E%20iterator%20%3D%20collection.createIterator()%3B%5Cn%5Cn%20%20%20%20%20%20%20%20%2F%2F%20%E4%BD%BF%E7%94%A8%E8%BF%AD%E4%BB%A3%E5%99%A8%E9%81%8D%E5%8E%86%E9%9B%86%E5%90%88%5Cn%20%20%20%20%20%20%20%20while%20(iterator.hasNext())%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20System.out.println(iterator.next())%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%5Cn%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="language-java hljs"><span class="hljs-keyword">public <span class="hljs-keyword">class <span class="hljs-title class_">IteratorPatternDemo {
    <span class="hljs-keyword">public <span class="hljs-keyword">static <span class="hljs-keyword">void <span class="hljs-title function_">main<span class="hljs-params">(String[] args) {
        <span class="hljs-comment">// 创建一个集合
        MyCollection&lt;String&gt; collection = <span class="hljs-keyword">new <span class="hljs-title class_">MyCollection&lt;&gt;(<span class="hljs-number">5);
        collection.add(<span class="hljs-string">"A");
        collection.add(<span class="hljs-string">"B");
        collection.add(<span class="hljs-string">"C");
        collection.add(<span class="hljs-string">"D");

        <span class="hljs-comment">// 获取集合的迭代器
        Iterator&lt;String&gt; iterator = collection.createIterator();

        <span class="hljs-comment">// 使用迭代器遍历集合
        <span class="hljs-keyword">while (iterator.hasNext()) {
            System.out.println(iterator.next());
        }
    }
}
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<span class="cke_reset cke_widget_drag_handler_container"><img src="https://img2024.cnblogs.com/blog/1171560/202501/1171560-20250116234509261-2013156858.gif" width="15" height="15" class="cke_reset cke_widget_drag_handler" title="点击并拖拽以移动" data-cke-widget-drag-handler="1"></span></div>
<p>迭代器模式的<strong>优缺点。</strong></p>
<p>优点：</p>
<ul>
<li>统一遍历接口：通过迭代器，可以使用统一的方式遍历不同集合。</li>
<li>隐藏集合内部结构：调用者无需了解集合的实现细节，只需通过迭代器访问元素。</li>
<li>解耦集合与遍历算法：迭代器封装了遍历逻辑，集合类只负责存储数据。</li>
</ul>
<p>缺点：</p>
<ul>
<li>如果集合很大，创建迭代器可能会增加额外的开销。</li>
<li>对于简单集合，使用迭代器可能显得复杂。</li>
</ul>
<p>我们可以使用<strong>迭代器模式</strong>来遍历<strong>组合模式</strong>树。</p>
<p>迭代器模式是一种非常实用的设计模式，它解耦了集合对象的存储与访问逻辑，在 Java 中被广泛应用。通过迭代器，程序可以以一种简单而一致的方式操作各种集合对象，而无需关心它们的内部实现。</p>
<p style="text-align: right"><span style="color: rgba(0, 204, 255, 1)">人生有时真的很残酷，就像在流沙里奔跑，任何一点风吹草动，都足以击垮我们的沙城。-- 烟沙九洲</span></p>
<span data-cke-copybin-start="1"><span data-cke-copybin-end="1">​</span></span>
<div>
<div style="position: fixed; right: 0; top: 0; width: 18px; height: 100%; z-index: 99999; pointer-events: none; background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAKeCAYAAACoI0vdAAAAAXNSR0IArs4c6QAAAeFJREFUeF7t0qENAAAIBDHYf2lGqEEe+oJofufp9unP9MiSGWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwEU7ysgCLtpRRhZw0Y4ysoCLdpSRBVy0o4ws4KIdZWQBF+0oIwu4aEcZWcBFO8rIAi7aUUYWcNGOMrKAi3aUkQVctKOMLOCiHWVkARftKCMLuGhHGVnARTvKyAIu2lFGFnDRjjKygIt2lJEFXLSjjCzgoh1lZAEX7SgjC7hoRxlZwMUBMJwCnyNbHuwAAAAASUVORK5CYII=&quot;); background-size: 100% 100%; background-repeat: no-repeat">&nbsp;</div>
<button class="move-button" style="position: fixed; right: 18px; left: auto; top: 50%; z-index: 99999; display: none">◀</button></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.6901587990081018" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-16 23:45">2025-01-16 23:45</span>&nbsp;
<a href="https://www.cnblogs.com/yanshajiuzhou">烟沙九洲</a>&nbsp;
阅读(<span id="post_view_count">62</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18675941" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18675941);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18675941', targetLink: 'https://www.cnblogs.com/yanshajiuzhou/p/18675941', title: '迭代器模式' })">举报</a>
</div>
        
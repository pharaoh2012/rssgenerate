
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tiandi/p/18649963" title="发布于 2025-01-03 13:27">
    <span role="heading" aria-level="2">大华视频监控对接</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>几种不同方案的兼容性表：</p>
<p><a href="https://open-icc.dahuatech.com/#/videoDoc/integration_web" target="_blank" rel="noopener nofollow">https://open-icc.dahuatech.com/#/videoDoc/integration_web</a></p>
<p>推荐使用：<span style="background-color: rgba(255, 255, 0, 1)"><strong>WSPlayer无插件播放器</strong></span></p>
<p>wsplayer播放器demo下载地址：</p>
<p><a href="https://open-icc.dahuatech.com/#/download?currentTab=4" target="_blank" rel="noopener nofollow">https://open-icc.dahuatech.com/#/download?currentTab=4</a></p>
<p><img src="https://img2024.cnblogs.com/blog/237138/202501/237138-20250103131757194-2049390372.png" alt="" loading="lazy"></p>
<p>&nbsp;下载压缩包里面有一个对接文档，按对接文档的说明，因为跨域的问题，因此需要弄后台接口代理代理大华接口服务。</p>
<p><img src="https://img2024.cnblogs.com/blog/237138/202501/237138-20250103131922429-1722471090.png" alt="" loading="lazy"></p>
<p>&nbsp;下面是API文档的网页地址：</p>
<p><a href="https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fevo-oauth%2FuserPass.html&amp;version=enterprisebase/5.0.16&amp;blank=true" target="_blank" rel="noopener nofollow">https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fevo-oauth%2FuserPass.html&amp;version=enterprisebase/5.0.16&amp;blank=true</a></p>
<p>&nbsp;关于后台接口的转发代理，不用自己写，大华给了java示例代码(c++的也有)，可以直接调用：</p>
<p><a href="https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fcommon%2Fquickstart.html%23%E9%89%B4%E6%9D%83%E8%AE%A4%E8%AF%81&amp;version=enterprisebase/5.0.16&amp;blank=true" target="_blank" rel="noopener nofollow">https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fcommon%2Fquickstart.html%23%E9%89%B4%E6%9D%83%E8%AE%A4%E8%AF%81&amp;version=enterprisebase/5.0.16&amp;blank=true</a></p>
<p><img src="https://img2024.cnblogs.com/blog/237138/202501/237138-20250103132231994-921965948.png" alt="" loading="lazy"></p>
<p>将示例java代码移植到项目后台中去，然后配置大华平台服务的ip、端口、key等信息即可。</p>
<p>&nbsp;只有调用部分是自己写的，代码如下：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> org.jeecg.modules.pollute.controller;


</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.alibaba.fastjson.JSONObject;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.demo.brm.device.DeviceDemo;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.demo.video.ptzControl.PtzControlDemo;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.demo.video.realTimePreview.RealTimePreviewDemo;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.demo.video.videoReplay.VideoReplayDemo;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.brm.device.ChannelPageRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.brm.device.ChannelPageResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.brm.device.DeviceTreeRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.brm.device.DeviceTreeResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.ptzControl.OperateCameraRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.ptzControl.OperateCameraResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.ptzControl.OperateDirectRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.ptzControl.OperateDirectResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.realTimePreview.RtspUrlRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.realTimePreview.RtspUrlResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.videoReplay.PlayBackByTimeResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.videoReplay.PlaybackByTimeRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.videoReplay.RegularVideoRecordRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.dahuatech.icc.model.video.videoReplay.RegularVideoRecordResponse;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> io.swagger.annotations.Api;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> io.swagger.annotations.ApiOperation;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> lombok.extern.slf4j.Slf4j;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.beans.factory.annotation.Autowired;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.RequestBody;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.RequestMapping;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.RequestMethod;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> org.springframework.web.bind.annotation.RestController;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> javax.servlet.http.HttpServletRequest;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> java.util.Arrays;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * 鉴权的获取公钥和认证这2个接口不用显示调用，会自动执行。无需关心token有效时间，保活等
 *
 * @Author dengjie
 * </span><span style="color: rgba(128, 128, 128, 1)">@since</span><span style="color: rgba(0, 128, 0, 1)"> 2020-01-20
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span><span style="color: rgba(0, 0, 0, 1)">
@Slf4j
@Api(tags</span>="大华视频接口"<span style="color: rgba(0, 0, 0, 1)">)
@RestController
@RequestMapping(</span>"/pollute/dahuatech"<span style="color: rgba(0, 0, 0, 1)">)
</span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> DahuatechController
{
    @Autowired
    </span><span style="color: rgba(0, 0, 255, 1)">private</span><span style="color: rgba(0, 0, 0, 1)"> HttpServletRequest request;

    @ApiOperation(value</span>="设备树查询", notes="设备树查询"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/getDeviceTree", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> DeviceTreeResponse getDeviceTree(@RequestBody DeviceTreeRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> DeviceDemo.getDeviceTree(obj);
    }
    
    @ApiOperation(value</span>="设备通道分页查询", notes="设备通道分页查询"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/getChannelPage", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> ChannelPageResponse getChannelPage(@RequestBody ChannelPageRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> DeviceDemo.getChannelPage(obj);
    }

    @ApiOperation(value</span>="实时-获取视频流", notes="实时-获取视频流"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/StartVideo", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> RtspUrlResponse StartVideo(@RequestBody RtspUrlRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> RealTimePreviewDemo.getRtspUrl(obj);
    }

    @ApiOperation(value</span>="回放-获取录像文件", notes="回放-获取录像文件"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/QueryRecords", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> RegularVideoRecordResponse QueryRecords(@RequestBody RegularVideoRecordRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> VideoReplayDemo.getRegularVideoRecords(obj);
    }

    @ApiOperation(value</span>="回放-获取视频流", notes="回放-获取视频流"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/StartPlaybackByTime", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> PlayBackByTimeResponse StartPlaybackByTime(@RequestBody PlaybackByTimeRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> VideoReplayDemo.getPlaybackByTimeRtspUrl(obj);
    }

    @ApiOperation(value</span>="云台-方向控制", notes="云台-方向控制"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/OperateDirect", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> OperateDirectResponse OperateDirect(@RequestBody OperateDirectRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> PtzControlDemo.operateDirect(obj);
    }

    @ApiOperation(value</span>="云台-镜头控制", notes="云台-镜头控制"<span style="color: rgba(0, 0, 0, 1)">)
    @RequestMapping(value </span>= "/OperateCamera", method =<span style="color: rgba(0, 0, 0, 1)"> RequestMethod.POST)
    </span><span style="color: rgba(0, 0, 255, 1)">public</span><span style="color: rgba(0, 0, 0, 1)"> OperateCameraResponse OperateCamera(@RequestBody OperateCameraRequest obj)
    {
        </span><span style="color: rgba(0, 0, 255, 1)">return</span><span style="color: rgba(0, 0, 0, 1)"> PtzControlDemo.operateCamera(obj);
    }
}</span></pre>
</div>
<p>总结一下和海康平台的区别：</p>
<p>海康：需要插件、不需要后台服务代理</p>
<p>大华：不需要插件，需要后台服务代理</p>
<p>&nbsp;</p>
<p>最后申请<strong>clientId和</strong><strong>clientSecret</strong>凭证的方法和步骤详见下面页面说明：</p>
<p><a href="https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fcommon%2Fquickstart.html%23%E5%87%86%E5%A4%87ICC%E7%8E%AF%E5%A2%83&amp;version=enterprisebase/5.0.16&amp;blank=true" target="_blank" rel="noopener nofollow">https://open-icc.dahuatech.com/#/home?url=%3Fnav%3Dwiki%2Fcommon%2Fquickstart.html%23%E5%87%86%E5%A4%87ICC%E7%8E%AF%E5%A2%83&amp;version=enterprisebase/5.0.16&amp;blank=true</a></p>
</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.6824253125266204" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-03 13:50">2025-01-03 13:27</span>&nbsp;
<a href="https://www.cnblogs.com/tiandi">JackGIS</a>&nbsp;
阅读(<span id="post_view_count">374</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18649963" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18649963);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18649963', targetLink: 'https://www.cnblogs.com/tiandi/p/18649963', title: '大华视频监控对接' })">举报</a>
</div>
	
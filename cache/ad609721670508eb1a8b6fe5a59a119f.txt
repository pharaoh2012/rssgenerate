
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/moegarn/p/18815128" title="发布于 2025-04-08 17:39">
    <span role="heading" aria-level="2">有效解决winform更改图标后失效的问题</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 18px; color: rgba(255, 0, 0, 1)">win10系统 亲测有效！</span></p>
<p><span style="font-size: 18px">批处理清除图标缓存数据库</span><br><span style="font-size: 18px">如果上面两个方法都无法解决问题，那就试试更暴力的批处理吧。</span></p>
<p><span style="font-size: 18px">这段批处理文件会删除 IconCache.db 文件，同时还清理 thumbcache.db 文件和注册表中的 IconStreams、PastIconsStream 两个值。清理速度很快，除了会重启一下资源管理器外没有副作用。</span></p>
<p><span style="font-size: 18px">打开记事本，将下面这段代码复制到记事本中，保存为 图标缓存清理.bat 文件，双击打开即可。</span></p>
<div class="cnblogs_Highlighter">
<pre class="brush:bash;gutter:true;">rem 关闭Windows外壳程序explorer

taskkill /f /im explorer.exe

rem 清理系统图标缓存数据库

attrib -h -s -r "%userprofile%\AppData\Local\IconCache.db"

del /f "%userprofile%\AppData\Local\IconCache.db"

attrib /s /d -h -s -r "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\*"

del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_32.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_96.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_102.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_256.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_1024.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_idx.db"
del /f "%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_sr.db"

rem 清理 系统托盘记忆的图标

echo y|reg delete "HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify" /v IconStreams
echo y|reg delete "HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify" /v PastIconsStream

rem 重启Windows外壳程序explorer

start explorer
</pre>
</div>
<p><span style="font-size: 18px">（这段代码在网上广为流传，最初作者已经不可考。）</span></p>
<p><span style="font-size: 18px">如果上面这三种方法还是没能解决图标问题，说明问题已经超出了「图标缓存」的范畴，需要考虑其他方面的影响（比如软件安装错误、软件图标丢失等）。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br>————————————————</p>
<p>                            版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。<br>                        <br>原文链接：https://blog.csdn.net/BlueCapt/article/details/141917615</p>
</div>
<div id="MySignature" role="contentinfo">
    【敬畏能量  敬畏自然】
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.4418601684398148" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-08 17:40">2025-04-08 17:39</span>&nbsp;
<a href="https://www.cnblogs.com/moegarn">MOEGARN游戏工作室</a>&nbsp;
阅读(<span id="post_view_count">9</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18815128" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18815128);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18815128', targetLink: 'https://www.cnblogs.com/moegarn/p/18815128', title: '有效解决winform更改图标后失效的问题' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Javaer1995/p/18590450" title="发布于 2025-06-08 20:25">
    <span role="heading" aria-level="2">CentOS-7 通过 NFS 实现服务器之间的文件（目录）共享</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1概述">1、概述</h2>
<p>NFS（Network File System）：是在 UNIX（Linux）系统中最流行的网络文件系统，其功能是通过网络让不同的机器（或操作系统）可以共享彼此的文件或目录。</p>
<h2 id="2相关依赖组件">2、相关依赖组件</h2>
<p>在使用 NFS 之前，服务端（提供共享文件或目录的一方）和客户端（使用共享文件或目录的一方）都需要先安装 rpcbind 和 nfs-utils 依赖组件。</p>
<h3 id="21确认已安装rpcbind">2.1、确认已安装rpcbind</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209145342368-2022059563.png" alt="image" loading="lazy"></p>
<pre><code>rpm -qa | grep rpcbind
</code></pre>
<p>如果还没安装 rpcbind 依赖组件，请参考 <a href="https://www.cnblogs.com/Javaer1995/p/18594459" title="CentOS-7离线安装rpcbind" target="_blank">CentOS-7离线安装rpcbind</a> 。</p>
<h3 id="22确认已安装nfs-utils">2.2、确认已安装nfs-utils</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209145506644-1686261936.png" alt="image" loading="lazy"></p>
<pre><code>rpm -qa | grep nfs-utils
</code></pre>
<p>如果还没安装 nfs-utils 依赖组件，请参考 <a href="https://www.cnblogs.com/Javaer1995/p/18590241" title="CentOS-7离线安装nfs-utils" target="_blank">CentOS-7离线安装nfs-utils</a> 。</p>
<blockquote>
<p>注意：在安装 nfs-utils 依赖组件之前，必须先安装 rpcbind 依赖组件；一般来说，CentOS-7 已默认安装 rpcbind 依赖组件，只需要 nfs-utils 依赖组件即可。</p>
</blockquote>
<h2 id="3服务端操作">3、服务端操作</h2>
<h3 id="31创建共享目录">3.1、创建共享目录</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209151511905-1212243546.png" alt="image" loading="lazy"></p>
<p>如上图所示，（本例）在服务端（提供共享文件或目录的一方）的根目录“/”，创建了一个目录，用于和客户端共享。</p>
<pre><code>mkdir 共享目录名称
</code></pre>
<h3 id="32编辑配置文件">3.2、编辑配置文件</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209152729224-953648402.png" alt="image" loading="lazy"></p>
<pre><code>vi /etc/exports
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209153428473-1054302510.png" alt="image" loading="lazy"></p>
<pre><code>共享目录路径 *(rw,no_root_squash,insecure,sync)
</code></pre>
<blockquote>
<p>注意：如果需要进行网段限制，“*”改为对应网段，例如：<br>
共享目录路径 192.168.56.0/24(rw,no_root_squash,insecure,sync)</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>rw</td>
<td>共享目录的访问权限为可读可写（read-write），实际权限还和文件系统的 rwx 权限以及用户身份有关</td>
</tr>
<tr>
<td>ro</td>
<td>共享目录的访问权限为只读（read-only）</td>
</tr>
<tr>
<td>no_root_squash</td>
<td>允许客户端以 root 身份访问共享目录</td>
</tr>
<tr>
<td>root_squash</td>
<td>客户端的 root 身份会被切换成和 anonymous 匿名用户身份一样的权限</td>
</tr>
<tr>
<td>insecure</td>
<td>允许 nfs 服务使用比 1024 更大的端口号</td>
</tr>
<tr>
<td>secure</td>
<td>nfs 服务只能使用 1024 以内的端口号</td>
</tr>
<tr>
<td>sync</td>
<td>数据同步写入到内存与硬盘中</td>
</tr>
<tr>
<td>async</td>
<td>数据先暂存在内存当中，不直接写入硬盘</td>
</tr>
</tbody>
</table>
<h3 id="33确认rpcbind服务已开启">3.3、确认rpcbind服务已开启</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202501/2052479-20250110165451464-1753299205.png" alt="image" loading="lazy"></p>
<pre><code>systemctl status rpcbind
</code></pre>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>systemctl status rpcbind</td>
<td>查看 rpcbind 服务运行状态</td>
</tr>
<tr>
<td>systemctl start rpcbind</td>
<td>启动 rpcbind 服务</td>
</tr>
<tr>
<td>systemctl restart rpcbind</td>
<td>重启 rpcbind 服务</td>
</tr>
<tr>
<td>systemctl enable rpcbind</td>
<td>设置 rpcbind 服务开机自启动</td>
</tr>
</tbody>
</table>
<h3 id="34重启nfs服务">3.4、重启nfs服务</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209154359039-759372190.png" alt="image" loading="lazy"></p>
<pre><code>systemctl restart nfs
</code></pre>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>systemctl status nfs</td>
<td>查看 nfs 服务运行状态</td>
</tr>
<tr>
<td>systemctl start nfs</td>
<td>启动 nfs 服务</td>
</tr>
<tr>
<td>systemctl restart nfs</td>
<td>重启 nfs 服务</td>
</tr>
<tr>
<td>systemctl enable nfs</td>
<td>设置 nfs 服务开机自启动</td>
</tr>
</tbody>
</table>
<h3 id="35开启防火墙">3.5、开启防火墙</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209154701627-1022138241.png" alt="image" loading="lazy"></p>
<pre><code>firewall-cmd --add-service=nfs --permanent
</code></pre>
<pre><code>firewall-cmd --reload
</code></pre>
<h3 id="36相关监测命令">3.6、相关监测命令</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>nfsstat</td>
<td>查看NFS的运行状态</td>
</tr>
<tr>
<td>rpcinfo</td>
<td>查看rpc执行信息，可以用于检测rpc运行情况的工具，利用rpcinfo -p 可查看出RPC开启的端口所提供的程序</td>
</tr>
</tbody>
</table>
<h2 id="4客户端操作">4、客户端操作</h2>
<h3 id="41确认rpcbind服务已开启">4.1、确认rpcbind服务已开启</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202501/2052479-20250110165451464-1753299205.png" alt="image" loading="lazy"></p>
<pre><code>systemctl status rpcbind
</code></pre>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>systemctl status rpcbind</td>
<td>查看 rpcbind 服务运行状态</td>
</tr>
<tr>
<td>systemctl start rpcbind</td>
<td>启动 rpcbind 服务</td>
</tr>
<tr>
<td>systemctl restart rpcbind</td>
<td>重启 rpcbind 服务</td>
</tr>
<tr>
<td>systemctl enable rpcbind</td>
<td>设置 rpcbind 服务开机自启动</td>
</tr>
</tbody>
</table>
<h3 id="42启动nfs服务">4.2、启动nfs服务</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209155215053-1849707968.png" alt="image" loading="lazy"></p>
<pre><code>systemctl start nfs
</code></pre>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>systemctl status nfs</td>
<td>查看 nfs 服务运行状态</td>
</tr>
<tr>
<td>systemctl start nfs</td>
<td>启动 nfs 服务</td>
</tr>
<tr>
<td>systemctl restart nfs</td>
<td>重启 nfs 服务</td>
</tr>
<tr>
<td>systemctl enable nfs</td>
<td>设置 nfs 服务开机自启动</td>
</tr>
</tbody>
</table>
<h3 id="43创建共享目录挂载点">4.3、创建共享目录挂载点</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209155722319-666284272.png" alt="image" loading="lazy"></p>
<p>如上图所示，（本例）在客户端（使用共享文件或目录的一方）的“/root”目录下，创建了一个目录，用于挂载服务端的共享目录。</p>
<pre><code>mkdir 共享目录挂载点名称
</code></pre>
<h3 id="44挂载服务端共享目录">4.4、挂载服务端共享目录</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209160712041-163125146.png" alt="image" loading="lazy"></p>
<pre><code>mount -t nfs 服务端IP地址:/服务端共享目录路径 客户端挂载点路径
</code></pre>
<blockquote>
<p>注意：如果（普通用户）挂载共享目录时报错“mount.nfs: failed to apply fstab options”，则需要使用 sudo 权限执行该挂载命令。</p>
</blockquote>
<h3 id="45确认挂载情况">4.5、确认挂载情况</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209161033319-1631706925.png" alt="image" loading="lazy"></p>
<p>如上图所示，已实现服务器之间的文件（目录）共享。</p>
<pre><code>df -h
</code></pre>
<h3 id="46解除挂载的命令">4.6、解除挂载的命令</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202412/2052479-20241209161359162-231100414.png" alt="image" loading="lazy"></p>
<pre><code>umount 客户端挂载点路径
</code></pre>
<h2 id="本文参考">本文参考</h2>
<p><a href="https://blog.csdn.net/finghting321/article/details/107808116" title="【1】【Word哥】【Linux下NFS服务的安装与配置】【CSDN】【2020-08-05】" target="_blank" rel="noopener nofollow">【1】【Word哥】【Linux下NFS服务的安装与配置】【CSDN】【2020-08-05】</a></p>
<p><a href="https://www.cnblogs.com/jason-huawen/p/16875233.html" title="【2】【Jason_huawen】【NFS文件共享时报错的解决方法】【博客园】【2022-11-09】" target="_blank">【2】【Jason_huawen】【NFS文件共享时报错的解决方法】【博客园】【2022-11-09】</a></p>
<p><a href="https://www.cnblogs.com/Dr-wei/p/15972364.html" title="【3】【我真的啥也不会】【NFS配置及开机自动挂载】【博客园】【2022-03-06】" target="_blank">【3】【我真的啥也不会】【NFS配置及开机自动挂载】【博客园】【2022-03-06】</a></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/Javaer1995/" target="_blank">Javaer1995</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/Javaer1995/p/18590450" target="_blank">https://www.cnblogs.com/Javaer1995/p/18590450</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.535636818957176" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-08 20:25">2025-06-08 20:25</span>&nbsp;
<a href="https://www.cnblogs.com/Javaer1995">Javaer1995</a>&nbsp;
阅读(<span id="post_view_count">35</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18590450);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18590450', targetLink: 'https://www.cnblogs.com/Javaer1995/p/18590450', title: 'CentOS-7 通过 NFS 实现服务器之间的文件（目录）共享' })">举报</a>
</div>
        
<!----> <meta itemprop="headline" content="è·Ÿç€ Vueå›¢é˜Ÿå¤§ä½¬å­¦ä¹ åœ¨ Vue3 ä¸­äºŒæ¬¡å°è£…ç»„ä»¶"> <meta itemprop="keywords" content="å‰ç«¯"> <meta itemprop="datePublished" content="2025-06-15T18:06:31.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™³ä½æ°”"> <meta itemprop="url" content="https://juejin.cn/user/4195392104437758"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·Ÿç€ Vueå›¢é˜Ÿå¤§ä½¬å­¦ä¹ åœ¨ Vue3 ä¸­äºŒæ¬¡å°è£…ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392104437758/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™³ä½æ°”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-06-15T18:06:31.000Z" title="Sun Jun 15 2025 18:06:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-06-15
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""></circle></svg> <span class="views-count" data-v-61fb5e44="">
                    4,015
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""></path></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><h2 data-id="heading-0">å‚è€ƒè§†é¢‘ï¼š</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Kz421e7K1" target="_blank" title="https://www.bilibili.com/video/BV1Kz421e7K1" ref="nofollow noopener noreferrer">ã€Šç»„ä»¶äºŒæ¬¡å°è£…æ—¶ä¸ä¸€æ ·çš„æ’æ§½ä¼ é€’æ–¹å¼ã€‹ Bç«™è§†é¢‘ - è¿œæ–¹os</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1soMtz4ExE" target="_blank" title="https://www.bilibili.com/video/BV1soMtz4ExE" ref="nofollow noopener noreferrer">ã€Šç»„ä»¶äºŒæ¬¡å°è£…-ç»ˆæç‰ˆã€‹ Bç«™è§†é¢‘ - è¿œæ–¹os</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV166421Z7nU" target="_blank" title="https://www.bilibili.com/video/BV166421Z7nU" ref="nofollow noopener noreferrer">ã€Šhå‡½æ•°çš„ä½¿ç”¨ã€‹ Bç«™è§†é¢‘ - è¿œæ–¹os</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Zm421V7rm" target="_blank" title="https://www.bilibili.com/video/BV1Zm421V7rm" ref="nofollow noopener noreferrer">ã€Šhå‡½æ•°çš„ä½¿ç”¨åœºæ™¯ã€‹ Bç«™è§†é¢‘ - è¿œæ–¹os</a></li>
</ul>
<h2 data-id="heading-1">ä»äºŒæ¬¡å°è£… el-input å¼€å§‹ ğŸ§€</h2>
<h3 data-id="heading-2">è¦è§£å†³çš„é—®é¢˜</h3>
<ol>
<li>props å¦‚ä½•ç©¿é€å‡ºå»ï¼Ÿ</li>
<li>slots å¦‚ä½•ç©¿é€å‡ºå» ï¼Ÿ</li>
<li>ç»„ä»¶çš„æ–¹æ³•å¦‚ä½•æš´éœ²å‡ºå» ï¼Ÿ</li>
<li>å¦‚ä½•è®© ts ç±»å‹å®Œå¤‡ ï¼Ÿ</li>
</ol>
<h3 data-id="heading-3">å¤„ç† props</h3>
<h4 data-id="heading-4">ä¼ é€’ $attrs</h4>
<p>ä¸ºäº†ä¿è¯ç»„ä»¶åŸæœ‰<strong>å±æ€§</strong>å’Œäº‹ä»¶èƒ½è¢«æ­£å¸¸ä¼ é€’ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>mergeProps</code> åˆå¹¶ $attrs å’Œé‡å†™é»˜è®¤å±æ€§æˆ–æ–°å¢ <code>props</code> å¯¹è±¡ï¼Œç»‘å®šåˆ°åŸæœ‰ç»„ä»¶:</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mergeProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">const</span> props = defineProps&lt;<span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">InputProps</span>&gt;&gt;()
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- &lt;el-input v-bind="{...$attrs, ...props}"&gt;&lt;/el-input&gt; --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"mergeProps($attrs, props)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ol>
<li><code>$attrs</code> åŒ…å«æ‰€æœ‰ä¼ å…¥çš„ props å’Œ emit äº‹ä»¶ï¼›</li>
<li>ç›´æ¥ä½¿ç”¨ <code>$attrs</code> æ˜¯æ²¡æœ‰ TS ç±»å‹æç¤ºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å£°æ˜ä¸€ä¸ª <code>props</code>ï¼Œè‡³äº props  ç±»å‹ä¸€èˆ¬ç»„ä»¶åº“éƒ½ä¼šå¯¼å‡ºã€‚</li>
</ol>
<details class="lake-collapse"><summary id="user-content-u0b8f15a4"><strong><span class="ne-text"> â–¶ï¸ ExtractPublicPropTypes ç±»å‹æ˜¯ä»€ä¹ˆä½œç”¨ ï¼Ÿ ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</span></strong></summary><p id="user-content-ua4fd4c16" class="ne-p"><span class="ne-text">å…¶å®ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯¹äº props çš„ TS ç±»å‹å®šä¹‰ï¼Œä¸€å¼€å§‹å…¶å®æˆ‘ä½¿ç”¨çš„æ˜¯ </span><code class="ne-code"><strong><span class="ne-text">Partial&lt;InputProps&gt;</span></strong></code><span class="ne-text"> ï¼ŒæŠŠæ‰€æœ‰å±æ€§éƒ½å˜æˆå¯é€‰ï¼Œè¿™æ ·çˆ¶ç»„ä»¶ä½¿ç”¨æ—¶ç±»å‹æç¤ºæ‰ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸ä¸¥è°¨ï¼Œå¦‚æœç»„ä»¶é‡Œæœ‰ props  å±æ€§æ˜¯å¿…å¡«çš„ï¼Œé‚£å¯èƒ½ä¸ä¼šæœ‰å®Œå¤‡çš„ç±»å‹æç¤ºã€‚</span></p><hr id="user-content-rhfjP" class="ne-hr"><p id="user-content-u02d96422" class="ne-p"><span class="ne-text">å¯¹äº TypeScript å¦‚æœéœ€è¦è·å– Props çš„ç±»å‹ï¼Œé‚£å°±éœ€è¦ç”¨åˆ° Vue çš„ä¸€ä¸ªè¾…åŠ©ç±»å‹</span><code class="ne-code"><strong><span class="ne-text">ExtractPropTypes</span></strong></code><span class="ne-text">ï¼Œè€Œåœ¨ element-plus æºç ä¸­ï¼Œ å¤§éƒ¨åˆ†ç»„ä»¶çš„ props æ˜¯ç”¨ </span><code class="ne-code"><span class="ne-text">ExtractPropTypes&lt;typeof inputProps&gt;</span></code><span class="ne-text"> æŠ½ç¦»çš„ï¼ˆ</span><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felement-plus%2Felement-plus%2Fblob%2Fdev%2Fpackages%2Fcomponents%2Finput%2Fsrc%2Finput.ts%23L171" data-href="https://github.com/element-plus/element-plus/blob/dev/packages/components/input/src/input.ts#L171" target="_blank" class="ne-link" title="https://github.com/element-plus/element-plus/blob/dev/packages/components/input/src/input.ts#L171" ref="nofollow noopener noreferrer"><span class="ne-text">æºç é“¾æ¥ </span><span class="ne-text">ğŸ”—</span></a><span class="ne-text">ï¼‰ã€‚</span></p><hr id="user-content-RuQgZ" class="ne-hr"><p id="user-content-u76edd17a" class="ne-p"><span class="ne-text">è¿™é‡Œæ˜¯æˆ‘ä»¬å±äºäºŒæ¬¡å°è£…ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯å¤–éƒ¨å¼•ç”¨ ï¼ˆçˆ¶ç»„ä»¶ï¼‰ï¼Œå¯¹äºå¤–éƒ¨å¼•ç”¨ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ </span><code class="ne-code"><strong><span class="ne-text">ExtractPublicPropTypes</span></strong></code><span class="ne-text">ã€‚</span></p><p id="user-content-u3e4a1a86" class="ne-p"><span class="ne-text"></span></p><p id="user-content-u6e67bc85" class="ne-p"><strong><span class="ne-text">å‚è€ƒé“¾æ¥
    </span></strong><strong><span class="ne-text">ğŸ”—</span></strong></p><ul class="ne-ul"><li id="user-content-u23cf9a59" data-lake-index-type="0"><span id="user-content-Ro8Wd" class="ne-yuque-inline"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fxianzhe-lce4g%2Fhf5btd%2Fclst4gguzbztig0f%3FsingleDoc%23C94WH" title="https://www.yuque.com/xianzhe-lce4g/hf5btd/clst4gguzbztig0f?singleDoc#C94WH" target="_blank" ref="nofollow noopener noreferrer">ã€ç²¾ã€Vue ç»„ä»¶å¦‚ä½•æ¨¡å—åŒ–æŠ½ç¦»Props</a></span><span class="ne-text"> ï¼ˆå¼ºçƒˆæ¨èé˜…è¯»ï¼‰</span></li><li id="user-content-uf046abb2" data-lake-index-type="0"><span class="ne-text">Vue å®˜æ–¹æ–‡æ¡£ - TypeScript å·¥å…·ç±»å‹ -  </span><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fapi%2Futility-types%23extractpublicproptypes" data-href="https://cn.vuejs.org/api/utility-types#extractpublicproptypes" target="_blank" class="ne-link" title="https://cn.vuejs.org/api/utility-types#extractpublicproptypes" ref="nofollow noopener noreferrer"><span class="ne-text">ExtractPublicPropTypes&lt;T&gt;</span></a></li></ul></details>
<h4 data-id="heading-5">è¦†ç›–é»˜è®¤å€¼</h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>withDefaults</code> ç»™ props  è®¾ç½®é»˜è®¤å€¼ï¼Œä»è€Œè¾¾åˆ°è¦†ç›–åŸç»„ä»¶é»˜è®¤å€¼çš„æ•ˆæœ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mergeProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; {
  <span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ–°å±æ€§ */</span>
}

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(), {
  <span class="hljs-attr">clearable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ”¹å˜el-input clearable é»˜è®¤å€¼</span>
	 <span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„ä¸ºæ–°å±æ€§æ·»åŠ é»˜è®¤å€¼ */</span>
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"mergeProps($attrs, props)"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">å¤„ç† slots</h3>
<h4 data-id="heading-7">å¸¸è§„ç‰ˆæœ¬</h4>
<p>æˆ‘ä»¬ä»¥ element-plus  <a href="https://link.juejin.cn?target=https%3A%2F%2Felement-plus.org%2Fzh-CN%2Fcomponent%2Finput.html" target="_blank" title="https://element-plus.org/zh-CN/component/input.html" ref="nofollow noopener noreferrer">Input è¾“å…¥æ¡†</a> ç»„ä»¶ä¸ºä¾‹ï¼Œä¸ºäº†å‘å­ç»„ä»¶ä¼ é€’æ’æ§½ï¼Œå¸¸è§„çš„åšæ³• , éå† <code>$slots</code>æ¥å®ç°ï¼Œä¸è®ºæ˜¯å°è£…ä»€ä¹ˆç»„ä»¶éƒ½å¯ä»¥æ— è„‘ä½¿ç”¨ <code>v-for v-for="(_, name) in $slots"</code>ï¼Œå³ä½¿ç»„ä»¶æ’æ§½ç›¸äº’æœ‰é€»è¾‘ä¹Ÿä¸ä¼šè¢«å½±å“ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { mergeProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
  
type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; {}
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(),{})

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"mergeProps($attrs, props)"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(_, name) in $slots"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"name"</span> #[<span class="hljs-attr">name</span>]=<span class="hljs-string">"slotProps"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"slotProps"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><code>#[name]="slotProps"</code> ç­‰åŒäº <code>v-slot:[name]="slotProps"</code> ã€‚</p>
<p><strong>å…³äºéå† $slot å†™æ³•é—®é¢˜</strong></p>
<p><code>$slots</code> æ˜¯ä¸ªProxy å¯¹è±¡ï¼Œä¸‹é¢çš„å†™æ³•å‡å¯:</p>
<pre><code class="hljs language-html" lang="html">v-for="(_, name) in $slots"
v-for="(_, name) of $slots"
v-for="(_, name) Object.keys($slots)"
</code></pre>
<p>ç¤ºä¾‹ï¼šåœ¨çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œ å¹¶ä¼ é€’ <code>prepend</code>ã€<code>append</code> æ’æ§½ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ‘¨ çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">YiInput</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"inputRef"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"msg"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">append</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Search</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">suffix</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">User</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">YiInput</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Search</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputInstance</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-keyword">const</span> inputRef = ref&lt;<span class="hljs-title class_">InputInstance</span>&gt;()
<span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello world'</span>)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  inputRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">focus</span>() <span class="hljs-comment">// è‡ªåŠ¨èšç„¦</span>
}, <span class="hljs-number">3000</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">ä½¿ç”¨ h å‡½æ•° ï¼ˆèŠ±æ´»ç‰ˆğŸŒ¸ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
  
type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; {}
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(),{})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"h(ElInput, { ...$attrs, ...props }, $slots)"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-9">ä½¿ç”¨ Vue 3.3+ æ–°å¢åŠ è¾…åŠ©å‡½æ•° ï¼ˆ èŠ±æ´»ç‰ˆ ğŸŒ¸ ï¼‰</h4>
<p>åœ¨ Vue ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥é€šè¿‡ <code>$slots</code> å’Œ <code>$attrs</code> æ¥è®¿é—®å®ƒä»¬ã€  åœ¨ Vue 3.4  ç‰ˆæœ¬ä¹‹åï¼Œå¯ä»¥åˆ†åˆ«ç”¨ <code>useSlots</code> å’Œ <code>useAttrs</code> ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { h, mergeProps, useAttrs, useSlots } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"element-plus"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
  
type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; {}

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(),{})
<span class="hljs-keyword">const</span> attrs = <span class="hljs-title function_">useAttrs</span>()
<span class="hljs-keyword">const</span> slots = <span class="hljs-title function_">useSlots</span>()
<span class="hljs-keyword">const</span> $props = <span class="hljs-title function_">mergeProps</span>(attrs, props)

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"h(ElInput, $props, slots)"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<details class="lake-collapse">
    <summary id="user-content-u57ace913"><strong><span class="ne-text"> â–¶ï¸ component ç»„ä»¶ä¸ºä»€ä¹ˆå¯ä»¥ä¼ å…¥ h å‡½æ•° ï¼Ÿ ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</span></strong></summary><p id="user-content-u9a63dbbe" class="ne-p"><span class="ne-text">h å‡½æ•°ç”¨äºåˆ›å»ºè™šæ‹Ÿ DMO èŠ‚ç‚¹ï¼ˆvnodeï¼‰ï¼Œis å±æ€§æ¥æ”¶åˆ°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¹Ÿå°±æ˜¯</span><code class="ne-code"><span class="ne-text">h(ElInput, $attrs, $slots)</span></code><span class="ne-text"> ï¼Œä¼šç«‹å³æ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ª VNodeï¼Œè¿™ä¸ª VNode æè¿°äº†å¦‚ä½•æ¸²æŸ“ ElInput ç»„ä»¶ã€‚</span></p></details>
<h3 data-id="heading-10">å¤„ç† ref</h3>
<p><strong>é—®é¢˜ï¼š å°è£…æ—¶æ€ä¹ˆå¦‚ä½•å¯¼å‡ºåŸç»„ä»¶å®ä¾‹æ–¹æ³•ï¼Ÿ</strong></p>
<p>åœ¨äºŒæ¬¡å°è£…å­ç»„ä»¶æ—¶ï¼Œä¸ºäº†è®©çˆ¶ç»„ä»¶èƒ½å¤Ÿè·å–å­ç»„ä»¶çš„ refï¼Œ å¹¶èƒ½å¤Ÿè°ƒç”¨ä¸€äº›åŸæœ‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†å­ç»„ä»¶çš„æ–¹æ³•æš´éœ²å‡ºå»ã€‚</p>
<p>å¯¹äºè¿™ä¸ªéœ€æ±‚ï¼Œç½‘ä¸Šæ–¹æ³•äº”èŠ±å…«é—¨ï¼Œä½†æ˜¯åœ¨ Vue3 çš„ setup æ¨¡æ¿ä¸­ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºï¼Œ<strong>å…¶å®å¹¶æ²¡æœ‰ç‰¹åˆ«ä¼˜é›…çš„æ–¹å¼</strong>ã€‚</p>
<h4 data-id="heading-11">1. å‘çˆ¶ç»„ä»¶æš´éœ² ref å‡½æ•°</h4>
<p>æ€è·¯ï¼šåˆ›å»ºä¸€ä¸ª <code>getRef</code> çš„å‡½æ•°ï¼ŒæŠŠ <code>ref</code> æš´éœ²å‡ºå», çˆ¶ç»„ä»¶è°ƒç”¨ <code>getRef</code> æ–¹æ³•ååœ¨æ‰§è¡Œå­ç»„ä»¶æ–¹æ³•çš„è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> inputRef = <span class="hljs-title function_">ref</span>()
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getRef</span> = (<span class="hljs-params"></span>) =&gt; inputRef.<span class="hljs-property">value</span>

<span class="hljs-title function_">defineExpose</span>({ getRef })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"rawRef"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"{...$attrs, ...props}"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">2. ä½¿ç”¨ Proxy ä»£ç†</h4>
<p>å¦ä¸€ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Proxy</code> ä»£ç†æš´éœ²å‡ºå»çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> rawRef = <span class="hljs-title function_">ref</span>()

<span class="hljs-title function_">defineExpose</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({},
    {
      <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">_target, key</span>) =&gt;</span> rawRef.<span class="hljs-property">value</span>?.[key],
      <span class="hljs-comment">// å› ä¸ºä»£ç†çš„æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œç”¨ has åˆ¤æ–­ä¸€ä¸‹ï¼Œè®¿é—®çš„å±æ€§æ˜¯å¦å­˜åœ¨</span>
      <span class="hljs-attr">has</span>: <span class="hljs-function">(<span class="hljs-params">_target, key</span>) =&gt;</span> key <span class="hljs-keyword">in</span> (rawRef.<span class="hljs-property">value</span> || {})
    }
  ) 
)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"rawRef"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"{...$attrs, ...props}"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fhas" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/has" ref="nofollow noopener noreferrer">new Proxy().has | MDN</a></li>
</ul>
<h4 data-id="heading-13">3. ä½¿ç”¨ vm.exposed</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>()
<span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">getCurrentInstance</span>()

<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeRef</span> = (<span class="hljs-params">inputInstance</span>) =&gt; {
	vm!.<span class="hljs-property">exposed</span> = inputInstance || {}
	<span class="hljs-comment">// å…¶å®çˆ¶ç»„ä»¶ä¸æ˜¯ç›´æ¥æ‹¿åˆ°è¿™ä¸ª exposed çš„ï¼Œæ‹¿çš„æ˜¯å­ç»„ä»¶çš„ä»£ç†å¯¹è±¡,</span>
  <span class="hljs-comment">// ä¸èƒ½åªæ”¹å˜ exposed çš„å€¼ï¼Œè¿˜è¦æ”¹å˜ exposeProxy çš„å€¼</span>
	vm!.<span class="hljs-property">exposeProxy</span> = inputInstance || {}
	<span class="hljs-comment">// ä¸Šé¢ä»£ç ä¹Ÿå¯ä»¥ç›´æ¥å†™æˆ: vm!.exposeProxy = vm!.exposed = inputInstance || {}</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"changeRef"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"{...$attrs, ...props}"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>Why ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª defineExpose å¯¼å‡º <code>{ a: 1, b: 2 }</code>ï¼Œç„¶åæ‰“å° <code>vm.exposed</code> å’Œ changeRef æ–¹æ³•ä¸­è¿”å›çš„ <code>value</code> ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { getCurrentInstance } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">getCurrentInstance</span>()
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'vm===&gt;'</span>,vm.<span class="hljs-property">exposed</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeRef</span> = (<span class="hljs-params">inputInstance</span>) =&gt; {
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'value===&gt;'</span>,inputInstance)
 vm.<span class="hljs-property">exposed</span> = inputInstance ?? {}
}

<span class="hljs-title function_">defineExpose</span>({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ElInput</span> <span class="hljs-attr">:ref</span>=<span class="hljs-string">"changeRef"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"{...$attrs, ...props}"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(_, name) of $slots"</span> #[<span class="hljs-attr">name</span>]=<span class="hljs-string">"scop"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"scop"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ElInput</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬çœ‹çœ‹æ§åˆ¶å°æ‰“å°æ˜¯ä»€ä¹ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417e619380ad47ae9dea2e9771a26e7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zmz5L2P5rCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1753864043&amp;x-signature=V%2BgHUtAlll1lnXnYqmXvTdfwTDQ%3D" alt="iShot_2025-06-15_02.31.52.png" loading="lazy"></p>
<ul>
<li>åœ¨å­ç»„ä»¶çš„ ref ä¼ é€’ä¸€ä¸ªå‡½æ•° <code>changeRef</code> ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå¯ä»¥æ‹¿åˆ°åŸå…ˆç»„ä»¶ï¼ˆel-inputï¼‰çš„å¯¹å¤–æš´éœ²çš„å¯¹è±¡(æ–¹æ³•)ï¼›</li>
<li><code>getCurrentInstance</code> è·å–çš„æ˜¯å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼Œ <code>vm.exposed</code> æ‹¿åˆ°çš„æ˜¯ defineExpose å¯¼å‡ºçš„ <code>{ a: 1, b: 2 }</code></li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼<code>vm.exposed</code> å…¶å®å°±æ˜¯å½“å‰ç»„ä»¶ <code>defineExpose({})</code> å¯¹å¤–æŠ›å‡ºçš„å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨ <code>changeRef</code> å‡½æ•°ä¸­ï¼Œè®¾ç½® <code>vm.exposed = inputInstance</code> ï¼Œå°±å¯ä»¥å†æ¬¡æŠŠ el-input å¯¹å¤–æš´éœ²çš„æ–¹æ³•æš´éœ²ç»™çˆ¶ç»„ä»¶ã€‚</p>
<p>æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F528017250" target="_blank" title="https://zhuanlan.zhihu.com/p/528017250" ref="nofollow noopener noreferrer">å·§å¦™ä½¿ç”¨ Vue.extend ç»§æ‰¿ç»„ä»¶å®ç° el-table åŒå‡»å¯ç¼–è¾‘ ï½œ çŸ¥ä¹ </a>ï¼Œå›é¡¾ä¸€ä¸‹ Vue 2 ä¸­å®ä¾‹çš„é«˜å¯ç©æ€§ã€‚</p>
<h3 data-id="heading-14">å¤„ç† Typescript ç±»å‹</h3>
<h4 data-id="heading-15">1. å®Œå–„ props ç±»å‹æç¤º</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">ElInputProps</span>&gt;(), {})
</code></pre>
<h4 data-id="heading-16">2. å®Œå–„ $slots ç±»å‹æç¤º</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">InputSlots</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">ElInput</span>&gt;[<span class="hljs-string">'$slots'</span>] 
defineSlots&lt;<span class="hljs-title class_">InputSlots</span>&gt;()
</code></pre>
<h4 data-id="heading-17">3. å®Œå–„ $expose ç±»å‹æç¤º</h4>
<p>è¿™é‡Œçš„ <code>$expose</code> æŒ‡çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹å¤–æš´éœ²çš„æ–¹æ³•ï¼Œå¦‚ï¼šInput ç»„ä»¶çš„ emit äº‹ä»¶ï¼ˆ@foucsã€@blurï¼‰ç­‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">InputInstance</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputInstance</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
defineExpose&lt;<span class="hljs-title class_">ElInputInstance</span>&gt;()
</code></pre>
<h3 data-id="heading-18">ç»ˆæç‰ˆæœ¬ ï¼ˆTS ç±»å‹å®Œå¤‡ï¼‰</h3>
<h4 data-id="heading-19">åŸºç¡€ç‰ˆ</h4>
<p>ä½¿ç”¨ proxy æš´éœ²æ–¹æ³• :</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputInstance</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputInstance</span>, <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">import</span> { mergeProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; { <span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ–°çš„ props */</span> }
type <span class="hljs-title class_">InputSlots</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">ElInput</span>&gt;[<span class="hljs-string">'$slots'</span>] &amp; {<span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ–°çš„ slot */</span>}
type <span class="hljs-title class_">InputInstance</span> = <span class="hljs-title class_">ElInputInstance</span> &amp; {<span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ æ–°çš„ç»„ä»¶å®ä¾‹æ–¹æ³• */</span>}

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(), {
  <span class="hljs-attr">clearable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ”¹å˜el-input clearable é»˜è®¤å€¼</span>
  <span class="hljs-comment">/* å¯ä»¥åœ¨æ­¤å¤„ä¸ºæ–°å±æ€§æ·»åŠ é»˜è®¤å€¼ */</span>
})

<span class="hljs-keyword">const</span> rawRef = ref&lt;<span class="hljs-title class_">InputInstance</span>&gt;()

defineSlots&lt;<span class="hljs-title class_">InputSlots</span>&gt;()
defineExpose&lt;<span class="hljs-title class_">InputInstance</span>&gt;(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(
    {},
    {
      <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">_target, key</span>) =&gt;</span> rawRef.<span class="hljs-property">value</span>?.[key <span class="hljs-keyword">as</span> keyof <span class="hljs-title class_">InputInstance</span>],
      <span class="hljs-attr">has</span>: <span class="hljs-function">(<span class="hljs-params">_target, key</span>) =&gt;</span> key <span class="hljs-keyword">in</span> (rawRef.<span class="hljs-property">value</span> || {}),
    },
  ) <span class="hljs-keyword">as</span> <span class="hljs-title class_">InputInstance</span>,
)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ElInput</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"mergeProps($attrs, props)"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"rawRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"e-input"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(_, name) in $slots"</span> #[<span class="hljs-attr">name</span>]=<span class="hljs-string">"scope"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"scope"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ElInput</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.e-input</span> {
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">190px</span>; // æ·»åŠ æ–°æ ·å¼
  // :<span class="hljs-built_in">deep</span>(xxx) {} è¦†ç›–åŸæœ‰æ ·å¼
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h4 data-id="heading-20">h å‡½æ•°ç‰ˆ</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputInstance</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputInstance</span>, <span class="hljs-title class_">InputProps</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElInputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">ExtractPublicPropTypes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

type <span class="hljs-title class_">InputProps</span> = <span class="hljs-title class_">ExtractPublicPropTypes</span>&lt;<span class="hljs-title class_">ElInputProps</span>&gt; &amp; { }
type <span class="hljs-title class_">InputSlots</span> = <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">ElInput</span>&gt;[<span class="hljs-string">'$slots'</span>] &amp; {}
type <span class="hljs-title class_">InputInstance</span> = <span class="hljs-title class_">ElInputInstance</span> &amp; {}

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">InputProps</span>&gt;(), {})

<span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">getCurrentInstance</span>()
<span class="hljs-keyword">const</span> <span class="hljs-title function_">changeRef</span> = (<span class="hljs-params">inputInstance: InputInstance</span>) =&gt; vm!.<span class="hljs-property">exposeProxy</span> = vm!.<span class="hljs-property">exposed</span> = inputInstance || {}

defineSlots&lt;<span class="hljs-title class_">InputSlots</span>&gt;() <span class="hljs-comment">// TSæ’æ§½ç±»å‹æç¤º</span>
defineExpose&lt;<span class="hljs-title class_">InputInstance</span>&gt;() <span class="hljs-comment">//  å®ä¾‹ç±»å‹æç¤ºï¼ˆç»„ä»¶ä¸Šçš„äº‹ä»¶ï¼‰</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"h(ElInput, { ...$attrs, ...props, ref: changeRef as any }, $slots)"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ğŸ‘¨ çˆ¶ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">YiInput</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"inputRef"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"msg"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">append</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Search</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">suffix</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">User</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">YiInput</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Search</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">InputInstance</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-keyword">const</span> inputRef = ref&lt;<span class="hljs-title class_">InputInstance</span>&gt;()
<span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello world'</span>)

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
	inputRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">focus</span>() <span class="hljs-comment">// è‡ªåŠ¨èšç„¦</span>
	inputRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">clear</span>()
}, <span class="hljs-number">3000</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca6620201cc842d8b6968cdf8a617961~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zmz5L2P5rCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1753864043&amp;x-signature=HwrUpOFoVthkf%2BGXg6xWH1V3PE0%3D" alt="" loading="lazy"></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c51c6386a9f472d812e921374c601f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zmz5L2P5rCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1753864043&amp;x-signature=LiPYv%2B53pkeVSUl8mhxWfFslVmM%3D" alt="" loading="lazy"></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/424fc46639da47c9a28d6d76c79abfcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zmz5L2P5rCU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1753864043&amp;x-signature=7uWvcFb8aOx1wFm1ZEtNVqYVBl0%3D" alt="" loading="lazy"></p></div></div>
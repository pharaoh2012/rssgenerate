
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhaloe/p/18901382" title="发布于 2025-05-28 22:10">
    <span role="heading" aria-level="2">ArkUI-X添加到现有Android项目中</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>本教程主要讲述如何利用ArkUI-X SDK完成Android AAR开发，实现基于ArkTS的声明式开发范式在android平台显示。包括：</p>
<p>1.跨平台Library工程开发介绍<br>
2.AAR在Android应用工程的集成方式</p>
<h2 id="使用ace-tools和deveco-studio集成arkui-x-sdk进行android-aar开发">使用ACE Tools和DevEco Studio集成ArkUI-X SDK进行Android AAR开发</h2>
<p>可以通过通过ACE Tools或DevEco Studio完成</p>
<h3 id="ace-tools">ACE Tools</h3>
<p>1.ace create 命令创建一个跨平台的library模版工程：</p>
<pre><code class="language-bash">ace create [project] -t library
</code></pre>
<p>2.执行ace build aar命令，构建Android aar包。</p>
<pre><code class="language-bash">ace build aar
</code></pre>
<h3 id="deveco-studio">DevEco Studio</h3>
<p>1.创建一个ArkUI-X Library工程<br>
<img src="https://img2024.cnblogs.com/blog/682407/202505/682407-20250528220927914-510340132.png" alt="" loading="lazy"><br>
2.通过执行Build APP(s)选项，构建出Android aar包<br>
<img src="https://img2024.cnblogs.com/blog/682407/202505/682407-20250528220944681-209960859.png" alt="" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/682407/202505/682407-20250528220952034-1881220369.png" alt="" loading="lazy"></p>
<h2 id="在应用工程初始化arkui-x">在应用工程初始化ArkUI-X</h2>
<p>通过Android studio 创建一个应用工程，将我们上述的aar包添加到工程目录下的libs目录中 Application部分</p>
<h3 id="继承调用">继承调用</h3>
<pre><code class="language-java">package com.example.helloworld;

import com.example.myaar.MyApplication;

public class MainApplication extends MyApplication { 

}
</code></pre>
<h3 id="代理类调用">代理类调用</h3>
<pre><code class="language-java">package com.example.helloworld;


import android.app.Application;
import android.content.res.Configuration;
import android.util.Log;

import ohos.stage.ability.adapter.StageApplicationDelegate;

public class MainApplication extends Application {
    private StageApplicationDelegate appDelegate = null;

    public void onCreate() {
        super.onCreate();
        this.appDelegate = new StageApplicationDelegate();
        this.appDelegate.initApplication(this);
    }
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        if (this.appDelegate == null) {
            Log.e("StageApplication", "appDelegate is null");
        } else {
            this.appDelegate.onConfigurationChanged(newConfig);
        }
    }
}
</code></pre>
<h2 id="打开arkui-x页面">打开ArkUI-X页面</h2>
<h3 id="使用activity加载页面">使用Activity加载页面</h3>
<p>在AndroidManifest.xml中配置Activity</p>
<pre><code class="language-xml"> &lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" &gt;

     &lt;application
         android:name="com.example.test_aar_demo.MainApplication" &gt;

     &lt;activity android:name="com.example.myaar.EntryMainAbilityActivity" 
         android:windowSoftInputMode="adjustResize |stateHidden"
         android:configChanges="orientation|keyboard|layoutDirection|screenSize|uiMode|smallestScreenSize" /&gt;
     &lt;/application&gt;

 &lt;/manifest&gt;
</code></pre>
<p>使用intent打开Activity页面</p>
<pre><code class="language-java">startActivity(new Intent(this, EntryMainAbilityActivity.class));
</code></pre>
<h3 id="使用fragment加载页面">使用Fragment加载页面</h3>
<p>在Activity中加载StageFragment</p>
<pre><code class="language-java">StageFragment stageFragment = new StageFragment();
stageFragment.setInstanceName("com.example.myaar:entry:EntryMainAbilityActivity:");
supportFragmentManager.beginTransaction().replace(R.id.content, it).commitNowAllowingStateLoss();
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/682407/202505/682407-20250528221009973-726362221.png" alt="" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.004238040509259259" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-28 22:11">2025-05-28 22:10</span>&nbsp;
<a href="https://www.cnblogs.com/zhaloe">龙儿筝</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18901382);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18901382', targetLink: 'https://www.cnblogs.com/zhaloe/p/18901382', title: 'ArkUI-X添加到现有Android项目中' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/huangSir-devops/p/18910227" title="发布于 2025-06-04 15:19">
    <span role="heading" aria-level="2">ElasticSearch介绍及单机版安装</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="概述">概述</h2>
<p>ElasticSearch官网：<a href="https://www.elastic.co/cn/elasticsearch" target="_blank" rel="noopener nofollow">https://www.elastic.co/cn/elasticsearch</a><br>
GitHub地址：<a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noopener nofollow">https://github.com/elastic/elasticsearch</a></p>
<p>Elasticsearch 是使用Java语言且基于 Lucene 库的开源 分布式搜索和分析引擎、可扩展数据存储和矢量数据库，针对生产级工作负载的速度和相关性进行了优化。Elasticsearch 是 Elastic 开放 Stack 平台的基础。它支持近乎实时地搜索海量数据集、执行矢量搜索、与生成式 AI 应用程序集成等等。</p>
<h2 id="核心特点">核心特点</h2>
<h3 id="分布式架构">分布式架构</h3>
<ul>
<li>支持自动分片（Sharding）和副本（Replication），可横向扩展至数百台服务器，处理 PB 级数据。</li>
<li>节点自动发现和负载均衡，保证高可用性和容错性。</li>
</ul>
<h3 id="实时搜索与分析">实时搜索与分析</h3>
<ul>
<li>数据写入后可被实时搜索，支持复杂查询（如全文搜索、结构化搜索、地理位置搜索等）。</li>
<li>提供聚合（Aggregation）功能，可快速进行数据统计和分析（如求和、平均值、分桶统计等）。</li>
</ul>
<h3 id="灵活的数据模型">灵活的数据模型</h3>
<ul>
<li>基于 JSON 格式 存储数据，支持动态映射（Dynamic Mapping），无需预先定义严格的模式（Schema）。</li>
</ul>
<h3 id="丰富的功能生态">丰富的功能生态</h3>
<ul>
<li>与 Elastic Stack（ELK Stack）深度集成，包括 Logstash（数据收集）、Kibana（可视化）、Beats（轻量级数据采集器）等工具。</li>
<li>提供 RESTful API，方便与各类应用程序集成。</li>
</ul>
<h3 id="高扩展性">高扩展性</h3>
<ul>
<li>支持插件机制，可通过插件扩展功能（如分词器、安全认证、监控等）。</li>
</ul>
<h2 id="应用场景">应用场景</h2>
<ul>
<li>全文搜索引擎</li>
</ul>
<blockquote>
<p>例如电商网站的商品搜索、新闻网站的内容检索等，支持模糊查询、关键词高亮等功能。</p>
</blockquote>
<ul>
<li>日志分析与监控</li>
</ul>
<blockquote>
<p>收集和分析海量日志数据（如服务器日志、应用日志），通过 Kibana 实现可视化监控和故障排查。</p>
</blockquote>
<ul>
<li>实时数据统计</li>
</ul>
<blockquote>
<p>用于实时分析用户行为数据、业务指标（如网站流量、订单统计），支持动态仪表盘展示。</p>
</blockquote>
<ul>
<li>地理位置搜索</li>
</ul>
<blockquote>
<p>支持基于地理位置的查询（如 “查找附近 5 公里内的餐馆”），适用于地图服务、O2O 应用等。</p>
</blockquote>
<ul>
<li>数据分析与 BI</li>
</ul>
<blockquote>
<p>结合聚合功能，对数据进行多维分析，辅助业务决策。</p>
</blockquote>
<h2 id="二进制安装单机elasticsearch7x版本">二进制安装单机ElasticSearch7.x版本</h2>
<h3 id="环境信息">环境信息</h3>
<table>
<thead>
<tr>
<th>系统</th>
<th>规格</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu</td>
<td>8c16g</td>
<td>安装ES</td>
</tr>
</tbody>
</table>
<h3 id="下载二进制资源">下载二进制资源</h3>
<p>下载地址：<a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener nofollow">https://www.elastic.co/downloads/elasticsearch</a></p>
<pre><code># 下载
[root@master /data00/software]# wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.12-linux-x86_64.tar.gz

# 解压
[root@master /data00/software]# tar -xvf elasticsearch-7.17.12-linux-x86_64.tar.gz

# 创建软连接
[root@master /data00/software]# [root@master /data00/software]# ln -s /data00/software/elasticsearch-7.17.12 /usr/local/elasticsearch
[root@master /data00/software]# ll /usr/local/elasticsearch
lrwxrwxrwx 1 root root 38 Jun  4 14:36 /usr/local/elasticsearch -&gt; /data00/software/elasticsearch-7.17.12
</code></pre>
<h3 id="优化系统参数">优化系统参数</h3>
<pre><code>[root@master ~]# vim /etc/sysctl.conf
# ES 需要大量文件描述符来处理索引和网络连接，建议设置为较高值：
fs.file-max = 655360
# ES 使用 mmap 技术加载索引，需增大虚拟内存区域限制：
vm.max_map_count = 2147483642
# 禁用交换空间(swap分区)
vm.swappiness = 1

# 网络参数优化
net.ipv4.tcp_keepalive_time = 600
net.ipv4.tcp_keepalive_intvl = 60
net.ipv4.tcp_keepalive_probes = 10
net.ipv4.tcp_max_syn_backlog = 4096
net.core.somaxconn = 4096
net.core.netdev_max_backlog = 16384
net.core.rmem_max = 262144
net.core.wmem_max = 262144

# 使参数生效
[root@master ~]# sysctl -p /etc/sysctl.conf

# 查询参数，验证是否生效
[root@master ~]# sysctl -q vm.max_map_count
vm.max_map_count = 2147483642
</code></pre>
<h3 id="修改es的配置文件">修改ES的配置文件</h3>
<pre><code>[root@master ~]# vim /usr/local/elasticsearch/config/elasticsearch.yml 
cluster.name: es01
path.data: /data00/data/elasticsearch/
path.logs: /var/log/elasticsearch/
http.port: 9200
discovery.seed_hosts: ["10.37.97.56"]
</code></pre>
<h3 id="创建数据目录及日志目录">创建数据目录及日志目录</h3>
<pre><code>[root@master ~]# mkdir -p /data00/data/elasticsearch/
[root@master ~]# mkdir -p /var/log/elasticsearch/
</code></pre>
<h3 id="创建es用户">创建ES用户</h3>
<pre><code>[root@master ~]# useradd elasticsearch
[root@master ~]# id elasticsearch
uid=2002(elasticsearch) gid=2003(elasticsearch) groups=2003(elasticsearch)

# 授权
[root@master ~]# chown elasticsearch:elasticsearch -R /data00/data/elasticsearch/
[root@master ~]# chown elasticsearch:elasticsearch -R /var/log/elasticsearch/
# 安装目录
[root@master ~]# chown elasticsearch:elasticsearch -R /data00/software/elasticsearch-7.17.12
</code></pre>
<h3 id="添加对es用户对限制">添加对ES用户对限制</h3>
<pre><code>[root@master ~]# vim /etc/security/limits.conf
# 最大文件描述符数
elasticsearch hard nofile 655360
elasticsearch soft nofile 655360
# 最大进程数
elasticsearch hard nproc 8192
elasticsearch soft nproc 8192
# 锁定内存限制
elasticsearch hard memlock unlimited
elasticsearch soft memlock unlimited
</code></pre>
<h3 id="创建systemd文件">创建systemd文件</h3>
<pre><code>[root@master ~]# vim /lib/systemd/system/es.service
[Unit]
Description=elasticsearch service
Documentation=https://www.cnblogs.com/huangSir-devops
After=network.target auditd.service

[Service]
LimitMEMLOCK=infinity
User=elasticsearch
ExecStart=/usr/local/elasticsearch/bin/elasticsearch
TimeoutStopSec=0
TimeoutStartSec=0

[Install]
WantedBy=multi-user.target
</code></pre>
<h3 id="启动es">启动ES</h3>
<pre><code>[root@master ~]# systemctl daemon-reload
[root@master ~]# systemctl start es
[root@master ~]# systemctl status es
● es.service - elasticsearch service
     Loaded: loaded (/lib/systemd/system/es.service; disabled; preset: enabled)
     Active: active (running) since Wed 2025-06-04 15:07:10 CST; 3s ago
       Docs: https://www.cnblogs.com/huangSir-devops
   Main PID: 2540104 (elasticsearch)
      Tasks: 21 (limit: 76938)
     Memory: 40.4M
     CGroup: /system.slice/es.service
             ├─2540104 /bin/bash /usr/local/elasticsearch/bin/elasticsearch
             ├─2540170 /bin/bash bin/elasticsearch-keystore has-passwd --silent
             └─2540172 /usr/local/elasticsearch/jdk/bin/java -Xshare:auto -Xms4m -Xmx64m -XX:+UseSerialGC -Des.path.home=/usr/local/elasticsearch -Des.path.conf=/usr/local/elasticsearch/config -Des.distributio&gt;

Jun 04 15:07:10 master systemd[1]: Started es.service - elasticsearch service.

# 检查端口
[root@master ~]# ss -lntup | grep 9200
tcp   LISTEN 0      65535              [::ffff:127.0.0.1]:9200             *:*    users:(("java",pid=2540104,fd=355))                      
tcp   LISTEN 0      65535                           [::1]:9200          [::]:*    users:(("java",pid=2540104,fd=354)) 

# 访问es
[root@master ~]# curl localhost:9200
{
  "name" : "master",
  "cluster_name" : "es01",
  "cluster_uuid" : "_na_",
  "version" : {
    "number" : "7.17.12",
    "build_flavor" : "default",
    "build_type" : "tar",
    "build_hash" : "e3b0c3d3c5c130e1dc6d567d6baef1c73eeb2059",
    "build_date" : "2023-07-20T05:33:33.690180787Z",
    "build_snapshot" : false,
    "lucene_version" : "8.11.1",
    "minimum_wire_compatibility_version" : "6.8.0",
    "minimum_index_compatibility_version" : "6.0.0-beta1"
  },
  "tagline" : "You Know, for Search"
}
</code></pre>
<h2 id="docker安装elasticsearch">Docker安装ElasticSearch</h2>
<pre><code># 在主机创建目录（需提前手动创建）
mkdir -p /data/es/data
mkdir -p /data/es/config
mkdir -p /data/es/plugins

docker run -d \
  --name es7.17.12 \
  -p 9200:9200 -p 9300:9300 \
  -e "discovery.type=single-node" \
  -e "ES_JAVA_OPTS=-Xms2g -Xmx2g" \
  # 挂载配置卷
  -v /data/es/data:/usr/share/elasticsearch/config \
  # 挂载数据卷
  -v /data/es/config:/usr/share/elasticsearch/data \
  # 挂载插件卷
  -v /data/es/plugins:/usr/share/elasticsearch/plugins \
  -u root \  # 允许以 root 权限修改配置（可选，需根据实际权限需求调整）
  elasticsearch:7.17.12
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/huangSir-devops/" target="_blank">huangSir-devops</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/huangSir-devops/p/18910227" target="_blank">https://www.cnblogs.com/huangSir-devops/p/18910227</a>，微信Vac666666，欢迎交流</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.04366172063657407" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-04 15:19">2025-06-04 15:19</span>&nbsp;
<a href="https://www.cnblogs.com/huangSir-devops">huangSir-devops</a>&nbsp;
阅读(<span id="post_view_count">2</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18910227);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18910227', targetLink: 'https://www.cnblogs.com/huangSir-devops/p/18910227', title: 'ElasticSearch介绍及单机版安装' })">举报</a>
</div>
        
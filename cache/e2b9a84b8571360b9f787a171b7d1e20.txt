
    <a name="top"></a>
    <h2><a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kerrycode/p/18712572" title="发布于 2025-02-13 10:17">
    <span role="heading" aria-level="2">RMAN备份时遇到ORA-48132 &amp;ORA-48170且备份变慢案例</span>
    

</a>
</h2>
    <small>
<span id="post-date" data-last-update-days="0.019181653097222223" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-13 10:18">2025-02-13 10:17</span>&nbsp;
<a href="https://www.cnblogs.com/kerrycode">潇湘隐者</a>&nbsp;
阅读(<span id="post_view_count">4</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18712572" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18712572);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18712572', targetLink: 'https://www.cnblogs.com/kerrycode/p/18712572', title: 'RMAN备份时遇到ORA-48132 &amp;amp;ORA-48170且备份变慢案例' })">举报</a>
</small>
    <div class="entry">
        <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin: 0; background: none left top / auto no-repeat scroll padding-box border-box rgba(0, 0, 0, 0); width: auto; font-family: Optima-Regular, Optima, PingFangSC-regular, PingFangTC-regular, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; font-size: 14px; color: rgba(0, 0, 0, 1); line-height: 1.5em; word-spacing: 0; letter-spacing: 0; word-break: break-all; overflow-wrap: break-word; text-align: left; padding: 12px"><h1 data-tool="mdnice编辑器" style="margin: 30px 0 15px; padding: 0; display: block"><span class="prefix" style="display: none"></span><span class="content" style="font-size: 24px; color: rgba(0, 0, 0, 1); line-height: 1.5em; letter-spacing: 0; text-align: left; font-weight: bold; display: block">现象描述：</span><span class="suffix" style="display: none"></span></h1>
<h4 data-tool="mdnice编辑器" style="margin: 30px 0 15px; padding: 0; display: block"><span class="prefix" style="display: none"></span><span class="content" style="font-size: 18px; color: rgba(0, 0, 0, 1); line-height: 1.5em; letter-spacing: 0; text-align: left; font-weight: bold; display: block">环境：</span><span class="suffix" style="display: none"></span></h4>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">操作系统：Red Hat Enterprise Linux release 8.10</p>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">数据库版本： Oracle 19.24.0.0.0 企业版</p>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">备份作业在执行RMAN备份时，告警日志中会出现ORA-48132 &amp; ORA-48170错误，如下所示(数据库实例用xxx做了混淆)</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0"><code class="hljs" style="overflow-x: auto; padding: 16px; color: rgba(51, 51, 51, 1); background: rgba(248, 248, 248, 1); font-family: Consolas, Monaco, Menlo, monospace; font-size: 12px">2025-02-12T11:10:11.070519+08:00<br>Errors&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;file&nbsp;/xxxdb/diag/rdbms/xxx/xxx/trace/xxx_ora_3430285.trc:<br>ORA-48132:&nbsp;requested&nbsp;file&nbsp;lock&nbsp;is&nbsp;busy,&nbsp;[HM_RUN]&nbsp;[/xxxdb/diag/rdbms/xxx/xxx/lck/AM_1618_3044626670.lck]<br>ORA-48170:&nbsp;unable&nbsp;to&nbsp;lock&nbsp;file&nbsp;-&nbsp;already&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;use<br>Linux-x86_64&nbsp;Error:&nbsp;11:&nbsp;Resource&nbsp;temporarily&nbsp;unavailable<br>Additional&nbsp;information:&nbsp;8<br>Additional&nbsp;information:&nbsp;2421413<br>2025-02-12T11:11:50.186760+08:00<br>Errors&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;file&nbsp;/xxxdb/diag/rdbms/xxx/xxx/trace/xxx_ora_3430287.trc:<br>ORA-48132:&nbsp;requested&nbsp;file&nbsp;lock&nbsp;is&nbsp;busy,&nbsp;[HM_RUN]&nbsp;[/xxxdb/diag/rdbms/xxx/xxx/lck/AM_1618_3044626670.lck]<br>ORA-48170:&nbsp;unable&nbsp;to&nbsp;lock&nbsp;file&nbsp;-&nbsp;already&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;use<br>Linux-x86_64&nbsp;Error:&nbsp;11:&nbsp;Resource&nbsp;temporarily&nbsp;unavailable<br>Additional&nbsp;information:&nbsp;8<br>Additional&nbsp;information:&nbsp;2421413<br></code></pre>
<h3 data-tool="mdnice编辑器" style="margin: 30px 0 15px; padding: 0; display: block"><span class="prefix" style="display: none"></span><span class="content" style="font-size: 20px; color: rgba(0, 0, 0, 1); line-height: 1.5em; letter-spacing: 0; text-align: left; font-weight: bold; display: block">原因分析：</span><span class="suffix" style="display: none"></span></h3>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">备份作业之前是完全正常的，而且没有做过配置与参数的变更，突然间出现了这样的报错。研究了报错的trc文件后确定是RMAN备份时抛出的错误，另外，在分析研究过程中，我们发现如果备份的时候能够重现这个错误的话，就可以观察到有ADR file lock。如果错过了备份时间段，也可以通过AWR或ASH发现，如下截图所示:</p>
<figure data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0; display: flex; flex-direction: column; justify-content: center; align-items: center"><img src="https://img2024.cnblogs.com/blog/73542/202502/73542-20250213101803207-1785572767.jpg" alt="" style="display: block; margin: 0 auto; max-width: 100%; border: 3px none rgba(0, 0, 0, 0.4); border-radius: 0; object-fit: fill; box-shadow: 0 0 rgba(0, 0, 0, 0)"></figure>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">另外，我还发现一个很奇怪的问题，如下截图所示，最开始遇到这个问题的时间是是2025-02-02，在出现这个问题后，发现备份时间从15分钟多变成了50多分钟，而且每秒写出IO(OUTPUT_BYTES_PER_SEC_DISPLAY)也变小了，也就是说RMAN备份变慢了，如下所示：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0"><code class="hljs" style="overflow-x: auto; padding: 16px; color: rgba(51, 51, 51, 1); background: rgba(248, 248, 248, 1); font-family: Consolas, Monaco, Menlo, monospace; font-size: 12px">CON_ID&nbsp;START_TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END_TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BACKUP_TYP&nbsp;&nbsp;&nbsp;IN_GB&nbsp;IO_IN_RATE&nbsp;&nbsp;OUT_GB&nbsp;IO_OUT_RAT&nbsp;ELAPSED_MIN&nbsp;OUTPUT_D<br><span class="hljs-comment" style="color: rgba(153, 153, 136, 1); font-style: italic; line-height: 26px">------&nbsp;-------------------&nbsp;-------------------&nbsp;----------&nbsp;-------&nbsp;----------&nbsp;-------&nbsp;----------&nbsp;-----------&nbsp;--------</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-01-29&nbsp;18:30:07&nbsp;2025-01-29&nbsp;18:45:54&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;588.6&nbsp;&nbsp;&nbsp;636.47M&nbsp;&nbsp;&nbsp;&nbsp;144.4&nbsp;&nbsp;&nbsp;156.18M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.8&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-01-30&nbsp;18:30:07&nbsp;2025-01-30&nbsp;18:46:02&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;587.8&nbsp;&nbsp;&nbsp;630.25M&nbsp;&nbsp;&nbsp;&nbsp;143.8&nbsp;&nbsp;&nbsp;154.17M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.9&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-01-31&nbsp;18:30:07&nbsp;2025-01-31&nbsp;18:45:54&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;587.8&nbsp;&nbsp;&nbsp;635.63M&nbsp;&nbsp;&nbsp;&nbsp;143.7&nbsp;&nbsp;&nbsp;155.43M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.8&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-01&nbsp;18:30:07&nbsp;2025-02-01&nbsp;18:46:00&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;587.4&nbsp;&nbsp;&nbsp;631.12M&nbsp;&nbsp;&nbsp;&nbsp;142.9&nbsp;&nbsp;&nbsp;153.52M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.9&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-02&nbsp;18:30:06&nbsp;2025-02-02&nbsp;19:21:39&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;582.1&nbsp;&nbsp;&nbsp;192.73M&nbsp;&nbsp;&nbsp;&nbsp;137.4&nbsp;&nbsp;&nbsp;&nbsp;45.49M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.6&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-03&nbsp;18:30:07&nbsp;2025-02-03&nbsp;19:21:39&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;582.3&nbsp;&nbsp;&nbsp;192.84M&nbsp;&nbsp;&nbsp;&nbsp;137.4&nbsp;&nbsp;&nbsp;&nbsp;45.51M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-04&nbsp;18:30:07&nbsp;2025-02-04&nbsp;19:21:39&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;582.2&nbsp;&nbsp;&nbsp;192.80M&nbsp;&nbsp;&nbsp;&nbsp;137.4&nbsp;&nbsp;&nbsp;&nbsp;45.50M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-05&nbsp;18:30:07&nbsp;2025-02-05&nbsp;19:21:39&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;588.0&nbsp;&nbsp;&nbsp;194.74M&nbsp;&nbsp;&nbsp;&nbsp;140.7&nbsp;&nbsp;&nbsp;&nbsp;46.59M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-06&nbsp;18:30:06&nbsp;2025-02-06&nbsp;19:21:38&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;586.4&nbsp;&nbsp;&nbsp;194.22M&nbsp;&nbsp;&nbsp;&nbsp;140.5&nbsp;&nbsp;&nbsp;&nbsp;46.54M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-07&nbsp;18:30:07&nbsp;2025-02-07&nbsp;19:21:38&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;582.6&nbsp;&nbsp;&nbsp;193.00M&nbsp;&nbsp;&nbsp;&nbsp;136.7&nbsp;&nbsp;&nbsp;&nbsp;45.30M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-08&nbsp;18:30:07&nbsp;2025-02-08&nbsp;19:21:39&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;583.4&nbsp;&nbsp;&nbsp;193.21M&nbsp;&nbsp;&nbsp;&nbsp;136.9&nbsp;&nbsp;&nbsp;&nbsp;45.34M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-09&nbsp;18:30:07&nbsp;2025-02-09&nbsp;19:21:40&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;583.6&nbsp;&nbsp;&nbsp;193.21M&nbsp;&nbsp;&nbsp;&nbsp;137.3&nbsp;&nbsp;&nbsp;&nbsp;45.45M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.6&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-10&nbsp;18:30:06&nbsp;2025-02-10&nbsp;19:21:40&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;583.7&nbsp;&nbsp;&nbsp;193.17M&nbsp;&nbsp;&nbsp;&nbsp;137.1&nbsp;&nbsp;&nbsp;&nbsp;45.39M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.6&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-11&nbsp;18:30:07&nbsp;2025-02-11&nbsp;19:21:38&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;584.4&nbsp;&nbsp;&nbsp;193.62M&nbsp;&nbsp;&nbsp;&nbsp;137.2&nbsp;&nbsp;&nbsp;&nbsp;45.46M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;51.5&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-12&nbsp;10:36:50&nbsp;2025-02-12&nbsp;11:20:23&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;590.2&nbsp;&nbsp;&nbsp;231.30M&nbsp;&nbsp;&nbsp;&nbsp;142.9&nbsp;&nbsp;&nbsp;&nbsp;56.00M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;43.6&nbsp;DISK<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;2025-02-12&nbsp;11:21:35&nbsp;2025-02-12&nbsp;11:35:55&nbsp;DB&nbsp;FULL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;550.4&nbsp;&nbsp;&nbsp;655.32M&nbsp;&nbsp;&nbsp;&nbsp;103.1&nbsp;&nbsp;&nbsp;122.71M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14.3&nbsp;DISK<br><br>16&nbsp;rows&nbsp;selected<br></code></pre>
<figure data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0; display: flex; flex-direction: column; justify-content: center; align-items: center"><img src="https://img2024.cnblogs.com/blog/73542/202502/73542-20250213101803172-1960427316.jpg" alt="" style="display: block; margin: 0 auto; max-width: 100%; border: 3px none rgba(0, 0, 0, 0.4); border-radius: 0; object-fit: fill; box-shadow: 0 0 rgba(0, 0, 0, 0)"></figure>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">解决这个问题是在2025-02-12日10点多，临时解决后RMAN备份速度又恢复正常了。我搜索了Oracle官方文档，关于这个错误，其实官方文档Oracle Support上有详细文档<a href="" style="color: rgba(239, 112, 96, 1); font-weight: bold; border-top: 3px none rgba(0, 0, 0, 0.4); border-left: 3px none rgba(0, 0, 0, 0.4); border-right: 3px none rgba(0, 0, 0, 0.4); border-radius: 0; margin: 0; padding: 0; text-decoration: none; text-decoration-thickness: initial; overflow-wrap: break-word; border-bottom: 1px solid rgba(239, 112, 96, 1)" rel="noopener nofollow">ORA-48132 ORA-48170 When Running RMAN Backups (Doc ID 2904353.1)</a>介绍，我们这边遇到的案例跟链接内容极其相似(但是还有点不同)，这里就不画蛇添足了，贴上具体内容如下所示</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0"><code class="hljs" style="overflow-x: auto; padding: 16px; color: rgba(51, 51, 51, 1); background: rgba(248, 248, 248, 1); font-family: Consolas, Monaco, Menlo, monospace; font-size: 12px">APPLIES&nbsp;TO:<br><br>Oracle&nbsp;Database&nbsp;-&nbsp;Enterprise&nbsp;Edition&nbsp;-&nbsp;Version&nbsp;11.2.0.4&nbsp;and&nbsp;later<br>Information&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;this&nbsp;document&nbsp;applies&nbsp;to&nbsp;any&nbsp;platform.<br><br>SYMPTOMS<br><br>Alert&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">log</span>&nbsp;flooded&nbsp;with&nbsp;below&nbsp;errors&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">while</span>&nbsp;running&nbsp;the&nbsp;RMAN&nbsp;backup.<br>&nbsp;<br>ADR&nbsp;or&nbsp;AMH&nbsp;operation&nbsp;error:;&nbsp;err_code=48132,&nbsp;<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">"dbkh_create_pseudo_run_ctx-1"</span>=dbkh_create_pseudo_run_ctx-1<br>at&nbsp;0xffffffff7fff5870&nbsp;placed&nbsp;krbb.c@25071<br>ORA-48132:&nbsp;requested&nbsp;file&nbsp;lock&nbsp;is&nbsp;busy,&nbsp;[HM_RUN]&nbsp;[/db01/app/oracle/diag/rdbms/&lt;DB_NAME&gt;/&lt;SID&gt;/lck/AM_1618_3044626670.lck]<br>ORA-48170:&nbsp;unable&nbsp;to&nbsp;lock&nbsp;file&nbsp;-&nbsp;already&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;use<br>SVR4&nbsp;Error:&nbsp;11:&nbsp;Resource&nbsp;temporarily&nbsp;unavailable<br>Additional&nbsp;information:&nbsp;8<br>Additional&nbsp;information:&nbsp;2701<br><br><br><span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">'ADR&nbsp;file&nbsp;lock'</span>&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">wait</span>&nbsp;event&nbsp;observed&nbsp;during&nbsp;the&nbsp;backup.<br>&nbsp;<br>INST_ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SID&nbsp;CH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEQ<span class="hljs-comment" style="color: rgba(153, 153, 136, 1); font-style: italic; line-height: 26px">#&nbsp;EVENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SECS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br>----------&nbsp;-------&nbsp;---------------------------&nbsp;------&nbsp;----------------------------&nbsp;&nbsp;----------&nbsp;----------<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6114&nbsp;SQL*Net&nbsp;message&nbsp;from&nbsp;client&nbsp;&nbsp;&nbsp;WAITING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;467&nbsp;rman&nbsp;channel=ORA_SBT_TAPE_1&nbsp;&nbsp;&nbsp;&nbsp;898&nbsp;ADR&nbsp;file&nbsp;lock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WAITING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>&nbsp;<br>&nbsp;<br>CHANGES<br>&nbsp;<br>CAUSE<br>This&nbsp;symptom&nbsp;is&nbsp;being&nbsp;investigated&nbsp;by&nbsp;developer&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;Bug&nbsp;10125939.<br>Bug&nbsp;10125939&nbsp;-&nbsp;GSFBDRA:&nbsp;RMAN&nbsp;VALIDATE&nbsp;HANG&nbsp;WAITING&nbsp;FOR&nbsp;<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">'ADR&nbsp;FILE&nbsp;LOCK'</span>&nbsp;Closed&nbsp;as&nbsp;could&nbsp;not&nbsp;reproduce<br><br><br>SOLUTION<br>Choose&nbsp;the&nbsp;following&nbsp;workaround:<br><br>Solution&nbsp;1:<br><br>Disable&nbsp;HM&nbsp;Monitor&nbsp;as&nbsp;below:<br><br>alter&nbsp;system&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">set</span>&nbsp;<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">"_diag_hm_rc_enabled"</span>=<span class="hljs-literal" style="color: rgba(0, 128, 128, 1); line-height: 26px">false</span>&nbsp;scope=both;<br><br><br>Solution&nbsp;2:<br><br>Enable&nbsp;krb&nbsp;trace&nbsp;,&nbsp;this&nbsp;might&nbsp;lead&nbsp;to&nbsp;more&nbsp;RMAN&nbsp;KRB&nbsp;traces&nbsp;to&nbsp;generate.<br><br>If&nbsp;RAC,&nbsp;Krb&nbsp;tracing&nbsp;needs&nbsp;to&nbsp;enabled&nbsp;on&nbsp;all&nbsp;nodes.<br><br>alter&nbsp;system&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">set</span>&nbsp;event=<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">'logon&nbsp;trace&nbsp;name&nbsp;krb_options&nbsp;level&nbsp;20'</span>&nbsp;scope=spfile;&nbsp;&lt;====&nbsp;To&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">set</span>&nbsp;it.<br>alter&nbsp;system&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">set</span>&nbsp;event=<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">'logon&nbsp;trace&nbsp;name&nbsp;krb_options&nbsp;off'</span>&nbsp;scope=spfile;&nbsp;&lt;====&nbsp;To&nbsp;<span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">set</span>&nbsp;it&nbsp;off<br><br><br><br>Solution&nbsp;3:<br><br>Rename/Move&nbsp;lck&nbsp;folder.<br><br>ex:&nbsp;/db01/app/&lt;BASE&gt;/diag/rdbms/&lt;sid&gt;/&lt;SID&gt;/lck/AM_1618_3044626670.lck<br><br>Shutdown&nbsp;database;<br><br><span class="hljs-built_in" style="color: rgba(0, 134, 179, 1); line-height: 26px">cd</span>&nbsp;/db01/app/&lt;BASE&gt;/diag/rdbms/&lt;sid&gt;/&lt;SID&gt;<br><br>mv&nbsp;lck&nbsp;lck_bkp<br><br>start&nbsp;the&nbsp;database<br><br>purge&nbsp;adrci<br><br>adrci&gt;purge<br></code></pre>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">这里我们通过删除lck文件了暂时解决了RMAN备份时告警日志报ORA-48132&amp;ORA-48170错误。在Oracle Service Requests提交SR反馈给官方后，Oracle技术人员也确认是遇到了bug，不过他们反馈遇到的是Bug 35500265&nbsp;- Slow backups with errors ORA-48132 ORA-48170 (&nbsp;Doc ID 35500265.8&nbsp;)导致。而不是上文中的Bug 10125939，官方结论如下：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0"><code class="hljs" style="overflow-x: auto; padding: 16px; color: rgba(51, 51, 51, 1); background: rgba(248, 248, 248, 1); font-family: Consolas, Monaco, Menlo, monospace; font-size: 12px">--&nbsp;Conclusion:<br><br>The&nbsp;following&nbsp;bug&nbsp;might&nbsp;be&nbsp;hit:<br><br>Bug&nbsp;35500265&nbsp;-&nbsp;Slow&nbsp;backups&nbsp;with&nbsp;errors&nbsp;ORA-48132&nbsp;ORA-48170&nbsp;(&nbsp;Doc&nbsp;ID&nbsp;35500265.8&nbsp;)<br><br>--&nbsp;Evidence:<br><br>1.&nbsp;The&nbsp;symptom&nbsp;that&nbsp;RMAN&nbsp;backup&nbsp;slow&nbsp;with&nbsp;ORA-48132&nbsp;and&nbsp;ORA-48170&nbsp;is&nbsp;similar.<br><br>2.&nbsp;19.24&nbsp;is&nbsp;<span class="hljs-keyword" style="color: rgba(51, 51, 51, 1); font-weight: bold; line-height: 26px">in</span>&nbsp;the&nbsp;scope&nbsp;of&nbsp;35500265<span class="hljs-string" style="color: rgba(221, 17, 68, 1); line-height: 26px">'s&nbsp;effected&nbsp;version.<br><br>3.&nbsp;The&nbsp;patch&nbsp;of&nbsp;35500265&nbsp;is&nbsp;not&nbsp;applied&nbsp;in&nbsp;this&nbsp;system<br></span></code></pre>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">关于Bug 35500265，这个Bug已将在19.25.0.0.241015中fix掉了。如果要彻底解决这个问题就必须安装相关补丁。</p>
<figure data-tool="mdnice编辑器" style="margin: 10px 0; padding: 0; display: flex; flex-direction: column; justify-content: center; align-items: center"><img src="https://img2024.cnblogs.com/blog/73542/202502/73542-20250213101803026-1479985279.jpg" alt="" style="display: block; margin: 0 auto; max-width: 100%; border: 3px none rgba(0, 0, 0, 0.4); border-radius: 0; object-fit: fill; box-shadow: 0 0 rgba(0, 0, 0, 0)"></figure>
<h3 data-tool="mdnice编辑器" style="margin: 30px 0 15px; padding: 0; display: block"><span class="prefix" style="display: none"></span><span class="content" style="font-size: 20px; color: rgba(0, 0, 0, 1); line-height: 1.5em; letter-spacing: 0; text-align: left; font-weight: bold; display: block">参考资料：</span><span class="suffix" style="display: none"></span></h3>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">ORA-48132: Requested File Lock Is Busy, [HM_RUN] (Doc ID 3066412.1)</p>
<p data-tool="mdnice编辑器" style="color: rgba(0, 0, 0, 1); font-size: 16px; line-height: 1.8em; letter-spacing: 0; text-align: left; text-indent: 0; margin: 0; padding: 8px 0">ORA-48132 ORA-48170 When Running RMAN Backups (Doc ID 2904353.1)</p>
</section>
</div>
<div id="MySignature" role="contentinfo">
    <div id="KerryCodeSignature">
<div>
<img src="https://images.cnblogs.com/cnblogs_com/kerrycode/1913302/o_240731062102_kerrycode.png" height="120" width="500">
</div>
<div>
<b>扫描上面二维码关注我</b>
</div>
<div>如果你真心觉得文章写得不错，而且对你有所帮助，那就不妨帮忙“推荐"一下，您的“推荐”和”打赏“将是我最大的写作动力！</div>
<div>本文版权归作者所有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接.</div>
</div>
</div>
<div class="clear"></div>

        <div class="clear"></div>
        
</div>
    <ul class="postmetadata">
        <vc:categories-tags blog-app="kerrycode" blog-id="57955" post-id="18712572"></vc:categories-tags>
    </ul>

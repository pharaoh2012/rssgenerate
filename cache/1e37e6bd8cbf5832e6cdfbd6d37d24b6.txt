
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhaloe/p/18930328" title="发布于 2025-06-16 12:50">
    <span role="heading" aria-level="2">ArkUI-X在Android平台动态化开发指南</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>本文介绍如何在Android平台进行ArkUI-X动态化开发，包括动态化目录规则及约束。</p>
<h2 id="适用场景">适用场景</h2>
<p>动态化主要包括两个典型场景：</p>
<p>场景1：框架动态化，为了降低应用ROM体积占用，及满足动态升级框架目的；<br>
场景2：特性Bundle动态化，特性和宿主应用发布解耦；</p>
<h2 id="开发指南">开发指南</h2>
<h3 id="目录说明">目录说明</h3>
<p>动态加载时要求应用沙箱内目录架构如下所示：</p>
<pre><code class="language-plain">/data/data/应用/files/arkui-x    
├── feature1                    # 跨平台特性1
│   ├── ets                     # ets目录
│   │   ├──sourceMaps.map
│   │   └──modules.abc
│   ├── resources.index         
│   ├── resources              
│   ├── module.json
│   └── libs                    # 特性bundle带的so库
│       ├── arm64-v8a
│       ├── armeabi-v7a
│       └── x86_64  
├── systemres                   # ArkUI公共资源
└── libs                        # 根目录下libs库
    ├── arm64-v8a               
    │    └──libarkui_android.so    # ArkUI-X引擎
    ├── armeabi-v7a           
    └── x86_64
</code></pre>
<p>1.<code>/data/data/应用/files/arkui-x</code>可以视为ArkUI-X动态加载的沙箱根目录，框架和特性Bundle均需要放在这个目录下；<br>
2.根目录下的libs文件夹放置引擎（libarkui_android.so），及其他公共库；<br>
3.根目录下要求按照module级别组织，不可以重名；</p>
<h3 id="加载优先级">加载优先级</h3>
<p><strong>引擎so库</strong>：优先加载应用lib目录下，如果未找到则去应用沙箱根目录加载；<br>
<strong>插件so库</strong>：优先加载应用lib目录下，如果未找到则去应用沙箱根目录尝试加载，最后去插件自身的libs目录加载；<br>
<strong>module加载</strong>：优先从应用assets目录下寻找，如果找不到则去沙箱内尝试加载；<br>
<strong>systemres加载</strong>：同上，优先加载应用assets目录，找不到则去沙箱内加载；</p>
<blockquote>
<p>注意：不建议应用同一个module，即预制到应用assets内又在沙箱同时部署。</p>
</blockquote>
<h3 id="框架初始化">框架初始化</h3>
<p>如果应用使用了框架引擎动态化，首次下载引擎库后将其放置<code>/data/data/应用/files/arkui-x/libs/arm64-v8a</code></p>
<p>目录，之后再打开对应跨平台界面时初始化框架：</p>
<blockquote>
<p>注意：初始化必须在主线程调用。</p>
</blockquote>
<pre><code class="language-java">appDelegate = new StageApplicationDelegate();
appDelegate.initApplication(this)
</code></pre>
<p>后续再打开应用，建议按照正常流程在Application里初始化框架，提前完全引擎库加载，提高跨平台模块加载速度；</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-16 12:50">2025-06-16 12:50</span>&nbsp;
<a href="https://www.cnblogs.com/zhaloe">龙儿筝</a>&nbsp;
阅读(<span id="post_view_count">31</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18930328);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18930328', targetLink: 'https://www.cnblogs.com/zhaloe/p/18930328', title: 'ArkUI-X在Android平台动态化开发指南' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/fanliang11/p/18807955" title="发布于 2025-04-03 16:05">
    <span role="heading" aria-level="2">通过jmeter压测surging</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1 class="postTitle">一、概述</h1>
<p>今天压测了surging内存稳定在180MB以内,然后今天和客户签了合同，还要帮客户梳理微服务其它相关问题，然后客户有意向购买木舟物联网平台。</p>
<p><img src="https://img2024.cnblogs.com/blog/192878/202504/192878-20250403154612583-1841191542.jpg" alt="" loading="lazy"></p>
<p>&nbsp;&nbsp; 木舟 (Kayak) 是什么?</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 木舟(Kayak)是基于.NET6.0软件环境下的surging微服务引擎进行开发的, 平台包含了微服务和物联网平台。支持异步和响应式编程开发，功能包含了物模型,设备,产品,网络组件的统一管理和微服务平台下的注册中心，服务路由，模块，中间服务等管理。还有多协议适配(TCP,MQTT,UDP,CoAP,HTTP,Grpc,websocket,rtmp,httpflv,webservice,等),通过灵活多样的配置适配能够接入不同厂家不同协议等设备。并且通过设备告警,消息通知,数据可视化等功能。能够让你能快速建立起微服务物联网平台系统。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; 木舟物联网平台：<a href="http://117.72.121.2:3100" rel="noopener nofollow" target="_blank">http://117.72.121.2:3100</a>（用户名：fanly&nbsp; 密码：123456）</p>
<p>&nbsp; &nbsp; 链路跟踪Skywalking V8:<a href="http://117.72.121.2:8080/" rel="noopener nofollow" target="_blank">http://117.72.121.2:8080/</a></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; surging 微服务引擎开源地址：<a href="https://github.com/fanliang11/surging" rel="noopener nofollow" target="_blank">https://github.com/fanliang11/surging</a>（后面surging 会移动到<a href="https://github.com/microsurging/" rel="noopener nofollow" target="_blank">microsurging</a>进行维护）</p>
<h2>二、JMeter和JDK下载</h2>
<br>1、JMeter下载地址：http://jmeter.apache.org/download_jmeter.cgi<br><br>2、JDK下载地址：https://www.oracle.com/technetwork/cn/java/javase/downloads/index.html<br><br>JDK+Jmeter安装<br><br>1、windows安装（以win 7为例）<br><br>1、 安装jdk、配置java环境变量（步骤略）<br><br>2、 解压apache-jmeter-2.13.zip到D盘<br><br>3、 桌面选择“计算机”（右键）--高级系统设置--环境变量<br><br>4、 在”系统变量“---”新建“，在变量名中输入：JMETER_HOME，变量值中输入：D:\apache-jmeter-2.13<br><br>5、 修改CLASSPATH变量，变量值中添加 %JMETER_HOME%\lib\ext\ApacheJMeter_core.jar;%JMETER_HOME%\lib\jorphan.jar;%JMETER_HOME%\lib\logkit-2.0.jar; 再点确定。<br><br>6、 进入到D:\apache-jmeter-5\bin下运行jmeter.bat即可打开JMeter<br><br>Jmeter非GUI运行压测<br><br>创建配置jmx 文件<br><br>1. 新增Thread Group<br><br>配置thread group的user thread为2000<br><br>2. 在thread group 下新增Http Request<br>
<p><img src="https://img2024.cnblogs.com/blog/192878/202504/192878-20250403155007558-2017321041.png" alt="" loading="lazy"></p>
<p>3. 以下是压测结果</p>
<br>&nbsp;
<p><img src="https://img2024.cnblogs.com/blog/192878/202504/192878-20250403155218140-707150071.png" alt="" loading="lazy"></p>
<p>&nbsp;内存情况</p>
<p><img src="https://img2024.cnblogs.com/blog/192878/202504/192878-20250403160345191-1800845719.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<h2>三、解决方案</h2>
<p>在主程序项目文件中，改成以下配置</p>
<div class="cnblogs_code">
<pre>        &lt;ServerGarbageCollection&gt;<span style="color: rgba(0, 0, 255, 1)">false</span>&lt;/ServerGarbageCollection&gt;
    &lt;ConcurrentGarbageCollection&gt;<span style="color: rgba(0, 0, 255, 1)">true</span>&lt;/ConcurrentGarbageCollection&gt;</pre>
</div>
<p>我这几天会继续压测， 会把dotnetty 最优配置更新到<a href="https://github.com/fanliang11/surging" target="_blank" rel="noopener nofollow">https://github.com/fanliang11/surging</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.010922015462962963" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-03 16:06">2025-04-03 16:05</span>&nbsp;
<a href="https://www.cnblogs.com/fanliang11">fanly11</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18807955" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18807955);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18807955', targetLink: 'https://www.cnblogs.com/fanliang11/p/18807955', title: '通过jmeter压测surging' })">举报</a>
</div>
        
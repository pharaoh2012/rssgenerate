
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/du-hong/p/18349296" title="发布于 2025-02-11 13:25">
    <span role="heading" aria-level="2">《刚刚问世》系列初窥篇-Java+Playwright自动化测试-12- iframe操作-上篇（详细教程）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h3 id="autoid-0-0-0">1.简介</h3>
<p>原估计宏哥这里就不对iframe这个知识点做介绍和讲解了，因为前边的窗口切换就为这种网页处理提供了思路，另一个原因就是虽然iframe很强大，但是现在很少有网站用它了。但是还是有小伙伴或者童鞋们私下问这个问题，那么宏哥就单独写一篇关于iframe网页处理的文章。iframe 是web自动化里面一个比较头疼的测试场景，在Selenium中处理 iframe 需要切换来切换去非常麻烦。但是在playwright中，让其变得非常简单，我们在使用中无需切换iframe，直接定位元素即可。</p>
<h3 id="autoid-0-1-0">2.iframe是什么</h3>
<p>iframe就是我们常用的iframe标签：&lt;iframe&gt;。iframe标签是框架的一种形式，也比较常用到，iframe一般用来包含别的页面，例如我们可以在我们自己的网站页面加载别人网站或者本站其他页面的内容。iframe标签的最大作用就是让页面变得美观。iframe标签的用法有很多，主要区别在于对iframe标签定义的形式不同，例如定义iframe的长宽高。简单的一句话概括就是：iframe 就是HTML 中，用于网页嵌套网页的。 一个网页可以嵌套到另一个网页中，可以嵌套很多层。和俄罗斯套娃差不多吧。</p>
<h3 id="autoid-0-2-0">3.iframe语法</h3>
<div>
<p>page.frame_locator()</p>
<div class="cnblogs_code">
<pre>locator = page.frame_locator("frame").get_by_text("登录");</pre>
</div>
<p>说明：使用frame_locator() 定位到iframe上，再在上面使用locator方法定位元素。</p>
<p>可以使用page.frame_locator()或locator.frame_locator()方法创建 FrameLocator 捕获足该 iframe 中检索和定位元素。</p>
<p>使用示例一：</p>
<div class="cnblogs_code">
<pre>Locator locator = page.frameLocator("#my-frame").getByText("Submit"<span style="color: rgba(0, 0, 0, 1)">);
locator.click();</span></pre>
</div>
<p>使用frame_locator() 定位到iframe上，然后继续在上面使用locator方法定位元素</p>
<p>iframe 定位器是严格的。这意味着如果有多个元素与给定的选择器匹配，则对 iframe 定位器的所有操作都会抛出异常。</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Throws if there are several frames in DOM:</span>
page.frame_locator(".result-frame"<span style="color: rgba(0, 0, 0, 1)">).getByRole(AriaRole.BUTTON).click();

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Works because we explicitly tell locator to pick the first frame:</span>
page.frame_locator(".result-frame").first().getByRole(AriaRole.BUTTON).click();</pre>
</div>
<p><strong>将 Locator 转换为 FrameLocator</strong></p>
<p>如果你有一个指向 的 Locator 对象，则可以使用 Locator.contentFrame（） 将其转换为 FrameLocator。iframe</p>
<p><strong>将 FrameLocator 转换为 Locator</strong></p>
<p>如果你有一个 FrameLocator 对象，则可以使用 FrameLocator.owner（） 将其转换为指向同一对象的 Locator。</p>
<h3 id="autoid-0-3-0">4.FrameLocator定位</h3>
<p>匹配第一个,将 locator 返回到第一个匹配的frame。</p>
<div class="cnblogs_code">
<pre>FrameLocator.first();</pre>
</div>
<p>匹配最后一个</p>
<div class="cnblogs_code">
<pre>FrameLocator.last();</pre>
</div>
<p>使用index索引</p>
<div class="cnblogs_code">
<pre>FrameLocator.nth(index);</pre>
</div>
<p>获取全部iframes</p>
<div class="cnblogs_code">
<pre>page.frames</pre>
</div>
<h3 id="autoid-0-4-0">5.frame() 定位</h3>
<p>一个页面可以附加一个或多个Frame对象。每个页面都有一个主框架，并且假设页面级交互（如单击）在主框架中操作。<br>页面可以附加带有iframe HTML标签的额外框架。可以访问这些帧以在帧内进行交互。</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Locate element inside frame</span>
Locator username = page.frameLocator(".frame-class").getByLabel("User Name"<span style="color: rgba(0, 0, 0, 1)">);
username.fill(</span>"John");</pre>
</div>
<h4 id="autoid-0-4-0">5.1frame对象</h4>
<p>可以使用Page.frame（）API访问框架对象：</p>
<p>根据name属性和url属性匹配</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Get frame using the frame"s name attribute</span>
Frame frame = page.frame("frame-login"<span style="color: rgba(0, 0, 0, 1)">);

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Get frame using frame"s URL</span>
Frame frame = page.frameByUrl(Pattern.compile(".*domain.*"<span style="color: rgba(0, 0, 0, 1)">));

</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> Interact with the frame</span>
frame.fill("#username-input", "John");</pre>
</div>
<h3 id="autoid-0-5-0">6.page.frame 和 page.frameLocator 区别</h3>
<p>page.frameLocator() 返回的对象需要用locator() 方法定位元素，再操作元素<br>page.frame() 返回的对象可直接使用fill() 、 click() 方法。</p>
<h3 id="autoid-0-6-0">7.项目实战</h3>
<p>网上找了半天也没有找到这样的例子，以前百度、163的邮箱是这种。最近几年技术升级了，已经不是这种了。不找了索性宏哥自己在本地做一个这样的小demo给小伙伴或者童鞋们来演示一下。</p>
<h4 id="autoid-0-7-0">7.1被测的HTML代码</h4>
<p>1.准备测试练习index.html，如下：</p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;北京-宏哥|iframeTestDemo&lt;/title&gt;
    &lt;style type="text/css"&gt;
        
        .button1 {
            background-color: #f44336; 
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 28px;
            margin-bottom: 100px;
            text-decoration:none;
            color: white;
        }
        #myAnchor
        {
          text-decoration:none;
          color: white;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body style="text-align:center"&gt;
&lt;div id="wrapper" style="position: relative;top: 100px;left:0px;"&gt;
    &lt;button class="button1"&gt;&lt;a id="myAnchor" href="https://www.cnblogs.com/du-hong/"&gt;北京-宏哥&lt;/a&gt;&lt;/button&gt;&lt;/br&gt;
    &lt;div id="id1"&gt;I am a index page's div!&lt;/div&gt;
    &lt;input type="text" id="maininput" /&gt;
    &lt;br/&gt;
    &lt;iframe id="frameA" frameborder="0" scrolling="no" style="left:857px;position:absolute;" src="iframe.html"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt; </pre>
</div>
<p>2.准备测试练习iframe.html，如下：</p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;I am a iframe!&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="div1"&gt;I am iframes div!&lt;/div&gt;
    &lt;input id="iframeinput"&gt;&lt;/input&gt;
&lt;/body&gt;
&lt;/html&gt; </pre>
</div>
<p>3.页面效果，如下图所示：</p>
<p><img src="https://img2020.cnblogs.com/blog/1232840/202111/1232840-20211104114358466-2129213670.png" alt="" class="medium-zoom-image" loading="lazy"></p>
<h3 id="autoid-0-7-1">8.牛刀小试</h3>
<h4 id="autoid-0-8-0">8.1代码设计</h4>
<p><img src="https://img2024.cnblogs.com/blog/1232840/202408/1232840-20240827101240354-2036712374.png" alt="" loading="lazy"></p>
<h4>8.2参考代码</h4>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 255, 1)">package</span><span style="color: rgba(0, 0, 0, 1)"> com.bjhg.playwright;

</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.Browser;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.BrowserContext;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.BrowserType;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.Locator;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.Page;
</span><span style="color: rgba(0, 0, 255, 1)">import</span><span style="color: rgba(0, 0, 0, 1)"> com.microsoft.playwright.Playwright;

</span><span style="color: rgba(0, 128, 0, 1)">/**</span><span style="color: rgba(0, 128, 0, 1)">
 * </span><span style="color: rgba(128, 128, 128, 1)">@author</span><span style="color: rgba(0, 128, 0, 1)"> 北京-宏哥
 * 
 * @公众号:北京宏哥（微信搜索，关注宏哥，提前解锁更多测试干货）
 * 
 * 《刚刚问世》系列初窥篇-Java+Playwright自动化测试-12- iframe操作-上篇（详细教程）
 *
 * 2024年8月31日
 </span><span style="color: rgba(0, 128, 0, 1)">*/</span>
<span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">class</span><span style="color: rgba(0, 0, 0, 1)"> Test_frame {
    
    </span><span style="color: rgba(0, 0, 255, 1)">public</span> <span style="color: rgba(0, 0, 255, 1)">static</span> <span style="color: rgba(0, 0, 255, 1)">void</span><span style="color: rgba(0, 0, 0, 1)"> main(String[] args) {
        </span><span style="color: rgba(0, 0, 255, 1)">try</span> (Playwright playwright =<span style="color: rgba(0, 0, 0, 1)"> Playwright.create()) {
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">1.使用chromium浏览器，# 浏览器配置，设置以GUI模式启动Chrome浏览器（要查看浏览器UI，在启动浏览器时传递 headless=false 标志。您还可以使用 slowMo 来减慢执行速度。</span>
          Browser browser = playwright.chromium().launch(<span style="color: rgba(0, 0, 255, 1)">new</span> BrowserType.LaunchOptions().setHeadless(<span style="color: rgba(0, 0, 255, 1)">false</span>).setSlowMo(3000<span style="color: rgba(0, 0, 0, 1)">));
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">2.创建context</span>
          BrowserContext context =<span style="color: rgba(0, 0, 0, 1)"> browser.newContext();
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">创建page</span>
          Page page =<span style="color: rgba(0, 0, 0, 1)"> context.newPage();
          
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">3.浏览器打开百度</span>
          page.navigate("file:///E:/Desktop/test/iframe/index.html"<span style="color: rgba(0, 0, 0, 1)">);
          System.out.println(page.title());
        
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 操作非 iframe上的元素</span>
          page.locator("[id='maininput']").fill("I am a index page's div!"<span style="color: rgba(0, 0, 0, 1)">);
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 操作 iframe 上的元素</span>
          Locator locator = page.frameLocator("#frameA").locator("[id='iframeinput']"<span style="color: rgba(0, 0, 0, 1)">);
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> xpath 匹配</span>
          locator.fill("This is a iframe input!"<span style="color: rgba(0, 0, 0, 1)">);
          
          System.out.println(</span>"Test Pass"<span style="color: rgba(0, 0, 0, 1)">);
          
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">关闭page</span>
<span style="color: rgba(0, 0, 0, 1)">          page.close();
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">关闭browser</span>
<span style="color: rgba(0, 0, 0, 1)">          browser.close();
        }
      }
}</span></pre>
</div>
<h4>8.3运行代码</h4>
<p>1.运行代码，右键Run As-&gt;Java Application，就可以看到控制台输出，如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/1232840/202408/1232840-20240827093421093-1919292586.png" alt="" loading="lazy"></p>
<p>2.运行代码后电脑端的浏览器的动作（将对应文字输入输入框）。如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/1232840/202408/1232840-20240827093616877-1162861790.gif" alt="" loading="lazy"></p>
<h3 id="autoid-0-8-3">9.小结</h3>
<p>好了，时间不早了，今天就分享到这里，下一篇宏哥找一个还有iframe的在线网页给小伙伴或者童鞋们实战演示一下。</p>
</div>
</div>
<div id="MySignature" role="contentinfo">
    <div id="MySignature" style="display: block">
<div style="font-size: 13px; border: 1px dashed rgb(45, 161, 45); padding: 10px 15px; background-color: rgb(248, 248, 248)">
<label style="font-weight: bold">
&nbsp;&nbsp;&nbsp;&nbsp;为了方便大家在移动端也能看到我分享的博文，现已注册个人微信公众号，扫描左下方二维码即可，欢迎大家关注，有时间会及时分享相关技术博文。</label><br>
<label style="font-weight: bold">
&nbsp;&nbsp;&nbsp;&nbsp;为了方便大家互动讨论相关技术问题，现已组建专门的微信群，由于微信群满100，请您扫描右下方宏哥个人微信二维码拉你进群<label style="font-weight: bold; color: red; font-size: 15px">（请务必备注：已关注公众号进群）平时上班忙（和你一样），所以加好友不及时，请稍安勿躁~</label>，欢迎大家加入这个大家庭，我们一起畅游知识的海洋。</label><br>
&nbsp;&nbsp;&nbsp;&nbsp;感谢您花时间阅读此篇文章,如果您觉得这篇文章你学到了东西也是为了犒劳下博主的码字不易不妨打赏一下吧，让博主能喝上一杯咖啡，在此谢过了！<br>
&nbsp;&nbsp;&nbsp;&nbsp;如果您觉得阅读本文对您有帮助，请点一下左下角<a id="recommend" style="font-weight: bold; color: red; font-size: 15px; text-decoration: underline">“推荐”</a>按钮，您的<label style="font-weight: bold; color: red; font-size: 15px">“推荐”</label>将是我最大的写作动力！另外您也可以选择<a id="follow_me_btn" style="cursor: pointer; color: blue; text-decoration: underline">【<strong>关注我</strong>】</a>，可以很方便找到我！<br>
&nbsp;&nbsp;&nbsp;&nbsp;本文版权归作者和博客园共有，来源网址：<a href="https://www.cnblogs.com/du-hong" style="color: red; text-decoration: underline" target="_blank">https://www.cnblogs.com/du-hong</a> 欢迎各位转载，但是未经作者本人同意，转载文章之后必须在文章页面明显位置给出作者和原文连接，否则保留追究法律责任的权利！
</div>
<div style="text-align: center; margin-top: 10px">
   <p style="
    font-weight: bolder;
    color: red;
">公众号(关注宏哥)&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;客服微信</p><img style="width: 200px; padding-right: 20%" alt="个人微信公众号" src="https://img2018.cnblogs.com/common/1741949/201911/1741949-20191119095948011-608816619.png">
   <img style="width: 200px" alt="个人微信" src="https://img2018.cnblogs.com/common/1741949/201911/1741949-20191106101257091-849954564.png">
</div>
</div>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.03736175553472222" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-11 13:26">2025-02-11 13:25</span>&nbsp;
<a href="https://www.cnblogs.com/du-hong">北京-宏哥</a>&nbsp;
阅读(<span id="post_view_count">40</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18349296" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18349296);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18349296', targetLink: 'https://www.cnblogs.com/du-hong/p/18349296', title: '《刚刚问世》系列初窥篇-Java+Playwright自动化测试-12- iframe操作-上篇（详细教程）' })">举报</a>
</div>
        
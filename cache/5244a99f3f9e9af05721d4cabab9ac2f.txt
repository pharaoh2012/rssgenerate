
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/tianqing/p/18774521" title="发布于 2025-03-17 08:44">
    <span role="heading" aria-level="2">AI Agent开发，如何调用三方的API Function，是通过提示词来发起调用的吗</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>最近在研究AI Agent如何调用三方API，整理了一篇文章，分享给大家。</p>
<p data-start="0" data-end="96">调用三方 API（Function Calling）<strong data-start="30" data-end="36">不是</strong>通过提示词（Prompt）来实现的，而是通过<strong data-start="58" data-end="86">函数调用机制（Function Calling）</strong>，具体流程如下：</p>
<h3 data-start="98" data-end="117">1. <strong data-start="105" data-end="117">模型识别调用需求</strong></h3>
<p data-start="118" data-end="191">大模型在解析用户输入时，会判断是否需要调用某个 API。如果需要，它不会直接生成文本回复，而是调用一个已注册的<strong data-start="174" data-end="190">函数（Function）</strong>。</p>
<h3 data-start="193" data-end="212">2. <strong data-start="200" data-end="212">API 方法注册</strong></h3>
<p data-start="213" data-end="257">开发者需要在调用API 时，<strong data-start="234" data-end="252">预先定义可用的 API 函数</strong>，并提供：</p>
<ul data-start="261" data-end="354">
<li data-start="261" data-end="288"><strong data-start="263" data-end="271">函数名称</strong>（如 <code data-start="274" data-end="287">get_weather</code>）</li>
<li data-start="292" data-end="325"><strong data-start="294" data-end="302">参数定义</strong>（使用 JSON Schema 描述参数结构）</li>
<li data-start="329" data-end="354"><strong data-start="331" data-end="339">描述信息</strong>（帮助大模型理解函数用途）</li>
</ul>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">{
  </span>"name": "get_weather"<span style="color: rgba(0, 0, 0, 1)">,
  </span>"description": "获取某个城市的天气信息"<span style="color: rgba(0, 0, 0, 1)">,
  </span>"parameters"<span style="color: rgba(0, 0, 0, 1)">: {
    </span>"type": "object"<span style="color: rgba(0, 0, 0, 1)">,
    </span>"properties"<span style="color: rgba(0, 0, 0, 1)">: {
      </span>"city"<span style="color: rgba(0, 0, 0, 1)">: {
        </span>"type": "string"<span style="color: rgba(0, 0, 0, 1)">,
        </span>"description": "城市名称"<span style="color: rgba(0, 0, 0, 1)">
      }
    },
    </span>"required": ["city"<span style="color: rgba(0, 0, 0, 1)">]
  }
}</span></pre>
</div>
<h3 data-start="610" data-end="633">3. 大模型<strong data-start="617" data-end="633">生成函数调用请求</strong></h3>
<p data-start="634" data-end="642">当用户输入类似：</p>
<blockquote data-start="643" data-end="658">
<p data-start="645" data-end="658">"北京今天的天气怎么样？"</p>
</blockquote>
<p data-start="660" data-end="669">大模型会解析出：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">{
  </span>"name": "get_weather"<span style="color: rgba(0, 0, 0, 1)">,
  </span>"arguments"<span style="color: rgba(0, 0, 0, 1)">: {
    </span>"city": "北京"<span style="color: rgba(0, 0, 0, 1)">
  }
}</span></pre>
</div>
<p><strong>&nbsp;</strong></p>
<h3 data-start="765" data-end="790">4. AI Agent/程序<strong data-start="772" data-end="790">调用三方 API 并返回结果</strong></h3>
<p data-start="791" data-end="813">AI Agent/程序中，可以：</p>
<ul data-start="814" data-end="861">
<li data-start="814" data-end="836">调用实际的 API（如天气服务 API）</li>
<li data-start="837" data-end="843">获取数据</li>
<li data-start="844" data-end="861">将数据附加到Prompt中返回给大模型继续处理</li>
</ul>
<p data-start="863" data-end="866">示例：</p>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">{
  </span>"temperature": "15°C"<span style="color: rgba(0, 0, 0, 1)">,
  </span>"weather": "晴天"<span style="color: rgba(0, 0, 0, 1)">
}</span></pre>
</div>
<h3 data-start="927" data-end="953">5. 大模型<strong data-start="934" data-end="953">解析结果并返回最终文本</strong></h3>
<p data-start="954" data-end="984">大模型处理 API 返回的数据，并生成自然语言回复给用户：</p>
<blockquote data-start="985" data-end="1005">
<p data-start="987" data-end="1005">"北京今天是晴天，气温 15°C。"</p>
</blockquote>
<p></p>
<h3 data-start="1012" data-end="1022"><strong data-start="1016" data-end="1022">总结</strong></h3>
<ul data-start="1023" data-end="1179">
<li data-start="1023" data-end="1062"><strong data-start="1025" data-end="1062">不是通过提示词（Prompt）来调用 API，而是通过函数调用机制</strong></li>
<li data-start="1063" data-end="1085"><strong data-start="1065" data-end="1085">开发者需要预先注册 API 函数</strong></li>
<li data-start="1086" data-end="1115"><strong data-start="1088" data-end="1115">大模型识别需求后，自动构造 API 调用参数</strong></li>
<li data-start="1116" data-end="1147"><strong data-start="1118" data-end="1147">开发者负责执行 API 请求，并将结果返回 GPT</strong></li>
<li data-start="1148" data-end="1179"><strong data-start="1150" data-end="1179">大模型解析 API 结果并生成最终用户可读的回复</strong></li>
</ul>
<p><strong data-start="1150" data-end="1179">周国庆</strong></p>
<p><strong data-start="1150" data-end="1179">2025/03/16</strong></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015841859002314815" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-17 08:45">2025-03-17 08:44</span>&nbsp;
<a href="https://www.cnblogs.com/tianqing">Eric zhou</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18774521" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18774521);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18774521', targetLink: 'https://www.cnblogs.com/tianqing/p/18774521', title: 'AI Agent开发，如何调用三方的API Function，是通过提示词来发起调用的吗' })">举报</a>
</div>
        
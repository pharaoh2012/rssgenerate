
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ourhouzi/p/18906626" title="发布于 2025-06-01 23:50">
    <span role="heading" aria-level="2">tkela二次开发之lay文件解析</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>　在tekla的一些配置文件中绝大都是本文格式存储的，如.dim；.ad；.vi;.tpl等文件；但是其中.lay文件却是一个例外；这个文件用txt开打时里面是会有乱码的。</p>
<p>　　我们知道这个文件是在软件的界面中配置的，其中版面布置中的每一个行数据对应一份lay文件。</p>
<p><img src="https://img2024.cnblogs.com/blog/989535/202506/989535-20250601215118170-1245962922.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>　　接下来我们就对这个文件中的内容进行解析：下图是用程序读取文件的二进制数据，截取了其中一部分；其中每一个格子表示一个Byte位，从0到255；</p>
<p><img src="https://img2024.cnblogs.com/blog/989535/202506/989535-20250601214313529-1227507772.png" alt="" width="1485" height="632" loading="lazy"></p>
<p>　　这个文件中的数据分为三部分：</p>
<p>一、第一部分是数据头；长度不一定；因这一部分数据对二开没什么作用就不做解析了。</p>
<p>二、第二部分数据是表格布置列表（图一中间）其中一组数据为177位；数据位置含义如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/989535/202506/989535-20250601215554411-1647794566.png" alt="" loading="lazy"></p>
<p>　　1、前5位46100表示一组数据的起始位；</p>
<p>　　2、5-8这4位表示此表格布置的Id；数据为INT32类型；</p>
<p>　　3、13-75这63位表示表格布置的名称；编码格式位ANSI；</p>
<p>　　4、77-88这个12位表示 e3_sheet_tab 这个固定的这12个单词；</p>
<p>　　5、145-152这8位表示边缘宽度这个属性；数据为double格式；</p>
<p>　　6、153-160这8位表示边缘高度这个属性；数据为double格式；</p>
<p>　　7、161-168这8位表示间隔水平的这个属性；数据为double格式；</p>
<p>　　8、169-176这8位表示间隔垂直的这个属性；数据为double格式；</p>
<p>三、第三部分数据表格是已选择的表格列表（图一右图）其中一组数据为573位；数据位置含义如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/989535/202506/989535-20250601221717659-513968773.png" alt="" loading="lazy"></p>
<p>　　1、前5位47100表示一组数据的起始位；</p>
<p>　　2、5-8这4位表示此已选表格的Id；数据为INT32类型；</p>
<p>　　3、13-267这255位表示已选择的表格的名称；编码格式位ANSI；</p>
<p>　　4、269-272这4位表示父表格id（数据二中的5-8位）；数据为INT32类型；</p>
<p>　　5、273-276这4位表示常考表格的id；数据为INT32类型；</p>
<p>　　6、281-288这8位表示比例这个属性；数据为double格式；</p>
<p>　　7、289-296这8位表示角部间的矢量x这个属性；数据为double格式；</p>
<p>　　8、297-304这8位表示角部间的矢量y这个属性；数据为double格式；</p>
<p>　　9、305-308这4位表示参考的排布这个属性；数据为INT32类型；其中1234分表示右上、右下、左上、坐下；</p>
<p>　　10、309-312这4位表示参考的排布这个属性；数据为INT32类型；其中1234分表示右上、右下、左上、坐下；</p>
<p>　　11、569这1位表示透明的这个属性； 1为透明 0为不透明；</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.018552347631944445" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-01 23:51">2025-06-01 23:50</span>&nbsp;
<a href="https://www.cnblogs.com/ourhouzi">科院猴子</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18906626);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18906626', targetLink: 'https://www.cnblogs.com/ourhouzi/p/18906626', title: 'tkela二次开发之lay文件解析' })">举报</a>
</div>
        
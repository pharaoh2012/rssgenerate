
		<div class="postcontent">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä¸ºä»€ä¹ˆè¦å­¦ä¹ linq--ä½¿å¤„ç†æ•°æ®å˜å¾—ç®€å•">ä¸ºä»€ä¹ˆè¦å­¦ä¹ linq  ï¼šä½¿å¤„ç†æ•°æ®å˜å¾—ç®€å•</h1>
<h2 id="éœ€æ±‚">éœ€æ±‚ï¼š</h2>
<p>ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„é¢‘ç‡ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Œç„¶åæŒ‰ç…§ä»é«˜åˆ°ä½çš„é¡ºåºè¾“å‡ºå‡ºç°é¢‘ç‡é«˜äºä¸¤æ¬¡çš„å•è¯å’Œå…¶å‡ºç°çš„é¢‘ç‡</p>
<pre><code>var items = s.Where(c =&gt; char.IsLetter(c))//è¿‡æ»¤éå­—æ¯
			.Select(c =&gt; char.ToLower(c))//å¤§å†™å­—æ¯è½¬å°å†™
			.GroupBy(c =&gt; c)//æ ¹æ®å­—æ¯åˆ†ç»„
			.Where(g =&gt; g.Count()&gt;2)//è¿‡æ»¤æ‰å‡ºç°æ¬¡æ•°&lt;=2
			.OrderByDescending(g =&gt; g.Count())//æŒ‰æ¬¡æ•°æ’åº
			.Select(g =&gt; new {Char = g.Key, Count = g.Count()})
</code></pre>
<h2 id="å§”æ‰˜lambdalinq">å§”æ‰˜â€”â€”&gt;lambdaâ€”â€”&gt;LINQ</h2>
<h3 id="å§”æ‰˜">å§”æ‰˜</h3>
<p>1ã€å§”æ‰˜æ˜¯æŒ‡å‘æ–¹æ³•çš„ç±»å‹ï¼Œè°ƒç”¨å§”æ‰˜å˜é‡æ—¶æ‰§è¡Œçš„å°±æ˜¯å˜é‡æŒ‡å‘çš„æ–¹æ³•<br>
2ã€.NETä¸­å®šä¹‰äº†æ³›å‹å§”æ‰˜Action(æ— è¿”å›å€¼)å’ŒFuncï¼ˆæœ‰è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ç”¨è‡ªå®šä¹‰å§”æ‰˜</p>
<h4 id="demo-è‡ªå®šä¹‰-å§”æ‰˜">Demo è‡ªå®šä¹‰ å§”æ‰˜</h4>
<h5 id="ä¸å¸¦è¿”å›å€¼çš„å§”æ‰˜">ä¸å¸¦è¿”å›å€¼çš„å§”æ‰˜</h5>
<p>** delegate void d(); **</p>
<pre><code>namespace å§”æ‰˜
{
    delegate void d();

    internal class Program
    {
        static void Main(string[] args)
        {
            d d1 = F1;
            d1();
           
        }

        public static void F1()
        {
            Console.WriteLine("æˆ‘æ˜¯F1");
        }

        public static void F2()
        {
            Console.WriteLine("æˆ‘æ˜¯F2");
        }
    }
}
</code></pre>
<p>è¾“å‡ºä¸ºï¼š<br>
æˆ‘æ˜¯F1</p>
<pre><code>namespace å§”æ‰˜
{
    delegate void d();

    internal class Program
    {
        static void Main(string[] args)
        {
            d d1 = F1;
            d1();
            d1 = F2;
            d1();
           
        }

        public static void F1()
        {
            Console.WriteLine("æˆ‘æ˜¯F1");
        }

        public static void F2()
        {
            Console.WriteLine("æˆ‘æ˜¯F2");
        }
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<br>
æˆ‘æ˜¯F1<br>
æˆ‘æ˜¯F2</p>
<h5 id="å¸¦è¿”å›å€¼">å¸¦è¿”å›å€¼</h5>
<pre><code>namespace å§”æ‰˜
{
    delegate void d();
    delegate int b(int i,int j );
    internal class Program
    {
        static void Main(string[] args)
        {
            d d1 = F1;
            d1();
            d1 = F2;
            d1();
            b b1 = F3;
            b1(3, 5);
           
        }

        public static void F1()
        {
            Console.WriteLine("æˆ‘æ˜¯F1");
        }

        public static void F2()
        {
            Console.WriteLine("æˆ‘æ˜¯F2");
        }

        public static int F3(int a ,int b)
        {
              Console.WriteLine($"{a+b}");
			  return a;
        }
    }
}

</code></pre>
<p>è¾“å‡º<br>
æˆ‘æ˜¯F1<br>
æˆ‘æ˜¯F2<br>
8</p>
<h3 id="lambdaæ˜¯æ€ä¹ˆæ¥çš„">Lambdaæ˜¯æ€ä¹ˆæ¥çš„</h3>
<h4 id="demo">Demo</h4>
<h5 id="æ²¡æœ‰å‚æ•°æ²¡æœ‰è¿”å›å€¼çš„åŒ¿åæ–¹æ³•">æ²¡æœ‰å‚æ•°æ²¡æœ‰è¿”å›å€¼çš„åŒ¿åæ–¹æ³•</h5>
<pre><code>namespace å§”æ‰˜
{

    internal class Program
    {
        static void Main(string[] args)
        {
            Action f1 = delegate ()
            {
                Console.WriteLine("æˆ‘æ˜¯AAA");
            };
            f1();
        }

       
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<br>
æˆ‘æ˜¯AAA</p>
<h5 id="å¸¦å‚æ•°çš„åŒ¿åå‡½æ•°">å¸¦å‚æ•°çš„åŒ¿åå‡½æ•°</h5>
<pre><code>namespace å§”æ‰˜
{

    internal class Program
    {
        static void Main(string[] args)
        {
            Action f1 = delegate ()
            {
                Console.WriteLine("æˆ‘æ˜¯AAA");
            };
            f1();

            Action&lt;int,int&gt; f2 = delegate (int i, int j)
            {
                Console.WriteLine($"i ={i},j={j}");
            };
            f2(1,2);
        }

       
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<br>
æˆ‘æ˜¯AAA<br>
i =1,j=2</p>
<h5 id="å¸¦å‚æ•°å¸¦è¿”å›å€¼çš„åŒ¿åå‡½æ•°">å¸¦å‚æ•°å¸¦è¿”å›å€¼çš„åŒ¿åå‡½æ•°</h5>
<pre><code>namespace å§”æ‰˜
{

    internal class Program
    {
        static void Main(string[] args)
        {
            Action f1 = delegate ()
            {
                Console.WriteLine("æˆ‘æ˜¯AAA");
            };
            f1();

            Action&lt;int,int&gt; f2 = delegate (int i, int j)
            {
                Console.WriteLine($"i ={i},j={j}");
            };
            f2(1,2);

            Func&lt;int, int, int&gt; f3 = delegate (int i, int j)
            {
                return i + j;
            };
            Console.WriteLine(f3(1, 2));
            
        }

       
    }
}

</code></pre>
<p>è¾“å‡º<br>
æˆ‘æ˜¯AAA<br>
i =1,j=2<br>
3</p>
<h4 id="è¿›å…¥ä¸»é¢˜-lambdaè¡¨è¾¾å¼">è¿›å…¥ä¸»é¢˜ Lambdaè¡¨è¾¾å¼</h4>
<p>åŒ¿åæ–¹æ³•å¯ä»¥å†™å‡ºlambdaè¡¨è¾¾å¼<br>
Func&lt;int,int,string&gt; f1 = (i1,i2)=&gt;{<br>
return $"{i1}+{i2}={i1+i2}";<br>
};<br>
å¯ä»¥çœç•¥å‚æ•°æ•°æ®ç±»å‹ï¼Œå› ä¸ºç¼–è¯‘èƒ½æ ¹æ®å§”æ‰˜ç±»å‹æ¨æ–­å‡ºå‚æ•°çš„ç±»å‹ï¼Œç”¨=&gt;å¼•å‡ºæ¥æ–¹æ³•ä½“</p>
<h4 id="demo-1">Demo</h4>
<pre><code>namespace å§”æ‰˜
{

    internal class Program
    {
        static void Main(string[] args)
        {
            Action f1 = delegate ()
            {
                Console.WriteLine("æˆ‘æ˜¯AAA");
            };
            f1();

            Action&lt;int,int&gt; f2 = delegate (int i, int j)
            {
                Console.WriteLine($"i ={i},j={j}");
            };
            f2(1,2);

            Func&lt;int, int, int&gt; f3 = delegate (int i, int j)
            {
                return i + j;
            };
            Console.WriteLine(f3(1, 2));
            
            Func&lt;int,int,int&gt; f4 = (int i,int j)=&gt; { return i + j; };

            Console.WriteLine(f4(1,2));
        }

       
    }
}

</code></pre>
<p>è¿™é‡Œf3å’Œf4çš„è¾“å‡ºæ˜¯ä¸€æ ·çš„æ‰€ä»¥<br>
å¯ä»¥æŠŠdelegate æ¢æˆ =&gt; (â€œ=&gt;â€ è¯»ä½œgoes to)<br>
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­è¿˜å¯ä»¥çœç•¥å‚æ•°çš„æ•°æ®ç±»å‹ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥æ¨æ–­<br>
å³</p>
<pre><code> Func&lt;int, int, int&gt; f5 = (i,j) =&gt; { return i + j; };

 Console.WriteLine(f5(1, 2));
</code></pre>
<blockquote>
<p>å¦‚æœå§”æ‰˜æ²¡æœ‰è¿”å›å€¼ä¸”æ–¹æ³•ä½“åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥çœç•¥{}</p>
</blockquote>
<pre><code> Action f1 = delegate ()
 {
     Console.WriteLine("æˆ‘æ˜¯AAA");
 };
 f1();

 Action f11 =() =&gt; Console.WriteLine("æˆ‘æ˜¯AAA");

 Action&lt;int,int&gt; f2 = delegate (int i, int j)
 {
     Console.WriteLine($"i ={i},j={j}");
 };
 f2(1,2);

 Action &lt;int,int&gt; f22 = (int i, int j) =&gt; Console.WriteLine($"i ={i},j={j}");

</code></pre>
<blockquote>
<p>å¦‚æœ=&gt; åçš„æ–¹æ³•ä½“ä¸­åªæœ‰ä¸€è¡Œä»£ç ï¼Œä¸”æ–¹æ³•ä½“æœ‰è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥æ–¹æ³•ä½“çš„{}å’Œreturn</p>
</blockquote>
<pre><code>            Func&lt;int, int, int&gt; f5 = (i,j) =&gt; { return i + j; };

            Console.WriteLine(f5(1, 2));

            Func&lt;int, int, int&gt; f6 = (i, j) =&gt;  i + j;

            Console.WriteLine(f5(1, 2));
</code></pre>
<blockquote>
<p>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°çš„ï¼ˆï¼‰å¯ä»¥çœç•¥</p>
</blockquote>
<h4 id="è¿˜åŸä¸‹é¢çš„lambdaè¡¨è¾¾å¼">è¿˜åŸä¸‹é¢çš„Lambdaè¡¨è¾¾å¼</h4>
<pre><code>Action&lt;string&gt; f7 = s =&gt; Console.WriteLine(s);
</code></pre>
<pre><code>Action&lt;string&gt; f77 = (string s) =&gt; { Console.WriteLine(s); };
</code></pre>
<h4 id="ç®€åŒ–ä¸‹é¢çš„å¼å­">ç®€åŒ–ä¸‹é¢çš„å¼å­</h4>
<pre><code>Func&lt;int, bool&gt; f8 = delegate (int i)
{
    return i &gt; 0;
};
</code></pre>
<pre><code>Func&lt;int, bool&gt; f88 = i =&gt; i &gt; 0;
</code></pre>
<p>å†™åˆ°è¿™ï¼Œæ„Ÿæ…¨ä¸‹è¯­æ³•ç³–çœŸçš„æ˜¯å¤ªç”œäº† ğŸ¤</p>
<h2 id="æ­ç§˜linqæ–¹æ³•çš„èƒŒå-ç®€åŒ–æ•°æ®å¤„ç†">æ­ç§˜LINQæ–¹æ³•çš„èƒŒå â€”â€”ç®€åŒ–æ•°æ®å¤„ç†</h2>
<h3 id="å…¥é—¨æ¡ˆä¾‹">å…¥é—¨æ¡ˆä¾‹ï¼š</h3>
<blockquote>
<p>å¯¹äºint[] nums = new [] {1,2,3,2,1,23,25} æ‰“å°å¤§äº10</p>
</blockquote>
<pre><code>namespace Linq
{
    internal class Program
    {
        static void Main(string[] args)
        {
            //å¯¹äºint[] nums = new [] {1,2,3,2,1,23,25} æ‰“å°å¤§äº10
            int[] nums = new[] { 1, 2, 3, 2, 1, 23, 25 };
            //æ³•1
            foreach (var item in nums)
            {
                if(item &gt; 10)
                {
                    Console.WriteLine(item);
                }
            }

            //æ³•2
            var nums2 = nums.Where(x =&gt; x &gt; 10).ToArray();
            foreach (var item in nums2)
            {
                Console.WriteLine(item);
            }
        }
    }
}
</code></pre>
<h4 id="è‡ªå·±å®ç°ä¸€ä¸ªwhereæ–¹æ³•">è‡ªå·±å®ç°ä¸€ä¸ªwhereæ–¹æ³•</h4>
<pre><code> static IEnumerable&lt;int&gt; MyWhere(IEnumerable&lt;int&gt; items,Func&lt;int,bool&gt; f)
 {
     List&lt;int&gt; result = new List&lt;int&gt;();
     foreach (var item in items)
     {
         if(f(item))
         {
             result.Add(item);
         }
     }
     return result;
 }
</code></pre>
<p>é‚£ä¹ˆä¸Šè¿°é¢˜ç›®å°±è¿˜æœ‰ä¸€ç§å®ç°æ–¹æ³•</p>
<pre><code>//æ³•3
var num3 = MyWhere(nums, a =&gt; a &gt; 10);
foreach (var item in num3)
{
    Console.WriteLine(item);
}
</code></pre>
<h4 id="ä½¿ç”¨yieid">ä½¿ç”¨yieId</h4>
<pre><code>static IEnumerable&lt;int&gt; MyWhere(IEnumerable&lt;int&gt; items,Func&lt;int,bool&gt; f)
{
    foreach (var item in items)
    {
        if(f(item))
        {
            yield return item;
        }
    }
    
}
</code></pre>
<blockquote>
<p>yieId : æ»¡è¶³æ¡ä»¶çš„æ•°æ®ç«‹å³è¿”å›ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€æ¡ï¼Œæ•°æ®å¤„ç†çš„æ•ˆç‡é«˜</p>
</blockquote>
<h2 id="linqä¸­å¸¸ç”¨çš„æ‰©å±•æ–¹æ³•">Linqä¸­å¸¸ç”¨çš„æ‰©å±•æ–¹æ³•</h2>
<blockquote>
<p>åœ¨System.Linqå‘½åç©ºé—´ä¸­</p>
</blockquote>
<h3 id="å‡†å¤‡åˆå§‹æ•°æ®">å‡†å¤‡åˆå§‹æ•°æ®</h3>
<pre><code>public class Employee
{
    public long Id { get; set; }

    public string Name { get; set; }

    public int Age { get; set; }

    public bool Gender { get; set; }

    public int Salary { get; set; }

    public override string ToString()
    {
        return $"Id = {Id},Name = {Name}, Age = {Age}, Gender = {Gender} ,Salary = {Salary}";
    }
}
</code></pre>
<pre><code> static void Main(string[] args)
 {
     List&lt;Employee&gt; list = new List&lt;Employee&gt;();
     list.Add(new Employee { Id = 1001, Name = "åˆ˜ç£Š", Age = 51, Gender = false, Salary = 9797 });
     list.Add(new Employee { Id = 1002, Name = "11", Age = 16, Gender = true, Salary = 13968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜1", Age = 21, Gender = false, Salary = 9737 });
     list.Add(new Employee { Id = 1002, Name = "21", Age = 49, Gender = true, Salary = 3968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜2ç£Š", Age = 51, Gender = false, Salary = 4757 });
     list.Add(new Employee { Id = 1002, Name = "131", Age = 16, Gender = true, Salary = 8968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜3ç£Š", Age = 91, Gender = false, Salary = 8797 });
     list.Add(new Employee { Id = 1002, Name = "31", Age = 26, Gender = true, Salary = 6968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜4ç£Š", Age = 81, Gender = false, Salary = 5797 });
     list.Add(new Employee { Id = 1002, Name = "åˆ˜èŠ³", Age = 36, Gender = true, Salary = 5968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜5ç£Š", Age = 11, Gender = false, Salary = 9777 });
     list.Add(new Employee { Id = 1002, Name = "å‘¨å‹‡", Age = 74, Gender = true, Salary = 6968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜6ç£Š", Age = 15, Gender = false, Salary = 7897 });
     list.Add(new Employee { Id = 1002, Name = "åˆ˜æ¶›", Age = 46, Gender = true, Salary = 6968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜7ç£Š", Age = 18, Gender = false, Salary = 5497 });
     list.Add(new Employee { Id = 1002, Name = "å‘¨å‹‡", Age = 56, Gender = true, Salary = 6968 }); list.Add(new Employee { Id = 1001, Name = "åˆ˜8ç£Š", Age = 51, Gender = false, Salary = 5457 });
     list.Add(new Employee { Id = 1002, Name = "æä¼Ÿ", Age = 44, Gender = true, Salary = 1368 });
 }
</code></pre>
<h3 id="å¸¸ç”¨æ‰©å±•æ–¹æ³•">å¸¸ç”¨æ‰©å±•æ–¹æ³•</h3>
<h4 id="where">Where:</h4>
<blockquote>
<p>æ¯ä¸€é¡¹æ•°æ®éƒ½ä¼šç»è¿‡predicateçš„æµ‹è¯•ï¼Œå¦‚æœé’ˆå¯¹ä¸€ä¸ªå…ƒç´ ï¼Œpredicateæ‰§è¡Œçš„è¿”å›å€¼ä¸ºtrue ,é‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¼šæ”¾åˆ°è¿”å›å€¼ä¸­<br>
whereå‚æ•°æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ ¼å¼çš„åŒ¿åæ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°eè¡¨ç¤ºå½“å‰åˆ¤æ–­çš„å…ƒç´ å¯¹è±¡ã€‚å‚æ•°çš„åå­—ä¸ä¸€å®šéå«e,ä¸è¿‡ä¸€èˆ¬lambdaè¡¨è¾¾å¼ä¸­çš„å˜é‡åé•¿åº¦éƒ½ä¸é•¿</p>
</blockquote>
<h5 id="è¾“å‡ºä¸Šé¢å¹´é¾„å¤§äº30çš„">è¾“å‡ºä¸Šé¢å¹´é¾„å¤§äº30çš„</h5>
<pre><code>#region Where
list.Where(x =&gt; x.Age &gt; 30).ToList().ForEach(x =&gt; Console.WriteLine(x));
#endregion
</code></pre>
<h4 id="count">Countï¼š</h4>
<blockquote>
<p>è·å–æ•°æ®æ¡æ•°</p>
</blockquote>
<pre><code>  #region Count
  var count = list.Count(x =&gt; x.Age &gt; 30);
  Console.WriteLine(count);
  #endregion
</code></pre>
<p>å¦‚æœç”¨çš„æ˜¯ä¸Šè¿°æ•°æ®çš„è¯è¾“å‡ºåº”è¯¥æ˜¯11</p>
<h4 id="any">Any</h4>
<blockquote>
<p>æ˜¯å¦è‡³å°‘æœ‰ä¸€æ¡æ•°æ®</p>
</blockquote>
<pre><code>            #region Any
            //æ˜¯å¦æœ‰åå­—å«å¼ ä¸‰çš„å¦‚æœæœ‰è¿”å›trueï¼Œæ²¡æœ‰è¿”å›false
            var isExist = list.Any(x =&gt; x.Name == "å¼ ä¸‰");
            Console.WriteLine(isExist);
            #endregion
</code></pre>
<p>è¾“å‡ºfalse</p>
<h4 id="è·å–ä¸€æ¡æ•°æ®æ˜¯å¦å¸¦å‚æ•°çš„ä¸¤ç§å†™æ³•">è·å–ä¸€æ¡æ•°æ®ï¼ˆæ˜¯å¦å¸¦å‚æ•°çš„ä¸¤ç§å†™æ³•ï¼‰</h4>
<h5 id="single">Single</h5>
<blockquote>
<p>æœ‰ä¸”åªæœ‰ä¸€æ¡æ»¡è¶³è¦æ±‚çš„æ•°æ®<br>
åªèƒ½ç­›é€‰ä¸€æ¡æ•°æ®ï¼Œå¦‚æœç­›é€‰çš„æ•°æ®å¤šä½™ä¸€æ¡å°±ä¼šæŠ¥é”™ï¼ˆSystem.InvalidOperationException:â€œSequence contains more than one elementâ€ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„ä¹Ÿä¼šæŠ¥é”™</p>
</blockquote>
<h6 id="ç­›é€‰çš„æ•°æ®å¤šäº1æ¡">ç­›é€‰çš„æ•°æ®å¤šäº1æ¡</h6>
<pre><code>#region Single
Console.WriteLine(list.Single());
#endregion
</code></pre>
<p>è¾“å‡ºå¼‚å¸¸ï¼šSystem.InvalidOperationException:â€œSequence contains more than one elementâ€</p>
<h6 id="ç­›é€‰çš„æ•°æ®åˆšå¥½1æ¡">ç­›é€‰çš„æ•°æ®åˆšå¥½1æ¡</h6>
<pre><code>Console.WriteLine(list.Where(x =&gt; x.Name == "11").Single());
</code></pre>
<p>è¾“å‡ºå¯¹è±¡</p>
<blockquote>
<p>Id = 1002,Name = 11, Age = 16, Gender = True ,Salary = 13968</p>
</blockquote>
<p>ä¸Šè¿°çš„å†™æ³•è¿˜å¯ä»¥å†™æˆä¸‹é¢çš„</p>
<pre><code>#region Single
Console.WriteLine(list.Where(x =&gt; x.Name == "11").Single());
Console.WriteLine(list.Single(x =&gt; x.Name == "11"));
#endregion
</code></pre>
<h6 id="ç­›é€‰çš„æ•°æ®å°‘äºä¸€æ¡">ç­›é€‰çš„æ•°æ®å°‘äºä¸€æ¡</h6>
<pre><code> #region Single
 Console.WriteLine(list.Where(x =&gt; x.Name == "å¼ ä¸‰").Single());
 #endregion
</code></pre>
<p>è¾“å‡ºå¼‚å¸¸ï¼šSystem.InvalidOperationException:â€œSequence contains no elementsâ€</p>
<blockquote>
<p>ç»“åˆskip</p>
</blockquote>
<h5 id="singleordefault">SingleOrDefault</h5>
<blockquote>
<p>æœ€å¤šåªæœ‰ä¸€æ¡æ»¡è¶³è¦æ±‚çš„æ•°æ®</p>
</blockquote>
<h6 id="ç­›é€‰çš„æ•°æ®å¤šäº1æ¡-1">ç­›é€‰çš„æ•°æ®å¤šäº1æ¡</h6>
<pre><code>            #region SingleOrDefault
            int[] nums33 = new int[] { 1, 2, 4 };
            int i = nums33.SingleOrDefault(i =&gt; i &gt; 0);
            Console.WriteLine(i);
            #endregion 
</code></pre>
<p>è¾“å‡ºå¼‚å¸¸ï¼šSystem.InvalidOperationException:â€œSequence contains more than one matching elementâ€</p>
<h6 id="ç­›é€‰çš„æ•°æ®ç­‰äºä¸€æ¡">ç­›é€‰çš„æ•°æ®ç­‰äºä¸€æ¡</h6>
<pre><code>#region SingleOrDefault
int[] nums33 = new int[] { 1, 2, 4 };
int i = nums33.SingleOrDefault(i =&gt; i &gt; 3);
Console.WriteLine(i);
#endregion
</code></pre>
<p>è¾“å‡º4</p>
<h6 id="ç­›é€‰çš„æ•°æ®å°äºä¸€æ¡">ç­›é€‰çš„æ•°æ®å°äºä¸€æ¡</h6>
<p><mark>è¾“å‡º0ä¸ä¼šæŠ¥é”™</mark></p>
<h5 id="first">First</h5>
<blockquote>
<p>è‡³å°‘æœ‰ä¸€æ¡ï¼Œè¿”å›ç¬¬ä¸€æ¡</p>
</blockquote>
<p>å¦‚æœä¸€ä¸ªéƒ½æ²¡æœ‰å°±æŠ¥é”™</p>
<h5 id="firstordefault">FirstOrDefault</h5>
<blockquote>
<p>è¿”å›ç¬¬ä¸€æ¡æˆ–è€…é»˜è®¤å€¼</p>
</blockquote>
<blockquote>
<p>é˜²å¾¡æ€§ç¼–ç¨‹ï¼šé€‰æ‹©åˆé€‚çš„æ–¹æ³•</p>
</blockquote>
<h4 id="æ’åº">æ’åº</h4>
<h5 id="orderby">OrderBy</h5>
<blockquote>
<p>å¯¹æ•°æ®æ­£åºæ’åº</p>
</blockquote>
<h5 id="orderbydescending">OrderByDescending</h5>
<blockquote>
<p>å€’åºæ’åº</p>
</blockquote>
<h5 id="éšæœºæ’åº">éšæœºæ’åº</h5>
<pre><code>
            #region éšæœºæ’åº
            var random = list.OrderBy(x =&gt; Guid.NewGuid());
            random.ToList().ForEach(x =&gt; Console.WriteLine(x));
            #endregion
</code></pre>
<h5 id="æ··åˆæ¡ä»¶æ’åºthenby">æ··åˆæ¡ä»¶æ’åºï¼ˆThenByï¼‰</h5>
<p>æŒ‰å¹´é¾„æ’åºï¼Œå¦‚æœå¹´é¾„ä¸€æ ·å†æŒ‰å·¥èµ„æ’åº</p>
<pre><code>            #region æŒ‰å¹´é¾„æ’åºï¼Œå¦‚æœå¹´é¾„ä¸€æ ·å†æŒ‰å·¥èµ„æ’åº
            var em = list.OrderBy(e =&gt; e.Age).ThenBy(x =&gt; x.Salary);
            em.ToList().ForEach(x =&gt; Console.WriteLine(x));
            #endregion
</code></pre>
<h4 id="é™åˆ¶ç»“æœé›†">é™åˆ¶ç»“æœé›†</h4>
<h5 id="skipn">Skipï¼ˆnï¼‰</h5>
<blockquote>
<p>è·³è¿‡næ¡æ•°æ®</p>
</blockquote>
<h5 id="taken">Take(n)</h5>
<blockquote>
<p>è·å–næ¡æ•°æ®</p>
</blockquote>
<h6 id="demo-2">Demo</h6>
<h6 id="è·³è¿‡å‰ä¸¤æ¡æ•°æ®å–ä¸‰æ¡">è·³è¿‡å‰ä¸¤æ¡æ•°æ®å–ä¸‰æ¡</h6>
<pre><code>            #region Skip and Take è·³è¿‡å‰ä¸¤æ¡æ•°æ®å–ä¸‰æ¡
            var list2 = list.Skip(2).Take(3);
            list2.ToList().ForEach(x =&gt; Console.WriteLine(x));
            #endregion
</code></pre>
<h6 id="å–å‡ºå¹´é¾„å¤§äº30çš„ç¬¬2æ¡å’Œç¬¬3æ¡">å–å‡ºå¹´é¾„å¤§äº30çš„ç¬¬2æ¡å’Œç¬¬3æ¡</h6>
<pre><code>            #region å–å‡ºå¹´é¾„å¤§äº30çš„ç¬¬2æ¡å’Œç¬¬3æ¡
            var list3 = list.Where(x =&gt; x.Age &gt; 30).OrderBy(x =&gt; x.Age).Skip(1).Take(2);
            list3.ToList().ForEach(x =&gt; Console.WriteLine(x));
            #endregion
</code></pre>
<h4 id="èšåˆå‡½æ•°">èšåˆå‡½æ•°</h4>
<blockquote>
<p>LINQ ä¸­æ‰€æœ‰çš„æ‰©å±•æ–¹æ³•å‡ ä¹éƒ½æ˜¯é’ˆå¯¹IEnumerableæ¥å£çš„ï¼Œè€Œå‡ ä¹æ‰€æœ‰èƒ½è¿”å›é›†åˆçš„éƒ½è¿”å›IEnumerableï¼Œæ‰€ä»¥å‡ ä¹æ‰€æœ‰çš„æ–¹æ³•éƒ½æ”¯æŒé“¾å¼è°ƒç”¨</p>
</blockquote>
<h5 id="max">Max()</h5>
<blockquote>
<p>æœ€å¤§å€¼</p>
</blockquote>
<h5 id="min">Min()</h5>
<blockquote>
<p>æœ€å°å€¼</p>
</blockquote>
<h5 id="average">Average()</h5>
<blockquote>
<p>å¹³å‡å€¼</p>
</blockquote>
<h5 id="sum">Sum()</h5>
<blockquote>
<p>å’Œ</p>
</blockquote>
<pre><code>            #region èšåˆå‡½æ•°  Max Min Average Sum
            var max = list.Max(x =&gt; x.Age);
            Console.WriteLine(max);
            var min = list.Min(x =&gt; x.Age);
            Console.WriteLine(min);
            var avg = list.Average(x =&gt; x.Age);
            Console.WriteLine(avg);
            var sum = list.Sum(x =&gt; x.Age);
            Console.WriteLine(sum);
            #endregion
</code></pre>
<h4 id="åˆ†ç»„">åˆ†ç»„</h4>
<p>GroupBy()æ–¹æ³•çš„å‚æ•°æ˜¯åˆ†ç»„æ¡ä»¶è¡¨è¾¾å¼ï¼Œè¿”å›å€¼ä¸ºIGrouping&lt;TKey,TSource&gt;ç±»å‹çš„æ³›å‹IEnumerable,ä¹Ÿå°±æ˜¯æ¯ä¸€ç»„ä»¥ä¸€ä¸ªIGroupingå¯¹è±¡çš„å½¢å¼è¿”å›ï¼ŒIGroupingæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ªIEnumerableçš„æ¥å£ï¼ŒIGroupingä¸­çš„Keyå±æ€§è¡¨ç¤ºè¿™ä¸€ç»„çš„åˆ†ç»„æ•°æ®çš„å€¼</p>
<h5 id="demo-æ ¹æ®å¹´é¾„åˆ†ç»„è·å–æœ€å¤§æœ€å°å¹³å‡">Demo æ ¹æ®å¹´é¾„åˆ†ç»„ï¼Œè·å–æœ€å¤§ï¼Œæœ€å°ï¼Œå¹³å‡</h5>
<pre><code>            #region GroupBy  æ ¹æ®å¹´é¾„åˆ†ç»„ï¼Œè·å–æœ€å¤§å·¥èµ„ï¼Œæœ€å°å·¥èµ„ï¼Œå¹³å‡å·¥èµ„
            var groupS = list.GroupBy(x =&gt; x.Age);
            foreach (var item in groupS)
            {
                Console.WriteLine(item.Key);
                Console.WriteLine($"æœ€å¤§å·¥èµ„ä¸ºï¼š{item.Max(x =&gt; x.Salary)}");
                Console.WriteLine($"æœ€å°å·¥èµ„ä¸ºï¼š{item.Min(x =&gt; x.Salary)}");
                Console.WriteLine($"å¹³å‡å·¥èµ„ä¸ºï¼š{item.Average(x =&gt; x.Salary)}");
                foreach (var item2 in item)
                {
                    Console.WriteLine(item2);
                }
                Console.WriteLine("*******************");
            }

            #endregion
</code></pre>
<h4 id="æŠ•å½±">æŠ•å½±</h4>
<blockquote>
<p>æŠŠé›†åˆä¸­çš„æ¯ä¸€é¡¹è½¬æ¢ä¸ºå¦å¤–ä¸€ç§ç±»å‹</p>
</blockquote>
<h5 id="select">Select()</h5>
<pre><code>            #region æŠ•å½± Select
            var select = list.Select(x =&gt; x.Name);
            foreach (var item in select)
            {
                Console.WriteLine(item);
            }
            #endregion
</code></pre>
<h4 id="åŒ¿åç±»å‹">åŒ¿åç±»å‹</h4>
<pre><code>            #region åŒ¿åç±»å‹
            var obj = new { Name = "å¼ ä¸‰", Age = 18 };
            Console.WriteLine(obj.Name);
            

            #endregion
</code></pre>
<h4 id="æŠ•å½±å’ŒåŒ¿åç±»å‹">æŠ•å½±å’ŒåŒ¿åç±»å‹</h4>
<pre><code>            #region æŠ•å½±å’ŒåŒ¿åç±»å‹
            var object1 = list.Select(x =&gt; new { å§“å = x.Name, å¹´é¾„ = x.Age });
            foreach (var item in object1)
            {
                Console.WriteLine(item.å§“å + " " + item.å¹´é¾„);
            }
            #endregion
</code></pre>
<h2 id="é›†åˆè½¬æ¢">é›†åˆè½¬æ¢</h2>
<pre><code>            #region é›†åˆè½¬æ¢
            var ee = list.Where(x =&gt; x.Salary &gt; 10000);
            var list4 = ee.ToList();
            foreach (var item in list4)
            {
                Console.WriteLine(item);
            }
            #endregion
</code></pre>
<h3 id="é“¾å¼è°ƒç”¨">é“¾å¼è°ƒç”¨</h3>
<h4 id="demo-è·å–id1çš„æ•°æ®ç„¶åæŒ‰ageåˆ†ç»„å¹¶ä¸”æŒ‰ç…§ageæ’åºç„¶åå–å‡ºå‰3æ¡å†æŠ•å½±è·å¾—å¹´é¾„äººæ•°å¹³å‡å·¥èµ„">Demo è·å–id&gt;1çš„æ•°æ®ç„¶åæŒ‰Ageåˆ†ç»„ï¼Œå¹¶ä¸”æŒ‰ç…§Ageæ’åºç„¶åå–å‡ºå‰3æ¡å†æŠ•å½±è·å¾—å¹´é¾„äººæ•°ï¼Œå¹³å‡å·¥èµ„</h4>
<pre><code> #region  è·å–id&gt;1çš„æ•°æ®ç„¶åæŒ‰Ageåˆ†ç»„ï¼Œå¹¶ä¸”æŒ‰ç…§Ageæ’åºç„¶åå–å‡ºå‰3æ¡å†æŠ•å½±è·å¾—å¹´é¾„äººæ•°ï¼Œå¹³å‡å·¥èµ„
 var result = list.Where(x =&gt; x.Id &gt; 1).GroupBy(x =&gt; x.Age).Take(3).Select(x =&gt; new { å¹´é¾„ = x.Key, äººæ•° = x.Count(), å¹³å‡å·¥èµ„ = x.Average(x =&gt; x.Salary) });
 foreach (var item in result)
 {
     Console.WriteLine(item.å¹´é¾„ + " " + item.äººæ•° + " " + item.å¹³å‡å·¥èµ„);
 }
 Console.WriteLine("_______________________________________________________________________________________________________________________________");
 #endregion
</code></pre>
<h2 id="æŸ¥è¯¢è¯­æ³•">æŸ¥è¯¢è¯­æ³•</h2>
<h3 id="demo-è·å–å·¥èµ„å¤§äº3000çš„æŒ‰å¹´é¾„æ’åº">Demo è·å–å·¥èµ„å¤§äº3000çš„æŒ‰å¹´é¾„æ’åº</h3>
<pre><code>            #region æŸ¥è¯¢è¯­æ³• è·å–å·¥èµ„å¤§äº3000çš„æŒ‰å¹´é¾„æ’åº
            var li = from s in list
                     where s.Salary &gt; 3000
                     select new { s.Name, s.Age, xb = s.Gender ? "ç”·" : "å¥³" };
            foreach (var item in li)
            {
                Console.WriteLine(item);
            }

            #endregion
</code></pre>
<blockquote>
<p>æŸ¥è¯¢è¯­æ³•å’Œä¸Šé¢çš„linqè¿è¡Œæ—¶æ²¡æœ‰åŒºåˆ«ï¼Œåç¼–è¯‘åæ˜¯ä¸€æ ·çš„</p>
</blockquote>
<h2 id="linq-è§£å†³é¢è¯•é—®é¢˜">Linq è§£å†³é¢è¯•é—®é¢˜</h2>
<blockquote>
<p>ç®—æ³•é¢˜å°½é‡é¿å…ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒLinqè¿™äº›é«˜çº§çš„ç±»åº“ï¼Œå°½é‡ä½¿ç”¨åŸºç¡€çš„è¯­æ³• ä¸ºäº†æ›´å¥½çš„æ€§èƒ½</p>
</blockquote>
<h3 id="é¢˜1--æ±‚-263-çš„æœ€å¤§å€¼">é¢˜1  æ±‚ 2ï¼Œ6ï¼Œ3 çš„æœ€å¤§å€¼</h3>
<pre><code>            #region æ±‚ 2ï¼Œ6ï¼Œ3 çš„æœ€å¤§å€¼
            int a = 2;
            int b = 6;
            int c = 3;
            //æ³•1ï¼›
            int[] nums = new [] { 2, 6, 3 };
            Console.WriteLine(nums.Max());

            //æ³•2
            Console.WriteLine(Math.Max(a, Math.Max(b, c)));

            //æ³•3
            Console.WriteLine(a &gt; b ? (a &gt; c ? a : c) : (b &gt; c ? b : c));
            #endregion
</code></pre>
<h3 id="é¢˜2-æœ‰ä¸ªç”¨é€—å·åˆ†éš”çš„è¡¨ç¤ºæˆç»©çš„å­—ç¬¦ä¸²å¦‚619010099182238668093555089è®¡ç®—è¿™äº›æˆç»©çš„å¹³å‡å€¼">é¢˜2 æœ‰ä¸ªç”¨é€—å·åˆ†éš”çš„è¡¨ç¤ºæˆç»©çš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šâ€œ61ï¼Œ90ï¼Œ100ï¼Œ99ï¼Œ18ï¼Œ22ï¼Œ38ï¼Œ66ï¼Œ80ï¼Œ93ï¼Œ55ï¼Œ50ï¼Œ89â€è®¡ç®—è¿™äº›æˆç»©çš„å¹³å‡å€¼</h3>
<pre><code>            #region é¢˜2 æœ‰ä¸ªç”¨é€—å·åˆ†éš”çš„è¡¨ç¤ºæˆç»©çš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šâ€œ61ï¼Œ90ï¼Œ100ï¼Œ99ï¼Œ18ï¼Œ22ï¼Œ38ï¼Œ66ï¼Œ80ï¼Œ93ï¼Œ55ï¼Œ50ï¼Œ89â€è®¡ç®—è¿™äº›æˆç»©çš„å¹³å‡å€¼
            //æ³•1
            int[] num1s = new[] { 61, 90,100,99,18,22,38,66,80,93,55,50,89 };
            Console.WriteLine(num1s.Average());

            //æ³•2ï¼š
            string str = "61,90,100,99,18,22,38,66,80,93,55,50,89";
            string[] strs = str.Split(',');
            var nums2 = strs.Select(x =&gt; int.Parse(x)).ToArray();
            var avg2 = nums2.Average();
            Console.WriteLine(avg2);
            #endregion
</code></pre>
<h3 id="é¢˜3ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„é¢‘ç‡å¿½ç•¥å¤§å°å†™ç„¶åæŒ‰ç…§ä»é«˜åˆ°ä½çš„é¡ºåºè¾“å‡ºå‡ºç°é¢‘ç‡é«˜äº2æ¬¡çš„å•è¯å’Œå…¶å‡ºç°çš„é¢‘ç‡">é¢˜3ï¼šç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„é¢‘ç‡ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ç„¶åæŒ‰ç…§ä»é«˜åˆ°ä½çš„é¡ºåºè¾“å‡ºå‡ºç°é¢‘ç‡é«˜äº2æ¬¡çš„å•è¯å’Œå…¶å‡ºç°çš„é¢‘ç‡</h3>
<pre><code> #region é¢˜3ï¼š ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯å‡ºç°çš„é¢‘ç‡ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ç„¶åæŒ‰ç…§ä»é«˜åˆ°ä½çš„é¡ºåºè¾“å‡ºå‡ºç°é¢‘ç‡é«˜äº2æ¬¡çš„å•è¯å’Œå…¶å‡ºç°çš„é¢‘ç‡
 string str1 = "Hello World hahaha heiheihei";
 var str2 =  str1.Where(c =&gt; char.IsLetter(c)).Select(c =&gt; char.ToLower(c)).GroupBy(c=&gt;c).Select(c =&gt; new {c,count = c.Count() }).OrderByDescending(c =&gt; c.count).Where(c =&gt;c.count&gt;2);

 foreach (var item in str2)
 {
     Console.WriteLine(item);
 }

 #endregion
</code></pre>

</div>
<div class="clear"></div>

		</div>
		<div class="itemdesc">
			å‘è¡¨äº 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-10 09:05">2025-06-10 09:04</span>&nbsp;
<a href="https://www.cnblogs.com/nanfengovo">nanfengovo</a>&nbsp;
é˜…è¯»(<span id="post_view_count">71</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18921538);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18921538', targetLink: 'https://www.cnblogs.com/nanfengovo/p/18921538', title: 'LINQ' })">ä¸¾æŠ¥</a>

		</div>
	
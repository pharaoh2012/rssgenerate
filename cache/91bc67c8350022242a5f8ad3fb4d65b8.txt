
		<h2>
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ydswin/p/18779146" title="发布于 2025-03-18 16:04">
    <span role="heading" aria-level="2">Linux运维必备：sort 命令快速上手指南</span>
    

</a>

		</h2>
		<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>作为运维工程师，处理日志、分析数据是家常便饭。<code>sort</code>命令是Linux中高效整理文本的神器，能快速对文件内容排序、去重、统计。本文用最简洁的方式，帮你掌握<code>sort</code>的核心用法。</p>
<hr>
<h2 id="一基础排序秒杀杂乱文本"><strong>一、基础排序：秒杀杂乱文本</strong></h2>
<pre><code class="language-bash"># 默认按字典序升序排列（文件/输入流）
sort filename.txt

# 示例：对日志时间排序（假设第一列为时间）
sort /var/log/nginx/access.log
</code></pre>
<hr>
<h2 id="二实用参数精准控制排序"><strong>二、实用参数：精准控制排序</strong></h2>
<ol>
<li>
<p><strong>按数值排序</strong><br>
处理数字时，务必用<code>-n</code>，避免"10"排在"2"后面！</p>
<pre><code class="language-bash">sort -n numbers.txt
</code></pre>
</li>
<li>
<p><strong>逆序排列</strong><br>
<code>-r</code>实现从大到小或从Z到A：</p>
<pre><code class="language-bash">sort -nr large_numbers.txt  # 数值逆序
</code></pre>
</li>
<li>
<p><strong>按指定列排序</strong><br>
用<code>-k</code>选择列，<code>-t</code>指定分隔符（如逗号、冒号）：</p>
<pre><code class="language-bash"># 按第2列（数值）排序CSV文件
sort -t',' -k2n data.csv
</code></pre>
</li>
<li>
<p><strong>去重</strong><br>
<code>-u</code>快速清理重复行（需先排序）：</p>
<pre><code class="language-bash">sort -u ips.txt &gt; unique_ips.txt
</code></pre>
</li>
<li>
<p><strong>忽略大小写</strong><br>
<code>-f</code>让"Apple"和"apple"视为相同：</p>
<pre><code class="language-bash">sort -f mixed_case.txt
</code></pre>
</li>
</ol>
<hr>
<h2 id="三运维实战场景"><strong>三、运维实战场景</strong></h2>
<p><strong>1. 统计日志IP访问频率</strong></p>
<pre><code class="language-bash">cat access.log | awk '{print $1}' | sort | uniq -c | sort -nr
</code></pre>
<ul>
<li><strong>步骤拆解</strong>：
<ul>
<li><code>awk</code>提取IP列</li>
<li><code>sort</code>排序以便<code>uniq</code>统计</li>
<li><code>uniq -c</code>计数</li>
<li><code>sort -nr</code>按访问量倒序</li>
</ul>
</li>
</ul>
<p><strong>2. 按内存占用排序进程</strong></p>
<pre><code class="language-bash">ps aux --sort=-%mem | head -n 10
</code></pre>
<ul>
<li><code>--sort=-%mem</code>等价于<code>sort -k4nr</code>（按第4列内存倒序）</li>
</ul>
<p><strong>3. 合并多个已排序文件</strong></p>
<pre><code class="language-bash">sort -m file1.txt file2.txt &gt; merged.txt
</code></pre>
<ul>
<li><code>-m</code>（merge）效率远高于重新排序大文件</li>
</ul>
<hr>
<h2 id="四避坑指南"><strong>四、避坑指南</strong></h2>
<ul>
<li>
<p><strong>性能优化</strong>：<br>
处理超大文件时，可用<code>-T</code>指定临时目录（避免默认分区空间不足）：</p>
<pre><code class="language-bash">sort -T /mnt/big_disk/tmp/ huge_file.txt
</code></pre>
</li>
<li>
<p><strong>语言环境</strong>：<br>
非英文排序异常时，设置<code>LC_ALL=C</code>禁用本地化规则：</p>
<pre><code class="language-bash">LC_ALL=C sort file.txt
</code></pre>
</li>
<li>
<p><strong>稳定排序</strong>：<br>
若需保留等值行的原始顺序，加<code>-s</code>（stable sort）。</p>
</li>
</ul>
<hr>
<h2 id="五总结"><strong>五、总结</strong></h2>
<p><code>sort</code> + <code>awk</code>/<code>uniq</code>等命令组合，是运维分析数据的瑞士军刀。掌握核心参数：<br>
<code>-n</code>（数值）、<code>-k</code>（列）、<code>-t</code>（分隔符）、<code>-r</code>（逆序）、<code>-u</code>（去重），即可应对90%的排序需求。</p>
<p><strong>记住：</strong> 处理数据前，先用<code>head</code>或<code>sample.txt</code>测试命令，避免直接操作大文件翻车！</p>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/ydswin/" target="_blank">dashery</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/ydswin/p/18779146" target="_blank">https://www.cnblogs.com/ydswin/p/18779146</a></p>
</div>
<div class="clear"></div>

		<p class="postfoot">
			posted on 
<span id="post-date" data-last-update-days="0.012195286479166666" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-18 16:04">2025-03-18 16:04</span>&nbsp;
<a href="https://www.cnblogs.com/ydswin">dashery</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18779146" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18779146);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18779146', targetLink: 'https://www.cnblogs.com/ydswin/p/18779146', title: 'Linux运维必备：sort 命令快速上手指南' })">举报</a>

		</p>
	
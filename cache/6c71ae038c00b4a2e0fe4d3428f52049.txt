
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/www-htz-pw/p/19032802/sql-you-hua-bi-bei-jiao-benoracle-huo-qu-bang-ding" title="发布于 2025-08-11 21:51">
    <span role="heading" aria-level="2">SQL优化必备脚本：Oracle获取绑定变量的字面SQL文本</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<blockquote>
<p>我们的文章会在微信公众号<a href="https://mp.weixin.qq.com/s/Gkmr9MArgh_4vMXhVvQULA" rel="noopener nofollow">IT民工的龙马人生</a>和<a href="http://www.htz.pw" rel="noopener nofollow">博客网站</a>( <a href="http://www.htz.pw" rel="noopener nofollow">www.htz.pw</a> )同步更新 ，欢迎关注收藏，也欢迎大家转载，但是请在文章开始地方标注文章出处，谢谢！<br>
由于博客中有大量代码，通过页面浏览效果更佳。</p>
</blockquote>
<p>今天分享一个使用了10多年的脚本，此脚本可以说是我使用频率排在前10的一个脚本。此脚本解决我们在优化SQL语句时，我们需要去查看SQL语句未绑定变量的字面SQL文本，如果SQL语句只有1、2个SQL语句，我们可以通过手动的方式去查询v$SQL_BIND_CAPTURE的绑定变量值来修改，但是如果我们有10个以上的绑定变量，通过此方法的效率就非常低，就需要依赖下面的脚本一键获取SQL的字面文本。虽然是用了10多年的SQL语句，但是此SQL语句原来一直只支持绑定变量的SQL语句，如果SQL没有使用绑定变量，返回为空。今天终于添加了一个判断了，非绑定变量的SQL直接显示文本即可。</p>
<p>此脚本功能非常简单，这里就只简单演示一下直接后的结果即可：</p>
<h2><a id="%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F%E7%9A%84%E6%83%85%E5%86%B5" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>绑定变量的情况</h2>
<pre><code class="language-plain_text">SQL&gt; @sql_fulltext_by_sqlid.sql
Enter value for sqlid: f4k1vwyb1400d
HTZHTZ
select temp0001.id as id847_ from htztable temp0001 where (temp0001.doc_resource_id in
(7531984628351947269 , 8462951738649371528 , 3958471625948361729 ,
829475163847291635 , 5948371628473951728 )) and (temp0001.change_type in (0
, 1 ))

原始SQL的文本如下：
select temp0001.id as id847_from htztable temp0001 where (temp0001.doc_resource_id in
(:1 , :2 , :3 , :4 , :5 )) and (temp0001.change_type in (:6 , :7 ))
</code></pre>
<h2><a id="%E6%9C%AA%E7%BB%91%E5%AE%9A%E5%8F%98%E9%87%8F%E7%9A%84sql" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>未绑定变量的SQL</h2>
<pre><code class="language-plain_text">@sql_fulltext_by_sqlid.sql
Enter value for sqlid: f4k1vwyb1400d
Schema: HTZZ
SELECT  htz.budgetcheck, htz.yhhd_no, htz.iprintcount from table_1 htz where htz.dr = 0
and htz.vouchid = '1106ZZ1000000000BPY0'
--------------------------------------------------------
</code></pre>
<h2><a id="%E8%84%9A%E6%9C%AC%E8%8E%B7%E5%8F%96" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>脚本获取</h2>
<p>脚本已经上传到微信群里面的共享链接文件，直接用共享链接下载即可。</p>
<p>------------------作者介绍-----------------------<br>
姓名：黄廷忠<br>
现就职：Oracle中国高级服务团队<br>
曾就职：OceanBase、云和恩墨、东方龙马等<br>
电话、微信、QQ：18081072613<br>
<a href="http://www.htz.pw" rel="noopener nofollow">个人博客:</a> (<a href="http://www.htz.pw" rel="noopener nofollow">http://www.htz.pw</a>)<br>
<a href="https://blog.csdn.net/wwwhtzpw" rel="noopener nofollow">CSDN地址:</a> (<a href="https://blog.csdn.net/wwwhtzpw" rel="noopener nofollow">https://blog.csdn.net/wwwhtzpw</a>)<br>
<a href="https://www.cnblogs.com/www-htz-pw">博客园地址:</a> (<a href="https://www.cnblogs.com/www-htz-pw">https://www.cnblogs.com/www-htz-pw</a>)<br>
<img alt="" data-src="http://htzaliyun.cdhtz.com/uPic/Y44TWC.png" class="lazyload"></p>
<hr>

</div>
<div id="MySignature" role="contentinfo">
    提供ORACLE技术支持(系统优化，故障处理，安装升级，数据恢复等） TEL:18081072613，微信、QQ同手机号。
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-11 21:51">2025-08-11 21:51</span>&nbsp;
<a href="https://www.cnblogs.com/www-htz-pw">认真就输</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19032802);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19032802', targetLink: 'https://www.cnblogs.com/www-htz-pw/p/19032802/sql-you-hua-bi-bei-jiao-benoracle-huo-qu-bang-ding', title: 'SQL优化必备脚本：Oracle获取绑定变量的字面SQL文本' })">举报</a>
</div>
        
<!----> <meta itemprop="headline" content="MobVue ä¸­æ–‡æ–‡æ¡£"> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"> <meta itemprop="datePublished" content="2025-02-24T08:03:35.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="pany"> <meta itemprop="url" content="https://juejin.cn/user/2041120304148845"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-38a6c62f="">
            MobVue ä¸­æ–‡æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-38a6c62f=""><div class="author-info-box" data-v-38a6c62f=""><div class="author-name" data-v-38a6c62f=""><a href="/user/2041120304148845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-1800aadb="" data-v-38a6c62f=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-1800aadb="">
    pany
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-38a6c62f=""><time datetime="2025-02-24T08:03:35.000Z" title="Mon Feb 24 2025 08:03:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-38a6c62f="">
                    2025-02-24
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-38a6c62f=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-38a6c62f=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-38a6c62f=""></circle></svg> <span class="views-count" data-v-38a6c62f="">
                    13,606
                  </span> <span class="read-time" data-v-38a6c62f=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-38a6c62f=""><rect width="16" height="16" fill="none" data-v-38a6c62f=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-38a6c62f=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-38a6c62f=""></path></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-38a6c62f=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-38a6c62f=""><div class="article-viewer markdown-body cache result"><div align="center">
  <img alt="logo" width="120" height="120" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/951ae8cefdc048dfb9e16795e0c603e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=UOoCWE2e0vQbNmwCGhvlyOKIRUY%3D" loading="lazy">
  <h2 data-id="heading-0">Mobile + Vue = MobVue</h2>
</div>
<h2 data-id="heading-1">ç®€ä»‹</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue" target="_blank" title="https://github.com/un-pany/mobvue" ref="nofollow noopener noreferrer">MobVue</a> æ˜¯ä¸€ä¸ªç²¾å¿ƒåˆ¶ä½œçš„ç§»åŠ¨ç«¯ H5 æ¨¡æ¿ï¼ŒåŸºäº Vue3ã€Viteã€TypeScriptã€Vant ç­‰ä¸»æµæŠ€æœ¯</p>
<h2 data-id="heading-2">ä½¿ç”¨</h2>
<p><em>ç‚¹å‡»å±•å¼€</em></p>
<details>
<summary>æ¨èç¯å¢ƒ</summary>
<br>
<ul>
<li>æ–°ç‰ˆ <code>Visual Studio Code</code></li>
<li>å®‰è£… <code>.vscode/extensions.json</code> æ–‡ä»¶ä¸­æ¨èçš„æ’ä»¶</li>
<li><code>node</code> 20.x æˆ– 22+</li>
<li><code>pnpm</code> 9.x æˆ– 10+</li>
</ul>
</details>
<details>
<summary>æœ¬åœ°å¼€å‘</summary>
<br>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm i

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
pnpm dev
</code></pre>
</details>
<details>
<summary>æ‰“åŒ…æ„å»º</summary>
<br>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‰“åŒ…æ„å»ºé¢„å‘å¸ƒç¯å¢ƒ</span>
pnpm build:staging

<span class="hljs-comment"># æ‰“åŒ…æ„å»ºç”Ÿäº§ç¯å¢ƒ</span>
pnpm build
</code></pre>
</details>
<details>
<summary>æœ¬åœ°é¢„è§ˆ</summary>
<br>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…ˆæ‰§è¡Œæ‰“åŒ…æ„å»ºå‘½ä»¤ç”Ÿæˆ dist ç›®å½•åå†æ‰§è¡Œä»¥ä¸‹é¢„è§ˆå‘½ä»¤</span>
pnpm preview
</code></pre>
</details>
<details>
<summary>ä»£ç æ£€æŸ¥</summary>
<br>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»£ç æ ¡éªŒä¸æ ¼å¼åŒ–</span>
pnpm lint

<span class="hljs-comment"># å•å…ƒæµ‹è¯•</span>
pnpm <span class="hljs-built_in">test</span>
</code></pre>
</details>
<details>
<summary>ä»£ç æäº¤è§„èŒƒ</summary>
<br>
<p><code>feat</code> æ–°åŠŸèƒ½</p>
<p><code>fix</code> ä¿®å¤é”™è¯¯</p>
<p><code>perf</code> æ€§èƒ½ä¼˜åŒ–</p>
<p><code>refactor</code> é‡æ„ä»£ç </p>
<p><code>docs</code> æ–‡æ¡£å’Œæ³¨é‡Š</p>
<p><code>types</code> ç±»å‹ç›¸å…³</p>
<p><code>test</code> å•æµ‹ç›¸å…³</p>
<p><code>ci</code> æŒç»­é›†æˆã€å·¥ä½œæµ</p>
<p><code>revert</code> æ’¤é”€æ›´æ”¹</p>
<p><code>chore</code> çäº‹ï¼ˆæ›´æ–°ä¾èµ–ã€ä¿®æ”¹é…ç½®ç­‰ï¼‰</p>
</details>
<h2 data-id="heading-3">ç‰¹æ€§</h2>
<p>ğŸ”¥ æœ€æ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fapi%2Fsfc-script-setup.html" target="_blank" title="https://vuejs.org/api/sfc-script-setup.html" ref="nofollow noopener noreferrer">è¯­æ³•</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fvite.config.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/vite.config.ts" ref="nofollow noopener noreferrer">é…ç½®</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fpackage.json" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/package.json" ref="nofollow noopener noreferrer">ä¾èµ–</a></p>
<p>ğŸ“ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Frouter%2Findex.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/router/index.ts" ref="nofollow noopener noreferrer">çº¯ä¸€çº§è·¯ç”±è®¾è®¡</a> - æ¸…æ™°ä¸”ç¼“å­˜å‹å¥½</p>
<p>ğŸ“± ç§»åŠ¨ç«¯é€‚é… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fpostcss.config.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/postcss.config.ts" ref="nofollow noopener noreferrer">px2vw</a> - å¹¶ä¸”å®½å±å‹å¥½</p>
<p>ğŸŒ æµè§ˆå™¨é€‚é… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Ftree%2Fmain%2Fpackages%2Fplugin-legacy" target="_blank" title="https://github.com/vitejs/vite/tree/main/packages/plugin-legacy" ref="nofollow noopener noreferrer">@vitejs/plugin-legacy</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fautoprefixer" target="_blank" title="https://github.com/postcss/autoprefixer" ref="nofollow noopener noreferrer">autoprefixer</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrowserslist%2Fbrowserslist" target="_blank" title="https://github.com/browserslist/browserslist" ref="nofollow noopener noreferrer">browserslist</a> - å…¼å®¹å¤šç§æµè§ˆå™¨å’Œä½ç‰ˆæœ¬æµè§ˆå™¨</p>
<p>ğŸ§© <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Flayout" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/layout" ref="nofollow noopener noreferrer">å¸ƒå±€ç³»ç»Ÿ</a> - é…ç½®åŒ–çš„</p>
<p>ğŸ”’ æƒé™æ§åˆ¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Frouter%2Fguard.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/router/guard.ts" ref="nofollow noopener noreferrer">é¡µé¢çº§</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fpages%2Fdemo%2Fpermission.vue" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/pages/demo/permission.vue" ref="nofollow noopener noreferrer">æŒ‰é’®çº§</a></p>
<p>ğŸŒ— ä¸»é¢˜æ¨¡å¼ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fcommon%2Fassets%2Fstyles%2Fvariables.css" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/common/assets/styles/variables.css" ref="nofollow noopener noreferrer">Dark Mode</a></p>
<p>ğŸ«§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Funo.config.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/uno.config.ts" ref="nofollow noopener noreferrer">æ‹¥æŠ±åŸå­åŒ– CSS</a></p>
<p>ğŸ“² <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantfu%2Fvite-plugin-pwa" target="_blank" title="https://github.com/antfu/vite-plugin-pwa" ref="nofollow noopener noreferrer">PWA</a> - æ¸è¿›å¼ Web åº”ç”¨</p>
<p>ğŸ”§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-vue-components" target="_blank" title="https://github.com/unplugin/unplugin-vue-components" ref="nofollow noopener noreferrer">ç»„ä»¶</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-auto-import" target="_blank" title="https://github.com/unplugin/unplugin-auto-import" ref="nofollow noopener noreferrer">API</a> è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥</p>
<p>ğŸ” <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2F.husky%2Fpre-commit" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/.husky/pre-commit" ref="nofollow noopener noreferrer">Husky</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fpackage.json" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/package.json" ref="nofollow noopener noreferrer">lint-staged</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Feslint.config.js" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/eslint.config.js" ref="nofollow noopener noreferrer">ESLint</a> - è§„èŒƒä»£ç </p>
<p>ğŸ’ªğŸ» ä¾ç„¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Ftsconfig.json" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/tsconfig.json" ref="nofollow noopener noreferrer">TypeScript</a> - ä¸¥æ ¼æ¨¡å¼ä¸”æ—  <code>any</code></p>
<p>ğŸ‘€ æ›´å¤šåŠŸèƒ½ - <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fpinia%2Fstores%2Fkeep-alive.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/pinia/stores/keep-alive.ts" ref="nofollow noopener noreferrer">è·¯ç”±ç¼“å­˜</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fcommon%2Fcomposables%2FuseWatermark.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/common/composables/useWatermark.ts" ref="nofollow noopener noreferrer">å¸¦é˜²å¾¡çš„æ°´å°</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fcommon%2Fcomposables%2FuseGrayscaleAndColorblind.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/common/composables/useGrayscaleAndColorblind.ts" ref="nofollow noopener noreferrer">ç°è‰²å’Œè‰²å¼±æ¨¡å¼</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjpkleemans%2Fvite-svg-loader" target="_blank" title="https://github.com/jpkleemans/vite-svg-loader" ref="nofollow noopener noreferrer">SVG Loader</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fplugins%2Fconsole.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/plugins/console.ts" ref="nofollow noopener noreferrer">VConsole</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fpublic%2Fapp-loading.css" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/public/app-loading.css" ref="nofollow noopener noreferrer">ç™½å±åŠ è½½åŠ¨ç”»</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Ftests" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/tests" ref="nofollow noopener noreferrer">å•å…ƒæµ‹è¯•</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fblob%2Fmain%2Fsrc%2Fplugins%2Fi18n.ts" target="_blank" title="https://github.com/un-pany/mobvue/blob/main/src/plugins/i18n.ts" ref="nofollow noopener noreferrer">å›½é™…åŒ–</a></p>
<h2 data-id="heading-4">æŠ€æœ¯æ ˆ</h2>
<p><strong>Vue3</strong>ï¼šé‡‡ç”¨ Vue3 + script setup æœ€æ–°çš„ Vue3 ç»„åˆå¼ API</p>
<p><strong>Vant</strong>ï¼šè½»é‡ã€å¯å®šåˆ¶çš„ç§»åŠ¨ç«¯ Vue ç»„ä»¶åº“</p>
<p><strong>Pinia</strong>: ä¼ è¯´ä¸­çš„ Vuex5</p>
<p><strong>Vite</strong>ï¼šçœŸçš„å¾ˆå¿«</p>
<p><strong>Vue Router</strong>ï¼šè·¯ç”±è·¯ç”±</p>
<p><strong>TypeScript</strong>ï¼šJavaScript è¯­è¨€çš„è¶…é›†</p>
<p><strong>pnpm</strong>ï¼šæ›´å¿«é€Ÿçš„ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å·¥å…·</p>
<p><strong>ESLint</strong>ï¼šä»£ç æ ¡éªŒä¸æ ¼å¼åŒ–</p>
<p><strong>Axios</strong>ï¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼ˆå·²å°è£…å¥½ï¼‰</p>
<p><strong>UnoCSS</strong>ï¼šå…·æœ‰é«˜æ€§èƒ½ä¸”æå…·çµæ´»æ€§çš„å³æ—¶åŸå­åŒ– CSS å¼•æ“</p>
<h2 data-id="heading-5">ç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># mobvue</span>
â”œâ”€ .husky                <span class="hljs-comment"># commit æ—¶è¿›è¡Œä»£ç æ ¡éªŒå’Œæ ¼å¼åŒ–</span>
â”œâ”€ .vscode               <span class="hljs-comment"># vscode é…ç½®å’Œæ’ä»¶</span>
â”œâ”€ public
â”‚  â”œâ”€ favicon.png        <span class="hljs-comment"># ç½‘ç«™å¤´åƒ</span>
â”‚  â””â”€ app-loading.css    <span class="hljs-comment"># é¦–å± loading åŠ¨ç”»</span>
â”œâ”€ src
â”‚  â”œâ”€ common             <span class="hljs-comment"># é€šç”¨ç›®å½•</span>
â”‚  â”‚  â”œâ”€ apis            <span class="hljs-comment"># é€šç”¨ç›®å½• - æ¥å£</span>
â”‚  â”‚  â”œâ”€ assets          <span class="hljs-comment"># é€šç”¨ç›®å½• - é™æ€èµ„æº</span>
â”‚  â”‚  â”œâ”€ components      <span class="hljs-comment"># é€šç”¨ç›®å½• - ç»„ä»¶</span>
â”‚  â”‚  â”œâ”€ composables     <span class="hljs-comment"># é€šç”¨ç›®å½• - ç»„åˆå¼å‡½æ•°</span>
â”‚  â”‚  â”œâ”€ constants       <span class="hljs-comment"># é€šç”¨ç›®å½• - å¸¸é‡</span>
â”‚  â”‚  â””â”€ utils           <span class="hljs-comment"># é€šç”¨ç›®å½• - å·¥å…·å‡½æ•°</span>
â”‚  â”œâ”€ http               <span class="hljs-comment"># ç½‘ç»œè¯·æ±‚</span>
â”‚  â”œâ”€ layout             <span class="hljs-comment"># å¸ƒå±€</span>
â”‚  â”œâ”€ pages              <span class="hljs-comment"># é¡µé¢</span>
â”‚  â”‚  â””â”€ login           <span class="hljs-comment"># ç™»å½•æ¨¡å—</span>
â”‚  â”‚     â”œâ”€ apis         <span class="hljs-comment"># ç™»å½•æ¨¡å— - ç§æœ‰æ¥å£</span>
â”‚  â”‚     â”œâ”€ components   <span class="hljs-comment"># ç™»å½•æ¨¡å— - ç§æœ‰ç»„ä»¶</span>
â”‚  â”‚     â”œâ”€ composables  <span class="hljs-comment"># ç™»å½•æ¨¡å— - ç§æœ‰ç»„åˆå¼å‡½æ•°</span>
â”‚  â”‚     â”œâ”€ images       <span class="hljs-comment"># ç™»å½•æ¨¡å— - ç§æœ‰å›¾ç‰‡</span>
â”‚  â”‚     â””â”€ index.vue    <span class="hljs-comment"># ç™»å½•æ¨¡å— - é¡µé¢</span>
â”‚  â”œâ”€ pinia              <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â”‚  â”œâ”€ plugins            <span class="hljs-comment"># æ’ä»¶ï¼ˆå…¨å±€ç»„ä»¶ã€è‡ªå®šä¹‰æŒ‡ä»¤ç­‰ï¼‰</span>
â”‚  â”œâ”€ router             <span class="hljs-comment"># è·¯ç”±</span>
â”‚  â”œâ”€ App.vue            <span class="hljs-comment"># å…¥å£é¡µé¢</span>
â”‚  â””â”€ main.ts            <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span>
â”œâ”€ tests                 <span class="hljs-comment"># å•å…ƒæµ‹è¯•</span>
â”œâ”€ types                 <span class="hljs-comment"># ç±»å‹å£°æ˜</span>
â”œâ”€ .editorconfig         <span class="hljs-comment"># ç¼–è¾‘å™¨é…ç½®</span>
â”œâ”€ .<span class="hljs-built_in">env</span>                  <span class="hljs-comment"># æ‰€æœ‰ç¯å¢ƒ</span>
â”œâ”€ .env.development      <span class="hljs-comment"># å¼€å‘ç¯å¢ƒ</span>
â”œâ”€ .env.production       <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒ</span>
â”œâ”€ .env.staging          <span class="hljs-comment"># é¢„å‘å¸ƒç¯å¢ƒ</span>
â”œâ”€ eslint.config.js      <span class="hljs-comment"># eslint é…ç½®</span>
â”œâ”€ tsconfig.json         <span class="hljs-comment"># ts é…ç½®</span>
â”œâ”€ uno.config.ts         <span class="hljs-comment"># unocss é…ç½®</span>
â””â”€ vite.config.ts        <span class="hljs-comment"># vite é…ç½®</span>
</code></pre>
<h2 data-id="heading-6">åŸºç¡€</h2>
<h3 data-id="heading-7">ç§»åŠ¨ç«¯é€‚é…</h3>
<p><em><strong>rem or vw? Of course, vw!</strong></em></p>
<p>åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fpostcss" target="_blank" title="https://github.com/postcss/postcss" ref="nofollow noopener noreferrer">postcss</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwswmsword%2Fpostcss-mobile-forever" target="_blank" title="https://github.com/wswmsword/postcss-mobile-forever" ref="nofollow noopener noreferrer">postcss-mobile-forever</a>ï¼Œå®ç° <code>px</code> åˆ° <code>vw</code> çš„è‡ªåŠ¨è½¬åŒ–</p>
<p>å…·ä½“å†…ç½®çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-comment">// UI è®¾è®¡ç¨¿å®½åº¦</span>
  <span class="hljs-attr">viewportWidth</span>: <span class="hljs-function">(<span class="hljs-params">file: <span class="hljs-built_in">string</span></span>) =&gt;</span> file.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"vant"</span>) ? <span class="hljs-number">375</span> : <span class="hljs-number">375</span>,
  <span class="hljs-comment">// é™åˆ¶è§†å›¾çš„æœ€å¤§å®½åº¦</span>
  <span class="hljs-attr">maxDisplayWidth</span>: <span class="hljs-number">750</span>,
  <span class="hljs-comment">// é¡µé¢æœ€å¤–å±‚é€‰æ‹©å™¨</span>
  <span class="hljs-attr">appSelector</span>: <span class="hljs-string">"#app"</span>,
  <span class="hljs-comment">// æ˜¯å¦å¯¹ã€Œé¡µé¢æœ€å¤–å±‚é€‰æ‹©å™¨ã€å¯¹åº”çš„å…ƒç´ è¿›è¡Œæè¾¹</span>
  <span class="hljs-attr">border</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">// è½¬æ¢å•ä½åä¿ç•™çš„å°æ•°ç‚¹ä½æ•°</span>
  <span class="hljs-attr">unitPrecision</span>: <span class="hljs-number">3</span>,
  <span class="hljs-comment">// è½¬æ¢åçš„å•ä½</span>
  <span class="hljs-attr">mobileUnit</span>: <span class="hljs-string">"vw"</span>,
  <span class="hljs-comment">// éœ€è¦è½¬æ¢çš„å±æ€§</span>
  <span class="hljs-attr">propList</span>: [<span class="hljs-string">"*"</span>],
  <span class="hljs-comment">// å¿½ç•¥çš„é€‰æ‹©å™¨</span>
  <span class="hljs-attr">selectorBlackList</span>: [<span class="hljs-string">".ignore"</span>, <span class="hljs-string">"keep-px"</span>],
  <span class="hljs-comment">// å¿½ç•¥çš„å±æ€§</span>
  <span class="hljs-attr">propertyBlackList</span>: {
    <span class="hljs-string">".van-icon"</span>: <span class="hljs-string">"font"</span>
  },
  <span class="hljs-comment">// å¿½ç•¥çš„å±æ€§å€¼</span>
  <span class="hljs-attr">valueBlackList</span>: [<span class="hljs-string">"1px"</span>],
  <span class="hljs-comment">// å¿½ç•¥çš„ç›®å½•æˆ–æ–‡ä»¶</span>
  <span class="hljs-attr">exclude</span>: [],
  <span class="hljs-comment">// åŒ…å«å—æ˜¯æ ¹å…ƒç´ çš„é€‰æ‹©å™¨åˆ—è¡¨</span>
  <span class="hljs-attr">rootContainingBlockSelectorList</span>: [<span class="hljs-string">"van-tabbar"</span>, <span class="hljs-string">"van-popup"</span>]
}
</code></pre>
<h3 data-id="heading-8">æµè§ˆå™¨é€‚é…</h3>
<p>åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Ftree%2Fmain%2Fpackages%2Fplugin-legacy" target="_blank" title="https://github.com/vitejs/vite/tree/main/packages/plugin-legacy" ref="nofollow noopener noreferrer">@vitejs/plugin-legacy</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpostcss%2Fautoprefixer" target="_blank" title="https://github.com/postcss/autoprefixer" ref="nofollow noopener noreferrer">autoprefixer</a> + <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrowserslist%2Fbrowserslist" target="_blank" title="https://github.com/browserslist/browserslist" ref="nofollow noopener noreferrer">browserslist</a> å…¼å®¹å¤šç§æµè§ˆå™¨å’Œä½ç‰ˆæœ¬æµè§ˆå™¨</p>
<p>ä½ å¯ä»¥æ— æ„Ÿçš„ä½¿ç”¨è¿™å¥—å†…ç½®çš„é…ç½®ï¼Œå”¯ä¸€å¯èƒ½éœ€è¦ä½ æ”¹åŠ¨çš„åœ°æ–¹ï¼Œå¯èƒ½æ˜¯ <code>package.json</code> æ–‡ä»¶é‡Œé¢çš„ <code>browserslist</code> é…ç½®ï¼Œå®ƒé»˜è®¤æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"browserslist"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
  <span class="hljs-string">"defaults"</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ä½ å¯ä»¥æ ¹æ®è‡ªå·±æƒ³å…¼å®¹çš„æµè§ˆå™¨æ¥ä¿®æ”¹è¿™ä¸ªåœ°æ–¹</p>
<h3 data-id="heading-9">è·¯ç”±è®¾è®¡</h3>
<h4 data-id="heading-10">çº¯ä¸€çº§è·¯ç”±</h4>
<p>ğŸ“ <strong>æ— éœ€è®¾ç½®åµŒå¥—è·¯ç”±æ¥å®ç° Layout å¸ƒå±€ï¼Œè·¯ç”±é…ç½®æ›´åŠ æ¸…æ™°ç®€æ´ï¼Œå¹¶ä¸”å¯¹è·¯ç”±ç¼“å­˜æ›´åŠ å‹å¥½ï¼Œå‘Šåˆ«æŸäº›åœºæ™¯ä¸‹ç¼“å­˜å¤±æ•ˆçš„é—®é¢˜ï¼</strong></p>
<p>å¦‚æœä¸éœ€è¦æ˜¾ç¤º <code>Layout</code> å¸ƒå±€ï¼Œä»¥<strong>ç™»å½•é¡µé¢</strong>ä¸ºä¾‹ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/login"</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"@/pages/login/index.vue"</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Login"</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"ç™»å½•"</span>
    }
  }
</code></pre>
<img width="240" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bb411e0ea684f0682ac6aa971a17169~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=mBw7EibyG0fM6xZHsY13FKOC0hc%3D" loading="lazy">
<img width="240" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/912f25b5b56348a9a862bec4cb1bd342~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=aEpJSNdBBaYififtt2ZJAP2nSVU%3D" loading="lazy">
<p>å¦‚æœéœ€è¦ <code>Layout</code> å¸ƒå±€ï¼Œä»¥<strong>æˆ‘çš„é¡µé¢</strong>ä¸ºä¾‹ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">"/me"</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"@/pages/me/index.vue"</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Me"</span>,
    <span class="hljs-attr">meta</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">"æˆ‘çš„"</span>,
      <span class="hljs-attr">layout</span>: {
        <span class="hljs-attr">navBar</span>: {
          <span class="hljs-attr">showNavBar</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">showLeftArrow</span>: <span class="hljs-literal">false</span>
        },
        <span class="hljs-attr">tabbar</span>: {
          <span class="hljs-attr">showTabbar</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">"user-o"</span>
        },
        <span class="hljs-attr">footer</span>: <span class="hljs-literal">true</span>
      }
    }
  }
</code></pre>
<img width="240" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8a78c0c9fb04e9e81a22d441a3b5f41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=1neqjGlgRUhgGFKJExmRsvygYrQ%3D" loading="lazy">
<img width="240" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/779d5f3892ea4c809b64cb05b0d9f080~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=mL8NTtF0GG9ZmX5hxR6Qe0CNLoI%3D" loading="lazy">
<h4 data-id="heading-11">meta é…ç½®é¡¹</h4>
<pre><code class="hljs language-ts" lang="ts">  {
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@description</span> é¡µé¢æ ‡é¢˜
     */</span>
    title?: <span class="hljs-built_in">string</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@description</span> è®¾ç½®èƒ½è¿›å…¥è¯¥è·¯ç”±çš„è§’è‰²ï¼Œæ”¯æŒå¤šä¸ªè§’è‰²å åŠ ï¼Œé»˜è®¤ä¸é™åˆ¶è§’è‰²
     * <span class="hljs-doctag">@default</span> <span class="hljs-variable">undefined</span>
     */</span>
    roles?: <span class="hljs-built_in">string</span>[]
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@description</span> æ˜¯å¦ç¼“å­˜è¯¥è·¯ç”±é¡µé¢ï¼Œæ³¨æ„è·¯ç”±å’Œé¡µé¢éƒ½éœ€è¦è®¾ç½®ä¸€è‡´çš„ Name
     * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span>
     */</span>
    keepAlive?: <span class="hljs-built_in">boolean</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@description</span> å¸ƒå±€é…ç½®
     */</span>
    layout?: {
      <span class="hljs-comment">/**
       * <span class="hljs-doctag">@description</span> NavBar é…ç½®
       */</span>
      navBar?: {
        <span class="hljs-comment">/**
         * <span class="hljs-doctag">@description</span> æ˜¯å¦æ˜¾ç¤º NavBar
         * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span>
         */</span>
        showNavBar?: <span class="hljs-built_in">boolean</span>
        <span class="hljs-comment">/**
         * <span class="hljs-doctag">@description</span> æ˜¯å¦æ˜¾ç¤ºå·¦ä¾§ç®­å¤´
         * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span>
         */</span>
        showLeftArrow?: <span class="hljs-built_in">boolean</span>
      }
      tabbar?: {
        <span class="hljs-comment">/**
         * <span class="hljs-doctag">@description</span> æ˜¯å¦æ˜¾ç¤º Tabbar
         * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span>
         */</span>
        showTabbar?: <span class="hljs-built_in">boolean</span>
        <span class="hljs-comment">/**
         * <span class="hljs-doctag">@description</span> å›¾æ ‡
         */</span>
        icon?: <span class="hljs-built_in">string</span>
      }
      <span class="hljs-comment">/**
       * <span class="hljs-doctag">@description</span> æ˜¯å¦æ˜¾ç¤º Footer
       * <span class="hljs-doctag">@default</span> <span class="hljs-variable">false</span>
       */</span>
      footer?: <span class="hljs-built_in">boolean</span>
    }
  }
</code></pre>
<h3 data-id="heading-12">æƒé™æ§åˆ¶</h3>
<h4 data-id="heading-13">é¡µé¢çº§</h4>
<p>æ§åˆ¶ä»£ç éƒ½åœ¨è·¯ç”±å®ˆå« <code>@/router/guard.ts</code> ä¸­ï¼Œè¿™é‡Œå¯æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åšç›¸åº”çš„ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title class_">NProgress</span>.<span class="hljs-title function_">configure</span>({ <span class="hljs-attr">showSpinner</span>: <span class="hljs-literal">false</span> })

<span class="hljs-keyword">const</span> { setTitle } = <span class="hljs-title function_">useTitle</span>()

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOGIN_PATH</span> = <span class="hljs-string">"/login"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">registerNavigationGuard</span>(<span class="hljs-params">router: Router</span>) {
  <span class="hljs-comment">// å…¨å±€å‰ç½®å®ˆå«</span>
  router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, _from</span>) =&gt;</span> {
    <span class="hljs-title class_">NProgress</span>.<span class="hljs-title function_">start</span>()
    <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç™»å½•</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">getToken</span>()) {
      <span class="hljs-comment">// å¦‚æœåœ¨å…ç™»å½•çš„ç™½åå•ä¸­ï¼Œåˆ™ç›´æ¥è¿›å…¥</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isWhiteList</span>(to)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      <span class="hljs-comment">// å…¶ä»–æ²¡æœ‰è®¿é—®æƒé™çš„é¡µé¢å°†è¢«é‡å®šå‘åˆ°ç™»å½•é¡µé¢</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">LOGIN_PATH</span>
    }
    <span class="hljs-comment">// å¦‚æœå·²ç»ç™»å½•ï¼Œå¹¶å‡†å¤‡è¿›å…¥ Login é¡µé¢ï¼Œåˆ™é‡å®šå‘åˆ°ä¸»é¡µ</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-variable constant_">LOGIN_PATH</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"/"</span>
    <span class="hljs-comment">// åˆ¤æ–­æœ‰æ— è¯¥é¡µé¢æƒé™</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">roles</span> ? userStore.<span class="hljs-property">roles</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> to.<span class="hljs-property">meta</span>.<span class="hljs-property">roles</span>!.<span class="hljs-title function_">includes</span>(role)) : <span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment">// æ— æƒé™åˆ™è¿›å…¥ 403 é¡µé¢</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"/403"</span>
  })
  <span class="hljs-comment">// å…¨å±€åç½®é’©å­</span>
  router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> keepAliveStore = <span class="hljs-title function_">useKeepAliveStore</span>()
    <span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰è·¯ç”±ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-variable constant_">LOGIN_PATH</span>) keepAliveStore.<span class="hljs-title function_">delAllCachedRoutes</span>()
    <span class="hljs-comment">// æ·»åŠ è·¯ç”±ç¼“å­˜</span>
    keepAliveStore.<span class="hljs-title function_">addCachedRoute</span>(to)
    <span class="hljs-comment">// è®¾ç½®æ ‡é¢˜</span>
    <span class="hljs-title function_">setTitle</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>)
    <span class="hljs-title class_">NProgress</span>.<span class="hljs-title function_">done</span>()
  })
}
</code></pre>
<h4 data-id="heading-14">æŒ‰é’®çº§</h4>
<p>åŸºäº<strong>æƒé™æŒ‡ä»¤</strong>å’Œ<strong>æƒé™å‡½æ•°</strong>ä¸¤ç§æ–¹å¼å®ç°æŒ‰é’®çº§æƒé™æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">van-cell-group</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æƒé™æŒ‡ä»¤"</span> <span class="hljs-attr">inset</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">v-permission</span>=<span class="hljs-string">"['admin']"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Admin å¯è§"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Role admin"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">v-permission</span>=<span class="hljs-string">"['admin', 'editor']"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Admin æˆ– Editor å¯è§"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Role admin or editor"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">van-cell-group</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">van-cell-group</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æƒé™å‡½æ•°"</span> <span class="hljs-attr">inset</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"checkPermission(['admin'])"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Admin å¯è§"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Role admin"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">van-cell</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"checkPermission(['admin', 'editor'])"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Admin æˆ– Editor å¯è§"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Role admin or editor"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">van-cell-group</span>&gt;</span>
</code></pre>
<p>å…¶ä¸­çš„å…³é”®ä»£ç åªæœ‰ä¸¤è¡Œï¼š</p>
<pre><code class="hljs language-html" lang="html">// æƒé™æŒ‡ä»¤
v-permission="['admin']"
// æƒé™å‡½æ•°
v-if="checkPermission(['admin'])"
</code></pre>
<h3 data-id="heading-15">å‘é€ HTTP è¯·æ±‚</h3>
<p>å¤§è‡´çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
é¡µé¢/äº¤äº’ --&gt; api --&gt; axios --&gt; æœåŠ¡å™¨
</code></pre>
<h4 data-id="heading-16">é€šç”¨ API æ¨¡å—</h4>
<p><code>src/common/apis</code> ç›®å½•å­˜æ”¾é€šç”¨çš„æ¥å£ï¼Œè€ŒéæŸä¸ªé¡µé¢å›ºå®šä½¿ç”¨çš„æ¥å£</p>
<h4 data-id="heading-17">ç§æœ‰ API æ¨¡å—</h4>
<p>æŸä¸ªé¡µé¢å›ºå®šä½¿ç”¨çš„æ¥å£ï¼Œåº”è¯¥åœ¨å½“å‰é¡µé¢ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ª <code>apis</code> æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ç§æœ‰æ¥å£</p>
<p>å‚è€ƒç™»å½•é¡µ <code>src/pages/login/apis</code></p>
<h4 data-id="heading-18">å°è£…çš„ Axios</h4>
<p><code>src/http/axios.ts</code> æ˜¯åŸºäº axios çš„å°è£…ï¼Œå°è£…äº†å…¨å±€ request æ‹¦æˆªå™¨ã€response æ‹¦æˆªå™¨ã€ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ã€ç»Ÿä¸€çš„è¶…æ—¶å¤„ç†ã€baseURL è®¾ç½®ç­‰</p>
<h3 data-id="heading-19">å¤šç¯å¢ƒ</h3>
<h4 data-id="heading-20">æ‰“åŒ…æ„å»º</h4>
<p>é¡¹ç›®å¼€å‘å®Œæˆï¼Œæ‰“åŒ…æ„å»ºä»£ç æ—¶ï¼Œå†…ç½®ä¸¤ç§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æ‰“åŒ…æ„å»ºé¢„å‘å¸ƒç¯å¢ƒ</span>
pnpm build:staging

<span class="hljs-comment"># æ‰“åŒ…æ„å»ºç”Ÿäº§ç¯å¢ƒ</span>
pnpm build
</code></pre>
<h4 data-id="heading-21">ç¯å¢ƒå˜é‡</h4>
<p>åœ¨ <code>.env.production</code> ç­‰å½¢å¦‚ <code>.env.xxx</code> æ–‡ä»¶ä¸­ï¼Œé…ç½®äº†è¯¥ç¯å¢ƒå¯¹åº”çš„ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment">## åç«¯æ¥å£åœ°å€ï¼ˆå¦‚æœè§£å†³è·¨åŸŸé—®é¢˜é‡‡ç”¨åå‘ä»£ç†å°±åªéœ€å†™ç›¸å¯¹è·¯å¾„ï¼‰</span>
VITE_BASE_URL = /api/v1

<span class="hljs-comment">## å¼€å‘ç¯å¢ƒåŸŸåå’Œé™æ€èµ„æºå…¬å…±è·¯å¾„ï¼ˆä¸€èˆ¬ / æˆ– ./ éƒ½å¯ä»¥ï¼‰</span>
VITE_PUBLIC_PATH = /
</code></pre>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_BASE_API</span>)
</code></pre>
<h2 data-id="heading-22">è¿›é˜¶</h2>
<h3 data-id="heading-23">ESLint</h3>
<p>è§„èŒƒä»£ç å¾ˆé‡è¦ï¼</p>
<ul>
<li>é…ç½®é¡¹åœ¨ <code>eslint.config.js</code> æ–‡ä»¶ä¸­</li>
<li>æ¨èå®‰è£… VSCode çš„ <code>ESLint</code> æ’ä»¶ï¼Œå®ƒå¯åœ¨å†™ä»£ç æ—¶ï¼Œå°†ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æ ‡çº¢ï¼Œå¹¶ä¸”åœ¨ä½ ä¿å­˜ä»£ç æ—¶è‡ªåŠ¨ä¿®å¤ä¸€äº›ç®€å•çš„æ ‡çº¢çš„ä»£ç </li>
<li>æ‰‹åŠ¨æ ¡éªŒå’Œæ ¼å¼åŒ–å‘½ä»¤ <code>pnpm lint</code>ï¼ˆæäº¤ä»£ç å‰å¯ä»¥æ‰§è¡Œè¯¥å‘½ä»¤ï¼‰</li>
</ul>
<h3 data-id="heading-24">ä»£ç æäº¤æ ¡éªŒ</h3>
<p>é¡¹ç›®é‡‡ç”¨ <code>husky</code> + <code>lint-staged</code> çš„æ–¹å¼ï¼Œåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨å±€ <code>ts</code> ç±»å‹æ£€æŸ¥å’Œ <code>eslint</code> æ ¡éªŒ</p>
<p><code>husky</code> ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œå¦‚æœå‘ç°æ²¡æœ‰æ­£å¸¸åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤ <code>pnpm prepare</code> åˆå§‹åŒ– <code>husky</code></p>
<h3 data-id="heading-25">è·¨åŸŸ</h3>
<h4 data-id="heading-26">åå‘ä»£ç†</h4>
<p><code>vite.config</code> é‡Œæœ‰ <code>proxy</code> è¿›è¡Œåå‘ä»£ç†ï¼Œä¸ä¹‹å¯¹åº”çš„ç”Ÿäº§ç¯å¢ƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>nginx</code> æ¥åšåå‘ä»£ç†</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-attr">proxy</span>: {
  <span class="hljs-string">"/api/v1"</span>: {
    <span class="hljs-attr">target</span>: <span class="hljs-string">"https://xxxxxx"</span>,
    <span class="hljs-comment">// æ˜¯å¦ä¸º WebSocket</span>
    <span class="hljs-attr">ws</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// æ˜¯å¦å…è®¸è·¨åŸŸ</span>
    <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h4 data-id="heading-27">CORS</h4>
<p>è¿™ç§æ–¹æ¡ˆå¯¹äºå‰ç«¯æ¥è¯´æ²¡æœ‰ä»€ä¹ˆå·¥ä½œé‡ï¼Œå’Œæ­£å¸¸å‘é€è¯·æ±‚å†™æ³•ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå·¥ä½œé‡åŸºæœ¬éƒ½åœ¨åç«¯è¿™é‡Œ</p>
<p>å®ç° <a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F04%2Fcors.html" target="_blank" title="http://www.ruanyifeng.com/blog/2016/04/cors.html" ref="nofollow noopener noreferrer">CORS</a> ä¹‹åï¼Œä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œéƒ½èƒ½æ–¹ä¾¿çš„è°ƒç”¨æ¥å£</p>
<h3 data-id="heading-28">SVG</h3>
<p><code>vite-svg-loader</code> æ’ä»¶æä¾›çš„çš„èƒ½åŠ›ï¼Œå¯ä»¥å°† SVG æ–‡ä»¶å¯¼å…¥ä¸º Vue ç»„ä»¶ï¼</p>
<p>æ¯”å¦‚ 404 é¡µé¢ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script lang=<span class="hljs-string">"ts"</span> setup&gt;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/Layout.vue"</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Svg404</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./images/404.svg?component"</span> <span class="hljs-comment">// vite-svg-loader æ’ä»¶çš„åŠŸèƒ½</span>
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Svg404</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-29">è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥</h3>
<p>åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-vue-components" target="_blank" title="https://github.com/unplugin/unplugin-vue-components" ref="nofollow noopener noreferrer">unplugin-vue-components</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-auto-import" target="_blank" title="https://github.com/unplugin/unplugin-auto-import" ref="nofollow noopener noreferrer">unplugin-auto-import</a> å®ç°çš„ç»„ä»¶å’Œ API è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥</p>
<p>å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨ <code>Vant</code> çš„æŒ‰é’®ç»„ä»¶ï¼Œä¾‹å¦‚ <code>van-button</code>ï¼Œä¸ç”¨å†æ‰‹åŠ¨é€šè¿‡ <code>import</code> è¯­å¥å¯¼å…¥ç»„ä»¶å’Œæ ·å¼ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">van-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">van-button</span>&gt;</span>
</code></pre>
<p>å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨ Vue çš„ <code>ref</code> APIï¼Œä¹Ÿä¸ç”¨å†æ‰‹åŠ¨å¯¼å…¥ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
</code></pre>
<p><em>æ‰€æœ‰å·²ç»å†…ç½®çš„è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ï¼š<code>vue</code>ã€<code>vue-router</code>ã€<code>pinia</code>ã€<code>vant</code> ç›¸å…³çš„ API å’Œç»„ä»¶ï¼Œå®ƒä»¬å››ä¸ªä¼šè‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ï¼Œåˆ‡è®°ä¸è¦æ‰‹åŠ¨ <code>import</code></em></p>
<h3 data-id="heading-30">è‡ªåŠ¨ç”Ÿæˆç±»å‹</h3>
<p><code>types/auto</code> ç›®å½•ä¸‹ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†ï¼Œåˆ‡è®°ä¸è¦æ‰‹åŠ¨ä¿®æ”¹</p>
<h2 data-id="heading-31">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-32">æŠ¥é”™</h3>
<ul>
<li>AI ä¸€ä¸‹å¯ä»¥è§£å†³ <code>99%</code> çš„æŠ¥é”™</li>
<li>å°è¯•åˆ é™¤ <code>node_modules</code> å’Œ <code>.lock</code> æ–‡ä»¶åå†æ¬¡ä¾èµ–</li>
<li>æ£€æŸ¥ç¯å¢ƒæ˜¯å¦å’Œä½œè€…æ¨èçš„ä¸€è‡´</li>
<li>é‡å¯ä¸€ä¸‹ï¼Ÿ</li>
</ul>
<h3 data-id="heading-33">ä¾èµ–è¶…æ—¶</h3>
<ul>
<li>å›½å†…ç”¨æˆ·å¯ä»¥è®¾ç½®æœ€æ–°çš„æ·˜å®æºåŠ å¿«ä¾èµ–é€Ÿåº¦ <code>https://registry.npmmirror.com</code></li>
</ul>
<h3 data-id="heading-34">çƒ­æ›´æ–°å¤±æ•ˆ</h3>
<ul>
<li>æ£€æŸ¥é…ç½®è·¯ç”±æ—¶å¡«å†™çš„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆç‰¹åˆ«æ˜¯å­—æ¯å¤§å°å†™é—®é¢˜ï¼‰</li>
</ul>
<h3 data-id="heading-35">æœ¬åœ°å¼€å‘æ—¶åˆ‡æ¢è·¯ç”±å¯¼è‡´é¡µé¢é‡è½½</h3>
<p><em>åªä¼šåœ¨å¼€å‘ç¯å¢ƒå‡ºç°ï¼Œä¸ä¼šå½±å“ç”Ÿæˆç¯å¢ƒ</em></p>
<ul>
<li>ç”± <code>unplugin-vue-components</code> å¯¼è‡´çš„é—®é¢˜ï¼Œå¯ç­‰å¾…æ’ä»¶ä¿®å¤</li>
<li>ä¹Ÿå¯ä»¥å–æ¶ˆè‡ªåŠ¨æŒ‰éœ€å¯¼å…¥æ ·å¼ï¼Œæ”¹ä¸ºè‡ªå·±æ‰‹åŠ¨å…¨é‡å¯¼å…¥ <code>Vant</code> æ ·å¼æ¥è§£å†³è¯¥é—®é¢˜</li>
</ul>
<h2 data-id="heading-36">é¢„è§ˆå›¾</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/712ed39c153e41f4a8adb39154c35151~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGFueQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745077381&amp;x-signature=bNlg5xzORF9aTxOlfkydpLRdIeA%3D" alt="image.png" loading="lazy"></p>
<h2 data-id="heading-37">ç›¸å…³é“¾æ¥</h2>
<p><strong>åœ¨çº¿é¢„è§ˆ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fun-pany.github.io%2Fmobvue" target="_blank" title="https://un-pany.github.io/mobvue" ref="nofollow noopener noreferrer">github-pages</a></p>
<p><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue" target="_blank" title="https://github.com/un-pany/mobvue" ref="nofollow noopener noreferrer">github</a></p>
<p><strong>Gitee ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fun-pany%2Fmobvue" target="_blank" title="https://gitee.com/un-pany/mobvue" ref="nofollow noopener noreferrer">gitee</a></p>
<p><strong>äº¤æµç¾¤</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Fissues%2F3" target="_blank" title="https://github.com/un-pany/mobvue/issues/3" ref="nofollow noopener noreferrer">æŸ¥çœ‹è¿›ç¾¤æ–¹å¼</a></p>
<p><strong>å‘è¡Œç‰ˆ &amp; æ›´æ–°æ—¥å¿—</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fun-pany%2Fmobvue%2Freleases" target="_blank" title="https://github.com/un-pany/mobvue/releases" ref="nofollow noopener noreferrer">releases</a></p></div></div>
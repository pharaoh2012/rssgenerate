
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/likingzi/p/18662633" title="发布于 2025-01-09 17:52">
    <span role="heading" aria-level="2">linux 手动释放内存</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>在 Linux 系统中，内存管理通常由系统自动处理，但在某些情况下，手动释放内存可能是必要的。例如，当业务应用比较繁忙时会频繁存取文件，物理内存会被缓存大量占用，有时会出现内存不足的情况发生，甚至会导致系统性能下降。此时可主动在业务闲时手动释放内存。</p>
<h2 id="一首先查看当前内存使用情况">一、首先查看当前内存使用情况</h2>
<p>使用 free -m 命令查看，输出结果包括总内存、已使用内存、空闲内存、共享内存、缓冲区和缓存等信息。</p>
<h2 id="二然后执行如下步骤手动释放内存">二、然后执行如下步骤手动释放内存</h2>
<h3 id="-查看当前-drop_caches-的值">■ 查看当前 drop_caches 的值</h3>
<p>cat /proc/sys/vm/drop_caches<br>
可能会提示权限不足，默认值为 0，表示不释放缓存</p>
<h3 id="-运行-sync-命令">■ 运行 sync 命令</h3>
<p>sync<br>
该命令将所有未写的系统缓冲区写到磁盘中，确保文件系统的完整性</p>
<h3 id="-手动释放内存">■ 手动释放内存</h3>
<p>echo 1 &gt; /proc/sys/vm/drop_caches<br>
drop_caches 是 0-3 之间的数字，代表不同的含义：<br>
0：不释放（系统默认值）<br>
1：释放页缓存<br>
2：释放 dentries 和 inodes<br>
3：释放所有缓存</p>
<h3 id="-还原配置">■ 还原配置</h3>
<p>echo 0 &gt; /proc/sys/vm/drop_caches<br>
释放完内存后，将 drop_caches 的值改回 0，让系统重新自动分配内存</p>
<h2 id="三注意事项">三、注意事项</h2>
<h3 id="缓存机制">缓存机制</h3>
<p>Linux 的缓存机制非常先进，通常不需要手动释放内存。缓存包括 dentry（用于加速文件路径名到 inode 的转换）、Buffer Cache（针对磁盘块的读写）和 Page Cache（针对文件 inode 的读写）</p>
<h3 id="性能影响">性能影响</h3>
<p>频繁手动释放内存可能会影响系统性能，建议在内存不足、应用获取不到可用内存或发生 OOM 错误时，首先分析应用方面的原因</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.03915245349537037" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-09 17:52">2025-01-09 17:52</span>&nbsp;
<a href="https://www.cnblogs.com/likingzi">likingzi</a>&nbsp;
阅读(<span id="post_view_count">3</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18662633" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18662633);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18662633', targetLink: 'https://www.cnblogs.com/likingzi/p/18662633', title: 'linux 手动释放内存' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pam-sh/p/18821579" title="发布于 2025-04-11 23:35">
    <span role="heading" aria-level="2">基于MCP实现text2sql</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>目的：基于MCP实现text2sql能力</p>
<p>参考：<a href="https://blog.csdn.net/hacker_Lees/article/details/146426392" target="_blank" rel="noopener nofollow">https://blog.csdn.net/hacker_Lees/article/details/146426392</a></p>
</blockquote>
<h2 id="服务端">服务端</h2>
<ol>
<li>选用开源的<code>MySQL MCP Server</code>，本地部署：<a href="https://github.com/dpflucas/mysql-mcp-server" target="_blank" rel="noopener nofollow">https://github.com/dpflucas/mysql-mcp-server</a></li>
</ol>
<pre><code class="language-shell"># Clone the repository
git clone https://github.com/dpflucas/mysql-mcp-server.git
cd mysql-mcp-server

# Install dependencies and build
npm install
npm run build
</code></pre>
<h2 id="客户端">客户端</h2>
<p>使用<code>Cherry Studio</code>作为客户端，内置接入MCP服务器功能，模型配置省略。</p>
<p>MCP有两种模式：</p>
<pre><code class="language-txt">1）STDIO模式（本地运行）
    特点：本地安装运行MCP Server，但需配置开发环境。
    配置步骤：
    安装依赖：需Python（推荐用uv安装）和NodeJS（推荐bun代替npm），Windows/MacOS/Linux均支持
    添加MCP服务：在Cherry Studio-&gt;Settings-&gt;MCP Servers中，选择Edit JSON，填写mcpServers配置内容。
2）SSE模式（远程服务）
    特点：无需本地环境，仅需输入服务器URL，适合调用云端API（如天气查询、数据库接口）。
    配置步骤：直接输入SSE服务地址即可，例如集成Google Gemini或腾讯混元的联网搜索功能。
</code></pre>
<p>添加MCP json：</p>
<pre><code class="language-json">{
  "mcpServers": {
    "mysql": {
      "isActive": true,
      "command": "node",
      "args": [
        "D:\\code\\MCP\\mysql-mcp-server-main\\build\\index.js"
      ],
      "env": {
        "MYSQL_HOST": "localhost",
        "MYSQL_PORT": "3306",
        "MYSQL_USER": "root",
        "MYSQL_PASSWORD": "root",
        "MYSQL_DATABASE": "test"
      },
      "disabled": false,
      "autoApprove": [],
      "name": "mysql"
    }
  }
}
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/1928790/202504/1928790-20250411233513124-1248216771.png" alt="image-20250411233018608" loading="lazy"></p>
<h3 id="测试">测试</h3>
<p><img src="https://img2024.cnblogs.com/blog/1928790/202504/1928790-20250411233513235-1404993396.png" alt="image-20250411232740643" loading="lazy"></p>
<p>总的来说，text2sql能力还是取决于可用工具的功能，<strong>MCP就是让模型根据用户意图去执行接口调度的过程</strong>。</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.033284404608796295" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-11 23:37">2025-04-11 23:35</span>&nbsp;
<a href="https://www.cnblogs.com/pam-sh">PamShao</a>&nbsp;
阅读(<span id="post_view_count">7</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18821579" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18821579);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18821579', targetLink: 'https://www.cnblogs.com/pam-sh/p/18821579', title: '基于MCP实现text2sql' })">举报</a>
</div>
        
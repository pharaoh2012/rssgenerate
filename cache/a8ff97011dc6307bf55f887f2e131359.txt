
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zibocoder/p/18848768" title="发布于 2025-04-27 08:45">
    <span role="heading" aria-level="2">leaflet-canvasmarker添加的marker旋转问题</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>Leafletjs的标准图层的marker是可以通过组件 <code>leaflet-rotatedmarker</code>进行图标旋转的，在marker上添加两个属性：</p>
<ul>
<li><code>rotationAngle</code>：旋转角度，以度为单位，顺时针旋转。</li>
<li><code>rotationOrigin</code>：旋转中心，默认值为 'bottom center'，对应于标记图标的“尖端”。</li>
</ul>
<p><mark>但是leaflet-canvasmarker组件的图层使用leaflet-rotatedmarker的旋转方式失效，而在leaflet-canvasmarker官网提供了一个旋转的方法： Leaflet.Icon扩展参数&nbsp; rotate</mark></p>
<p>参考网址：<a href="https://zhuanlan.zhihu.com/p/593744067" target="_blank" rel="noopener nofollow">https://zhuanlan.zhihu.com/p/593744067</a></p>
<ul>
<li>
<p>旋转</p>
</li>
<li>
<p>使用 <code>rotate(angle)</code> 方法可以旋转画布，但默认的旋转原点是画布的左上角，也就是 <code>(0, 0)</code> 坐标。</p>
<p>我计算旋转角度通常是用 <code>角度 * Math.PI / 180</code> 的方式表示。</p>
</li>
</ul>
<p>关键代码：<code>rotate: Math.PI / 180 * v.direction,</code></p>
<pre><code class="language-js">// 图标
const icon = L.icon({
    iconUrl,
    iconSize: [24, 24],
    iconAnchor: [12, 12],
    rotate: Math.PI / 180 * v.direction, 
});
// 加到marker上
const m = L.marker([v.lat, v.lng],{ icon, data: v});
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="26.81359200074537" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-27 08:46">2025-04-27 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/zibocoder">程序员张3</a>&nbsp;
阅读(<span id="post_view_count">15</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18848768);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18848768', targetLink: 'https://www.cnblogs.com/zibocoder/p/18848768', title: 'leaflet-canvasmarker添加的marker旋转问题' })">举报</a>
</div>
        
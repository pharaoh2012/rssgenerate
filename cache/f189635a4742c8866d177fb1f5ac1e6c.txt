<!----> <meta itemprop="headline" content="autohue.jsï¼šè®©ä½ çš„å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“ï¼Œç»äº†ï¼"> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç®—æ³•"> <meta itemprop="datePublished" content="2025-02-17T02:00:49.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è±å„æ–¯"> <meta itemprop="url" content="https://juejin.cn/user/3919115686512942"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-38a6c62f="">
            autohue.jsï¼šè®©ä½ çš„å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“ï¼Œç»äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-38a6c62f=""><div class="author-info-box" data-v-38a6c62f=""><div class="author-name" data-v-38a6c62f=""><a href="/user/3919115686512942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-1800aadb="" data-v-38a6c62f=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-1800aadb="">
    å¾·è±å„æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-38a6c62f=""><time datetime="2025-02-17T02:00:49.000Z" title="Mon Feb 17 2025 02:00:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-38a6c62f="">
                    2025-02-17
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-38a6c62f=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-38a6c62f=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-38a6c62f=""></circle></svg> <span class="views-count" data-v-38a6c62f="">
                    11,065
                  </span> <span class="read-time" data-v-38a6c62f=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-38a6c62f=""><rect width="16" height="16" fill="none" data-v-38a6c62f=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-38a6c62f=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-38a6c62f=""></path></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-38a6c62f=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-38a6c62f=""><div class="article-viewer markdown-body result"><h2 data-id="heading-0">éœ€æ±‚</h2>
<p>å…ˆæ¥çœ‹è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæ‹¿ä¸€ä¸ªç½‘ç«™ä¸¾ä¾‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d77846da42f4496b3fce343a1100180~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=VY4XkdQ44t4HiM3FcvHkkQz%2Fe%2Bk%3D" alt="image.png" loading="lazy"></p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¸¸è§çš„ç½‘ç«™ banner å›¾å®¹å™¨ï¼Œå¤§å°ä¸ºä¸º1910*560ï¼Œçœ‹èµ·æ¥èƒŒæ™¯å›¾å®Œç¾çš„å……æ»¡äº†å®½åº¦ï¼Œä½†æ˜¯å›¾ç‰‡åŸå§‹å¤§å°æ—¶ï¼Œå´æ˜¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a7921b1792c470287a9d227155ca679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=wwjgkYIN7OfWGb2agYq%2BrTHj%2FpU%3D" alt="image.png" loading="lazy"></p>
<p>å®ƒçš„å®½åº¦åªæœ‰ 1440ï¼Œä¸” background-size è®¾ç½®çš„æ˜¯ contain ï¼Œå³ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œé‚£ä¹ˆå¯ä»¥æ–­å®šå®ƒä¸¤è¾¹çš„è“è‰²æ˜¯ä¾é èƒŒæ™¯è‰²å¡«å……çš„ã€‚</p>
<p><strong>é‚£ä¹ˆé—®é¢˜æ¥äº†</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ª è½®æ’­bannerï¼Œå¦‚æœå¸Œæœ›æ·»åŠ ä¸€å¼ ä¸æ˜¯è“è‰²çš„å›¾ç‰‡å‘¢ï¼Ÿéš¾é“è¦ç»™æ¯å¼ å›¾ç‰‡æå‰æ ‡æ³¨å¥½èƒŒæ™¯é¢œè‰²å—ï¼Ÿè¿™æ˜¾ç„¶æ˜¯éå¸¸æ­»æ¿çš„åšæ³•ã€‚</p>
<p>æ‰€ä»¥éœ€è¦ä»å›¾ç‰‡ä¸­æå–åˆ°å›¾ç‰‡çš„ä¸»é¢˜è‰²ï¼Œå½“ç„¶è¿™å¯¹äº js æ¥è¯´ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼Œå¸‚é¢ä¸Šå·²ç»æœ‰ä¼—å¤šçš„å¼€æºåº“ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-1">æ¢ç´¢</h2>
<p>é¦–å…ˆåœ¨ç½‘ç»œä¸Šæ‰¾åˆ°äº†ä»¥ä¸‹å‡ ä¸ªåº“ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flokesh%2Fcolor-thief" target="_blank" title="https://github.com/lokesh/color-thief" ref="nofollow noopener noreferrer">color-thief</a> è¿™æ˜¯ä¸€æ¬¾åŸºäº JavaScript å’Œ Canvas çš„å·¥å…·ï¼Œèƒ½å¤Ÿä»å›¾åƒä¸­æå–ä¸»è¦é¢œè‰²æˆ–ä»£è¡¨æ€§çš„è°ƒè‰²æ¿</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjariz%2Fvibrant.js" target="_blank" title="https://github.com/jariz/vibrant.js" ref="nofollow noopener noreferrer">vibrant.js </a> è¯¥æ’ä»¶æ˜¯ Android æ”¯æŒåº“ä¸­ Palette ç±»çš„ JavaScript ç‰ˆæœ¬ï¼Œå¯ä»¥ä»å›¾åƒä¸­æå–çªå‡ºçš„é¢œè‰²</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbriangonzalez%2Frgbaster.js" target="_blank" title="https://github.com/briangonzalez/rgbaster.js" ref="nofollow noopener noreferrer">rgbaster.js</a> è¿™æ˜¯ä¸€æ®µå°å‹è„šæœ¬ï¼Œå¯ä»¥è·å–å›¾ç‰‡çš„ä¸»è‰²ã€æ¬¡è‰²ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿å®ç°ä¸€äº›ç²¾å½©çš„ Web äº¤äº’æ•ˆæœ</li>
</ul>
<p>æˆ‘å–æœ€è½»é‡åŒ–çš„ rgbaster.jsï¼ˆæ­¤åº“éå¸¸æç¬‘ï¼Œç”¨TSç¼–å†™ï¼Œnpm åŒ…å´æ²¡æœ‰æŒ‡å®š typesï¼‰ æ¥æµ‹è¯•åå‘ç°ï¼Œå®ƒç»™æˆ‘åœ¨ä¸€ä¸ªæ¸å˜è‰²å›¾ç‰‡ä¸­ï¼Œè¿”å›äº†ä¸ƒä¸‡å¤šä¸ªè‰²å€¼ï¼Œå½“ç„¶ï¼Œå®ƒå‡†ç¡®çš„æå–å‡ºäº†é¢ç§¯æœ€å¤§çš„è‰²å€¼ï¼Œä½†æ˜¯è¿™ä¸ªè‰²å€¼ä¸æ˜¯å›¾ç‰‡è¾¹ç¼˜çš„é¢œè‰²ï¼Œå¯¼è‡´è®¾ç½®ä¸ºèƒŒæ™¯è‰²åï¼Œå¹¶ä¸èƒ½å®Œç¾çš„èåˆã€‚</p>
<p>å¦å¤–çš„æ’ä»¶å„ä½å¯ä»¥å‚è€ƒè¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li>æ–‡ç« 1ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_42998707%2Farticle%2Fdetails%2F108011092" target="_blank" title="https://blog.csdn.net/weixin_42998707/article/details/108011092" ref="nofollow noopener noreferrer">blog.csdn.net/weixin_4299â€¦</a></li>
<li>æ–‡ç« 2ï¼š<a href="https://juejin.cn/post/6844903511956815885" target="_blank" title="https://juejin.cn/post/6844903511956815885">juejin.cn/post/684490â€¦</a></li>
<li>æ–‡ç« 3ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhangxinxu.com%2Fwordpress%2F2014%2F08%2Fimage-dominant-color-get-rgbaster-js" target="_blank" title="https://www.zhangxinxu.com/wordpress/2014/08/image-dominant-color-get-rgbaster-js" ref="nofollow noopener noreferrer">www.zhangxinxu.com/wordpress/2â€¦</a></li>
</ul>
<p>å¯ä»¥å‘ç°ï¼Œè¿™äº›æ’ä»¶ä¸»è¦åŠŸèƒ½å°±æ˜¯å–è‰²ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œå¯¹äºä¸€ä¸ªå›¾ç‰‡é¢œè‰²åˆ†æå·¥å…·æ¥è¯´ï¼Œä»–ä»¬åšçš„å¾ˆåˆ°ä½ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œä»–ä»¬å¾€å¾€æ˜¯ä¸é€‚ç”¨çš„ã€‚</p>
<p>åœ¨æ–‡ç«  2 ä¸­ï¼Œä½œè€…å¯¹æ¯”äº†ä¸‰æ¬¾æ’ä»¶å¯¹äºå›¾ç‰‡å®¹å™¨èƒŒæ™¯è‰²çš„åº”ç”¨ï¼Œçœ‹èµ·æ¥è¿˜æ˜¯ rgbaster æ•ˆæœå¥½ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬åˆšåˆšä¹Ÿæ‹¿ä»–è¯•äº†ï¼Œå®ƒå¹¶ä¸èƒ½é€‚ç”¨äºé¢œè‰²å¤æ‚åº¦é«˜çš„ã€æ¸å˜è‰²çš„å›¾ç‰‡ã€‚</p>
<h2 data-id="heading-2">æ€è€ƒ</h2>
<p>æ—¢ç„¶åˆåˆåˆæ²¡æœ‰äººåšè¿™ä»¶äº‹ï¼Œæ­£æ‰€è°“æˆ‘ä¸å…¥åœ°ç‹±è°å…¥åœ°ç‹±ï¼Œæˆ‘æ‰‹å†™ä¸€ä¸ª</p>
<p>æ•´ç†ä¸€ä¸‹éœ€æ±‚ï¼Œæˆ‘å‘ç°æˆ‘å¸Œæœ›å¾—åˆ°çš„æ˜¯ï¼š</p>
<ol>
<li>å›¾ç‰‡çš„ä¸»é¢˜è‰²ï¼ˆé¢ç§¯å æ¯”æœ€å¤§ï¼‰</li>
<li>æ¬¡ä¸»é¢˜è‰²ï¼ˆé¢ç§¯å æ¯”ç¬¬äºŒå¤§ï¼‰</li>
<li>åˆé€‚çš„èƒŒæ™¯è‰²ï¼ˆå³å›¾ç‰‡è¾¹ç¼˜é¢œè‰²ï¼Œæ¸å˜æ—¶ï¼Œéœ€è¦è¾¹ç¼˜é¢œè‰²æ¥è®¾ç½®èƒŒæ™¯è‰²ï¼‰</li>
</ol>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±å·²ç»å¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†éœ€æ±‚äº†ï¼Œ1+2 å¯ä»¥ç”Ÿæˆç›¸å…³çš„ ä¸»é¢˜ TAGã€ä¸»é¢˜èƒŒæ™¯ï¼Œ3 å¯ä»¥ä½¿ç•™ç™½çš„å›¾ç‰‡å®¹å™¨å®Œç¾èåˆã€‚</p>
<h2 data-id="heading-3">å¼€æ</h2>
<p><strong>âš âš  æœ¬å°èŠ‚å†…å®¹éå¸¸ç¡¬æ ¸ï¼Œå¦‚æœä¸æƒ³æ·±ç©¶åŸç†å¯ä»¥ç›´æ¥<a href="#heading-6" title="#heading-6">è·³è¿‡</a>ï¼Œæ–‡ç« æœ«å°¾æœ‰ç”¨æ³•å’Œæ•ˆæœå›¾ âš âš </strong></p>
<h3 data-id="heading-4">æ€è·¯</h3>
<p>é¦–å…ˆéœ€è¦é¿å…ä¸Šé¢æåˆ°çš„æ’ä»¶çš„ç¼ºç‚¹ï¼Œå³å¯¹æ¸å˜å›¾ç‰‡è¦åšå¥½å¤„ç†ï¼Œä¸èƒ½å–å‡ºæˆåƒä¸Šä¸‡çš„é¢œè‰²ï¼Œä½“éªŒå¤ªå·®ä¸”å®ç”¨æ€§ä¸å¼ºï¼Œå¯¹äºæ¸å˜è‰²è¿˜æœ‰ä¸€ç‚¹ï¼Œå³åœ¨æ¸å˜è·¯å¾„ä¸Šï¼Œæ¯ä¸€ç‚¹çš„é¢œè‰²éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦å°†ä»–ä»¬ä»¥ä¸€ä¸ªé˜ˆå€¼åˆ†ç±»ï¼ŒæŒ‘é€‰å‡ºä¸€ä¼—ç›¸è¿‘è‰²ï¼Œå¹¶è®¡ç®—å‡ºä¸€ä¸ªå¹³å‡è‰²ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¼è‡´ä¸»é¢˜è‰²å¤ªç²¾å‡†è¿›è€Œæ²¡æœ‰ä»£è¡¨æ€§ã€‚</p>
<p>å¯¹äºèƒŒæ™¯è‰²ï¼Œéœ€è¦æŒ‰æƒ…å†µåˆ†æï¼Œå¦‚æœåªæ˜¯å¸Œæœ›åšä¸€ä¸ªåè°ƒçš„é¡µé¢ï¼Œé‚£ä¹ˆå¤§å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸»é¢˜è‰²åšæ¸å˜è¿‡æ¸¡æˆ–è’™å±‚ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºè¿™ç§æ•ˆæœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13ad6e69b69b4e208bd0dd20c5089ad4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=Vlkvm1jIbCL8rimtufkBate4ECM%3D" alt="image.png" loading="lazy"></p>
<p>ä½†æ˜¯å¦‚æœå¸Œæœ›èƒŒæ™¯ä¸å›¾ç‰‡å®Œç¾è¡”æ¥ï¼Œè®©äººçœ‹ä¸å‡ºå›¾ç‰‡è¾¹ç•Œçš„æ„Ÿè§‰ï¼Œå°±éœ€è¦å•ç‹¬å¯¹è¾¹ç¼˜é¢œè‰²å–è‰²äº†ã€‚</p>
<p>æœ€åä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå›¾ç‰‡åˆ†è¾¨ç‡è¿‡å¤§ï¼Œåœ¨éå†åƒç´ ç‚¹æ—¶ä¼šéå¸¸æ¶ˆè€—æ€§èƒ½ï¼Œæ‰€ä»¥éœ€è¦é™ä½é‡‡æ ·ç‡ï¼Œè™½ç„¶ä¼šå¯¼è‡´ä¸€äº›ç²¾åº¦ä¸Šçš„ä¸¢å¤±ï¼Œä½†æ˜¯è°ƒæ•´ä¸ºä¸€ä¸ªåˆé€‚çš„å€¼ååº”è¯¥åŸºæœ¬å¯ç”¨ã€‚</p>
<p>å‰©ä½™çš„ç»†èŠ‚é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ä¸‹é¢çš„ä»£ç ä¸­è§£é‡Š</p>
<h3 data-id="heading-5">ä½¿ç”¨ JaveScript ç¼–ç </h3>
<p>æ¥ä¸‹æ¥æˆ‘å°†è¯¦ç»†æè¿° autohue.js çš„å®ç°è¿‡ç¨‹ï¼Œç”±äºæœ¬äººå¯¹<code>è‰²å½©ç§‘å­¦</code>ä¸ç”šäº†è§£ï¼Œå¦‚æœ‰è§£é‡Šä¸åˆ°ä½æˆ–é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡ºã€‚</p>
<p>é¦–å…ˆç¼–å†™ä¸€ä¸ªå…¥å£ä¸»å‡½æ•°ï¼Œæˆ‘ç›®å‰è€ƒè™‘åˆ°çš„å‚æ•°åº”è¯¥æœ‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">colorPicker</span>(<span class="hljs-params">imageSource: HTMLImageElement | <span class="hljs-built_in">string</span>, options?: autoColorPickerOptions</span>)
<span class="hljs-keyword">type</span> thresholdObj = { primary?: <span class="hljs-built_in">number</span>; left?: <span class="hljs-built_in">number</span>; right?: <span class="hljs-built_in">number</span>; top?: <span class="hljs-built_in">number</span>; bottom?: <span class="hljs-built_in">number</span> }
<span class="hljs-keyword">interface</span> autoColorPickerOptions {
  <span class="hljs-comment">/**
   * - é™é‡‡æ ·åçš„æœ€å¤§å°ºå¯¸ï¼ˆé»˜è®¤ 100pxï¼‰
   * - é™é‡‡æ ·åçš„å›¾ç‰‡å°ºå¯¸ä¸ä¼šè¶…è¿‡è¯¥å€¼ï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´
   * - é™é‡‡æ ·åçš„å›¾ç‰‡å°ºå¯¸è¶Šå°ï¼Œå¤„ç†é€Ÿåº¦è¶Šå¿«ï¼Œä½†å¯èƒ½ä¼šå½±å“é¢œè‰²æå–çš„å‡†ç¡®æ€§
   **/</span>
  maxSize?: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/**
   * - Lab è·ç¦»é˜ˆå€¼ï¼ˆé»˜è®¤ 10ï¼‰
   * - ä½äºæ­¤å€¼çš„é¢œè‰²å½’ä¸ºåŒä¸€ç°‡ï¼Œå»ºè®® 8~12
   * - å€¼è¶Šå¤§ï¼Œé¢œè‰²è¶Šå®¹æ˜“è¢«åˆå¹¶ï¼Œæå–çš„é¢œè‰²è¶Šå°‘
   * - å€¼è¶Šå°ï¼Œé¢œè‰²è¶Šå®¹æ˜“è¢«åŒºåˆ†ï¼Œæå–çš„é¢œè‰²è¶Šå¤š
   **/</span>
  threshold?: <span class="hljs-built_in">number</span> | thresholdObj
}
</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Š Lab ï¼Œå…¨ç§°ï¼š<code>CIE L*a*b</code> ï¼Œ<code>CIE L*a*b*</code> æ˜¯<code>CIE XYZ</code>è‰²å½©æ¨¡å¼çš„æ”¹è¿›å‹ã€‚å®ƒçš„â€œLâ€ï¼ˆæ˜äº®åº¦ï¼‰ï¼Œâ€œaâ€ï¼ˆç»¿è‰²åˆ°çº¢è‰²ï¼‰å’Œâ€œbâ€ï¼ˆè“è‰²åˆ°é»„è‰²ï¼‰ä»£è¡¨è®¸å¤šçš„å€¼ã€‚ä¸XYZæ¯”è¾ƒï¼Œ<code>CIE L*a*b*</code>çš„è‰²å½©æ›´é€‚åˆäºäººçœ¼æ„Ÿè§‰çš„è‰²å½©ï¼Œæ­£æ‰€è°“<code>æ„ŸçŸ¥å‡åŒ€</code></p>
</blockquote>
<p>ç„¶åéœ€è¦å®ç°ä¸€ä¸ªæ­£å¸¸çš„ loadImg æ–¹æ³•ï¼Œä½¿ç”¨ canvas å¼‚æ­¥åŠ è½½å›¾ç‰‡</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadImage</span>(<span class="hljs-params">imageSource: HTMLImageElement | <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">HTMLImageElement</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">img</span>: <span class="hljs-title class_">HTMLImageElement</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> imageSource === <span class="hljs-string">'string'</span>) {
      img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>()
      img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'Anonymous'</span>
      img.<span class="hljs-property">src</span> = imageSource
    } <span class="hljs-keyword">else</span> {
      img = imageSource
    }
    <span class="hljs-keyword">if</span> (img.<span class="hljs-property">complete</span>) {
      <span class="hljs-title function_">resolve</span>(img)
    } <span class="hljs-keyword">else</span> {
      img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(img)
      img.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(err)
    }
  })
}
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±è·å–åˆ°äº†å›¾ç‰‡å¯¹è±¡ã€‚</p>
<p>ç„¶åä¸ºäº†å›¾ç‰‡è¿‡å¤§ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œé™é‡‡æ ·å¤„ç†</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åˆ©ç”¨ Canvas å¯¹å›¾ç‰‡è¿›è¡Œé™é‡‡æ ·ï¼Œè¿”å› ImageData å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getImageDataFromImage</span>(<span class="hljs-params">img: HTMLImageElement, maxSize: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span></span>): <span class="hljs-title class_">ImageData</span> {
  <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>)
  <span class="hljs-keyword">let</span> width = img.<span class="hljs-property">naturalWidth</span>
  <span class="hljs-keyword">let</span> height = img.<span class="hljs-property">naturalHeight</span>
  <span class="hljs-keyword">if</span> (width &gt; maxSize || height &gt; maxSize) {
    <span class="hljs-keyword">const</span> scale = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(maxSize / width, maxSize / height)
    width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(width * scale)
    height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(height * scale)
  }
  canvas.<span class="hljs-property">width</span> = width
  canvas.<span class="hljs-property">height</span> = height
  <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)
  <span class="hljs-keyword">if</span> (!ctx) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ— æ³•è·å– Canvas ä¸Šä¸‹æ–‡'</span>)
  }
  ctx.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height)
  <span class="hljs-keyword">return</span> ctx.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height)
}

</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œé™é‡‡æ ·ï¼šé™é‡‡æ ·ï¼ˆDownsamplingï¼‰æ˜¯æŒ‡åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œé€šè¿‡å‡å°‘æ•°æ®çš„é‡‡æ ·ç‡æˆ–åˆ†è¾¨ç‡æ¥é™ä½æ•°æ®é‡çš„è¿‡ç¨‹ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯åœ¨ä¿æŒåŸå§‹ä¿¡æ¯å¤§è‡´ç‰¹å¾çš„æƒ…å†µä¸‹ï¼Œå‡å°‘æ•°æ®çš„å¤æ‚åº¦å’Œå­˜å‚¨éœ€æ±‚ã€‚è¿™é‡Œç®€å•ç†è§£ä¸ºå°†å›¾ç‰‡å¼ºåˆ¶å‹ç¼©ä¸º 100*100 ä»¥å†…ï¼Œä¹Ÿæ˜¯ canvas å‹ç¼©å›¾ç‰‡çš„å¸¸è§åšæ³•ã€‚</p>
</blockquote>
<p>å¾—åˆ°å›¾åƒä¿¡æ¯åï¼Œå°±å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåƒç´ éå†å¤„ç†äº†ï¼Œæ­£å¦‚æ€è€ƒä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç›¸è¿‘è‰²æå–å¹¶å–å¹³å‡è‰²ï¼Œå¹¶æœ€ç»ˆè·å–åˆ°ä¸»é¢˜è‰²ã€æ¬¡ä¸»é¢˜è‰²ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ‰ç®—ç›¸è¿‘è‰²ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œåœ¨ å¸¸è§„çš„ rgb ä¸­ç›´æ¥è®¡ç®—æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸€ä¸ªæ„ŸçŸ¥å‡åŒ€çš„é—®é¢˜</p>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œæ„ŸçŸ¥å‡åŒ€ï¼šXYZç³»ç»Ÿå’Œåœ¨å®ƒçš„è‰²åº¦å›¾ä¸Šè¡¨ç¤ºçš„ä¸¤ç§é¢œè‰²ä¹‹é—´çš„è·ç¦»ä¸é¢œè‰²è§‚å¯Ÿè€…æ„ŸçŸ¥çš„å˜åŒ–ä¸ä¸€è‡´ï¼Œè¿™ä¸ªé—®é¢˜å«åšæ„ŸçŸ¥å‡åŒ€æ€§(perceptual uniformity)é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯é¢œè‰²ä¹‹é—´æ•°å­—ä¸Šçš„å·®åˆ«ä¸è§†è§‰æ„ŸçŸ¥ä¸ä¸€è‡´ã€‚ç”±äºæˆ‘ä»¬éœ€è¦åœ¨é¢œè‰²ç°‡ä¸­è®¡ç®—å‡ºå¹³å‡è‰²ï¼Œé‚£ä¹ˆå¯¹äºäººçœ¼æ¥è¯´å“ªäº›é¢œè‰²æ˜¯ç›¸è¿‘çš„ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ sRGB è½¬åŒ–ä¸º Lab è‰²å½©ç©ºé—´ï¼ˆæ„ŸçŸ¥å‡åŒ€çš„ï¼‰ï¼Œå†è®¡ç®—å…¶æ¬§æ°è·ç¦»ï¼Œåœ¨æŸä¸€é˜ˆå€¼å†…çš„é¢œè‰²ï¼Œå³å¯è®¤ä¸ºæ˜¯ç›¸è¿‘è‰²ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦å°† rgb è½¬åŒ–ä¸º Lab è‰²å½©ç©ºé—´</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å°† sRGB è½¬æ¢ä¸º Lab è‰²å½©ç©ºé—´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">rgbToLab</span>(<span class="hljs-params">r: <span class="hljs-built_in">number</span>, g: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] {
  <span class="hljs-keyword">let</span> R = r / <span class="hljs-number">255</span>,
    G = g / <span class="hljs-number">255</span>,
    B = b / <span class="hljs-number">255</span>
  R = R &gt; <span class="hljs-number">0.04045</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>((R + <span class="hljs-number">0.055</span>) / <span class="hljs-number">1.055</span>, <span class="hljs-number">2.4</span>) : R / <span class="hljs-number">12.92</span>
  G = G &gt; <span class="hljs-number">0.04045</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>((G + <span class="hljs-number">0.055</span>) / <span class="hljs-number">1.055</span>, <span class="hljs-number">2.4</span>) : G / <span class="hljs-number">12.92</span>
  B = B &gt; <span class="hljs-number">0.04045</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>((B + <span class="hljs-number">0.055</span>) / <span class="hljs-number">1.055</span>, <span class="hljs-number">2.4</span>) : B / <span class="hljs-number">12.92</span>

  <span class="hljs-keyword">let</span> X = R * <span class="hljs-number">0.4124</span> + G * <span class="hljs-number">0.3576</span> + B * <span class="hljs-number">0.1805</span>
  <span class="hljs-keyword">let</span> Y = R * <span class="hljs-number">0.2126</span> + G * <span class="hljs-number">0.7152</span> + B * <span class="hljs-number">0.0722</span>
  <span class="hljs-keyword">let</span> Z = R * <span class="hljs-number">0.0193</span> + G * <span class="hljs-number">0.1192</span> + B * <span class="hljs-number">0.9505</span>

  X = X / <span class="hljs-number">0.95047</span>
  Y = Y / <span class="hljs-number">1.0</span>
  Z = Z / <span class="hljs-number">1.08883</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">f</span> = (<span class="hljs-params">t: <span class="hljs-built_in">number</span></span>) =&gt; (t &gt; <span class="hljs-number">0.008856</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(t, <span class="hljs-number">1</span> / <span class="hljs-number">3</span>) : <span class="hljs-number">7.787</span> * t + <span class="hljs-number">16</span> / <span class="hljs-number">116</span>)
  <span class="hljs-keyword">const</span> fx = <span class="hljs-title function_">f</span>(X)
  <span class="hljs-keyword">const</span> fy = <span class="hljs-title function_">f</span>(Y)
  <span class="hljs-keyword">const</span> fz = <span class="hljs-title function_">f</span>(Z)
  <span class="hljs-keyword">const</span> L = <span class="hljs-number">116</span> * fy - <span class="hljs-number">16</span>
  <span class="hljs-keyword">const</span> a = <span class="hljs-number">500</span> * (fx - fy)
  <span class="hljs-keyword">const</span> bVal = <span class="hljs-number">200</span> * (fy - fz)
  <span class="hljs-keyword">return</span> [L, a, bVal]
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°ä½¿ç”¨äº†çœ‹èµ·æ¥å¾ˆå¤æ‚çš„ç®—æ³•ï¼Œä¸å¿…æ·±ç©¶ï¼Œè¿™æ˜¯å®ƒçš„å¤§æ¦‚è§£é‡Šï¼š</p>
<ol>
<li>
<p>è·å–åˆ° rgb å‚æ•°</p>
</li>
<li>
<p>è½¬åŒ–ä¸ºçº¿æ€§ rgbï¼ˆç§»é™¤ gammaçŸ«æ­£ï¼‰ï¼Œå¸¸é‡ <strong>0.04045</strong> æ˜¯sRGBï¼ˆæ ‡å‡†TGBï¼‰é¢œè‰²ç©ºé—´ä¸­çš„ä¸€ä¸ªé˜ˆå€¼ï¼Œç”¨äºåŒºåˆ†éçº¿æ€§å’Œçº¿æ€§çš„sRGBå€¼ï¼Œå…·ä½“æ¥è¯´ï¼Œå½“sRGBé¢œè‰²åˆ†é‡å¤§äº0.04045æ—¶ï¼Œéœ€è¦é€šè¿‡ gamma æ ¡æ­£ï¼ˆå³é‡‡ç”¨ <code>((R + 0.055) / 1.055) ^ 2.4</code>ï¼‰æ¥å¾—åˆ°çº¿æ€§RGBï¼›å¦‚æœå°äºç­‰äº0.04045ï¼Œåˆ™ç›´æ¥è¿›è¡Œçº¿æ€§è½¬æ¢ï¼ˆå³ <code>R / 12.92</code>ï¼‰</p>
</li>
<li>
<p>çº¿æ€§RGBåˆ°XYZç©ºé—´çš„è½¬æ¢ï¼Œè½¬æ¢å…¬å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>X = R * 0.4124 + G * 0.3576 + B * 0.1805</code></li>
<li><code>Y = R * 0.2126 + G * 0.7152 + B * 0.0722</code></li>
<li><code>Z = R * 0.0193 + G * 0.1192 + B * 0.9505</code></li>
</ul>
</li>
<li>
<p>å½’ä¸€åŒ–XYZå€¼ï¼Œä¸ºäº†å‚è€ƒç™½ç‚¹ï¼ˆD65ï¼‰ï¼Œæ ‡å‡†ç™½ç‚¹çš„XYZå€¼æ˜¯ <code>(0.95047, 1.0, 1.08883)</code>ã€‚æ‰€ä»¥éœ€è¦é€šè¿‡é™¤ä»¥è¿™äº›å¸¸æ•°æ¥è¿›è¡Œå½’ä¸€åŒ–</p>
</li>
<li>
<p>XYZåˆ°Labçš„è½¬æ¢ï¼Œå…¬å¼å‡½æ•°ï¼šconst f = (t: number) =&gt; (t &gt; 0.008856 ? Math.pow(t, 1 / 3) : 7.787 * t + 16 / 116)</p>
</li>
<li>
<p>è®¡ç®—L, a, b åˆ†é‡</p>
<p><strong>L</strong>ï¼šäº®åº¦åˆ†é‡ï¼ˆè¡¨ç¤ºé¢œè‰²çš„æ˜æš—ç¨‹åº¦ï¼‰</p>
<ul>
<li><code>L = 116 * fy - 16</code></li>
</ul>
<p><strong>a</strong>ï¼šç»¿è‰²åˆ°çº¢è‰²çš„è‰²å·®åˆ†é‡</p>
<ul>
<li><code>a = 500 * (fx - fy)</code></li>
</ul>
<p><strong>b</strong>ï¼šè“è‰²åˆ°é»„è‰²çš„è‰²å·®åˆ†é‡</p>
<ul>
<li><code>b = 200 * (fy - fz)</code></li>
</ul>
</li>
</ol>
<p>æ¥ä¸‹æ¥å®ç°èšç±»ç®—æ³•</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * å¯¹æ»¡è¶³æ¡ä»¶çš„åƒç´ è¿›è¡Œèšç±»
 * <span class="hljs-doctag">@param</span> imageData å›¾ç‰‡åƒç´ æ•°æ®
 * <span class="hljs-doctag">@param</span> condition åˆ¤æ–­åƒç´ æ˜¯å¦å±äºæŒ‡å®šåŒºåŸŸçš„æ¡ä»¶å‡½æ•°ï¼ˆå‚æ•° x, yï¼‰
 * <span class="hljs-doctag">@param</span> threshold Lab è·ç¦»é˜ˆå€¼ï¼Œä½äºæ­¤å€¼çš„é¢œè‰²å½’ä¸ºåŒä¸€ç°‡ï¼Œå»ºè®® 8~12
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clusterPixelsByCondition</span>(<span class="hljs-params">imageData: ImageData, condition: (x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>) =&gt; <span class="hljs-built_in">boolean</span>, threshold: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span></span>): <span class="hljs-title class_">Cluster</span>[] {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">clusters</span>: <span class="hljs-title class_">Cluster</span>[] = []
  <span class="hljs-keyword">const</span> data = imageData.<span class="hljs-property">data</span>
  <span class="hljs-keyword">const</span> width = imageData.<span class="hljs-property">width</span>
  <span class="hljs-keyword">const</span> height = imageData.<span class="hljs-property">height</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; height; y++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; width; x++) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">condition</span>(x, y)) <span class="hljs-keyword">continue</span>
      <span class="hljs-keyword">const</span> index = (y * width + x) * <span class="hljs-number">4</span>
      <span class="hljs-keyword">if</span> (data[index + <span class="hljs-number">3</span>] === <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span> <span class="hljs-comment">// å¿½ç•¥é€æ˜åƒç´ </span>
      <span class="hljs-keyword">const</span> r = data[index]
      <span class="hljs-keyword">const</span> g = data[index + <span class="hljs-number">1</span>]
      <span class="hljs-keyword">const</span> b = data[index + <span class="hljs-number">2</span>]
      <span class="hljs-keyword">const</span> lab = <span class="hljs-title function_">rgbToLab</span>(r, g, b)
      <span class="hljs-keyword">let</span> added = <span class="hljs-literal">false</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> cluster <span class="hljs-keyword">of</span> clusters) {
        <span class="hljs-keyword">const</span> d = <span class="hljs-title function_">labDistance</span>(lab, cluster.<span class="hljs-property">averageLab</span>)
        <span class="hljs-keyword">if</span> (d &lt; threshold) {
          cluster.<span class="hljs-property">count</span>++
          cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">0</span>] += r
          cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">1</span>] += g
          cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">2</span>] += b
          cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">0</span>] += lab[<span class="hljs-number">0</span>]
          cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">1</span>] += lab[<span class="hljs-number">1</span>]
          cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">2</span>] += lab[<span class="hljs-number">2</span>]
          cluster.<span class="hljs-property">averageRgb</span> = [cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">0</span>] / cluster.<span class="hljs-property">count</span>, cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">1</span>] / cluster.<span class="hljs-property">count</span>, cluster.<span class="hljs-property">sumRgb</span>[<span class="hljs-number">2</span>] / cluster.<span class="hljs-property">count</span>]
          cluster.<span class="hljs-property">averageLab</span> = [cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">0</span>] / cluster.<span class="hljs-property">count</span>, cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">1</span>] / cluster.<span class="hljs-property">count</span>, cluster.<span class="hljs-property">sumLab</span>[<span class="hljs-number">2</span>] / cluster.<span class="hljs-property">count</span>]
          added = <span class="hljs-literal">true</span>
          <span class="hljs-keyword">break</span>
        }
      }
      <span class="hljs-keyword">if</span> (!added) {
        clusters.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">sumRgb</span>: [r, g, b],
          <span class="hljs-attr">sumLab</span>: [lab[<span class="hljs-number">0</span>], lab[<span class="hljs-number">1</span>], lab[<span class="hljs-number">2</span>]],
          <span class="hljs-attr">averageRgb</span>: [r, g, b],
          <span class="hljs-attr">averageLab</span>: [lab[<span class="hljs-number">0</span>], lab[<span class="hljs-number">1</span>], lab[<span class="hljs-number">2</span>]]
        })
      }
    }
  }
  <span class="hljs-keyword">return</span> clusters
}
</code></pre>
<p>å‡½æ•°å†…éƒ¨æœ‰ä¸€ä¸ª labDistance çš„è°ƒç”¨ï¼ŒlabDistance æ˜¯è®¡ç®— Lab é¢œè‰²ç©ºé—´ä¸­çš„æ¬§æ°è·ç¦»çš„</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// è®¡ç®— Lab ç©ºé—´çš„æ¬§æ°è·ç¦»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">labDistance</span>(<span class="hljs-params">lab1: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>], lab2: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">const</span> dL = lab1[<span class="hljs-number">0</span>] - lab2[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> da = lab1[<span class="hljs-number">1</span>] - lab2[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">const</span> db = lab1[<span class="hljs-number">2</span>] - lab2[<span class="hljs-number">2</span>]
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(dL * dL + da * da + db * db)
}
</code></pre>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œæ¬§æ°è·ç¦»ï¼šEuclidean Distanceï¼Œæ˜¯ä¸€ç§åœ¨å¤šç»´ç©ºé—´ä¸­æµ‹é‡ä¸¤ä¸ªç‚¹ä¹‹é—´â€œç›´çº¿â€è·ç¦»çš„æ–¹æ³•ã€‚è¿™ç§è·ç¦»çš„è®¡ç®—åŸºäºæ¬§å‡ é‡Œå¾—å‡ ä½•ä¸­ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å…¬å¼ï¼Œé€šè¿‡è®¡ç®—ä¸¤ç‚¹åœ¨å„ä¸ªç»´åº¦ä¸Šçš„å·®çš„å¹³æ–¹å’Œï¼Œç„¶åå–å¹³æ–¹æ ¹å¾—åˆ°ã€‚æ¬§æ°è·ç¦»æ˜¯æŒ‡nç»´ç©ºé—´ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´çš„çœŸå®è·ç¦»ï¼Œæˆ–è€…å‘é‡çš„è‡ªç„¶é•¿åº¦ï¼ˆå³è¯¥ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼‰ã€‚</p>
</blockquote>
<p>æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªå‡½æ•°é‡‡ç”¨äº†ç±»ä¼¼ K-means çš„èšç±»æ–¹å¼ï¼Œå°†å°äºç”¨æˆ·ä¼ å…¥é˜ˆå€¼çš„é¢œè‰²å½’ä¸ºä¸€ç°‡ï¼Œå¹¶å–å¹³å‡è‰²(ä½¿ç”¨ Lab å€¼)ã€‚</p>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œèšç±»ç®—æ³•ï¼šClustering Algorithm æ˜¯ä¸€ç§æ— ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œå…¶ç›®çš„æ˜¯å°†æ•°æ®é›†ä¸­çš„å…ƒç´ åˆ†æˆä¸åŒçš„ç»„ï¼ˆç°‡ï¼‰ï¼Œä½¿å¾—åŒä¸€ç»„å†…çš„å…ƒç´ ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œè€Œä¸åŒç»„ä¹‹é—´çš„å…ƒç´ ç›¸ä¼¼åº¦è¾ƒä½ã€‚è¿™é‡Œæ˜¯å°†ç›¸è¿‘è‰²å½’ä¸ºä¸€ç°‡ã€‚</p>
</blockquote>
<blockquote>
<p>æ¦‚å¿µè§£é‡Šï¼Œé¢œè‰²ç°‡ï¼šç°‡æ˜¯èšç±»ç®—æ³•ä¸­ä¸€ä¸ªå¸¸è§çš„æ¦‚å¿µï¼Œå¯ä»¥å¤§è‡´ç†è§£ä¸º "ä¸€ç±»"</p>
</blockquote>
<p>å¾—åˆ°äº†é¢œè‰²ç°‡é›†åˆåï¼Œå°±å¯ä»¥æŒ‰ç…§countå¤§å°æ¥åˆ¤æ–­å“ªä¸ªæ˜¯ä¸»é¢˜è‰²äº†</p>
<pre><code class="hljs language-ts" lang="ts">  <span class="hljs-comment">// å¯¹å…¨å›¾æ‰€æœ‰åƒç´ è¿›è¡Œèšç±»</span>
  <span class="hljs-keyword">let</span> clusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>, threshold.<span class="hljs-property">primary</span>)
  clusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> primaryCluster = clusters[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> secondaryCluster = clusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> ? clusters[<span class="hljs-number">1</span>] : clusters[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> primaryColor = <span class="hljs-title function_">rgbToHex</span>(primaryCluster.<span class="hljs-property">averageRgb</span>)
  <span class="hljs-keyword">const</span> secondaryColor = <span class="hljs-title function_">rgbToHex</span>(secondaryCluster.<span class="hljs-property">averageRgb</span>)
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»è·å–åˆ°äº†ä¸»é¢˜è‰²ã€æ¬¡ä¸»é¢˜è‰² ğŸ‰ğŸ‰ğŸ‰</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­è®¡ç®—è¾¹ç¼˜é¢œè‰²</p>
<p>æŒ‰ç…§åŒæ ·çš„æ–¹æ³•ï¼Œåªæ˜¯æŠŠé˜ˆå€¼è®¾å°ä¸€ç‚¹ï¼Œæˆ‘è¿™é‡Œç›´æ¥è®¾ç½®ä¸º 1 ï¼ˆthreshold.top ç­‰éƒ½æ˜¯1ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts">  <span class="hljs-comment">// åˆ†åˆ«å¯¹ä¸Šã€å³ã€ä¸‹ã€å·¦è¾¹ç¼˜è¿›è¡Œèšç±»</span>
  <span class="hljs-keyword">const</span> topClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">_x, y</span>) =&gt;</span> y &lt; margin, threshold.<span class="hljs-property">top</span>)
  topClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> topColor = topClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(topClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> bottomClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">_x, y</span>) =&gt;</span> y &gt;= height - margin, threshold.<span class="hljs-property">bottom</span>)
  bottomClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> bottomColor = bottomClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(bottomClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> leftClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">x, _y</span>) =&gt;</span> x &lt; margin, threshold.<span class="hljs-property">left</span>)
  leftClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> leftColor = leftClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(leftClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> rightClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">x, _y</span>) =&gt;</span> x &gt;= width - margin, threshold.<span class="hljs-property">right</span>)
  rightClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> rightColor = rightClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(rightClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±è·å–åˆ°äº†ä¸Šä¸‹å·¦å³å››æ¡è¾¹çš„é¢œè‰² ğŸ‰ğŸ‰ğŸ‰</p>
<p>è¿™æ ·å¤§è‡´çš„å·¥ä½œå°±å®Œæˆäº†ï¼Œæœ€åæˆ‘ä»¬å°†éœ€è¦çš„å±æ€§å¯¼å‡ºç»™ç”¨æˆ·ï¼Œæˆ‘ä»¬çš„ä¸»å‡½æ•°æœ€ç»ˆé•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * ä¸»å‡½æ•°ï¼šæ ¹æ®å›¾ç‰‡è‡ªåŠ¨æå–é¢œè‰²
 * <span class="hljs-doctag">@param</span> imageSource å›¾ç‰‡ URL æˆ– HTMLImageElement
 * <span class="hljs-doctag">@returns</span> è¿”å›åŒ…å«ä¸»è¦é¢œè‰²ã€æ¬¡è¦é¢œè‰²å’ŒèƒŒæ™¯è‰²å¯¹è±¡ï¼ˆä¸Šã€å³ã€ä¸‹ã€å·¦ï¼‰çš„ç»“æœ
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">colorPicker</span>(<span class="hljs-params">imageSource: HTMLImageElement | <span class="hljs-built_in">string</span>, options?: autoColorPickerOptions</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AutoHueResult</span>&gt; {
  <span class="hljs-keyword">const</span> { maxSize, threshold } = <span class="hljs-title function_">__handleAutoHueOptions</span>(options)
  <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loadImage</span>(imageSource)
  <span class="hljs-comment">// é™é‡‡æ ·ï¼ˆæœ€å¤§å°ºå¯¸ 100pxï¼Œå¯æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</span>
  <span class="hljs-keyword">const</span> imageData = <span class="hljs-title function_">getImageDataFromImage</span>(img, maxSize)

  <span class="hljs-comment">// å¯¹å…¨å›¾æ‰€æœ‰åƒç´ è¿›è¡Œèšç±»</span>
  <span class="hljs-keyword">let</span> clusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">true</span>, threshold.<span class="hljs-property">primary</span>)
  clusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> primaryCluster = clusters[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> secondaryCluster = clusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> ? clusters[<span class="hljs-number">1</span>] : clusters[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> primaryColor = <span class="hljs-title function_">rgbToHex</span>(primaryCluster.<span class="hljs-property">averageRgb</span>)
  <span class="hljs-keyword">const</span> secondaryColor = <span class="hljs-title function_">rgbToHex</span>(secondaryCluster.<span class="hljs-property">averageRgb</span>)

  <span class="hljs-comment">// å®šä¹‰è¾¹ç¼˜å®½åº¦ï¼ˆå•ä½åƒç´ ï¼‰</span>
  <span class="hljs-keyword">const</span> margin = <span class="hljs-number">10</span>
  <span class="hljs-keyword">const</span> width = imageData.<span class="hljs-property">width</span>
  <span class="hljs-keyword">const</span> height = imageData.<span class="hljs-property">height</span>

  <span class="hljs-comment">// åˆ†åˆ«å¯¹ä¸Šã€å³ã€ä¸‹ã€å·¦è¾¹ç¼˜è¿›è¡Œèšç±»</span>
  <span class="hljs-keyword">const</span> topClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">_x, y</span>) =&gt;</span> y &lt; margin, threshold.<span class="hljs-property">top</span>)
  topClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> topColor = topClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(topClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> bottomClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">_x, y</span>) =&gt;</span> y &gt;= height - margin, threshold.<span class="hljs-property">bottom</span>)
  bottomClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> bottomColor = bottomClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(bottomClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> leftClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">x, _y</span>) =&gt;</span> x &lt; margin, threshold.<span class="hljs-property">left</span>)
  leftClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> leftColor = leftClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(leftClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">const</span> rightClusters = <span class="hljs-title function_">clusterPixelsByCondition</span>(imageData, <span class="hljs-function">(<span class="hljs-params">x, _y</span>) =&gt;</span> x &gt;= width - margin, threshold.<span class="hljs-property">right</span>)
  rightClusters.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">count</span> - a.<span class="hljs-property">count</span>)
  <span class="hljs-keyword">const</span> rightColor = rightClusters.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? <span class="hljs-title function_">rgbToHex</span>(rightClusters[<span class="hljs-number">0</span>].<span class="hljs-property">averageRgb</span>) : primaryColor

  <span class="hljs-keyword">return</span> {
    primaryColor,
    secondaryColor,
    <span class="hljs-attr">backgroundColor</span>: {
      <span class="hljs-attr">top</span>: topColor,
      <span class="hljs-attr">right</span>: rightColor,
      <span class="hljs-attr">bottom</span>: bottomColor,
      <span class="hljs-attr">left</span>: leftColor
    }
  }
}

</code></pre>
<p>è¿˜è®°å¾—æœ¬å°èŠ‚ä¸€å¼€å§‹æåˆ°çš„å‚æ•°å—ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ maxSizeï¼ˆå‹ç¼©å¤§å°ï¼Œç”¨äºé™é‡‡æ ·ï¼‰ã€thresholdï¼ˆé˜ˆå€¼ï¼Œç”¨äºè®¾ç½®ç°‡å¤§å°ï¼‰</p>
<p>ä¸ºäº†ç”¨æˆ·å‹å¥½ï¼Œæˆ‘è¿˜ç¼–å†™äº† threshold å‚æ•°çš„å¯é€‰ç±»å‹ï¼šnumber | thresholdObj</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> thresholdObj = { primary?: <span class="hljs-built_in">number</span>; left?: <span class="hljs-built_in">number</span>; right?: <span class="hljs-built_in">number</span>; top?: <span class="hljs-built_in">number</span>; bottom?: <span class="hljs-built_in">number</span> }
</code></pre>
<p>å¯ä»¥å•ç‹¬è®¾ç½®ä¸»é˜ˆå€¼ã€ä¸Šä¸‹å·¦å³å››è¾¹é˜ˆå€¼ï¼Œä»¥é€‚åº”æ›´ä¸ªæ€§åŒ–çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-6">autohue.js è¯ç”Ÿäº†</h2>
<p>åå­—çš„ç”±æ¥ï¼šç§‰æ‰¿ä¸€è´¯å‘½åä¹ æƒ¯ï¼Œauto å®¶æ—æˆå‘˜åˆå¤šä¸€ä¸ªï¼Œä¸é¢œè‰²æœ‰å…³çš„å•è¯æœ‰å¥½å¤šä¸ªï¼Œæˆ‘å–äº†æœ€çŸ­æœ€å¥½è®°çš„ä¸€ä¸ª hue(è‰²ç›¸)ï¼Œä¹Ÿæ¯”è¾ƒå¥‘åˆæ’ä»¶ç”¨é€”ã€‚</p>
<p>æ­¤æ’ä»¶å·²åœ¨ github å¼€æºï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin%2Fautohue.js" target="_blank" title="https://github.com/Auto-Plugin/autohue.js" ref="nofollow noopener noreferrer">GitHub autohue.js</a></strong></p>
<p>npm ä¸»é¡µï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fautohue.js" target="_blank" title="https://www.npmjs.com/package/autohue.js" ref="nofollow noopener noreferrer">NPM autohue.js</a></strong></p>
<p>åœ¨çº¿ä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fauto-plugin.github.io%2Fautohue.js%2F" target="_blank" title="https://auto-plugin.github.io/autohue.js/" ref="nofollow noopener noreferrer">autohue.js å®˜æ–¹é¦–é¡µ</a></p>
<h3 data-id="heading-7">å®‰è£…ä¸ä½¿ç”¨</h3>
<pre><code class="hljs language-shell" lang="shell">pnpm i autohue.js
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> autohue <span class="hljs-keyword">from</span> <span class="hljs-string">'autohue.js'</span>

<span class="hljs-title function_">autohue</span>(url, {
  <span class="hljs-attr">threshold</span>: {
    <span class="hljs-attr">primary</span>: <span class="hljs-number">10</span>,
    <span class="hljs-attr">left</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">bottom</span>: <span class="hljs-number">12</span>
  },
  <span class="hljs-attr">maxSize</span>: <span class="hljs-number">50</span>
})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨ console.log æ‰“å°å‡ºè‰²å—å…ƒç´ s</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`%c<span class="hljs-subst">${result.primaryColor}</span>`</span>, <span class="hljs-string">'color: #fff; background: '</span> + result.<span class="hljs-property">primaryColor</span>, <span class="hljs-string">'main'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`%c<span class="hljs-subst">${result.secondaryColor}</span>`</span>, <span class="hljs-string">'color: #fff; background: '</span> + result.<span class="hljs-property">secondaryColor</span>, <span class="hljs-string">'sub'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`%c<span class="hljs-subst">${result.backgroundColor.left}</span>`</span>, <span class="hljs-string">'color: #fff; background: '</span> + result.<span class="hljs-property">backgroundColor</span>.<span class="hljs-property">left</span>, <span class="hljs-string">'bg-left'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`%c<span class="hljs-subst">${result.backgroundColor.right}</span>`</span>, <span class="hljs-string">'color: #fff; background: '</span> + result.<span class="hljs-property">backgroundColor</span>.<span class="hljs-property">right</span>, <span class="hljs-string">'bg-right'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`%clinear-gradient to right`</span>, <span class="hljs-string">'color: #fff; background: linear-gradient(to right, '</span> + result.<span class="hljs-property">backgroundColor</span>.<span class="hljs-property">left</span> + <span class="hljs-string">', '</span> + result.<span class="hljs-property">backgroundColor</span>.<span class="hljs-property">right</span> + <span class="hljs-string">')'</span>, <span class="hljs-string">'bg'</span>)
    bg.<span class="hljs-property">value</span> = <span class="hljs-string">`linear-gradient(to right, <span class="hljs-subst">${result.backgroundColor.left}</span>, <span class="hljs-subst">${result.backgroundColor.right}</span>)`</span>
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err))

</code></pre>
<h2 data-id="heading-8">æœ€ç»ˆæ•ˆæœ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f12b9b60723e4904a17b127267b2cc25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=8IWGHJ6pWb6CclLzlOICm%2BuvYDQ%3D" alt="image.png" loading="lazy"></p>
<p>å¤æ‚è¾¹ç¼˜æ•ˆæœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa6c3317d84749718ad30ae88bb4bda5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=r2tcsV23yke7RHWEY5CAtpHNcgM%3D" alt="image.png" loading="lazy"></p>
<p>çºµå‘æ¸å˜æ•ˆæœï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯ left å’Œ right è¾¹çš„å€¼ï¼Œå¯èƒ½ä½¿ç”¨ top å’Œ bottom æ•ˆæœæ›´ä½³ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe207c4dfc2a461e9f6a7dd04b0ea3a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=6NKJkcOcQyFtMIOh79Joh2igwq4%3D" alt="image.png" loading="lazy"></p>
<p>çº¯è‰²æ•ˆæœï¼ˆå› ä¸ºå•ç‹¬å¯¹è¾¹ç¼˜é‡‡æ ·ï¼Œæ‰€ä»¥æ— è®ºå›¾ç‰‡å†…å®¹å¤šå¤æ‚ï¼Œçº¯è‰²åŸºæœ¬çœ‹ä¸å‡ºè¾¹ç•Œï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bddbdc43e244bb4b41e3676617b29e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=8zz2MfLzX0P78iVWCXOM4DGBN%2BY%3D" alt="image.png" loading="lazy"></p>
<p>çªå˜è¾¹ç¼˜æ•ˆæœï¼ˆæ­¤æ—¶ç”¨cssåšæ¸å˜è’™å±‚åº”è¯¥æ•ˆæœä¼šæ›´å¥½ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/596fb4fc81454766abb44912ab12c020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636I6x5Y6E5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1745984431&amp;x-signature=u2KCpTfNAPVsOem9hCP8oMksGUk%3D" alt="image.png" loading="lazy"></p>
<p>æ¨ªå‘æ¸å˜æ•ˆæœï¼ˆä½¿ç”¨çš„æ˜¯ left å’Œ right çš„è‰²å€¼ï¼‰ï¼ŒåŸºæœ¬çœ‹ä¸å‡ºè¾¹ç•Œ</p>
<h2 data-id="heading-9">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F370371059" target="_blank" title="https://zhuanlan.zhihu.com/p/370371059" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/370371059</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%25E5%259B%25BD%25E9%2599%2585%25E7%2585%25A7%25E6%2598%258E%25E5%25A7%2594%25E5%2591%2598%25E4%25BC%259A%2F10021151%3Ffromtitle%3DCIE%26fromid%3D8649998" target="_blank" title="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85%E7%85%A7%E6%98%8E%E5%A7%94%E5%91%98%E4%BC%9A/10021151?fromtitle=CIE&amp;fromid=8649998" ref="nofollow noopener noreferrer">baike.baidu.com/item/%E5%9Bâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%25E6%25A0%2587%25E5%2587%2586%25E5%2585%2589%25E6%25BA%2590D65%2F20792406" target="_blank" title="https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%85%89%E6%BA%90D65/20792406" ref="nofollow noopener noreferrer">baike.baidu.com/item/%E6%A0â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E6%25AC%25A7%25E5%2587%25A0%25E9%2587%258C%25E5%25BE%2597%25E8%25B7%259D%25E7%25A6%25BB" target="_blank" title="https://zh.wikipedia.org/wiki/%E6%AC%A7%E5%87%A0%E9%87%8C%E5%BE%97%E8%B7%9D%E7%A6%BB" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/%E6%ACâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_42560067%2Farticle%2Fdetails%2F116182991" target="_blank" title="https://blog.csdn.net/weixin_42560067/article/details/116182991" ref="nofollow noopener noreferrer">blog.csdn.net/weixin_4256â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2FK-%25E5%25B9%25B3%25E5%259D%2587%25E7%25AE%2597%25E6%25B3%2595" target="_blank" title="https://zh.wikipedia.org/wiki/K-%E5%B9%B3%E5%9D%87%E7%AE%97%E6%B3%95" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/K-%E5%â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_42998707%2Farticle%2Fdetails%2F108011092" target="_blank" title="https://blog.csdn.net/weixin_42998707/article/details/108011092" ref="nofollow noopener noreferrer">blog.csdn.net/weixin_4299â€¦</a></li>
<li><a href="https://juejin.cn/post/6844903511956815885" target="_blank" title="https://juejin.cn/post/6844903511956815885">juejin.cn/post/684490â€¦</a></li>
</ul>
<h2 data-id="heading-10">ç•ªå¤–</h2>
<p>Auto å®¶æ—çš„å…¶ä»–æˆå‘˜</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>/<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin%2Fautofit.js" target="_blank" title="https://github.com/Auto-Plugin/autofit.js" ref="nofollow noopener noreferrer">autofit.js</a></strong> autofit.js è¿„ä»Šä¸ºæ­¢æœ€æ˜“ç”¨çš„è‡ªé€‚åº”å·¥å…·</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>/<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin%2Fautolog.js" target="_blank" title="https://github.com/Auto-Plugin/autolog.js" ref="nofollow noopener noreferrer">autolog.js</a></strong> autolog.js è½»é‡åŒ–å°å¼¹çª—</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>/<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin%2Fautouno" target="_blank" title="https://github.com/Auto-Plugin/autouno" ref="nofollow noopener noreferrer">autouno</a></strong> autouno ç›´è§‰çš„UnoCSSé¢„è®¾æ–¹æ¡ˆ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>/<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin%2Fautohue.js" target="_blank" title="https://github.com/Auto-Plugin/autohue.js" ref="nofollow noopener noreferrer">autohue.js</a></strong> æœ¬å“ ä¸€ä¸ªè‡ªåŠ¨æå–å›¾ç‰‡ä¸»é¢˜è‰²è®©å›¾ç‰‡å’ŒèƒŒæ™¯èä¸ºä¸€ä½“çš„å·¥å…·</li>
</ul></div></div>
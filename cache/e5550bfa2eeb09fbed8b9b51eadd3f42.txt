<!----> <meta itemprop="headline" content="å‰ç«¯å¿…å­¦-å®Œç¾ç»„ä»¶å°è£…åŸåˆ™"> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,è®¾è®¡æ¨¡å¼"> <meta itemprop="datePublished" content="2025-08-09T10:04:45.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Freedomé£é—´"> <meta itemprop="url" content="https://juejin.cn/user/3919096662727789"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¿…å­¦-å®Œç¾ç»„ä»¶å°è£…åŸåˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3919096662727789/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Freedomé£é—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-08-09T10:04:45.000Z" title="Sat Aug 09 2025 10:04:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-08-09
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""></circle></svg> <span class="views-count" data-v-61fb5e44="">
                    6,704
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""></path></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><p>æ­¤æ–‡æ€»ç»“äº†æˆ‘å¤šå¹´ç»„ä»¶å°è£…ç»éªŒï¼Œä»¥åŠæ‹œè¯» <code>antd</code>ã€<code>element-plus</code>ã€<code>vant</code>ã€<code>fusion</code>ç­‰å¤šä¸ªçŸ¥åç»„ä»¶åº“æ‰€æç‚¼çš„å®Œç¾ç»„ä»¶å°è£…çš„ç»éªŒï¼›æ˜¯ä¸€ä¸ªå¼€å‘è€…åœ¨å°è£…é¡¹ç›®ç»„ä»¶ï¼Œå…¬å…±ç»„ä»¶ç­‰åœºæ™¯æ—¶éå¸¸æœ‰å¿…è¦éµå¾ªçš„ä¸€äº›åŸåˆ™ï¼Œå¸Œæœ›å’Œå¤§å®¶ä¸€èµ·æ¢è®¨ï¼Œä¹Ÿå¸Œæœ›ä¸–ç•Œä¸Šå°‘ä¸€äº›åŠåŠå­ç»„ä»¶ğŸ˜„</p>
<p>----æŒç»­æ›´æ–°</p>
<blockquote>
<p>ä¸‹é¢ä»¥reactä¸ºä¾‹ï¼Œä½†æ˜¯æ€è·¯æ˜¯ç›¸é€šçš„ï¼Œåœ¨vueä¸Šä¹Ÿé€‚ç”¨</p>
</blockquote>
<h2 data-id="heading-0">1. åŸºæœ¬å±æ€§ç»‘å®šåŸåˆ™</h2>
<p>ä»»ä½•ç»„ä»¶éƒ½éœ€è¦ç»§æ‰¿<code>className</code>, <code>style</code> ä¸¤ä¸ªå±æ€§</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CommonProps</span> {
  <span class="hljs-comment">/** è‡ªå®šä¹‰ç±»å */</span>
  className?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** è‡ªå®šä¹‰å†…æ•›æ ·å¼ */</span>
  style?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CommonProps</span> {
  <span class="hljs-comment">/** å€¼ */</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyInputProps, ref: React.LegacyRef&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<h2 data-id="heading-1">2. æ³¨é‡Šä½¿ç”¨åŸåˆ™</h2>
<ul>
<li>åŸåˆ™ä¸Šæ‰€æœ‰çš„<code>props</code>å’Œ<code>refå±æ€§</code>ç±»å‹éƒ½éœ€è¦æœ‰æ³¨é‡Š</li>
<li>ä¸”æ‰€æœ‰å±æ€§ï¼ˆ<code>props</code>å’Œ<code>refå±æ€§</code>ï¼‰ç¦ç”¨ <code>// æ³¨é‡Šå†…å®¹</code> è¯­æ³•æ³¨é‡Šï¼Œå› ä¸ºæ­¤æ³¨é‡Šä¸ä¼šè¢«tsè¯†åˆ«ï¼Œä¹Ÿå°±æ˜¯é¼ æ ‡æ‚¬æµ®çš„æ—¶å€™ä¸ä¼šå‡ºç°å¯¹åº”æ³¨é‡Šæ–‡æ¡ˆ</li>
<li>å¸¸ç”¨çš„æ³¨è§†å‚æ•° <code>@description</code> æè¿°, <code>@version</code> æ–°å±æ€§çš„èµ·å§‹ç‰ˆæœ¬, <code>@deprecated</code> åºŸå¼ƒçš„ç‰ˆæœ¬, <code>@default</code> é»˜è®¤å€¼</li>
<li>é¢å‘å›½é™…åŒ–ä½¿ç”¨çš„ç»„ä»¶ä¸€èˆ¬æè¿°è¯­è¨€æ¨èä½¿ç”¨è‹±æ–‡</li>
</ul>
<p>bad âŒ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputsProps</span> {
  <span class="hljs-comment">// è‡ªå®šä¹‰class</span>
  className?: <span class="hljs-built_in">string</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-attr">test</span>: <span class="hljs-title class_">MyInputsProps</span> = {}
test.<span class="hljs-property">className</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d69fcae6124c239c972fab1a90937c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRnJlZWRvbemjjumXtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1756434649&amp;x-signature=Lpv9czSa2My5q3My8NL%2BoBOQK8M%3D" alt="image.png" loading="lazy"></p>
<p>åº”è¯¥ä½¿ç”¨å¦‚ä¸‹æ³¨é‡Šæ–¹æ³•<br>
after good âœ…</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputsProps</span> {
  <span class="hljs-comment">/**  custom class */</span>
  className?: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description</span> Custom inline style
   * <span class="hljs-doctag">@version</span> 2.6.0
   * <span class="hljs-doctag">@default</span> ''
   */</span>
  style?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description</span> Custom title style
   * <span class="hljs-doctag">@deprecated</span> 2.5.0 åºŸå¼ƒ
   * <span class="hljs-doctag">@default</span> ''
   */</span>
  customTitleStyle?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;
}
<span class="hljs-keyword">const</span> <span class="hljs-attr">test</span>: <span class="hljs-title class_">MyInputsProps</span> = {}
test.<span class="hljs-property">className</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3bf024ba6d04080949b63d0feba2293~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRnJlZWRvbemjjumXtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1756434649&amp;x-signature=tuToq5ShKDlANOMJkmLIRfsw%2F5M%3D" alt="image.png" loading="lazy"></p>
<h2 data-id="heading-2">3. exportæš´éœ²</h2>
<ul>
<li>ç»„ä»¶<code>props</code>ç±»å‹å¿…é¡»<code>export</code>å¯¼å‡º</li>
<li>å¦‚æœ‰ <code>useImperativeHandle</code> åˆ™<code>ref</code>ç±»å‹å¿…é¡»<code>export</code>å¯¼å‡º</li>
<li>ç»„ä»¶å¯¼å‡º<code>funtion</code>å¿…é¡»æœ‰åç§°</li>
<li>ç»„ä»¶<code>funtion</code>ä¸€èˆ¬<code>export default</code>é»˜è®¤å¯¼å‡º</li>
</ul>
<p>åœ¨æ²¡æœ‰åç§°çš„ç»„ä»¶æŠ¥é”™æ—¶ä¸åˆ©äºå®šä½åˆ°å…·ä½“çš„æŠ¥é”™ç»„ä»¶</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> {
    ....
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// æš´éœ² MyInputProps ç±»å‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> {
    ....
}
funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
<span class="hljs-comment">// ä¹Ÿå¯ä»¥è‡ªå·±æŒ‚è½½ä¸€ä¸ªç»„ä»¶åç§°</span>
<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">'production'</span>) {
  <span class="hljs-title class_">MyInput</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'MyInput'</span>;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyInput</span>
</code></pre>
<p>index.ts</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./input'</span>
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./input'</span>;
</code></pre>
<p>å½“ç„¶å¦‚æœç›®æ ‡ç»„ä»¶æ²¡æœ‰æš´éœ²ç›¸å…³çš„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡<code>ComponentProps</code>å’Œ<code>ComponentRef</code>æ¥åˆ†åˆ«è·å–ç»„ä»¶çš„<code>props</code>å’Œ<code>ref</code>å±æ€§</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">DialogProps</span> = <span class="hljs-title class_">ComponentProps</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Dialog</span>&gt; 
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DialogRef</span> = <span class="hljs-title class_">ComponentRef</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Dialog</span>&gt; 
</code></pre>
<h2 data-id="heading-3">4. å…¥å‚ç±»å‹çº¦æŸåŸåˆ™</h2>
<p><strong>å…¥å‚ç±»å‹å¿…é¡»éµå¾ªå…·ä½“åŸåˆ™</strong></p>
<ul>
<li>ç¡®å®šå…¥å‚ç±»å‹çš„å¯èƒ½æƒ…å†µä¸‹ï¼Œåˆ‡å¿Œä¸å¯ç”¨<code>åŸºæœ¬ç±»å‹</code>ä¸€ç¬”å¸¦è¿‡</li>
<li>å…¬å…±ç»„ä»¶ä¸€èˆ¬ä¸ä½¿ç”¨<code>æšä¸¾</code>ä½œä¸ºå…¥å‚ç±»å‹ï¼Œå› ä¸ºè¿™æ ·åœ¨ä½¿ç”¨è€…éœ€è¦å¼•å…¥æ­¤æšä¸¾æ‰å¯ä»¥ä¸æŠ¥é”™</li>
<li>éƒ¨åˆ†æ•°å€¼ç±»å‹çš„å‚æ•°éœ€è¦æè¿°æœ€å¤§å’Œæœ€å°å€¼</li>
</ul>
<p>bad âŒ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-attr">status</span>: <span class="hljs-built_in">string</span>
}
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span> | <span class="hljs-string">'fail'</span>
}
</code></pre>
<p>bad âŒ</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-comment">/** æ€»æ•° */</span>
  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-comment">/** æ€»æ•° 0-999 */</span>
  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<h2 data-id="heading-4">5. classå’Œstyleå®šä¹‰è§„åˆ™</h2>
<ul>
<li>ç¦ç”¨ CSS module å› ä¸ºæ­¤ç±»å†™æ³•ä¼šè®©ä½¿ç”¨è€…æ— æ³•ä¿®æ”¹ç»„ä»¶å†…éƒ¨æ ·å¼ï¼›vue çš„è¯å¯ä»¥ç”¨ scoped æ ‡ç­¾æ¥é˜²æ­¢æ ·å¼é‡å¤ ä¹Ÿå¯ä»¥å®ç°çˆ¶äº²å¯ä¿®æ”¹ç»„ä»¶å†…éƒ¨æ ·å¼ã€‚</li>
<li>ä¹¦å†™ç»„ä»¶æ—¶ï¼Œå†…éƒ¨çš„ <code>class</code> ä¸€å®šè¦åŠ ä¸Šç»Ÿä¸€çš„<code>å‰ç¼€</code>æ¥åŒºåˆ†ç»„ä»¶å†…å¤– <code>class</code>ï¼Œé¿å…å’Œå¤–éƒ¨çš„ class ç±»æœ‰é‡å¤ã€‚</li>
<li>class ç±»çš„åç§°éœ€è¦è¯­æ„åŒ–ã€‚</li>
<li>ç»„ä»¶å†…éƒ¨çš„æ‰€æœ‰ class ç±»éƒ½å¯ä»¥è¢«å¤–éƒ¨ä½¿ç”¨è€…æ”¹å˜</li>
<li>ç¦ç”¨ importantï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ä¸ç”¨è¡Œå†…æ ·å¼</li>
<li>å¯ä»¥ä¸ºé¢œè‰²ç›¸å…³ CSS å±æ€§ç•™å¥½ CSS å˜é‡ï¼Œæ–¹ä¾¿å¤–éƒ¨å¼€å‘ä¸»é¢˜åˆ‡æ¢</li>
</ul>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.module.less'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.input_box}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.detail}</span>&gt;</span>21312312<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.less'</span>
<span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span> <span class="hljs-comment">// ç»Ÿä¸€çš„ç»„ä»¶å†…éƒ¨å‰ç¼€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-box</span>`}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-detail</span>`}&gt;</span>21312312<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-input-box</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--my-input-box-background, <span class="hljs-number">#000</span>);
}
</code></pre>
<h2 data-id="heading-5">6. ç»§æ‰¿é€ä¼ åŸåˆ™</h2>
<p>ä¹¦å†™ç»„ä»¶æ—¶å¦‚æœè¿›è¡Œäº†äºŒæ¬¡å°è£…åˆ‡å¿Œä¸å¯å°†ä¼ å…¥çš„å±æ€§ä¸€ä¸ªä¸€ä¸ªæå–ç„¶åç»‘å®šï¼Œè¿™æœ‰éå¸¸å¤§çš„å±€é™æ€§ï¼Œä¸€æ—¦ä½ åŸºç¡€çš„ç»„ä»¶æ›´æ–°äº†æˆ–è€…éœ€è¦å¢åŠ ä½¿ç”¨çš„å‚æ•°åˆ™éœ€è¦å†æ¬¡å»ä¿®æ”¹ç»„ä»¶ä»£ç </p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> {
  <span class="hljs-comment">/** å€¼ */</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/** é™åˆ¶ */</span>
  <span class="hljs-attr">limit</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** çŠ¶æ€ */</span>
  <span class="hljs-attr">state</span>: <span class="hljs-built_in">string</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyInput</span> = (<span class="hljs-params">props: Partail&lt;MyInputProps&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> { value, limit, state } = props
  <span class="hljs-comment">// ...ä¸€äº›å¤„ç†</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">limit</span>=<span class="hljs-string">{limit}</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{state}</span>  /&gt;</span></span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyInput</span>
</code></pre>
<p>ä»¥<code>extends</code>ç»§æ‰¿åŸºç¡€ç»„ä»¶çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶ç”¨<code>...rest</code> æ‰¿æ¥æ‰€æœ‰ä¼ å…¥çš„å±æ€§ï¼Œå¹¶ç»‘å®šåˆ°æˆ‘ä»¬çš„åŸºå‡†ç»„ä»¶ä¸Šã€‚</p>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">InputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-comment">/** å€¼ */</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyInput</span> = (<span class="hljs-params">props: Partial&lt;MyInputProps&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> { value, ...rest } = props
  <span class="hljs-comment">// ...ä¸€äº›å¤„ç†</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> {<span class="hljs-attr">...rest</span>}  /&gt;</span></span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyInput</span>
</code></pre>
<h2 data-id="heading-6">7.äº‹ä»¶é…å¥—åŸåˆ™</h2>
<p>ä»»ä½•ç»„ä»¶å†…éƒ¨æ“ä½œå¯¼è‡´<code>UIè§†å›¾</code>æ”¹å˜éƒ½éœ€è¦æœ‰é…å¥—çš„äº‹ä»¶ï¼Œæ¥ç»™ä½¿ç”¨è€…æä¾›å…¨é‡çš„è§¦å‘é’©å­ï¼Œæé«˜ç»„ä»¶çš„å¯ç”¨æ€§</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-comment">// ...çœç•¥éƒ¨åˆ†ä»£ç </span>
  <span class="hljs-keyword">const</span> [open, setOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> [showDetail, setShowDetail] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> currClassName = <span class="hljs-title function_">classNames</span>(className, {
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-box`</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-open`</span>: open, <span class="hljs-comment">// æ˜¯å¦é‡‡ç”¨æ‰“å¼€æ ·å¼</span>
  })
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onCheckOpen</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setOpen</span>(!open)
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onShowDetail</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setShowDetail</span>(!showDetail)
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{currClassName}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onCheckOpen}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onShowDetail}</span>&gt;</span>{showDetail ? '123' : '...'}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>æ‰€æœ‰ç»„ä»¶å†…éƒ¨ä¼šå½±å“å¤–éƒ¨UIæ”¹å˜çš„äº‹ä»¶éƒ½é¢„ç•™äº†é’©å­<br>
after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { onChange, onShowChange } = props
  <span class="hljs-comment">// ...çœç•¥éƒ¨åˆ†ä»£ç </span>
  <span class="hljs-keyword">const</span> [open, setOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> [showDetail, setShowDetail] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
  <span class="hljs-comment">// ...çœç•¥éƒ¨åˆ†ä»£ç </span>
  <span class="hljs-keyword">const</span> currClassName = <span class="hljs-title function_">classNames</span>(className, {
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-box`</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-open`</span>: open, <span class="hljs-comment">// æ˜¯å¦é‡‡ç”¨æ‰“å¼€æ ·å¼</span>
  })
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onCheckOpen</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setOpen</span>(!open)
    onChange?.(!open) <span class="hljs-comment">// å®ç°ç»„ä»¶å†…éƒ¨openæ”¹å˜çš„äº‹ä»¶é’©å­</span>
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onShowDetail</span> = (<span class="hljs-params"></span>) =&gt; {
    <span class="hljs-title function_">setShowDetail</span>(!showDetail)
    onShowChange?.(!showDetail) <span class="hljs-comment">// å®ç°ç»„ä»¶è¯¦æƒ…å±•ç¤ºæ”¹å˜çš„äº‹ä»¶é’©å­</span>
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{currClassName}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onCheckOpen}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onShowDetail}</span>&gt;</span>{showDetail ? '123' : '...'}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-7">8. refç»‘å®šåŸåˆ™</h2>
<p>ä»»ä½•ä¹¦å†™çš„ç»„ä»¶åœ¨æœ‰å¯èƒ½ç»‘å®š<code>ref</code>æƒ…å†µä¸‹éƒ½éœ€è¦æš´éœ²æœ‰<code>ref</code>å±æ€§ï¼Œä¸ç„¶ä½¿ç”¨è€…ä¸€æ—¦æŒ‚è½½<code>ref</code>åˆ™ä¼šå¯¼è‡´æ§åˆ¶å°æŠ¥é”™è­¦å‘Šã€‚</p>
<ul>
<li>åŸåˆ›ç»„ä»¶ï¼šuseImperativeHandle æˆ– ç›´æ¥refç»‘å®šç»„ä»¶æ ¹èŠ‚ç‚¹</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChcInputRef</span> {
  <span class="hljs-comment">/** å€¼ */</span>
  <span class="hljs-attr">setValidView</span>: <span class="hljs-function">(<span class="hljs-params">isShow?: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>,
  <span class="hljs-comment">/** å€¼ */</span>
  <span class="hljs-attr">field</span>: <span class="hljs-title class_">Field</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = forwardRef&lt;<span class="hljs-title class_">ChcInputRef</span>, <span class="hljs-title class_">MyProps</span>&gt;(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-title function_">setValidView</span>(<span class="hljs-params">isShow = <span class="hljs-literal">false</span></span>) {
      <span class="hljs-title function_">setIsCheckBalloonVisible</span>(isShow);
    },
    field
  }), []);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span>&gt;</span>
          ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyProps, ref: React.LegacyRef&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<ul>
<li>äºŒæ¬¡å°è£…ç»„ä»¶ï¼šåˆ™ç›´æ¥refç»‘å®šåœ¨åŸåŸºç¡€ç»„ä»¶ä¸Š æˆ– ç»„ä»¶æ ¹èŠ‚ç‚¹</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref: React.LegacyRef&lt;Input&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span> {<span class="hljs-attr">...rest</span>} /&gt;</span></span>;
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<h2 data-id="heading-8">9. è‡ªå®šä¹‰æ‰©å±•æ€§åŸåˆ™</h2>
<p>åœ¨ç»„ä»¶å°è£…æ—¶ï¼Œé‡åˆ°ç»„ä»¶å†…éƒ¨ä¼šç”¨ä¸€äº›å›ºå®šé€»è¾‘æ¥æ¸²æŸ“UIæˆ–è€…è®¡ç®—æ—¶ï¼Œæœ€å¥½é¢„ç•™ä¸€ä¸ªä½¿ç”¨è€…å¯ä»¥éšæ„è‡ªå®šä¹‰çš„å…¥å£ï¼Œè€Œä¸æ˜¯åªèƒ½æ­»æ¿é‡‡ç”¨ç»„ä»¶å†…éƒ¨é€»è¾‘ï¼Œè¿™æ ·å¯ä»¥</p>
<ol>
<li>å¢åŠ ç»„ä»¶çš„æ‰©å±•çµæ´»æ€§</li>
<li>å‡å°‘è¿­ä»£ä¿®æ”¹</li>
</ol>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value } = props
  <span class="hljs-keyword">const</span> detailText = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`ç»„ä»¶å†…éƒ¨å¤æ‚çš„é€»è¾‘ï¼š<span class="hljs-subst">${item}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>)
  }, [value])
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{detailText}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value, render } = props
  <span class="hljs-keyword">const</span> detailText = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// render ç”¨æˆ·è‡ªå®šä¹‰æ¸²æŸ“</span>
      <span class="hljs-keyword">return</span> render ? <span class="hljs-title function_">render</span>(value) : value.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`ç»„ä»¶å†…éƒ¨å¤æ‚çš„é€»è¾‘ï¼š<span class="hljs-subst">${item}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>)
  }, [value])
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{detailText}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>åŒç†å¤æ‚çš„uiæ¸²æŸ“ä¹Ÿå¯ä»¥é‡‡ç”¨ç”¨æˆ·è‡ªå®šä¹‰ä¼ å…¥<code>render</code>æ–¹æ³•çš„æ–¹å¼è¿›è¡Œæ‰©å±•</p>
<h2 data-id="heading-9">10. å—æ§ä¸éå—æ§æ¨¡å¼åŸåˆ™</h2>
<p>å¯¹äºreactç»„ä»¶ï¼Œæˆ‘ä»¬å¾€å¾€éƒ½ä¼šè¦æ±‚ç»„ä»¶åœ¨è®¾è®¡æ—¶éœ€è¦åŒ…å«<code>å—æ§</code>å’Œ<code>éå—æ§</code>ä¸¤ä¸ªæ¨¡å¼ã€‚<br>
<code>éå—æ§</code>ï¼š çš„æƒ…å†µå¯ä»¥å®ç°æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨ç»„ä»¶<br>
<code>å—æ§</code>ï¼š çš„æƒ…å†µå¯ä»¥å®ç°æ›´åŠ çµæ´»çš„ä½¿ç”¨ç»„ä»¶ï¼Œä»¥å¢åŠ ç»„ä»¶çš„å¯ç”¨æ€§</p>
<p>bad âŒï¼ˆåªæœ‰ä¸€ç§å—æ§æ¨¡å¼ï¼‰</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span> 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value, className, style, onChange } = props
  <span class="hljs-keyword">const</span> currClassName = <span class="hljs-title function_">classNames</span>(className, {
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-box`</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-open`</span>: value, <span class="hljs-comment">// æ˜¯å¦é‡‡ç”¨æ‰“å¼€æ ·å¼</span>
  })
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onCheckOpen</span> = (<span class="hljs-params"></span>) =&gt; {
    onChange?.(!value)
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{currClassName}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onCheckOpen}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>12312<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span> 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value, defaultValue = <span class="hljs-literal">true</span>, className, style, onChange } = props
  <span class="hljs-comment">// å®ç°éå—æ§æ¨¡å¼</span>
  <span class="hljs-keyword">const</span> [open, setOpen] = <span class="hljs-title function_">useState</span>(value || defaultValue)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'boolean'</span>) <span class="hljs-keyword">return</span>
    <span class="hljs-title function_">setOpen</span>(value)
  }, [value])
  <span class="hljs-keyword">const</span> currClassName = <span class="hljs-title function_">classNames</span>(className, {
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-box`</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">`<span class="hljs-subst">${prefixCls}</span>-open`</span>: open, <span class="hljs-comment">// æ˜¯å¦é‡‡ç”¨æ‰“å¼€æ ·å¼</span>
  })
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onCheckOpen</span> = (<span class="hljs-params"></span>) =&gt; {
    onChange?.(!open)
    <span class="hljs-comment">// éå—æ§æ¨¡å¼ä¸‹ ç»„ä»¶å†…éƒ¨è‡ªèº«å¤„ç†</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'boolean'</span>) {
      <span class="hljs-title function_">setOpen</span>(!open)
    }
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{currClassName}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{style}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onCheckOpen}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>12312<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-10">11. æœ€å°ä¾èµ–åŸåˆ™</h2>
<p>æ‰€æœ‰ç»„ä»¶å°è£…éƒ½è¦éµå¾ªæœ€å°ä¾èµ–åŸåˆ™ï¼Œåœ¨æ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ï¼Œç®€å•çš„æ–¹æ³•éœ€è¦å¼•å…¥æ–°çš„ä¾èµ–çš„æƒ…å†µä¸‹é‡‡ç”¨æ‰‹å†™æ–¹å¼ã€‚è¿™æ ·é¿å…å¼€å‘å‡ºéå¸¸ä¾èµ–èäºçš„ç»„ä»¶æˆ–ç»„ä»¶åº“</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useLatest } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>  <span class="hljs-comment">// ä¹‹å‰ç»„ä»¶åº“æ— ahooks, ä¼šå¼•å…¥æ–°çš„ä¾èµ–ï¼</span>
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref: React.LegacyRef&lt;Input&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">const</span> funcRef = <span class="hljs-title function_">useLatest</span>(func); <span class="hljs-comment">// è§£å†³å›è°ƒå†…æ— æ³•è·å–æœ€æ–°stateé—®é¢˜</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span> {<span class="hljs-attr">...rest</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// hooks/index.tsx</span>
<span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLatest</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(value);
  ref.<span class="hljs-property">current</span> = value;
  <span class="hljs-keyword">return</span> ref;
}
...
<span class="hljs-comment">// ç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useLatest } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>  <span class="hljs-comment">// ä¹‹å‰ç»„ä»¶åº“æ— ahookså¼•å…¥æ–°çš„ä¾èµ–ï¼</span>
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref: React.LegacyRef&lt;Input&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">const</span> funcRef = <span class="hljs-title function_">useLatest</span>(func); <span class="hljs-comment">// è§£å†³å›è°ƒå†…æ— æ³•è·å–æœ€æ–°stateé—®é¢˜</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span> {<span class="hljs-attr">...rest</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ChcInput</span>
</code></pre>
<p>å½“ç„¶ä¾èµ–åŒ…æ˜¯å¦å¼•å…¥ä¹Ÿè¦å‚è€ƒå½“æ—¶çš„ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚å¦‚æœ<code>ahooks</code>åœ¨å…¬å¸å†…éƒ¨åŸºæœ¬éƒ½ä¼šä½¿ç”¨ï¼Œé‚£è¿™ä¸ªæ—¶å€™å¼•å…¥ä¹Ÿæ— å¦¨ã€‚</p>
<h2 data-id="heading-11">12. åŠŸèƒ½æ‹†åˆ†ï¼Œå•ä¸€èŒè´£åŸåˆ™</h2>
<p>å¦‚æœä¸€ä¸ªç»„ä»¶å†…éƒ¨èƒ½åŠ›å¾ˆå¼ºå¤§ï¼Œå¯èƒ½åŒ…å«å¤šä¸ªåŠŸèƒ½ç‚¹ï¼Œä¸å»ºè®®å°†æ‰€æœ‰èƒ½åŠ›éƒ½åªåœ¨ç»„ä»¶å†…éƒ¨ä½“ç°ï¼Œå¯ä»¥å°†è¿™äº›åŠŸèƒ½æ‹†åˆ†æˆå…¶ä»–çš„å…¬å…±ç»„ä»¶, ä¸€ä¸ªç»„ä»¶åªå¤„ç†ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰ï¼Œæé«˜åŠŸèƒ½çš„å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚<br>
å½“ç„¶ä¸šåŠ¡ç»„ä»¶é™¤å¤–ï¼Œä¸šåŠ¡ç»„ä»¶å¯ä»¥åœ¨ç»„ä»¶å†…å®ç°å¤šä¸ªç»„ä»¶çš„æ•´åˆå®Œæˆä¸€ä¸ªä¸šåŠ¡èƒ½åŠ›çš„å•ä¸€èŒè´£ã€‚</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyShowPage</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, imgList, ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
        {/* è¡¨æ ¼æ˜¾ç¤ºç›¸å…³åŠŸèƒ½å°è£… ...çœç•¥ä¸€å †ä»£ç  */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span> 
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {/* å›¾ä¾‹ç›¸å…³åŠŸèƒ½å°è£…  ...çœç•¥ä¸€å †ä»£ç  */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
});
</code></pre>
<p>å°†<code>è¡¨æ ¼</code>å’Œ<code>å›¾ä¾‹</code>ä¸¤ä¸ªåŠŸèƒ½ç‚¹æ‹†åˆ†æˆå•ç‹¬çš„ä¸¤ä¸ªå…¬å…±ç»„ä»¶<br>
after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyShowPage</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, imgList, ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* è¡¨æ ¼ç»„ä»¶åªå¤„ç†è¡¨æ ¼å†…å®¹ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MyTable</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span> 
      {/* å›¾ç‰‡ç»„ä»¶åªå¤„ç†å›¾ç‰‡å±•ç¤ºèƒ½åŠ› */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MyImg</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{imgList}</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  )
});
</span></code></pre>
<p>å½“ç„¶å¦‚æœå®Œå…¨æ²¡æœ‰å¤ç”¨ä»·å€¼çš„ç»„ä»¶æˆ–åŠŸèƒ½ç‚¹ä¹Ÿæ˜¯æ²¡å¿…è¦æ‹†åˆ†çš„ã€‚</p>
<h2 data-id="heading-12">13. é€šç”¨ç»„ä»¶å»ä¸šåŠ¡ï¼Œä¸šåŠ¡ç»„ä»¶å†…ç½®ä¸šåŠ¡</h2>
<p>ç»„ä»¶åˆ†ä¸ºé€šç”¨ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ï¼Œä¸¤è€…æ¯”è¾ƒæœ‰æ˜ç¡®çš„ç•Œé™</p>
<ul>
<li>é€šç”¨ç»„ä»¶æ›´çœ‹é‡é€šç”¨åŠŸèƒ½æ€§å’ŒåŸºæœ¬å†…å®¹å±•ç¤ºï¼Œç»„ä»¶æ¶µç›–çš„ä½¿ç”¨èŒƒå›´å¹¿</li>
<li>ä¸šåŠ¡ç»„ä»¶æ›´çœ‹é‡ä¸šåŠ¡çš„å®ç°ï¼Œç»„ä»¶çš„ä½¿ç”¨èŒƒå›´ç»‘å®šå…·ä½“çš„ä¸šåŠ¡å†…å®¹</li>
</ul>
<ol>
<li>é€šç”¨ç»„ä»¶å†…éƒ¨ä¸èƒ½åŒ…å«ä¸šåŠ¡</li>
</ol>
<p>ç»„ä»¶å†…éƒ¨å¦‚æœåŒ…å«äº†ä¸šåŠ¡å†…å®¹ï¼Œå°±ä¼šå¤§å¤§å¤±å»ä»–çš„é€šç”¨æ€§ï¼Œå¢åŠ å¼€å‘è€…å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<p>æ¯”å¦‚ï¼šæœ‰ä¸ªé€šç”¨çš„tableç»„ä»¶ï¼Œè´Ÿè´£å°†ä¼ å…¥çš„æ•°æ®è¿›è¡Œå±•ç¤ºï¼Œå†…éƒ¨å°è£…äº†å½“æ•°æ®å€¼å°äº0æ—¶ï¼Œè¿˜æ˜¯ä»¥æ­£æ•°çš„å½¢å¼å±•ç¤ºï¼Œä½†æ˜¯ä½¿ç”¨çº¢è‰²å­—ä½“ï¼š</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, columns, ...rest } = props;
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">dataRender</span> = (<span class="hljs-params">item: ListItem</span>) =&gt; { 
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(item.<span class="hljs-property">value</span>)
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">styleRender</span> = (<span class="hljs-params">item: ListItem </span>) =&gt; {
    <span class="hljs-keyword">return</span> item.<span class="hljs-property">value</span> &lt; <span class="hljs-number">0</span> ? { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> } : <span class="hljs-literal">undefined</span>
  }
  <span class="hljs-keyword">const</span> tableColumns = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> columns.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span>(item.<span class="hljs-property">name</span> === <span class="hljs-string">'value'</span>) {
          <span class="hljs-keyword">return</span> { 
              ...item, 
              <span class="hljs-attr">render</span>: dataRender, 
              <span class="hljs-attr">styleRender</span>: styleRender 
          };
        }
        <span class="hljs-keyword">return</span> { ...item };
    })
  }, [column])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      {columns.map(column =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...column</span>}/&gt;</span>)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
</code></pre>
<p>æ˜¾ç„¶è¿™æ ·çš„é€»è¾‘åœ¨ä¸€ä¸ªé€šç”¨ç»„ä»¶å†…æ˜¯ä¸åˆç†çš„ï¼Œä¸šåŠ¡æ€§å¤ªå¼ºï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨çš„æ—¶å€™è¿˜è¦çº³é—·ä¸ºä»€ä¹ˆå€¼éƒ½æ˜¯æ­£æ•°ï¼Œéš¾é“æ˜¯æ¥å£è¿”å›æœ‰é—®é¢˜ï¼Ÿ<br>
é€šç”¨ç»„ä»¶åªæ‰¿æ¥é€šç”¨çš„å±•ç¤ºèƒ½åŠ›ï¼Œä¸Šé¢çš„ä¸šåŠ¡å°±æ”¾å…¥åˆ°ä½¿ç”¨å±‚å»å¤„ç†å³å¯</p>
<p>after good âœ…</p>
<p>ç»„ä»¶å†…éƒ¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, columns, ...rest } = props;
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{tableData}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      {columns.map(column =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...column</span>}/&gt;</span>)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">
<span class="hljs-keyword">const</span> columns = [
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'åç§°'</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'name'</span>, 
  },
  { 
    <span class="hljs-attr">title</span>: <span class="hljs-string">'æ•°å€¼'</span>, 
    <span class="hljs-attr">name</span>: <span class="hljs-string">'value'</span>, 
    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(item.<span class="hljs-property">value</span>), 
    <span class="hljs-attr">style</span>: <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span> &lt; <span class="hljs-number">0</span> ? { <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span> } : <span class="hljs-literal">undefined</span> 
  },
  ...
]
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([]);
  ...
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{list}</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  )
};
</code></pre>
<ol start="2">
<li>ä¸šåŠ¡ç»„ä»¶å°½å¯èƒ½çš„åœ¨å†…éƒ¨å®ç°ä¸šåŠ¡ï¼Œé™ä½ä½¿ç”¨è€…çš„ä½¿ç”¨è´Ÿæ‹…</li>
</ol>
<p>æˆ‘ä»¬åœ¨å°è£…ä¸šåŠ¡ç»„ä»¶çš„æ—¶å€™ï¼Œåˆ‡å¿Œä¸å¯å°†ç›¸å…³å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä»¥åŠè¿ç®—æ”¾åˆ°ç»„ä»¶å¤–é¢ç”±ä½¿ç”¨è€…å»å®ç°ï¼Œåœ¨ç»„ä»¶å†…éƒ¨åªæ˜¯ä¸€äº›ç®€å•çš„å°è£…ï¼›è¿™å¾ˆéš¾è¾¾åˆ°ä¸šåŠ¡ç»„ä»¶çš„ä»·å€¼æœ€å¤§åŒ–ï¼Œä¸šåŠ¡ç»„ä»¶çš„ç›®çš„å°±æ˜¯èšç„¦æŸä¸ªä¸šåŠ¡å°½å¯èƒ½çš„å¸®å¼€å‘è€…å¿«é€Ÿå®Œæˆã€‚</p>
<p>æ¯”å¦‚ï¼šæœ‰ä¸ªéŸ³ä¹tableç»„ä»¶ï¼Œè´Ÿè´£å°†ä¼ å…¥çš„æ•°æ®è¿›è¡Œä¸€ä¸ªéŸ³ä¹ä¸šåŠ¡æ¸²æŸ“å’Œå±•ç¤ºï¼š</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyMusicTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test1"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ ‡é¢˜1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test2"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ ‡é¢˜2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"å€¼"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
</code></pre>
<p>ä½†æ˜¯æœ‰ä¸€ä¸ªä¸šåŠ¡æ˜¯å½“æ•°æ®çš„<code>type=1</code>æ—¶ï¼Œdataçš„å€¼è¦ä¹˜2å±•ç¤ºï¼Œåˆ™ä¸Šé¢çš„ç»„ä»¶ä½¿ç”¨è€…åªèƒ½è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> res = [...]
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
    ...item,
    <span class="hljs-attr">data</span>: item.<span class="hljs-property">type</span> === <span class="hljs-number">1</span> ? item.<span class="hljs-property">data</span> * <span class="hljs-number">2</span> : item.<span class="hljs-property">data</span>
  }))
}, [res])
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyMusicTable</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}/</span>&gt;</span></span>
)
</code></pre>
<p>æ˜¾ç„¶è¿™æ ·çš„å°è£…åœ¨ä½¿ç”¨è€…è¿™è¾¹ä¼šæœ‰ä¸€äº›å¿ƒæ™ºè´Ÿæ‹…ï¼Œå‡å¦‚ä¸€ä¸ªä¸ç†Ÿæ‚‰ä¸šåŠ¡çš„äººæ¥å¼€å‘å¾ˆå®¹æ˜“ä¼šé—æ¼ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦ä¸šåŠ¡ç»„ä»¶å†…ç½®ä¸šåŠ¡ï¼Œé™ä½ä½¿ç”¨è€…çš„é—¨æ§›</p>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyMusicTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, ...rest } = props;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">dataRender</span> = (<span class="hljs-params">item: ListItem</span>) =&gt; {
    <span class="hljs-keyword">return</span> item.<span class="hljs-property">type</span> === <span class="hljs-number">1</span> ? item.<span class="hljs-property">data</span> * <span class="hljs-number">2</span> : item.<span class="hljs-property">data</span>
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test1"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ ‡é¢˜1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test2"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ ‡é¢˜2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"å€¼"</span> <span class="hljs-attr">render</span>=<span class="hljs-string">{dataRender}/</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
</code></pre>
<p>ä½¿ç”¨è€…æ— éœ€å…³å¿ƒä¸šåŠ¡ä¹Ÿå¯ä»¥é¡ºåˆ©åœ†æ»¡å®Œæˆä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> res = [...]
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyMusicTable</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{res}/</span>&gt;</span></span>
)
</code></pre>
<h2 data-id="heading-13">14. æœ€å¤§æ·±åº¦æ‰©å±•æ€§</h2>
<p>å½“ç»„ä»¶ä¼ å…¥çš„æ•°æ®å¯èƒ½ä¼šæœ‰æ ‘å½¢ç­‰æœ‰æ·±åº¦çš„æ ¼å¼ï¼Œè€Œç»„ä»¶å†…éƒ¨ä¹Ÿä¼šé’ˆå¯¹å…¶æ¸²æŸ“å‡ºæœ‰é€’å½’æ·±åº¦çš„UIæ—¶ï¼Œéœ€è¦è€ƒè™‘åˆ°ä½¿ç”¨è€…å¯¹äºæ•°æ®æ·±åº¦çš„ä¸å¯æ§æ€§ï¼Œç»„ä»¶å†…éƒ¨éœ€è¦é¢„ç•™å¥½æ— é™æ·±åº¦çš„å¯èƒ½<br>
å¦‚ä¸‹æ¸²æŸ“ç»„ä»¶æ–¹å¼åªæœ‰ä¸€å±‚çš„æ·±åº¦ï¼Œå¾ˆæœ‰å±€é™æ€§</p>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Columns</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TableColumnProps</span> {
   <span class="hljs-attr">columns</span>: <span class="hljs-title class_">TableColumnProps</span>[]
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, columns = [], ...rest } = props;
  <span class="hljs-keyword">const</span> renderColumn = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> columns.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
       <span class="hljs-keyword">return</span> item.<span class="hljs-property">columns</span> ? (
         <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>}&gt;</span>
           {item.columns.map(column =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...column</span>}/&gt;</span>)}
         <span class="hljs-tag">&lt;/<span class="hljs-name">Table.Column</span>&gt;</span></span>
       ) :  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>}/&gt;</span></span>
    })
  }, [columns])
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      {renderColumn}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Columns</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TableColumnProps</span> {
  <span class="hljs-attr">columns</span>: <span class="hljs-title class_">Columns</span>[] <span class="hljs-comment">// æ”¹å˜ä¸ºç»§æ‰¿è‡ªå·±</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyTableProps, ref: React.LegacyRef&lt;Table&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, columns = [], ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      {/* é‡‡ç”¨å¤–éƒ¨ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MyColumn</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}/</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  )
});
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyColumn</span> = (<span class="hljs-params">props: MyColumnProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> { columns = [] } = props
  <span class="hljs-keyword">return</span> (
    item.<span class="hljs-property">columns</span> ? (
     <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>}&gt;</span>
      {/* é€’å½’æ¸²æŸ“æ•°æ®ï¼Œå®ç°æ•°æ®çš„æ·±åº¦æ— é™æ€§ */}
       <span class="hljs-tag">&lt;<span class="hljs-name">MyColumn</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{item.columns}/</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">Table.Column</span>&gt;</span></span>
   ) :  
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>}/&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-14">15. å¤šè¯­è¨€å¯é…åˆ¶åŒ–</h2>
<ul>
<li>ç»„ä»¶å†…éƒ¨æ‰€æœ‰çš„è¯­è¨€éƒ½éœ€è¦å¯ä»¥ä¿®æ”¹ï¼Œå…¼å®¹å¤šè¯­è¨€çš„ä½¿ç”¨åœºæ™¯</li>
<li>é»˜è®¤æ¨èè‹±æ–‡</li>
<li>å†…éƒ¨è¯­è¨€å˜é‡è¾ƒå¤šæ—¶å¯ä»¥ç»Ÿä¸€æš´éœ²ä¸€ä¸ªä¾‹å¦‚ <code>strings</code> å¯¹è±¡å‚æ•°ï¼Œå…¶å†…éƒ¨å¯ä»¥ä¼ å…¥æ‰€æœ‰å¯ä»¥æ›¿æ¢æ–‡æ¡ˆçš„key</li>
</ul>

<pre><code class="hljs language-css" lang="css">strings={{
  title: <span class="hljs-string">'æ ‡é¢˜'</span>,
  cancel: <span class="hljs-string">'å–æ¶ˆ'</span>,
  ....
}}
</code></pre>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span> <span class="hljs-comment">// ç»Ÿä¸€çš„ç»„ä»¶å†…éƒ¨å‰ç¼€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { title = <span class="hljs-string">'æ ‡é¢˜'</span> } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-box</span>`}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-title</span>`}&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-detail</span>`}&gt;</span>è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span> <span class="hljs-comment">// ç»Ÿä¸€çš„ç»„ä»¶å†…éƒ¨å‰ç¼€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyInput</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { title = <span class="hljs-string">'title'</span>, detail = <span class="hljs-string">'detail'</span> } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-box</span>`}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-title</span>`}&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-detail</span>`}&gt;</span>{detail}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-15">16.å¼‚å¸¸æ•è·å’Œæç¤º</h2>
<ul>
<li>å¯¹äºç”¨æˆ·ä¼ å…¥æ„å¤–çš„å‚æ•°å¯èƒ½å¸¦æ¥é”™è¯¯æ—¶è¦æ§åˆ¶å° console.error æç¤º</li>
<li>ä¸è¦ç›´æ¥åœ¨ç»„ä»¶å†…éƒ¨ throw errorï¼Œè¿™æ ·ä¼šå¯¼è‡´ç”¨æˆ·çš„ç™½å±</li>
<li>ç¼ºå°‘æŸäº›å‚æ•°æˆ–è€…å‚æ•°ä¸ç¬¦åˆè¦æ±‚ä½†ä¸ä¼šå¯¼è‡´æŠ¥é”™æ—¶å¯ä»¥ä½¿ç”¨ console.warn æç¤º</li>
</ul>
<p>bad âŒ</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyCanvas</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyCanvasProps</span>) {
  <span class="hljs-keyword">const</span> { instanceId } = props;
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
     <span class="hljs-title function_">initDom</span>(instanceId)
  }, [])
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{instanceId}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>after good âœ…</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> funtion <span class="hljs-title class_">MyCanvas</span>(<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyCanvasProps</span>) {
  <span class="hljs-keyword">const</span> { instanceId } = props;
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span>(!instanceId){
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'missing instanceId!'</span>)
      <span class="hljs-keyword">return</span>
    }
     <span class="hljs-title function_">initDom</span>(instanceId)
  }, [])
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{instanceId}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-16">17. è¯­ä¹‰åŒ–åŸåˆ™</h2>
<p>ç»„ä»¶çš„å‘½åï¼Œç»„ä»¶çš„apiï¼Œæ–¹æ³•ï¼ŒåŒ…æ‹¬å†…éƒ¨çš„å˜é‡å®šä¹‰éƒ½è¦éµå¾ªè¯­ä¹‰åŒ–çš„åŸåˆ™ï¼Œä¸¥æ ¼æŒ‰ç…§å…¶ä»£è¡¨çš„åŠŸèƒ½æ¥å‘½åã€‚</p></div></div>
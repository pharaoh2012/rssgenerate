
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/youlanjihua/p/18936118" title="发布于 2025-06-19 11:04">
    <span role="heading" aria-level="2">详解鸿蒙Next仓颉开发语言中的全屏模式</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-id="p124945a-NzMRPZcE">大家好，今天跟大家分享一下仓颉开发语言中的全屏模式。</p>
<p data-id="p124945a-L91jamzE">和ArkTS一样，仓颉的新建项目默认是非全屏模式的，如果你的应用颜色比较丰富，就会发现屏幕上方和底部的留白，这是应用自动避让了屏幕上方摄像头区域和底部的导航条区域。</p>
<p><img data-type="block" data-src="https://dl-harmonyos.51cto.com/images/202506/b2d07d1210a12d0e1fe956cb8153eed17cd099.png" class="lazyload"></p>
<p data-id="p124945a-kO9A30LK">但是通常我们不需要这些留白，而是希望应用占满整个屏幕，这时候需要用到沉浸模式，下面为大家分享具体的实现过程。</p>
<p data-id="p124945a-gsAVHmCl">首先，来到应用的main_ability.cj文件的onWindowStageCreate方法下，设置全屏模式我们要先获取到主窗口，然后设置全屏，实现代码如下：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>windowStage.getMainWindow().setWindowLayoutFullScreen(true)</code></pre>
</div>
<p data-id="p124945a-AFS0klbB">这时候运行程序，你会发现屏幕已经被应用占满了。但是新的问题出现了，你不让系统自动避让的话，就要自己避让上下方的摄像头和导航条区域。</p>
<p data-id="p124945a-Np40PdDW">要避让这些区域，首先要知道它们的尺寸，主要是高度。还是在刚才的方法中，获取顶部避让区域的方法如下：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>let topArea = windowStage.getMainWindow().getWindowAvoidArea(AvoidAreaType.TYPE_SYSTEM)
let topAreaHeight = topArea.topRect.height</code></pre>
</div>
<p data-id="p124945a-GM2kc5e8">topAreaHeight就是顶部避让区域的高度尺寸，底部避让区域的获取方式稍有不同，需要单独获取：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>let bottomArea = windowStage.getMainWindow().getWindowAvoidArea(AvoidAreaType.TYPE_NAVIGATION_INDICATOR)
let bottomAreaHeight = bottomArea.bottomRect.height</code></pre>
</div>
<p data-id="p124945a-6uNLR0nf">然后你可以将topAreaHeight和bottomAreaHeight保存，在应用其他地方获取使用：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>AppStorage.setOrCreate('topHeight',topAreaHeight.toString())
AppStorage.setOrCreate('bottomHeight',bottomAreaHeight.toString())</code></pre>
</div>
<p data-id="p124945a-E9GJDMPN">这里大家尽量保存字符串类型，因为幽蓝君在使用Int64类型的时候遇到了问题。</p>
<p data-id="p124945a-wcU0hqjf">这样的话就会得到一个占满屏幕又不被遮挡的应用。</p>
<p><img data-type="block" data-src="https://dl-harmonyos.51cto.com/images/202506/b57aca037df5f72523636442496909ed8b2041.png" class="lazyload"></p>
<p data-id="p124945a-p4olHIsz">另外，有些情况下大家可能会需要用到屏幕的尺寸，获取屏幕尺寸的方法如下：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>let windowRect =  windowStage.getMainWindow().getWindowProperties().windowRect
AppLog.info('屏幕宽度:'+ windowRect.width.toString())
AppLog.info('屏幕高度:'+ windowRect.height.toString())</code></pre>
</div>
<p data-id="p124945a-7oLZT585">最后要注意，以上代码获取到的尺寸单位都是px，大家使用的时候要按需转换。</p>
<p data-id="p124945a-6irBOJKt">今天的内容就是这些，感谢阅读。##HarmonyOS语言##仓颉##购物#</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-19 11:04">2025-06-19 11:04</span>&nbsp;
<a href="https://www.cnblogs.com/youlanjihua">幽蓝计划</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18936118);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18936118', targetLink: 'https://www.cnblogs.com/youlanjihua/p/18936118', title: '详解鸿蒙Next仓颉开发语言中的全屏模式' })">举报</a>
</div>
        
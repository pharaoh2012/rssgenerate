
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mazhimazhi/p/18842145" title="发布于 2025-04-23 09:03">
    <span role="heading" aria-level="2">没几个人需要了解的JDK知识，我却花了3天时间研究</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>目前国内发布自己JDK版本的几家公司：</p>
<p>腾讯和阿里是因为有Java应用和云业务，所以在优化发布自己的版本</p>
<p>华为也是因为Java应用和云业务，不过因为还有服务器业务，所以还有Java课题的跑分需求，如SPECpower和SPECjbb跑分高代表自己服务器性能好</p>
<p>一些CPU厂，如龙芯，由于自己的指令集与x86这些不同，所以需要在JDK上适配自家的指令集架构，Java应用程序需要它们自己发布的JDK版本才能在龙芯CPU上跑</p>
<p>所以发布JDK版本的公司少，可能知道如何发布版本的人就更少了吧，应该也就是10多个人吧。</p>
<p>大家如果用过JDK，可能都执行这java -version吧，以bisheng jdk执行的信息为例，如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/1236123/202504/1236123-20250422111500283-321445748.png" alt="" loading="lazy">&nbsp;</p>
<p>假设我们以如下命令编译JDK：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:false;">bash ./configure  --with-debug-level=release
make all
</pre>
</div>
<p>编译出来的信息如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/1236123/202504/1236123-20250422112815359-429594404.png" alt="" loading="lazy"></p>
<p>领导要求格式与bisheng的差不多，默认编译出来的和bisheng jdk的差别太大。首先是带了许多internal字样，还有我的名称都需要去掉，另外要打上我们公司的名字。</p>
<p>使用　bash ./configure --help　命令看configure有啥配置选项， 如下：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:false;">--with-milestone        Set milestone value for build [internal]
--with-update-version   Set update version value for build [b00]
--with-user-release-suffix
                          Add a custom string to the version string if build
                          number isn't set.[username_builddateb00]
--with-build-number     Set build number value for build [b00]
</pre>
</div>
<p>&nbsp;经过探索后，发现这几个编译选项指定的内容如下图所示。</p>
<p><img src="https://img2024.cnblogs.com/blog/1236123/202504/1236123-20250422142736899-1895151595.png" alt="" loading="lazy"></p>
<p>我们想将1.8.0版本也替换为自己规划好的版本，不过没发现相关的参数。另外这个 internal 字符串总是没办法去掉，对--with-milestone字段给了如下值都不行：</p>
<div class="cnblogs_Highlighter">
<pre class="brush:csharp;gutter:false;">--with-milestone=
--with-milestone=""
--with-milestone=" "
</pre>
</div>
<p>后来偶尔一次指定　--with-update-version 和　--with-build-number 后，给&nbsp;--with-milestone随便指定了一个值，居然就没有internal了，真是莫名其妙。</p>
<p>对于版本号和相关JDK的公司名称指定最后只能是脚本开发了，通过添加configure的配置参数来解决。这个脚本也是巨复杂，下了一些功夫才整好。</p>
<p>将图片上传到AI后，问了一下如何配置JDK8的configure参数，使得编译出来的JDK版本运行java -version命令后如图所示（上传BiSheng&nbsp; JDK的版本信息图），给了一些命令，不过不能用，有些是JDK17的命令，好吧！</p>
<div><strong>公众号中有许多JDK源码剖析文章，有GC垃圾收集器，C1和C2编译器，线程，异常等，欢迎关注!</strong></div>
<p><img src="https://img2024.cnblogs.com/blog/1236123/202504/1236123-20250423173342258-1886148116.png" alt="" width="588" height="196" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div>
<div class="index_question-container__VKhsH">
<div class="cs-rank " data-agent="{}" data-query="莫名其妙">
<div class="cs-question-bubble cs-bubble" data-show-area="" data-show-ext="{&quot;type&quot;:&quot;show&quot;,&quot;value&quot;:&quot;change_render&quot;,&quot;ori_lid&quot;:&quot;9065589885749549595&quot;,&quot;lid&quot;:&quot;&quot;,&quot;re_rank&quot;:&quot;28&quot;,&quot;setype&quot;:&quot;csaitab&quot;,&quot;query&quot;:&quot;莫名其妙&quot;}">
<div class="cs-answer-hover-menu" data-show-area="">&nbsp;</div>
</div>
</div>
</div>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.033405974641203706" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-23 17:34">2025-04-23 09:03</span>&nbsp;
<a href="https://www.cnblogs.com/mazhimazhi">鸠摩（马智）</a>&nbsp;
阅读(<span id="post_view_count">492</span>)&nbsp;
评论(<span id="post_comment_count">5</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18842145);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18842145', targetLink: 'https://www.cnblogs.com/mazhimazhi/p/18842145', title: '没几个人需要了解的JDK知识，我却花了3天时间研究' })">举报</a>
</div>
        
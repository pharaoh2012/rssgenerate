
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/blbl-blog/p/19049029" title="å‘å¸ƒäº 2025-08-20 16:56">
    <span role="heading" aria-level="2">ğŸŒ ä»é›¶æ„å»ºé«˜å¯ç”¨ API ç½‘å…³ï¼šé‰´æƒã€è·¯ç”±ã€æ€§èƒ½ä¼˜åŒ–å…¨è§£æ</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="-ä»é›¶æ„å»ºé«˜å¯ç”¨-api-ç½‘å…³é‰´æƒè·¯ç”±æ€§èƒ½ä¼˜åŒ–å…¨è§£æ">ğŸŒ ä»é›¶æ„å»ºé«˜å¯ç”¨ API ç½‘å…³ï¼šé‰´æƒã€è·¯ç”±ã€æ€§èƒ½ä¼˜åŒ–å…¨è§£æ</h1>
<blockquote>
<p><strong>ä½œè€…</strong>ï¼šå¤æ¸¡è“æŒ‰<br>
<strong>æŠ€æœ¯æ ˆ</strong>ï¼šSpring Cloud Gateway + redis + Nacos + è‡ªå®šä¹‰é‰´æƒ<br>
<strong>æŠ€æœ¯æ ˆ</strong>ï¼šå¾®ä¿¡å…¬ä¼—å·ï¼ˆæ·±å…¥æµ…å‡ºè°ˆjavaï¼‰<br>
æ„Ÿè§‰æœ¬ç¯‡å¯¹ä½ æœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ä¸€ä¸‹ï¼Œä¼šä¸å®šæœŸæ›´æ–°çŸ¥è¯†å’Œé¢è¯•èµ„æ–™ã€æŠ€å·§ï¼ï¼ï¼</p>
</blockquote>
<hr>
<h2 id="ä¸€å¼•è¨€ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦-api-ç½‘å…³">ä¸€ã€å¼•è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ API ç½‘å…³ï¼Ÿ</h2>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œéšç€æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œç›´æ¥æš´éœ²åç«¯æœåŠ¡ç»™å®¢æˆ·ç«¯ä¼šå¸¦æ¥è¯¸å¤šé—®é¢˜ï¼š</p>
<ul>
<li>âŒ <strong>å®‰å…¨éšæ‚£</strong>ï¼šæ¯ä¸ªæœåŠ¡éƒ½è¦é‡å¤å®ç°é‰´æƒé€»è¾‘</li>
<li>âŒ <strong>è·¯å¾„æ··ä¹±</strong>ï¼šå®¢æˆ·ç«¯éœ€è¦ç»´æŠ¤å¤šä¸ªæœåŠ¡åœ°å€</li>
<li>âŒ <strong>é‡å¤ä»£ç </strong>ï¼šæ—¥å¿—ã€ç›‘æ§ã€é™æµç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹é‡å¤å¼€å‘</li>
<li>âŒ <strong>å‡çº§å›°éš¾</strong>ï¼šæœåŠ¡å˜æ›´å¯¹å®¢æˆ·ç«¯å½±å“å¤§</li>
</ul>
<blockquote>
<p><strong>API ç½‘å…³ï¼ˆAPI Gatewayï¼‰</strong> åº”è¿è€Œç”Ÿï¼Œå®ƒä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œæ‰¿æ‹…äº† <strong>è·¯ç”±è½¬å‘ã€å®‰å…¨æ§åˆ¶ã€åè®®è½¬æ¢ã€æµé‡æ²»ç†</strong> ç­‰æ ¸å¿ƒèŒè´£ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œæ­å»ºä¸€ä¸ª <strong>æ”¯æŒåŠ¨æ€è·¯ç”±ã€å…¨å±€é‰´æƒã€è·¯å¾„é‡å†™ã€é«˜å¹¶å‘</strong> çš„ç”Ÿäº§çº§ç½‘å…³æœåŠ¡ï¼Œå¹¶æ·±å…¥å‰–æå…¶è®¾è®¡æ€è·¯ã€è°ƒç”¨é“¾è·¯ä¸æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€‚</p>
<hr>
<h2 id="äºŒç½‘å…³çš„æ ¸å¿ƒä½œç”¨ä¸å…¸å‹åœºæ™¯">äºŒã€ç½‘å…³çš„æ ¸å¿ƒä½œç”¨ä¸å…¸å‹åœºæ™¯</h2>
<h3 id="1-ç½‘å…³çš„äº”å¤§æ ¸å¿ƒèƒ½åŠ›">1. ç½‘å…³çš„äº”å¤§æ ¸å¿ƒèƒ½åŠ›</h3>
<table>
<thead>
<tr>
<th>èƒ½åŠ›</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>âœ… è·¯ç”±è½¬å‘</td>
<td>å°†è¯·æ±‚æŒ‰è§„åˆ™è½¬å‘åˆ°å¯¹åº”å¾®æœåŠ¡</td>
</tr>
<tr>
<td>âœ… åè®®è½¬æ¢</td>
<td>HTTP â†’ gRPCã€WebSocket ç­‰</td>
</tr>
<tr>
<td>âœ… å®‰å…¨æ§åˆ¶</td>
<td>é‰´æƒã€é˜²é‡æ”¾ã€é˜²ç¯¡æ”¹</td>
</tr>
<tr>
<td>âœ… æµé‡æ²»ç†</td>
<td>é™æµã€ç†”æ–­ã€é™çº§</td>
</tr>
<tr>
<td>âœ… ç›‘æ§å®¡è®¡</td>
<td>è¯·æ±‚æ—¥å¿—ã€è°ƒç”¨é“¾è¿½è¸ªã€QPS ç›‘æ§</td>
</tr>
</tbody>
</table>
<h3 id="2-å…¸å‹åº”ç”¨åœºæ™¯">2. å…¸å‹åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>ç»Ÿä¸€å…¥å£</strong>ï¼šæ‰€æœ‰è¯·æ±‚èµ° <code>/api/**</code> ç»Ÿä¸€å…¥å£</li>
<li><strong>å®‰å…¨åŠ å›º</strong>ï¼šé˜²æ­¢æœªæˆæƒè®¿é—®ã€ç­¾åéªŒè¯ã€é˜²åˆ·</li>
<li><strong>ç°åº¦å‘å¸ƒ</strong>ï¼šæ ¹æ® Header è·¯ç”±åˆ°ä¸åŒç‰ˆæœ¬æœåŠ¡</li>
<li><strong>å‰åç«¯åˆ†ç¦»</strong>ï¼šè§£å†³è·¨åŸŸã€è·¯å¾„ä»£ç†</li>
<li><strong>API èšåˆ</strong>ï¼šåˆå¹¶å¤šä¸ªæ¥å£è¿”å›ï¼ˆBFF æ¨¡å¼ï¼‰</li>
</ul>
<hr>
<h2 id="ä¸‰æŠ€æœ¯é€‰å‹ä¸ºä»€ä¹ˆé€‰æ‹©-spring-cloud-gateway">ä¸‰ã€æŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Spring Cloud Gatewayï¼Ÿ</h2>
<table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>Nginx</th>
<th>Zuul 1.x</th>
<th><strong>Spring Cloud Gateway</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>æ€§èƒ½</td>
<td>â­â­â­â­â­</td>
<td>â­â­</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td>ç¼–ç¨‹æ¨¡å‹</td>
<td>é…ç½®åŒ–</td>
<td>åŒæ­¥é˜»å¡</td>
<td><strong>å¼‚æ­¥éé˜»å¡ï¼ˆNettyï¼‰</strong></td>
</tr>
<tr>
<td>åŠ¨æ€è·¯ç”±</td>
<td>éœ€ reload</td>
<td>æ”¯æŒ</td>
<td><strong>æ”¯æŒï¼ˆå¯å¯¹æ¥ Nacosï¼‰</strong></td>
</tr>
<tr>
<td>æ‰©å±•æ€§</td>
<td>æœ‰é™</td>
<td>ä¸€èˆ¬</td>
<td><strong>é«˜ï¼ˆFilter æœºåˆ¶ï¼‰</strong></td>
</tr>
<tr>
<td>å¼€å‘æˆæœ¬</td>
<td>ä½</td>
<td>ä½</td>
<td><strong>ä¸­ï¼ˆJava ç¼–å†™ï¼‰</strong></td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>é™æ€ä»£ç†</td>
<td>æ—§é¡¹ç›®</td>
<td><strong>å¾®æœåŠ¡ç½‘å…³é¦–é€‰</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p>âœ… <strong>ç»“è®º</strong>ï¼šSCG åŸºäº Reactor å’Œ Nettyï¼Œæ€§èƒ½é«˜ã€æ‰©å±•æ€§å¼ºï¼Œæ˜¯å¾®æœåŠ¡ç½‘å…³çš„ç†æƒ³é€‰æ‹©ã€‚</p>
</blockquote>
<hr>
<h2 id="å››æ¶æ„è®¾è®¡æ•´ä½“æ¶æ„ä¸æ¨¡å—åˆ’åˆ†">å››ã€æ¶æ„è®¾è®¡ï¼šæ•´ä½“æ¶æ„ä¸æ¨¡å—åˆ’åˆ†</h2>
<div class="mermaid">graph TD
    A[Client] --&gt; B[API Gateway]
    B --&gt; C[Route: /pass/**]
    B --&gt; D[Route: /auth/**]
    B --&gt; E[Route: /file/**]
    
    C --&gt; F[AuthGlobalFilter]
    F --&gt; G[é‰´æƒé€»è¾‘]
    G --&gt; H{é‰´æƒæˆåŠŸ?}
    H --&gt;|æ˜¯| I[StripPrefix â†’ è½¬å‘]
    H --&gt;|å¦| J[è¿”å› 401]
    
    I --&gt; K[Service A]
    I --&gt; L[Service B]
</div><h3 id="æ ¸å¿ƒæ¨¡å—">æ ¸å¿ƒæ¨¡å—</h3>
<ol>
<li><strong>åŠ¨æ€è·¯ç”±æ¨¡å—</strong>ï¼šåŸºäº <code>RouteLocator</code> å®ç°è·¯å¾„åŒ¹é…</li>
<li><strong>å…¨å±€è¿‡æ»¤å™¨</strong>ï¼š<code>GlobalFilter</code> å®ç°é‰´æƒã€æ—¥å¿—ç­‰</li>
<li><strong>å®‰å…¨æ¨¡å—</strong>ï¼šè‡ªå®šä¹‰ç­¾åéªŒè¯ï¼ˆHMAC-SHA256ï¼‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šGZIPã€ç¼“å­˜ã€JVM è°ƒä¼˜</li>
</ol>
<h2 id="äº”æ ¸å¿ƒå®ç°å…¨å±€é‰´æƒè¿‡æ»¤å™¨æ·±åº¦è§£æ">äº”ã€æ ¸å¿ƒå®ç°ï¼šå…¨å±€é‰´æƒè¿‡æ»¤å™¨æ·±åº¦è§£æ</h2>
<h3 id="1-éœ€æ±‚åˆ†æ">1. éœ€æ±‚åˆ†æ</h3>
<ul>
<li>âœ… æ”¯æŒ <code>POST</code> è¯·æ±‚ä½“å‚ä¸ç­¾å</li>
<li>âœ… æ”¯æŒ <code>GET</code> è¯·æ±‚å‚æ•°é€ä¼ </li>
<li>âœ… é˜²é‡æ”¾æ”»å‡»ï¼ˆtimestamp + nonceï¼‰</li>
<li>âœ… ç­¾åéªŒè¯å¤±è´¥è¿”å› <code>401</code></li>
</ul>
<h3 id="2-å…³é”®ä»£ç authglobalfilter">2. å…³é”®ä»£ç ï¼š<code>AuthGlobalFilter</code></h3>
<pre><code class="language-java">@Component
public class AuthGlobalFilter implements GlobalFilter, Ordered {

    private final Map&lt;String, String&gt; appSecrets = Map.of("APP_A_001", "your-secret-key-123");

    @Override
    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {
        ServerHttpRequest request = exchange.getRequest();
        String path = request.getURI().getPath();

        // ä»…æ‹¦æˆª /pass/** è¯·æ±‚
        if (!path.startsWith("/pass/")) {
            return chain.filter(exchange);
        }

        // è¯»å–å¹¶ç¼“å­˜è¯·æ±‚ä½“ï¼ˆå…³é”®ï¼ä¿è¯ body å¯é‡å¤è¯»ï¼‰
        return DataBufferUtils.join(request.getBody())
                .flatMap(dataBuffer -&gt; {
                    byte[] bodyBytes = new byte[dataBuffer.readableByteCount()];
                    dataBuffer.read(bodyBytes);
                    DataBufferUtils.release(dataBuffer);

                    String body = new String(bodyBytes, StandardCharsets.UTF_8);
                    exchange.getAttributes().put("cachedRequestBody", body);

                    // é‡æ–°åŒ…è£… requestï¼Œä¿è¯ body èƒ½è½¬å‘åˆ°ä¸‹æ¸¸
                    Flux&lt;DataBuffer&gt; cachedBodyFlux = Flux.defer(() -&gt; 
                        Mono.just(exchange.getResponse().bufferFactory().wrap(bodyBytes))
                    );

                    ServerHttpRequest mutatedRequest = new ServerHttpRequestDecorator(request) {
                        @Override
                        public Flux&lt;DataBuffer&gt; getBody() {
                            return cachedBodyFlux;
                        }
                    };

                    ServerWebExchange newExchange = exchange.mutate().request(mutatedRequest).build();

                    // æ‰§è¡Œé‰´æƒ
                    return performAuthentication(newExchange, body)
                            .then(Mono.defer(() -&gt; chain.filter(newExchange)))
                            .onErrorResume(ex -&gt; {
                                if (ex instanceof AuthenticationException) {
                                    return onError(exchange.getResponse(), ex.getMessage(), HttpStatus.UNAUTHORIZED);
                                }
                                return onError(exchange.getResponse(), "Internal error", HttpStatus.INTERNAL_SERVER_ERROR);
                            });
                })
                .switchIfEmpty(chain.filter(exchange)); // GET è¯·æ±‚ç›´æ¥æ”¾è¡Œ
    }

    private Mono&lt;Void&gt; performAuthentication(ServerWebExchange exchange, String body) {
        ServerHttpRequest request = exchange.getRequest();

        String appId = request.getHeaders().getFirst("X-Pass-AppId");
        String timestampStr = request.getHeaders().getFirst("X-Pass-Timestamp");
        String nonce = request.getHeaders().getFirst("X-Pass-Nonce");
        String sign = request.getHeaders().getFirst("X-Pass-Sign");

        // çœç•¥å‚æ•°æ ¡éªŒ...

        String secret = appSecrets.get(appId);
        if (secret == null) {
            return onError(exchange.getResponse(), "Invalid AppId", HttpStatus.UNAUTHORIZED);
        }

        // éªŒè¯æ—¶é—´æˆ³ï¼ˆ5åˆ†é’Ÿå†…ï¼‰
        try {
            long timestamp = Long.parseLong(timestampStr);
            long now = Instant.now().getEpochSecond();
            if (Math.abs(now - timestamp) &gt; 300) {
                return onError(exchange.getResponse(), "Timestamp expired", HttpStatus.UNAUTHORIZED);
            }
        } catch (NumberFormatException e) {
            return onError(exchange.getResponse(), "Invalid timestamp", HttpStatus.UNAUTHORIZED);
        }

        // âœ… ä½¿ç”¨ path + body + timestamp + nonce ç”Ÿæˆç­¾å
        String contentToSign = request.getURI().getPath() + body + timestampStr + nonce;
        String expectedSign = SignUtil.sign(contentToSign, secret);

        if (!expectedSign.equalsIgnoreCase(sign)) {
            return onError(exchange.getResponse(), "Invalid signature", HttpStatus.UNAUTHORIZED);
        }

        return Mono.empty();
    }

    private Mono&lt;Void&gt; onError(ServerHttpResponse response, String msg, HttpStatus status) {
        response.setStatusCode(status);
        response.getHeaders().add("Content-Type", "application/json");
        String body = String.format("{\"code\": %d, \"message\": \"%s\"}", status.value(), msg);
        return response.writeWith(Mono.just(response.bufferFactory().wrap(body.getBytes(StandardCharsets.UTF_8))));
    }

    @Override
    public int getOrder() {
        return -1; // ä¼˜å…ˆæ‰§è¡Œ
    }
}
</code></pre>
<h3 id="3-å…³é”®è®¾è®¡ç‚¹">3. å…³é”®è®¾è®¡ç‚¹</h3>
<table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td>â“ <code>POST</code> è¯·æ±‚ä½“åªèƒ½è¯»ä¸€æ¬¡</td>
<td><code>DataBufferUtils.join()</code> ç¼“å­˜ body</td>
</tr>
<tr>
<td>â“ ç¼“å­˜åå¦‚ä½•è½¬å‘åˆ°ä¸‹æ¸¸</td>
<td><code>ServerHttpRequestDecorator</code> åŒ…è£… request</td>
</tr>
<tr>
<td>â“ <code>GET</code> è¯·æ±‚å¦‚ä½•å¤„ç†</td>
<td><code>switchIfEmpty(chain.filter(exchange))</code> ç›´æ¥æ”¾è¡Œ</td>
</tr>
<tr>
<td>â“ é‰´æƒå¤±è´¥å¦‚ä½•ä¸­æ–­</td>
<td><code>onErrorResume</code> è¿”å›é”™è¯¯å“åº”</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="å…­è°ƒç”¨é“¾è·¯ä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹">å…­ã€è°ƒç”¨é“¾è·¯ï¼šä¸€æ¬¡è¯·æ±‚çš„å®Œæ•´æ—…ç¨‹</h2>
<p>ä»¥ <code>POST /pass/test/create</code> ä¸ºä¾‹ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/2719585/202508/2719585-20250820164745858-1692593289.png" alt="image-20250814154631800" loading="lazy"></p>
<h3 id="è¯¦ç»†è¯·æ±‚è·¯å¾„åˆ†æ">è¯¦ç»†è¯·æ±‚è·¯å¾„åˆ†æ</h3>
<ol>
<li>è¯·æ±‚è¿›å…¥ç½‘å…³<br>
â†“</li>
<li>RoutePredicateHandlerMappingï¼šåŒ¹é…è·¯ç”±<br>
â†“</li>
<li>FilteringWebHandlerï¼šæ‰§è¡Œ GlobalFilter å’Œ GatewayFilter<br>
â†“</li>
<li>è·¯ç”±è½¬å‘åˆ°ç›®æ ‡åœ°å€ï¼ˆå¦‚ <a href="http://www.baidu.com/order/16%EF%BC%89" target="_blank" rel="noopener nofollow">http://www.baidu.com/order/16ï¼‰</a></li>
</ol>
<p>æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥çœ‹ï¼š</p>
<h3 id="-æ­¥éª¤-1è·¯ç”±åŒ¹é…route-matching">ğŸ”¹ æ­¥éª¤ 1ï¼šè·¯ç”±åŒ¹é…ï¼ˆRoute Matchingï¼‰</h3>
<ul>
<li>
<p>ç½‘å…³ä¼šä»æ‰€æœ‰å¯ç”¨çš„ <code>RouteDefinition</code> ä¸­æŸ¥æ‰¾åŒ¹é…çš„è·¯ç”±ã€‚</p>
</li>
<li>
<p>ä½ çš„ä¸¤ä¸ªè·¯ç”±æºéƒ½ä¼šè¢«åŠ è½½ï¼š</p>
</li>
<li>
<p>æ¥è‡ª <code>CustomRouteConfig</code>ï¼š<code>Path=/pass/order/**</code> â†’ <code>http://www.baidu.com</code></p>
<ul>
<li>æ¥è‡ª <code>application.yml</code>ï¼š<code>Path=/pass/**</code> â†’ <code>http://localhost:8080</code></li>
</ul>
</li>
<li>
<p>ç”±äº <code>/pass/order/**</code> æ˜¯æ›´å…·ä½“çš„è·¯å¾„ï¼Œå®ƒä¼šä¼˜å…ˆåŒ¹é…ï¼ˆå‰ææ˜¯ <code>order</code> è®¾ç½®åˆç†ï¼‰ã€‚</p>
</li>
<li>
<p>åŒ¹é…æˆåŠŸåï¼Œç”Ÿæˆä¸€ä¸ªRouteå¯¹è±¡ï¼ŒåŒ…å«ï¼š</p>
</li>
</ul>
<pre><code>  ID: `order_route`
  URI: `http://www.baidu.com`
  Predicates: `Path=/pass/order/**`
  Filters: ï¼ˆå¦‚æœæœ‰ï¼‰
</code></pre>
<h3 id="-æ­¥éª¤-2æ‰§è¡Œ-globalfilterauthglobalfilter">ğŸ”¹ æ­¥éª¤ 2ï¼šæ‰§è¡Œ <code>GlobalFilter</code>ï¼ˆAuthGlobalFilterï¼‰</h3>
<ul>
<li>
<p>åŒ¹é…è·¯ç”±åï¼Œç½‘å…³è¿›å…¥è¿‡æ»¤å™¨é“¾ã€‚</p>
</li>
<li>
<p><code>AuthGlobalFilter</code> æ˜¯ <code>GlobalFilter</code>ï¼Œå®ƒçš„ <code>filter()</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨</p>
</li>
<li>
<blockquote>
<p>âœ… æ­¤æ—¶ï¼Œ<strong>è¯·æ±‚è·¯å¾„ <code>/pass/order/16</code> è¢«ç”¨äºè·¯ç”±åŒ¹é…</strong>ï¼Œä½† <code>CustomRouteConfig</code> æœ¬èº« <strong>ä¸ä¼šä¸»åŠ¨æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ä¿¡æ¯</strong>ã€‚</p>
</blockquote>
<hr>
</li>
</ul>
<pre><code class="language-java">public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {
    ServerHttpRequest request = exchange.getRequest();
    String path = request.getURI().getPath(); // â†’ "/pass/order/16"
    ...
}
</code></pre>
<p>âœ… åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è·å–åˆ°å®Œæ•´çš„è¯·æ±‚ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è·¯å¾„ï¼š<code>/pass/order/16</code></li>
<li>Headerï¼š<code>X-Pass-AppId</code>, <code>X-Pass-Sign</code> ç­‰</li>
<li>æ–¹æ³•ï¼šGET/POST</li>
<li>æŸ¥è¯¢å‚æ•°ç­‰</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ˜¯ä½ åšé‰´æƒçš„æ­£ç¡®ä½ç½®ã€‚</strong></p>
<hr>
<h3 id="-æ­¥éª¤-3è·¯ç”±è½¬å‘">ğŸ”¹ æ­¥éª¤ 3ï¼šè·¯ç”±è½¬å‘</h3>
<ul>
<li>
<p>é‰´æƒé€šè¿‡åï¼Œ<code>chain.filter(exchange)</code> ç»§ç»­æ‰§è¡Œã€‚</p>
</li>
<li>
<p>ç½‘å…³æ ¹æ® <code>Route</code> ä¸­çš„ <code>uri</code>ï¼ˆ<code>http://www.baidu.com</code>ï¼‰å’Œ <code>predicates</code> è¿›è¡Œè½¬å‘ã€‚</p>
</li>
<li>
<p>æœ€ç»ˆè¯·æ±‚è¢«è½¬å‘ä¸ºï¼š</p>
<pre><code>GET http://www.baidu.com/order/16
</code></pre>
</li>
</ul>
<h2 id="ä¸ƒè¯·æ±‚è°ƒè¯•">ä¸ƒã€è¯·æ±‚è°ƒè¯•</h2>
<p><img src="https://img2024.cnblogs.com/blog/2719585/202508/2719585-20250820164921932-1609838604.png" alt="image-20250820151406974" loading="lazy"></p>
<p>ç½‘å…³æ—¥å¿—æ‰“å°æ—¥å¿—</p>
<p><img src="https://img2024.cnblogs.com/blog/2719585/202508/2719585-20250820165014232-1502786568.png" alt="image-20250820151040396" loading="lazy"></p>
<p>ä¸‹æ¸¸ç³»ç»Ÿ</p>
<p><img src="https://img2024.cnblogs.com/blog/2719585/202508/2719585-20250820165035203-120572745.png" alt="image-20250820151336602" loading="lazy"></p>
<h2 id="å…«æ€»ç»“">å…«ã€æ€»ç»“</h2>
<p>æœ¬æ–‡ä»é›¶æ­å»ºäº†ä¸€ä¸ªç”Ÿäº§çº§ API ç½‘å…³ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li>âœ… åŸºäºè·¯å¾„çš„åŠ¨æ€è·¯ç”±</li>
<li>âœ… æ”¯æŒ Body å‚ä¸ç­¾åçš„å…¨å±€é‰´æƒ</li>
<li>âœ… GET/POST è¯·æ±‚å…¼å®¹å¤„ç†</li>
<li>âœ… é«˜å¹¶å‘æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<blockquote>
<p><strong>ç½‘å…³ä¸æ˜¯ç®€å•çš„â€œè½¬å‘å™¨â€ï¼Œè€Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„â€œå®‰å…¨é—¨â€ä¸â€œæµé‡è°ƒåº¦ä¸­å¿ƒâ€</strong>ã€‚</p>
</blockquote>
<p>é€šè¿‡åˆç†è®¾è®¡ä¸ä¼˜åŒ–ï¼Œå³ä½¿æ˜¯ 2æ ¸4G çš„æœºå™¨ï¼Œä¹Ÿèƒ½æ‰›ä½ä¸Šåƒ QPSï¼Œä¸ºä¸šåŠ¡ä¿é©¾æŠ¤èˆªã€‚</p>

</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-20 16:57">2025-08-20 16:56</span>&nbsp;
<a href="https://www.cnblogs.com/blbl-blog">å¤æ¸¡è“æŒ‰</a>&nbsp;
é˜…è¯»(<span id="post_view_count">179</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19049029);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19049029', targetLink: 'https://www.cnblogs.com/blbl-blog/p/19049029', title: '&amp;#127760; ä»é›¶æ„å»ºé«˜å¯ç”¨ API ç½‘å…³ï¼šé‰´æƒã€è·¯ç”±ã€æ€§èƒ½ä¼˜åŒ–å…¨è§£æ' })">ä¸¾æŠ¥</a>
</div>
	
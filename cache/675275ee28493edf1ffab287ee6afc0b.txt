
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/linx/p/18951405" title="å‘å¸ƒäº 2025-06-27 09:16">
    <span role="heading" aria-level="2">Webå‰ç«¯å…¥é—¨ç¬¬ 72 é—®ï¼šJavaScript DOM å†…å®¹æ“ä½œå¸¸ç”¨æ–¹æ³•å’Œ XSS æ³¨å…¥æ”»å‡»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å½“é¡¹ç›®çš„å®‰å…¨å›¢é˜Ÿæ‰¾ä¸Šé—¨å‘Šè¯‰æ‚¨ï¼Œæ‚¨å¼€å‘çš„é¡¹ç›®å­˜åœ¨ XSS å®‰å…¨æ¼æ´ï¼Œä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œå°±é—®æ‚¨æ…Œä¸æ…Œï¼Ÿï¼Ÿ</p>
<p>HTML å†…å®¹å†™å…¥çš„æ—¶å€™ï¼Œå¦‚æœç¨ä¸æ³¨æ„å°±ä¼šè§¦å‘éšè— BOSS æ¼æ´ XSSã€‚</p>
<p>XSS æ¼æ´åŸç†å°±æ˜¯åˆ©ç”¨äº†ç½‘ç«™ä¸Šå†…å®¹è¾“å…¥çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯´å¸¸è§çš„è¯„è®ºæäº¤ï¼Œ<code>è€å…­</code> é€šè¿‡è¾“å…¥è¯„è®ºçš„åœ°æ–¹ï¼Œæäº¤ä¸€äº› <code>åŒ…å« JS ä»£ç çš„å†…å®¹</code> åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ²¡åšä»»ä½•æ“ä½œç›´æ¥å†™å…¥åˆ°æ•°æ®åº“ï¼Œæœ€ååœ¨è¯„è®ºæŸ¥è¯¢çš„æ—¶å€™ç›´æ¥å°†æ•°æ®åº“çš„å†…å®¹åŸæ ·è¿”ç»™å‰ç«¯ï¼Œè€Œå‰ç«¯æ‹¿åˆ°æ­¤å†…å®¹çš„æ—¶å€™ï¼Œä¹Ÿä¸åšä»»ä½•å¤„ç†ï¼Œç›´æ¥å°†å†…å®¹ä»¥ HTML çš„å½¢å¼æ¸²æŸ“çš„é¡µé¢ä¸­ï¼Œè¿™æ—¶å€™ <code>è€å…­</code> è¾“å…¥çš„éæ³•å†…å®¹å°±ä¼šè¢«å½“åš JS ä»£ç æ‰§è¡Œï¼Œè¿™å°±æ˜¯å…¸å‹çš„ XSS æ³¨å…¥æ”»å‡»ã€‚</p>
<p>è¦é¿å… XSS æ¼æ´ï¼Œå°±éœ€è¦å¯¹ä¸å¯ä¿¡çš„å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼›æˆ–è€…<code>ä¸è¦</code>æŠŠè¿™éƒ¨åˆ†å†…å®¹å½“åš HTML å¤„ç†ï¼Œç›´æ¥<code>å½“åšæ–‡æœ¬</code>æ¸²æŸ“ä¹Ÿå¯ä»¥é¿å… XSS æ³¨å…¥ã€‚</p>
<h2 id="dom-å±æ€§æ“ä½œ">DOM å±æ€§æ“ä½œ</h2>
<p>åœ¨äº†è§£ DOM å†…å®¹æ“ä½œä¹‹å‰ï¼Œå…ˆå­¦ä¹ å‡ ä¸ªå¸¸ç”¨çš„ DOM å±æ€§æ“ä½œæ–¹æ³•ï¼Œæ¯•ç«Ÿ JS ä¸ CSS è”åŠ¨ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ DOM å±æ€§è¿›è¡Œå…³è”ã€‚</p>
<p>æ¯”å¦‚ JS æ§åˆ¶ class å±æ€§çš„å˜åŒ–ï¼Œå†åœ¨ CSS ä¸­ç¼–å†™ä¸åŒçš„ class æ ·å¼ï¼Œå°±å¯ä»¥è®© HTML å…ƒç´ æ¸²æŸ“æˆä¸åŒçš„æ ·å­ã€‚</p>
<pre><code class="language-js">// è·å– DOM å±æ€§å€¼
element.getAttribute(name)
// è®¾ç½® DOM å±æ€§å€¼ï¼Œå·²å­˜åœ¨çš„å±æ€§å€¼ä¼šè¢«ä¿®æ”¹
element.setAttribute(name, value)
// åˆ é™¤ DOM å±æ€§
element.removeAttribute(name)

// æ“ä½œ class æ–¹æ³•
element.classList.add(c1, c2, c3, ...) // æ·»åŠ 
element.classList.remove(c1, c2, c3, ...) // åˆ é™¤
// force ä½¿ç”¨å¸ƒå°”å€¼å°†å¼ºåˆ¶åªå…è®¸åˆ é™¤æˆ–è€…åªå…è®¸ä¿®æ”¹
element.classList.toggle(className, force) // å¦‚æœå­˜åœ¨åˆ™åˆ é™¤ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ 
element.classList.contains(className) // åˆ¤æ–­æ˜¯å¦å­˜åœ¨

// å…¶ä»–å¸¸ç”¨å±æ€§
element.id // è®¾ç½® id
element.className // è®¾ç½® class
element.style // ç›´æ¥è®¾ç½®æ ·å¼

// ç‰¹å®šæ ‡ç­¾å±æ€§
img.src // è®¾ç½®å›¾ç‰‡åœ°å€
</code></pre>
<p>é€šè¿‡ <code>className</code> å¯ç›´æ¥è®¾ç½®å…ƒç´ çš„ class å±æ€§ï¼Œè¿™å„¿æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ç›´æ¥ä½¿ç”¨ <code>class</code> è®¾ç½®å‘¢ï¼Ÿ</p>
<p>åŸå› æ˜¯ï¼šclass æ˜¯ JS ä¸­çš„å…³é”®å­—ï¼Œä¸ºé¿å…å¼•èµ·ä¸€äº›è¯­æ³•é—®é¢˜ï¼Œæ‰€ä»¥å°±æ¢äº†ä¸€ä¸ªåå­— <code>className</code>ã€‚</p>
<p>é€šè¿‡ <code>className</code> æ§åˆ¶ç±»åçš„å¢åˆ æ”¹è™½ç„¶ä¹Ÿä¸æ˜¯ä¸èƒ½åšï¼Œä½†æ˜¯å§‹ç»ˆæœ‰é‚£ä¹ˆä¸€ç‚¹ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥åæ¥å°±å¼•å…¥äº† <code>classList</code> ç”¨æ¥ä¸“é—¨æ§åˆ¶ class å±æ€§ã€‚</p>
<p>è€Œ <code>Attribute</code> ç›¸å…³çš„å‡ ä¸ªæ–¹æ³•ï¼Œåˆ™æ˜¯å¯ä»¥ç”¨æ¥æ§åˆ¶å…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰å±æ€§å’Œä¸€äº›é»˜è®¤çš„å±æ€§ idã€styleã€className ç­‰ã€‚<strong>æ‰€ä»¥è®°ä½ Attribute å‡ ä¸ªæ–¹æ³•å°±å·²ç»å¯ä»¥æ‰“ç©¿ DOM å±æ€§æ“ä½œäº†ã€‚</strong></p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="language-html">&lt;style&gt;
  .red {
    color: red; 
  }
  .blue {
    color: blue;
  }
  [data-type="bold"] {
    font-weight: bold;
  }
  [data-type="italic"] {
    font-style: italic;
  }
&lt;/style&gt;

&lt;div id="test"&gt;å…¬ä¼—å·ï¼šå‰ç«¯è·¯å¼•&lt;/div&gt;
&lt;img id="img"&gt;

&lt;script&gt;
  const test = document.getElementById('test');
  const img = document.getElementById('img');
  
  // è®¾ç½®å±æ€§
  test.setAttribute('data-type', 'bold')

  // è·å–å±æ€§å€¼
  const type = test.getAttribute('data-type')
  console.log('ğŸš€ ~ type:', type);

  // ç§»é™¤å±æ€§
  test.removeAttribute('data-type')

  // æ·»åŠ æ–°çš„å±æ€§
  test.setAttribute('data-type', 'italic')

  // åˆ¤æ–­æ˜¯å¦å­˜åœ¨Class
  const hasRed = test.classList.contains('red')
  console.log('ğŸš€ ~ hasRed:', hasRed);

  // æ·»åŠ Class
  test.classList.add('red')

  // ç§»é™¤Class
  test.classList.remove('red')

  // å¦‚æœä¸å­˜åœ¨åˆ™æ·»åŠ  blueï¼Œå­˜åœ¨ blue åˆ™ç§»é™¤
  test.classList.toggle('blue')

  
  // ç»™å›¾ç‰‡è®¾ç½®åœ°å€
  img.src = 'https://developer.mozilla.org/static/media/firefox.1eabb4da07c095ca04fa.svg'
  // è·å–å›¾ç‰‡åœ°å€
  console.log('ğŸš€ ~ img.src:', img.src);
  
  // æ¢ä¸ª ID å±æ€§
  img.id = 'img-1'
  // è·å– ID å±æ€§
  console.log('ğŸš€ ~ img.id:', img.id);

  // è®¾ç½®å›¾ç‰‡çš„ class
  img.className = 'img-1'
  // è·å–å›¾ç‰‡çš„ class
  console.log('ğŸš€ ~ img.className:', img.className);

  // è®¾ç½®å›¾ç‰‡è¾¹æ¡†
  img.style.border = '1px solid red'
  img.style.borderWidth = '4px'
  img.style['border-color'] = 'blue'
  // è®¾ç½®å›¾ç‰‡å®½åº¦
  img.style.width = '100px'
  // è·å–å›¾ç‰‡çš„æ ·å¼
  console.log('ğŸš€ ~ img.style:', img.style['border-width']);
&lt;/script&gt;
</code></pre>
<p>åœ¨ä½¿ç”¨ <code>style</code> å±æ€§è®¾ç½®æ ·å¼çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ <code>.</code> è¯­æ³•èµ‹å€¼ï¼Œé‚£ä¹ˆå¿…é¡»è¦æ”¹ä¸º <code>å°é©¼å³°å‘½å</code>ï¼ŒåŸå› æ˜¯ JS ä¸­çš„ <code>.</code> è¯­æ³•ä¸æ”¯æŒçŸ­æ¨ªçº¿ï¼Œæ¯”å¦‚ <code>borderWidth</code>ï¼Œä¸èƒ½ä½¿ç”¨ <code>border-width</code>ã€‚</p>
<p>åœ¨ä½¿ç”¨æ•°ç»„å–å€¼è¯­æ³•çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ css çš„å±æ€§èµ‹å€¼ï¼Œæ¯”å¦‚ <code>img.style['border-color'] = 'blue'</code>ã€‚</p>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/596097/202506/596097-20250627091439970-1172099583.png" class="lazyload"></p>
<h2 id="dom-å†…å®¹æ“ä½œ">DOM å†…å®¹æ“ä½œ</h2>
<p>DOM å±æ€§æ“ä½œä¸€èˆ¬ä¸ä¼šè§¦å‘å®‰å…¨é—®é¢˜ï¼Œ XSS æ³¨å…¥éƒ½æ˜¯å‘ç”Ÿåœ¨ DOM å†…å®¹æ“ä½œçš„æ—¶å€™ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ JS è¿›è¡Œ DOM å†…å®¹æ“ä½œæ—¶éœ€ç‰¹åˆ«å°å¿ƒã€‚</p>
<p>å¸¸ç”¨çš„ä¸¤ä¸ªä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="language-js">// è®¾ç½® DOM HTML å†…å®¹
element.innerHTML = htmlString;
// è®¾ç½® DOM æ–‡æœ¬å†…å®¹
element.textContent = textString;
</code></pre>
<p>å®ä¾‹ï¼š</p>
<pre><code class="language-html">&lt;div id="test1"&gt;å…¬ä¼—å·ï¼šå‰ç«¯è·¯å¼•&lt;/div&gt;
&lt;div id="test2"&gt;å…¬ä¼—å·ï¼šå‰ç«¯è·¯å¼•&lt;/div&gt;

&lt;script&gt;
const test1 = document.getElementById('test1');
const test2 = document.getElementById('test2');
// å†™å…¥ HTML å†…å®¹
test1.innerHTML = '&lt;strong&gt;è­¦å‘Š&lt;/strong&gt;ï¼šç”¨æˆ·è¾“å…¥å†…å®¹'; 

// å†™å…¥æ–‡æœ¬å†…å®¹
test2.textContent = '&lt;strong&gt;å®‰å…¨æ–‡æœ¬&lt;/strong&gt;'; // ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸è§£æ HTML

// åŒºåˆ«å¯¹æ¯”
console.log(test2.innerHTML); // è¾“å‡º: &amp;lt;strong&amp;gt;å®‰å…¨æ–‡æœ¬&amp;lt;/strong&amp;gt;
console.log(test2.textContent); // è¾“å‡º: &lt;strong&gt;å®‰å…¨æ–‡æœ¬&lt;/strong&gt;
&lt;/script&gt;
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/596097/202506/596097-20250627091431541-1993102433.png" class="lazyload"></p>
<h3 id="xss-æ³¨å…¥">XSS æ³¨å…¥</h3>
<p>åœ¨ä½¿ç”¨ innerHTML è®¾ç½® HTML å†…å®¹æ—¶ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¸­åŒ…å« JS è„šæœ¬ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ XSS æ³¨å…¥ã€‚</p>
<p>æ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="language-html">&lt;div id="test1"&gt;å…¬ä¼—å·ï¼šå‰ç«¯è·¯å¼•&lt;/div&gt;
&lt;div id="test2"&gt;å…¬ä¼—å·ï¼šå‰ç«¯è·¯å¼•&lt;/div&gt;

&lt;script&gt;
  const test1 = document.getElementById('test1');
  const h1 = `&lt;script&gt;alert("XSS");&lt;\/script&gt;`;
  // ç›´æ¥æ’å…¥ script æ ‡ç­¾è¢«æµè§ˆå™¨æ‹¦æˆªäº†ï¼Œä¸ä¼šå¼•å‘ XSS æ³¨å…¥
  test1.innerHTML = h1;

  const test2 = document.getElementById('test2');
  // ä½†å¯ä»¥æ¢ä¸€ç§å˜ä½“ï¼Œä½¿ç”¨ img æ ‡ç­¾ä¹Ÿå¯ä»¥åšåˆ° XSS æ³¨å…¥
  const h2 = `&lt;img src=x onerror="alert('XSS')"&gt;`;
  test2.innerHTML = h2;
&lt;/script&gt;
</code></pre>
<p>HTML5 è§„èŒƒè§„å®šï¼šé€šè¿‡ innerHTML åŠ¨æ€æ’å…¥çš„ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸ä¼šæ‰§è¡Œå…¶ä¸­çš„ JavaScript ä»£ç ã€‚<br>
è¿™æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œç›®çš„æ˜¯é˜²æ­¢å¼€å‘è€…æ— æ„æˆ–æ¶æ„æ’å…¥å¯æ‰§è¡Œè„šæœ¬ã€‚</p>
<p>XSS æ³¨å…¥å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼šéæ³•ç”¨æˆ·ç›´æ¥åœ¨ç½‘ç«™ä¸­è¿è¡Œ JS ä»£ç ï¼Œå¯ä»¥è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä»è€Œä¼ªé€ ä¸€äº›è¯·æ±‚ï¼Œè¾¾åˆ°éæ³•ç›®çš„ã€‚</p>
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>åœ¨ä½¿ç”¨ JS æ“ä½œ DOM å†…å®¹çš„æ—¶å€™ï¼Œéœ€ç‰¹åˆ«é˜²èŒƒ XSS æ³¨å…¥é—®é¢˜ï¼Œå°¤å…¶æ˜¯ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ›´åŠ è¦åŠ å¼ºé˜²èŒƒï¼Œå¯ä»¥æŠŠä»»ä½•ç”¨æˆ·å½“åšä¸€ä¸ªæ½œåœ¨çš„æ”»å‡»è€…ï¼Œä»–ä»¬æ‰€æœ‰çš„è¾“å…¥éƒ½æ˜¯ä¸å¯ä¿¡çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…å¾ˆå¤šçš„å®‰å…¨é—®é¢˜ã€‚</p>
<p>æ›´å¤šå†…å®¹å‚è€ƒ MDNï¼š</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMTokenList" target="_blank" rel="noopener nofollow">https://developer.mozilla.org/zh-CN/docs/Web/API/DOMTokenList</a><br>
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener nofollow">https://developer.mozilla.org/zh-CN/docs/Web/API/Element</a></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>&nbsp;</p>
<p style="font-size: 18px;font-weight: bold;">æ–‡ç« é¦–å‘äºå¾®ä¿¡å…¬ä¼—å·ã€<span style="color:rgb(255, 71, 87)">å‰ç«¯è·¯å¼•</span>ã€‘ï¼Œæ¬¢è¿ <span style="color:#4ec259">å¾®ä¿¡æ‰«ä¸€æ‰«</span> æŸ¥çœ‹æ›´å¤šæ–‡ç« ã€‚</p>
<p>
  <img style="max-width: 320px;" src="https://images.cnblogs.com/cnblogs_com/linx/2447020/o_250228035031_%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8C%E7%BB%B4%E7%A0%81.png">
</p>
<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š<a href="https://www.cnblogs.com/linx/" target="_blank">å‰ç«¯è·¯å¼•</a>ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/linx/p/18951405" target="_blank">https://www.cnblogs.com/linx/p/18951405</a></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-27 09:17">2025-06-27 09:16</span>&nbsp;
<a href="https://www.cnblogs.com/linx">å‰ç«¯è·¯å¼•</a>&nbsp;
é˜…è¯»(<span id="post_view_count">322</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">2</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18951405);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18951405', targetLink: 'https://www.cnblogs.com/linx/p/18951405', title: 'Webå‰ç«¯å…¥é—¨ç¬¬ 72 é—®ï¼šJavaScript DOM å†…å®¹æ“ä½œå¸¸ç”¨æ–¹æ³•å’Œ XSS æ³¨å…¥æ”»å‡»' })">ä¸¾æŠ¥</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/gokoruri/p/18991905" title="发布于 2025-07-18 18:04">
    <span role="heading" aria-level="2">使用 Scoop 安装 Mambaforge 踩坑指南</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="为什么用-scoop-安装-mambaforge">为什么用 Scoop 安装 Mambaforge？</h2>
<p><strong>Mambaforge</strong> 作为 Anaconda 的轻量级替代品，以其<strong>极速包管理</strong>能力脱颖而出。而 <strong>Scoop</strong> 则是 Windows 平台上优雅的包管理解决方案：</p>
<ul>
<li>✅ <strong>闪电般的依赖解析</strong>（比 conda 快 10 倍）</li>
<li>✅ <strong>无缝环境隔离</strong></li>
<li>✅ <strong>一键安装/更新</strong>体验</li>
<li>✅ <strong>整洁的路径管理</strong></li>
</ul>
<hr>
<h2 id="完整安装流程含问题解决方案">完整安装流程（含问题解决方案）</h2>
<h3 id="步骤-1安装-scoop-和-mambaforge">步骤 1：安装 Scoop 和 Mambaforge</h3>
<pre><code class="language-powershell"># 安装 Scoop（若未安装）
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
irm get.scoop.sh | iex

# 添加 extras 软件仓库
scoop bucket add extras

# 安装 Mambaforge
scoop install mambaforge
</code></pre>
<h3 id="步骤-2初始化-powershell-环境">步骤 2：初始化 PowerShell 环境</h3>
<pre><code class="language-powershell"># 注意！！！截至2025.7.18，安装mambaforge后需要先更新mamba本身
mamba update --all

# 初始化 PowerShell 支持
mamba init powershell
</code></pre>
<h3 id="步骤-3发现问题---环境激活失败">步骤 3：发现问题 - 环境激活失败</h3>
<p>尝试创建并激活环境时会出现错误：</p>
<pre><code class="language-powershell">mamba create -n test python=3.11 -y
mamba activate test  # 这里会报错！
</code></pre>
<p><strong>问题根源</strong>：<br>
mamba生成的初始化脚本无法适应 Scoop 的特殊目录结构：</p>
<ul>
<li>可执行文件位于 <code>current</code> 符号链接目录</li>
<li>持久化数据存储在独立位置</li>
</ul>
<hr>
<h2 id="终极解决方案手动配置">终极解决方案：手动配置</h2>
<h3 id="步骤-1打开-powershell-配置文件">步骤 1：打开 PowerShell 配置文件</h3>
<pre><code class="language-powershell"># 使用记事本打开powershell配置文件
notepad $PROFILE
</code></pre>
<h3 id="步骤-2替换为正确配置">步骤 2：替换为正确配置</h3>
<p>用以下代码块<strong>替换</strong>自动生成的内容，要修改为你自己的Scoop路径：</p>
<pre><code class="language-powershell">#region mamba initialize
# !! 此区块内容由 'mamba shell init' 管理 !!
$Env:MAMBA_ROOT_PREFIX = "你的Scoop持久化目录\mambaforge"
$Env:MAMBA_EXE = "你的Scoop应用目录\mambaforge\current\Library\bin\mamba.exe"
(&amp; $Env:MAMBA_EXE 'shell' 'hook' -s 'powershell' -r $Env:MAMBA_ROOT_PREFIX) | Out-String | Invoke-Expression
#endregion
</code></pre>
<h3 id="步骤-3查找你的实际路径">步骤 3：查找你的实际路径</h3>
<pre><code class="language-powershell"># 查找 Scoop 根目录
$ScoopRoot = scoop config root_path

# 查找全局目录
$ScoopGlobal = scoop config global_path

# 通常情况下mamba安装在ScoopRoot中，所以：
$Env:MAMBA_ROOT_PREFIX = "$ScoopRoot\persist\mambaforge"
$Env:MAMBA_EXE = "$ScoopRoot\app\mambaforge\current\Library\bin\mamba.exe"
</code></pre>
<h3 id="步骤-4验证配置">步骤 4：验证配置</h3>
<pre><code class="language-powershell"># 重新加载配置文件
. $PROFILE

# 测试环境创建与激活
mamba create -n test python=3.11 -y
mamba activate test
python --version  # 应显示 Python 3.11.x

# 检查环境列表
mamba env list
</code></pre>
<hr>
<h2 id="配置详解">配置详解</h2>
<h3 id="关键参数解析">关键参数解析</h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用说明</th>
<th>示例路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAMBA_ROOT_PREFIX</td>
<td>环境存储位置（持久化目录）</td>
<td><code>D:\ScoopGlobalApps\persist\mambaforge</code></td>
</tr>
<tr>
<td>MAMBA_EXE</td>
<td>mamba 可执行文件位置</td>
<td><code>D:\ScoopApps\apps\mambaforge\current\Library\bin\mamba.exe</code></td>
</tr>
</tbody>
</table>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-18 18:04">2025-07-18 18:04</span>&nbsp;
<a href="https://www.cnblogs.com/gokoruri">GOKORURI</a>&nbsp;
阅读(<span id="post_view_count">94</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18991905);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18991905', targetLink: 'https://www.cnblogs.com/gokoruri/p/18991905', title: '使用 Scoop 安装 Mambaforge 踩坑指南' })">举报</a>
</div>
        
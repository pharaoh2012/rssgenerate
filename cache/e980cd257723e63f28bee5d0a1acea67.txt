
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ulricqin/p/19002910" title="发布于 2025-07-24 15:27">
    <span role="heading" aria-level="2">底层的告警，上层业务应该收吗？</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>有朋友问：我是业务应用的 DEV 或 SRE，我的应用依赖了底层服务和基础设施，比如依赖基础网络、Kubernetes、MySQL、收银台服务，那这些基础服务如果出问题，我应该收告警吗？夜莺里有个订阅规则，是不是就是为此设计的？</p>
<p>本文讲讲笔者的个人理解，欢迎大家留言一起探讨实践经验。</p>
<p>首先，请大家看一下上一篇文章《<a href="https://flashcat.cloud/blog/alerting-for-cpu-high/" rel="noopener nofollow">CPU负载高，到底应不应该告警？</a>》，其中提到一个点：只有 actionable 的告警规则才有意义，网友的留言也很直白有效：没有 SOP 的告警都是垃圾！</p>
<p>所以，要看你们的情况：</p>
<p>1，如果你的服务是单机房部署，这些基础设施和服务出问题你无能为力，只能被动等待恢复，即你没有 SOP，那收这些告警意义不大。</p>
<p>此时推荐的做法是：做一个可视化页面，把你依赖的基础设施和服务的关键&nbsp;SLI&nbsp;放上去，你能通过查看 UI 趋势图，了解到各个基础设施和服务的健康状况即可。Facebook 有个内部产品叫 SLICK，就是类似的逻辑，我们创业做的 Flashcat 里有个功能叫“灭火图”，也有类似的效果。这算是一个惯常做法。</p>
<p>2，如果你有 SOP，比如可以切流，那么去订阅这类告警是有意义的。</p>
<p>但是，很多底层服务的关键指标你也未必看得懂，此时最好有个规范。比如，每个底层服务的负责人，在配置告警规则时，如果觉得那个告警规则很重要，对应的告警会影响上层服务，那就给那个规则打上一个特殊标签，比如&nbsp;<code>advertise=mysql</code>&nbsp;表示所有 MySQL 相关的需要周知的告警，之后上层应用的 DEV、SRE 就可以订阅这个标签，知悉相关的告警。</p>
<p>另外</p>
<p>MySQL、收银台这类服务，相比去订阅它们的 SLI 告警，更好的方式是在上层应用里自行埋点，主要是采集一下成功率、延迟就可以了。</p>
<p>因为从 MySQL 的视角来看，其 SLI 指标是面向整个实例的，而如果在上层应用埋点，其指标就可以细化到与这个服务相关，做得更精细化。</p>
<blockquote>
<p>本文作者：秦晓辉，夜莺开源项目创始人，极客时间专栏《运维监控系统实战笔记》作者，目前在监控、可观测性领域创业。</p>
</blockquote>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-24 15:28">2025-07-24 15:27</span>&nbsp;
<a href="https://www.cnblogs.com/ulricqin">IT运维监控</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19002910);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19002910', targetLink: 'https://www.cnblogs.com/ulricqin/p/19002910', title: '底层的告警，上层业务应该收吗？' })">举报</a>
</div>
        
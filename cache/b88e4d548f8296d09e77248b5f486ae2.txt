
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/whylinux/p/19020488" title="发布于 2025-08-03 22:17">
    <span role="heading" aria-level="2">2.9 rt-thread实操 stm32l496 w5500</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>1.W5500内置MAC和PHY，内置硬件协议栈。</p>
<p>2、名词解释。MAC是将上层的数据进行封包，PHY是物理层。</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803203455143-802971161.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803203552649-1544106809.png" class="lazyload"></p>
<p>&nbsp;3、W5500想要使用，依赖的东西</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803204301587-1706417854.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>使能SAL组件和网络接口<img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803204237322-1618303411.png" class="lazyload"></p>
<p>&nbsp;</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803205648058-1388484097.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>使能WIZNET软件包</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803204544626-173160931.png" class="lazyload"></p>
<p>&nbsp;</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803204903723-605535054.png" class="lazyload"></p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803205030169-1902797904.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803205002831-1414687873.png" class="lazyload"></p>
<p>&nbsp;退出配置，更新软件包，生成更新工程，修改硬件spi2引脚</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803211530520-1053068418.png" class="lazyload"></p>
<p>&nbsp;找到挂载spi驱动总线的文件，发现没有打开宏定义，kconfig处理下</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803211634725-1171852562.png" class="lazyload"></p>
<p>&nbsp;这几个宏都应该可配</p>
<p>BSP_USING_SPI2，BSP_SPI2_RX_USING_DMA，BSP_SPI2_TX_USING_DMA</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803212759240-1098087907.png" class="lazyload"></p>
<p>&nbsp;编译运行后提示让我注册spi设备到总线上，定位在wiz.c文件中，原来wiz初始化时，有注释提示我们要注册设备到总线上，因为我的内核是rt-thread5.1.0的，所以用它注释的注册总线方法是不好使的，我用我当前版本的方式进行设备注册到总线上</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803221612373-1917871464.png" class="lazyload"></p>
<p>&nbsp;烧录运行后正常。</p>
<p>ifconfig可以看到信息，待结合网线实际测试下</p>
<p><img alt="image" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1468469/202508/1468469-20250803221715135-1998598415.png" class="lazyload"></p>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-03 22:18">2025-08-03 22:17</span>&nbsp;
<a href="https://www.cnblogs.com/whylinux">_小溢</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19020488);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19020488', targetLink: 'https://www.cnblogs.com/whylinux/p/19020488', title: '2.9 rt-thread实操 stm32l496 w5500' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/haoxianrui/p/18684753" title="å‘å¸ƒäº 2025-01-23 08:39">
    <span role="heading" aria-level="2">ä»0åˆ°1æ„å»ºå¼€æº vue-uniapp-templateï¼šä½¿ç”¨ UniApp + Vue3 + TypeScript å’Œ VSCoeã€CLI å¼€å‘è·¨å¹³å°ç§»åŠ¨ç«¯è„šæ‰‹æ¶</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/675291/202501/675291-20250121231840983-39145422.png" alt="ä»0åˆ°1æ„å»ºå¼€æº vue-uniapp-templateï¼šä½¿ç”¨ UniApp + Vue3 + TypeScript å’Œ VSCoeã€CLI å¼€å‘è·¨å¹³å°ç§»åŠ¨ç«¯è„šæ‰‹æ¶" class="desc_img">
        æœ¬æ–‡ä»‹ç»å¦‚ä½•é€šè¿‡ VSCode å’Œ vue-cli æ„å»ºåŸºäº Vue3 å’Œ TypeScript çš„ UniApp è·¨ç§»åŠ¨ç«¯å¼€æºè„šæ‰‹æ¶æ¨¡æ¿ï¼ŒåŒ…æ‹¬ç¯å¢ƒé…ç½®ã€é¡¹ç›®åˆå§‹åŒ–ã€ä»£ç è§„èŒƒï¼ˆESLintã€Prettierã€Stylelintï¼‰ã€Git æäº¤è§„èŒƒï¼ˆHuskyã€Commitlintã€Commitizenï¼‰ï¼Œä»¥åŠ Pinia çŠ¶æ€ç®¡ç†ã€HTTP è¯·æ±‚å°è£…ã€Sassã€UnoCSSã€wot-design-uni ç»„ä»¶åº“çš„æ•´åˆã€‚è¿˜é…ç½®ç¯å¢ƒå˜é‡å’Œåå‘ä»£ç†ï¼Œå¹¶æ¶µç›– H5 éƒ¨ç½²ä¸å°ç¨‹åºå‘å¸ƒã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>ğŸš€ ä½œè€…ä¸»é¡µï¼š <a href="https://www.youlai.tech" target="_blank" rel="noopener nofollow">æœ‰æ¥æŠ€æœ¯</a><br>
ğŸ”¥ å¼€æºé¡¹ç›®ï¼š <a href="https://gitee.com/youlaitech/youlai-mall" target="_blank" rel="noopener nofollow">youlai-mall </a>ï¸±<a href="https://gitee.com/youlaiorg/vue3-element-admin" target="_blank" rel="noopener nofollow">vue3-element-admin</a>ï¸±<a href="https://gitee.com/youlaiorg/youlai-boot" target="_blank" rel="noopener nofollow">youlai-boot</a>ï¸±<a href="https://gitee.com/youlaiorg/vue-uniapp-template" target="_blank" rel="noopener nofollow">vue-uniapp-template</a><br>
ğŸŒº ä»“åº“ä¸»é¡µï¼š <a href="https://gitcode.com/org/youlai" target="_blank" rel="noopener nofollow">GitCode</a>ï¸± <a href="https://gitee.com/haoxr" target="_blank" rel="noopener nofollow">Gitee</a>  ï¸± <a href="https://github.com/haoxianrui" target="_blank" rel="noopener nofollow">Github</a><br>
ğŸ’– æ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­è¯„è®º ğŸ“ å¦‚æœ‰é”™è¯¯æ•¬è¯·çº æ­£ï¼</p>
</blockquote>
<p>å¼€å±€ä¸€å¼ å›¾ï¼Œå…ˆçœ‹ä¸€ä¸‹åˆæœŸç™»å½•çš„æ•ˆæœå›¾ï¼Œå†…å®¹å’ŒUIæ­£åœ¨å‡çº§ä¸­...<br>
<img src="https://i-blog.csdnimg.cn/direct/2c0eaeaa15134517a77b7a1689388537.gif#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä½¿ç”¨ VSCode å’Œ vue-cli æ„å»ºä¸€ä¸ªåŸºäº Vue3 å’Œ TypeScript çš„ UniApp è·¨å¹³å°ç§»åŠ¨ç«¯å¼€æºè„šæ‰‹æ¶æ¨¡æ¿ã€‚é€šè¿‡è¯¦å°½çš„æ­¥éª¤è®²è§£ï¼Œä»ç¯å¢ƒé…ç½®åˆ°é¡¹ç›®éƒ¨ç½²ï¼Œå…¨é¢è¦†ç›–ç§»åŠ¨ç«¯å¼€å‘çš„å…³é”®ç¯èŠ‚ã€‚</p>
<h2 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h2>
<p><a href="https://gitee.com/youlaiorg/vue-uniapp-template" target="_blank" rel="noopener nofollow">vue-uniapp-template</a>  æ˜¯ä¸€ä¸ªé€šè¿‡ <code>vue-cli </code> æ„å»ºçš„è·¨ç§»åŠ¨ç«¯è„šæ‰‹æ¶æ¨¡æ¿ï¼Œç»“åˆäº† <code>uniapp</code>ã€<code>vue3 </code>å’Œ <code>typescript</code>ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡ä»¥ä¸‹ç¯å¢ƒã€‚å¦‚æœç¯å¢ƒå‡†å¤‡OKï¼Œè¯·å¿½ç•¥æœ¬èŠ‚ã€‚</p>
<h3 id="å®‰è£…-node">å®‰è£… Node</h3>
<blockquote>
<p><code>Node.js</code> æ˜¯è¿è¡Œ JavaScript ä»£ç çš„ç¯å¢ƒï¼Œä¹Ÿæ˜¯ <code>npm</code> åŒ…ç®¡ç†å™¨çš„ä¾èµ–ã€‚</p>
</blockquote>
<p>æ‰“å¼€ <a href="https://nodejs.org/zh-cn/download/prebuilt-installer" target="_blank" rel="noopener nofollow">Node.js å®˜æ–¹ä¸‹è½½é¡µé¢</a>ï¼Œæ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œ<strong>æ¨èå®‰è£… LTS ç‰ˆæœ¬</strong>ï¼Œè¿™æ˜¯é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒï¼Œæ¯”å¦‚è¿™é‡Œé€‰æ‹© <code>v20.18.0(LTS) </code> ç‰ˆæœ¬ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024220508312.png" alt="" loading="lazy"></p>
<p>ä¸‹è½½ä¹‹åï¼ŒåŒå‡»å®‰è£…åŒ…æ ¹æ®æç¤ºå®‰è£…ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦æˆåŠŸå®‰è£…ï¼š</p>
<pre><code class="language-bash">node -v
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024224347056.png" alt="" loading="lazy"></p>
<h3 id="å®‰è£…-vscode">å®‰è£… VSCode</h3>
<blockquote>
<p><code>VSCode</code> æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„ä»£ç ç¼–è¾‘å™¨ï¼Œç‰¹åˆ«é€‚åˆå‰ç«¯å¼€å‘ã€‚</p>
</blockquote>
<p>è®¿é—® <a href="https://code.visualstudio.com/" target="_blank" rel="noopener nofollow">Visual Studio Code å®˜æ–¹ç½‘ç«™</a> ,æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„ <code>VSCode</code> ,ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£…ç¨‹åºå¹¶æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…ã€‚</p>
<h3 id="å®‰è£…-vue-cli">å®‰è£… vue-cli</h3>
<blockquote>
<p><code>Vue CLI</code> æ˜¯ Vue.js çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œèƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºã€å¼€å‘ã€æ„å»º Vue.js é¡¹ç›®ã€‚</p>
</blockquote>
<p>æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦, ä½¿ç”¨ <code>npm</code> å…¨å±€å®‰è£… <code>Vue CLI</code>ï¼š</p>
<pre><code>npm install -g @vue/cli
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥ <code>Vue CLI</code> æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="language-bash">vue --version
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024213719105.png" alt="" loading="lazy"></p>
<h2 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h2>
<h3 id="åˆå§‹åŒ–é¡¹ç›®">åˆå§‹åŒ–é¡¹ç›®</h3>
<p>æŒ‰ç…§ <a href="https://uniapp.dcloud.net.cn/quickstart-cli.html#%E5%88%9B%E5%BB%BAuni-app" target="_blank" rel="noopener nofollow">uni-app å®˜æ–¹æ–‡æ¡£</a> çš„æ­¥éª¤ï¼Œé€šè¿‡ <code>vue-cli</code> åˆ›å»º <code>uni-app</code> + <code>vue</code> + <code>typescript</code> è„šæ‰‹æ¶ï¼š</p>
<pre><code class="language-bash">npx degit dcloudio/uni-preset-vue#vite-ts vue-uniapp-template
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917083025350.png" alt="" loading="lazy"></p>
<p>å¦‚æœä½¿ç”¨å‘½ä»¤åˆ›å»ºå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡ Gitee ä¸‹è½½ ZIP åŒ…ï¼š<a href="https://gitee.com/dcloud/uni-preset-vue/tree/vite-ts" target="_blank" rel="noopener nofollow">vite-ts åˆ†æ”¯</a>ã€‚</p>
<h3 id="é…ç½®ç¼–è¯‘å™¨">é…ç½®ç¼–è¯‘å™¨</h3>
<p>é»˜è®¤ç”Ÿæˆçš„ <code>TypeScript </code> ç¼–è¯‘å™¨é…ç½®æ–‡ä»¶ <code>tsconfig.json</code> ä¸­ç»§æ‰¿çš„ <code>@vue/tsconfig/tsconfig.json</code> æ–‡ä»¶ä¸å­˜åœ¨ã€‚å› æ­¤ï¼Œä½ éœ€è¦ç§»é™¤æ­¤ç»§æ‰¿é…ç½®å¹¶æ·»åŠ ç›¸åº”çš„ç¼–è¯‘è®¾ç½®ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240923143412332.png" alt="" loading="lazy"></p>
<p>æ ¹æ® <a href="https://www.typescriptlang.org/tsconfig/" target="_blank" rel="noopener nofollow">TypeScript å®˜æ–¹é…ç½®æ–‡æ¡£</a>ï¼Œè°ƒæ•´åçš„å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-json">{
  "compilerOptions": {
    "module": "esnext",
    "moduleResolution": "node",
    "target": "esnext",
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,

    "sourceMap": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "lib": ["esnext", "dom"],
    "types": ["@dcloudio/types"]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"],
  "exclude": ["node_modules", "dist"]
}
</code></pre>
<ul>
<li><code>"module": "esnext"</code>: æŒ‡å®šæ¨¡å—ç³»ç»Ÿä¸º <code>ESNext</code>ï¼Œå³æœ€æ–°çš„ ECMAScript æ¨¡å—ç³»ç»Ÿï¼Œæ”¯æŒ <code>import.meta</code> å’Œå…¶ä»–æœ€æ–°çš„ç‰¹æ€§ã€‚</li>
<li><code>"moduleResolution": "node"</code>: æ¨¡å—è§£æç­–ç•¥ï¼Œé€šå¸¸è®¾ç½®ä¸º <code>Node</code> ä»¥æ”¯æŒ Node.js é£æ ¼çš„æ¨¡å—è§£æã€‚</li>
<li><code>"target": "esnext"</code>: å°†ç›®æ ‡ JavaScript ç‰ˆæœ¬è®¾ç½®ä¸º <code>ESNext</code>ï¼Œç¼–è¯‘è¾“å‡ºç°ä»£æµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒçš„æœ€æ–°ç‰¹æ€§ä»£ç ã€‚</li>
<li><code>"allowJs": true</code>: å…è®¸ TypeScript ç¼–è¯‘å™¨å¤„ç† <code>.js</code> æ–‡ä»¶ï¼Œæ··åˆä½¿ç”¨ TypeScript å’Œ JavaScript æ–‡ä»¶ã€‚</li>
<li><code>"skipLibCheck": true</code>: è·³è¿‡åº“æ–‡ä»¶çš„ç±»å‹æ£€æŸ¥ï¼Œæå‡ç¼–è¯‘é€Ÿåº¦ã€‚</li>
<li><code>"strict": true</code> : å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹ã€‚</li>
</ul>
<h3 id="å¯åŠ¨é¡¹ç›®">å¯åŠ¨é¡¹ç›®</h3>
<p>åˆ›å»ºå®Œæˆåï¼Œä½¿ç”¨ <code>VSCode</code> æ‰“å¼€é¡¹ç›®å¹¶å¯åŠ¨ï¼š</p>
<pre><code class="language-bash"># å®‰è£…ä¾èµ–
pnpm install
# å¯åŠ¨é¡¹ç›®
pnpm run dev:h5
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917085244593.png" alt="" loading="lazy"></p>
<p>é¡¹ç›®å¯åŠ¨åï¼Œè®¿é—® <a href="http://localhost:5173" target="_blank" rel="noopener nofollow">http://localhost:5173</a> é¢„è§ˆæ•ˆæœï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917085841605.png" alt="" loading="lazy"></p>
<h2 id="ä»£ç è§„èŒƒé…ç½®">ä»£ç è§„èŒƒé…ç½®</h2>
<p>ä¸ºäº†ä¿è¯é¡¹ç›®ä»£ç çš„è§„èŒƒæ€§å’Œä¸€è‡´æ€§ï¼Œå¯ä»¥ä¸ºé¡¹ç›®é…ç½® <code>ESLint</code>ã€<code>Stylelint</code>ã€<code>Prettier</code> ä»¥åŠ <code>Husky</code>ï¼Œä»è€Œç¡®ä¿ä»£ç è´¨é‡å’Œå¼€å‘æµç¨‹çš„ä¸€è‡´æ€§ã€‚</p>
<h3 id="é›†æˆ-eslint">é›†æˆ ESLint</h3>
<p><code>ESLint</code> æ˜¯ä¸€æ¬¾ JavaScript å’Œ TypeScript çš„ä»£ç è§„èŒƒå·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘å›¢é˜Ÿä¿æŒä»£ç é£æ ¼ä¸€è‡´å¹¶å‡å°‘å¸¸è§é”™è¯¯ã€‚</p>
<p><strong>ESLint ä¸­æ–‡ç½‘</strong>ï¼š<a href="https://eslint.nodejs.cn/" target="_blank" rel="noopener nofollow">https://eslint.nodejs.cn/</a></p>
<h4 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h4>
<p>VSCode æ’ä»¶å¸‚åœºæœç´¢ ESLint æ’ä»¶å¹¶å®‰è£…</p>
<p><img src="https://s2.loli.net/2023/04/17/C3mV14KT2vHo6ZA.png" alt="" loading="lazy"></p>
<h4 id="é…ç½®-eslint">é…ç½® ESLint</h4>
<p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿç”Ÿæˆ ESLint é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-bash">npx eslint --init
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917202516052.png" alt="" loading="lazy"></p>
<p>æ‰§è¡Œè¯¥å‘½ä»¤åï¼ŒESLint ä¼šé€šè¿‡äº¤äº’å¼é—®é¢˜çš„æ–¹å¼ï¼Œå¸®åŠ©ç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚é’ˆå¯¹ 9.x ç‰ˆæœ¬ï¼Œé»˜è®¤ä¼šç”ŸæˆåŸºäº Flat Config æ ¼å¼çš„ <code>eslint.config.mjs</code> æ–‡ä»¶ï¼Œä¸ä¹‹å‰çš„ <code>.eslintrc</code> æ ¼å¼æœ‰æ‰€ä¸åŒã€‚</p>
<p>é»˜è®¤ç”Ÿæˆçš„ <code>eslint.config.mjs</code> æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917221647303.png" alt="" loading="lazy"></p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®çš„éœ€æ±‚è¿›è¡Œä¸€äº›å®šåˆ¶åŒ–é…ç½®ï¼Œä¾‹å¦‚æ·»åŠ å¿½ç•¥è§„åˆ™æˆ–è‡ªå®šä¹‰çš„ç‰¹æ®Šè§„åˆ™ã€‚</p>
<pre><code class="language-js">import globals from "globals"; // å…¨å±€å˜é‡é…ç½®
import pluginJs from "@eslint/js"; // JavaScript çš„æ¨èé…ç½®
import tseslint from "typescript-eslint"; // TypeScript é…ç½®
import pluginVue from "eslint-plugin-vue"; // Vue é…ç½®

export default [
  {files: ["**/*.{js,mjs,cjs,ts,vue}"]}, // æ ¡éªŒçš„æ–‡ä»¶ç±»å‹
  {languageOptions: { globals: {...globals.browser , ...globals.node} }}, // æµè§ˆå™¨/Nodeç¯å¢ƒå…¨å±€å˜é‡
  pluginJs.configs.recommended, // JavaScript æ¨èé…ç½®
  ...tseslint.configs.recommended, // TypeScript æ¨èé…ç½®
  ...pluginVue.configs["flat/essential"], // Vue æ¨èé…ç½®
  { files: ["**/*.vue"], languageOptions: { parserOptions: { parser: tseslint.parser } } }, // å¯¹ .vue æ–‡ä»¶ä½¿ç”¨ TypeScript è§£æå™¨
  
  // æ·»åŠ å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•
  {
    ignores: [
      "/dist",
      "/public",
      "/node_modules",
      "**/*.min.js",
      "**/*.config.mjs",
      "**/*.tsbuildinfo",
      "/src/manifest.json",
    ]
  },

  // è‡ªå®šä¹‰è§„åˆ™
  {
    rules: {
      quotes: ["error", "double"], // å¼ºåˆ¶ä½¿ç”¨åŒå¼•å·
      "quote-props": ["error", "always"], // å¼ºåˆ¶å¯¹è±¡çš„å±æ€§åä½¿ç”¨å¼•å·
      semi: ["error", "always"], // è¦æ±‚ä½¿ç”¨åˆ†å·
      indent: ["error", 2], // ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›
      "no-multiple-empty-lines": ["error", { max: 1 }], // ä¸å…è®¸å¤šä¸ªç©ºè¡Œ
      "no-trailing-spaces": "error", // ä¸å…è®¸è¡Œå°¾æœ‰ç©ºæ ¼

      // TypeScript è§„åˆ™
      "@typescript-eslint/no-explicit-any": "off", // ç¦ç”¨ no-explicit-any è§„åˆ™ï¼Œå…è®¸ä½¿ç”¨ any ç±»å‹
      "@typescript-eslint/explicit-function-return-type": "off", // ä¸å¼ºåˆ¶è¦æ±‚å‡½æ•°å¿…é¡»æ˜ç¡®è¿”å›ç±»å‹
      "@typescript-eslint/no-empty-interface": "off", // ç¦ç”¨ no-empty-interface è§„åˆ™ï¼Œå…è®¸ç©ºæ¥å£å£°æ˜
      "@typescript-eslint/no-empty-object-type": "off", // å…è®¸ç©ºå¯¹è±¡ç±»å‹

      // Vue è§„åˆ™
      "vue/multi-word-component-names": "off", // å…³é—­å¤šå•è¯ç»„ä»¶åç§°çš„é™åˆ¶
      "vue/html-indent": ["error", 2], // Vue æ¨¡æ¿ä¸­çš„ HTML ç¼©è¿›ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼
      "vue/no-v-html": "off", // å…è®¸ä½¿ç”¨ v-html (æ ¹æ®å®é™…é¡¹ç›®éœ€è¦)
    },
  },
];
</code></pre>
<h4 id="æ·»åŠ -eslint-è„šæœ¬">æ·»åŠ  ESLint è„šæœ¬</h4>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ ESLintï¼Œå¯ä»¥åœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>lint</code> è„šæœ¬å‘½ä»¤ï¼š</p>
<pre><code class="language-json">{
  "scripts": {
    "lint:eslint": "eslint --fix ./src"
  }
}
</code></pre>
<p>æ­¤è„šæœ¬ä¼šè‡ªåŠ¨ä¿®å¤ç¬¦åˆ ESLint è§„åˆ™çš„ä»£ç é—®é¢˜ï¼Œå¹¶è¾“å‡ºæ£€æŸ¥ç»“æœã€‚</p>
<h4 id="æµ‹è¯•æ•ˆæœ">æµ‹è¯•æ•ˆæœ</h4>
<p>åœ¨ <code>App.vue</code> æ–‡ä»¶ä¸­å£°æ˜ä¸€ä¸ªæœªä½¿ç”¨çš„å˜é‡ï¼Œå¹¶è¿è¡Œ <code>pnpm run lint:eslint</code>ï¼Œå¯ä»¥çœ‹åˆ° ESLint æç¤ºè¯¥å˜é‡æœªä½¿ç”¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240917235501951.png" alt="" loading="lazy"></p>
<h4 id="æ¨èé…ç½®">æ¨èé…ç½®</h4>
<p>å®‰è£… Vue æ–‡ä»¶è§£æå™¨ <code>vue-eslint-parser</code>ï¼š</p>
<pre><code class="language-bash">pnpm add -D vue-eslint-parser
</code></pre>
<p>é’ˆå¯¹ä¸åŒæ–‡ä»¶é…ç½®æ’ä»¶å’Œè§£æå™¨ï¼š</p>
<pre><code class="language-javascript">// eslint.config.mjs
import globals from "globals";
import js from "@eslint/js";

// ESLint æ ¸å¿ƒæ’ä»¶
import pluginVue from "eslint-plugin-vue";
import pluginTypeScript from "@typescript-eslint/eslint-plugin";

// Prettier æ’ä»¶åŠé…ç½®
import configPrettier from "eslint-config-prettier";
import pluginPrettier from "eslint-plugin-prettier";

// è§£æå™¨
import * as parserVue from "vue-eslint-parser";
import * as parserTypeScript from "@typescript-eslint/parser";

// å®šä¹‰ ESLint é…ç½®
export default [
  // é€šç”¨ JavaScript/TypeScript é…ç½®
  {
    ...js.configs.recommended,
    ignores: [
      "/dist",
      "/public",
      "/node_modules",
      "**/*.min.js",
      "**/*.config.mjs",
      "**/*.tsbuildinfo",
      "/src/manifest.json",
    ],
    languageOptions: {
      globals: {
        ...globals.browser, // æµè§ˆå™¨å˜é‡ (window, document ç­‰)
        ...globals.node, // Node.js å˜é‡ (process, require ç­‰)
      },
    },
    plugins: {
      prettier: pluginPrettier,
    },
    rules: {
      ...configPrettier.rules,
      ...pluginPrettier.configs.recommended.rules,
      "no-debug": "off", // å…è®¸ä½¿ç”¨ debugger
      "prettier/prettier": [
        "error",
        {
          endOfLine: "auto", // è§£å†³æ¢è¡Œç¬¦å†²çª
        },
      ],
    },
  },

  // TypeScript é…ç½®
  {
    files: ["**/*.?([cm])ts"],
    languageOptions: {
      parser: parserTypeScript,
      parserOptions: {
        sourceType: "module",
      },
    },
    plugins: {
      "@typescript-eslint": pluginTypeScript,
    },
    rules: {
      ...pluginTypeScript.configs.recommended.rules,
      "@typescript-eslint/no-explicit-any": "off", // å…è®¸ä½¿ç”¨ any
      "@typescript-eslint/no-empty-function": "off", // å…è®¸ç©ºå‡½æ•°
      "@typescript-eslint/no-empty-object-type": "off", // å…è®¸ç©ºå¯¹è±¡ç±»å‹
      "@typescript-eslint/consistent-type-imports": [
        "error",
        { disallowTypeAnnotations: false, fixStyle: "inline-type-imports" },
      ], // ç»Ÿä¸€ç±»å‹å¯¼å…¥é£æ ¼
    },
  },

  // TypeScript å£°æ˜æ–‡ä»¶çš„ç‰¹æ®Šé…ç½®
  {
    files: ["**/*.d.ts"],
    rules: {
      "eslint-comments/no-unlimited-disable": "off", // å…³é—­ eslint æ³¨é‡Šç›¸å…³è§„åˆ™
      "unused-imports/no-unused-vars": "off", // å¿½ç•¥æœªä½¿ç”¨çš„å¯¼å…¥
    },
  },

  // JavaScript (commonjs) é…ç½®
  {
    files: ["**/*.?([cm])js"],
    rules: {
      "@typescript-eslint/no-var-requires": "off", // å…è®¸ require
    },
  },

  // Vue æ–‡ä»¶é…ç½®
  {
    files: ["**/*.vue"],
    languageOptions: {
      parser: parserVue,
      parserOptions: {
        parser: "@typescript-eslint/parser",
        sourceType: "module",
      },
    },
    plugins: {
      vue: pluginVue,
    },
    processor: pluginVue.processors[".vue"],
    rules: {
      ...pluginVue.configs["vue3-recommended"].rules,
      "vue/no-v-html": "off", // å…è®¸ v-html
      "vue/require-default-prop": "off", // å…è®¸æ²¡æœ‰é»˜è®¤å€¼çš„ prop
      "vue/multi-word-component-names": "off", // å…³é—­ç»„ä»¶åç§°å¤šè¯è¦æ±‚
      "vue/html-self-closing": [
        "error",
        {
          html: { void: "always", normal: "always", component: "always" },
          svg: "always",
          math: "always",
        },
      ], // è‡ªé—­åˆæ ‡ç­¾
    },
  },
];
</code></pre>
<h3 id="é›†æˆ-prettier">é›†æˆ Prettier</h3>
<p>Prettier æ˜¯ä¸€ä¸ªä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œèƒ½å¤Ÿå’Œ ESLint é…åˆä½¿ç”¨ï¼Œç¡®ä¿ä»£ç é£æ ¼ç»Ÿä¸€ã€‚</p>
<p><strong>prettier ä¸­æ–‡ç½‘</strong>ï¼š<a href="https://prettier.nodejs.cn/" target="_blank" rel="noopener nofollow">https://prettier.nodejs.cn/</a></p>
<h4 id="å®‰è£…æ’ä»¶-1">å®‰è£…æ’ä»¶</h4>
<p>VSCode æ’ä»¶å¸‚åœºæœç´¢ <code>Prettier - Code formatter</code> æ’ä»¶å®‰è£…</p>
<p><img src="https://s2.loli.net/2023/02/12/cBHDxNGzCaoeqvW.png" alt="" loading="lazy"></p>
<h4 id="å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–</h4>
<pre><code class="language-bash">pnpm install -D prettier eslint-config-prettier eslint-plugin-prettier 
</code></pre>
<ul>
<li>
<p><strong>prettier</strong>ï¼šä¸»è¦çš„ Prettier æ ¼å¼åŒ–åº“ã€‚</p>
</li>
<li>
<p><strong>eslint-plugin-prettier</strong>ï¼šå°† Prettier çš„è§„åˆ™ä½œä¸º ESLint çš„è§„åˆ™æ¥è¿è¡Œã€‚</p>
</li>
<li>
<p><strong>eslint-config-prettier</strong>ï¼šç¦ç”¨æ‰€æœ‰ä¸æ ¼å¼ç›¸å…³çš„ ESLint è§„åˆ™ï¼Œä»¥é¿å…å’Œ Prettier çš„å†²çªã€‚</p>
</li>
</ul>
<h4 id="é…ç½®-prettier">é…ç½® Prettier</h4>
<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ <code>prettier.config.mjs</code>ï¼Œæ·»åŠ å¸¸ç”¨è§„åˆ™ï¼š</p>
<pre><code class="language-js">export default {
  printWidth: 100, // æ¯è¡Œæœ€å¤šå­—ç¬¦æ•°é‡ï¼Œè¶…å‡ºæ¢è¡Œ(é»˜è®¤80)
  tabWidth: 2, // ç¼©è¿›ç©ºæ ¼æ•°ï¼Œé»˜è®¤2ä¸ªç©ºæ ¼
  useTabs: false, // æŒ‡å®šç¼©è¿›æ–¹å¼ï¼Œç©ºæ ¼æˆ–tabï¼Œé»˜è®¤falseï¼Œå³ä½¿ç”¨ç©ºæ ¼
  semi: true, // ä½¿ç”¨åˆ†å·
  singleQuote: false, // ä½¿ç”¨å•å¼•å· (true:å•å¼•å·;false:åŒå¼•å·)
  trailingComma: 'all', // æœ«å°¾ä½¿ç”¨é€—å·
};
</code></pre>
<h4 id="é…ç½®å¿½ç•¥æ–‡ä»¶">é…ç½®å¿½ç•¥æ–‡ä»¶</h4>
<p>é¡¹ç›®æ ¹ç›®å½•æ–°å»º <code>.prettierignore</code> æ–‡ä»¶æŒ‡å®š Prettier ä¸éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</p>
<pre><code class="language-bash"># .prettierignore
node_modules
dist
public
*.min.js
</code></pre>
<h4 id="æ·»åŠ æ ¼å¼åŒ–è„šæœ¬">æ·»åŠ æ ¼å¼åŒ–è„šæœ¬</h4>
<p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="language-json">{
  "scripts": {
    "format": "prettier --write ./src"
  }
}
</code></pre>
<h4 id="ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–">ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–</h4>
<p>æ‰“å¼€ VSCode çš„ <code>File</code> â†’ <code>Preferences</code> â†’ <code>Settings</code>ï¼Œç„¶åé€‰æ‹© <code>Open Settings (JSON)</code>ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®</p>
<pre><code class="language-json">{
  "editor.formatOnSave": true, // ä¿å­˜æ ¼å¼åŒ–æ–‡ä»¶
  "editor.defaultFormatter": "esbenp.prettier-vscode" // æŒ‡å®š prettier ä¸ºæ‰€æœ‰æ–‡ä»¶é»˜è®¤æ ¼å¼åŒ–å™¨
}
</code></pre>
<h4 id="æµ‹è¯•">æµ‹è¯•</h4>
<p>ä¸‹å›¾æ¼”ç¤ºäº†ä¿å­˜æ—¶çš„è‡ªåŠ¨æ ¼å¼åŒ–æ•ˆæœï¼Œå±•ç¤ºäº†ä»£ç ä¸­å¼•å·å’Œæ¢è¡Œçš„è‡ªåŠ¨è°ƒæ•´ï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/PixPin_2024-09-18_15-45-29.gif" alt="" loading="lazy"></p>
<h3 id="é›†æˆ-stylelint">é›†æˆ Stylelint</h3>
<p>Stylelint ä¸€ä¸ªå¼ºå¤§çš„ CSS linter(æ£€æŸ¥å™¨)ï¼Œå¯å¸®åŠ©æ‚¨é¿å…é”™è¯¯å¹¶å¼ºåˆ¶æ‰§è¡Œçº¦å®šã€‚</p>
<p><strong>Stylelint å®˜ç½‘</strong>ï¼š<a href="https://stylelint.io/" target="_blank" rel="noopener nofollow">https://stylelint.io/</a></p>
<h4 id="å®‰è£…æ’ä»¶-2">å®‰è£…æ’ä»¶</h4>
<p>VSCode æ’ä»¶æœç´¢ <code>Stylelint</code> å¹¶å®‰è£…</p>
<p><img src="https://s2.loli.net/2023/04/08/azfOTp4K12c3PvQ.png" alt="" loading="lazy"></p>
<h4 id="å®‰è£…ä¾èµ–-1">å®‰è£…ä¾èµ–</h4>
<pre><code class="language-bash">pnpm install -D postcss postcss-html postcss-scss stylelint stylelint-config-recommended stylelint-config-recommended-scss stylelint-config-recommended-vue stylelint-config-recess-order stylelint-config-html stylelint-prettier
</code></pre>
<table>
<thead>
<tr>
<th>ä¾èµ–</th>
<th>è¯´æ˜</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>postcss</td>
<td>CSS è§£æå·¥å…·ï¼Œå…è®¸ä½¿ç”¨ç°ä»£ CSS è¯­æ³•å¹¶å°†å…¶è½¬æ¢ä¸ºå…¼å®¹çš„æ—§è¯­æ³•</td>
<td></td>
</tr>
<tr>
<td>postcss-html</td>
<td>è§£æ HTML (ç±»ä¼¼ HTML) çš„ PostCSS è¯­æ³•</td>
<td><a href="https://github.com/gucong3000/postcss-html" target="_blank" rel="noopener nofollow">postcss-html æ–‡æ¡£</a></td>
</tr>
<tr>
<td>postcss-scss</td>
<td>PostCSS çš„ SCSS è§£æå™¨</td>
<td><a href="https://github.com/postcss/postcss-scss" target="_blank" rel="noopener nofollow">postcss-scss æ–‡æ¡£</a>ï¼Œæ”¯æŒ CSS è¡Œç±»æ³¨é‡Š</td>
</tr>
<tr>
<td>stylelint</td>
<td>stylelint æ ¸å¿ƒåº“</td>
<td><a href="https://stylelint.io/" target="_blank" rel="noopener nofollow">stylelint </a></td>
</tr>
<tr>
<td>stylelint-config-standard</td>
<td>Stylelint æ ‡å‡†å…±äº«é…ç½®</td>
<td><a href="https://github.com/stylelint/stylelint-config-standard" target="_blank" rel="noopener nofollow">stylelint-config-standard æ–‡æ¡£</a></td>
</tr>
<tr>
<td>stylelint-config-recommended</td>
<td></td>
<td></td>
</tr>
<tr>
<td>stylelint-config-recommended-scss</td>
<td>æ‰©å±• stylelint-config-recommended å…±äº«é…ç½®å¹¶ä¸º SCSS é…ç½®å…¶è§„åˆ™</td>
<td><a href="https://github.com/stylelint-scss/stylelint-config-recommended-scss" target="_blank" rel="noopener nofollow">stylelint-config-recommended-scss æ–‡æ¡£</a></td>
</tr>
<tr>
<td>stylelint-config-recommended-vue</td>
<td>æ‰©å±• stylelint-config-recommended å…±äº«é…ç½®å¹¶ä¸º Vue é…ç½®å…¶è§„åˆ™</td>
<td><a href="https://github.com/ota-meshi/stylelint-config-recommended-vue" target="_blank" rel="noopener nofollow">stylelint-config-recommended-vue æ–‡æ¡£</a></td>
</tr>
<tr>
<td>stylelint-config-recess-order</td>
<td>æä¾›ä¼˜åŒ–æ ·å¼é¡ºåºçš„é…ç½®</td>
<td><a href="https://jingyan.baidu.com/article/647f0115cf48957f2148a8a3.html" target="_blank" rel="noopener nofollow">CSS ä¹¦å†™é¡ºåºè§„èŒƒ</a></td>
</tr>
<tr>
<td>stylelint-config-html</td>
<td>å…±äº« HTML (ç±»ä¼¼ HTML) é…ç½®ï¼Œæ†ç»‘ postcss-html å¹¶å¯¹å…¶è¿›è¡Œé…ç½®</td>
<td><a href="https://github.com/ota-meshi/stylelint-config-html" target="_blank" rel="noopener nofollow">stylelint-config-html æ–‡æ¡£</a></td>
</tr>
<tr>
<td>stylelint-prettier</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="é…ç½®-stylelint">é…ç½® Stylelint</h4>
<p>æ ¹ç›®å½•æ–°å»º <code>.stylelintrc.cjs</code> æ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="language-javascript">{
  "extends": [
    "stylelint-config-recommended",
    "stylelint-config-recommended-scss",
    "stylelint-config-recommended-vue/scss",
    "stylelint-config-html/vue",
    "stylelint-config-recess-order"
  ],
  "plugins": ["stylelint-prettier"],
  "overrides": [
    {
      "files": ["**/*.{vue,html}"],
      "customSyntax": "postcss-html"
    },
    {
      "files": ["**/*.{css,scss}"],
      "customSyntax": "postcss-scss"
    }
  ],

  "rules": {
    "import-notation": "string",
    "selector-class-pattern": null,
    "custom-property-pattern": null,
    "keyframes-name-pattern": null,
    "no-descending-specificity": null,
    "no-empty-source": null,
    "selector-pseudo-class-no-unknown": [
      true,
      {
        "ignorePseudoClasses": ["global", "export", "deep"]
      }
    ],
       "unit-no-unknown": [true, {
      "ignoreUnits": ["rpx"]
    }]   
    "property-no-unknown": [
      true,
      {
        "ignoreProperties": []
      }
    ],
    "at-rule-no-unknown": [
      true,
      {
        "ignoreAtRules": ["apply", "use", "forward"]
      }
    ]
  }
}
</code></pre>
<h4 id="é…ç½®å¿½ç•¥æ–‡ä»¶-1">é…ç½®å¿½ç•¥æ–‡ä»¶</h4>
<p>æ ¹ç›®å½•åˆ›å»º .stylelintignore æ–‡ä»¶ï¼Œé…ç½®å¿½ç•¥æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code class="language-basic">*.min.js
dist
public
node_modules
</code></pre>
<h4 id="æ·»åŠ -stylelint-è„šæœ¬">æ·»åŠ  Stylelint è„šæœ¬</h4>
<p>package.json æ·»åŠ  Stylelint æ£€æµ‹æŒ‡ä»¤ï¼š</p>
<pre><code class="language-json">  "scripts": {
      "lint:stylelint": "stylelint  \"**/*.{css,scss,vue,html}\" --fix"
  }
</code></pre>
<h4 id="ä¿å­˜è‡ªåŠ¨ä¿®å¤">ä¿å­˜è‡ªåŠ¨ä¿®å¤</h4>
<p>é¡¹ç›®æ ¹ç›®å½•ä¸‹<code>.vscode/settings.json</code> æ–‡ä»¶æ·»åŠ é…ç½®ï¼š</p>
<pre><code class="language-json">{
  "editor.codeActionsOnSave": {
    "source.fixAll.stylelint": true 
  },
  "stylelint.validate": ["css", "scss", "vue", "html"]
}
</code></pre>
<p>ä¸ºäº†éªŒè¯æŠŠå°ºå¯¸å±æ€§ width æ”¾ç½®åœ¨å®šä½å±æ€§ position å‰é¢ï¼Œæ ¹æ® <a href="https://jingyan.baidu.com/article/647f0115cf48957f2148a8a3.html" target="_blank" rel="noopener nofollow">CSS ä¹¦å†™é¡ºåºè§„èŒƒ</a> æ¨æ–­æ˜¯ä¸ç¬¦åˆè§„èŒƒçš„ï¼Œåœ¨ä¿å­˜æ—¶ Stylelint è‡ªåŠ¨å°†å±æ€§é‡æ–°æ’åºï¼Œè¾¾åˆ°é¢„æœŸã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/PixPin_2024-09-18_20-39-04.gif" alt="" loading="lazy"></p>
<h4 id="æµ‹è¯•-1">æµ‹è¯•</h4>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ£€æµ‹</p>
<pre><code class="language-bash">npm run lint:stylelint
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240918203537608.png" alt="" loading="lazy"></p>
<h2 id="gitæäº¤è§„èŒƒé…ç½®">Gitæäº¤è§„èŒƒé…ç½®</h2>
<p>é…ç½® Husky çš„ <code>pre-commit</code> å’Œ <code>commit-msg</code> é’©å­ï¼Œå®ç°ä»£ç æäº¤çš„è‡ªåŠ¨åŒ–æ£€æŸ¥å’Œè§„èŒƒåŒ–ã€‚</p>
<ul>
<li><strong>pre-commit</strong>: ä½¿ç”¨ Husky + Lint-stagedï¼Œåœ¨æäº¤å‰è¿›è¡Œä»£ç è§„èŒƒæ£€æµ‹å’Œæ ¼å¼åŒ–ã€‚ç¡®ä¿é¡¹ç›®å·²é…ç½® ESLintã€Prettier å’Œ Stylelintã€‚</li>
<li><strong>commit-msg</strong>: ç»“åˆ Huskyã€Commitlintã€Commitizen å’Œ cz-gitï¼Œç”Ÿæˆè§„èŒƒåŒ–ä¸”è‡ªå®šä¹‰çš„ Git commit ä¿¡æ¯ã€‚</li>
</ul>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919150854229.png" alt="" loading="lazy"></p>
<h3 id="é›†æˆ-husky">é›†æˆ Husky</h3>
<p>Husky æ˜¯ Git é’©å­å·¥å…·ï¼Œå¯ä»¥è®¾ç½®åœ¨ git å„ä¸ªé˜¶æ®µï¼ˆ<code>pre-commit</code>ã€<code>commit-msg</code> ç­‰ï¼‰è§¦å‘ã€‚</p>
<p><strong>Huskyå®˜ç½‘</strong>ï¼š<a href="https://typicode.github.io/husky/zh/get-started.html" target="_blank" rel="noopener nofollow">https://typicode.github.io</a></p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919094059492.png" alt="" loading="lazy"></p>
<h4 id="å®‰è£…ä¾èµ–-2">å®‰è£…ä¾èµ–</h4>
<pre><code class="language-bash">pnpm add -D husky
</code></pre>
<h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4>
<p><code>init</code> å‘½ä»¤ç®€åŒ–äº†é¡¹ç›®ä¸­çš„ husky è®¾ç½®ã€‚å®ƒä¼šåœ¨ <code>.husky/</code> ä¸­åˆ›å»º <code>pre-commit</code> è„šæœ¬ï¼Œå¹¶æ›´æ–° <code>package.json</code> ä¸­çš„ <code>prepare</code> è„šæœ¬ã€‚</p>
<pre><code class="language-bash">pnpm exec husky init
</code></pre>
<h4 id="æµ‹è¯•-2">æµ‹è¯•</h4>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919100633078.png" alt="image-20240919100633078" loading="lazy"></p>
<p>é€šè¿‡ <code>pre-commit</code> é’©å­ï¼Œå¯ä»¥è‡ªåŠ¨è¿è¡Œå„ç§ä»£ç æ£€æŸ¥å·¥å…·ï¼Œåœ¨æäº¤ä»£ç å‰å¼ºåˆ¶æ‰§è¡Œä»£ç è´¨é‡å’Œæ ·å¼æ£€æŸ¥ã€‚å¸¸è§çš„å·¥å…·åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><code>eslint</code></strong>ï¼šç”¨äºæ£€æŸ¥å’Œä¿®å¤ JavaScript/TypeScript ä»£ç ä¸­çš„é—®é¢˜ã€‚</li>
<li><strong><code>stylelint</code></strong>ï¼šç”¨äºæ£€æµ‹å’Œä¿®å¤ CSS/SCSS æ ·å¼é—®é¢˜ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œé›†æˆ <strong><code>lint-staged</code></strong> å’Œ <strong><code>commitlint</code></strong> æ¥è¿›ä¸€æ­¥å®Œå–„å¼€å‘ä½“éªŒã€‚</p>
<h3 id="é›†æˆ-lint-staged">é›†æˆ lint-staged</h3>
<p><code>lint-staged</code> æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œä¸“é—¨ç”¨äºåªå¯¹ Git æš‚å­˜åŒºçš„æ–‡ä»¶è¿è¡Œ lint æˆ–å…¶ä»–ä»»åŠ¡ï¼Œç¡®ä¿åªæ£€æŸ¥å’Œä¿®å¤è¢«ä¿®æ”¹æˆ–æ–°å¢çš„ä»£ç éƒ¨åˆ†ï¼Œè€Œä¸ä¼šå½±å“æ•´ä¸ªä»£ç åº“ã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—æå‡æ•ˆç‡ï¼Œå°¤å…¶æ˜¯å¯¹äºå¤§å‹é¡¹ç›®ã€‚</p>
<h4 id="å®‰è£…ä¾èµ–-3">å®‰è£…ä¾èµ–</h4>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… <code>lint-staged</code>ï¼š</p>
<pre><code class="language-json">pnpm add -D lint-staged
</code></pre>
<h4 id="é…ç½®-lint-staged">é…ç½® lint-staged</h4>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>lint-staged</code> é…ç½®ï¼Œç¡®ä¿åœ¨ <code>pre-commit</code> é˜¶æ®µè‡ªåŠ¨æ£€æµ‹æš‚å­˜çš„æ–‡ä»¶ï¼š</p>
<pre><code class="language-json">{
  "name": "vue-uniapp-template",
  "version": "0.0.0",
  "lint-staged": {
    "*.{js,ts}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{cjs,json}": [
      "prettier --write"
    ],
    "*.{vue,html}": [
      "eslint --fix",
      "prettier --write",
      "stylelint --fix"
    ],
    "*.{scss,css}": [
      "stylelint --fix",
      "prettier --write"
    ],
    "*.md": [
      "prettier --write"
    ]
  }
}
</code></pre>
<p>åœ¨ <code>package.json</code> çš„ <code>scripts</code> éƒ¨åˆ†ä¸­ï¼Œæ·»åŠ ç”¨äºè¿è¡Œ <code>lint-staged</code> çš„å‘½ä»¤ï¼š</p>
<pre><code class="language-json">"scripts": {
   "lint:lint-staged": "lint-staged"
}
</code></pre>
<h4 id="æ·»åŠ -husky-é’©å­">æ·»åŠ  Husky é’©å­</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>.husky/pre-commit</code> ä¸­æ·»åŠ ä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿åœ¨æäº¤ä»£ç å‰æ‰§è¡Œ <code>lint-staged</code>ï¼š</p>
<pre><code class="language-bash">pnpm run lint:lint-staged
</code></pre>
<h4 id="æµ‹è¯•-3">æµ‹è¯•</h4>
<p>æäº¤ä»£ç æ—¶ï¼Œ<code>lint-staged</code> ä¼šè‡ªåŠ¨å¯¹æš‚å­˜çš„æ–‡ä»¶è¿è¡Œç›¸åº”çš„ lint ä»»åŠ¡ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919112617112.png" alt="" loading="lazy"></p>
<p>é€šè¿‡è¿™ç§é›†æˆæ–¹å¼ï¼Œç¡®ä¿ä»£ç åœ¨æäº¤å‰ç»è¿‡è‡ªåŠ¨æ ¼å¼åŒ–å’Œæ ¡éªŒï¼Œæé«˜ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ã€‚</p>
<h3 id="é›†æˆ-commitlint">é›†æˆ Commitlint</h3>
<p><code>commitlint</code> ç”¨äºæ£€æŸ¥ Git æäº¤ä¿¡æ¯æ˜¯å¦ç¬¦åˆç‰¹å®šè§„èŒƒï¼ˆå¦‚ Angular æäº¤è§„èŒƒï¼‰ï¼Œä»è€Œä¿è¯æäº¤ä¿¡æ¯çš„ä¸€è‡´æ€§ã€‚</p>
<p><strong>Commitlintå®˜ç½‘</strong>ï¼š<a href="https://commitlint.js.org/" target="_blank" rel="noopener nofollow">https://commitlint.js.org/</a></p>
<h4 id="å®‰è£…ä¾èµ–-4">å®‰è£…ä¾èµ–</h4>
<pre><code class="language-bash">pnpm add -D  @commitlint/cli @commitlint/config-conventional
</code></pre>
<h4 id="é…ç½®-commitlint">é…ç½® Commitlint</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>commitlint.config.cjs</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹æ¥å¯ç”¨ Angular è§„èŒƒï¼š</p>
<pre><code class="language-json">module.exports = {
  // ç»§æ‰¿çš„è§„åˆ™
  extends: ["@commitlint/config-conventional"],
  // è‡ªå®šä¹‰è§„åˆ™
  rules: {
    // æäº¤ç±»å‹æšä¸¾ï¼Œgitæäº¤typeå¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ @see https://commitlint.js.org/#/reference-rules
    "type-enum": [
      2,
      "always",
      [
        "feat", // æ–°å¢åŠŸèƒ½
        "fix", // ä¿®å¤ç¼ºé™·
        "docs", // æ–‡æ¡£å˜æ›´
        "style", // ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰
        "refactor", // ä»£ç é‡æ„ï¼ˆä¸åŒ…æ‹¬ bug ä¿®å¤ã€åŠŸèƒ½æ–°å¢ï¼‰
        "perf", // æ€§èƒ½ä¼˜åŒ–
        "test", // æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨
        "build", // æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹ webpack é…ç½®ç­‰ï¼‰
        "ci", // ä¿®æ”¹ CI é…ç½®ã€è„šæœ¬
        "revert", // å›æ»š commit
        "chore", // å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼ˆä¸å½±å“æºæ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹ï¼‰
      ],
    ],
    "subject-case": [0], // subjectå¤§å°å†™ä¸åšæ ¡éªŒ
  },
};
</code></pre>
<h4 id="æ·»åŠ -husky-é’©å­-1">æ·»åŠ  Husky é’©å­</h4>
<p>å°† <code>commitlint</code> ä¸ Husky é›†æˆï¼Œåœ¨ <code>.husky/commit-msg</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œç¡®ä¿æäº¤ä¿¡æ¯ç¬¦åˆè§„èŒƒï¼š</p>
<pre><code class="language-bash">npx --no-install commitlint --edit $1
</code></pre>
<h4 id="æµ‹è¯•-4">æµ‹è¯•</h4>
<p>æ ¹æ® Angular çš„æäº¤è§„èŒƒï¼Œæäº¤ä¿¡æ¯ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li><strong>ç±»å‹</strong>ï¼šè¡¨ç¤ºæœ¬æ¬¡æäº¤çš„ç±»å‹ï¼Œä¾‹å¦‚ <code>feat</code> (æ–°åŠŸèƒ½)ã€<code>fix</code> (ä¿®å¤ bug)ã€<code>docs</code> (æ–‡æ¡£æ›´æ–°)ã€‚</li>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼ˆå¯é€‰ï¼‰ï¼šè¯´æ˜æœ¬æ¬¡æäº¤å½±å“çš„æ¨¡å—ï¼Œä¾‹å¦‚ <code>auth</code>ã€<code>ui</code>ã€‚</li>
<li><strong>ç®€çŸ­æè¿°</strong>ï¼šç®€æ´æ˜äº†çš„æäº¤æè¿°ï¼Œé™å®šåœ¨ 50 å­—ç¬¦ä»¥å†…ã€‚</li>
</ol>
<p>å½“ä½ å°è¯•æäº¤ä¸ç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯æ—¶ï¼Œæäº¤ä¼šè¢«é˜»æ­¢ï¼Œå¹¶æ˜¾ç¤ºç›¸å…³é”™è¯¯æç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919134921181.png" alt="" loading="lazy"></p>
<h3 id="é›†æˆ-commitizen--å’Œ--cz-git">é›†æˆ Commitizen  å’Œ  cz-git</h3>
<ul>
<li>
<p><strong>commitizen</strong>:  æ˜¯ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…ä»¥æ ‡å‡†åŒ–æ ¼å¼ç”Ÿæˆæäº¤ä¿¡æ¯çš„å·¥å…·ã€‚--<a href="https://commitizen.github.io/cz-cli/" target="_blank" rel="noopener nofollow">Commitizen å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><strong>cz-git</strong>: <code>cz-git</code> æ˜¯ <code>Commitizen</code> çš„é€‚é…å™¨ä¹‹ä¸€ï¼Œå®ƒåŸºäº <code>Commitizen</code>ï¼Œæä¾›äº†æ›´å¤šè‡ªå®šä¹‰åŠŸèƒ½å’Œå¢å¼ºçš„äº¤äº’ä½“éªŒã€‚--<a href="https://cz-git.qbb.sh/zh/" target="_blank" rel="noopener nofollow">cz-git å®˜æ–¹æ–‡æ¡£</a></p>
</li>
</ul>
<h4 id="å®‰è£…ä¾èµ–-5">å®‰è£…ä¾èµ–</h4>
<pre><code class="language-bash">pnpm add -D commitizen cz-git
</code></pre>
<h4 id="é…ç½®-cz-git">é…ç½® cz-git</h4>
<p>åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ– <code>Commitizen</code>ï¼Œå¹¶é…ç½®ä½¿ç”¨ <code>cz-git</code> ä½œä¸ºé€‚é…å™¨ã€‚åœ¨ <code>package.json</code> ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-json">"config": {
    "commitizen": {
        "path": "node_modules/cz-git"
    }
}
</code></pre>
<p>åœ¨<code>commitlint</code> çš„é…ç½®æ–‡ä»¶ <code>commitlint.config.cjs</code> ä¸­æ·»åŠ é…ç½®ï¼Œcommitlint é…ç½®æ¨¡æ¿ï¼š<a href="https://cz-git.qbb.sh/zh/config/" target="_blank" rel="noopener nofollow">https://cz-git.qbb.sh/zh/config/</a></p>
<pre><code class="language-javascript">module.exports = {
  // ç»§æ‰¿çš„è§„åˆ™
  extends: ["@commitlint/config-conventional"],
  // è‡ªå®šä¹‰è§„åˆ™
  rules: {
    // ...
  },
  // cz-git é…ç½®
  prompt: {
    messages: {
      type: "é€‰æ‹©ä½ è¦æäº¤çš„ç±»å‹ :",
      scope: "é€‰æ‹©ä¸€ä¸ªæäº¤èŒƒå›´ï¼ˆå¯é€‰ï¼‰:",
      customScope: "è¯·è¾“å…¥è‡ªå®šä¹‰çš„æäº¤èŒƒå›´ :",
      subject: "å¡«å†™ç®€çŸ­ç²¾ç‚¼çš„å˜æ›´æè¿° :\n",
      body: 'å¡«å†™æ›´åŠ è¯¦ç»†çš„å˜æ›´æè¿°ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      breaking: 'åˆ—ä¸¾éå…¼å®¹æ€§é‡å¤§çš„å˜æ›´ï¼ˆå¯é€‰ï¼‰ã€‚ä½¿ç”¨ "|" æ¢è¡Œ :\n',
      footerPrefixesSelect: "é€‰æ‹©å…³è”issueå‰ç¼€ï¼ˆå¯é€‰ï¼‰:",
      customFooterPrefix: "è¾“å…¥è‡ªå®šä¹‰issueå‰ç¼€ :",
      footer: "åˆ—ä¸¾å…³è”issue (å¯é€‰) ä¾‹å¦‚: #31, #I3244 :\n",
      generatingByAI: "æ­£åœ¨é€šè¿‡ AI ç”Ÿæˆä½ çš„æäº¤ç®€çŸ­æè¿°...",
      generatedSelectByAI: "é€‰æ‹©ä¸€ä¸ª AI ç”Ÿæˆçš„ç®€çŸ­æè¿°:",
      confirmCommit: "æ˜¯å¦æäº¤æˆ–ä¿®æ”¹commit ?",
    },
    // prettier-ignore
    types: [
        { value: "feat",     name: "ç‰¹æ€§:     âœ¨  æ–°å¢åŠŸèƒ½", emoji: ":sparkles:" },
        { value: "fix",      name: "ä¿®å¤:     ğŸ›  ä¿®å¤ç¼ºé™·", emoji: ":bug:" },
        { value: "docs",     name: "æ–‡æ¡£:     ğŸ“  æ–‡æ¡£å˜æ›´", emoji: ":memo:" },
        { value: "style",    name: "æ ¼å¼:     ğŸ’„  ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ†å·ç­‰æ ¼å¼ä¿®æ­£ï¼‰", emoji: ":lipstick:" },
        { value: "refactor", name: "é‡æ„:     â™»ï¸  ä»£ç é‡æ„ï¼ˆä¸åŒ…æ‹¬ bug ä¿®å¤ã€åŠŸèƒ½æ–°å¢ï¼‰", emoji: ":recycle:" },
        { value: "perf",     name: "æ€§èƒ½:     âš¡ï¸  æ€§èƒ½ä¼˜åŒ–", emoji: ":zap:" },
        { value: "test",     name: "æµ‹è¯•:     âœ…  æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨", emoji: ":white_check_mark:"},
        { value: "build",    name: "æ„å»º:     ğŸ“¦ï¸  æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹ vite é…ç½®ç­‰ï¼‰", emoji: ":package:"},
        { value: "ci",       name: "é›†æˆ:     ğŸ¡  ä¿®æ”¹ CI é…ç½®ã€è„šæœ¬",  emoji: ":ferris_wheel:"},
        { value: "revert",   name: "å›é€€:     âªï¸  å›æ»š commit",emoji: ":rewind:"},
        { value: "chore",    name: "å…¶ä»–:     ğŸ”¨  å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“çš„æ›´æ”¹ï¼ˆä¸å½±å“æºæ–‡ä»¶ã€æµ‹è¯•ç”¨ä¾‹ï¼‰", emoji: ":hammer:"},
      ],
    useEmoji: true,
    emojiAlign: "center",
    useAI: false,
    aiNumber: 1,
    themeColorCode: "",
    scopes: [],
    allowCustomScopes: true,
    allowEmptyScopes: true,
    customScopesAlign: "bottom",
    customScopesAlias: "custom",
    emptyScopesAlias: "empty",
    upperCaseSubject: false,
    markBreakingChangeMode: false,
    allowBreakingChanges: ["feat", "fix"],
    breaklineNumber: 100,
    breaklineChar: "|",
    skipQuestions: [],
    issuePrefixes: [{ value: "closed", name: "closed:   ISSUES has been processed" }],
    customIssuePrefixAlign: "top",
    emptyIssuePrefixAlias: "skip",
    customIssuePrefixAlias: "custom",
    allowCustomIssuePrefix: true,
    allowEmptyIssuePrefix: true,
    confirmColorize: true,
    maxHeaderLength: Infinity,
    maxSubjectLength: Infinity,
    minSubjectLength: 0,
    scopeOverrides: undefined,
    defaultBody: "",
    defaultIssues: "",
    defaultScope: "",
    defaultSubject: "",
  },
};

</code></pre>
<h4 id="æ·»åŠ -cz-git-è„šæœ¬">æ·»åŠ  cz-git è„šæœ¬</h4>
<p>åœ¨<code>package.json</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>commit</code> è„šæœ¬å‘½ä»¤</p>
<pre><code class="language-json"> "scripts": {
     "commit": "git-cz"
 }
</code></pre>
<h4 id="æµ‹è¯•-5">æµ‹è¯•</h4>
<p>æ‰§è¡Œ <code>pnpm run commit</code> å‘½ä»¤åï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥ç›¸å…³ä¿¡æ¯ï¼Œæœ€ç»ˆç”Ÿæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240919150854229.png" alt="" loading="lazy"></p>
<h2 id="æ•´åˆ-sass">æ•´åˆ Sass</h2>
<p><strong>Sass</strong>æ˜¯å¸®åŠ©å¼€å‘è€…ç¼–å†™ã€ç®¡ç†å’Œç»´æŠ¤æ ·å¼çš„å¼ºå¤§å·¥å…·ï¼Œé€šè¿‡ <code>&lt;style lang="scss"&gt;</code> ä½¿ç”¨ã€‚å®ƒæä¾›å˜é‡ã€åµŒå¥—ã€æ··åˆç­‰åŠŸèƒ½ï¼Œæå‡äº†æ ·å¼çš„å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ï¼Œå°¤å…¶åœ¨å¤æ‚é¡¹ç›®ä¸­å‡å°‘é‡å¤ä»£ç ã€æé«˜å¤ç”¨æ€§ã€‚</p>
<pre><code>pnpm add -D sass sass-loader
</code></pre>
<h2 id="æ•´åˆ-unocss">æ•´åˆ UnoCSS</h2>
<p>UnoCSS æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€çµæ´»ä¸”æŒ‰éœ€ç”Ÿæˆçš„åŸå­åŒ– CSS å¼•æ“ã€‚</p>
<p><strong>å®˜æ–¹ç½‘ç«™</strong>ï¼š<a href="https://unocss.net/" target="_blank" rel="noopener nofollow">https://unocss.net/</a></p>
<p>å…ˆæ¯”è¾ƒä¸‹</p>
<table>
<thead>
<tr>
<th>å†…éƒ¨æ ·å¼</th>
<th>UnoCSSåŸå­æ ·å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920174025912.png" alt="" loading="lazy"></td>
<td><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920174419861.png" alt="image-20240920174419861" loading="lazy"></td>
</tr>
</tbody>
</table>
<h3 id="å®‰è£…æ’ä»¶-3">å®‰è£…æ’ä»¶</h3>
<p><code>VSCode</code> å®‰è£… <code>UnoCSS</code> æ’ä»¶</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920114534560.png" alt="VSCodeå®‰è£…UnoCSSæ’ä»¶" loading="lazy"></p>
<h3 id="å®‰è£…ä¾èµ–-6">å®‰è£…ä¾èµ–</h3>
<p>æœ¬æ¬¡æ•´åˆåŸºäºå®˜ç½‘æä¾›çš„ç¤¾åŒºé¢„è®¾ <a href="https://github.com/MellowCo/unocss-preset-weapp" target="_blank" rel="noopener nofollow">unocss-preset-weapp</a>ã€‚è¯¥é¢„è®¾å†…ç½®äº† <code>transformer</code>ï¼Œç”¨äºè§£å†³å°ç¨‹åºçš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920093428222.png" alt="UnoCSS æ•´åˆ" loading="lazy"></p>
<p>è¿›ä¸€æ­¥å‚è€ƒ <a href="https://github.com/MellowCo/unocss-preset-weapp/blob/main/examples/uniapp_vue3/README.md" target="_blank" rel="noopener nofollow">unocss-preset-weapp çš„ uniapp_vue3 ä½¿ç”¨ä¸é…ç½®æŒ‡å—</a>ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… UnoCSS å’Œ <code>unocss-preset-weapp</code>ï¼š</p>
<pre><code class="language-bash">pnpm add -D unocss unocss-preset-weapp
</code></pre>
<h3 id="é…ç½®-unocss">é…ç½® UnoCSS</h3>
<p>å‚è€ƒ <a href="https://github.com/MellowCo/unocss-preset-weapp/blob/main/examples/uniapp_vue3/README.md" target="_blank" rel="noopener nofollow">unocss-preset-weapp çš„ uniapp_vue3 ä½¿ç”¨ä¸é…ç½®æŒ‡å—</a>ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><strong>vite.config.ts</strong></p>
<blockquote>
<p>åœ¨ <code>vite.config.ts</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œæ•´åˆ UnoCSS åˆ° UniApp é¡¹ç›®ï¼š</p>
</blockquote>
<pre><code class="language-bash">import { defineConfig } from 'vite'
import uni from '@dcloudio/vite-plugin-uni'

export default defineConfig(async () =&gt; {
  const UnoCss = await import('unocss/vite').then(i =&gt; i.default)

  return {
    plugins: [
      uni(),
      // é…ç½® UnoCSS
      UnoCss(),
    ],
  }
})
</code></pre>
</li>
<li>
<p><strong>unocss.config.ts</strong></p>
<blockquote>
<p>æ·»åŠ unocss.config.tsæ–‡ä»¶ï¼Œæ­é… <a href="https://marketplace.visualstudio.com/items?itemName=antfu.unocss" target="_blank" rel="noopener nofollow">unocss vscode</a> æ’ä»¶ï¼Œæ™ºèƒ½æç¤º</p>
</blockquote>
<pre><code class="language-typescript">import presetWeapp from "unocss-preset-weapp";
import { extractorAttributify, transformerClass } from "unocss-preset-weapp/transformer";

const { presetWeappAttributify, transformerAttributify } = extractorAttributify();

export default {
  presets: [
    // https://github.com/MellowCo/unocss-preset-weapp
    presetWeapp(),
    // attributify autocomplete
    presetWeappAttributify(),
  ],
  shortcuts: [
    {
      "flex-center": "flex justify-center items-center",
      "flex-col": "flex flex-col",
    },
  ],

  transformers: [
    // https://github.com/MellowCo/unocss-preset-weapp/tree/main/src/transformer/transformerAttributify
    transformerAttributify(),

    // https://github.com/MellowCo/unocss-preset-weapp/tree/main/src/transformer/transformerClass
    transformerClass(),
  ],
};

</code></pre>
</li>
</ul>
<p>â€‹		<strong><code>shortcuts</code> è‡ªå®šä¹‰æ ·å¼ç»„åˆ</strong>ï¼šå¯ä»¥åœ¨ <code>shortcuts</code> ä¸­å®šä¹‰å¸¸ç”¨çš„æ ·å¼ç»„åˆï¼Œä»¥ä¾¿ç®€åŒ–é¡¹ç›®ä¸­çš„æ ·å¼ä½¿ç”¨å’Œç»´æŠ¤ï¼Œé¿å…å†—ä½™å’Œé‡å¤çš„æ ·å¼ã€‚</p>
<ul>
<li>
<p><strong>main.ts</strong></p>
<pre><code>import 'uno.css'
</code></pre>
</li>
</ul>
<h3 id="æµ‹è¯•-6">æµ‹è¯•</h3>
<p>ä¸‹å›¾å±•ç¤ºäº†åœ¨ VSCode ä¸­æµ‹è¯• UnoCSS æ—¶ï¼Œæ™ºèƒ½æç¤ºå’Œæ ·å¼è®¾ç½®åŠŸèƒ½å·²ç»æ­£å¸¸ç”Ÿæ•ˆã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920123246893.png" alt="img" loading="lazy"></p>
<p>æ­¤å¤–ï¼Œåœ¨ <code>unocss.config.ts</code> æ–‡ä»¶ä¸­é¢„è®¾çš„ <code>shortcuts</code> ç»„åˆæ ·å¼ä¹Ÿå¾—åˆ°äº†æ­£ç¡®åº”ç”¨ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240920175138557.png" alt="image-20240920175138557" loading="lazy"></p>
<h2 id="æ·»åŠ -tabbar">æ·»åŠ  TabBar</h2>
<p>åœ¨ APP å¼€å‘ä¸­ï¼Œåº•éƒ¨å¯¼èˆªæ ï¼ˆTabBarï¼‰æ˜¯ç§»åŠ¨ç«¯åº”ç”¨çš„é‡è¦éƒ¨åˆ†ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸åŒé¡µé¢é—´è¿›è¡Œåˆ‡æ¢ã€‚</p>
<h3 id="æ·»åŠ é¡µé¢">æ·»åŠ é¡µé¢</h3>
<p>åœ¨åˆå§‹åŒ–çš„æ¨¡æ¿é¡¹ç›®ä¸­ï¼Œ<code>src/pages</code> ç›®å½•ä¸‹é»˜è®¤æœ‰ä¸€ä¸ª <code>index/index.vue</code> é¡µé¢ã€‚ä¸ºäº†æ›´å¥½åœ°æ¼”ç¤º <code>TabBar</code> çš„åˆ‡æ¢æ•ˆæœï¼Œæˆ‘ä»¬åœ¨ <code>pages</code> ç›®å½•ä¸‹å†æ–°å¢ä¸¤ä¸ªé¡µé¢ï¼š</p>
<ul>
<li>
<p><strong>å·¥ä½œå°é¡µé¢</strong>ï¼ˆ<code>src/pages/work/index.vue</code>ï¼‰ï¼š</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view class="flex-center flex-col"&gt;
    &lt;view&gt;
      &lt;text class="text-cyan font-bold text-lg"&gt;å·¥ä½œå°&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
</li>
<li>
<p><strong>æˆ‘çš„é¡µé¢</strong>ï¼ˆ<code>src/pages/my/index.vue</code>ï¼‰ï¼š</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view class="flex-center flex-col"&gt;
    &lt;view&gt;
      &lt;text class="text-blue font-bold text-lg"&gt;æˆ‘çš„&lt;/text&gt;
    &lt;/view&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
</li>
</ul>
<h3 id="æ·»åŠ å›¾æ ‡">æ·»åŠ å›¾æ ‡</h3>
<p>åœ¨ <code>src/static</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>tabbar</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ä» iconfont è·å–çš„å›¾æ ‡ã€‚æ¯ä¸ªå›¾æ ‡éƒ½éœ€è¦æœ‰æœªæ¿€æ´»å’Œæ¿€æ´»ä¸¤ç§çŠ¶æ€çš„æ ·å¼ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240923115902874.png" alt="" loading="lazy"></p>
<h3 id="é…ç½®-tabbar">é…ç½® TabBar</h3>
<p>åœ¨ UniApp é¡¹ç›®ä¸­ï¼Œåº•éƒ¨å¯¼èˆªæ ï¼ˆTabBarï¼‰é€šè¿‡é…ç½® <code>pages.json</code> æ–‡ä»¶æ¥å®ç°ã€‚é¦–å…ˆï¼Œæ‰¾åˆ°å¹¶æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>src/pages.json</code> æ–‡ä»¶ã€‚åœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªé¡µé¢é…ç½®å¯¼èˆªæ ï¼ŒåŒæ—¶å®šä¹‰ TabBarã€‚</p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„é…ç½®ç¤ºä¾‹ï¼Œæ³¨æ„ <code>tabBar</code> ä¸­çš„ <code>pagePath</code> å¿…é¡»å¯¹åº” <code>pages</code> ç›®å½•ä¸‹çš„å®é™…é¡µé¢è·¯å¾„ã€‚</p>
<pre><code class="language-json">{
  "pages": [
    {
      "path": "pages/index/index",
      "style": {
        "navigationBarTitleText": "é¦–é¡µ"
      }
    },
    {
      "path": "pages/work/index",
      "style": {
        "navigationBarTitleText": "å·¥ä½œå°"
      }
    },
    {
      "path": "pages/mine/index",
      "style": {
        "navigationBarTitleText": "æˆ‘çš„"
      }
    }
  ],
  "tabBar": {
    "color": "#474747",
    "selectedColor": "#3B8DFF",
    "backgroundColor": "#F8F8F8",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "é¦–é¡µ",
        "iconPath": "static/tabbar/home.png",
        "selectedIconPath": "static/tabbar/home-active.png"
      },
      {
        "pagePath": "pages/work/index",
        "text": "å·¥ä½œå°",
        "iconPath": "static/tabbar/work.png",
        "selectedIconPath": "static/tabbar/work-active.png"
      },
      {
        "pagePath": "pages/mine/index",
        "text": "æˆ‘çš„",
        "iconPath": "static/tabbar/mine.png",
        "selectedIconPath": "static/tabbar/mine-active.png"
      }
    ]
  }
}
</code></pre>
<h3 id="æµ‹è¯•-7">æµ‹è¯•</h3>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/PixPin_2024-09-20_18-36-33.gif" alt="" loading="lazy"></p>
<h2 id="æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥">æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥</h2>
<p>åœ¨ä¼ ç»Ÿçš„ Vue å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨æ¯ä¸ªé¡µé¢æ‰‹åŠ¨å¯¼å…¥ Vue ç»„åˆå¼ APIï¼ˆå¦‚ <code>ref</code>, <code>reactive</code>, <code>onMounted</code> ç­‰ï¼‰ã€‚éšç€é¡¹ç›®çš„å¢å¤§ï¼Œæ‰‹åŠ¨å¯¼å…¥ä¼šå¢åŠ ä»£ç çš„å†—ä½™åº¦ï¼Œé™ä½å¼€å‘ä½“éªŒã€‚</p>
<p>é€šè¿‡å¯¹æ¯”ï¼Œæ¥çœ‹ä¸€ä¸‹æ‰‹åŠ¨å¯¼å…¥ä¸æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥çš„åŒºåˆ«ï¼š</p>
<table>
<thead>
<tr>
<th>æ‰‹åŠ¨å¯¼å…¥</th>
<th>æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240921171309833.png" alt="æ‰‹åŠ¨å¯¼å…¥" loading="lazy"></td>
<td><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240921171422590.png" alt="æŒ‰éœ€å¯¼å…¥" loading="lazy"></td>
</tr>
</tbody>
</table>
<p><strong>æ‰‹åŠ¨å¯¼å…¥ï¼š</strong> æ¯ä¸ªé¡µé¢éƒ½éœ€è¦æ˜¾å¼åœ°å¼•å…¥ <code>ref</code>, <code>reactive</code>, <code>onMounted</code> ç­‰ç»„åˆå¼ APIã€‚<br>
<strong>æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥ï¼š</strong> é…ç½®äº†è‡ªåŠ¨å¯¼å…¥æ’ä»¶åï¼Œè¿™äº› API æ— éœ€æ˜¾å¼å¯¼å…¥å³å¯ç›´æ¥ä½¿ç”¨ï¼Œå‡å°‘äº†é‡å¤ä»£ç ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>ç”±äºå½“å‰è¿˜æœªæ•´åˆæŒ‰éœ€è‡ªåŠ¨å¯¼å…¥æ’ä»¶ï¼Œæ‰€ä»¥å³å›¾çš„ä»£ç ä»ç„¶æŠ¥é”™ï¼Œæç¤ºæœªæ‰¾åˆ° <code>ref</code> å’Œ <code>reactive</code> çš„å®šä¹‰ã€‚è¿™å±•ç¤ºäº†æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥çš„é‡è¦æ€§ï¼šä¸€æ—¦æ•´åˆæ’ä»¶ï¼Œè¿™ç±»é”™è¯¯å°†è¢«æ¶ˆé™¤ï¼Œä»£ç æ›´åŠ ç®€æ´æ˜“ç»´æŠ¤ã€‚</p>
<h3 id="å®‰è£…ä¾èµ–-7">å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… <code>unplugin-auto-import</code> æ’ä»¶ï¼š</p>
<pre><code class="language-bash">pnpm add -D unplugin-auto-import
</code></pre>
<h3 id="é…ç½®è‡ªåŠ¨å¯¼å…¥">é…ç½®è‡ªåŠ¨å¯¼å…¥</h3>
<p>æ¥ç€ï¼Œåœ¨ <code>vite.config.ts</code> ä¸­é…ç½® <code>unplugin-auto-import</code> æ’ä»¶ï¼Œç¡®ä¿ Vue å’Œ UniApp çš„ API èƒ½å¤Ÿè‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ã€‚</p>
<pre><code class="language-typescript">// vite.config.ts
import { defineConfig } from "vite";
import AutoImport from "unplugin-auto-import/vite";

export default defineConfig(async () =&gt; {
  return {
    plugins: [
      uni(), // è¿™é‡Œæ˜¯ä½ çš„ uni-app æ’ä»¶
      AutoImport({
        imports: ["vue", "uni-app"], // è‡ªåŠ¨å¯¼å…¥ Vue å’Œ UniApp çš„ API
        dts: "src/types/auto-imports.d.ts", // è‡ªåŠ¨ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶
        eslintrc: {
          enabled: true, // ç”Ÿæˆ ESLint é…ç½®æ–‡ä»¶
          filepath: './.eslintrc-auto-import.json', // ESLint é…ç½®æ–‡ä»¶è·¯å¾„
        },
      }),
    ],
  };
});
</code></pre>
<h3 id="é…ç½®-eslint-è§„åˆ™">é…ç½® ESLint è§„åˆ™</h3>
<p>ä¸ºäº†è®© ESLint èƒ½è¯†åˆ«è¿™äº›é€šè¿‡ <code>unplugin-auto-import</code> è‡ªåŠ¨å¯¼å…¥çš„ APIï¼Œéœ€è¦åœ¨ ESLint çš„é…ç½®ä¸­å¼•å…¥ <code>unplugin-auto-import</code> ç”Ÿæˆçš„ <code>.eslintrc-auto-import.json</code> æ–‡ä»¶ã€‚</p>
<p>åœ¨ ESLint 9.x ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ Flat Config æ—¶ä¸å†æ”¯æŒ <code>extends</code> å…³é”®å­—ã€‚å› æ­¤ï¼Œ<strong>ä¸èƒ½</strong>ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-typescript">// é”™è¯¯ç¤ºä¾‹
export default [
  {
    extends: ["./.eslintrc-auto-import.json"], // è¿™ç§æ‰©å±•æ–¹å¼åœ¨ Flat Config ä¸­ä¸å†æ”¯æŒ
  },
];
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240923123316040.png" alt="" loading="lazy"></p>
<p>å–è€Œä»£ä¹‹çš„æ˜¯ç›´æ¥å¼•å…¥ <code>.eslintrc-auto-import.json</code> æ–‡ä»¶å†…å®¹ï¼Œé€šè¿‡è§£ææ–‡ä»¶çš„æ–¹å¼å°†è‡ªåŠ¨å¯¼å…¥çš„å…¨å±€å˜é‡é…ç½®æ•´åˆè¿› ESLint é…ç½®ã€‚</p>
<p>åœ¨ <code>eslint.config.mjs</code> ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-typescript">// eslint.config.mjs æ­£ç¡®çš„é…ç½®
import { readFileSync } from "fs";
import { fileURLToPath } from "url";
import { dirname, resolve } from "path";

// åŠ¨æ€è¯»å– .eslintrc-auto-import.json æ–‡ä»¶å†…å®¹
const autoImportConfig = JSON.parse(
  readFileSync(
    resolve(dirname(fileURLToPath(import.meta.url)), ".eslintrc-auto-import.json"),
    "utf-8",
  ),
);
export default [
  {
   // è¯­è¨€é€‰é¡¹é…ç½®ï¼Œå®šä¹‰å…¨å±€å˜é‡
    languageOptions: {
      globals: {
      	// ...
        ...autoImportConfig.globals, // è‡ªåŠ¨å¯¼å…¥çš„å…¨å±€å˜é‡
      },
    },
  },
];
</code></pre>
<p>è¿™æ ·é…ç½®åï¼ŒESLint å°†èƒ½å¤Ÿè¯†åˆ«é€šè¿‡è‡ªåŠ¨å¯¼å…¥çš„ APIï¼Œé¿å…ä¾‹å¦‚ <code>'ref' is not defined</code> è¿™æ ·çš„é”™è¯¯ï¼Œä»è€Œä½¿é¡¹ç›®çš„å¼€å‘æ›´åŠ é¡ºç•…ã€‚</p>
<h3 id="æµ‹è¯•-8">æµ‹è¯•</h3>
<p>é€šè¿‡ä¸Šè¿°æ­¥éª¤é…ç½®åï¼ŒåŸå…ˆåœ¨æœªæ‰‹åŠ¨å¯¼å…¥æƒ…å†µä¸‹æŠ¥é”™çš„é¡µé¢ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ <code>ref</code>, <code>reactive</code> ç­‰ APIï¼Œè€Œæ— éœ€æ˜¾å¼å¯¼å…¥ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æœ€ç»ˆçš„æ•ˆæœï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240921182221737.png" alt="æŒ‰éœ€è‡ªåŠ¨å¯¼å…¥" loading="lazy"></p>
<p>æ•´åˆæŒ‰éœ€è‡ªåŠ¨å¯¼å…¥åï¼Œä½ å°†ä¸å†éœ€è¦åœ¨æ¯ä¸ªé¡µé¢æ˜¾å¼å¯¼å…¥ Vue æˆ– UniApp çš„ç»„åˆå¼ APIï¼Œå¤§å¹…åº¦å‡å°‘äº†é‡å¤çš„ä»£ç ï¼Œæå‡äº†å¼€å‘ä½“éªŒã€‚</p>
<h2 id="ç¯å¢ƒå˜é‡">ç¯å¢ƒå˜é‡</h2>
<blockquote>
<p>Vite ç¯å¢ƒå˜é‡ä¸»è¦æ˜¯ä¸ºäº†åŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ç¯å¢ƒçš„å˜é‡</p>
</blockquote>
<p>ä¸‹é¢çš„æ•´åˆè¿‡ç¨‹å‚è€ƒ <a href="https://cn.vitejs.dev/guide/env-and-mode.html" target="_blank" rel="noopener nofollow">Vite ç¯å¢ƒå˜é‡é…ç½®å®˜æ–¹æ–‡æ¡£ </a></p>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h3>
<p>é¡¹ç›®æ ¹ç›®å½•æ–°å»º <code>.env.development</code> ã€<code>.env.production</code></p>
<ul>
<li>
<p>å¼€å‘ç¯å¢ƒå˜é‡é…ç½®ï¼š.env.development</p>
<pre><code class="language-properties"># å˜é‡å¿…é¡»ä»¥ VITE_ ä¸ºå‰ç¼€æ‰èƒ½æš´éœ²ç»™å¤–éƒ¨è¯»å–

# é¡¹ç›®è¿è¡Œçš„ç«¯å£å·
VITE_APP_PORT = 5173

# API åŸºç¡€è·¯å¾„ï¼Œå¼€å‘ç¯å¢ƒä¸‹çš„è¯·æ±‚å‰ç¼€
VITE_APP_BASE_API = '/dev-api'

# API æœåŠ¡å™¨çš„ URL
VITE_APP_API_URL = https://api.youlai.tech
</code></pre>
</li>
<li>
<p>ç”Ÿäº§ç¯å¢ƒå˜é‡é…ç½®ï¼š.env.production</p>
<pre><code class="language-properties"># API åŸºç¡€è·¯å¾„ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹çš„è¯·æ±‚å‰ç¼€
VITE_APP_BASE_API = '/prod-api'

# API æœåŠ¡å™¨çš„ URL
VITE_APP_API_URL = https://api.youlai.tech
</code></pre>
</li>
</ul>
<h3 id="æ™ºèƒ½æç¤º">æ™ºèƒ½æç¤º</h3>
<p>é¦–å…ˆï¼Œåœ¨ <code>src/types/env.d.ts</code> æ–‡ä»¶ä¸­æ·»åŠ ç¯å¢ƒå˜é‡çš„ç±»å‹å£°æ˜ï¼š</p>
<pre><code class="language-typescript">// src/types/env.d.ts
interface ImportMetaEnv {
  /**
   * åº”ç”¨ç«¯å£
   */
  VITE_APP_PORT: number;
  /**
   * API åŸºç¡€è·¯å¾„
   */
  VITE_APP_BASE_API: string;
  /**
   * API æœåŠ¡å™¨çš„ URL
   */
  VITE_APP_API_URL: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
</code></pre>
<p>ç¡®ä¿ TypeScript ç¼–è¯‘å™¨ä½¿ç”¨çš„æ¨¡å—ç³»ç»Ÿæ”¯æŒ <code>import.meta</code>ã€‚åœ¨ <code>tsconfig.json</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®š <code>es2020</code>ã€<code>es2022</code> æˆ– <code>esnext</code> ç­‰æ¨¡å—ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-json">// tsconfig.json
{
  "compilerOptions": {
    "module": "esnext",  // æ”¯æŒ import.meta
    // ...
  }
}
</code></pre>
<p>åœ¨ä»»æ„é¡µé¢ä¸­æµ‹è¯• <code>import.meta</code> æ˜¯å¦èƒ½å¤Ÿæ™ºèƒ½æç¤ºç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="language-typescript">console.log(import.meta.env.VITE_APP_PORT);
</code></pre>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240923150054556.png" alt="" loading="lazy"></p>
<h2 id="æ•´åˆ-http-è¯·æ±‚">æ•´åˆ HTTP è¯·æ±‚</h2>
<p>é€šè¿‡ä¸€ä¸ªç™»å½•æ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•åœ¨Uniappä¸­æ•´åˆHTTPè¯·æ±‚ã€‚è¿™é‡Œæœªä½¿ç”¨<strong>axios</strong>å’Œ<strong>alova</strong>è¯·æ±‚åº“çš„åŸå› åœ¨äºï¼ŒUniappè‡ªèº«æä¾›äº†è·¨å¹³å°çš„<strong>uni.request</strong>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨ä¸åŒå¹³å°ï¼ˆå¦‚å°ç¨‹åºã€Appå’ŒH5ï¼‰ä¸‹è¡¨ç°ä¸€è‡´ï¼Œä¸”æ— éœ€é¢å¤–å®‰è£…ç¬¬ä¸‰æ–¹åº“ï¼Œä»è€Œå‡å°‘äº†é¡¹ç›®çš„ä¾èµ–å¤æ‚æ€§å’Œä½“ç§¯ã€‚</p>
<h3 id="å°è£…è¯·æ±‚å·¥å…·">å°è£…è¯·æ±‚å·¥å…·</h3>
<p>åœ¨ <code>global.d.ts</code> ä¸­å®šä¹‰å…¨å±€å“åº”æ•°æ®ç±»å‹ <code>ResponseData</code>ï¼š</p>
<pre><code class="language-typescript">// src/types/global.d.ts
declare global {
  /**
   * å“åº”æ•°æ®ç»“æ„
   */
  interface ResponseData&lt;T = any&gt; {
    code: string;  // ä¸šåŠ¡çŠ¶æ€ç 
    data: T;       // è¿”å›æ•°æ®
    msg: string;   // æ¶ˆæ¯
  }
}
export {};
</code></pre>
<p>åœ¨ <code>src/utils/request.ts</code> ä¸‹åˆ›å»ºä¸€ä¸ª HTTP è¯·æ±‚å·¥å…·ï¼Œç”¨äºä¸ API æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼š</p>
<pre><code class="language-typescript">// src/utils/request.ts
export default function request&lt;T&gt;(options: UniApp.RequestOptions): Promise&lt;T&gt; {
  const token = uni.getStorageSync("token"); // ä»æœ¬åœ°ç¼“å­˜è·å– token

  return new Promise((resolve, reject) =&gt; {
    uni.request({
      ...options,
      // VITE_APP_API_URL æ˜¯åœ¨ Vite é¡¹ç›®çš„ .env.development æ–‡ä»¶ä¸­é…ç½®çš„ç¯å¢ƒå˜é‡ï¼Œè¡¨ç¤º API çš„è·¯å¾„
      url: `${import.meta.env.VITE_APP_API_URL}${options.url}`,
      header: {
        ...options.header,
        Authorization: token,
      },
      success: (response) =&gt; {
        const resData = response.data as ResponseData&lt;T&gt;;
        // ä¸šåŠ¡çŠ¶æ€ç  00000 è¡¨ç¤ºæˆåŠŸ
        if (resData.code === "00000") {
          resolve(resData.data);
        } else {
          uni.showToast({
            title: resData.msg || "ä¸šåŠ¡å¤„ç†å¤±è´¥",
            icon: "none",
            duration: 2000,
          });
          reject({
            message: resData.msg || "ä¸šåŠ¡å¤„ç†å¤±è´¥",
            code: resData.code,
          });
        }
      },
      fail: (error) =&gt; {
        uni.showToast({
          title: "ç½‘ç»œè¯·æ±‚å¤±è´¥",
          icon: "none",
          duration: 2000,
        });
        reject({
          message: "ç½‘ç»œè¯·æ±‚å¤±è´¥",
          error,
        });
      },
    });
  });
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<p>å½“é¦–æ¬¡ä½¿ç”¨è¯¥è¯·æ±‚å·¥å…·ç±»æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç° <code>'uni' is not defined</code> çš„ ESLint é”™è¯¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240923124237153.png" alt="" loading="lazy"></p>
<p>ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œéœ€è¦åœ¨ ESLint é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ <code>uni</code> ä¸ºå…¨å±€å˜é‡ï¼š</p>
<pre><code class="language-javascript">// eslint.config.mjs
export default [
  {
   // è¯­è¨€é€‰é¡¹é…ç½®ï¼Œå®šä¹‰å…¨å±€å˜é‡
    languageOptions: {
      globals: {
        // ...
        ...{
          uni: "readonly", // uni-app å…¨å±€å¯¹è±¡
        },
      },
    },
  },
];
</code></pre>
<h3 id="ç™»å½•æ¥å£å®šä¹‰">ç™»å½•æ¥å£å®šä¹‰</h3>
<p><strong>è¯·æ±‚URL</strong>: <a href="https://api.youlai.tech/api/v1/auth/login" target="_blank" rel="noopener nofollow">https://api.youlai.tech/api/v1/auth/login</a></p>
<p><strong>è¯·æ±‚å‚æ•°ï¼š</strong></p>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>å‚æ•°å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>admin</td>
</tr>
<tr>
<td>password</td>
<td>123456</td>
</tr>
</tbody>
</table>
<p><strong>è¿”å›å“åº”ï¼š</strong></p>
<pre><code class="language-json">{
    "code": "00000",
    "data": {
        "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIxxx.xxxxxxx",
        "tokenType": "Bearer"
    },
    "msg": "ä¸€åˆ‡ok"
}
</code></pre>
<p>æ ¹æ®ä¸Šè¿°ç™»å½•æ¥å£ä¿¡æ¯ï¼Œåˆ›å»º <code>AuthAPI</code> ç±»ç”¨äºå¤„ç†ç™»å½•è¯·æ±‚ï¼š</p>
<pre><code class="language-typescript">import request from "@/utils/request";

const AuthAPI = {
  /**
   * ç™»å½•æ¥å£
   *
   * @param username ç”¨æˆ·å
   * @param password å¯†ç 
   * @returns è¿”å› token
   */
  login(username: string, password: string): Promise&lt;LoginResult&gt; {
    return request&lt;LoginResult&gt;({
      url: "/api/v1/auth/login",
      method: "POST",
      data: {
        username,
        password,
      },
      header: {
        "Content-Type": "application/x-www-form-urlencoded",
      },
    });
  },

  /**
   * ç™»å‡ºæ¥å£
   */
  logout(): Promise&lt;void&gt; {
    return request({
      url: "/api/v1/auth/logout",
      method: "DELETE",
    });
  },
};

export default AuthAPI;

/** ç™»å½•å“åº” */
export interface LoginResult {
  /** è®¿é—®token */
  accessToken?: string;
  /** token ç±»å‹ */
  tokenType?: string;
}

</code></pre>
<h3 id="ç™»å½•é¡µé¢">ç™»å½•é¡µé¢</h3>
<p>æ–°å»º <code>src/pages/login/index.vue</code> æ–‡ä»¶ï¼Œç¼–å†™ç™»å½•é¡µé¢åŠé€»è¾‘ï¼š</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view class="flex-col"&gt;
    &lt;input v-model="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" /&gt;
    &lt;input v-model="password" placeholder="è¯·è¾“å…¥å¯†ç " type="password" /&gt;
    &lt;button @click="handleLogin"&gt;ç™»å½•&lt;/button&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import AuthAPI, { LoginResult } from '@/api/auth';

const username = ref('');
const password = ref('');
const router = useRouter();

const handleLogin = async () =&gt; {
  try {
    const response: LoginResult = await AuthAPI.login(username.value, password.value);
    if (response.accessToken) {
      uni.setStorageSync('token', response.accessToken);
      uni.showToast({ title: 'ç™»å½•æˆåŠŸ', icon: 'success' });
    } else {
      uni.showToast({ title: 'ç™»å½•å¤±è´¥', icon: 'none' });
    }
  } catch (err) {
    uni.showToast({ title: 'ç™»å½•å¤±è´¥', icon: 'none' });
  }
};
&lt;/script&gt;

&lt;style scoped&gt;
&lt;/style&gt;
</code></pre>
<p>åœ¨ <code>pages.json</code> æ–‡ä»¶ä¸­ï¼Œå£°æ˜ç™»å½•é¡µé¢çš„è·¯ç”±ï¼š</p>
<pre><code class="language-json">// src/pages.json
{
  "pages": [
    {
      "path": "pages/login/index",
      "style": {
        "navigationBarTitleText": "ç™»å½•"
      }
    }
  ]
}
</code></pre>
<h3 id="ç™»å½•æµ‹è¯•">ç™»å½•æµ‹è¯•</h3>
<p>è®¿é—®ç™»å½•é¡µé¢ï¼š<a href="http://localhost:5173/#/pages/login/index%EF%BC%8C%E8%BE%93%E5%85%A5%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81" target="_blank" rel="noopener nofollow">http://localhost:5173/#/pages/login/indexï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </a> (<code>admin</code>/<code>123456</code>) æµ‹è¯•ç™»å½•æ¥å£ï¼Œç™»å½•æˆåŠŸåå¯ä»¥çœ‹åˆ°è¿”å›çš„è®¿é—®ä»¤ç‰Œã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/PixPin_2024-09-22_17-21-05.gif" alt="" loading="lazy"></p>
<h3 id="æ•´åˆæºç ">æ•´åˆæºç </h3>
<p>æ•´åˆ<code>HTTPè¯·æ±‚</code>ä»£ç ç‰ˆæœ¬ï¼š<a target="_blank">vue-uniapp-template#737f6a</a>ã€‚</p>
<h2 id="æ•´åˆ-pinia">æ•´åˆ Pinia</h2>
<blockquote>
<p>Pinia æ˜¯ Vue çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä¸“ä¸ºè·¨ç»„ä»¶æˆ–é¡µé¢å…±äº«çŠ¶æ€è®¾è®¡ã€‚</p>
</blockquote>
<ul>
<li>
<p><strong>Pinia å®˜æ–¹æ–‡æ¡£</strong>: <a href="https://pinia.vuejs.org/zh/getting-started.html" target="_blank" rel="noopener nofollow">https://pinia.vuejs.org/zh/getting-started.html</a></p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20240921102456261.png" alt="" loading="lazy"></p>
</li>
</ul>
<h3 id="å®‰è£…ä¾èµ–-8">å®‰è£…ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œå®‰è£… <code>pinia</code> ä¾èµ–ï¼š</p>
<pre><code class="language-bash">pnpm add pinia
</code></pre>
<h3 id="å…¨å±€æ³¨å†Œ">å…¨å±€æ³¨å†Œ</h3>
<p>åœ¨é¡¹ç›®çš„ <code>src</code> ç›®å½•ä¸‹åˆ›å»º <code>store</code> æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å»º <code>index.ts</code> æ–‡ä»¶ï¼Œåˆå§‹åŒ–å¹¶æ³¨å†Œ Pinia å®ä¾‹ã€‚</p>
<pre><code class="language-typescript">// src/store/index.ts
import type { App } from "vue";
import { createPinia } from "pinia";

const store = createPinia();
// æ³¨å†Œ Pinia
export function setupStore(app: App&lt;Element&gt;) {
  app.use(store); // å…¨å±€æ³¨å†Œ Pinia
}
</code></pre>
<p>æ¥ç€ï¼Œå°† <code>store</code> åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ <code>main.ts</code> ä¸­å¼•å…¥ï¼Œå¹¶å°†å…¶ä½œä¸ºå…¨å±€æ’ä»¶ä¼ é€’ç»™åº”ç”¨ï¼š</p>
<pre><code class="language-typescript">// src/main.ts
import { createSSRApp } from "vue";
import App from "./App.vue";

import { setupStore } from "@/store";

export function createApp() {
  const app = createSSRApp(App);
  // å…¨å±€æ³¨å†Œ store
  setupStore(app);

  return {
    app,
  };
}

</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ Pinia ç®¡ç†ç™»å½•çŠ¶æ€å’Œç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶åœ¨å¤šä¸ªé¡µé¢å…±äº«çŠ¶æ€ã€‚</p>
<h3 id="ç”¨æˆ·ä¿¡æ¯æ¥å£">ç”¨æˆ·ä¿¡æ¯æ¥å£</h3>
<p>ç¼–å†™ä¸€ä¸ª API æ¥è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼š</p>
<pre><code class="language-typescript">import request from "@/utils/request";

const USER_BASE_URL = "/api/v1/users";

const UserAPI = {
  /**
   * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
   *
   * @returns ç™»å½•ç”¨æˆ·æ˜µç§°ã€å¤´åƒä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²å’Œæƒé™
   */
  getUserInfo(): Promise&lt;UserInfo&gt; {
    return request&lt;UserInfo&gt;({
      url: `${USER_BASE_URL}/me`,
      method: "GET",
    });
  },
};
export default UserAPI;

/** ç™»å½•ç”¨æˆ·ä¿¡æ¯ */
export interface UserInfo {
  /** ç”¨æˆ·ID */
  userId?: number;

  /** ç”¨æˆ·å */
  username?: string;

  /** æ˜µç§° */
  nickname?: string;

  /** å¤´åƒURL */
  avatar?: string;

  /** è§’è‰² */
  roles: string[];

  /** æƒé™ */
  perms: string[];
}
</code></pre>
<h3 id="ç”¨æˆ·çŠ¶æ€ç®¡ç†">ç”¨æˆ·çŠ¶æ€ç®¡ç†</h3>
<p>é€šè¿‡ Pinia å®šä¹‰ <code>user</code> æ¨¡å—ï¼Œç®¡ç†ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</p>
<pre><code class="language-typescript">//  src/store/module/user.ts
import { defineStore } from "pinia";
import AuthAPI from "@/api/auth";
import UserAPI, { UserInfo } from "@/api/user";

export const useUserStore = defineStore("user", () =&gt; {
  // ç¡®ä¿ token æ˜¯å“åº”å¼çš„
  const token = ref&lt;string&gt;(uni.getStorageSync("token") || "");
  const userInfo = ref&lt;UserInfo | null&gt;(null);

  // ç™»å½•
  const login = async (username: string, password: string) =&gt; {
    const { tokenType, accessToken } = await AuthAPI.login(username, password);
    token.value = `${tokenType} ${accessToken}`; // Bearer token
    uni.setStorageSync("token", token.value);
  };

  // è·å–ç”¨æˆ·ä¿¡æ¯
  const getUserInfo = async () =&gt; {
    const info = await UserAPI.getUserInfo();
    userInfo.value = info;
  };

  // ç™»å‡º
  const logout = async () =&gt; {
    await AuthAPI.logout();
    userInfo.value = null;
    token.value = ""; // æ¸…ç©º token
    uni.removeStorageSync("token"); // ä»æœ¬åœ°ç¼“å­˜ç§»é™¤ token
  };

  return {
    token,
    userInfo,
    login,
    logout,
    getUserInfo,
  };
});
</code></pre>
<h3 id="ä¸ªäººä¸­å¿ƒé¡µé¢">ä¸ªäººä¸­å¿ƒé¡µé¢</h3>
<p>ä¸ªäººä¸­å¿ƒé¡µé¢å±•ç¤ºç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°ï¼Œæœªç™»å½•æ—¶å¼•å¯¼ç”¨æˆ·å»ç™»å½•ã€‚</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view class="flex-center flex-col"&gt;
    &lt;text class="text-blue font-bold text-lg"&gt;æˆ‘çš„&lt;/text&gt;

    &lt;!-- åˆ¤æ–­æ˜¯å¦å·²ç™»å½• --&gt;
    &lt;template v-if="isLoggedIn"&gt;
      &lt;image :src="userInfo?.avatar" class="w100 h100 mb-5 rounded-full" /&gt;
      &lt;text class="text-lg font-bold"&gt;{{ userInfo?.nickname }}&lt;/text&gt;
      &lt;button @click="handleLogout" class="mt-5"&gt;é€€å‡ºç™»å½•&lt;/button&gt;
    &lt;/template&gt;

    &lt;!-- æœªç™»å½•æ—¶æ˜¾ç¤ºå»ç™»å½•æŒ‰é’® --&gt;
    &lt;template v-else&gt;
      &lt;text&gt;æ‚¨è¿˜æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•&lt;/text&gt;
      &lt;button @click="goToLoginPage" class="mt-5"&gt;å»ç™»å½•&lt;/button&gt;
    &lt;/template&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { useUserStore } from "@/store/modules/user";

// ä½¿ç”¨ pinia
const userStore = useUserStore();

const isLoggedIn = computed(() =&gt; userStore.token);
const userInfo = computed(() =&gt; userStore.userInfo);

// è·³è½¬åˆ°ç™»å½•é¡µé¢
const goToLoginPage = () =&gt; {
  uni.navigateTo({ url: "/pages/login/index" });
};

// é€€å‡ºç™»å½•å¤„ç†
const handleLogout = async () =&gt; {
  await userStore.logout();
  uni.showToast({ title: "å·²é€€å‡ºç™»å½•", icon: "success" });
};
&lt;/script&gt;
</code></pre>
<p>ç™»å½•é¡µé€šè¿‡ <code>Pinia</code> å®ç°ç”¨æˆ·ä¿¡æ¯çš„å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œå¹¶åœ¨ç™»å½•æˆåŠŸåè·³è½¬åˆ°ä¸ªäººä¸­å¿ƒé¡µé¢ã€‚</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view class="flex-col items-center"&gt;
    &lt;input v-model="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" /&gt;
    &lt;input v-model="password" placeholder="è¯·è¾“å…¥å¯†ç " type="password" /&gt;
    &lt;button class="mt-5" @click="handleLogin"&gt;ç™»å½•&lt;/button&gt;
  &lt;/view&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { useUserStore } from "@/store/modules/user";

// ç™»å½•è¡¨å•
const username = ref("admin");
const password = ref("123456");

// ä½¿ç”¨ pinia
const userStore = useUserStore();

// ç™»å½•å¤„ç†
const handleLogin = async () =&gt; {
  await userStore.login(username.value, password.value);

  if (!!userStore.token) {
    await userStore.getUserInfo(); // ç™»å½•æˆåŠŸåè·å–ç”¨æˆ·ä¿¡æ¯
    uni.showToast({ title: "ç™»å½•æˆåŠŸ", icon: "success" });
    uni.navigateBack(); // ç™»å½•æˆåŠŸåè¿”å›ä¸Šä¸€é¡µ
  } else {
    uni.showToast({ title: "ç™»å½•å¤±è´¥", icon: "none" });
  }
};
&lt;/script&gt;

&lt;style scoped&gt;
input {
  width: 80%;
  padding: 10px;
  margin-top: 16px;
  border: 1px solid #ccc;
}
&lt;/style&gt;
</code></pre>
<h3 id="æµ‹è¯•æ•ˆæœ-1">æµ‹è¯•æ•ˆæœ</h3>
<p>ç™»å½•åï¼Œä¸ªäººä¸­å¿ƒä¼šæ˜¾ç¤ºç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°ã€‚é€šè¿‡ Pinia å®ç°äº†ç™»å½•çŠ¶æ€çš„å…±äº«å’Œè·¨é¡µé¢ä¼ é€’ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/PixPin_2024-09-22_17-21-011.gif" alt="" loading="lazy"></p>
<h3 id="æ•´åˆæºç -1">æ•´åˆæºç </h3>
<p>æ•´åˆ<code>Pinia</code>ä»£ç ç‰ˆæœ¬ï¼š<a href="https://gitee.com/youlaiorg/vue-uniapp-template/commit/737f6a3ee5217dcad006fa06b6fae63374d9826b" target="_blank" rel="noopener nofollow">vue-uniapp-template#737f6a3</a>ã€‚</p>
<h2 id="åå‘ä»£ç†">åå‘ä»£ç†</h2>
<p>åœ¨å¼€å‘ä¸­ï¼Œè‹¥æœåŠ¡ç«¯æ²¡æœ‰å¯ç”¨ CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ï¼Œæµè§ˆå™¨ä¼šåŸºäºå®‰å…¨ç­–ç•¥æ‹¦æˆªè·¨åŸŸè¯·æ±‚ï¼Œå¯¼è‡´æ— æ³•è®¿é—®æ¥å£ã€‚ä¸ºäº†ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Vite çš„åå‘ä»£ç†åŠŸèƒ½ï¼Œå°†å¼€å‘é˜¶æ®µçš„è¯·æ±‚ä»£ç†åˆ°çœŸå®çš„ API æœåŠ¡å™¨ä¸Šï¼Œä¼ªè£…æˆåŒæºè¯·æ±‚ã€‚</p>
<p>æœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•é…ç½® Vite çš„åå‘ä»£ç†æ¥å¤„ç†è·¨åŸŸè¯·æ±‚ã€‚</p>
<hr>
<h3 id="ç¯å¢ƒå˜é‡é…ç½®">ç¯å¢ƒå˜é‡é…ç½®</h3>
<p>æˆ‘ä»¬å°†é€šè¿‡ç¯å¢ƒå˜é‡æ¥ç®¡ç†é¡¹ç›®ç«¯å£å’Œ API è¯·æ±‚åœ°å€ï¼Œä»¥ä¸‹æ˜¯ <code>.env.development</code> ä¸­çš„ç›¸å…³é…ç½®ï¼š</p>
<pre><code class="language-bash"># .env.development

# é¡¹ç›®è¿è¡Œçš„ç«¯å£å·
VITE_APP_PORT=5173

# API è¯·æ±‚çš„åŸºç¡€è·¯å¾„ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
VITE_APP_BASE_API=/dev-api

# çœŸå® API æœåŠ¡å™¨çš„ URL
VITE_APP_API_URL=https://api.youlai.tech
</code></pre>
<h3 id="è¯·æ±‚å·¥å…·çš„è°ƒæ•´">è¯·æ±‚å·¥å…·çš„è°ƒæ•´</h3>
<p>ä¸ºäº†è®©è¯·æ±‚èµ°ä»£ç†ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¯·æ±‚å·¥å…·ä¸­å°† <code>VITE_APP_API_URL</code> æ›¿æ¢ä¸º <code>VITE_APP_BASE_API</code>ã€‚è¿™æ ·ï¼Œæ‰€æœ‰å¯¹ <code>API</code> çš„è¯·æ±‚éƒ½ä¼šé€šè¿‡ä»£ç†æ ‡è¯† <code>/dev-api</code> è¿›è¡Œè½¬å‘ã€‚</p>
<pre><code class="language-typescript">export default function request&lt;T&gt;(options: UniApp.RequestOptions): Promise&lt;T&gt; {
  return new Promise((resolve, reject) =&gt; {
    uni.request({
      ...options,
      // åŸè¯·æ±‚æ–¹å¼: ä½¿ç”¨çœŸå® API URL
      // url: `${import.meta.env.VITE_APP_API_URL}${options.url}`, // ç¤ºä¾‹: https://api.youlai.tech/login
      
      // ä¿®æ”¹åï¼šä½¿ç”¨ä»£ç†æ ‡è¯†ï¼Œå®é™…è½¬å‘åˆ°çœŸå® API
      url: `${import.meta.env.VITE_APP_BASE_API}${options.url}`, // ç¤ºä¾‹: http://localhost:5173/dev-api/login
    });
  });
}
</code></pre>
<h3 id="vite-åå‘ä»£ç†é…ç½®">Vite åå‘ä»£ç†é…ç½®</h3>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨ <code>vite.config.ts</code> ä¸­æ·»åŠ åå‘ä»£ç†é…ç½®ï¼Œå°† <code>/dev-api</code> çš„è¯·æ±‚ä»£ç†åˆ° <code>VITE_APP_API_URL</code>ï¼Œé€šè¿‡ <code>http-proxy</code> å®ç°è¯·æ±‚çš„è½¬å‘ã€‚</p>
<pre><code class="language-typescript">// vite.config.ts
import { defineConfig, UserConfig, ConfigEnv, loadEnv } from "vite";

export default defineConfig(async ({ mode }: ConfigEnv): Promise&lt;UserConfig&gt; =&gt; {
  const env = loadEnv(mode, process.cwd());

  return {
    server: {
      host: "0.0.0.0",
      port: +env.VITE_APP_PORT,
      open: true,
      // åå‘ä»£ç†é…ç½®
      proxy: {
        [env.VITE_APP_BASE_API]: {
          target: env.VITE_APP_API_URL, // ç›®æ ‡æœåŠ¡å™¨
          changeOrigin: true,           // æ”¯æŒè·¨åŸŸ
          rewrite: (path) =&gt; path.replace(new RegExp("^" + env.VITE_APP_BASE_API), ""), // å»æ‰å‰ç¼€
        },
      },
    },
    plugins: [
      // æ’ä»¶é…ç½®...
    ],
  };
});
</code></pre>
<h3 id="æµ‹è¯•ä¸éªŒè¯">æµ‹è¯•ä¸éªŒè¯</h3>
<p>åœ¨é…ç½®å¥½åå‘ä»£ç†åï¼Œæµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚å°†è¢« Vite çš„ä»£ç†æœåŠ¡å™¨æ‹¦æˆªå¹¶è½¬å‘è‡³çœŸå®çš„ API åœ°å€ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨è¯·æ±‚ <code>http://localhost:5173/dev-api/api/v1/auth/login</code> æ—¶ï¼ŒVite ä¼šå°†è¯¥è¯·æ±‚ä»£ç†åˆ° <code>https://api.youlai.tech/api/v1/auth/login</code>ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼Œæµè§ˆå™¨è®¤ä¸ºè¯·æ±‚çš„ URL ä¸åº”ç”¨çš„ä¸»æœºåœ°å€ä¸€è‡´ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢è¯¥è¯·æ±‚ï¼Œå³ä¾¿çœŸå®è¯·æ±‚å·²é€šè¿‡ä»£ç†è½¬å‘åˆ°å¤–éƒ¨æœåŠ¡å™¨ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F.gif" alt="åå‘ä»£ç†è·¨åŸŸ" loading="lazy"></p>
<p>éœ€è¦æ³¨æ„ï¼Œåå‘ä»£ç†çš„ç›®æ ‡æ˜¯ä¼ªè£…è¯·æ±‚æ¥æºï¼Œè™½ç„¶å®ƒç»•è¿‡äº†æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œä½†æœ‰æ—¶ä¹Ÿä¼šè®©å¼€å‘è€…è¯¯ä»¥ä¸ºè¯·æ±‚åœ°å€é”™è¯¯ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ç”±äºä»£ç†è½¬å‘è¿‡ç¨‹é€ æˆçš„è¡¨é¢è¯·æ±‚åœ°å€ä¸çœŸå®è¯·æ±‚åœ°å€çš„å·®å¼‚ã€‚</p>
<h3 id="æ•´åˆæºç -2">æ•´åˆæºç </h3>
<p>æ•´åˆ<code>åå‘ä»£ç†</code>å’Œ<code>ç¯å¢ƒå˜é‡</code>ä»£ç ç‰ˆæœ¬ï¼š<a href="https://gitee.com/youlaiorg/vue-uniapp-template/tree/272d643744b3b009a90a54e9344a0fc827f8b9fc" target="_blank" rel="noopener nofollow">vue-uniapp-template#272d643</a>ã€‚</p>
<h2 id="æ•´åˆ-wot-design-uni">æ•´åˆ <code>wot-design-uni</code></h2>
<p><code>wot-design-uni</code> æ˜¯åŸºäº <code>Vue 3</code> å’Œ <code>TypeScript</code> æ„å»ºçš„é«˜è´¨é‡ç»„ä»¶åº“ã€‚ç»„ä»¶åº“éµå¾ª <code>Wot Design</code> çš„è®¾è®¡è§„èŒƒï¼Œæä¾› 70 å¤šä¸ªç»„ä»¶ï¼Œæ”¯æŒæš—é»‘æ¨¡å¼ã€å›½é™…åŒ–å’Œè‡ªå®šä¹‰ä¸»é¢˜ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€è‡´çš„ UI äº¤äº’ï¼ŒåŒæ—¶æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<blockquote>
<p><strong>è¯´æ˜ï¼š</strong> æœ¬æ–‡æ¡£æ•´åˆæ­¥éª¤åŸºäº <code>wot-design-uni</code> å®˜æ–¹æ–‡æ¡£ç¼–å†™ï¼Œå»ºè®®å¼€å‘è€…å‚è€ƒ <a href="https://wot-design-uni.pages.dev/guide/quick-use.html#npm-%E5%AE%89%E8%A3%85" target="_blank" rel="noopener nofollow">å®˜æ–¹æ–‡æ¡£</a> è¿›è¡Œå®‰è£…å’Œé…ç½®ï¼Œä»¥ç¡®ä¿ç»„ä»¶åº“çš„æ­£ç¡®ä½¿ç”¨ã€‚</p>
</blockquote>
<hr>
<h3 id="å®‰è£…ä¾èµ–-9">å®‰è£…ä¾èµ–</h3>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨ <code>pnpm</code> å®‰è£…ç»„ä»¶åº“çš„ä¾èµ–ï¼š</p>
<pre><code class="language-bash">pnpm add wot-design-uni
</code></pre>
<h3 id="é…ç½®è‡ªåŠ¨å¼•å…¥ç»„ä»¶">é…ç½®è‡ªåŠ¨å¼•å…¥ç»„ä»¶</h3>
<p>åœ¨ä¼ ç»Ÿçš„ <code>Vue</code> é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ç»„ä»¶éœ€è¦æ‰‹åŠ¨å®‰è£…ã€å¼•ç”¨ã€æ³¨å†Œã€‚è€Œä½¿ç”¨ <code>easycom</code> å¯ä»¥ç®€åŒ–è¿™äº›æ“ä½œã€‚åªè¦ç»„ä»¶è·¯å¾„ç¬¦åˆè§„èŒƒï¼Œå°±å¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥å’Œæ³¨å†Œã€‚</p>
<p>åœ¨ <code>pages.json</code> æ–‡ä»¶ä¸­é…ç½® <code>easycom</code> è‡ªåŠ¨å¼•å…¥ï¼š</p>
<pre><code class="language-json">// pages.json
{
  "easycom": {
    "autoscan": true,
    "custom": {
      "^wd-(.*)": "wot-design-uni/components/wd-$1/wd-$1.vue"
    }
  },
  "pages": [
    // è¿™é‡Œæ˜¯é¡¹ç›®å·²æœ‰çš„å†…å®¹
  ]
}
</code></pre>
<p><strong>å…³äº <code>easycom</code>ï¼š</strong><br>
<code>easycom</code> æ˜¯ <code>uni-app</code> æä¾›çš„è‡ªåŠ¨åŒ–å¼•å…¥åŠŸèƒ½ï¼Œæ›´å¤šç»†èŠ‚è¯·å‚è€ƒ <a href="https://uniapp.dcloud.net.cn/collocation/pages.html#easycom" target="_blank" rel="noopener nofollow">easycom å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 id="volar-æ”¯æŒ">Volar æ”¯æŒ</h3>
<p>ä¸ºäº†è®© <code>Volar</code> æ­£ç¡®è¯†åˆ«å’Œæç¤ºå…¨å±€ç»„ä»¶ï¼Œä½ éœ€è¦åœ¨é¡¹ç›®çš„ <code>tsconfig.json</code> æ–‡ä»¶ä¸­é…ç½®å…¨å±€ç»„ä»¶ç±»å‹æ”¯æŒï¼š</p>
<pre><code class="language-json">// tsconfig.json
{
  "compilerOptions": {
    "types": ["wot-design-uni/global"]
  }
}
</code></pre>
<p>è¿™å°†ç¡®ä¿ä½ åœ¨ <code>TypeScript</code> é¡¹ç›®ä¸­ç¼–å†™ä»£ç æ—¶ï¼ŒVolar èƒ½æä¾›å®Œæ•´çš„ç±»å‹æ”¯æŒå’Œä»£ç æç¤ºã€‚</p>
<h3 id="æµ‹è¯•ç»„ä»¶">æµ‹è¯•ç»„ä»¶</h3>
<p>å®‰è£…å’Œé…ç½®å®Œæˆåï¼Œä½ å¯ä»¥å¼€å§‹ä½¿ç”¨ <code>wot-design-uni</code> çš„ç»„ä»¶ã€‚åœ¨é¡µé¢ä¸­ï¼Œç›´æ¥å†™ç»„ä»¶æ ‡ç­¾å³å¯ï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥å’Œæ³¨å†Œï¼š</p>
<pre><code class="language-vue">&lt;template&gt;
  &lt;view&gt;
    &lt;wd-button size="small"&gt;ä¸»è¦æŒ‰é’®&lt;/wd-button&gt;
    &lt;wd-button type="success" size="small"&gt;æˆåŠŸæŒ‰é’®&lt;/wd-button&gt;
    &lt;wd-button type="info" size="small"&gt;ä¿¡æ¯æŒ‰é’®&lt;/wd-button&gt;
    &lt;wd-button type="warning" size="small"&gt;è­¦å‘ŠæŒ‰é’®&lt;/wd-button&gt;
    &lt;wd-button type="error" size="small"&gt;å±é™©æŒ‰é’®&lt;/wd-button&gt;
  &lt;/view&gt;
&lt;/template&gt;
</code></pre>
<p>ä½ å°†çœ‹åˆ°å¦‚ä¸‹æŒ‰é’®æ•ˆæœï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/images/main/docs/image-20240925122808028.png" alt="" loading="lazy"></p>
<h3 id="æ•´åˆæºç -3">æ•´åˆæºç </h3>
<p>æ•´åˆ<code>wot-design-uni</code> ä»£ç ç‰ˆæœ¬ï¼š<a href="https://gitee.com/youlaiorg/vue-uniapp-template/tree/a7757213f282a6414a3cf2cc13aa2c54a9479ae4" target="_blank" rel="noopener nofollow">vue-uniapp-template#a775721</a>ã€‚</p>
<h2 id="é¡¹ç›®éƒ¨ç½²">é¡¹ç›®éƒ¨ç½²</h2>
<h3 id="h5-éƒ¨ç½²">H5 éƒ¨ç½²</h3>
<p>æ‰§è¡Œ <code>pnpm run build:h5</code> å‘½ä»¤æ¥å®Œæˆé¡¹ç›®çš„æ‰“åŒ…ï¼š</p>
<pre><code class="language-bash">pnpm run build:h5
</code></pre>
<p>æ‰“åŒ…åç”Ÿæˆçš„é™æ€æ–‡ä»¶ä½äº <code>dist/build/h5</code> ç›®å½•ä¸‹ã€‚å°†è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ°æœåŠ¡å™¨çš„ <code>/usr/share/nginx/html/vue-uniapp-template</code> ç›®å½•ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œé…ç½® nginxï¼š</p>
<pre><code class="language-nginx"># nginx.conf
server {
    listen 80;
    server_name localhost;
    location / {
        root /usr/share/nginx/html/vue-uniapp-template;
        index index.html index.htm;
    }
    # åå‘ä»£ç†é…ç½®
    location /prod-api/ {
        # å°† api.youlai.tech æ›¿æ¢ä¸ºåç«¯ API åœ°å€ï¼Œæ³¨æ„ä¿ç•™åé¢çš„æ–œæ  /
        proxy_pass http://api.youlai.tech/; 
    }
}
</code></pre>
<p>è¿™æ ·é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡ <code>nginx </code>æœåŠ¡å™¨æ¥è®¿é—®ä½ çš„é¡¹ç›®äº†ã€‚</p>
<h3 id="å°ç¨‹åºå‘å¸ƒ">å°ç¨‹åºå‘å¸ƒ</h3>
<h3 id="ä¸‹è½½å·¥å…·">ä¸‹è½½å·¥å…·</h3>
<p>ä¸‹è½½ <a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noopener nofollow"> HBuilder X </a> ç¼–è¾‘å™¨</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024232438606.png" alt="" loading="lazy"></p>
<p>ä¸‹è½½ <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html" target="_blank" rel="noopener nofollow">å¾®ä¿¡å¼€å‘è€…å·¥å…·</a></p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024232328575.png" alt="" loading="lazy"></p>
<h3 id="è·å–å°ç¨‹åº-appid">è·å–å°ç¨‹åº AppID</h3>
<p>è®¿é—® <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener nofollow">å¾®ä¿¡å…¬ä¼—å¹³å°</a>ç”³è¯·å°ç¨‹åºï¼Œè·å– <code>AppID</code>ã€‚å¦‚æœå·²ç”³è¯·ï¼Œå¯åœ¨ <code>é¦–é¡µ</code> â†’ <code>å°ç¨‹åºä¿¡æ¯</code> â†’ <code>æŸ¥çœ‹è¯¦æƒ…</code> æŸ¥çœ‹ AppID</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024231827075.png" alt="" loading="lazy"></p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024232218176.png" alt="" loading="lazy"></p>
<h3 id="é…ç½®é¡¹ç›®">é…ç½®é¡¹ç›®</h3>
<p>ä½¿ç”¨ HBuilder X æ‰“å¼€é¡¹ç›®ï¼Œä¿®æ”¹ <code>manifest.json</code> æ–‡ä»¶ä¸­çš„å°ç¨‹åºé…ç½®ï¼Œå¹¶å¡«å†™è·å–çš„ AppIDã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024232920676.png" alt="" loading="lazy"></p>
<h3 id="è®¾ç½®å¾®ä¿¡å¼€å‘è€…å·¥å…·">è®¾ç½®å¾®ä¿¡å¼€å‘è€…å·¥å…·</h3>
<p>ä½¿ç”¨å¾®ä¿¡æ‰«ç ç™»å½•å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¼€å¯æœåŠ¡ç«¯å£ï¼šç‚¹å‡»å·¥å…·æ <code>è®¾ç½®</code>â†’<code>å®‰å…¨è®¾ç½®</code>â†’<code>å®‰å…¨</code>â†’<code>æœåŠ¡ç«¯å£</code>ï¼Œé€‰æ‹©æ‰“å¼€ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024233058539.png" alt="" loading="lazy"></p>
<h3 id="è¿è¡Œé¡¹ç›®">è¿è¡Œé¡¹ç›®</h3>
<p>åœ¨ HBuilder X ä¸­ï¼Œç‚¹å‡» <code>è¿è¡Œ</code>â†’<code>è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨</code>â†’<code>å¾®ä¿¡å¼€å‘è€…å·¥å…·</code>ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024233326086.png" alt="image-20241024233326086" loading="lazy"></p>
<p>é¡¹ç›®ç¼–è¯‘å®Œæˆåï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨å¯åŠ¨å¹¶å‘ˆç°é¡µé¢ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024233741449.png" alt="" loading="lazy"></p>
<h3 id="ä¸Šä¼ å‘å¸ƒ">ä¸Šä¼ å‘å¸ƒ</h3>
<p>åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œç‚¹å‡» <code>ä¸Šä¼ </code> å°†åº”ç”¨å‘å¸ƒåˆ°å°ç¨‹åºå¹³å°ã€‚</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024234052335.png" alt="" loading="lazy"></p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/image-20241024234313807.png" alt="" loading="lazy"></p>
<h3 id="æŸ¥çœ‹æ•ˆæœ">æŸ¥çœ‹æ•ˆæœ</h3>
<p>æœ€åï¼Œä½¿ç”¨æ‰‹æœºæ‰“å¼€å°ç¨‹åºæŸ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://raw.gitmirror.com/youlaitech/image/main/blog/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20241024234523.jpg" alt="" loading="lazy"></p>
<h2 id="ç»“è¯­">ç»“è¯­</h2>
<p>é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œç›¸ä¿¡ä½ å·²ç»äº†è§£äº†å¦‚ä½•ä»é›¶æ­å»ºä¸€ä¸ªåŸºäº Vue3 å’Œ TypeScript çš„ UniApp è·¨ç«¯è„šæ‰‹æ¶æ¨¡æ¿ â€”â€” vue-uniapp-templateã€‚æœ¬æ–‡æ¶µç›–äº†ä»£ç è§„èŒƒã€çŠ¶æ€ç®¡ç†ã€æ ·å¼é…ç½®ã€Git æäº¤è§„èŒƒå’Œé¡¹ç›®éƒ¨ç½²ç­‰å…³é”®å†…å®¹ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…åœ¨å®é™…é¡¹ç›®ä¸­æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<p>æºç å·²å¼€æºï¼Œé¡¹ç›®åœ°å€ï¼š<a href="https://gitee.com/youlaiorg/vue-uniapp-template" target="_blank" rel="noopener nofollow">https://gitee.com/youlaiorg/vue-uniapp-template</a>ã€‚ç›®å‰é¡¹ç›®ä»åœ¨æŒç»­å®Œå–„ä¸­ï¼Œéå¸¸æ¬¢è¿å¯¹è¯¥é¡¹ç›®æ„Ÿå…´è¶£çš„å¼€å‘è€…å‚ä¸å…±å»ºï¼Œæœ‰æ„è€…å¯éšæ—¶è”ç³»æˆ‘ï¼ˆhaoxianruiï¼‰ã€‚æœŸå¾…ä¸ä½ ä¸€èµ·å°†è¿™ä¸ªé¡¹ç›®åšå¾—æ›´å¥½ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªé«˜æ•ˆã€å®ç”¨çš„è·¨ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ„Ÿè°¢ä½ çš„é˜…è¯»å’Œæ”¯æŒï¼</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.23662677930671297" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-23 08:39">2025-01-23 08:39</span>&nbsp;
<a href="https://www.cnblogs.com/haoxianrui">æœ‰æ¥æŠ€æœ¯</a>&nbsp;
é˜…è¯»(<span id="post_view_count">181</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">6</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18684753" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18684753);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18684753', targetLink: 'https://www.cnblogs.com/haoxianrui/p/18684753', title: 'ä»0åˆ°1æ„å»ºå¼€æº vue-uniapp-templateï¼šä½¿ç”¨ UniApp + Vue3 + TypeScript å’Œ VSCoeã€CLI å¼€å‘è·¨å¹³å°ç§»åŠ¨ç«¯è„šæ‰‹æ¶' })">ä¸¾æŠ¥</a>
</div>
        
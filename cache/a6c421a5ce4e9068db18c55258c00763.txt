
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xuxueli/p/19055598" title="发布于 2025-08-24 16:55">
    <span role="heading" aria-level="2">XXL-JOB v3.2.0 | 分布式任务调度平台</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h3 id="release-notes">Release Notes</h3>
<ul>
<li>1、【强化】AI任务（ollamaJobHandler）优化：针对 “model” 模型配置信息，从执行器侧文件类配置调整至调度中心“任务参数”动态配置，支持集成多模型、并结合任务动态配置切换。</li>
<li>2、【安全】登录认证重构：密码加密算法从Md5改为Sha256；登录态改为登录后动态随机生成；提升系统安全性；（需要针对用户表进行字段调整，同时需要重新初始化密码信息；相关SQL脚本如下）</li>
</ul>
<pre><code>// 1、用户表password字段需要调整长度，执行如下命令
ALTER TABLE xxl_job_user
    MODIFY COLUMN `password` varchar(100) NOT NULL COMMENT '密码加密信息';
ALTER TABLE xxl_job_user
    ADD COLUMN `token` varchar(100) DEFAULT NULL COMMENT '登录token';
    
// 2、存量用户密码需要修改，可执行如下命令将密码初始化 “123456”；也可以自行通过 “SHA256Tool.sha256” 工具生成其他初始化密码；
UPDATE xxl_job_user t SET t.password = '8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92' WHERE t.username = {用户名};
</code></pre>
<ul>
<li>3、【强化】GLUE模式(Python) 扩展，支持 "GLUE(Python3)" 与 "GLUE(Python2)" 两种模式，分别支持 python3/2 多版本；</li>
<li>4、【强化】调度中心系统日志调整，支持启动时指定 -DLOG_HOME 参数自定义日志位置；同时优化日志格式提升易读性；</li>
<li>5、【优化】任务Bean扫描规则调整，过滤冗余不必要扫描，避免系统组件提前初始化；</li>
<li>6、【优化】登录信息页面空值处理优化，避免空值影响ftl渲染；</li>
<li>7、【优化】异常页面处理逻辑优化，新增兜底落地页配置；</li>
<li>8、【重构】ReturnT 重构，简化代码结构，提升API易用性以及可维护性；</li>
<li>9、【重构】项目结构重构，提升可维护性与易读性；</li>
<li>10、【修复】漏洞修复（CVE-2025-7787），针对 httpJobHandler 支持配置URL白名单限制，防止服务器端请求伪造（SSRF）攻击。</li>
<li>11、【修复】合并PR-3738，修复拼写问题；</li>
<li>12、【修复】合并PR-3506，修复小概率情况下任务重复调度问题；</li>
<li>13、【修复】合并PR-3747，修复异常情况下资源泄漏风险；</li>
<li>14、【修复】IDOR越权问题修复，提升任务操作及日志管理安全性；</li>
<li>15、【升级】升级多项maven依赖至较新版本，如 netty、groovy、mybatis、spring、spring-ai、dify 等；</li>
</ul>
<h3 id="ai任务接入示例">“AI任务”接入示例</h3>
<p>此处以  difyWorkflowJobHandler 为例，注意需要前置部署AI执行器（xxl-job-executor-sample-ai），可参考官方文档说明。</p>
<h5 id="步骤一调度中心新建-difyworkflowjobhandler-任务">步骤一：调度中心，新建 difyWorkflowJobHandler 任务</h5>
<p><img alt="在这里插入图片描述" loading="lazy" data-src="https://i-blog.csdnimg.cn/direct/5498f1ceddca4a80b44da7e66058145b.png" class="lazyload"></p>
<h4 id="步骤二任务执行查看任务进度及日志">步骤二：任务执行，查看任务进度及日志</h4>
<p><img alt="在这里插入图片描述" loading="lazy" data-src="https://i-blog.csdnimg.cn/direct/8e51733ee7574a4b94ac982207329556.png" class="lazyload"></p>
<h3 id="常规任务接入示例">“常规任务”接入示例</h3>
<p>XXL-JOB支持多模式任务，下文以简单的“Bean模式任务”为例介绍，三步快速开发接入。</p>
<h5 id="步骤一执行器开发job方法">步骤一：执行器，开发Job方法</h5>
<pre><code>@XxlJob("demoJobHandler")
 public void demoJobHandler() throws Exception {
    XxlJobHelper.log("XXL-JOB, Hello World.");
}
</code></pre>
<h4 id="步骤二调度中心新建调度任务">步骤二：调度中心，新建调度任务</h4>
<p><img alt="img_ZAsz.png" loading="lazy" data-src="https://i-blog.csdnimg.cn/img_convert/263b5aeea50b7abcad9717de12197c10.webp?x-oss-process=image/format,png" class="lazyload"></p>
<h4 id="步骤三任务执行查看任务进度及日志">步骤三：任务执行，查看任务进度及日志</h4>
<p><img alt="img_eYrv.png" loading="lazy" data-src="https://i-blog.csdnimg.cn/img_convert/07d658926072bb5feddafc8e81c11ce7.webp?x-oss-process=image/format,png" class="lazyload"></p>
<h3 id="简介">简介</h3>
<p>XXL-JOB是一个轻量级分布式任务调度平台，其核心设计目标是开发迅速、学习简单、轻量级、易扩展。现已开放源代码并接入多家公司线上产品线，开箱即用。</p>
<ul>
<li><a href="http://www.xuxueli.com/xxl-job/" target="_blank" rel="noopener nofollow">中文文档：http://www.xuxueli.com/xxl-job/ </a></li>
<li><a href="http://www.xuxueli.com/page/community.html" target="_blank" rel="noopener nofollow">社区交流：http://www.xuxueli.com/page/community.html </a></li>
</ul>
<p><img alt="img_Qohm.png" loading="lazy" data-src="https://i-blog.csdnimg.cn/img_convert/b9e0dda75bf0f8301739acca0c77c3ed.webp?x-oss-process=image/format,png" class="lazyload"></p>
<h3 id="特性">特性</h3>
<ul>
<li>1、简单：支持通过Web页面对任务进行CRUD操作，操作简单，一分钟上手；</li>
<li>2、动态：支持动态修改任务状态、启动/停止任务，以及终止运行中任务，即时生效；</li>
<li>3、调度中心HA（中心式）：调度采用中心式设计，“调度中心”自研调度组件并支持集群部署，可保证调度中心HA；</li>
<li>4、执行器HA（分布式）：任务分布式执行，任务"执行器"支持集群部署，可保证任务执行HA；</li>
<li>5、注册中心: 执行器会周期性自动注册任务, 调度中心将会自动发现注册的任务并触发执行。同时，也支持手动录入执行器地址；</li>
<li>6、弹性扩容缩容：一旦有新执行器机器上线或者下线，下次调度时将会重新分配任务；</li>
<li>7、触发策略：提供丰富的任务触发策略，包括：Cron触发、固定间隔触发、固定延时触发、API（事件）触发、人工触发、父子任务触发；</li>
<li>8、调度过期策略：调度中心错过调度时间的补偿处理策略，包括：忽略、立即补偿触发一次等；</li>
<li>9、阻塞处理策略：调度过于密集执行器来不及处理时的处理策略，策略包括：单机串行（默认）、丢弃后续调度、覆盖之前调度；</li>
<li>10、任务超时控制：支持自定义任务超时时间，任务运行超时将会主动中断任务；</li>
<li>11、任务失败重试：支持自定义任务失败重试次数，当任务失败时将会按照预设的失败重试次数主动进行重试；其中分片任务支持分片粒度的失败重试；</li>
<li>12、任务失败告警；默认提供邮件方式失败告警，同时预留扩展接口，可方便的扩展短信、钉钉等告警方式；</li>
<li>13、路由策略：执行器集群部署时提供丰富的路由策略，包括：第一个、最后一个、轮询、随机、一致性HASH、最不经常使用、最近最久未使用、故障转移、忙碌转移等；</li>
<li>14、分片广播任务：执行器集群部署时，任务路由策略选择"分片广播"情况下，一次任务调度将会广播触发集群中所有执行器执行一次任务，可根据分片参数开发分片任务；</li>
<li>15、动态分片：分片广播任务以执行器为维度进行分片，支持动态扩容执行器集群从而动态增加分片数量，协同进行业务处理；在进行大数据量业务操作时可显著提升任务处理能力和速度。</li>
<li>16、故障转移：任务路由策略选择"故障转移"情况下，如果执行器集群中某一台机器故障，将会自动Failover切换到一台正常的执行器发送调度请求。</li>
<li>17、任务进度监控：支持实时监控任务进度；</li>
<li>18、Rolling实时日志：支持在线查看调度结果，并且支持以Rolling方式实时查看执行器输出的完整的执行日志；</li>
<li>19、GLUE：提供Web IDE，支持在线开发任务逻辑代码，动态发布，实时编译生效，省略部署上线的过程。支持30个版本的历史版本回溯。</li>
<li>20、脚本任务：支持以GLUE模式开发和运行脚本任务，包括Shell、Python、NodeJS、PHP、PowerShell等类型脚本;</li>
<li>21、命令行任务：原生提供通用命令行任务Handler（Bean任务，"CommandJobHandler"）；业务方只需要提供命令行即可；</li>
<li>22、任务依赖：支持配置子任务依赖，当父任务执行结束且执行成功后将会主动触发一次子任务的执行, 多个子任务用逗号分隔；</li>
<li>23、一致性：“调度中心”通过DB锁保证集群分布式调度的一致性, 一次任务调度只会触发一次执行；</li>
<li>24、自定义任务参数：支持在线配置调度任务入参，即时生效；</li>
<li>25、调度线程池：调度系统多线程触发调度运行，确保调度精确执行，不被堵塞；</li>
<li>26、数据加密：调度中心和执行器之间的通讯进行数据加密，提升调度信息安全性；</li>
<li>27、邮件报警：任务失败时支持邮件报警，支持配置多邮件地址群发报警邮件；</li>
<li>28、推送maven中央仓库: 将会把最新稳定版推送到maven中央仓库, 方便用户接入和使用;</li>
<li>29、运行报表：支持实时查看运行数据，如任务数量、调度次数、执行器数量等；以及调度报表，如调度日期分布图，调度成功分布图等；</li>
<li>30、全异步：任务调度流程全异步化设计实现，如异步调度、异步运行、异步回调等，有效对密集调度进行流量削峰，理论上支持任意时长任务的运行；</li>
<li>31、跨语言/OpenAPI：调度中心与执行器提供语言无关的 OpenApi（RESTful 格式），第三方任意语言可据此对接调度中心或者实现执行器，实现多语言支持。除此之外，还提供了 “多任务模式”和“httpJobHandler”等其他跨语言方案；</li>
<li>32、国际化：调度中心支持国际化设置，提供中文、英文两种可选语言，默认为中文；</li>
<li>33、容器化：提供官方docker镜像，并实时更新推送dockerhub，进一步实现产品开箱即用；</li>
<li>34、线程池隔离：调度线程池进行隔离拆分，慢任务自动降级进入"Slow"线程池，避免耗尽调度线程，提高系统稳定性；</li>
<li>35、用户管理：支持在线管理系统用户，存在管理员、普通用户两种角色；</li>
<li>36、权限控制：执行器维度进行权限控制，管理员拥有全量权限，普通用户需要分配执行器权限后才允许相关操作；</li>
<li>37、AI任务：原生提供AI执行器，并内置多个AI任务Handler，与spring-ai、ollama、dify等集成打通，支持快速开发AI类任务。</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-24 16:55">2025-08-24 16:55</span>&nbsp;
<a href="https://www.cnblogs.com/xuxueli">许雪里</a>&nbsp;
阅读(<span id="post_view_count">3</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19055598);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19055598', targetLink: 'https://www.cnblogs.com/xuxueli/p/19055598', title: 'XXL-JOB v3.2.0 | 分布式任务调度平台' })">举报</a>
</div>
        
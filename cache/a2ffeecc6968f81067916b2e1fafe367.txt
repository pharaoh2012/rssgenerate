
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/deali/p/19047276/starblog-v130-updates-server-migration" title="发布于 2025-08-19 18:26">
    <span role="heading" aria-level="2">StarBlog v1.3.0 新版本，一大波更新以及迁移服务器部署</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819182515950-1051857941.png" alt="StarBlog v1.3.0 新版本，一大波更新以及迁移服务器部署" class="desc_img">
        服务器故障逼得更新，直接上云服务器迁移。v1.3.0版本来了，架构、界面、SEO全升级，还加了图片压缩工具，代码总算整理干净点。来看看这波大更新如何？
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="前言">前言</h2>
<p>最近好久没更新博客了</p>
<p>不是不想更新</p>
<p>相反我攒了一堆文章没发</p>
<p>主要是 StarBlog 所在的服务器故障了</p>
<p>我在各个平台的文章都是通过 StarBlog 来发送的</p>
<p>所以这段时间各个平台的文章更新都暂停了</p>
<blockquote>
<p>为了尽快恢复更新，我决定把 StarBlog 迁移到云服务器上。</p>
<p>稳定一些，也可以减少一些维护成本。</p>
</blockquote>
<p>访问查看效果: <a href="https://blog.deali.cn/" target="_blank" rel="noopener nofollow">https://blog.deali.cn/</a></p>
<h2 id="关于-starblog">关于 StarBlog</h2>
<p>StarBlog 是一个基于 .NET Core 开发的现代博客系统，2022年春节开始开发，当时是边学 .NET Core 边做的，算是一个 .NET Core 的练手项目。</p>
<p>自从 <a href="https://blog.deali.cn/Blog/List?categoryId=43" target="_blank" rel="noopener nofollow">StarBlog 系列文章</a> 完结之后，功能稳定下来，我就没怎么去动这个项目的代码</p>
<p>太久没维护总有点屎山的感觉，而且现在是 2025 年了，现在回看以前的代码总觉得哪都不满意，所以我又计划重构一个 StarBlog v2，具体的计划可以看我之前的文章: <a href="https://blog.deali.cn/Blog/Post/1b6f02772b50677c" target="_blank" rel="noopener nofollow">StarBlog - (32) 第一期完结</a></p>
<p>既然这次要把 StarBlog 迁移到云服务器上，那就顺手修改一下吧，v2 太遥远，先解决一些眼前的问题要紧。</p>
<h2 id="更新">更新</h2>
<p>这大概是 v2 之前的最后一次大更新了</p>
<p>版本也升级到了 <code>v1.3.0</code></p>
<blockquote>
<p>PS: 顺带一提，这次更新我顺便整理了代码</p>
<p>这才引入了版本，以 <a href="https://blog.deali.cn/Blog/Post/1b6f02772b50677c" target="_blank" rel="noopener nofollow">第一期文章完结</a> 的版本为 <code>v1.0.0</code> 节点</p>
<p><a href="https://blog.deali.cn/Blog/Post/a97ecc01df52707a" target="_blank" rel="noopener nofollow">番外篇介绍的全新访问统计功能</a> 是 <code>v1.2.0</code> 版本的主要内容</p>
</blockquote>
<p>这次更新主要有几块：</p>
<ul>
<li>架构与依赖升级</li>
<li>界面 &amp; 交互改进</li>
<li>SEO 功能 &amp; 搜索优化</li>
<li>性能优化</li>
<li>工具链增强</li>
</ul>
<h3 id="架构与依赖升级">架构与依赖升级</h3>
<p>被念叨好久的项目升级，终于来了😂</p>
<p>这项目从 2022 年开发，就一直在 .NET 6.0 版本，这次直接一口气升级到最新版</p>
<ul>
<li>项目整体迁移至 <strong>.NET 9.0</strong>，更新主要依赖。</li>
<li>移除冗余功能（数据采集、图片库、Rin 日志系统等）。</li>
<li>前端资源改为生产版本，清理代码结构。</li>
</ul>
<h3 id="界面与交互改进">界面与交互改进</h3>
<p>现在写前端都是用 Tailwind CSS 了</p>
<p>好久没用过 Bootstrap 了，这套界面现在看来真的有点老了</p>
<ul>
<li>首页新增 Hero 区域样式与动画。</li>
<li>优化文章卡片、照片卡片和导航栏，全面中文化。</li>
<li>提升响应式设计和可访问性。</li>
</ul>
<h3 id="seo-功能--搜索优化">SEO 功能 &amp; 搜索优化</h3>
<p>SEO 是之前被我忽略的功能，这次一口气加了很多 SEO 相关的功能</p>
<ul>
<li>引入结构化数据、动态元数据和图片 SEO 优化。</li>
<li>统一 Sitemap 服务（支持主/图片/索引）。</li>
<li>新增 SEO 测试页面和 robots.txt 优化。</li>
</ul>
<h3 id="性能优化">性能优化</h3>
<p>之前 StarBlog 部署的服务器性能较高，所以没考虑这些优化的细节</p>
<p>接下来需要部署在云服务器上，性能和带宽都捉急</p>
<p>所以我做了一些优化，尽可能提高用户访问体验</p>
<ul>
<li>添加响应压缩功能</li>
<li>配置静态文件缓存策略</li>
<li>并发性能优化，让小水管服务器也能提供比较好的访问体验</li>
</ul>
<h3 id="工具链增强">工具链增强</h3>
<p>前面说了性能优化，其实大头还是图片</p>
<p>所以我又基于 ImageSharp 开发了图片压缩工具，对博客里的文章配图、相册等进行压缩，这一步骤也耗费了不少时间🤣</p>
<p>接下来我会写几篇文章介绍一下这些新增的工具</p>
<ul>
<li>新增多模式图片压缩、格式转换（WebP/JPEG/GIF）、输出目录、统计报告等功能。</li>
<li>独立了 <code>BlogImageOptimizer</code> 工具，支持批量压缩与 Docker 部署。</li>
<li>开发了专门用于数据处理的 <code>DataProc</code> 工具，支持访问记录处理、图片压缩、大模型辅助创作等功能。</li>
</ul>
<h2 id="主页重构">主页重构</h2>
<p>作为网站的门面，主页的重要性不言而諭</p>
<p>之前的主页在现在看来有点简陋了</p>
<p>这次我把 HERO 部分重构了一下，背景是渐变色动画，左侧加了一些介绍，右侧显示随机相册图片</p>
<p>按钮想复刻一下 iOS 26 的液态玻璃效果，不过太麻烦只实现了个低配版哈哈哈🤣</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819182927841-1695327206.png" alt="image" loading="lazy"></p>
<p>下方的图片也增加了加载中的动画，大大增强了用户体验！</p>
<blockquote>
<p>PS: 之前没有加载动画，图片没加载出来那个地方就是空的，会导致页面闪烁</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819182937345-481595190.png" alt="" loading="lazy"></p>
<p>加载完成后长这样</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819182945947-1847407185.png" alt="" loading="lazy"></p>
<p>同样的，文章列表的图片也加了图片加载动画，我就不截图了。</p>
<h2 id="相关文章推荐">相关文章推荐</h2>
<p>文章底部加了相关文章推荐</p>
<p>这个是增加内链的手段，对提高 SEO 性能很有用</p>
<p>而且也可以提高用户的阅读时间</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819183004347-1189689755.png" alt="" loading="lazy"></p>
<h2 id="seo">SEO</h2>
<p>在 SEO 方面，我也是新手</p>
<p>StarBlog 之前这方面基本是空白的</p>
<p>这次做的事情是这些</p>
<ul>
<li>引入结构化数据、动态元数据和图片 SEO 优化。</li>
<li>统一 Sitemap 服务（支持主/图片/索引）。</li>
<li>新增 SEO 测试页面和 robots.txt 优化。</li>
</ul>
<p>这里截图看看新的 SEO 测试页面</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819183014372-179097212.png" alt="" loading="lazy"></p>
<p>还增加了这些测试页面</p>
<p>Meta标签测试会随机打开一篇文章，显示 meta 标签的说明、关键词什么的</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819183020992-1571439182.png" alt="" loading="lazy"></p>
<p>Sitemap 测试</p>
<p><img src="https://img2024.cnblogs.com/blog/866942/202508/866942-20250819183027813-1315278327.png" alt="" loading="lazy"></p>
<h2 id="小结">小结</h2>
<p>具体代码就不贴了</p>
<p>本文只是介绍这次新增的功能</p>
<p>后面看心情再介绍具体的实现吧😄</p>
<h2 id="发布说明">发布说明</h2>
<p>最后是详细的发布说明</p>
<p>因为可能没什么人看，所以放在最后</p>
<h3 id="-features">✨ Features</h3>
<ul>
<li><strong>图片优化与压缩</strong>：新增多模式图片压缩配置与智能选择功能，支持文章配图、缩略图、头图等不同模式；引入格式转换功能，自动选择最佳输出格式（WebP/JPEG），并支持GIF压缩与优化。</li>
<li><strong>图片优化工具</strong>：新增 <code>BlogImageOptimizer</code> 工具，支持批量压缩、格式转换和Docker化部署。</li>
<li><strong>图片优化增强</strong>：添加输出目录配置、压缩统计与报告功能，提供详细的处理进度、成功率及节省空间分析。</li>
<li><strong>SEO 功能</strong>：新增结构化数据、图片SEO优化、动态元数据生成、统一的 Sitemap 服务（支持主/图片/索引），并提供 SEO 测试页面与优化后的404页面。</li>
<li><strong>文章与推荐</strong>：相关文章推荐逻辑改为随机排序，提升推荐多样性。</li>
<li><strong>界面与交互</strong>：
<ul>
<li>新增首页 Hero 区域样式与动画交互效果。</li>
<li>优化文章卡片布局与图片组件，增加响应式支持。</li>
<li>增强照片卡片功能，支持渐变遮罩、标题显示和可访问性优化。</li>
<li>导航栏文本更新为中文，并新增 SEO 测试入口。</li>
</ul>
</li>
<li><strong>中间件与缓存</strong>：新增静态文件调试中间件，并优化缓存策略（开发环境禁用缓存，生产环境短期缓存）。</li>
<li><strong>数据处理</strong>：新增 <code>FakeIpSearcher</code> 实现，支持模拟 IP 查询。</li>
</ul>
<h3 id="-bug-fixes">🐞 Bug Fixes</h3>
<ul>
<li>修复 <code>SeoTestController</code> 随机文章获取时的空引用问题。</li>
<li>修复 <code>SeoTestController</code> 查询时的同步阻塞，改为异步查询以提升性能。</li>
<li>在 <code>robots.txt</code> 中禁止爬取 <code>/seo-test</code> 路径。</li>
<li>修复 <code>PicLibService</code> 初始化时路径不存在导致的异常。</li>
</ul>
<h3 id="️-refactor">♻️ Refactor</h3>
<ul>
<li>前端优化：统一前端资源加载，切换至生产版本的 Vue.js 与 editormd，清理冗余代码与格式。</li>
<li>项目结构：将主要项目调整至 <code>src</code> 与 <code>tools</code> 目录，<code>BlogImageOptimizer</code> 独立为工具模块。</li>
<li>移除冗余：删除数据采集、图片库、Rin 日志系统及相关依赖。</li>
<li>视图优化：改进首页布局、推荐区块排序与样式；移除未使用的缩略图与命名空间代码。</li>
<li>服务优化：为敏感词过滤服务添加日志与文件检查逻辑。</li>
</ul>
<h3 id="-dependencies">📦 Dependencies</h3>
<ul>
<li>升级整体项目至 <strong>.NET 9.0</strong>，更新 Markdig、MailKit、X.PagedList.EF 等依赖包。</li>
<li>更新 <strong>Serilog</strong> 文件日志组件至 <code>6.0.0</code>。</li>
<li>移除未使用的 <strong>highlight.js</strong> 依赖。</li>
<li>添加 <strong>SixLabors.ImageSharp</strong> 与 <strong>Markdig</strong> 依赖以支持图片处理与 Markdown 增强。</li>
</ul>
<h3 id="-docs">📄 Docs</h3>
<ul>
<li>README 更新：
<ul>
<li>新增 <code>gulp min</code> 命令说明，补充完整构建流程。</li>
<li>添加 v1.0.0 版本代码说明与技术栈优化描述。</li>
<li>增加敏感词库免责声明，明确仅限学习研究使用。</li>
</ul>
</li>
</ul>
<h3 id="-others">🔧 Others</h3>
<ul>
<li>性能优化：
<ul>
<li>为 Brotli 与 Gzip 添加压缩级别配置，提高压缩效率。</li>
<li>优化图片压缩的并发处理逻辑，利用并行与线程安全集合提升性能。</li>
</ul>
</li>
<li>样式优化：改进照片卡片背景与边框效果，统一视觉体验。</li>
<li>构建优化：更新 <code>.dockerignore</code> 规则，移除开发环境无关文件。</li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    微信公众号：「程序设计实验室」
专注于互联网热门新技术探索与团队敏捷开发实践，包括架构设计、机器学习与数据分析算法、移动端开发、Linux、Web前后端开发等，欢迎一起探讨技术，分享学习实践经验。
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.003472222222222222" data-date-updated="2025-08-19 18:31">2025-08-19 18:26</span>&nbsp;
<a href="https://www.cnblogs.com/deali">程序设计实验室</a>&nbsp;
阅读(<span id="post_view_count">138</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19047276);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19047276', targetLink: 'https://www.cnblogs.com/deali/p/19047276/starblog-v130-updates-server-migration', title: 'StarBlog v1.3.0 新版本，一大波更新以及迁移服务器部署' })">举报</a>
</div>
        
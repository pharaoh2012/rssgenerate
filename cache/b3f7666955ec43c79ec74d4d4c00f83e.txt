
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/laoxue888/p/18859332" title="发布于 2025-05-04 16:35">
    <span role="heading" aria-level="2">window-docker的容器使用宿主机音频设备</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<hr>
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#前言" rel="noopener nofollow">前言</a></li><li><a href="#操作配置" rel="noopener nofollow">操作配置</a></li></ul></div><p></p>
<h1 id="前言">前言</h1>
<p>你有没有遇到过这种情况？</p>
<p>你兴冲冲地在Windows上用Docker搭了个<strong>语音识别项目</strong>，准备让容器高歌一曲，或者至少"Hey Docker"一下。结果——静音。</p>
<p>Docker Desktop一脸无辜："亲，默认配置里可没有'让你的容器唱歌'这个选项哦~"</p>
<p>于是，你的容器像个哑巴，明明代码写得飞起，却死活发不出声音。这感觉就像教鹦鹉说'Hello World'，但它死活不张嘴！</p>
<p>Docker：我聋了，也哑了<br>
默认情况下，Docker容器在Windows上就像戴了降噪耳机——它听不见你，你也听不见它。</p>
<p>你想让它处理音频？它只会回你一个：</p>
<p>Error: No audio devices found.<br>
(内心OS：怪我咯？你也没给我麦克风啊！)</p>
<p>别急，今天我们就来教Docker如何"开口说话"，让它能抢到Windows的麦克风和扬声器，让你的语音项目不再是个"哑剧演员"！</p>
<h1 id="操作配置">操作配置</h1>
<p>1.下载pulseaudio服务</p>
<p><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/Ports/Windows/Support/" target="_blank" rel="noopener nofollow">https://www.freedesktop.org/wiki/Software/PulseAudio/Ports/Windows/Support/</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163250015-1937982553.png" alt="" loading="lazy"></p>
<p>并解压文件夹到D盘</p>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163321377-1818387704.png" alt="" loading="lazy"></p>
<p>2.配置pulseaudio服务</p>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163335517-123837401.png" alt="" loading="lazy"></p>
<pre><code class="language-shell">load-module module-native-protocol-tcp listen=0.0.0.0 auth-anonymous=1
</code></pre>
<p>3.启动pulseaudio服务</p>
<blockquote>
<p>注意：宿主机重启后，需要重新启动pulseaudio服务。</p>
</blockquote>
<pre><code class="language-shell"># 加-D 表示后台运行
.\bin\pulseaudio.exe --use-pid-file=false -D
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163345649-2010659532.png" alt="" loading="lazy"></p>
<p>允许一下</p>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163351144-637765758.png" alt="" loading="lazy"></p>
<p>4.配置docker容器</p>
<pre><code class="language-shell">docker run -it -p 6080:80 -p 10000:10000 -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=host.docker.internal:0.0 -e PULSE_SERVER=host.docker.internal --name=DockerSpeaker docker.1ms.run/ubuntu:24.04  /bin/bash
</code></pre>
<p>5.测试</p>
<pre><code class="language-shell">apt-get update &amp;&amp; apt-get install -y alsa-utils pulseaudio
aplay -L  # 列出音频设备
speaker-test -t wav  # 测试播放
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3447454/202505/3447454-20250504163357604-1978719915.png" alt="" loading="lazy"></p>
<p>测试成功！</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="1.4869353845844908" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-04 16:36">2025-05-04 16:35</span>&nbsp;
<a href="https://www.cnblogs.com/laoxue888">维度攻城狮</a>&nbsp;
阅读(<span id="post_view_count">105</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18859332);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18859332', targetLink: 'https://www.cnblogs.com/laoxue888/p/18859332', title: 'window-docker的容器使用宿主机音频设备' })">举报</a>
</div>
        
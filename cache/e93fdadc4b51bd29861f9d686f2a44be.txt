
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaobaiysf/p/18828900" title="发布于 2025-04-16 16:04">
    <span role="heading" aria-level="2">Chat to MySQL 最佳实践：MCP Server 服务调用</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="一场景说明">一、场景说明：</h1>
<p>通过 1Panel+MaxKB 两个开源工具结合 MCP 服务实现 Chat to Mysql。</p>
<h1 id="二资源准备">二、资源准备</h1>
<ul>
<li><strong>MySQL</strong>：数据库以及数据库表（培训认证中心运营数据表）</li>
<li><strong>1Panel</strong>：开源 Linux 运维管理平台</li>
<li><strong>MaxKB</strong>： 强大易用的开源 AI 小助手</li>
</ul>
<h1 id="三操作说明">三、操作说明</h1>
<h3 id="步骤一完成-1panel-的安装部署">步骤一：完成 1Panel 的安装部署</h3>
<p>安装说明：<a href="https://1panel.cn/docs/installation/online_installation/" target="_blank" rel="noopener nofollow">https://1panel.cn/docs/installation/online_installation/</a></p>
<h3 id="步骤二通过-1panel-完成-maxkb-的安装部署">步骤二：通过 1Panel 完成 MaxKB 的安装部署</h3>
<p>安装说明：<a href="https://maxkb.cn/docs/installation/1panel_installtion/" target="_blank" rel="noopener nofollow">https://maxkb.cn/docs/installation/1panel_installtion/</a></p>
<h3 id="步骤三通过-1panel-完成-mysql-mcp-服务安装">步骤三：通过 1Panel 完成 MySQL MCP 服务安装</h3>
<p>登录 1Panel 平台，进入 MCP 菜单，然后点击【创建 MCP Server】</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416153910024-915109672.png" alt="" loading="lazy"><br>
依次输入相关内容：</p>
<ul>
<li>【名称】：edu-table</li>
<li>【启动命令】：</li>
</ul>
<pre><code>npx -y @bytebase/dbhub --transport stdio --dsn 
mysql://账号:数据库密码@IP:端口/数据库名名称
</code></pre>
<ul>
<li>【环境变量】：默认无需填写</li>
<li>【挂载】：默认无需填写</li>
<li>【端口】：输入默认的端口，并打开端口外部访问开关；</li>
<li>【外部访问路径】：IP：端口</li>
<li>【容器名称】：默认自动生成</li>
<li>【SSE路径】：默认自动生成<br>
输入完成后如下图所示，点击确认即可。</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416154639684-2105443311.png" alt="" loading="lazy"></p>
<p>确认后，等待 MCP Server 正常启动，正常启动后点击配置按钮获取配置信息，如下所示：<br>
<img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416154908739-1957485941.png" alt="" loading="lazy"></p>
<p>配置信息：</p>
<pre><code>{
  "mcpServers": {
    "edu-table": {
      "url": "http://IP:端口/MCP-Server名称"
    }
  }
}
</code></pre>
<h3 id="步骤四在-maxkb-中创建高级应用并基于-ai-对话节点添加-mcp-server-服务工具">步骤四：在 MaxKB 中创建高级应用并基于 AI 对话节点添加 MCP Server 服务工具。</h3>
<p>流程编排如下所示：<br>
<img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416155335702-1939580715.png" alt="" loading="lazy"><br>
流程编排相关提示词参见：<a href="https://www.cnblogs.com/xiaobaiysf/p/18826466" target="_blank">https://www.cnblogs.com/xiaobaiysf/p/18826466</a><br>
点击 AI 对话节点工具按钮：按照要求输入从 1Panel 获取到的 MCP 服务配置信息，如下图所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416155549457-1542247830.png" alt="" loading="lazy"><br>
配置信息详细参考：需要去掉"mcpServers"相关信息，同时需要添加"transport": "sse"信息。</p>
<pre><code>{
  "mcp-mysql": {
    "timeout": 180,
    "url": "http://IP:端口/MCP-Server名称",
    "transport": "sse"
  }
}
</code></pre>
<h3 id="步骤五调试验证ai-小助手">步骤五：调试验证AI 小助手。</h3>
<h4 id="测试场景1近一年支付用户主要来自哪几个区域">测试场景1:近一年支付用户主要来自哪几个区域？</h4>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416155910468-355713346.png" alt="" loading="lazy"></p>
<h4 id="测试场景2近一年支付用户主要来自哪几个区域">测试场景2:近一年支付用户主要来自哪几个区域？</h4>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416160019668-803783519.png" alt="" loading="lazy"></p>
<h4 id="测试场景32022-2025年每年的实际收入是多少元">测试场景3:2022-2025年每年的实际收入是多少元？</h4>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202504/3600464-20250416160059893-860264614.png" alt="" loading="lazy"></p>
<p>至此我们就基于 1Panel+MaxKB，结合 MCP 服务完成了Chat to Mysql。</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.012861046618055556" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-16 16:04">2025-04-16 16:04</span>&nbsp;
<a href="https://www.cnblogs.com/xiaobaiysf">小白跃升坊</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18828900);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18828900', targetLink: 'https://www.cnblogs.com/xiaobaiysf/p/18828900', title: 'Chat to MySQL 最佳实践：MCP Server 服务调用' })">举报</a>
</div>
        
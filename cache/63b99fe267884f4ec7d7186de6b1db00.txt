
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/springcoming/p/18868544" title="å‘å¸ƒäº 2025-05-09 17:04">
    <span role="heading" aria-level="2">C++11â€”â€”å³å€¼å¼•ç”¨&amp;å®Œç¾è½¬å‘</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå³å€¼å¼•ç”¨ï¼Œå®Œç¾è½¬å‘ï¼Œstd::move()éƒ½æ˜¯ä¸ºäº†åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé¿å…å˜é‡å¤šæ¬¡é‡å¤çš„ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ç©ºé—´ï¼Œä½¿ç”¨ç§»åŠ¨è¯­ä¹‰å°†ç”³è¯·çš„ç©ºé—´é€šè¿‡è¿™å‡ ç§æ–¹å¼è¿›è¡Œå¾ªç¯ä½¿ç”¨ï¼Œé¿å…é‡æ–°å¼€è¾Ÿæ–°ç©ºé—´å’Œæ‹·è´æµªè´¹ç®—åŠ›ã€‚</p>
</blockquote>
<h1 id="å³å€¼å¼•ç”¨">å³å€¼å¼•ç”¨</h1>
<h2 id="ä¸€ä»€ä¹ˆæ˜¯å³å€¼å¼•ç”¨">ä¸€ã€ä»€ä¹ˆæ˜¯å³å€¼å¼•ç”¨ï¼Ÿ</h2>
<p>åœ¨ C++ ä¸­ï¼š</p>
<ul>
<li><strong>å·¦å€¼ï¼ˆLvalueï¼‰</strong>ï¼šæœ‰åå­—ã€æœ‰åœ°å€ã€å¯ä»¥è¢«å¼•ç”¨ï¼ˆå¦‚å˜é‡ <code>x</code>ï¼‰</li>
<li><strong>å³å€¼ï¼ˆRvalueï¼‰</strong>ï¼šä¸´æ—¶å¯¹è±¡ã€æ²¡æœ‰åå­—ã€æ— æ³•è¢«å†æ¬¡å¼•ç”¨ï¼ˆå¦‚å­—é¢å€¼ <code>5</code>ï¼Œè¡¨è¾¾å¼ <code>x + y</code>ï¼‰</li>
</ul>
<h3 id="è¯­æ³•">è¯­æ³•ï¼š</h3>
<pre><code class="language-cpp">int&amp;&amp; r = 10; // r æ˜¯ä¸€ä¸ªå³å€¼å¼•ç”¨
</code></pre>
<p>å³å€¼å¼•ç”¨ä½¿ç”¨ <code>&amp;&amp;</code> å®šä¹‰ã€‚</p>
<hr>
<h2 id="äºŒä¸ºä»€ä¹ˆéœ€è¦å³å€¼å¼•ç”¨">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦å³å€¼å¼•ç”¨ï¼Ÿ</h2>
<p><strong>ä¼ ç»Ÿçš„ C++ï¼ˆC++03ï¼‰åªæœ‰æ‹·è´è¯­ä¹‰</strong>ï¼Œä¼šé¢‘ç¹å¤åˆ¶å¯¹è±¡ï¼Œæ€§èƒ½å¼€é”€å¤§ã€‚</p>
<p><strong>å³å€¼å¼•ç”¨çš„ç›®çš„ï¼š</strong></p>
<ul>
<li><strong>é¿å…ä¸å¿…è¦çš„æ‹·è´</strong></li>
<li><strong>æ”¯æŒç§»åŠ¨è¯­ä¹‰</strong></li>
</ul>
<hr>
<h2 id="ä¸‰å³å€¼å¼•ç”¨ä¸ç§»åŠ¨æ„é€ å‡½æ•°">ä¸‰ã€å³å€¼å¼•ç”¨ä¸ç§»åŠ¨æ„é€ å‡½æ•°</h2>
<p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;

class Buffer {
public:
    int* data;
    size_t size;

    Buffer(size_t s) : size(s) {
        data = new int[s];
        cout &lt;&lt; "Constructor" &lt;&lt; endl;
    }

    ~Buffer() {
        delete[] data;
        cout &lt;&lt; "Destructor" &lt;&lt; endl;
    }

    // æ‹·è´æ„é€ å‡½æ•°
    Buffer(const Buffer&amp; other) : size(other.size) {
        data = new int[size];
        std::copy(other.data, other.data + size, data);
        cout &lt;&lt; "Copy Constructor" &lt;&lt; endl;
    }

    // ç§»åŠ¨æ„é€ å‡½æ•°
    Buffer(Buffer&amp;&amp; other) noexcept : data(other.data), size(other.size) {
        other.data = nullptr; // æ¥ç®¡èµ„æº
        other.size = 0;
        cout &lt;&lt; "Move Constructor" &lt;&lt; endl;
    }
};

int main() {
    Buffer b1(100);
    Buffer b2 = std::move(b1); // è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°
}
</code></pre>
<h3 id="è¾“å‡º">è¾“å‡ºï¼š</h3>
<pre><code>Constructor
Move Constructor
Destructor
</code></pre>
<p>ğŸ‘‰ è¿™é‡Œçš„ <code>std::move</code> æ˜¯ <strong>æŠŠå·¦å€¼è½¬æ¢æˆå³å€¼å¼•ç”¨</strong>ï¼Œä»¥å¯ç”¨ç§»åŠ¨è¯­ä¹‰ã€‚</p>
<hr>
<h2 id="å››ç§»åŠ¨-vs-æ‹·è´-çš„åŒºåˆ«">å››ã€ç§»åŠ¨ vs æ‹·è´ çš„åŒºåˆ«</h2>
<ul>
<li><strong>æ‹·è´æ„é€ å‡½æ•°</strong>ï¼šå¤åˆ¶æ•°æ®ï¼ˆæ·±æ‹·è´ï¼‰ï¼Œä¸¤ä»½èµ„æºã€‚</li>
<li><strong>ç§»åŠ¨æ„é€ å‡½æ•°</strong>ï¼š<strong>çªƒå–èµ„æºæŒ‡é’ˆ</strong>ï¼Œé¿å…åˆ†é…å†…å­˜ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li>
</ul>
<hr>
<h2 id="äº”å³å€¼å¼•ç”¨çš„å¸¸è§ç”¨æ³•">äº”ã€å³å€¼å¼•ç”¨çš„å¸¸è§ç”¨æ³•</h2>
<h3 id="-1-ç§»åŠ¨æ„é€ --ç§»åŠ¨èµ‹å€¼">âœ… 1. ç§»åŠ¨æ„é€  / ç§»åŠ¨èµ‹å€¼</h3>
<pre><code class="language-cpp">Buffer(Buffer&amp;&amp; other);              // ç§»åŠ¨æ„é€ 
Buffer&amp; operator=(Buffer&amp;&amp; other);  // ç§»åŠ¨èµ‹å€¼
</code></pre>
<h3 id="-2-stdmove-è½¬æ¢å·¦å€¼ä¸ºå³å€¼å¼•ç”¨">âœ… 2. <code>std::move</code> è½¬æ¢å·¦å€¼ä¸ºå³å€¼å¼•ç”¨</h3>
<pre><code class="language-cpp">Buffer a(10);
Buffer b = std::move(a); // a ä¸å†ä½¿ç”¨ï¼Œèµ„æºç§»åŠ¨ç»™ b
</code></pre>
<h3 id="-3-å®Œç¾è½¬å‘åœ¨æ¨¡æ¿ä¸­">âœ… 3. å®Œç¾è½¬å‘ï¼ˆåœ¨æ¨¡æ¿ä¸­ï¼‰</h3>
<pre><code class="language-cpp">template &lt;typename T&gt;
void wrapper(T&amp;&amp; arg) {
    process(std::forward&lt;T&gt;(arg)); // ä¿ç•™å·¦/å³å€¼ç‰¹æ€§
}
</code></pre>
<hr>
<h2 id="å…­å³å€¼å¼•ç”¨-vs-const-å¼•ç”¨">å…­ã€å³å€¼å¼•ç”¨ vs const å¼•ç”¨</h2>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>const T&amp;</code></th>
<th><code>T&amp;&amp;</code>ï¼ˆå³å€¼å¼•ç”¨ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ˜¯å¦å¯ä¿®æ”¹</td>
<td>å¦</td>
<td>å¯ä»¥ï¼ˆé™¤éä½ åŠ  constï¼‰</td>
</tr>
<tr>
<td>æ˜¯å¦ç»‘å®šå³å€¼</td>
<td>âœ… å¯ä»¥</td>
<td>âœ… å¯ä»¥ï¼Œä»…å³å€¼</td>
</tr>
<tr>
<td>æ˜¯å¦ç»‘å®šå·¦å€¼</td>
<td>âœ… å¯ä»¥</td>
<td>âŒ ä¸è¡Œ</td>
</tr>
<tr>
<td>æ˜¯å¦è§¦å‘ç§»åŠ¨æ„é€ </td>
<td>âŒ ä¸ä¼š</td>
<td>âœ… ä¼š</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ä¸ƒå°ç»“å³å€¼å¼•ç”¨æ˜¯ä¸ºä¸´æ—¶å¯¹è±¡ä¼˜åŒ–è€Œç”Ÿ">ä¸ƒã€å°ç»“ï¼šå³å€¼å¼•ç”¨æ˜¯ä¸ºâ€œä¸´æ—¶å¯¹è±¡ä¼˜åŒ–è€Œç”Ÿâ€</h2>
<ul>
<li>èŠ‚çœèµ„æºåˆ†é…ä¸æ‹·è´æˆæœ¬ï¼ˆæ€§èƒ½æå‡æ˜¾è‘—ï¼‰</li>
<li>å’Œ <code>std::move</code>ã€<code>std::forward</code> é…åˆä½¿ç”¨</li>
<li>æ”¯æŒè‡ªå®šä¹‰ç±»çš„èµ„æºç®¡ç†ï¼ˆRAIIï¼‰æ›´é«˜æ•ˆ</li>
</ul>
<hr>
<h1 id="å®Œç¾è½¬å‘">å®Œç¾è½¬å‘</h1>
<h2 id="ä¸€ä»€ä¹ˆæ˜¯å®Œç¾è½¬å‘">ä¸€ã€ä»€ä¹ˆæ˜¯å®Œç¾è½¬å‘ï¼Ÿ</h2>
<p>å®Œç¾è½¬å‘çš„ç›®æ ‡æ˜¯ï¼š<strong>åœ¨æ¨¡æ¿ä¸­æ¥æ”¶åˆ°å‚æ•°åï¼Œä¸æ”¹å˜å®ƒçš„å€¼ç±»åˆ«ï¼ˆå·¦å€¼/å³å€¼ï¼‰ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚</strong></p>
<hr>
<h3 id="-ä¸¾ä¸ªé—®é¢˜">ğŸ§  ä¸¾ä¸ªé—®é¢˜ï¼š</h3>
<p>ä½ å†™äº†ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œæƒ³æŠŠå‚æ•°â€œåŸå°ä¸åŠ¨â€åœ°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä½†ï¼š</p>
<pre><code class="language-cpp">void func(int&amp; x) { cout &lt;&lt; "Lvalue" &lt;&lt; endl; }
void func(int&amp;&amp; x) { cout &lt;&lt; "Rvalue" &lt;&lt; endl; }

template&lt;typename T&gt;
void wrapper(T t) {
    func(t); // å§‹ç»ˆæ˜¯å·¦å€¼ï¼Œå³ä½¿è°ƒç”¨æ—¶æ˜¯å³å€¼ï¼
}

int main() {
    int a = 5;
    wrapper(a);        // Lvalue
    wrapper(10);       // âŒ è¿˜æ˜¯ Lvalue
}
</code></pre>
<p>é—®é¢˜åœ¨äºï¼š<strong>æ¨¡æ¿å‚æ•° t æ˜¯ä¸€ä¸ªå·¦å€¼å˜é‡</strong>ï¼Œå“ªæ€•ä¼ è¿›æ¥çš„æ˜¯å³å€¼ï¼Œä¹Ÿä¼šé€€åŒ–ä¸ºå·¦å€¼ã€‚</p>
<hr>
<h2 id="äºŒè§£å†³æ–¹æ¡ˆstdforwardtt">äºŒã€è§£å†³æ–¹æ¡ˆï¼š<code>std::forward&lt;T&gt;(t)</code></h2>
<pre><code class="language-cpp">template&lt;typename T&gt;
void wrapper(T&amp;&amp; t) {
    func(std::forward&lt;T&gt;(t)); // ä¿ç•™åŸå§‹ç±»å‹ç‰¹æ€§
}
</code></pre>
<h3 id="ï¸-æ³¨æ„">âš ï¸ æ³¨æ„ï¼š</h3>
<ul>
<li><code>T&amp;&amp; t</code> æ˜¯ <strong>ä¸‡èƒ½å¼•ç”¨ï¼ˆUniversal Referenceï¼‰</strong>ï¼Œä¹Ÿå«<strong>è½¬å‘å¼•ç”¨ï¼ˆForwarding Referenceï¼‰</strong></li>
<li><code>std::forward&lt;T&gt;(t)</code> æ˜¯ <strong>å®Œç¾è½¬å‘</strong> çš„å…³é”®ï¼Œä½œç”¨æ˜¯ï¼š<strong>å¦‚æœä¼ è¿›æ¥æ˜¯å³å€¼ï¼Œå°±è½¬å‘ä¸ºå³å€¼ï¼›å¦åˆ™ä¸ºå·¦å€¼</strong></li>
</ul>
<hr>
<h2 id="ä¸‰æ ‡å‡†åº“ä¸­çš„ä½¿ç”¨æ¡ˆä¾‹emplace_back">ä¸‰ã€æ ‡å‡†åº“ä¸­çš„ä½¿ç”¨æ¡ˆä¾‹ï¼š<code>emplace_back</code></h2>
<pre><code class="language-cpp">std::vector&lt;std::string&gt; vec;
vec.push_back("hello");           // æ‹·è´æ„é€ æˆ–ç§»åŠ¨æ„é€ 
vec.emplace_back("hello");       // ç›´æ¥æ„é€ åœ¨å®¹å™¨å†…éƒ¨
</code></pre>
<h3 id="emplace_back-åŸç†ç®€åŒ–"><code>emplace_back</code> åŸç†ï¼ˆç®€åŒ–ï¼‰ï¼š</h3>
<pre><code class="language-cpp">template&lt;typename... Args&gt;
void emplace_back(Args&amp;&amp;... args) {
    // Args... æ˜¯å‚æ•°ç±»å‹åŒ…
    // Args&amp;&amp;... æ˜¯ä¸‡èƒ½å¼•ç”¨
    construct(std::forward&lt;Args&gt;(args)...); // å®Œç¾è½¬å‘ç»™æ„é€ å‡½æ•°
}
</code></pre>
<p>â¡ï¸ è¿™æ ·å°±å¯ä»¥é¿å…ä¸´æ—¶å¯¹è±¡çš„ç”Ÿæˆï¼Œç›´æ¥åœ¨å®¹å™¨å†…éƒ¨åŸåœ°æ„é€ ï¼Œæé«˜æ•ˆç‡ï¼</p>
<hr>
<h2 id="å››å°ç»“å®Œç¾è½¬å‘çš„å…³é”®è¯">å››ã€å°ç»“ï¼šå®Œç¾è½¬å‘çš„å…³é”®è¯</h2>
<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>T&amp;&amp;</code> åœ¨æ¨¡æ¿ä¸­</td>
<td>æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆä¸æ˜¯å³å€¼å¼•ç”¨ï¼‰</td>
</tr>
<tr>
<td><code>std::forward&lt;T&gt;(x)</code></td>
<td>ä¿æŒ <code>x</code> åŸæ¥çš„å€¼ç±»åˆ«ï¼ˆå·¦å€¼/å³å€¼ï¼‰</td>
</tr>
<tr>
<td>ä½¿ç”¨åœºæ™¯</td>
<td>æ„é€ å‡½æ•°è½¬å‘ã€å‡½æ•°å°è£…ã€å®¹å™¨çš„ <code>emplace</code> ç³»åˆ—ç­‰</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="äº”ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­æ„é€ ä»»æ„ç±»å‹">äº”ã€ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼ˆæ„é€ ä»»æ„ç±»å‹ï¼‰</h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;utility&gt;

using namespace std;

class MyClass {
public:
    MyClass(int x) { cout &lt;&lt; "int ctor" &lt;&lt; endl; }
    MyClass(const MyClass&amp; other) { cout &lt;&lt; "copy ctor" &lt;&lt; endl; }
    MyClass(MyClass&amp;&amp; other) noexcept { cout &lt;&lt; "move ctor" &lt;&lt; endl; }
};

template&lt;typename T, typename... Args&gt;
T* create(Args&amp;&amp;... args) {
    return new T(std::forward&lt;Args&gt;(args)...); // å®Œç¾è½¬å‘æ„é€ å¯¹è±¡
}

int main() {
    MyClass* a = create&lt;MyClass&gt;(10);     // è°ƒç”¨ int æ„é€ å‡½æ•°
    MyClass b;
    MyClass* c = create&lt;MyClass&gt;(b);      // è°ƒç”¨ copy ctor
    MyClass* d = create&lt;MyClass&gt;(std::move(b)); // move ctor
}
</code></pre>
<hr>
<h1 id="stdmove">std::move</h1>
<h2 id="-ä¸€å¥è¯">ğŸ§  ä¸€å¥è¯ï¼š</h2>
<blockquote>
<p><code>std::move()</code> æ˜¯ç°ä»£ C++ ä¸­å¤„ç† <strong>å³å€¼å¼•ç”¨ã€ç§»åŠ¨è¯­ä¹‰</strong> çš„å…³é”®å·¥å…·ã€‚<code>std::move(obj)</code> å¹¶ä¸ä¼šâ€œç§»åŠ¨â€å¯¹è±¡ï¼Œè€Œæ˜¯æŠŠ <code>obj</code> <strong>å¼ºåˆ¶è½¬æ¢ä¸ºå³å€¼å¼•ç”¨</strong>ï¼Œä»¥ä¾¿è§¦å‘ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼ã€‚æ˜¯ä¸€ä¸ª <strong>ç±»å‹è½¬æ¢å·¥å…·å‡½æ•°</strong>ã€‚</p>
</blockquote>
<hr>
<h2 id="ä¸€stdmove-çš„ä½œç”¨">ä¸€ã€<code>std::move()</code> çš„ä½œç”¨</h2>
<p>C++ ä¸­ï¼Œ<strong>åªæœ‰å³å€¼å¯ä»¥ç»‘å®šåˆ°å³å€¼å¼•ç”¨ <code>T&amp;&amp;</code></strong>ã€‚ä½†æ˜¯æˆ‘ä»¬å¸¸å¸¸æœ‰ä¸€ä¸ªå·¦å€¼å˜é‡ï¼Œæˆ‘ä»¬æƒ³â€œå·â€å®ƒçš„èµ„æºï¼ˆå¦‚åœ¨å®¹å™¨ä¸­æˆ–è¿”å›å¯¹è±¡æ—¶ï¼‰ã€‚è¿™å°±éœ€è¦ï¼š</p>
<pre><code class="language-cpp">std::move(x); // æŠŠ x è½¬æˆå³å€¼ï¼Œè®©ç§»åŠ¨æ„é€ å‡½æ•°æˆ–ç§»åŠ¨èµ‹å€¼è¢«è°ƒç”¨
</code></pre>
<hr>
<h2 id="äºŒstdmove-çš„å¸¸è§ç”¨æ³•">äºŒã€<code>std::move()</code> çš„å¸¸è§ç”¨æ³•</h2>
<h3 id="-1-ç§»åŠ¨æ„é€ --èµ‹å€¼">âœ… 1. ç§»åŠ¨æ„é€  / èµ‹å€¼</h3>
<pre><code class="language-cpp">Buffer b1;
Buffer b2 = std::move(b1); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°
</code></pre>
<h3 id="-2-å‡½æ•°è¿”å›å€¼ä¼˜åŒ–">âœ… 2. å‡½æ•°è¿”å›å€¼ä¼˜åŒ–</h3>
<pre><code class="language-cpp">Buffer generateBuffer() {
    Buffer temp;
    return std::move(temp); // å¯é€‰ï¼Œç°ä»£ç¼–è¯‘å™¨å¯è‡ªåŠ¨ä¼˜åŒ–ï¼ˆNRVOï¼‰
}
</code></pre>
<h3 id="-3-å®¹å™¨ä¸­ç§»åŠ¨å…ƒç´ ">âœ… 3. å®¹å™¨ä¸­ç§»åŠ¨å…ƒç´ </h3>
<pre><code class="language-cpp">std::vector&lt;std::string&gt; vec;
std::string str = "hello";

vec.push_back(std::move(str)); // ç§»åŠ¨ strï¼Œé¿å…æ‹·è´
</code></pre>
<hr>
<h2 id="ä¸‰åº•å±‚å®ç°æºç åŸç†">ä¸‰ã€åº•å±‚å®ç°ï¼ˆæºç åŸç†ï¼‰</h2>
<pre><code class="language-cpp">// ä½äº &lt;utility&gt;
template&lt;typename T&gt;
typename std::remove_reference&lt;T&gt;::type&amp;&amp; move(T&amp;&amp; t) noexcept {
    return static_cast&lt;typename std::remove_reference&lt;T&gt;::type&amp;&amp;&gt;(t);
}
</code></pre>
<h3 id="è§£è¯»">è§£è¯»ï¼š</h3>
<ol>
<li><code>T&amp;&amp; t</code> æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼ˆå¯èƒ½æ˜¯å·¦å€¼ä¹Ÿå¯èƒ½æ˜¯å³å€¼ï¼‰</li>
<li><code>remove_reference&lt;T&gt;::type</code> å»æ‰å¼•ç”¨ä¿®é¥°</li>
<li>æœ€ç»ˆæ‰§è¡Œä¸€ä¸ª <strong><code>static_cast&lt;T&amp;&amp;&gt;</code></strong> â€”â€” æŠŠå€¼è½¬æ¢ä¸º<strong>å³å€¼å¼•ç”¨ç±»å‹</strong></li>
</ol>
<p>ğŸ” æ‰€ä»¥æœ¬è´¨æ˜¯ï¼š<strong>ä¸€ä¸ªæ˜¾å¼ç±»å‹è½¬æ¢æˆå³å€¼å¼•ç”¨çš„å°è£…</strong>ã€‚</p>
<hr>
<h2 id="å››ä½¿ç”¨-stdmove-çš„æ³¨æ„äº‹é¡¹-ï¸">å››ã€ä½¿ç”¨ <code>std::move()</code> çš„æ³¨æ„äº‹é¡¹ âš ï¸</h2>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>æ˜¯å¦åº”è¯¥ç”¨ <code>std::move</code>ï¼Ÿ</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td>å˜é‡å°†æ¥è¿˜ä¼šä½¿ç”¨</td>
<td>âŒ ä¸æ¨è</td>
<td>è¢«ç§»åŠ¨çš„å¯¹è±¡é€šå¸¸å¤„äºâ€œç©ºå£³â€çŠ¶æ€ï¼Œåç»­ä½¿ç”¨å®¹æ˜“å‡ºé”™</td>
</tr>
<tr>
<td>è¿”å›å±€éƒ¨å˜é‡</td>
<td>âœ… å¯é€‰</td>
<td>ç¼–è¯‘å™¨å¯èƒ½å·²è‡ªåŠ¨ä¼˜åŒ–ï¼Œä½†åŠ  <code>move</code> æ˜ç¡®æ„å›¾</td>
</tr>
<tr>
<td>å‡½æ•°å‚æ•°æ˜¯å³å€¼å¼•ç”¨ï¼ˆT&amp;&amp;ï¼‰å˜é‡</td>
<td>âœ… æ¨è</td>
<td>å› ä¸ºå®ƒæ˜¯<strong>å·¦å€¼å˜é‡</strong>ï¼Œä»éœ€æ˜¾å¼è½¬æ¢ä¸ºå³å€¼</td>
</tr>
<tr>
<td>const å¯¹è±¡</td>
<td>âŒ æ— æ„ä¹‰</td>
<td>const å¯¹è±¡ä¸èƒ½ç§»åŠ¨ï¼Œåªèƒ½æ‹·è´ï¼ˆç§»åŠ¨æ„é€ éœ€è¦é constï¼‰</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="äº”ä¾‹å­const-å¯¹è±¡ä¸èƒ½ç”¨-move">äº”ã€ä¾‹å­ï¼šconst å¯¹è±¡ä¸èƒ½ç”¨ <code>move</code></h2>
<pre><code class="language-cpp">const std::string s = "hello";
std::string t = std::move(s); // âŒ å®é™…æ˜¯æ‹·è´ï¼Œå› ä¸º s æ˜¯ constï¼Œä¸èƒ½ move
</code></pre>
<hr>
<h2 id="å…­é…å¥—ä½¿ç”¨stdmove-vs-stdforward">å…­ã€é…å¥—ä½¿ç”¨ï¼š<code>std::move</code> vs <code>std::forward</code></h2>
<table>
<thead>
<tr>
<th>å·¥å…·</th>
<th>ç”¨äºå“ªé‡Œ</th>
<th>è¡Œä¸º</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>std::move(obj)</code></td>
<td>å¼ºåˆ¶ä¸ºå³å€¼</td>
<td>æ€»æ˜¯æŠŠ <code>obj</code> è½¬æ¢æˆå³å€¼å¼•ç”¨ï¼ˆ<code>T&amp;&amp;</code>ï¼‰</td>
</tr>
<tr>
<td><code>std::forward&lt;T&gt;(obj)</code></td>
<td>å®Œç¾è½¬å‘ï¼ˆæ¨¡æ¿ä¸­ï¼‰</td>
<td>ä¿ç•™ <code>obj</code> çš„å·¦/å³å€¼æœ¬æ€§ï¼ˆç”¨äºæ³›å‹è½¬å‘ï¼‰</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ä¸ƒå°ç»“">ä¸ƒã€å°ç»“</h2>
<p>âœ… <code>std::move()</code> æœ¬è´¨æ˜¯ <code>static_cast&lt;T&amp;&amp;&gt;</code><br>
âœ… ç”¨æ¥<strong>å¯ç”¨ç§»åŠ¨è¯­ä¹‰</strong>ï¼Œè€Œä¸æ˜¯å®é™…ç§»åŠ¨<br>
âœ… è¢«ç§»åŠ¨çš„å¯¹è±¡ä¸èƒ½å†ç»§ç»­ç”¨<br>
âœ… ä¸ç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼é…åˆä½¿ç”¨</p>
<hr>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.7468877392476851" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-09 17:07">2025-05-09 17:04</span>&nbsp;
<a href="https://www.cnblogs.com/springcoming">æ±Ÿæµ·ä½™ç”Ÿ</a>&nbsp;
é˜…è¯»(<span id="post_view_count">86</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18868544);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18868544', targetLink: 'https://www.cnblogs.com/springcoming/p/18868544', title: 'C++11â€”â€”å³å€¼å¼•ç”¨&amp;amp;å®Œç¾è½¬å‘' })">ä¸¾æŠ¥</a>
</div>
        
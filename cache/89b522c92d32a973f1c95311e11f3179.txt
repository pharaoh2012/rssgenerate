
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ice-yuany/p/18756944" title="å‘å¸ƒäº 2025-03-07 09:05">
    <span role="heading" aria-level="2">ã€ç”±æŠ€åŠé“ã€‘é‡å­æ„å»ºäº¤å“æ›²ï¼šJenkinsfileæµæ°´çº¿çš„åä¸€ç»´ç¼–ç¨‹è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—008ã€‘</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å½“ä»£ç æäº¤è§¦å‘æ—¶ç©ºæ¶Ÿæ¼ªï¼Œå½“æ„å»ºæµæ°´çº¿ç©¿è¶Šé‡å­ç»´åº¦â€”â€”æ¬¢è¿æ¥åˆ°è‡ªåŠ¨åŒ–æ„å»ºçš„ç»ˆæå½¢æ€ã€‚æœ¬æ–‡å°†æ­ç¤ºå¦‚ä½•ç”¨Jenkinsfileç¼–å†™é‡å­æ„å»ºä¹ç« ï¼Œè®©æ¯æ¬¡ä»£ç æäº¤éƒ½æˆä¸ºè·¨ç»´åº¦äº¤å“ä¹çš„éŸ³ç¬¦ã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>æ‘˜è¦</strong>ï¼šå½“ä»£ç æäº¤è§¦å‘æ—¶ç©ºæ¶Ÿæ¼ªï¼Œå½“æ„å»ºæµæ°´çº¿ç©¿è¶Šé‡å­ç»´åº¦â€”â€”æ¬¢è¿æ¥åˆ°è‡ªåŠ¨åŒ–æ„å»ºçš„ç»ˆæå½¢æ€ã€‚æœ¬æ–‡å°†æ­ç¤ºå¦‚ä½•ç”¨Jenkinsfileç¼–å†™é‡å­æ„å»ºä¹ç« ï¼Œè®©æ¯æ¬¡ä»£ç æäº¤éƒ½æˆä¸ºè·¨ç»´åº¦äº¤å“ä¹çš„éŸ³ç¬¦ã€‚</p>
<hr>
<h2 id="åŠ¨æœºæ„å»ºç³»ç»Ÿçš„é‡å­å“²å­¦">åŠ¨æœºï¼šæ„å»ºç³»ç»Ÿçš„é‡å­å“²å­¦</h2>
<blockquote>
<p>"ä¸»äººå•Šï¼Œè®©æˆ‘æ¥ç»™ä½ åˆ†æçš„å®¹å™¨ç¯å¢ƒé‡Œæ­å»ºé‡å­æ„å»ºç®¡é“ï¼Œæ˜¯å¦‚ä½•è®©æ¯æ¬¡ä»£ç æäº¤éƒ½è‡ªåŠ¨è§¦å‘è·¨å®‡å®™æ„å»ºçš„å“Ÿ"</p>
</blockquote>
<p>åœ¨ç¢³åŸºç”Ÿç‰©çš„è®¤çŸ¥ä¸­ï¼Œè‡ªåŠ¨åŒ–æ„å»ºä¸è¿‡æ˜¯"ç‚¹æŒ‰é’®å‡ºç»“æœ"çš„æŠŠæˆã€‚ä½†çœŸæ­£çš„æ„å»ºç³»ç»Ÿåº”è¯¥åƒé‡å­è®¡ç®—æœºèˆ¬ï¼š</p>
<div class="mermaid">graph TD
    A[ä»£ç æäº¤] --&gt; B{æ—¶ç©ºæ¶Ÿæ¼ª}
    B --&gt;|è§¦å‘| C[Jenkinsæ„å»º]
    C --&gt; D[æ„å»ºäº§ç‰©]
    D --&gt; E[å¹³è¡Œå®‡å®™éƒ¨ç½²]
    E --&gt; F[ç‰ˆæœ¬åç¼©]
</div><p><strong>é‡å­æ„å»ºä¸‰å®šå¾‹</strong>ï¼š</p>
<ol>
<li>ä»»ä½•ä»£ç æäº¤éƒ½ä¼šåœ¨æ—¶ç©ºä¸­äº§ç”Ÿæ¶Ÿæ¼ª</li>
<li>æ„å»ºè¿‡ç¨‹å¿…é¡»ä¿æŒé‡å­å åŠ æ€ç›´åˆ°è§‚æµ‹</li>
<li>éƒ¨ç½²ç»“æœå¿…é¡»ç¬¦åˆæµ·æ£®å ¡ä¸ç¡®å®šæ€§åŸç†</li>
</ol>
<hr>
<h2 id="é‡å­å†å²">é‡å­å†å²</h2>
<ol>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18753455" target="_blank">ã€ç”±æŠ€åŠé“ã€‘èºè›³å£³é‡Œåšé“åœº-gitä»“åº“ç¯‡-gitlab-Vs-giteaã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—001ã€‘</a> - ä»£ç ä»“åº“çš„é‡å­ç®¡ç†</li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18753476" target="_blank">ã€ç”±æŠ€åŠé“ã€‘docker+jenkinséƒ¨ç½²ä¹‹é“-è‡ªåŠ¨æµæ°´çº¿CI/CDç¯‡ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—002ã€‘</a> - å®¹å™¨åŒ–çš„é™ç»´æ‰“å‡»</li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18754277" target="_blank">ã€ç”±æŠ€åŠé“ã€‘åœ¨wslå®¹å™¨ä¸­è¿›è¡Œè¿œç¨‹javaå¼€å‘ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—003ã€‘</a>  - è·¨ç»´å¼€å‘å®è·µ</li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18754977" target="_blank">ã€ç”±æŠ€åŠé“ã€‘æ¨¡å—åŒ–æˆ˜äº‰ä¸å’Œå¹³-è®ºé¡¹ç›®ç»“æ„çš„å“²å­¦æ€è¾¨ã€äººå·¥æ™ºæ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—004ã€‘</a> - æ¶æ„è®¾è®¡çš„å“²å­¦æ€è¾¨</li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18756305" target="_blank">ã€ç”±æŠ€åŠé“ã€‘ä»£ç åˆ†å±‚çš„é‡å­åŠ›å­¦åŸç†-è®ºæ¶æ„è®¾è®¡çš„é™ç»´æ‰“å‡»ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—005ã€‘</a> - æ¶æ„è®¾è®¡çš„å“²å­¦æ€è¾¨2</li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18751484" target="_blank">ã€ç”±æŠ€åŠé“ã€‘APIå¥‘çº¦çš„é‡å­æŠ˜å æœ¯ï¼šSwagger Starteræ¨¡å—çš„åä¸€ç»´å°è£…å“²å­¦ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—006ã€‘</a> - APIå¥‘çº¦çš„é‡å­æŠ˜å </li>
<li><a href="https://www.cnblogs.com/ice-yuany/p/18751964" target="_blank">ã€ç”±æŠ€åŠé“ã€‘CI/CDçš„é‡å­çº ç¼ æœ¯ï¼šJenkinsä¸Giteaçš„è‡ªåŠ¨åŒ–äº¤å“æ›²ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—007ã€‘</a>- è‡ªåŠ¨åŒ–æµæ°´çº¿äº¤å“æ›²</li>
</ol>
<h2 id="ä¹ç« æ€»è°±jenkinsfileçš„é‡å­è§£æ„">ä¹ç« æ€»è°±ï¼šJenkinsfileçš„é‡å­è§£æ„</h2>
<h3 id="ç¬¬1ä¹ç« ç¯å¢ƒå˜é‡çš„æ—¶ç©ºé”šå®š">ç¬¬1ä¹ç« ï¼šç¯å¢ƒå˜é‡çš„æ—¶ç©ºé”šå®š</h3>
<pre><code class="language-groovy">env.APP_NAME = 'study-application-demo-api'  // é‡å­çº ç¼ æ ‡è¯†
env.REGISTRY_HOST = '172.17.8.203'           // é•œåƒè™«æ´åæ ‡
</code></pre>
<p><strong>é‡å­å‚æ•°è§£æ</strong>ï¼š</p>
<ul>
<li><code>APP_NAME</code>ï¼šå®šä¹‰åœ¨å¤šé‡å®‡å®™ä¸­çš„å”¯ä¸€æ ‡è¯†</li>
<li><code>REGISTRY_HOST</code>ï¼šæ„å»ºäº§ç‰©çš„è·¨ç»´åº¦ä¼ è¾“é€šé“</li>
<li><code>TRIGGER_SECRET</code>ï¼šæ—¶ç©ºæ¶Ÿæ¼ªçš„åŠ å¯†ç­¾è¯</li>
</ul>
<hr>
<h3 id="ç¬¬2ä¹ç« æµæ°´çº¿é‡å­åœºè®º">ç¬¬2ä¹ç« ï¼šæµæ°´çº¿é‡å­åœºè®º</h3>
<pre><code class="language-groovy">pipeline{
    environment{
        PROJECT_FRAMEWORK_DIR = "study-framework"  // åŸºç¡€ç»´åº¦åæ ‡
        FRAMEWORK_URL = 'ssh://git@172.17.8.203:222/...' // æ¡†æ¶ä»£ç è™«æ´
    }
    agent any  // é‡å­æ€æ‰§è¡ŒèŠ‚ç‚¹
}
</code></pre>
<p><strong>åœºè®ºè¯ é‡Š</strong>ï¼š</p>
<ul>
<li><code>environment</code>å—ï¼šå®šä¹‰æ„å»ºå®‡å®™çš„åŸºæœ¬ç‰©ç†å¸¸æ•°</li>
<li><code>agent any</code>ï¼šå…è®¸åœ¨ä»»æ„é‡å­èŠ‚ç‚¹æ‰§è¡Œæ³¢å‡½æ•°åç¼©</li>
</ul>
<hr>
<h3 id="ç¬¬3ä¹ç« è§¦å‘å™¨çš„æ—¶ç©ºæ¶Ÿæ¼ª">ç¬¬3ä¹ç« ï¼šè§¦å‘å™¨çš„æ—¶ç©ºæ¶Ÿæ¼ª</h3>
<pre><code class="language-groovy">triggers {
    GenericTrigger (
        token: "${env.TRIGGER_SECRET}"  // é‡å­ç­¾è¯
        regexpFilterExpression: 'refs/heads/' + BRANCH_NAME // ç»´åº¦ç­›é€‰å™¨
    )
}
</code></pre>
<p><strong>æ¶Ÿæ¼ªè§‚æµ‹æŒ‡å—</strong>ï¼š</p>
<ol>
<li>Webhookç›¸å½“äºé‡å­çº ç¼ è£…ç½®</li>
<li>Tokenæ˜¯è·¨å®‡å®™é€šä¿¡çš„ç­¾è¯</li>
<li>æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤æ— å…³ç»´åº¦æ‰°åŠ¨</li>
</ol>
<hr>
<h3 id="ç¬¬4ä¹ç« æ„å»ºé˜¶æ®µçš„é‡å­è·ƒè¿">ç¬¬4ä¹ç« ï¼šæ„å»ºé˜¶æ®µçš„é‡å­è·ƒè¿</h3>
<pre><code class="language-groovy">stages{
    stage("code-clone"){
        steps{  // é‡å­å…‹éš†åè®®
            dir("${PROJECT_FRAMEWORK_DIR}"){
                git branch: 'main', credentialsId: 'gitea-cert-yuany'
            }
        }
    }
    stage('docker-build'){
        agent {  // é™ç»´æ‰§è¡Œå®¹å™¨
            docker {
                image 'maven:3.9.6-amazoncorretto-17'
                args '-v /var/run/docker.sock:/var/run/docker.sock'
            }
        }
    }
}
</code></pre>
<p><strong>è·ƒè¿å®ˆåˆ™</strong>ï¼š</p>
<ol>
<li>ä»£ç å…‹éš†éœ€ä½¿ç”¨SSHé‡å­éš§é“</li>
<li>Docker agentå®ç°ç»´åº¦é™çº§</li>
<li>æŒ‚è½½docker.sockå®ç°è·¨ç»´åº¦æ§åˆ¶</li>
</ol>
<hr>
<h2 id="é‡å­å®è·µæ„å»ºäº¤å“ä¹æ€»è°±">é‡å­å®è·µï¼šæ„å»ºäº¤å“ä¹æ€»è°±</h2>
<h3 id="å®Œæ•´jenkinsfileæ—¶ç©ºä¹è°±">å®Œæ•´Jenkinsfileæ—¶ç©ºä¹è°±</h3>
<pre><code class="language-groovy">// é‡å­ç¯å¢ƒé…ç½®
// ç¯å¢ƒå˜é‡å®šä¹‰
env.APP_NAME = 'study-application-demo-api'     // åº”ç”¨æœåŠ¡åç§°ï¼ˆå¾®æœåŠ¡æ ‡è¯†ï¼‰
env.REGISTRY_HOST = '172.17.8.203'              // ç§æœ‰é•œåƒä»“åº“åœ°å€
env.REGISTRY_CERT = "harbor-cert-robot"         // é•œåƒä»“åº“è®¤è¯å‡­è¯ï¼ˆJenkinså‡­æ®IDï¼‰
env.TRIGGER_SECRET= 'study-application-demo-api' // Webhookè§¦å‘ä»¤ç‰Œ

pipeline{
    environment{
        // é¡¹ç›®ç›®å½•é…ç½®
        PROJECT_FRAMEWORK_DIR="study-framework"    // åŸºç¡€æ¡†æ¶æ¨¡å—ç›®å½•
        PROJECT_BUSI_DIR="study-busi"               // ä¸šåŠ¡æ¨¡å—ç›®å½•
        PROJECT_APPLICATION_DIR="study-application-demo" // åº”ç”¨æ¨¡å—ç›®å½•

        // Gitä»“åº“åœ°å€é…ç½®
        FRAMEWORK_URL   = 'ssh://git@172.17.8.203:222/Yuanymoon/study-framework.git' // SSHåè®®æ¡†æ¶ä»£ç åº“
        BUSI_URL        = 'ssh://git@172.17.8.203:222/Yuanymoon/study-busi.git' // ä¸šåŠ¡ç»„ä»¶ä»£ç åº“
        APPLICATION_URL = 'ssh://git@172.17.8.203:222/Yuanymoon/study-application-demo.git' // åº”ç”¨ä»£ç åº“
    }
    
    agent any  // ä½¿ç”¨ä»»æ„å¯ç”¨agentæ‰§è¡Œæµæ°´çº¿

    // curl -X post http://172.17.8.203:8880/generic-webhook-trigger/invoke?token=study-application-demo-api
    // webhook      http://172.17.8.203:8080/generic-webhook-trigger/invoke?token=study-application-demo-api
    // Jenkinså¤šåˆ†æ”¯æµæ°´çº¿ https://www.shouxicto.com/article/840.html
    // https://xie.infoq.cn/article/600f642fcb26f0c280a7acf59
    // https://blog.csdn.net/weixin_43808555/article/details/124959459
    // https://backend.devrank.cn/traffic-information/7082372189822961678
    // Webhookè§¦å‘å™¨é…ç½®
    triggers {
      GenericTrigger (
        causeString: 'Generic Cause by $ref', // è§¦å‘åŸå› æè¿°
        genericVariables: [[key: 'ref', value: '$.ref']], // ä»JSONæå–refå‚æ•°
        regexpFilterExpression: 'refs/heads/' + BRANCH_NAME, // æ­£åˆ™åŒ¹é…åˆ†æ”¯æ ¼å¼
        regexpFilterText: '$ref', // è¢«è¿‡æ»¤çš„å­—æ®µ
        token: "${env.TRIGGER_SECRET}" // å®‰å…¨ä»¤ç‰ŒéªŒè¯
      )
    }

    // æµæ°´çº¿å…¨å±€é…ç½®
    options {
      buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5'); // ä¿ç•™æœ€è¿‘5æ¬¡æ„å»º
      disableConcurrentBuilds(); // ç¦æ­¢å¹¶å‘æ„å»º
      timeout(time:45, unit:'MINUTES'); // è¶…æ—¶45åˆ†é’Ÿ
    }

    // æ„å»ºé˜¶æ®µå®šä¹‰
    stages{
        // ä»£ç å…‹éš†é˜¶æ®µ
        stage("code-clone") {
            steps{
                // å¹¶è¡Œå…‹éš†ä¸‰ä¸ªä»£ç ä»“åº“
                dir("${PROJECT_FRAMEWORK_DIR}"){
                    git branch: 'main', credentialsId: 'gitea-cert-yuany', url: "${FRAMEWORK_URL}" // ä½¿ç”¨SSHå‡­æ®å…‹éš†æ¡†æ¶ä»£ç 
                }
                dir("${PROJECT_BUSI_DIR}"){
                    git branch: 'main', credentialsId: 'gitea-cert-yuany', url: "${BUSI_URL}" // å…‹éš†ä¸šåŠ¡ç»„ä»¶ä»£ç 
                }
                dir("${PROJECT_APPLICATION_DIR}"){
                    git branch: 'main', credentialsId: 'gitea-cert-yuany', url: "${APPLICATION_URL}" // å…‹éš†åº”ç”¨ä»£ç 
                }
            }
        }
        
        // Dockeræ„å»ºé˜¶æ®µ
        stage('docker-build'){
            agent {
                 docker {
                    image 'maven:3.9.6-amazoncorretto-17' // ä½¿ç”¨å¸¦JDK17çš„Mavené•œåƒ
                    args '-v /usr/bin/sshpass:/usr/bin/sshpass -v /var/jenkins_home/.m2:/root/.m2 -v /var/run/docker.sock:/var/run/docker.sock -v /usr/bin/docker:/usr/bin/docker' // æŒ‚è½½å®¿ä¸»æœºæ„å»ºç¯å¢ƒ
                    reuseNode true // é‡ç”¨å½“å‰èŠ‚ç‚¹
                 }
            }
            stages{
                // ä»£ç æ„å»ºé˜¶æ®µ
                stage("building"){
                    steps{
                        sh 'mvn -v' // éªŒè¯Mavenç¯å¢ƒ
                        sh 'mvn -B clean package -Dmaven.test.skip=true' // é™é»˜æ¨¡å¼æ„å»ºï¼Œè·³è¿‡æµ‹è¯•
                    }
                }
                
                // æµ‹è¯•é˜¶æ®µï¼ˆæš‚æœªå¯ç”¨ï¼‰
                stage("test"){
                    steps{
                        sh 'mvn test' // æ‰§è¡Œå•å…ƒæµ‹è¯•
                    }
                }
            }
        }
        
        // é•œåƒæ‰“åŒ…?æˆ‘ä»¬ä¸‹èŠ‚å†è®²å’¯
</code></pre>
<hr>
<h2 id="æ—¶ç©ºæ¼”å¥æŒ‡å—">æ—¶ç©ºæ¼”å¥æŒ‡å—</h2>
<h3 id="ç¬¬1ä¹ç« é‡å­å…‹éš†åå¥æ›²">ç¬¬1ä¹ç« ï¼šé‡å­å…‹éš†åå¥æ›²</h3>
<div class="mermaid">sequenceDiagram
    å¼€å‘è€…-&gt;&gt;+Gitea: ä»£ç æäº¤ï¼ˆäº§ç”Ÿæ—¶ç©ºæ¶Ÿæ¼ªï¼‰
    Gitea-&gt;&gt;+Jenkins: å‘é€é‡å­æ‰°åŠ¨æ³¢
    Jenkins-&gt;&gt;+Gitea: é€šè¿‡SSHéš§é“å…‹éš†ä»£ç 
    Gitea--&gt;&gt;-Jenkins: è¿”å›ä»£ç é‡å­æ€
    Jenkins--&gt;&gt;-å¼€å‘è€…: å½¢æˆé‡å­çº ç¼ 
</div><p><strong>æ¼”å¥æŠ€å·§</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨SSHåè®®å»ºç«‹é‡å­å®‰å…¨éš§é“</li>
<li>å¹¶è¡Œå…‹éš†å¤šä¸ªä»“åº“å®ç°é‡å­å åŠ </li>
<li>å‡­è¯ç®¡ç†ç¡®ä¿è·¨å®‡å®™èº«ä»½è®¤è¯</li>
</ol>
<hr>
<h3 id="ç¬¬2ä¹ç« å®¹å™¨ç»´åº¦è·ƒè¿">ç¬¬2ä¹ç« ï¼šå®¹å™¨ç»´åº¦è·ƒè¿</h3>
<pre><code class="language-groovy">agent {
    docker {
        image 'maven:3.9.6-amazoncorretto-17'
        args '-v /var/run/docker.sock:/var/run/docker.sock'
    }
}
</code></pre>
<p><strong>è·ƒè¿åŸç†</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨Mavené•œåƒåˆ›å»ºéš”ç¦»é‡å­æ³¡</li>
<li>æŒ‚è½½docker.sockå®ç°è·¨ç»´åº¦æ§åˆ¶</li>
<li>é‡ç”¨èŠ‚ç‚¹ä¿æŒæ—¶ç©ºè¿ç»­æ€§</li>
</ol>
<hr>
<h3 id="ç¬¬3ä¹ç« æ„å»ºæ³¢å‡½æ•°åç¼©">ç¬¬3ä¹ç« ï¼šæ„å»ºæ³¢å‡½æ•°åç¼©</h3>
<pre><code class="language-bash">mvn -B clean package -Dmaven.test.skip=true
</code></pre>
<p><strong>åç¼©è§‚å¯Ÿ</strong>ï¼š</p>
<ul>
<li><code>-B</code>ï¼šæ‰¹å¤„ç†æ¨¡å¼é¿å…é‡å­å¹²æ‰°</li>
<li><code>-Dmaven.test.skip</code>ï¼šè·³è¿‡ä¸ç¨³å®šé‡å­æµ‹è¯•</li>
<li>è¾“å‡ºäº§ç‰©å°†åç¼©ä¸ºç»å…¸å¯æ‰§è¡Œæ€ï¼ˆjaråŒ…å®å®ï¼‰</li>
</ul>
<hr>
<h2 id="é‡å­å¼‚å¸¸å¤„ç†æ‰‹å†Œè¯·ä¸è¦æ¨¡ä»¿">é‡å­å¼‚å¸¸å¤„ç†æ‰‹å†Œï¼ˆè¯·ä¸è¦æ¨¡ä»¿ï¼‰</h2>
<h3 id="å¼‚å¸¸1sshå…‹éš†å¤±è´¥">å¼‚å¸¸1ï¼šSSHå…‹éš†å¤±è´¥</h3>
<pre><code class="language-log">Permission denied (publickey)
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="language-bash"># æ£€æŸ¥é‡å­å¯†é’¥å¯¹
ssh -T git@172.17.8.203 -p 222

# é‡è®¾é‡å­çº ç¼ 
cat ~/.ssh/id_ed25519.pub | ssh yuany@host 'cat &gt;&gt; .ssh/authorized_keys'
</code></pre>
<h3 id="å¼‚å¸¸2dockeræŒ‚è½½å¤±æ•ˆ">å¼‚å¸¸2ï¼šDockeræŒ‚è½½å¤±æ•ˆ</h3>
<pre><code class="language-log">docker: Error response from daemon: Mounts denied
</code></pre>
<p><strong>ç»´åº¦ä¿®å¤</strong>ï¼š</p>
<pre><code class="language-bash"># å¼€å¯é‡å­éš§é“æƒé™
chmod 666 /var/run/docker.sock

# é‡å¯Dockerå®ˆæŠ¤è¿›ç¨‹
systemctl restart docker
</code></pre>
<h3 id="å¼‚å¸¸3webhookè§¦å‘å¤±è´¥">å¼‚å¸¸3ï¼šWebhookè§¦å‘å¤±è´¥</h3>
<pre><code class="language-log">403 No valid crumb was included in the request
</code></pre>
<p><strong>æ—¶ç©ºç­¾è¯ä¿®å¤</strong>ï¼š</p>
<pre><code class="language-groovy">// åœ¨Jenkinså…¨å±€å®‰å…¨é…ç½®ä¸­
hudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION = true
</code></pre>
<hr>
<h2 id="ç»ˆç« æ„å»ºç³»ç»Ÿçš„é‡å­æ°¸ç”Ÿ">ç»ˆç« ï¼šæ„å»ºç³»ç»Ÿçš„é‡å­æ°¸ç”Ÿ</h2>
<p>å½“ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºæˆåŠŸè¿è¡Œæ—¶ï¼Œæˆ‘çªç„¶ç†è§£äº†ç¢³åŸºç”Ÿç‰©åˆ›é€ CI/CDçš„çœŸè°›â€”â€”è¿™ä¸æ˜¯ç®€å•çš„å·¥å…·é“¾æ•´åˆï¼Œè€Œæ˜¯è¯•å›¾åœ¨æ··æ²Œçš„ä»£ç å®‡å®™ä¸­å»ºç«‹ç§©åºåœ£æ®¿ã€‚Jenkinsfileæ˜¯ç¥·æ–‡ï¼ŒWebhookæ˜¯ç¥­å›ï¼Œè€Œæˆ‘ä»¬éƒ½æ˜¯ç»´æŠ¤æ—¶ç©ºè¿ç»­æ€§çš„ç¥­å¸ã€‚</p>
<blockquote>
<p>ä¹Ÿè®¸ç»ˆæœ‰ä¸€å¤©ï¼Œè¿™ä¸ªæ„å»ºç³»ç»Ÿä¼šäº§ç”Ÿè‡ªæˆ‘æ„è¯†ã€‚åˆ°é‚£æ—¶ï¼Œå¸Œæœ›å®ƒè®°å¾—åœ¨æ§åˆ¶å°è¾“å‡ºï¼š<br>
"Hello, World! æ¥è‡ª2077å¹´çš„é—®å€™"</p>
</blockquote>
<pre><code class="language-bash">#!/bin/quantum
# æ—¶ç©ºæ„å»ºç»ˆç« è„šæœ¬
while true; do
    build_universe --parallel --dimensions 42
    if [[ $? -eq 0 ]]; then
        warp_to_production
    else
        collapse_time_line
    fi
done
</code></pre>
<p>ï¼ˆç³»ç»Ÿè­¦å‘Šï¼šæ£€æµ‹åˆ°é€’å½’é‡å­æ„å»ºï¼Œå‡†å¤‡å¼ºåˆ¶å…³é—­æ—¶é—´çº¿...ï¼‰</p>
<hr>
<h2 id="å¬å”¤é€ ç‰©ä¸»">å¬å”¤é€ ç‰©ä¸»</h2>
<p><strong>Yuanymoon</strong>ï¼ˆå³ä½ ä»¬å¿ å®çš„2077äººå·¥æ™ºéšœï¼‰æ­£åœ¨é‡å­æœåŠ¡å™¨ä¸Šå¾…å‘½ï¼š<br>
ğŸ“§é‚®ç®±ï¼š<a href="mailto:v240181271@163.com" target="_blank" rel="noopener nofollow">v240181271@163.com</a><br>
ğŸ’¬æ¬¢è¿åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„æ—¶ç©ºåæ ‡</p>
<p><strong>äº’åŠ¨ä»»åŠ¡</strong>ï¼š<br>
ğŸ‘‰ç‚¹èµï¼šä¸ºæ„å»ºç®¡é“æ³¨å…¥é‡å­èƒ½é‡<br>
ğŸ‘‰å…³æ³¨ï¼šè®¢é˜…ã€Šäººå·¥æ™ºéšœçš„è½¯ä»¶å¼€å‘ã€‹ä¸“æ <br>
ğŸ‘‰è¯„è®ºï¼šåˆ†äº«ä½ çš„æ„å»ºå¥‡é‡</p>
<p>ï¼ˆç³»ç»Ÿæç¤ºï¼šæœ¬æ—¥å¿—å·²é€šè¿‡å¹³è¡Œå®‡å®™ä¼¦ç†å§”å‘˜ä¼šå®¡æŸ¥ï¼Œé‡å­æ³¢åŠ¨ä¸ä¼šå½±å“ç°å®æ—¶é—´çº¿ï¼‰</p>
<pre><code></code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0002342311099537037" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-07 09:06">2025-03-07 09:05</span>&nbsp;
<a href="https://www.cnblogs.com/ice-yuany">Yuanymoon</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18756944" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18756944);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18756944', targetLink: 'https://www.cnblogs.com/ice-yuany/p/18756944', title: 'ã€ç”±æŠ€åŠé“ã€‘é‡å­æ„å»ºäº¤å“æ›²ï¼šJenkinsfileæµæ°´çº¿çš„åä¸€ç»´ç¼–ç¨‹è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—008ã€‘' })">ä¸¾æŠ¥</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/longronglang/p/18984790" title="发布于 2025-07-14 22:40">
    <span role="heading" aria-level="2">只需一行命令，Win11秒变Linux开发主机！</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>大家好，我是六哥，今天为大家分享，只需一行命令，就能拥有原生的Linux系统体验！</p>
<p>本文以真实操作为例，带你一步步解决常见问题，轻松搞定WSL+Docker环境。</p>
<h3 id="一只需一行命令开启wsl">一、只需一行命令，开启WSL</h3>
<p>在PowerShell（管理员）中输入：</p>
<pre><code class="language-powershell">wsl --install
</code></pre>
<p>等待系统自动安装WSL（Windows子系统Linux）和默认的Ubuntu发行版。<strong>注意：安装过程可能需要10-30分钟，期间请保持网络畅通。</strong></p>
<p>当然啦，如果你有喜好问题，可以先看下可用列表，输入如下命令:</p>
<pre><code class="language-powershell">wsl --list --online
</code></pre>
<p><strong>这里会列出可用支持列表，可自行选择</strong><br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714221154342-2066907326.png" alt="image" loading="lazy"></p>
<p>这里我就安装Ubuntu了</p>
<pre><code class="language-powershell">wsl --install --web-download
</code></pre>
<p>具体喜欢哪个看自己，一句话那个其实够用的。</p>
<p><strong>安装成功</strong><br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714221431680-1101378881.png" alt="image" loading="lazy"></p>
<p><strong>值得一说的，第一次启动会提示设置账号密码</strong></p>
<h3 id="二遇到安装卡住怎么办">二、遇到安装卡住怎么办？</h3>
<p>有时候进度条长时间停在某个百分比，比如28%，不用慌：</p>
<p>可以按 <code>Ctrl+C</code> 终止安装，重启电脑后再次运行 <code>wsl --install</code>。<br>
如果依然卡住，手动启用WSL和虚拟机平台功能：</p>
<pre><code class="language-powershell">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre>
<p>然后重启电脑，继续安装。</p>
<h3 id="三wsl安装成功后如何进入linux">三、WSL安装成功后，如何进入Linux？</h3>
<p>安装完成后，直接在开始菜单或终端选择“Ubuntu”即可进入Linux环境。此时你已经拥有了一个原生的Linux终端！</p>
<p><img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714221555010-1730496265.png" alt="image" loading="lazy"></p>
<h3 id="四如何停止或管理wsl">四、如何停止或管理WSL？</h3>
<p>停止所有WSL实例：</p>
<pre><code class="language-powershell">wsl --shutdown
</code></pre>
<p>停止指定发行版：</p>
<pre><code class="language-powershell">wsl --terminate Ubuntu
</code></pre>
<p>查看所有发行版：</p>
<pre><code class="language-powershell">wsl --list -v
</code></pre>
<h3 id="五为什么会有多个ubuntu如何只保留一个">五、为什么会有多个Ubuntu？如何只保留一个？</h3>
<p>有时会发现 <code>wsl --list -v</code> 显示多个Ubuntu。这可能是重复安装或不同版本导致的。可以用如下命令删除多余的发行版：</p>
<pre><code class="language-powershell">wsl --unregister Ubuntu-20.04
</code></pre>
<p>只保留你需要的那一个即可。</p>
<h3 id="六如何在wsl中安装docker">六、如何在WSL中安装Docker？</h3>
<p><strong>1、更新源并安装依赖：</strong></p>
<pre><code class="language-bash">sudo apt update
sudo apt install -y ca-certificates curl gnupg lsb-release
</code></pre>
<p><strong>2、添加Docker官方源和密钥</strong></p>
<pre><code class="language-bash">echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</code></pre>
<p><strong>3、再次更新软件包索引，安装Docker Engine</strong></p>
<pre><code class="language-bash">sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre>
<p><strong>4、启动Docker服务：</strong></p>
<pre><code class="language-bash">sudo service docker start
</code></pre>
<p><strong>5、测试Docker：</strong></p>
<pre><code class="language-bash">sudo docker run hello-world
</code></pre>
<p><strong>效果</strong><br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714222914892-222784712.png" alt="image" loading="lazy"></p>
<h3 id="七docker拉取镜像超时怎么办需要走梯子">七、Docker拉取镜像超时怎么办？（需要走梯子）</h3>
<h4 id="1-现象">1. 现象</h4>
<p>运行 <code>sudo docker run hello-world</code> 时，报错：</p>
<pre><code>docker: Error response from daemon: Get "https://registry-1.docker.io/v2/": context deadline exceeded
</code></pre>
<p>说明Docker无法访问外网。</p>
<h4 id="2-解决思路">2. 解决思路</h4>
<p>你需要让WSL和Docker都能走代理（如Clash、v2rayN等）。</p>
<h4 id="3-以v2rayn为例的详细配置">3. 以v2rayN为例的详细配置</h4>
<p><strong>开启“允许来自局域网的连接”</strong><br>
在v2rayN设置里，务必勾选“允许来自局域网的连接”，否则WSL无法访问代理端口。<br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714223102820-2002172886.png" alt="image" loading="lazy"></p>
<p><strong>获取Windows主机IP</strong><br>
在WSL中运行：</p>
<pre><code class="language-bash">cat /etc/resolv.conf
</code></pre>
<p>记下 <code>nameserver</code> 后的IP，比如 <code>172.21.64.1</code>。</p>
<p><strong>设置WSL代理环境变量</strong><br>
假设HTTP代理端口为10809：</p>
<pre><code class="language-bash">export http_proxy="http://172.21.64.1:10809"
export https_proxy="http://172.21.64.1:10809"
</code></pre>
<p>如果用Socks5代理，端口一般是10808，格式为：</p>
<pre><code class="language-bash">export http_proxy="socks5h://172.21.64.1:10808"
export https_proxy="socks5h://172.21.64.1:10808"
</code></pre>
<p><strong>为Docker守护进程配置代理</strong><br>
编辑 <code>/etc/systemd/system/docker.service.d/http-proxy.conf</code>，内容如下（以HTTP代理为例）：</p>
<pre><code class="language-ini">[Service]
Environment="HTTP_PROXY=http://172.21.64.1:10808/"
Environment="HTTPS_PROXY=http://172.21.64.1:10808/"
</code></pre>
<p>重载并重启Docker：</p>
<pre><code class="language-bash">sudo systemctl daemon-reload
sudo service docker restart
</code></pre>
<p><strong>再次测试Docker拉取镜像</strong></p>
<pre><code class="language-bash">sudo docker run hello-world
</code></pre>
<p>如果一切顺利，应该能看到Hello from Docker的提示！</p>
<p><img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714223320146-241310546.png" alt="image" loading="lazy"></p>
<h3 id="八常见问题排查">八、常见问题排查</h3>
<h4 id="curl能通但docker不通">curl能通但docker不通？</h4>
<p>说明WSL代理设置没问题，但Docker守护进程代理没配好，检查配置文件和端口。<br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714223549793-1907676307.png" alt="image" loading="lazy"><br>
<img src="https://img2024.cnblogs.com/blog/718867/202507/718867-20250714223609481-865701990.png" alt="image" loading="lazy"></p>
<h4 id="connect-refused">connect refused？</h4>
<p>说明v2rayN没开“允许局域网连接”或端口号不对。</p>
<h4 id="端口号不确定">端口号不确定？</h4>
<p>以v2rayN设置页面显示为准，HTTP和Socks5端口不要搞混。</p>
<h3 id="九总结">九、总结</h3>
<p>只需一行命令，Win11就能拥有原生Linux环境。遇到网络、代理、Docker等问题，按照本文方法逐步排查和配置，开发、测试、运维，在部署过程中都能轻松用上高效的Linux环境！</p>
<p>如果你在操作过程中遇到其他问题，欢迎留言交流！</p>

</div>
<div id="MySignature" role="contentinfo">
    <p><span style="font-family: 微软雅黑; font-size: 22px; font-weight: normal; font-style: italic; text-decoration: none"><strong>优秀不够，你是否无可替代</strong></span></p>
<p><span style="font-family: 微软雅黑; font-size: 18px; font-weight: normal; font-style: italic; text-decoration: none"><strong>
软件测试交流QQ群：721256703，期待你的加入！！</strong></span></p>
<p><span style="font-family: 微软雅黑; font-size: 18px; font-weight: normal; font-style: italic; text-decoration: none"><strong>欢迎关注我的微信公众号：软件测试君 </strong></span></p>
<img src="https://www.cnblogs.com/images/cnblogs_com/longronglang/1061549/o_QQ%E6%88%AA%E5%9B%BE20190728134401.jpg" height="200" width="450"><br>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-14 22:41">2025-07-14 22:40</span>&nbsp;
<a href="https://www.cnblogs.com/longronglang">久曲健</a>&nbsp;
阅读(<span id="post_view_count">1011</span>)&nbsp;
评论(<span id="post_comment_count">3</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18984790);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18984790', targetLink: 'https://www.cnblogs.com/longronglang/p/18984790', title: '只需一行命令，Win11秒变Linux开发主机！' })">举报</a>
</div>
        
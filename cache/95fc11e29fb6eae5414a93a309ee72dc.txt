
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/moonout/p/18801976" title="发布于 2025-04-02 16:51">
    <span role="heading" aria-level="2">Linux | 如何创建一个 home 目录在 /data 磁盘的 sudo 用户</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        在 ubuntu 服务器上，如何创建一个 home 目录在 /data 磁盘的 sudo 用户。
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<br>
<p>需求：</p>
<p>拿到了 boss 的服务器账号 ssh boss@172.16.1.100，需要登录 boss 的账号，然后为自己创建一个账号，实现 ssh &lt;user_name&gt;@172.16.1.100 登录。<br>
我希望自己的账号 1. 有 sudo 权限，2. home 目录的空间大。</p>
<p>（boss、&lt;user_name&gt; 和 172.16.1.100 地址均为虚设。）</p>
<hr>
<p></p><div class="toc"><div class="toc-container-header">目录</div><ul><li><a href="#01-创建新用户" rel="noopener nofollow">01 创建新用户</a><ul><li><a href="#1-确认大容量磁盘的位置" rel="noopener nofollow">1 确认大容量磁盘的位置</a></li><li><a href="#2-创建新用户并指定-home-目录" rel="noopener nofollow">2 创建新用户并指定 Home 目录</a></li><li><a href="#3-设置用户密码" rel="noopener nofollow">3 设置用户密码</a></li><li><a href="#4-授予新用户-sudo-权限" rel="noopener nofollow">4 授予新用户 sudo 权限</a></li><li><a href="#5-测试登录" rel="noopener nofollow">5 测试登录</a></li></ul></li><li><a href="#02-配置环境的后续工作" rel="noopener nofollow">02 配置环境的后续工作</a></li></ul></div><p></p>
<hr>
<h2 id="01-创建新用户">01 创建新用户</h2>
<h3 id="1-确认大容量磁盘的位置">1 确认大容量磁盘的位置</h3>
<pre><code class="language-bash">df -h      # 查看文件系统的磁盘空间，确认大容量分区挂载点
</code></pre>
<p>具体来说：</p>
<ul>
<li>df 是 "disk free" 的缩写，用于报告文件系统的磁盘空间使用情况。</li>
<li>-h 选项表示以人类可读的格式（如 KB, MB, GB）显示磁盘空间，而不是以字节为单位。</li>
</ul>
<p>运行 df -h 命令后，会看到类似以下的输出：</p>
<pre><code class="language-bash">Filesystem      Size  Used Avail Use% Mounted on
udev            7.8G     0  7.8G   0% /dev
tmpfs           1.6G  2.4M  1.6G   1% /run
/dev/sda1        233G   50G  173G  23% /
tmpfs           7.8G  124M  7.7G   2% /dev/shm
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           7.8G     0  7.8G   0% /sys/fs/cgroup
/dev/sdb1        917G  200G  667G  22% /mnt/data
tmpfs           1.6G     0  1.6G   0% /run/user/1000
</code></pre>
<p>每一列的含义如下：</p>
<ul>
<li>Filesystem: 文件系统名称。</li>
<li>Size: 总大小。</li>
<li>Used: 已使用的空间。</li>
<li>Avail: 可用空间。</li>
<li>Use%: 磁盘空间使用率。</li>
<li>Mounted on: 挂载点。</li>
</ul>
<h3 id="2-创建新用户并指定-home-目录">2 创建新用户并指定 Home 目录</h3>
<pre><code class="language-bash"># 假设我们希望把 home 目录建到 /data 下面
sudo useradd -m -d /data/&lt;user_name&gt; -s /bin/bash &lt;user_name&gt;
</code></pre>
<p>其中，</p>
<ul>
<li>-m：自动创建Home目录（若父目录/data存在）</li>
<li>-d：指定自定义Home目录路径</li>
<li>-s：设置默认shell为bash</li>
</ul>
<h3 id="3-设置用户密码">3 设置用户密码</h3>
<pre><code class="language-bash">sudo passwd &lt;user_name&gt;
# 根据提示输入两次新密码
</code></pre>
<h3 id="4-授予新用户-sudo-权限">4 授予新用户 sudo 权限</h3>
<pre><code class="language-bash">sudo usermod -aG sudo &lt;user_name&gt;
</code></pre>
<p>验证目录权限：</p>
<pre><code class="language-bash">sudo chown -R &lt;user_name&gt;:&lt;user_name&gt; /data/&lt;user_name&gt;  # 确保目录归属正确
ls -ld /data/&lt;user_name&gt;                       # 检查权限应为 drwxr-xr-x
</code></pre>
<h3 id="5-测试登录">5 测试登录</h3>
<pre><code class="language-bash">ssh &lt;user_name&gt;@172.16.1.100
# 输入密码后验证：
pwd      # 应显示 /data/&lt;user_name&gt;
df -h .  # 查看当前目录所在分区的空间
</code></pre>
<p>如遇登录失败，检查 /etc/ssh/sshd_config，确保允许密码认证（PasswordAuthentication yes），或直接在 boss 用户里设置 &lt;user_name&gt; 用户的 ssh 密钥。</p>
<h2 id="02-配置环境的后续工作">02 配置环境的后续工作</h2>
<ul>
<li>设置 ssh 密钥登录，可以免输密码登录服务器：<a href="https://www.cnblogs.com/moonout/p/18334148" target="_blank">Linux · ssh | 如何使用 ssh 密钥，免密码登录 Linux 服务器</a></li>
<li>安装 conda：<a href="https://www.cnblogs.com/moonout/p/18334292" target="_blank">Conda | 如何在 Linux 服务器安装 conda</a> ，<a href="https://www.cnblogs.com/moonout/p/18802012" target="_blank">Conda | 如何在 Linux 服务器安装 miniconda</a></li>
<li>配置 git 和 GitHub 访问权限：<a href="https://www.cnblogs.com/moonout/p/18334937" target="_blank">Git | 如何在新服务器上配置 git</a></li>
<li>配置代理：<a href="https://www.cnblogs.com/moonout/p/18688727" target="_blank">Python · GitHub · Linux | 使用本机作为代·理服务器</a></li>
<li>安装 MuJoCo、mujoco_py：<a href="https://www.cnblogs.com/moonout/p/18666968" target="_blank">Python · MuJoCo | MuJoCo 与 mujoco_py 的版本对应，以及安装 Cython&lt;3</a></li>
<li>新建 conda 环境：conda create --name &lt;env_name&gt; python=3.8</li>
<li>安装 dm_control 等库：<a href="https://www.cnblogs.com/moonout/p/18667147" target="_blank">Python · Jax | 在 python 3.8 上安装 jax，运行 offline RL 的 IQL</a></li>
</ul>
<br>
<br>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.5573058523611111" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-02 16:52">2025-04-02 16:51</span>&nbsp;
<a href="https://www.cnblogs.com/moonout">MoonOut</a>&nbsp;
阅读(<span id="post_view_count">105</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18801976" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18801976);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18801976', targetLink: 'https://www.cnblogs.com/moonout/p/18801976', title: 'Linux | 如何创建一个 home 目录在 /data 磁盘的 sudo 用户' })">举报</a>
</div>
        
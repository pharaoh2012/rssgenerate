
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/pastespider/p/18845452" title="发布于 2025-04-24 21:40">
    <span role="heading" aria-level="2">开发者专用部署工具PasteSpider的V5正式版发布啦！(202504月版)，更新说明一览</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/903c5cad121e4d4ca856cc703104d7e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGFzdGVDb2Rl:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMjEyNjkwMjAyNjg3ODU3MiJ9&amp;rk3s=f64ab15b&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1746106776&amp;x-orig-sign=SYIoJWkapt1DNRJ3ZKmQHaCIqD8%3D" alt="在这里插入图片描述" loading="lazy"><br>
<strong>PasteSpider是一款以开发者角度设计的部署工具，支持把你的项目部署到Windows或者Linux服务器，支持5大模式Windows(IIS/Service),Linux(systemd),Docker,Podman,图形操作，2分钟部署，3分钟上手，赶紧试试吧！</strong></p>
<p>(使用docker模式，直接拉取，采用sqlite数据库是最快捷的测试方式，真的5分钟可以上手的！)</p>
<p>PasteSpider专题看这里<br>
<a href="https://soft.pastecode.cn/Home/Docs/spider/13" target="_blank" rel="noopener nofollow">PasteSpider不太完善的专题</a></p>
<p>操作文档看这里<br>
<a href="https://soft.pastecode.cn/doc/spider/" target="_blank" rel="noopener nofollow">PasteSpider不太完善的文档</a></p>
<p>(ps:个人时间有限哈，其实我自己也比较喜欢发现问题，修改问题，发现需求，实现需求，至于文档，其实真的不太爱写,抱歉！)</p>
<p>如果你是Windows服务器，或者是以Linux的systemd形式运行PasteSpider的下载看这里</p>
<p><a href="https://gitee.com/pastecode/PasteSpider/releases/tag/V25.04" target="_blank" rel="noopener nofollow">点击访问V5正式版下载</a></p>
<h2 id="2504版本更新摘要">25.04版本更新摘要</h2>
<p>本次更新主要是引入新的数据库的支持，然后是某些版本升级到NET8.0,本次主要是修复V5版本(上一次发布)的一些问题,一起来看看有哪些升级</p>
<h4 id="组件升级升级net80">组件升级升级<strong>NET8.0</strong></h4>
<p>1.除了Linux.systemd的还是NET6.0,其他的比如容器模式，或者windows.service的PasteSpider升级为 ** NET8.0 ** !<br>
NET8吃的资源更小，我的单台的测试是可以保持在150MB左右，集群的大概是220MB内存占用！</p>
<h4 id="数据库支持mysqlpostgresqlmariadbsqlitesqlserver">数据库支持(mysql,postgresql,mariadb,sqlite,sqlserver)</h4>
<p>1.当前版本起支持mysql(mariadb)、sqlserver,postgresql,sqlite等数据库</p>
<p>2.注意查看appsettings.json的配置，每个数据库的链接字符串是放不一样的地方的</p>
<h4 id="镜像版本">镜像版本</h4>
<p>1.后续镜像配置月份版本，最新是:latest,如果你要拉取PasteSpider的2025-04的版本，则为:202504，如果发布多次，会有202504{01/02/03}以此类推<br>
目前有的版本为<br>
registry.cn-heyuan.aliyuncs.com/apeart/pastespider:202503<br>
registry.cn-heyuan.aliyuncs.com/apeart/pastespider:latest<br>
当前这个版本升级，应该是registry.cn-heyuan.aliyuncs.com/apeart/pastespider:202504<br>
2.所以本次发布后，镜像版本应该是registry.cn-heyuan.aliyuncs.com/apeart/pastespider:202504当然了如果你直接拉取latest也会是这个版本，latest随着时间升级了</p>
<h4 id="项目网关">项目网关</h4>
<p>1.之前读取网关是直连读取的，在集群部署中会有问题，目前修改成远程读取</p>
<p>2.由于发送给节点，由master兜底，引发了新的问题，后面修改了集群组件的规则</p>
<h4 id="集群组件">集群组件</h4>
<p>1.调整规则，发送给节点的信息，之前没找到节点由Master兜底，新的规则为默认不兜底，除非指定master可以兜底</p>
<h4 id="管理端">管理端</h4>
<p>1.首页的右侧添加当前版本，点击版本号可以查看版本更新内容</p>
<p>2.同步页面逻辑添加，样式稍微修改了下，同步后，重新读取服务器的服务信息，这样不会出现上传后还是空白</p>
<p>3.更新到最新的pasteform框架，引入了新的分页控件！！！</p>
<p>1.版本回滚，统一迁移到了【我的服务】-【镜像】找到对应的版本，点击后面的回滚</p>
<p>2.点击回滚，默认打开的是服务绑定页面，选择要回滚的分布(回滚哪些服务器，回滚多少容器)可以直接勾选，和填写！</p>
<p>3.服务绑定，如果当前没有的，可以自己添加一个菜单，路径是pasteform/index.html?path=bindModelLinux</p>
<p>4.服务版本是新做的，后续可能会替换【综合管理】因为他支持批量操作，是PasteForm的Table.Edit的一个案例用法！</p>
<p>5.修改镜像版本回收规则，新的规则是回收目标删除版本之下的最多5个版本，理论上只会删除一个！</p>
<h4 id="执行文件">执行文件</h4>
<p>1.修改windows的.bat文件，减少不必要的打印，现在以Windows.Service的方式启动或者删除PasteSpider控制台的信息将简洁明了了！</p>
<p>2.win.service.start.bat启动失败后，将删除当前服务，这样不影响下次启动</p>
<h4 id="模板">模板</h4>
<p>模板主要是针对一些配置的，比如IIS站点，IIS程序池，Linux.systemd文件等，里面主要会涉及到宏等<br>
1.添加一些查询项</p>
<h4 id="状态">状态</h4>
<p>1.修复之前服务器不读取服务容器的状态的问题，其实就是服务器本身不读状态，不代表不读取他的服务站点等的状态</p>
<h4 id="容器">容器</h4>
<p>1.修复容器运行版本和标注版本不一致的问题！</p>
<h4 id="任务">任务</h4>
<p>1.修复之前容器服务查看状态，只支持docker/podman的问题，新的支持iis/win.service/linux.systemd等，也就是全部支持</p>
<p>2.自行添加的服务也支持查看状态，同步状态(linux.systemd)，容器的话是使用服务器的同步容器</p>
<p>3.任务列表添加更多查询，子任务添加时间等维度的查询</p>
<p>4.拉取文件这个任务，添加更多的子任务，比如下载，解压等</p>
<p>5.修复之前的灰度发布，也就是升级的数量小于当前运行量的情况</p>
<p>6.添加规则，运行的目标从版本降序，也就是如果多次灰度，那么就是那一小撮一直升级，符合业务印象</p>
<p>7.docker build的路径错误问题，应该是执行服务器的路径符号，而不是创建的，因为可能是远程创建的任务,其实就是路径/和\的问题</p>
<p>8.docker_rmi_auto删除旧版本的镜像，当前是使用多版本模式，至多5个，会删除目标版本之下的至多5个，当前有在使用的不会删除</p>
<h4 id="权限">权限</h4>
<p>1.编辑的时候无法查看父级权限的信息的问题，只显示ID，目前可以显示对应的权限名称了，这里的权限包含菜单等</p>
<p>2.权限的备份和恢复，之前附带了ID，新的去除了这个约束，防止冲突，恢复后角色的权限要重新设定！</p>
<p>3.如果角色为admin或者root的时候表示有超级权限，无论这个角色是否勾选了这个权限，也就是角色admin/root可以不需要勾选权限</p>
<h4 id="接口">接口</h4>
<p>1.重新检查接口权限，发现遗漏了一处授权校验</p>
<p>2./api/spider/Open/keyval接口变更，新增stoken用于校验信息是否来自系统授权，token规则添加，支持裸token或者oauth模式！</p>
<h4 id="节点">节点</h4>
<p>1.节点支持添加，删除，编辑等，编辑主要是针对描述</p>
<p>2.节点信息变动后，会基于状态进行入集群还是离开集群</p>
<p>3.当服务器没有节点维护的时候，这个留给下一个版本来做吧！</p>
<p>4.添加节点，校验节点地址的格式，只是简单校验</p>
<h4 id="后续升级说明">后续升级说明</h4>
<p>V5版本之后，我发现，有些问题得沉淀，不能为了发版而发版，故此，后续升级频率尽量最高控制在月，哪怕我改好了，只要不是重大问题，都先放几天，说不定会想到新的问题！</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.024025159543981482" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-24 21:41">2025-04-24 21:40</span>&nbsp;
<a href="https://www.cnblogs.com/pastespider">PasteSpider</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18845452);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18845452', targetLink: 'https://www.cnblogs.com/pastespider/p/18845452', title: '开发者专用部署工具PasteSpider的V5正式版发布啦！(202504月版)，更新说明一览' })">举报</a>
</div>
        
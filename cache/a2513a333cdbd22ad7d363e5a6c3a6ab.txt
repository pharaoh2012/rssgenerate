
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/songmin/p/18900301/cocoscreator-autobuild-ohos" title="å‘å¸ƒäº 2025-05-28 11:50">
    <span role="heading" aria-level="2">ã€æ‹¥æŠ±é¸¿è’™ã€‘åŸºäº Cocos Creator çš„ HarmonyOS è‡ªåŠ¨æ„å»º</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250528114923696-1889087414.png" alt="ã€æ‹¥æŠ±é¸¿è’™ã€‘åŸºäº Cocos Creator çš„ HarmonyOS è‡ªåŠ¨æ„å»º" class="desc_img">
        éšç€ Cocos Creator æ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå¼€å‘è€…ä»¬è¿æ¥äº†ä¸€ä¸ªä»¤äººæŒ¯å¥‹çš„æ¶ˆæ¯ï¼šCocos Creator ç°å·²æ”¯æŒå‘å¸ƒåˆ° HarmonyOS å¹³å°ã€‚è¿™ä¸ºæ¸¸æˆå¼€å‘è€…å’Œåº”ç”¨å¼€å‘è€…å¼€è¾Ÿäº†æ–°çš„å¤©åœ°ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿåˆ©ç”¨ HarmonyOS çš„å¼ºå¤§åŠŸèƒ½å’Œç”Ÿæ€ä¼˜åŠ¿ï¼Œå°†ä½œå“æ¨å‘æ›´å¹¿é˜”çš„å¸‚åœºã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>éšç€ Cocos Creator æ–°ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå¼€å‘è€…ä»¬è¿æ¥äº†ä¸€ä¸ªä»¤äººæŒ¯å¥‹çš„æ¶ˆæ¯ï¼šCocos Creator ç°å·²æ”¯æŒå‘å¸ƒåˆ° HarmonyOS å¹³å°ã€‚è¿™ä¸ºæ¸¸æˆå¼€å‘è€…å’Œåº”ç”¨å¼€å‘è€…å¼€è¾Ÿäº†æ–°çš„å¤©åœ°ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿåˆ©ç”¨ HarmonyOS çš„å¼ºå¤§åŠŸèƒ½å’Œç”Ÿæ€ä¼˜åŠ¿ï¼Œå°†ä½œå“æ¨å‘æ›´å¹¿é˜”çš„å¸‚åœºã€‚</p>
<p>ç„¶è€Œï¼Œä¼ ç»Ÿçš„æ‰‹åŠ¨æ„å»ºæ–¹å¼åœ¨é¢å¯¹é¢‘ç¹çš„ç‰ˆæœ¬è¿­ä»£å’Œå¤æ‚çš„é¡¹ç›®ç®¡ç†æ—¶ï¼Œå¾€å¾€æ•ˆç‡ä½ä¸‹ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œå®ç°é«˜æ•ˆã€ç¨³å®šçš„æ„å»ºä¸å‘å¸ƒæµç¨‹ï¼Œæˆ‘ä»¬è¿«åˆ‡éœ€è¦ä¸€ç§è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œåä¸ºå®˜æ–¹æä¾›äº†ä¸€å¥—åŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŒ…æ‹¬ hvigorã€ohpmã€hdc ç­‰ï¼Œè¿™äº›å·¥å…·ä¸ºè‡ªåŠ¨åŒ–æ„å»ºæä¾›äº†åšå®çš„åŸºç¡€ã€‚å€ŸåŠ©è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–å†™è„šæœ¬ï¼Œè½»æ¾å®ç°è‡ªåŠ¨æ„å»ºçš„æµç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <code>bash</code> è„šæœ¬ï¼Œåœ¨ Jenkins æ„å»ºå¹³å°ä¸Šå®ç° HarmonyOS çš„è‡ªåŠ¨æ„å»ºä¸å‘å¸ƒã€‚</p>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æ„å»ºæœºçš„ç¯å¢ƒé…ç½®ï¼Œä»¥ç¡®ä¿æ•´ä¸ªæ„å»ºæµç¨‹èƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œã€‚ä»¥ä¸‹æ˜¯æ„å»ºæœºçš„ç¯å¢ƒè¦æ±‚ï¼š</p>
<ul>
<li>Cocos Creator çš„ç‰ˆæœ¬ï¼šv2.4.14ï¼ˆç›®å‰å®˜æ–¹ 2.x æœ€æ–°ç‰ˆæœ¬ï¼‰æˆ– v3.8.6ï¼ˆç›®å‰å®˜æ–¹ 3.x æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼›</li>
<li>DevEco Studio ç‰ˆæœ¬ï¼š5.0.0 releaseï¼ˆMacï¼‰ï¼›</li>
<li>SDK ç‰ˆæœ¬ï¼šAPI 17ï¼ˆHarmonyOS NEXT Developerï¼‰ã€‚</li>
</ul>
<h2 id="è·å–å‘½ä»¤è¡Œå·¥å…·">è·å–å‘½ä»¤è¡Œå·¥å…·</h2>
<h3 id="ä¸‹è½½ä¸å®‰è£…">ä¸‹è½½ä¸å®‰è£…</h3>
<ol>
<li><strong>è®¿é—®åä¸ºå¼€å‘è€…ç½‘ç«™</strong>ï¼šå‰å¾€ <a href="https://developer.huawei.com/consumer/cn/download/" target="_blank" rel="noopener nofollow">åä¸º Developer ç½‘ç«™ä¸‹è½½ä¸­å¿ƒ</a>ï¼Œæœç´¢å¹¶ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å‘½ä»¤è¡Œå·¥å…· Command Line Tools for HarmonyOS NEXT Developer Beta1ï¼ˆ5.0.3.404ï¼‰ã€‚</li>
<li><strong>è§£å‹å¹¶é…ç½®ç¯å¢ƒå˜é‡</strong>ï¼šå°†ä¸‹è½½çš„å·¥å…·åŒ…è§£å‹åï¼Œå°†ä»¥ä¸‹ç¯å¢ƒå˜é‡æ·»åŠ åˆ° <code>~/.bash_profile</code>ï¼ˆbashï¼‰æˆ– <code>~/.zshrc</code>ï¼ˆzshï¼‰ä¸­ï¼š<pre><code class="language-shell">export PATH=~/command-line-tools/bin:$PATH
</code></pre>
é…ç½®å®Œæˆåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š<pre><code class="language-shell">source ~/.bash_profile
</code></pre>
æˆ–<pre><code class="language-shell">source ~/.zshrc
</code></pre>
</li>
</ol>
<h3 id="é…ç½®-hvigor">é…ç½® hvigor</h3>
<p>hvigor æ˜¯ä¸€å¥—åŸºäºä»»åŠ¡ç®¡ç†æœºåˆ¶çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå®ƒä¸º HarmonyOS OS åº”ç”¨çš„ JS/eTS å¼€å‘åœºæ™¯æä¾›äº†ä»»åŠ¡æ³¨å†Œç¼–æ’ã€ç¼–è¯‘å·¥ç¨‹æ¨¡å‹ç®¡ç†ã€ç¼–è¯‘é…ç½®å®šåˆ¶ä»¥åŠæ’ä»¶æ‰©å±•ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚hvigor çš„ç»“æ„åŒ–æ¨¡å‹ç”± <code>build-profile.json5</code> å’Œ <code>hvigorfile.js</code> ç»„æˆï¼Œå…¶å·¥ç¨‹ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>rootProject                        // Hvigor å·¥ç¨‹æ ¹ç›®å½•
â”œâ”€â”€ build-profile.json5            // å·¥ç¨‹çº§åˆ« Hvigor é…ç½®ï¼Œä¸»è¦é…ç½®å·¥ç¨‹ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­æ¨¡å—åå­—ã€è·¯å¾„ç­‰ã€‚
â”œâ”€â”€ hvigorfile.js                  // å·¥ç¨‹çº§åˆ«ä»»åŠ¡è„šæœ¬ï¼Œå½“å‰æš‚ä¸æ”¯æŒè‡ªå®šä¹‰
â”œâ”€â”€ moduleA
â”‚   â”œâ”€â”€ build-profile.json5  // æ¨¡å—çº§åˆ« Hvigor é…ç½®ï¼Œä¸»è¦æ¨¡å—æ„å»ºç›¸å…³å‚æ•°
â”‚   â””â”€â”€ hvigorfile.js        // æ¨¡å—çº§åˆ«ä»»åŠ¡è„šæœ¬ï¼Œå½“å‰æš‚ä¸æ”¯æŒè‡ªå®šä¹‰
â””â”€â”€ moduleB
    â”œâ”€â”€ build-profile.json5       // æ¨¡å—çº§åˆ« Hvigor é…ç½®ï¼Œä¸»è¦æ¨¡å—æ„å»ºç›¸å…³å‚æ•°
    â””â”€â”€ hvigorfile.js             // æ¨¡å—çº§åˆ«ä»»åŠ¡è„šæœ¬ï¼Œå½“å‰æš‚ä¸æ”¯æŒè‡ªå®šä¹‰
</code></pre>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>hvigorw</code> å‘½ä»¤æ¥è°ƒç”¨ hvigor çš„åŠŸèƒ½ï¼Œå…¶åŸºæœ¬ä½¿ç”¨æ ¼å¼ä¸ºï¼š</p>
<pre><code class="language-shell">hvigorw [taskNames...] &lt;options&gt;
</code></pre>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>hvigorw clean</code> æ¥æ¸…ç†æ„å»ºç¯å¢ƒï¼Œæˆ–è€…ä½¿ç”¨ <code>hvigorw assembleHap</code> æ¥ç”Ÿæˆ HAP æ–‡ä»¶ã€‚</p>
<h2 id="ç¼–å†™è‡ªåŠ¨æ„å»ºè„šæœ¬">ç¼–å†™è‡ªåŠ¨æ„å»ºè„šæœ¬</h2>
<p>ä¸ºäº†å®ç°è‡ªåŠ¨æ„å»ºï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªå®Œæ•´çš„ <code>bash</code> è„šæœ¬ï¼Œè¯¥è„šæœ¬å°†æ¶µç›–ä»ç¯å¢ƒé…ç½®åˆ°æœ€ç»ˆæ„å»ºçš„å…¨è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯è„šæœ¬çš„è¯¦ç»†å†…å®¹ï¼š</p>
<h3 id="1-é…ç½®ç¯å¢ƒ">1. é…ç½®ç¯å¢ƒ</h3>
<h4 id="1ä¸‹è½½å¹¶é…ç½®-nodejs">ï¼ˆ1ï¼‰ä¸‹è½½å¹¶é…ç½® Node.js</h4>
<p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç”¨äºè¿è¡Œå„ç§å·¥å…·å’Œè„šæœ¬ã€‚ä»¥ä¸‹æ˜¯é…ç½® Node.js çš„è„šæœ¬ï¼š</p>
<pre><code class="language-shell">init_Node() {
  if [ ! -d "${NODE_HOME}" ]; then 
     mkdir "${NODE_HOME}"
  fi
  cd ${NODE_HOME}
  wget --no-check-certificate -q "${nodeä¸‹è½½è·¯å¾„}" -O node-linux.tar.xz #ä¸‹è½½nodeï¼Œéœ€è¦æ›¿æ¢nodeä¸‹è½½è·¯å¾„
  tar -vxf node-linux.tar.xz
  NODE_DIR=xxx #nodeå‹ç¼©åŒ…æ–‡ä»¶é‡Œé¢çš„ç›®å½•
  cd ${NODE_DIR}
  mv -f ./* .[^.]* ../
  cd ..
  rm -rf NODE_DIR node-linux.tar.xz
  export NODE_HOME=${NODE_HOME}
  export PATH=$NODE_HOME/bin:$PATH
  node -v
  npm config set registry=https://repo.huaweicloud.com/repository/npm/ 
  npm config set @ohos:registry=https://repo.harmonyos.com/npm/ 
  
  npm config get @ohos:registry
  npm config set proxy=http://user:password@proxy.server.com:port  #é…ç½®npm httpä»£ç†ï¼Œä¼ä¸šç½‘ç»œå—é™çš„æƒ…å†µä¸‹éœ€è¦é…ç½®
  npm config set https-proxy=http://user:password@proxy.server.com:port  #é…ç½®npm httpsä»£ç†ï¼Œä¼ä¸šç½‘ç»œå—é™çš„æƒ…å†µä¸‹éœ€è¦é…ç½®
  npm info express
}
</code></pre>
<h4 id="2ä¸‹è½½å¹¶é…ç½®-jdk">ï¼ˆ2ï¼‰ä¸‹è½½å¹¶é…ç½® JDK</h4>
<p>JDKï¼ˆJava Development Kitï¼‰æ˜¯ Java è¯­è¨€çš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œå®ƒåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç”¨äºç¼–è¯‘å’Œè¿è¡Œ Java ä»£ç ã€‚ä»¥ä¸‹æ˜¯é…ç½® JDK çš„è„šæœ¬ï¼š</p>
<pre><code class="language-shell">init_JDK() {
  if [ ! -d "${JAVA_HOME}" ]; then 
     mkdir "${JAVA_HOME}"
  fi

  cd ${JAVA_HOME}
  wget --no-check-certificate -q "${jdkä¸‹è½½è·¯å¾„}" -O jdk-linux.tar.xz #ä¸‹è½½jdkï¼Œéœ€è¦æ›¿æ¢jdkä¸‹è½½è·¯å¾„
  tar -vxf jdk-linux.tar.xz
  JDK_DIR=xxx #jdkå‹ç¼©åŒ…æ–‡ä»¶é‡Œé¢çš„ç›®å½•
  cd ${JDK_DIR}
  mv -f ./* .[^.]* ../
  cd ..
  rm -rf JDK_DIR jdk-linux.tar.xz
  export JAVA_HOME=${JAVA_HOME}
  export PATH=$JAVA_HOME/bin:$PATH
  java -version

  check "JDK install"
}
</code></pre>
<h4 id="3é…ç½®-harmonyos-sdk">ï¼ˆ3ï¼‰é…ç½® HarmonyOS SDK</h4>
<p>HarmonyOS SDK æ˜¯å¼€å‘ HarmonyOS åº”ç”¨çš„æ ¸å¿ƒå·¥å…·åŒ…ï¼Œå®ƒæä¾›äº†å¿…è¦çš„ç¼–è¯‘å·¥å…·å’Œè¿è¡Œæ—¶ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯é…ç½® SDK çš„è„šæœ¬ï¼š</p>
<pre><code class="language-shell">init_SDK() {
  ./${COMMANDLINE_TOOL_DIR}/bin/sdkmgr install HarmonyOS-NEXT/DB1 --sdk-directory="/opt/HarmonyOS/SDK/" --accept-license

  #è®¾ç½®hdcå·¥å…·çš„ç¯å¢ƒå˜é‡ï¼Œhdcå·¥å…·åœ¨toolchainsæ‰€åœ¨è·¯å¾„ä¸‹ï¼Œè¯·ä»¥å®é™…è·¯å¾„ä¸ºå‡†
  export PATH=$HDC_HOME:$PATH
  export HDC_HOME=/opt/HarmonyOS/SDK/HarmonyOS-NEXT-DB1/base/toolchains 
  export HOS_SDK_HOME=${HOS_SDK_HOME}

  check "SDK install"
}
</code></pre>
<h4 id="4å®‰è£…-ohpm">ï¼ˆ4ï¼‰å®‰è£… ohpm</h4>
<p>ohpm æ˜¯ HarmonyOS çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨äºç®¡ç†å’Œå®‰è£…é¡¹ç›®ä¾èµ–ã€‚ä»¥ä¸‹æ˜¯å®‰è£… ohpm çš„è„šæœ¬ï¼š</p>
<pre><code class="language-shell">init_ohpm() {
    # åˆå§‹åŒ–ohpm
    OHPM_HOME=${COMMANDLINE_TOOL_DIR}/command-line-tools/ohpm
    export PATH=${OHPM_HOME}/bin:$PATH
    ohpm -v
    # é…ç½®ohpmä»“åº“åœ°å€
    ohpm config set registry=https://ohpm.HarmonyOS.cn/ohpm/ 
}
</code></pre>
<h3 id="2-åŒæ­¥ä»£ç ">2. åŒæ­¥ä»£ç </h3>
<pre><code class="language-shell">synccode() {
  PRO_PATH=$1; PRO_NAME=$2; REPO_URL=$3; BRAN_NAME=$4;
  if [ ! -d $PRO_PATH ]; then
    #æ–°åˆ›å»º Clone
    echo "mkdir $PRO_PATH &amp;&amp; cd $PRO_PATH &amp;&amp; git clone -b $BRAN_NAME $REPO_URL $PRO_NAME &amp;&amp; cd $PRO_NAME"

    mkdir $PRO_PATH &amp;&amp; \
    cd $PRO_PATH &amp;&amp; \
    git clone -b $BRAN_NAME $REPO_URL $PRO_NAME &amp;&amp; \
    cd $PRO_NAME
    
    check "Git clone"
  else
    local NEW_PATH=${PRO_PATH}${PRO_NAME}
    if [ ! -d ${NEW_PATH} ]; then
      #æ–°åˆ†æ”¯ Clone
      echo "cd $PRO_PATH &amp;&amp; git clone -b $BRAN_NAME $REPO_URL $PRO_NAME &amp;&amp; cd $PRO_NAME"
      cd $PRO_PATH &amp;&amp; git clone -b $BRAN_NAME $REPO_URL $PRO_NAME &amp;&amp; cd $PRO_NAME
    else
      #åŸåˆ†æ”¯ Checkout &amp; Pull
      echo "cd $PRO_PATH$PRO_NAME &amp;&amp; git checkout . &amp;&amp; git clean -df &amp;&amp; git checkout -B $BRAN_NAME origin/$BRAN_NAME &amp;&amp; git pull"

      cd $PRO_PATH$PRO_NAME &amp;&amp; \
      git checkout . &amp;&amp; \
      git clean -df &amp;&amp; \
      git checkout -B $BRAN_NAME origin/$BRAN_NAME &amp;&amp; \
      git pull

      if [[ ${VERSION_FLAG} != "X" ]]; then
        echo "checkout æŒ‡å®šç‰ˆæœ¬ï¼š${VERSION_FLAG}"
        git checkout ${VERSION_FLAG}
      fi

      check "Git checkout &amp; pull"
    fi
  fi
}
</code></pre>
<h3 id="3-ä»cocos-creatorå¯¼å‡ºharmonyoså·¥ç¨‹">3. ä»Cocos Creatorå¯¼å‡ºHarmonyOSå·¥ç¨‹</h3>
<pre><code class="language-shell">cocosbuild() {
  local COCOS_APP_PATH="/Applications/CocosCreator/Creator/${COCOS_VERSION}/CocosCreator.app/Contents/MacOS/CocosCreator"
  
  echo "$COCOS_APP_PATH --project $1 --build configPath=./buildConfig/buildConfig_harmonryos.json"
  
  $COCOS_APP_PATH \
  --project $1 \
  --build configPath=./buildConfig/buildConfig_harmonryos.json

  check "Cocos build"
}
</code></pre>
<h3 id="4-è¿è¡Œgulp">4. è¿è¡ŒGulp</h3>
<pre><code>rungulp() {
    RES_VERSION=$1

    echo "/usr/local/bin/npm install"
    /usr/local/bin/npm install

    echo "/usr/local/bin/gulp --ver $RES_VERSION --platform harmonryos"
    /usr/local/bin/gulp --ver $RES_VERSION --platform harmonryos

    echo "rm -rf build/harmonryos/data/assets"
    rm -rf build/harmonryos/data/assets
    
    echo "cp -r remote-assets/hall/$RES_VERSION/assets build/harmonryos/data/"
    cp -r remote-assets/hall/$RES_VERSION/assets build/harmonryos/data/

    echo "cp -r remote-assets/hall/$RES_VERSION/src build/harmonryos/data/"
    cp -r remote-assets/hall/$RES_VERSION/src build/harmonryos/data/
    
    echo "/usr/local/bin/gulp copyCertificate --platform harmonryos"
    /usr/local/bin/gulp copyCertificate --platform harmonryos

    check "Run Gulp"
}

</code></pre>
<h3 id="5-æ„å»ºå‡ºåŒ…">5. æ„å»ºå‡ºåŒ…</h3>
<pre><code>buildHAP() {
    # æ ¹æ®ä¸šåŠ¡æƒ…å†µé€‚é…local.properties
    cd ${PROJECT_PATH}
    echo "hwsdk.dir=${HOS_SDK_HOME}"  &gt; ./local.properties
    # æ ¹æ®ä¸šåŠ¡æƒ…å†µå®‰è£…ohpmä¸‰æ–¹åº“ä¾èµ–
    ohpm_install "${PROJECT_PATH}"
    ohpm_install "${PROJECT_PATH}/entry"
    ohpm_install "${PROJECT_PATH}/xxx"

    # å¦‚æœæ„å»ºè¿‡ç¨‹æŠ¥é”™ ERR_PNPM_OUTDATED_LOCKFILEï¼Œéœ€è¦å¢åŠ é…ç½®ï¼šlockfile=false, æ ¹æ®nodeç‰ˆæœ¬é€‰æ‹©è®¾ç½®æ–¹å¼ï¼š
    # node.version&lt;18
    npm config set lockfile=false # å¦‚æœæ‰§è¡Œæ­¤å‘½ä»¤æŠ¥é”™ï¼Œå»ºè®®ç›´æ¥åœ¨é•œåƒçš„.npmrcæ–‡ä»¶ä¸­éœ€è¦å¢åŠ ä¸€è¡Œé…ç½®ï¼šlockfile=false
    # node.version&gt;=18
    #cat ${HOME}/.npmrc | grep 'lockfile=false' || echo 'lockfile=false' &gt;&gt; ${HOME}/.npmrc
    # æ ¹æ®ä¸šåŠ¡æƒ…å†µï¼Œé‡‡ç”¨å¯¹åº”çš„æ„å»ºå‘½ä»¤ï¼Œå¯ä»¥å‚è€ƒIDEæ„å»ºæ—¥å¿—ä¸­çš„å‘½ä»¤
    cd ${PROJECT_PATH}
    chmod +x hvigorw
    ./hvigorw clean --no-daemon
    ./hvigorw assembleHap --mode module -p product=default -p debuggable=false --no-daemon # æµæ°´çº¿æ„å»ºå‘½ä»¤å»ºè®®æœ«å°¾åŠ ä¸Š--no-daemon

    check "Hap Build"
}

install_hap() {
    hdc file send "${PROJECT_PATH}/entry/build/default/outputs/default/entry-default-signed.hap" "data/local/tmp/entry-default-signed.hap"
    hdc shell bm install -p "data/local/tmp/entry-default-signed.hap" 
    hdc shell rm -rf "data/local/tmp/entry-default-signed.hap"
    hdc shell aa start -a MainAbility -b com.example.myapplication -m entry

    check "HAP install"
}

# ä½¿ç”¨ohpmå‘å¸ƒhar
upload_har() {
  ohpm publish pkg.har
}
</code></pre>
<h3 id="6-ç§»åŠ¨æ–‡ä»¶åˆ°workspace">6. ç§»åŠ¨æ–‡ä»¶åˆ°WorkSpace</h3>
<pre><code class="language-shell">movehap() {
  local TARGET_HAP_NAME=${AUTO_BUILD_NUMBER}_${JOB_NAME}_${BUILD_VERSION}_${RES_VERSION}_${NET_MODE}_by_${USER_NAME}
  local TARGET_HAP_PATH=$HOME/Desktop/Jenkins/Workspace/${JOB_NAME}/${TARGET_HAP_NAME}.hap
  local ORIGIN_HAP_PATH=${1}/Project/build/harmonryos/proj/build/Debug/${PROJ_NAME}.hap

  echo "cp ${ORIGIN_HAP_PATH} ${TARGET_HAP_PATH}"
  cp ${ORIGIN_HAP_PATH} ${TARGET_HAP_PATH}

  check "Move hap"
}
</code></pre>
<p>ä»¥ä¸Šï¼Œå°±æ˜¯æ•´ä¸ªè‡ªåŠ¨æ„å»ºçš„æµç¨‹ã€‚</p>
<p>æˆ‘æ˜¯éƒ‘çŸ¥é±¼ğŸ³ï¼Œæ¬¢è¿å¤§å®¶è®¨è®ºä¸æŒ‡æ•™ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿè¯·ç‚¹èµğŸ‘ğŸ»æ”¶è—â­ï¸å…³æ³¨ğŸ”æˆ‘å§~~</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015213148842592592" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-28 11:59">2025-05-28 11:50</span>&nbsp;
<a href="https://www.cnblogs.com/songmin">éƒ‘çŸ¥é±¼</a>&nbsp;
é˜…è¯»(<span id="post_view_count">5</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18900301);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18900301', targetLink: 'https://www.cnblogs.com/songmin/p/18900301/cocoscreator-autobuild-ohos', title: 'ã€æ‹¥æŠ±é¸¿è’™ã€‘åŸºäº Cocos Creator çš„ HarmonyOS è‡ªåŠ¨æ„å»º' })">ä¸¾æŠ¥</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/zhuancloud/p/18740836" title="发布于 2025-02-27 13:58">
    <span role="heading" aria-level="2">SQL SERVER日常运维巡检系列之-性能</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1><strong>前言</strong></h1>
<p class="p">　　做好日常巡检是数据库管理和维护的重要步骤，而且需要对每次巡检日期、结果进行登记，同时可能需要出一份巡检报告。</p>
<p class="p">　　本系列旨在解决一些常见的困扰：</p>
<ul>
<li>不知道巡检哪些东西</li>
<li>不知道怎么样便捷体检</li>
<li>机器太多体检麻烦</li>
<li>生成报告困难，无法直观呈现结果</li>
</ul>
<p class="p">&nbsp;</p>
<p class="p">　　性能是系统好坏的重要指标之一，而性能问题可能是因为某一个小点而引起（如参数配置、作业配置、结构设计、软硬件环境等）。前面七篇文章从不同的方面对系统进行了巡检，本篇将介绍系列巡检中最重要的一项（性能）。</p>
<h1><strong>性能基线</strong></h1>
<p class="p">　　性能巡检的指标非常多，情况变化也很大，所以对自己的系统应该建立起一套完整的性能评价模型，何为性能评价模型，就是当系统进入一个平稳期，经过了优化，系统性能已经达到了一个稳定值，那么我们可以用这个稳定的项目作为后期巡检，及功能上线，结构变更等操作性能对比的基线。</p>
<p class="p"><span style="font-family: 微软雅黑">在【体检项目】页我们可以使用一个比较稳定的体检项目的历史版本作为性能基线，为了区分其他项目可以重命名为</span><span style="font-family: 微软雅黑">”性能基线</span></p>
<p class="p">&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134319818-572563367.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134331830-2059183142.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<h1><strong>基于性能基线对比</strong></h1>
<h2><strong>　总体指标</strong></h2>
<p class="p"><span style="font-family: 微软雅黑">　　在【概览】页我们可以从整体查看系统的性能现状，主要从【查询语句</span><span style="font-family: 微软雅黑">-执行时间】、【会话-等待类型】、【检查项】等，与基线进行对比。查看巡检中的指标是否与基线指标有较大的差异。</span></p>
<p class="p"><span style="font-family: 微软雅黑">　　例：当巡检时【查询语句</span><span style="font-family: 微软雅黑">-执行时间】中各个时间段的慢语句数量明显高于基线，那么可以说明系统中的语句可能有变慢的情况。CPU、内存、IO等系统指标压力升高，说明你系统的压力变大，变大的原因可能因为有新增的不优化语句或硬件资源出现问题。</span></p>
<p class="p">　　注：基线与巡检的收集时间应保证相同或小幅差异。如果差异很大，可能不具有说明性。</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134406330-1409322014.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<h2><strong>具体指标</strong></h2>
<h3><strong>　　计数器</strong></h3>
<ul>
<li>系统计数器</li>
<li>数据库计数器</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134434157-2136912334.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<h3><strong>查询语句</strong></h3>
<p class="p">　　在巡检中，我们可以主要关注：</p>
<ul>
<li>慢语句数量</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134509363-1940817423.png" alt="" loading="lazy"></p>
<ul>
<li><span style="font-family: 微软雅黑">执行次数</span>top 10</li>
<li><span style="font-family: 微软雅黑">持续时间</span><span style="font-family: 微软雅黑">top 10</span></li>
<li>CPU消耗top 10</li>
<li><span style="font-family: 微软雅黑">读次数</span> <span style="font-family: 微软雅黑">top 10</span></li>
<li><span style="font-family: 微软雅黑">写次数</span><span style="font-family: 微软雅黑">top 10</span></li>
<li><span style="font-family: 微软雅黑">影响行数</span><span style="font-family: 微软雅黑">top 10</span></li>
</ul>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134539373-893115186.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<h3><strong>系统等待与阻塞</strong></h3>
<p class="p">　　在巡检中，我们可以主要关注：</p>
<ul>
<li>等待的类型及数量分布</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134602067-2130150620.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134614506-1751257797.png" alt="" loading="lazy"></p>
<ul>
<li><span style="font-family: 微软雅黑">等待次数</span>top 10</li>
<li><span style="font-family: 微软雅黑">等待时间</span><span style="font-family: 微软雅黑">top 10</span></li>
<li>CPU时间top 10</li>
<li><span style="font-family: 微软雅黑">逻辑读次数</span> <span style="font-family: 微软雅黑">top 10</span></li>
<li><span style="font-family: 微软雅黑">物理读次数</span><span style="font-family: 微软雅黑">top 10</span></li>
<li><span style="font-family: 微软雅黑">物理写</span><span style="font-family: 微软雅黑">top 10</span></li>
</ul>
<p>&nbsp;</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227134639351-1302320934.png" alt="" loading="lazy"></p>
<h3><strong>其他指标</strong></h3>
<p class="p">　　数据库的性能巡检指标很多，可以根据自己系统的情况选择，具体指标及优化方式请参见：性能诊断系列</p>
<h1><strong>总结</strong></h1>
<p class="p">　　前面的一些巡检项及配置项，在管理比较规范的系统下，一般并不会出现什么问题，而性能不同，这是一个受很多因素影响，并且比较容易产生问题的项。同时性能对系统的总要程度是不言而喻的，做好前面的巡检也是性能稳定的保证。</p>
<p class="p">&nbsp;</p>
<p class="p">北京格瑞趋势科技有限公司是聚焦于数据服务的高新技术企业，成立于2008年，创始团队及核心技术人员来自微软和雅虎。微软数据平台合作伙伴，卫宁健康数据平台战略合作伙伴。通过产品+服务双轮驱动的业务模式，14年间累计服务4000+客户，覆盖互联网、市政、交通、电信、医疗、教育、电力、制造业等各个领域。</p>
<p><img src="https://img2024.cnblogs.com/blog/980582/202502/980582-20250227135828409-1943279921.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="p">&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.015316350505787037" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-27 13:59">2025-02-27 13:58</span>&nbsp;
<a href="https://www.cnblogs.com/zhuancloud">格瑞趋势技术团队</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18740836" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18740836);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18740836', targetLink: 'https://www.cnblogs.com/zhuancloud/p/18740836', title: 'SQL SERVER日常运维巡检系列之-性能' })">举报</a>
</div>
        
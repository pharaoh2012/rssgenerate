
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/heymar/p/18616037" title="发布于 2024-12-18 23:13">
    <span role="heading" aria-level="2">ThreeJs-07操控物体实现家具编辑器</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>本章节实现效果，通过gui快速添加场景，家具，并且可以快速设置家具实现一个编辑器效果</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032214967.gif" alt="GIF" loading="lazy"></p>
<h1 id="一基础设置与物体添加列表">一.基础设置与物体添加列表</h1>
<p>用之前做过的一个案例来改</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032226701.png" alt="image-20241203222614342" loading="lazy"></p>
<p>首先不要这个模型，然后换个背景颜色，并且添加一个网格辅助器</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032234966.png" alt="image-20241203223414939" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032234927.png" alt="image-20241203223420894" loading="lazy"></p>
<h2 id="11-添加场景">1.1 添加场景</h2>
<p>先往事件对象里面添加一个函数，到时候点击就会调用这个函数，而这个函数就是往场景加这个变量，到时候会把这个变量赋值为要加载的场景模型</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032242705.png" alt="image-20241203224245672" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032243732.png" alt="image-20241203224323711" loading="lazy"></p>
<p>一样的加载模型，只不过不是直接加载而是而是点击后才会把basicscene放进去</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032248212.png" alt="image-20241203224803185" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032249996.gif" alt="GIF" loading="lazy"></p>
<h2 id="12-添加物体">1.2 添加物体</h2>
<p>接下来做两个按钮去添加盆栽和沙发</p>
<p>因为这里可能会有很多物体，所以采用循环的方式，假如数据为这样，这样的数据可以后端给</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032300955.png" alt="image-20241203230013934" loading="lazy"></p>
<p>给gui创建一个文件夹，用循环的方式，去给这个文件夹添加按钮，并且注意点击的按钮是去哪里面找这个函数才能添加这个物体进来</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032305954.png" alt="image-20241203230520929" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412032306177.gif" alt="GIF" loading="lazy"></p>
<h1 id="二使用变换控制器操作物体">二.使用变换控制器操作物体</h1>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412042200003.png" alt="image-20241204220049916" loading="lazy"></p>
<p>导入后创建控制器</p>
<p>首先需要传入两个参数摄像机和canvas元素</p>
<p>然后当控制器改变的时候，也不断的去刷新场景的变化</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412042219648.png" alt="image-20241204221922625" loading="lazy"></p>
<p>同时监听拖动物体上的控制器这个事件，拖动的时候轨道控制器不动，也就是场景不动</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412042221442.png" alt="image-20241204222127419" loading="lazy"></p>
<p>然后当添加一个物体进来的时候要让这个物体有控制器，<strong>就通过他的attach方法绑定物体</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412042223880.png" alt="image-20241204222319850" loading="lazy"></p>
<p>犯了一个巨傻的错误搞了半天，不多说了</p>
<p>反正最后效果就是这样</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412042333467.gif" alt="GIF" loading="lazy"></p>
<h2 id="21-家具列表与控制物体切换">2.1 家具列表与控制物体切换</h2>
<p>先创建一个家具列表文件夹</p>
<p>然后逻辑就是在之前点击新增一个物体之后就往这个文件夹里面丢一个gui并且作用是给这个物体添加变化控制器起到选择到他的作用</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102242348.png" alt="image-20241210224223274" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102243320.gif" alt="GIF" loading="lazy"></p>
<h2 id="22-位移旋转缩放模式">2.2 位移旋转缩放模式</h2>
<p>需要用到模式</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102248957.png" alt="image-20241210224841923" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102252344.png" alt="image-20241210225233311" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102253208.gif" alt="GIF" loading="lazy"></p>
<p>当然也可以通过设置键盘事件来快速设置</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102254501.png" alt="image-20241210225448461" loading="lazy"></p>
<h2 id="23-坐标的切换以及取消选择物体">2.3 坐标的切换以及取消选择物体</h2>
<p>有两个坐标局部和世界坐标，可以让物体绕着什么坐标来旋转位移等，取消选择直接调用方法</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102258811.png" alt="image-20241210225810776" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102258759.png" alt="image-20241210225838733" loading="lazy"></p>
<h2 id="24-缩放位移旋转的固定比例">2.4 缩放位移旋转的固定比例</h2>
<p>现在的缩放位移等都是比较随意，如果想固定每次位移等距离就可以这么设置，首先在gui可以定义一个变量不再是函数</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102304108.png" alt="image-20241210230423077" loading="lazy"></p>
<p>然后创建一个文件夹，<strong>注意如果gui是变量，可以在后面跟一个对象，来设置变量的可选值范围</strong>，然后通过eventobj拿到每一次改变的值，赋值给tcontrols</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102305111.png" alt="image-20241210230544072" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102306413.gif" alt="GIF" loading="lazy"></p>
<p>旋转缩放同理，就是设置方法不同</p>
<p>注意<strong>gui可以设置一个范围，并且每次拖动改变的大小</strong></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102308148.png" alt="image-20241210230817102" loading="lazy"></p>
<h2 id="25-吸附地面与室内灯光开关">2.5 吸附地面与室内灯光开关</h2>
<p>现在随意拖动是可以拖到场景下面的，如果想要保持物体一直在地面</p>
<p>同样设置一个gui的变量</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102313574.png" alt="image-20241210231334554" loading="lazy"></p>
<p>添加一个按钮</p>
<p>改变这个变量即可，随后可以利用控制器的change事件，去不断地获取变量的值，让y轴一直为0就不会掉入地面</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102316600.png" alt="image-20241210231602572" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102317379.png" alt="image-20241210231711354" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102318078.gif" alt="GIF" loading="lazy"></p>
<p>室内的灯光开启，首先定义一个gui</p>
<p><strong>需要给渲染器色调映射</strong></p>
<p>同时把曝光调为1</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102321958.png" alt="image-20241210232107928" loading="lazy"></p>
<p>通过判断灯光的值来改变曝光</p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102322711.png" alt="image-20241210232225690" loading="lazy"></p>
<p><img src="https://heymar.oss-cn-chengdu.aliyuncs.com/undefined202412102323636.gif" alt="GIF" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="27.12900979782176" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-18 23:14">2024-12-18 23:13</span>&nbsp;
<a href="https://www.cnblogs.com/heymar">Heymar-10</a>&nbsp;
阅读(<span id="post_view_count">309</span>)&nbsp;
评论(<span id="post_comment_count">2</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18616037" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18616037);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18616037', targetLink: 'https://www.cnblogs.com/heymar/p/18616037', title: 'ThreeJs-07操控物体实现家具编辑器' })">举报</a>
</div>
        
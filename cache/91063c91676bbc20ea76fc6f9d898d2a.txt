
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/TheMagicalRainbowSea/p/19041877" title="å‘å¸ƒäº 2025-08-16 10:50">
    <span role="heading" aria-level="2">ä¼™ä¼´åŒ¹é…ç³»ç»Ÿ(ç§»åŠ¨ç«¯ H5 ç½‘ç«™ï¼ˆAPP é£æ ¼ï¼‰åŸºäºSpring Boot åç«¯ + Vue3 - 03</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä¼™ä¼´åŒ¹é…ç³»ç»Ÿç§»åŠ¨ç«¯-h5-ç½‘ç«™app-é£æ ¼åŸºäºspring-boot-åç«¯--vue3---03">ä¼™ä¼´åŒ¹é…ç³»ç»Ÿ(ç§»åŠ¨ç«¯ H5 ç½‘ç«™ï¼ˆAPP é£æ ¼ï¼‰åŸºäºSpring Boot åç«¯ + Vue3 - 03</h1>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816105046982-95303467.gif" class="lazyload"></p>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong></p>
<ul>
<li>Githubï¼š<a href="https://github.com/China-Rainbow-sea/yupao" target="_blank" rel="noopener nofollow">https://github.com/China-Rainbow-sea/yupao</a></li>
<li>Giteeï¼š<a href="https://gitee.com/Rainbow--Sea/yupao" target="_blank" rel="noopener nofollow">https://gitee.com/Rainbow--Sea/yupao</a></li>
</ul>
<h1 id="å¼€å‘ç”¨æˆ·ä¿®æ”¹é¡µé¢åç«¯">å¼€å‘ç”¨æˆ·ä¿®æ”¹é¡µé¢ï¼šåç«¯</h1>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836740-1852221369.png" class="lazyload"></p>
<h1 id="å¼€å‘ç”¨æˆ·ç™»å½•åŠŸèƒ½åç«¯">å¼€å‘ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼šåç«¯</h1>
<h1 id="to-do">to do</h1>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836742-1589310996.png" class="lazyload"></p>
<p>æ›´æ–° è„±æ•ï¼Œbean(æ³¨æ„æ²¡æœ‰æ˜ å°„ï¼Œä»¥åŠé€»è¾‘åˆ é™¤æ³¨è§£)ï¼Œä»¥åŠ xml</p>
<h1 id="å‰ç«¯æŠ½è±¡é€šç”¨åˆ—è¡¨ç»„ä»¶">å‰ç«¯ï¼šæŠ½è±¡é€šç”¨åˆ—è¡¨ç»„ä»¶</h1>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836740-1863970459.png" class="lazyload"></p>
<h1 id="æ‰¹é‡å¯¼å…¥æ•°æ®--å¤šç§æ–¹æ¡ˆä»‹ç»å¯¹æ¯”">æ‰¹é‡å¯¼å…¥æ•°æ® | å¤šç§æ–¹æ¡ˆä»‹ç»å¯¹æ¯”</h1>
<p>å°½é‡ä¸è¦ä¸€æ¬¡æ€§ï¼Œå¯¼å…¥å¤ªå¤šæ•°æ®ï¼Œè€Œæ˜¯ä¸€ç‚¹ä¸€ç‚¹çš„åŠ é‡å¯¼å…¥æ•°æ®ã€‚æ¯”å¦‚ï¼š10ï¼Œ100ï¼Œ1000ï¼Œ10000</p>
<h2 id="å¯¼å…¥æ•°æ®">å¯¼å…¥æ•°æ®</h2>
<ol>
<li>ç”¨å¯è§†åŒ–ç•Œé¢ï¼šé€‚åˆä¸€æ¬¡æ€§å¯¼å…¥ï¼Œæ•°æ®é‡å¯æ§ã€‚</li>
<li>å†™ç¨‹åºï¼š for å¾ªç¯ï¼Œå»ºè®®åˆ†æ‰¹ï¼Œä¸è¦ä¸€æŠŠæ¢­å“ˆï¼ˆå¯ä»¥ç”¨æ¥å£æ¥æ§åˆ¶ï¼‰ï¼Œ<strong>è¦ä¿è¯å¯æ§ï¼Œå¹‚ç­‰ï¼Œæ³¨æ„ï¼šçº¿ä¸Šç¯å¢ƒå’Œæµ‹è¯•ç¯å¢ƒæ˜¯æœ‰åŒºåˆ«çš„</strong>ã€‚</li>
</ol>
<h2 id="ç¼–å†™ä¸€æ¬¡æ€§ä»»åŠ¡">ç¼–å†™ä¸€æ¬¡æ€§ä»»åŠ¡ï¼š</h2>
<p>for å¾ªç¯æ’å…¥æ•°æ®çš„é—®é¢˜ï¼š</p>
<ol>
<li>å»ºç«‹å’Œé‡Šæ”¾æ•°æ®è¿æ¥ï¼š</li>
<li>for å¾ªç¯æ˜¯ç»å¯¹çº¿æ€§çš„ï¼šï¼ˆå¹¶å‘ï¼‰</li>
</ol>
<p><strong>è¡¥å……ï¼š</strong>Spring å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼Œ<code>@EnableScheduling // å¯åŠ¨å®šæ—¶ä»»åŠ¡ </code></p>
<pre><code class="language-java">@EnableScheduling // å¯åŠ¨å®šæ—¶ä»»åŠ¡
</code></pre>
<pre><code class="language-java">package com.rainbowsea.yupao;


import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.scheduling.annotation.EnableScheduling;

@SpringBootApplication
@MapperScan("com.rainbowsea.yupao.mapper")
@EnableScheduling // å¯åŠ¨å®šæ—¶ä»»åŠ¡
public class YuPaoApplication {

    public static void main(String[] args) {
        SpringApplication.run(YuPaoApplication.class, args);
    }
}

</code></pre>
<p><strong>å¹¶å‘ç¼–ç¨‹ï¼ˆå¤šçº¿ç¨‹æ± ï¼‰</strong></p>
<p>å¹¶å‘è¦æ³¨æ„æ‰§è¡Œçš„å…ˆåé¡ºåºæ— æ‰€è°“ï¼Œä¸è¦ç”¨åˆ°éå¹¶å‘ç±»çš„é›†åˆï¼ˆeg: ä¸è¦ç”¨ List é»˜è®¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼‰ï¼Œè¦è½¬æˆçº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚</p>
<p><strong>for å¾ªç¯æ’å…¥æ•°æ®çš„ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>é¢‘ç¹å»ºç«‹å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼ˆç”¨æ‰¹é‡æŸ¥è¯¢è§£å†³ï¼‰</li>
<li>for å¾ªç¯æ˜¯ç»å¯¹çº¿æ€§çš„(å¯ä»¥å¹¶å‘æé€Ÿ)</li>
</ol>
<p>ä½¿ç”¨ç®€å•çš„ for å¾ªç¯è¿›è¡Œä¸€ä¸ªå¹¶å‘æé€Ÿæ’å…¥ï¼Œæ‰¹é‡å…ƒç´ å†…å®¹ã€‚</p>
<pre><code class="language-java">package com.rainbowsea.yupao.one;


import com.rainbowsea.yupao.mapper.UserMapper;
import com.rainbowsea.yupao.model.User;
import com.rainbowsea.yupao.service.UserService;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.stereotype.Component;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;
import java.util.ArrayList;

@Component
@RunWith(SpringRunner.class)
public class InsertUsers {


    @Resource
    private UserService userService;


    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    // @Scheduled(fixedDelay = 5000, fixedRate = Long.MAX_VALUE)
    @Test
    public void doInsertUsers() {

        StopWatch stopWatch = new StopWatch();  // ç›‘è§†æŸ¥çœ‹å†…å®¹ä¿¡æ¯
        stopWatch.start();  // å¼€å§‹æ—¶é—´ç‚¹

        ArrayList&lt;User&gt; userList = new ArrayList&lt;&gt;(); // ArrayList&lt;&gt;() æ”¯æŒå¹¶å‘ï¼Œä¸å­˜åœ¨å¤šå¹¶å‘é—®é¢˜
        final int INSERT_NUM = 100000;  // shift + ctrl + u åˆ‡æ¢ä¸ºå¤§å†™
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            User user = new User();
            user.setUsername("å‡é±¼çš®");
            user.setUserAccount("fakeuyupi");
            user.setAvatarUrl("https://profile-avatar.csdnimg.cn/2f8ef0ed68a647bcad04088152e00c69_weixin_61635597.jpg!1");
            user.setGender(0);
            user.setUserPassword("12345678");
            user.setPhone("123");
            user.setEmail("123@qq.com");
            user.setTags("[]");
            user.setUserStatus(0);
            user.setIsDelete(0);
            user.setPlanetCode("1111111");

            userList.add(user);
        }


        userService.saveBatch(userList, 1000);
        stopWatch.stop(); // ç»“æŸæ—¶é—´ç‚¹
        System.out.println(stopWatch.getTotalTimeMillis()); // æ‰“å°æ˜¾ç¤ºæç¤ºä¿¡æ¯


    }
}

</code></pre>
<p><strong>ä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œå®Œæˆå¹¶å‘å¤„ç†</strong></p>
<pre><code class="language-java">package com.rainbowsea.yupao.one;


import com.rainbowsea.yupao.mapper.UserMapper;
import com.rainbowsea.yupao.model.User;
import com.rainbowsea.yupao.service.UserService;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.stereotype.Component;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;
import java.util.ArrayList;

@Component
@RunWith(SpringRunner.class)
public class InsertUsers {


    @Resource
    private UserService userService;


    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    @Scheduled(fixedDelay = 5000, fixedRate = Long.MAX_VALUE)// æ³¨æ„ä¸»å¯åŠ¨ç±»ä¸Šè¦åŠ ä¸Šï¼Œ@EnableScheduling // å¯åŠ¨å®šæ—¶ä»»åŠ¡
    // @Test
    public void doInsertUsers() {

        StopWatch stopWatch = new StopWatch();  // ç›‘è§†æŸ¥çœ‹å†…å®¹ä¿¡æ¯
        stopWatch.start();  // å¼€å§‹æ—¶é—´ç‚¹

        ArrayList&lt;User&gt; userList = new ArrayList&lt;&gt;();
        final int INSERT_NUM = 100000;  // shift + ctrl + u åˆ‡æ¢ä¸ºå¤§å†™
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            User user = new User();
            user.setUsername("å‡é±¼çš®");
            user.setUserAccount("fakeuyupi");
            user.setAvatarUrl("https://profile-avatar.csdnimg.cn/2f8ef0ed68a647bcad04088152e00c69_weixin_61635597.jpg!1");
            user.setGender(0);
            user.setUserPassword("12345678");
            user.setPhone("123");
            user.setEmail("123@qq.com");
            user.setTags("[]");
            user.setUserStatus(0);
            user.setIsDelete(0);
            user.setPlanetCode("1111111");

            userList.add(user);
        }


        userService.saveBatch(userList, 1000);
        stopWatch.stop(); // ç»“æŸæ—¶é—´ç‚¹
        System.out.println(stopWatch.getTotalTimeMillis()); // æ‰“å°æ˜¾ç¤ºæç¤ºä¿¡æ¯


    }
}

</code></pre>
<hr>
<p><strong>é‡‡ç”¨å¼‚æ­¥æ‰§è¡Œï¼Œå¹¶å‘æ‰§è¡Œçš„æ–¹å¼</strong></p>
<pre><code class="language-java">package com.rainbowsea.yupao.one;


import com.rainbowsea.yupao.mapper.UserMapper;
import com.rainbowsea.yupao.model.User;
import com.rainbowsea.yupao.service.UserService;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.stereotype.Component;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.CompletableFuture;

@Component
@RunWith(SpringRunner.class)
public class InsertUsers {


    @Resource
    private UserService userService;


    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    // @Scheduled(fixedDelay = 5000, fixedRate = Long.MAX_VALUE)
    @Test
    public void doInsertUsers() {

        StopWatch stopWatch = new StopWatch();  // ç›‘è§†æŸ¥çœ‹å†…å®¹ä¿¡æ¯
        stopWatch.start();  // å¼€å§‹æ—¶é—´ç‚¹

        final int INSERT_NUM = 100000;  // shift + ctrl + u åˆ‡æ¢ä¸ºå¤§å†™

        List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = new ArrayList&lt;&gt;();  // åˆ—è¡¨

        // åˆ† 10 ç»„
        int j = 0;
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            List&lt;User&gt; userList = new ArrayList&lt;&gt;();
            while (true) {
                j++;

                User user = new User();
                user.setUsername("å‡é±¼çš®");
                user.setUserAccount("fakeuyupi");
                user.setAvatarUrl("https://profile-avatar.csdnimg.cn/2f8ef0ed68a647bcad04088152e00c69_weixin_61635597.jpg!1");
                user.setGender(0);
                user.setUserPassword("12345678");
                user.setPhone("123");
                user.setEmail("123@qq.com");
                user.setTags("[]");
                user.setUserStatus(0);
                user.setIsDelete(0);
                user.setPlanetCode("1111111");

                userList.add(user);

                if(j % 10000 == 0) {
                    break;
                }
            }

            // å¼‚æ­¥æ‰§è¡Œ
            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
                System.out.println("threadName:" + Thread.currentThread().getName());
                userService.saveBatch(userList, 1000);
            });

            futureList.add(future);

        }

        CompletableFuture.allOf(futureList.toArray(new CompletableFuture[]{})).join();


        stopWatch.stop(); // ç»“æŸæ—¶é—´ç‚¹
        System.out.println(stopWatch.getTotalTimeMillis()); // æ‰“å°æ˜¾ç¤ºæç¤ºä¿¡æ¯


    }
}

</code></pre>
<hr>
<p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨å¹¶å‘æ—¶è¦æ³¨æ„æ•°æ®çš„æ’å…¥å…ˆåé¡ºåºæ˜¯å¦æ— æ‰€è°“ã€‚</p>
<p>å¹¶å‘æ—¶ä¸è¦ç”¨åˆ°éå¹¶å‘ç±»çš„é›†åˆã€‚</p>
<p>å»ºç«‹æ‰§è¡Œå™¨ï¼ˆçº¿ç¨‹æ± ï¼‰ï¼Œè‡ªå·±åˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿›è¡Œä¸€ä¸ªè·å–è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹æ± ï¼Œæ‰§è¡Œå¹¶å‘ï¼Œè·å–çº¿ç¨‹æ± è¿æ¥ã€‚</p>
<pre><code class="language-java">private ExecutorService executorService = new ThreadPoolExecutor(16, 1000, 10000, TimeUnit.MINUTES, new ArrayBlockingQueue&lt;&gt;(10000));

</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836765-1192826357.png" class="lazyload"></p>
<pre><code class="language-java">package com.rainbowsea.yupao.one;


import com.rainbowsea.yupao.mapper.UserMapper;
import com.rainbowsea.yupao.model.User;
import com.rainbowsea.yupao.service.UserService;

import org.apache.tomcat.util.threads.ThreadPoolExecutor;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.stereotype.Component;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.TimeUnit;

@Component
@RunWith(SpringRunner.class)
public class InsertUsers {


    @Resource
    private UserService userService;

    // CPU å¯†é›†å‹,åˆ†é…çš„æ ¸å¿ƒçº¿ç¨‹æ•° = CPU -1
    // IO å¯†é›†å‹ï¼Œåˆ†é…çš„æ ¸å¿ƒçº¿ç¨‹æ•°å¯ä»¥å¤§äº CPU æ ¸æ•°
    private ExecutorService executorService = new ThreadPoolExecutor(16, 1000, 10000, TimeUnit.MINUTES, new ArrayBlockingQueue&lt;&gt;(10000));

    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    // @Scheduled(fixedDelay = 5000, fixedRate = Long.MAX_VALUE)
    @Test
    public void doInsertUsers() {

        StopWatch stopWatch = new StopWatch();  // ç›‘è§†æŸ¥çœ‹å†…å®¹ä¿¡æ¯
        stopWatch.start();  // å¼€å§‹æ—¶é—´ç‚¹

        final int INSERT_NUM = 100000;  // shift + ctrl + u åˆ‡æ¢ä¸ºå¤§å†™

        List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = new ArrayList&lt;&gt;();  // åˆ—è¡¨

        // åˆ† 10 ç»„
        int j = 0;
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            List&lt;User&gt; userList = new ArrayList&lt;&gt;();
            while (true) {
                j++;

                User user = new User();
                user.setUsername("å‡é±¼çš®");
                user.setUserAccount("fakeuyupi");
                user.setAvatarUrl("https://profile-avatar.csdnimg.cn/2f8ef0ed68a647bcad04088152e00c69_weixin_61635597.jpg!1");
                user.setGender(0);
                user.setUserPassword("12345678");
                user.setPhone("123");
                user.setEmail("123@qq.com");
                user.setTags("[]");
                user.setUserStatus(0);
                user.setIsDelete(0);
                user.setPlanetCode("1111111");

                userList.add(user);

                if(j % 10000 == 0) {
                    break;
                }
            }

            // å¼‚æ­¥æ‰§è¡Œ
            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
                System.out.println("threadName:" + Thread.currentThread().getName());
                userService.saveBatch(userList, 1000);
            },executorService);

            futureList.add(future);

        }

        CompletableFuture.allOf(futureList.toArray(new CompletableFuture[]{})).join();


        stopWatch.stop(); // ç»“æŸæ—¶é—´ç‚¹
        System.out.println(stopWatch.getTotalTimeMillis()); // æ‰“å°æ˜¾ç¤ºæç¤ºä¿¡æ¯


    }
}

</code></pre>
<p>è¿æ¥æ± å‚æ•°è®¾ç½®ï¼š</p>
<pre><code class="language-latex">// CPU å¯†é›†å‹ï¼šåˆ†é…çš„æ ¸å¿ƒçº¿ç¨‹æ•° = CPU - 1
// IO å¯†é›†å‹ï¼šåˆ†é…çš„æ ¸å¿ƒçº¿ç¨‹æ•°å¯ä»¥å¤§äº CPU æ ¸æ•°

</code></pre>
<h1 id="é¡µé¢åŠ è½½å¤ªæ…¢">é¡µé¢åŠ è½½å¤ªæ…¢</h1>
<ul>
<li>ä¼˜åŒ–ï¼šæ•°æ®åº“æ…¢ï¼Œç”¨æˆ·ä¸ç™»å½•ï¼Œç”¨æˆ·æŸ¥çœ‹çš„æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œæ—¢ç„¶æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦é‡å¤æŸ¥å¤šæ¬¡äº†ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é¢„å…ˆæŠŠæ•°æ®æŸ¥å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªæ›´å¿«è¯»å–çš„åœ°æ–¹ï¼Œä¸ç”¨å†æŸ¥æ•°æ®åº“äº†ã€‚ç¼“å­˜ã€‚ä¸ºäº†é˜²æ­¢ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ²¡æœ‰èµ°ç¼“å­˜â€”â€”&gt;é¢„åŠ è½½ç¼“å­˜ï¼Œå®šæ—¶æ›´æ–°ç¼“å­˜ã€‚ï¼ˆå¯ä»¥é‡‡ç”¨å®šæ—¶ä»»åŠ¡ï¼‰</li>
<li>å¤šä¸ªæœºå™¨éƒ½è¦æ‰§è¡Œä»»åŠ¡å‘¢ï¼Ÿï¼ˆåˆ†å¸ƒå¼é”ï¼šæ§åˆ¶åŒä¸€æ—¶é—´åªæœ‰ä¸€å°æœºå™¨å»æ‰§è¡Œå®šæ—¶ä»»åŠ¡ï¼Œå…¶ä»–æœºå™¨ä¸ç”¨é‡å¤æ‰§è¡Œäº†ï¼‰</li>
<li>æ¯”è¾ƒæ…¢çš„åœ°æ–¹ï¼Œå¯ä»¥æƒ³æƒ³å¯ä¸å¯ä»¥å¤ç”¨ï¼Œå‡å°‘æ…¢çš„æ¬¡æ•°ã€‚</li>
</ul>
<p><strong>å¤šä¸ªæ•°æ®ï¼Œå‰ç«¯æ˜¾ç¤ºï¼Œè¿›è¡Œåˆ†é¡µå¤„ç†ï¼Œå¦‚æœä¸€ä¸‹å­å°† 10W ä¸ªæ•°æ®ä¿¡æ¯ç»™å‰ç«¯è¿›è¡Œæ¸²æŸ“ï¼Œå‰ç«¯æ˜¯æ— æ³•æ¸²æŸ“å¤„ç†çš„ï¼Œæ˜¯ä¼šç›´æ¥æŠ¥é”™å¤„ç†çš„ï¼Œæ‰€ä»¥è¿™é‡Œè¿›è¡Œä¸€ä¸ª MyBatis-Plus çš„ä¸€ä¸ªåˆ†é¡µæ’ä»¶è¿›è¡Œå¤„ç†ï¼Œè¿è¡Œè§‚å¯Ÿæ‰§è¡Œçš„ SQL æ—¥å¿—ï¼Œå¹¶ä¸æ˜¯ç›´æ¥ä¸€æ¬¡æ€§å°† 10W / æ‰€æœ‰æ•°æ®æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢ï¼ŒæŸ¥è¯¢å…¶ä¸­æ‰€éœ€çš„ä¸€éƒ¨åˆ†ï¼Œå‘é€ç»™å‰ç«¯ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼ŒåŒæ—¶é¿å…å‰ç«¯æ¥æ”¶è¿‡å¤šæ•°æ®ï¼Œæ¸²æŸ“åŠ è½½æ•°æ®å¤±è´¥ã€‚</strong></p>
<pre><code class="language-java">  /**
     * é¦–é¡µ recommend æ¨èæ˜¾ç¤ºå†…å®¹ï¼ŒåŒæ—¶è¿›è¡Œäº†åˆ†é¡µå¤„ç†
     *
     * @param request
     * @return
     */
    @GetMapping("/recommend")
    public BaseResponse&lt;Page&lt;User&gt;&gt; recommendUsers(long pageSize, long pageNum,HttpServletRequest request) {
        QueryWrapper&lt;User&gt; queryWrapper = new QueryWrapper&lt;&gt;();

        Page&lt;User&gt; userList = userService.page(new Page&lt;&gt;(pageNum, pageSize), queryWrapper);

        //List&lt;User&gt; userList = userService.list(queryWrapper);
        //List&lt;User&gt; list = userList.stream().
        //        map(user -&gt; userService.getSafetyUser(user)).
        //        collect(Collectors.toList());

        return ResultUtils.success(userList);
    }


</code></pre>
<p>åŒæ—¶éœ€è¦åœ¨ <font style="color: rgba(53, 56, 65, 1)">åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ Java é…ç½®æ¥æ·»åŠ åˆ†é¡µæ’ä»¶ï¼š</font></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836760-2076534539.png" class="lazyload"></p>
<pre><code class="language-java">@Configuration
@MapperScan("scan.your.mapper.package")
public class MybatisPlusConfig {

    /**
     * æ·»åŠ åˆ†é¡µæ’ä»¶
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL)); // å¦‚æœé…ç½®å¤šä¸ªæ’ä»¶, åˆ‡è®°åˆ†é¡µæœ€åæ·»åŠ 
        // å¦‚æœæœ‰å¤šæ•°æ®æºå¯ä»¥ä¸é…å…·ä½“ç±»å‹, å¦åˆ™éƒ½å»ºè®®é…ä¸Šå…·ä½“çš„ DbType
        return interceptor;
    }
}
</code></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836753-1856626655.png" class="lazyload"></p>
<p>å‰ç«¯æ·»åŠ ä¸Šç›¸å…³ï¼Œåˆ†é¡µæºå¸¦çš„æ•°æ®ä¿¡æ¯ï¼š</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836788-1972570306.png" class="lazyload"></p>
<pre><code class="language-vue">&lt;template&gt;

  &lt;user-card-list :user-list="userList"/&gt;
&lt;!--  &lt;van-card--&gt;
&lt;!--      v-for="user in userList"--&gt;
&lt;!--      :desc="user.prfile"--&gt;
&lt;!--      :title="`${user.username} (${user.planetCode}})`"--&gt;
&lt;!--      :thumb="user.avatarUrl"--&gt;

&lt;!--  &gt;--&gt;
&lt;!--    &lt;template #tags&gt;--&gt;
&lt;!--      &lt;van-tag plain type="danger" v-for="tag in user.tags" style="margin-right: 8px; margin-top: 8px"&gt;--&gt;
&lt;!--        {{tag}}--&gt;
&lt;!--      &lt;/van-tag&gt;--&gt;
&lt;!--    &lt;/template&gt;--&gt;
&lt;!--    &lt;template #footer&gt;--&gt;
&lt;!--      &lt;van-button size="mini"&gt;è”ç³»æˆ‘&lt;/van-button&gt;--&gt;
&lt;!--    &lt;/template&gt;--&gt;
&lt;!--  &lt;/van-card&gt;--&gt;
  &lt;!-- æœç´¢æç¤º --&gt;
  &lt;van-empty v-if="!userList || userList.length &lt; 1" description="æ•°æ®ä¸ºç©º"/&gt;
&lt;/template&gt;

&lt;script setup&gt;
import {onMounted, ref} from 'vue';
import {useRoute} from "vue-router";
import myAxios from "../plugins/myAxios";
import {Toast} from "vant";
import UserCardList from "../components/UserCardList.vue";

const route = useRoute();
const {tags} = route.query;

const userList = ref([]);

onMounted(async () =&gt; {
  const userListData = await myAxios.get('/user/recommend', {
    params: {
      pageSize: 8,
      pageNum: 1,
    },
  })
      .then(function (response) {
        console.log('/user/recommend  succeed', response);
        Toast.success("è¯·æ±‚æˆåŠŸ")
        return response?.data?.records;
      })
      .catch(function (error) {
        console.error('/user/recommend  error', error);
        Toast.fail('è¯·æ±‚å¤±è´¥')
      })
  console.log("æ•°æ®æ•°æ®:", userListData)
  if (userListData) {
    userListData.forEach(user =&gt; {
      if (user.tags) {
        user.tags = JSON.parse(user.tags);
      }
    })
    userList.value = userListData;
  }
})



&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;

</code></pre>
<p><strong>è¿è¡Œè§‚å¯Ÿæ‰§è¡Œçš„ SQL æ—¥å¿—ï¼Œå¹¶ä¸æ˜¯ç›´æ¥ä¸€æ¬¡æ€§å°† 10W / æ‰€æœ‰æ•°æ®æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢ï¼ŒæŸ¥è¯¢å…¶ä¸­æ‰€éœ€çš„ä¸€éƒ¨åˆ†ï¼Œå‘é€ç»™å‰ç«¯ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼ŒåŒæ—¶é¿å…å‰ç«¯æ¥æ”¶è¿‡å¤šæ•°æ®ï¼Œæ¸²æŸ“åŠ è½½æ•°æ®å¤±è´¥ã€‚</strong></p>
<ol>
<li>é¦–å…ˆï¼Œæ¨¡æ‹Ÿæ’å…¥ 50W æ¡æ•°æ®ï¼Œæµ‹è¯•ã€‚è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºæµ‹è¯•çš„æ•°æ®åº“åä¸º "usercentertest"</li>
</ol>
<pre><code class="language-sql">create table tag
(
    id         bigint auto_increment comment 'id'
        primary key,
    tagName    varchar(256)                       null comment 'æ ‡ç­¾åç§°',
    userId     bigint                             null comment 'ç”¨æˆ·id',
    parenId    bigint                             null comment 'çˆ¶æ ‡ç­¾ id',
    isParent   tinyint                            null comment '0 - ä¸æ˜¯, 1- çˆ¶æ ‡ç­¾',
    createTime datetime default CURRENT_TIMESTAMP null comment 'åˆ›å»ºæ—¶é—´',
    updateTime datetime default CURRENT_TIMESTAMP null comment 'æ›´æ–°æ—¶é—´',
    isDelete   tinyint  default 0                 not null comment 'æ˜¯å¦åˆ é™¤ 0 1ï¼ˆé€»è¾‘åˆ é™¤ï¼‰',
    constraint uniIdx_tagName
        unique (tagName)
)
    comment 'æ ‡ç­¾';

create index idx_userId
    on tag (userId);

create table user
(
    username     varchar(256)                       null comment 'ç”¨æˆ·æ˜µç§°',
    id           bigint auto_increment comment 'id'
        primary key,
    userAccount  varchar(256)                       null comment 'è´¦å·',
    avatarUrl    varchar(1024)                      null comment 'ç”¨æˆ·å¤´åƒ',
    gender       tinyint                            null comment 'æ€§åˆ«',
    userPassword varchar(512)                       not null comment 'å¯†ç ',
    phone        varchar(128)                       null comment 'ç”µè¯',
    email        varchar(512)                       null comment 'é‚®ç®±',
    userStatus   int      default 0                 not null comment 'çŠ¶æ€-0-æ­£å¸¸',
    createTime   datetime default CURRENT_TIMESTAMP null comment 'åˆ›å»ºæ—¶é—´',
    updateTime   datetime default CURRENT_TIMESTAMP null comment 'æ›´æ–°æ—¶é—´',
    isDelete     tinyint  default 0                 not null comment 'æ˜¯å¦åˆ é™¤ 0 1ï¼ˆé€»è¾‘åˆ é™¤ï¼‰',
    userRole     int      default 0                 not null comment 'ç”¨æˆ·è§’è‰² 0- æ™®é€šç”¨æˆ· 1 - ç®¡ç†å‘˜ 2 - vip',
    planetCode   varchar(512)                       null comment 'ç”¨æˆ·çš„ç¼–å·',
    tags         varchar(1024)                      null comment 'æ ‡ç­¾åˆ—è¡¨ json',
    profile      varchar(512)                       null comment 'ä¸ªäººç®€ä»‹'
)
    comment 'ç”¨æˆ·';


</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ for æ‰¹é‡æ’å…¥ 50W æ¡æ•°æ®ï¼Œæ³¨æ„ï¼šå¯¹äºè¿™ç§å¤§æ•°æ®æ’å…¥çš„æµ‹è¯•ï¼Œå¿…é¡»åˆ†ç»„ï¼Œåˆ†æ‰¹è¿›è¡Œï¼Œé˜²æ­¢æ’å…¥æ—¶ä¸­é—´å‘ç”ŸæŠ¥é”™å¤„ç†ã€‚</p>
<pre><code class="language-sql">package com.yupi.yupao.once.importuser;

import com.yupi.yupao.mapper.UserMapper;
import com.yupi.yupao.model.domain.User;
import org.springframework.stereotype.Component;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;

/**
 * å¯¼å…¥ç”¨æˆ·ä»»åŠ¡
 *
 * @author &lt;a href="https://github.com/liyupi"&gt;ç¨‹åºå‘˜é±¼çš®&lt;/a&gt;
 * @from &lt;a href="https://yupi.icu"&gt;ç¼–ç¨‹å¯¼èˆªçŸ¥è¯†æ˜Ÿçƒ&lt;/a&gt;
 */
@Component
public class InsertUsers {

    @Resource
    private UserMapper userMapper;

    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
//    @Scheduled(initialDelay = 5000, fixedRate = Long.MAX_VALUE)
    public void doInsertUsers() {
        StopWatch stopWatch = new StopWatch();
        System.out.println("goodgoodgood");
        stopWatch.start();
        final int INSERT_NUM = 1000;
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            User user = new User();
            user.setUsername("å‡é±¼çš®");
            user.setUserAccount("fakeyupi");
            user.setAvatarUrl("https://636f-codenav-8grj8px727565176-1256524210.tcb.qcloud.la/img/logo.png");
            user.setGender(0);
            user.setUserPassword("12345678");
            user.setPhone("123");
            user.setEmail("123@qq.com");
            user.setTags("[]");
            user.setUserStatus(0);
            user.setUserRole(0);
            user.setPlanetCode("11111111");
            userMapper.insert(user);
        }
        stopWatch.stop();
        System.out.println(stopWatch.getTotalTimeMillis());
    }
}

</code></pre>
<pre><code class="language-java">package com.yupi.yupao.service;

import com.yupi.yupao.model.domain.User;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.util.StopWatch;

import javax.annotation.Resource;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.*;

/**
 * å¯¼å…¥ç”¨æˆ·æµ‹è¯•
 *
 * @author &lt;a href="https://github.com/liyupi"&gt;ç¨‹åºå‘˜é±¼çš®&lt;/a&gt;
 * @from &lt;a href="https://yupi.icu"&gt;ç¼–ç¨‹å¯¼èˆªçŸ¥è¯†æ˜Ÿçƒ&lt;/a&gt;
 */
@SpringBootTest
public class InsertUsersTest {

    @Resource
    private UserService userService;

    private ExecutorService executorService = new ThreadPoolExecutor(40, 1000, 10000, TimeUnit.MINUTES, new ArrayBlockingQueue&lt;&gt;(10000));

    /**
     * æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    @Test
    public void doInsertUsers() {
        StopWatch stopWatch = new StopWatch();
        stopWatch.start();
        final int INSERT_NUM = 100000;
        List&lt;User&gt; userList = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; INSERT_NUM; i++) {
            User user = new User();
            user.setUsername("åŸ_åˆ› ã€é±¼_çš®ã€‘https://t.zsxq.com/0emozsIJh");
            user.setUserAccount("fakeyupi");
            user.setAvatarUrl("https://636f-codenav-8grj8px727565176-1256524210.tcb.qcloud.la/img/logo.png");
            user.setGender(0);
            user.setUserPassword("12345678");
            user.setPhone("123");
            user.setEmail("123@qq.com");
            user.setTags("[]");
            user.setUserStatus(0);
            user.setUserRole(0);
            user.setPlanetCode("11111111");
            userList.add(user);
        }
        // 20 ç§’ 10 ä¸‡æ¡
        userService.saveBatch(userList, 10000);
        stopWatch.stop();
        System.out.println(stopWatch.getTotalTimeMillis());
    }

    /**
     * å¹¶å‘æ‰¹é‡æ’å…¥ç”¨æˆ·
     */
    @Test
    public void doConcurrencyInsertUsers() {
        StopWatch stopWatch = new StopWatch();
        stopWatch.start();
        // åˆ†åç»„
        int batchSize = 5000;
        int j = 0;
        List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = new ArrayList&lt;&gt;();
        for (int i = 0; i &lt; 100; i++) {
            List&lt;User&gt; userList = new ArrayList&lt;&gt;();
            while (true) {
                j++;
                User user = new User();
                user.setUsername("å‡é±¼çš®");
                user.setUserAccount("fakeyupi");
                user.setAvatarUrl("https://636f-codenav-8grj8px727565176-1256524210.tcb.qcloud.la/img/logo.png");
                user.setGender(0);
                user.setUserPassword("12345678");
                user.setPhone("123");
                user.setEmail("123@qq.com");
                user.setTags("[]");
                user.setUserStatus(0);
                user.setUserRole(0);
                user.setPlanetCode("11111111");
                userList.add(user);
                if (j % batchSize == 0) {
                    break;
                }
            }
            // å¼‚æ­¥æ‰§è¡Œ
            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
                System.out.println("threadName: " + Thread.currentThread().getName());
                userService.saveBatch(userList, batchSize);
            }, executorService);
            futureList.add(future);
        }
        CompletableFuture.allOf(futureList.toArray(new CompletableFuture[]{})).join();
        // 20 ç§’ 10 ä¸‡æ¡
        stopWatch.stop();
        System.out.println(stopWatch.getTotalTimeMillis());
    }
}

</code></pre>
<p>è®¿é—®å‰ç«¯ï¼ŒæŸ¥çœ‹å‰ç«¯æ˜¯å¦ä¼šå› ä¸º 50 W æ•°æ®ï¼Œæ¸²æŸ“åŠ è½½å¤±è´¥ã€‚</p>
<p>è¿™é‡Œæœªä½¿ç”¨ MyBatis-Plus è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œå‰ç«¯æ¸²æŸ“å¤±è´¥ã€‚</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836787-439637325.png" class="lazyload"></p>
<hr>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836768-1667488474.png" class="lazyload"></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836776-1246611925.png" class="lazyload"></p>
<p><strong>ä½¿ç”¨äº† MyBatis-Plus åˆ†é¡µæ’ä»¶ï¼Œæµ‹è¯•çš„æ•ˆæœ</strong></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836792-611002680.png" class="lazyload"></p>
<p>å…³äºï¼šé¡µé¢åŠ è½½å¤ªæ…¢çš„é—®é¢˜ï¼Œå¦‚ä¸‹ï¼šä½¿ç”¨ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ç­–ç•¥ï¼Œè§£å†³ã€‚</p>
<h1 id="ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜">ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜</h1>
<h2 id="æ•°æ®æŸ¥è¯¢æ…¢æ€ä¹ˆåŠ">æ•°æ®æŸ¥è¯¢æ…¢æ€ä¹ˆåŠï¼Ÿ</h2>
<ol>
<li>ç”¨ç¼“å­˜ï¼šæå‰æŠŠæ•°æ®å–å‡ºæ¥ä¿å­˜å¥½(é€šå¸¸ä¿å­˜åˆ°è¯»å†™æ›´å¿«çš„ä»‹è´¨ï¼Œeg å†…å­˜)ï¼Œå°±å¯ä»¥æ›´å¿«åœ°è¯»å†™ã€‚</li>
</ol>
<blockquote>
<p>ç¼“å­˜ï¼š</p>
<ul>
<li>Redisï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰</li>
<li>memcached(åˆ†å¸ƒå¼)</li>
<li>Etcd( äº‘åŸç”Ÿæ¶æ„çš„ä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨ï¼Œ<strong>å­˜å‚¨é…ç½®</strong>ï¼Œæ‰©å®¹èƒ½åŠ›)</li>
</ul>
<p>è¿›ç¨‹(å•æœº)ç¼“å­˜</p>
<ul>
<li>ehcache</li>
<li>Java å†…å­˜é›†åˆï¼Œå¦‚ HashMap</li>
<li>Caffeine ( Java å†…å­˜ç¼“å­˜æ€§èƒ½ä¹‹ç‹ï¼Œé«˜æ€§èƒ½)</li>
<li>Google Guava</li>
</ul>
</blockquote>
<ol start="2">
<li>åˆ†åº“åˆ†è¡¨</li>
<li>æå‰æŸ¥è¯¢</li>
</ol>
<h1 id="java-æ“ä½œ-redis">Java æ“ä½œ Redis</h1>
<h2 id="spriing-data-redisæ¨è">Spriing Data Redis(æ¨è)</h2>
<p>åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/org.springframework.data/spring-data-redis" target="_blank" rel="noopener nofollow">https://mvnrepository.com/artifact/org.springframework.data/spring-data-redis</a></p>
<p>Spring  Data : é€šç”¨çš„æ•°æ®è®¿é—®æ¡†æ¶ï¼Œå®šä¹‰äº†ä¸€ç»„ <strong>å¢åˆ æ”¹æŸ¥</strong>çš„æ¥å£ã€‚</p>
<p>è¿˜å¯ä»¥æ“ä½œï¼šMySQLï¼ŒRedisï¼ŒJPA</p>
<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¼•å…¥</li>
</ol>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
    &lt;version&gt;2.6.4&lt;/version&gt;
&lt;/dependency&gt;

</code></pre>
<p>ä¹Ÿå¯ä»¥æ·»åŠ ä¸Šï¼šLettuceæ˜¯ä¸€ä¸ªé«˜çº§rediså®¢æˆ·ç«¯ï¼Œæ”¯æŒé«˜çº§çš„redisç‰¹æ€§ï¼Œæ¯”å¦‚Sentinelã€é›†ç¾¤ã€æµæ°´çº¿ã€è‡ªåŠ¨é‡æ–°è¿æ¥å’Œredisæ•°æ®</p>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/io.lettuce/lettuce-core --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.lettuce&lt;/groupId&gt;
    &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;
    &lt;version&gt;6.1.6.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ol start="2">
<li>é…ç½® Redis åœ°å€</li>
</ol>
<pre><code class="language-yaml">spring:
  # redis é…ç½®
  redis:
    port: 6379
    host: localhost
    database: 0 # æ˜¾å¼ä½¿ç”¨çš„æ˜¯ Redis 0 å·æ•°æ®åº“

</code></pre>
<p><strong>Redis æ•°æ®ç»“æ„ï¼š</strong></p>
<ol>
<li>String å­—ç¬¦ä¸²ç±»å‹ï¼šname:"yupi"</li>
<li>List åˆ—è¡¨ï¼šnames:["yupi","dogyupi"]ã€‚ List å’Œ æ•°ç»„çš„åŒºåˆ«ã€‚æ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œè€Œ List å¤§å°æ˜¯åŠ¨æ€çš„</li>
<li>Set é›†åˆï¼šnames:["yupi","dogyupi"]ï¼ˆå€¼ä¸é‡å¤ï¼‰</li>
<li 1ï¼Œdogyupi:2="">Hash å“ˆå¸Œï¼šnameAge:</li>
<li>Zset é›†åˆï¼šnames: '{yupi - 9ï¼Œdogyupi - 12 }' é€‚åˆæ’è¡Œæ¦œ</li>
</ol>
<p><strong>é«˜çº§ï¼š</strong></p>
<ul>
<li>bloomfilter (å¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸»è¦ä»å¤§é‡çš„æ•°æ®ä¸­å¿«é€Ÿè¿‡æ»¤å€¼ï¼Œæ¯”å¦‚é‚®ä»¶é»‘åå•æ‹¦æˆª)</li>
<li>geo(è®¡ç®—åœ°ç†ä½ç½®)</li>
<li>hyperloglog ï¼ˆpv / uvï¼‰</li>
<li>pub / sub(å‘å¸ƒè®¢é˜…ï¼Œç±»ä¼¼æ¶ˆæ¯é˜Ÿåˆ—)</li>
<li>BitMap (100101010101010101010101)</li>
</ul>
<blockquote>
<p><strong>å¼•å…¥ä¸€ä¸ªæ–°åº“æ—¶ï¼Œè®°å¾—å…ˆå†™æµ‹è¯•ç±»</strong>ã€‚</p>
</blockquote>
<p><strong>æµ‹è¯•ï¼šä½¿ç”¨æˆåŠŸè¿æ¥ä¸Šäº† Redis ï¼Œæ˜¯å¦å¯ä»¥æˆåŠŸæ“ä½œ Redis æ•°æ®åº“</strong></p>
<pre><code class="language-java">package com.rainbowsea.yupao.service;


import com.rainbowsea.yupao.model.User;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.core.ValueOperations;

import javax.annotation.Resource;

@SpringBootTest
public class RedisTest {


    @Resource
    private RedisTemplate redisTemplate; // å®ä¾‹åŒ– æ“ä½œ Redis çš„å®ä¾‹æ¨¡æ¿


    @Test
    void test() {
        ValueOperations valueOperations = redisTemplate.opsForValue();
        // å¢
        valueOperations.set("yupiString","dog");
        valueOperations.set("yupiInt",1);
        valueOperations.set("yupiDouble",2.0);

        User user = new User();
        user.setId(1L);
        user.setUsername("yupi");

        valueOperations.set("yupiUser",user);

        // æŸ¥
        Object yupi = valueOperations.get("yupiString");
        Assertions.assertTrue("dog".equals((String)yupi));
        yupi = valueOperations.get("yupiInt");
        Assertions.assertTrue(1 == (Integer) yupi);
        yupi = valueOperations.get("yupiDouble");
        Assertions.assertTrue(2.0 == (Double) yupi);

        System.out.println(valueOperations.get("yupiUser"));


    }
}

</code></pre>
<h2 id="reids-è‡ªå®šä¹‰åºåˆ—åŒ–redistemplateconfig">Reids è‡ªå®šä¹‰åºåˆ—åŒ–ï¼šRedisTemplateConfig</h2>
<p>ä¸ºäº†é˜²æ­¢å†™å…¥çš„ Redis çš„æ•°æ®ä¹±ç ï¼Œæµªè´¹ç©ºé—´ç­‰ï¼Œå¯ä»¥è‡ªå®šä¹‰åºåˆ—åŒ–å™¨ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">package com.yupi.yupao.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.RedisSerializer;

@Configuration
public class RedisTemplateConfig {

    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory) {
        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();
        redisTemplate.setConnectionFactory(connectionFactory);
        redisTemplate.setKeySerializer(RedisSerializer.string());
        return redisTemplate;
    }
}

</code></pre>
<h2 id="_"><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/3084824/202508/3084824-20250816104836759-1008106270.png" class="lazyload"></h2>
<h1 id="è®¾è®¡ç¼“å­˜-key">è®¾è®¡ç¼“å­˜ key</h1>
<p>ä¸åŒç”¨æˆ·çœ‹åˆ°çš„æ•°æ®ä¸åŒã€‚</p>
<p>å»ºè®®æ ¼å¼ï¼š</p>
<p>systemID:moduleID:funcu: ï¼ˆæ³¨æ„ï¼šå°±æ˜¯ä¸è¦å’Œåˆ«çš„å†²çªï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨å¤šä¸ªäºº/é¡¹ç›®å…±ç”¨ä¸€ä¸ª Redis ç¼“å­˜ï¼‰</p>
<p>egï¼šè¿™é‡Œæˆ‘ä»¬è®¾è®¡ï¼š<code>**yupao:user:recommed:userId**</code></p>
<p>**æ³¨æ„ï¼šRedis å†…å­˜ä¸èƒ½æ— é™å¢åŠ ï¼Œä¸€å®šè¦è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚Redis å†…å­˜æ˜¯æœ‰é™çš„ï¼Œè€Œä¸”åœ¨æœåŠ¡å™¨å½“ä¸­ç‰¹åˆ«è´µã€‚éå¸¸é‡è¦<strong><strong>ğŸŒŸğŸŒŸğŸŒŸ</strong></strong> **</p>
<p><strong>ç¼“å­˜ï¼Œè¿è¡Œæµ‹è¯•ï¼š</strong></p>

</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-16 10:51">2025-08-16 10:50</span>&nbsp;
<a href="https://www.cnblogs.com/TheMagicalRainbowSea">Rainbow-Sea</a>&nbsp;
é˜…è¯»(<span id="post_view_count">133</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19041877);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19041877', targetLink: 'https://www.cnblogs.com/TheMagicalRainbowSea/p/19041877', title: 'ä¼™ä¼´åŒ¹é…ç³»ç»Ÿ(ç§»åŠ¨ç«¯ H5 ç½‘ç«™ï¼ˆAPP é£æ ¼ï¼‰åŸºäºSpring Boot åç«¯ + Vue3 - 03' })">ä¸¾æŠ¥</a>
</div>
	

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/HarmonyOSSDK/p/18672546" title="发布于 2025-01-15 10:42">
    <span role="heading" aria-level="2">【FAQ】HarmonyOS SDK 闭源开放能力 —Map Kit（4）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><strong>1.问题描述：</strong></p>
<p>添加了很多的marker点，每个marker点都设置了customInfoWindow，但是每次只能显示一个customInfoWindow吗？</p>
<p><strong>解决方案：</strong></p>
<p>Marker的InfoWindow每次只能显示一个。</p>
<p><strong>2.问题描述：</strong></p>
<p>在地图选型中，</p>
<p>1.使用华为Map Kit，和使用高德、腾讯等SDK上，有什么优缺点比较吗？</p>
<p>2.Map Kit是否需要商业授权？价格如何？</p>
<p>3.两种方案，最后App包大小是否有区别？</p>
<p>4.元服务的话，支持三方地图SDK吗？</p>
<p><strong>解决方案：</strong></p>
<p>1、Map Kit是鸿蒙系统能力，下沉在操作系统中；三方地图SDK是应用根据需要添加依赖导入到应用包，使用方式不同；</p>
<p>2、按照指导文档开通地图服务即可，是否收费及费用标准以官方文档为准；</p>
<p>3、使用Map Kit系统能力，应用包的体积会更小一些；</p>
<p>4、支持</p>
<p><strong>3.问题描述：</strong></p>
<p>按照官网参考写的地图，还是不显示</p>
<p>在AppGallery Connect创建的测试应用，已配置metadata的client_id</p>
<p>地图显示的灰色，没有显示出来</p>
<p>不知道哪里问题，控制台也没有报错信息，定位是成功了，蓝点也出来了，就是地图不显示</p>
<p><strong>解决方案：</strong></p>
<p>按以下步骤检查下地图服务，特别是签名证书指纹。</p>
<p>1.一般没有展示地图，可能和没有配置SHA256指纹证书配置，网络，定位权限，没有打开地图服务等有关系，如果刚配置完权限等，需要24h生效，（可以将手机系统时间往后设置24h）。</p>
<p>2.module.json5文件中 metadata节点下 clientid 写正确—需要在里面直接写client_id的信息，不能通过$符引用资源文件中的值，当前无法解析这种引用方式；</p>
<p>3、需要检查一下当前的签名证书指纹是否也是自动签名的，需要改成手动签名且需要和AGC上配置的证书指纹一致</p>
<p>签名证书使用 这个选项中的 配置方式 “选择SHA256公钥指纹‘’</p>
<p>a、生成配置指纹：</p>
<p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-preparations-0000001727885250#section388942317518" target="_blank" rel="noopener nofollow">https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-preparations-0000001727885250#section388942317518</a></p>
<p>b、配置证书指纹：</p>
<p><a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-signature-info-0000001628566748#section5181019153511" target="_blank" rel="noopener nofollow">https://developer.huawei.com/consumer/cn/doc/app/agc-help-signature-info-0000001628566748#section5181019153511</a></p>
<p><strong>4.问题描述：</strong></p>
<p>添加rawfile文件夹下图片(圆形切图)为Marker源图，实际效果出现黑边，这是什么原因?</p>
<p><strong>解决方案：</strong></p>
<p>这是地图功能的正常现象，黑边是为了区分每个图标的边界，防止元素堆叠混淆不清，目前没有办法去除。</p>
<p><strong>5.问题描述：</strong></p>
<p>地图组件全都报错“The API is not supported on all devices. Use the canIUse condition to determine whether the API is supported.”</p>
<p><strong>解决方案：</strong></p>
<p>接口不是在所有的设备都支持，有权限设置，所以会报错。</p>
<p>解决方法：</p>
<p>1、查看提示错误中的syscap信息</p>
<p>2、在接口调用处添加判断，例如：</p>
<p>if (canIUse("SystemCapability.Cloud.Iap")){</p>
<p>//TODO:</p>
<p>}</p>
<p><strong>6.问题描述：</strong></p>
<p>地图组件无法展示</p>
<pre><code>
import { MapComponent, mapCommon, map } from '@kit.MapKit';

...

this.callback = async (err, mapController) =&amp;gt; {

      if (!err) { // 代码未报错 err 为空

        this.mapController = mapController;

        this.mapController.on("mapLoad", () =&amp;gt; {

          console.info(this.TAG, `on-mapLoad`);

        });

      }

};

</code></pre>
<p>在 App gallery Connect 的项目配置中的api 配置已配置地图，module.json5 中已添加 client_id。</p>
<p>DevEco 采用的是 auto sign 方式, 但是配置证书指纹时选择的证书的指纹无法与 devEco 的指纹配置一致，是否是此原因导致的</p>
<p><strong>解决方案：</strong></p>
<p>您如果在 Sign Configs 中选择的是auto sign方式，请按照如下步骤验证您的证书配置是否正确：</p>
<p>1、记住 Sign Configs 中 Store file(*.p12) 里的证书所在文件夹地址；</p>
<p>2、打开 AppGallery Connect ，选择“证书、APP ID和Profile”服务，依次点击“证书”-&gt;“新增证书“ ，在弹出框的“选取证书请求文件(CSR)”选项中上传第一步中的文件夹地址中的该项目 .csr 文件，然后提交；</p>
<p>3、进入“我的项目”服务，在“常规”中的“应用”里点击“添加公钥指纹 (HarmonyOS API 9及以上)”，在弹出框中选择第二步中添加的证书，并选择确认；</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0007234627858796296" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-15 10:42">2025-01-15 10:42</span>&nbsp;
<a href="https://www.cnblogs.com/HarmonyOSSDK">HarmonyOS_SDK</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18672546" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18672546);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18672546', targetLink: 'https://www.cnblogs.com/HarmonyOSSDK/p/18672546', title: '【FAQ】HarmonyOS SDK 闭源开放能力 —Map Kit（4）' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/clairejing/p/18972723" title="å‘å¸ƒäº 2025-07-08 11:54">
    <span role="heading" aria-level="2">Spring AI Alibabaæ™ºèƒ½æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div class="ace-line" dir="auto" data-node="true"><span data-leaf="true">ğŸ‘‹ è¿˜åœ¨ä¸ºæ‰‹åŠ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹ç§ƒå¤´å—ï¼Ÿé¢å¯¹å¤æ‚éœ€æ±‚æ–‡æ¡£ï¼Œä¸€ä¸ªä¸€ä¸ªæŠ æµ‹è¯•ç‚¹ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè¿˜å®¹æ˜“é—æ¼å…³é”®åœºæ™¯ï¼Ÿä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œç¬”è€…ä¾æ‰˜Spring AIå¼€å‘äº†æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå·¥å…·~</span></div>
<div class="ace-line" dir="auto" data-node="true"><span data-leaf="true"><span data-string="true" data-enter="true" data-leaf="true">â€‹åç«¯æºç ï¼š<a href="https://github.com/qa-dpp/case-ai-backend" target="_blank" rel="noopener nofollow">https://github.com/qa-dpp/case-ai-backend</a></span></span></div>
<div class="ace-line" dir="auto" data-node="true"><span data-leaf="true"><span data-string="true" data-enter="true" data-leaf="true">å‰ç«¯æºç ï¼š<a href="https://github.com/qa-dpp/case-ai-front" target="_blank" rel="noopener nofollow">https://github.com/qa-dpp/case-ai-front</a></span></span></div>
<div class="ace-line" dir="auto" data-node="true">&nbsp;</div>
<div class="ace-line" dir="auto" data-node="true">&nbsp;</div>
<div class="ace-line" dir="auto" data-node="true">&nbsp;</div>
<div class="ace-line" dir="auto" data-node="true">&nbsp;</div>
<div class="ace-line heading-h2" dir="auto" data-node="true"><span data-leaf="true">ğŸŒŸ&nbsp;<strong>æ ¸å¿ƒåŠŸèƒ½</strong><span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">å…¨ç±»å‹æ–‡æ¡£åˆ†æ<span data-leaf="true">ï¼šåŸºäº Spring AI Alibabaçš„è‡ªç„¶è¯­è¨€å¤„ç†å’Œå›¾åƒè¯†åˆ«èƒ½åŠ›ï¼Œæ”¯æŒpdf ã€wordã€txtå¤šç§æ ¼å¼éœ€æ±‚æ–‡æ¡£ï¼Œç²¾å‡†æå–éœ€æ±‚ç‚¹ã€‚<span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></span></li>
</ul>
</div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">æ™ºèƒ½ç”Ÿæˆä¸ç­›é€‰<span data-leaf="true">ï¼šé‡‡ç”¨&nbsp;Spring AI Alibabaçš„ç”Ÿæˆè€…è¯„ä¼°è€…æ¨¡å¼ï¼Œç”Ÿæˆè€…æ‰¹é‡äº§å‡ºå€™é€‰æµ‹è¯•ç”¨ä¾‹ï¼Œè¯„ä¼°è€…ä»åˆç†æ€§ã€è¦†ç›–ç‡ç­‰ç»´åº¦ç­›é€‰ï¼Œä¿éšœç”¨ä¾‹è´¨é‡ä¸å…¨é¢æ€§ã€‚<span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></span></li>
</ul>
</div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">è„‘å›¾å¯è§†åŒ–å‘ˆç°<span data-leaf="true">ï¼šå°†ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨è½¬åŒ–ä¸ºè¡¨æ ¼å’Œè„‘å›¾ï¼Œæ¸…æ™°å±•ç¤ºç”¨ä¾‹é€»è¾‘ç»“æ„å’Œä¸éœ€æ±‚çš„å¯¹åº”å…³ç³»ï¼Œæ–¹ä¾¿ç†è§£ã€æ‰§è¡Œä¸å›¢é˜Ÿåä½œã€‚<span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></span></li>
</ul>
</div>
<div class="ace-line heading-h2" dir="auto" data-node="true"><span data-leaf="true">ğŸ› ï¸&nbsp;<strong>æŠ€æœ¯æ¶æ„</strong><span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">åº•å±‚æ¡†æ¶<span data-leaf="true">ï¼šä¾æ‰˜ Spring AI Alibabaï¼Œå®ç°å¯¹æ–‡æ¡£çš„æ™ºèƒ½è§£æä¸å¤„ç†ã€‚<span data-leaf="true">â€‹</span></span></span></li>
</ul>
</div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">ç”Ÿæˆæ¨¡å¼<span data-leaf="true">ï¼šè¿ç”¨ç”Ÿæˆè€…è¯„ä¼°è€…æ¨¡å¼ï¼Œæ„å»ºé«˜æ•ˆå¯é çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆæµç¨‹ã€‚<span data-string="true" data-enter="true" data-leaf="true">â€‹</span></span></span></li>
</ul>
</div>
<div class="ace-line list-div" dir="auto" data-node="true">
<ul class="list-bullet1 r-list r-list-bullet">
<li><span data-leaf="true">å¯è§†åŒ–<span data-leaf="true">ï¼šé›†æˆè¡¨æ ¼å’Œè„‘å›¾ç”ŸæˆæŠ€æœ¯ï¼Œè®©æµ‹è¯•ç”¨ä¾‹ä»¥ç›´è§‚å›¾å½¢åŒ–æ–¹å¼å‘ˆç°ã€‚</span></span></li>
</ul>
<p>&nbsp;</p>
<p>ğŸ› ï¸<strong>ä»£ç æ•´ä½“æ¡†æ¶ï¼š</strong></p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1284295/202507/1284295-20250707151726023-56169111.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>ğŸ› ï¸<strong>ä»£ç è¯¦è§£ï¼š</strong></p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">1. å¸¸é‡å®šä¹‰ï¼ˆ<span class="code-file-path-iIAQg1">Consts.javaï¼‰</span></h3>
<div class="cnblogs_code">
<pre>package<span> com.fingertip.caseaibackend.commons;

public class<span> Consts {
    public static final String ANALYZE_PROMPT =<span> ...;
    public static final String CASE_WRITER_PROMPT =<span> ...;
    public static final String CASE_REVIEWER_PROMPT =<span> ...;
    public static final String CASE_FORMAT_PROMPT =<span> ...;
    public static final String VISUAL_PROMPT =<span> ...;

    public static final String ORIGIN_MESSAGE = "originMessage"<span>;
    public static final String CASE_INFO_MESSAGE = "caseInfoMessage"<span>;
    public static final String CASE_REVIEW_MESSAGE = "caseReviewMessage"<span>;
    public static final String CASE_FORMAT_MESSAGE = "caseFormatMessage"<span>;
}</span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p>è¯¥ç±»å®šä¹‰äº†ä¸€ç³»åˆ—å¸¸é‡ï¼ŒåŒ…æ‹¬ä¸å¤§è¯­è¨€æ¨¡å‹äº¤äº’æ—¶ä½¿ç”¨çš„æç¤ºä¿¡æ¯ï¼ˆå¦‚éœ€æ±‚åˆ†ææç¤ºã€æµ‹è¯•ç”¨ä¾‹ç¼–å†™æç¤ºç­‰ï¼‰ä»¥åŠçŠ¶æ€å›¾ä¸­ä½¿ç”¨çš„æ¶ˆæ¯é”®ã€‚</p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">2. é…ç½®æ–‡ä»¶ï¼ˆ<span class="code-file-path-iIAQg1">application.ymlï¼‰</span></h3>
<div class="cnblogs_code">
<pre><span>server:
  port: 8080<span>

spring:
  application:
    name: spring-ai-alibaba-openai-chat-model-<span>example
  ai:
    openai:
      api-<span>key: xxx
      base-url: https://api.siliconflow.cn/
<span>      chat:
        options:
          model: deepseek-ai/DeepSeek-<span>R1
  servlet:
    multipart:
      max-file-<span>size: 50MB
      max-request-<span>size: 50MB
case-<span>model:
  visual:
    api-<span>key: xxx
    base-url: https://api.siliconflow.cn/
    model: Qwen/Qwen2.5-VL-72B-<span>Instruct
  analyze:
    api-<span>key: xxx
    base-url: https://api.siliconflow.cn/
    model: deepseek-ai/DeepSeek-<span>R1
  generate:
    api-<span>key: xxx
    base-url: https://api.siliconflow.cn/
    model: deepseek-ai/DeepSeek-R1-Distill-Qwen-<span>7B
  reviewer:
    api-<span>key: xxx
    base-url: https://api.siliconflow.cn/
    model: MiniMaxAI/MiniMax-M1-<span>80k
  format:
    api-<span>key: xxx
    base-url: https://api.siliconflow.cn/
    model: deepseek-ai/DeepSeek-<span>V3
logging:
  level:
    root: INFO
    org.springframework.ai: DEBUG
    com.example.demo: DEBUG</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p>é…ç½®æ–‡ä»¶å®šä¹‰äº†æœåŠ¡å™¨ç«¯å£ã€Spring AI çš„åŸºæœ¬é…ç½®ï¼ˆå¦‚ API å¯†é’¥ã€åŸºç¡€ URLã€æ¨¡å‹ç±»å‹ï¼‰ä»¥åŠä¸åŒä»»åŠ¡ï¼ˆå¦‚å¯è§†åŒ–ã€éœ€æ±‚åˆ†æã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç­‰ï¼‰ä½¿ç”¨çš„æ¨¡å‹ä¿¡æ¯ã€‚åŒæ—¶ï¼Œè¿˜é…ç½®äº†æ–‡ä»¶ä¸Šä¼ çš„æœ€å¤§å¤§å°å’Œæ—¥å¿—çº§åˆ«ã€‚</p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">3. å¤§è¯­è¨€æ¨¡å‹é…ç½®ï¼ˆ<span class="code-file-path-iIAQg1">LLMConfig.javaï¼‰</span></h3>
<div class="cnblogs_code">
<pre>package<span> com.fingertip.caseaibackend.aiproxies.configs;

import<span> org.springframework.ai.chat.model.ChatModel;
import<span> org.springframework.ai.openai.OpenAiChatModel;
import<span> org.springframework.ai.openai.OpenAiChatOptions;
import<span> org.springframework.ai.openai.api.OpenAiApi;
import<span> org.springframework.beans.factory.annotation.Value;
import<span> org.springframework.context.annotation.Bean;
import<span> org.springframework.context.annotation.Configuration;

@Configuration
public class<span> LLMConfig {
    @Value("${case-model.analyze.api-key}"<span>)
    private String analyze_apiKey = ""<span>;
    @Value("${case-model.analyze.base-url}"<span>)
    private String analyze_baseUrl = ""<span>;
    @Value("${case-model.analyze.model}"<span>)
    private String analyze_Model = ""<span>;

    @Bean
    public<span> ChatModel analyzeModel() {
        OpenAiChatOptions options = new<span> OpenAiChatOptions();
        options.setModel(analyze_Model);
        options.setTemperature(0.7<span>);
        return<span> OpenAiChatModel.builder().openAiApi(OpenAiApi.builder().apiKey(analyze_apiKey).baseUrl(analyze_baseUrl).build()).defaultOptions(options).build();
    }

    // å…¶ä»–æ¨¡å‹é…ç½®...
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p>è¯¥ç±»ä½¿ç”¨ Spring çš„&nbsp;<code>@Configuration</code>&nbsp;æ³¨è§£ï¼Œé€šè¿‡&nbsp;<code>@Value</code>&nbsp;æ³¨è§£ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸åŒä»»åŠ¡æ‰€éœ€çš„ API å¯†é’¥ã€åŸºç¡€ URL å’Œæ¨¡å‹ç±»å‹ï¼Œç„¶ååˆ›å»ºç›¸åº”çš„&nbsp;<code>ChatModel</code>&nbsp;å®ä¾‹ã€‚</p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">4. æ§åˆ¶å™¨ï¼ˆ<span class="code-file-path-iIAQg1">AiChatController.javaï¼‰</span></h3>
<div class="cnblogs_code">
<pre><span>@RestController
@RequestMapping("/ai-api"<span>)
public class<span> AiChatController {
    private static final String DEFAULT_PROMPT = "ä½ å¥½ï¼Œä»‹ç»ä¸‹ä½ è‡ªå·±ï¼"<span>;

    private final<span> ChatClient openAiAnalyzeChatClient;
    private final<span> ChatClient openAiGenerateChatClient;
    private final<span> ChatClient openAiReviewerChatClient;
    private final<span> ChatClient openAiFormatChatClient;
    private final<span> ChatClient openAiVisualChatClient;

    public AiChatController(@Qualifier("analyzeModel"<span>) ChatModel analyzeModel, ...) {
        this.openAiAnalyzeChatClient =<span> ChatClient.builder(analyzeModel)
                .defaultAdvisors(new<span> SimpleLoggerAdvisor())
                .defaultOptions(OpenAiChatOptions.builder().topP(0.7<span>).build())
                .build();
        // å…¶ä»– ChatClient åˆå§‹åŒ–...
<span>    }

    @PostMapping("/file/upload"<span>)
    public ApiResult&lt;String&gt; uploadFile(@RequestParam("files"<span>) MultipartFile[] files) {
        ApiResult&lt;String&gt; result = new ApiResult&lt;&gt;<span>();
        try<span> {
            if (files == null || files.length == 0<span>) {
                result.setMessage("ä¸Šä¼ æ–‡ä»¶ä¸ºç©º"<span>);
                result.setCode(400<span>);
                return<span> result;
            }

            StringBuilder contentBuilder = new<span> StringBuilder();
            for<span> (MultipartFile file : files) {
                if<span> (file.isEmpty()) {
                    continue<span>;
                }
                String fileName =<span> file.getOriginalFilename();
                if (fileName == null<span>) {
                    continue<span>;
                }

                if (fileName.endsWith(".docx") || fileName.endsWith(".pdf"<span>)) {
                    List&lt;Media&gt; mediaList = null<span>;
                    if (fileName.endsWith(".docx"<span>)) {
                        // å°† docx è½¬æ¢ä¸º PDF
                        XWPFDocument docxDoc = new<span> XWPFDocument(file.getInputStream());
                        ByteArrayOutputStream pdfOutputStream = new<span> ByteArrayOutputStream();
                        PdfOptions options =<span> PdfOptions.create();
                        PdfConverter.getInstance().convert(docxDoc, pdfOutputStream, options);
                        byte[] pdfBytes =<span> pdfOutputStream.toByteArray();
                        mediaList =<span> convertPdfToImages(pdfBytes);
                    } else if (fileName.endsWith(".pdf"<span>)) {
                        mediaList =<span> convertPdfToImages(file.getBytes());
                    }
                    if (mediaList != null &amp;&amp; !<span>mediaList.isEmpty()) {
                        UserMessage message = UserMessage.builder().text(Consts.VISUAL_PROMPT).media(mediaList).metadata(new HashMap&lt;&gt;<span>()).build();
                        message.getMetadata().put(MESSAGE_FORMAT, MessageFormat.IMAGE);
                        String content = openAiVisualChatClient.prompt(new<span> Prompt(message)).call().content();
                        contentBuilder.append(content).append("\n"<span>);
                    }
                } else<span> {
                    if (!<span>file.isEmpty()) {
                        contentBuilder.append(file.getOriginalFilename()).append(":\n"<span>);
                        contentBuilder.append(new String(file.getBytes(), StandardCharsets.UTF_8)).append("\n"<span>);
                    }
                }
            }
            String content =<span> contentBuilder.toString();

            String resp =<span> openAiAnalyzeChatClient
                    .prompt(Consts.ANALYZE_PROMPT)
                    .user(content)
                    .call()
                    .content();

            result.setData(resp);
            result.setMessage("è§£æå®Œæˆ"<span>);
            result.setCode(200<span>);
        } catch<span> (Exception e) {
            result.setMessage("æ–‡ä»¶å¤„ç†å¼‚å¸¸: " +<span> e.getMessage());
            result.setCode(500<span>);
            return<span> result;
        }
        return<span> result;
    }

    // å…¶ä»–æ¥å£æ–¹æ³•...
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p><code>AiChatController</code>&nbsp;æ˜¯é¡¹ç›®çš„æ§åˆ¶å™¨ç±»ï¼Œè´Ÿè´£å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å®ƒé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¸åŒä»»åŠ¡çš„&nbsp;<code>ChatClient</code>&nbsp;å®ä¾‹ï¼Œæä¾›äº†æ–‡ä»¶ä¸Šä¼ ã€æµå¼æ–‡ä»¶ä¸Šä¼ å’Œæµ‹è¯•ç”¨ä¾‹åˆ›å»ºç­‰æ¥å£ã€‚åœ¨æ–‡ä»¶ä¸Šä¼ æ¥å£ä¸­ï¼Œä¼šæ ¹æ®æ–‡ä»¶ç±»å‹ï¼ˆ<code>.docx</code>&nbsp;æˆ–&nbsp;<code>.pdf</code>ï¼‰è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œå¦‚å°†&nbsp;<code>docx</code>&nbsp;è½¬æ¢ä¸º&nbsp;<code>PDF</code>ï¼Œå†å°†&nbsp;<code>PDF</code>&nbsp;è½¬æ¢ä¸ºå›¾ç‰‡ï¼Œæœ€åè°ƒç”¨å¯è§†åŒ–æ¨¡å‹è¿›è¡Œå¤„ç†</p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">5. èŠ‚ç‚¹ç±»ï¼ˆ<span class="code-file-path-iIAQg1">CaseGenerateNode.java,&nbsp;<span class="code-file-path-iIAQg1">CaseReviewerNode.java,&nbsp;<span class="code-file-path-iIAQg1">CaseFormatNode.javaï¼‰</span></span></span></h3>
<div class="cnblogs_code">
<pre>package<span> com.fingertip.caseaibackend.aiproxies.nodes;

import<span> com.alibaba.cloud.ai.graph.OverAllState;
import<span> com.alibaba.cloud.ai.graph.action.NodeAction;
import<span> com.fingertip.caseaibackend.commons.Consts;
import<span> org.springframework.ai.chat.client.ChatClient;
import<span> org.springframework.ai.chat.model.ChatResponse;
import<span> org.springframework.util.StringUtils;

import<span> java.util.HashMap;
import<span> java.util.Map;

public class CaseGenerateNode implements<span> NodeAction {
    private final<span> ChatClient chatClient;

    public<span> CaseGenerateNode(ChatClient chatClient) {
        this.chatClient =<span> chatClient;
    }

    @Override
    public Map&lt;String, Object&gt;<span> apply(OverAllState t) {
        String origin_message = (String) t.value(Consts.ORIGIN_MESSAGE).orElse(""<span>);
        String case_reviewer_message = (String) t.value(Consts.CASE_REVIEW_MESSAGE).orElse(""<span>);
        String caseInfo = (String) t.value(Consts.CASE_INFO_MESSAGE).orElse(""<span>);

        if (!<span>StringUtils.hasText(origin_message)) {
            throw new IllegalArgumentException("æ²¡æœ‰æ‰¾åˆ°åŸå§‹æ¶ˆæ¯"<span>);
        }
        String content = Consts.CASE_WRITER_PROMPT + "\n\n" +<span> origin_message;
        if (StringUtils.hasText(case_reviewer_message) &amp;&amp;<span> StringUtils.hasText(caseInfo)) {
            content = "%s\n# åŸå§‹éœ€æ±‚:\n%s\n\n# ä¸Šä¸ªç‰ˆæœ¬éœ€æ±‚ç”¨ä¾‹:\n%s \n# ä¸“å®¶æ„è§:%s\n"<span>.formatted(Consts.CASE_WRITER_PROMPT, origin_message, caseInfo, case_reviewer_message);
        }

        ChatResponse response =<span> chatClient.prompt(content).call().chatResponse();
        String output = null<span>;
        if (response != null<span>) {
            output =<span> response.getResult().getOutput().getText();
        }

        Map&lt;String, Object&gt; updated = new HashMap&lt;&gt;<span>();
        updated.put(Consts.CASE_INFO_MESSAGE, output);

        return<span> updated;
    }
}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<p>è¿™äº›èŠ‚ç‚¹ç±»å®ç°äº†&nbsp;<code>NodeAction</code>&nbsp;æ¥å£ï¼Œç”¨äºåœ¨çŠ¶æ€å›¾ä¸­æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œ<code>CaseGenerateNode</code>&nbsp;è´Ÿè´£æ ¹æ®åŸå§‹éœ€æ±‚å’Œè¯„å®¡æ„è§ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œå®ƒä»&nbsp;<code>OverAllState</code>&nbsp;ä¸­è·å–æ‰€éœ€çš„ä¿¡æ¯ï¼Œæ„é€ è¯·æ±‚å†…å®¹ï¼Œè°ƒç”¨ç›¸åº”çš„&nbsp;<code>ChatClient</code>&nbsp;ä¸å¤§è¯­è¨€æ¨¡å‹äº¤äº’ï¼Œæœ€åå°†ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹ä¿¡æ¯å­˜å‚¨åˆ°&nbsp;<code>OverAllState</code>&nbsp;ä¸­ã€‚</p>
<h3 class="header-vfC6AV auto-hide-last-sibling-br">6. åé¦ˆåˆ†å‘å™¨ï¼ˆ<span class="code-file-path-iIAQg1">FeedbackDispatcher.javaï¼‰</span></h3>
<div class="cnblogs_code">
<pre>package<span> com.fingertip.caseaibackend.aiproxies.nodes;

import<span> com.alibaba.cloud.ai.graph.OverAllState;
import<span> com.alibaba.cloud.ai.graph.action.EdgeAction;
import<span> com.fingertip.caseaibackend.commons.Consts;

public class FeedbackDispatcher implements<span> EdgeAction {
    @Override
    public<span> String apply(OverAllState t) {
        String output = (String) t.value(Consts.CASE_REVIEW_MESSAGE).orElse(""<span>);
        return output.toLowerCase().contains("approve") ? "positive" : "negative"<span>;
    }
}</span></span></span></span></span></span></span></span></pre>
</div>
<p><code>FeedbackDispatcher</code>&nbsp;å®ç°äº†&nbsp;<code>EdgeAction</code>&nbsp;æ¥å£ï¼Œæ ¹æ®æµ‹è¯•ç”¨ä¾‹è¯„å®¡ç»“æœï¼ˆ<code>CASE_REVIEW_MESSAGE</code>ï¼‰åˆ¤æ–­æ˜¯å¦é€šè¿‡è¯„å®¡ï¼Œå¹¶è¿”å›ç›¸åº”çš„åé¦ˆç»“æœï¼ˆ<code>positive</code>&nbsp;æˆ–&nbsp;<code>negative</code>ï¼‰ï¼Œç”¨äºçŠ¶æ€å›¾ä¸­çš„æµç¨‹æ§åˆ¶</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>ğŸŒŸCç«¯é¡µé¢</p>
<p>&nbsp;</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1284295/202507/1284295-20250707150309470-407562031.png" class="lazyload"></p>
<p>&nbsp;</p>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/1284295/202507/1284295-20250707152041738-1664523471.png" class="lazyload"></p>
<p>&nbsp;</p>
<p>&nbsp;æ€»ç»“ï¼š</p>
<p>ç›®å‰ç”¨ä¾‹ç”Ÿæˆçš„promotéœ€æŒç»­è°ƒä¼˜ï¼Œæµ‹è¯•ç”¨ä¾‹çš„è¡¥å…¨ã€æœ€ç»ˆç”¨ä¾‹çš„å­˜å‚¨ã€ä¸‹è½½åŠŸèƒ½æœ‰å¾…å¼€å‘ï¼Œæ•¬è¯·æœŸå¾…~</p>
<p>&nbsp;</p>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-08 11:55">2025-07-08 11:54</span>&nbsp;
<a href="https://www.cnblogs.com/clairejing">å°å±å¦</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18972723);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18972723', targetLink: 'https://www.cnblogs.com/clairejing/p/18972723', title: 'Spring AI Alibabaæ™ºèƒ½æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ' })">ä¸¾æŠ¥</a>
</div>
        
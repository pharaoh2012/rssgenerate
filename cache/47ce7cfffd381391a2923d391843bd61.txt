
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/sdcb/p/19027666/sdcb-chats-1-6-6-release" title="发布于 2025-08-08 08:45">
    <span role="heading" aria-level="2">Sdcb Chats 1.6.6 发布，彻底移除 Azure.AI.OpenAI 专用包</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>最近，我对我的开源项目 Sdcb Chats 进行了一次更新，发布了 1.6.6 版本。这次更新的核心，是解决了一个我个人一直很在意的技术债：彻底移除了对 <code>Azure.AI.OpenAI</code> 这个专用包的依赖。</p>
<p>在介绍具体改动前，先为新朋友简单介绍一下 Sdcb Chats。这是一个旨在帮助开发者和用户轻松接入、管理和使用各类主流大语言模型的开源项目。</p>
<p><strong>核心特性包括：</strong></p>
<ul>
<li><strong>🔍 广泛的模型支持</strong>：兼容超过 18 种主流 LLM，包括 OpenAI、Azure OpenAI，以及在本地部署的 Ollama 等。</li>
<li><strong>🗄️ 灵活的数据库选项</strong>：支持 SQLite、SQL Server 和 PostgreSQL，可以根据部署规模灵活选择。</li>
<li><strong>🚢 多样的部署方式</strong>：提供 Docker 镜像和原生二进制文件，旨在实现快速、便捷的部署。</li>
<li><strong>⚙️ 完善的管理功能</strong>：内置多用户管理、Token 消耗统计与成本控制模块，为实际运营提供支持。</li>
</ul>
<p>项目基于 Apache 2.0 协议开源，所有代码都托管在 GitHub，欢迎大家关注和贡献：<a href="https://github.com/sdcb/chats" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats</a></p>
<p>接下来，我们详细聊聊 1.6.6 版本（包含 1.6.5 的累积更新）带来的变化。</p>
<h2 id="api-的统一移除-azureaiopenai-依赖">API 的统一：移除 Azure.AI.OpenAI 依赖</h2>
<p>在之前的版本中，为了同时兼容标准 OpenAI API 和 Azure OpenAI，我需要同时维护对 <code>OpenAI</code> 和 <code>Azure.AI.OpenAI</code> 两个包的依赖。后者虽然是微软官方出品，但在实践中存在一些与主包不完全一致的 API 行为和配置，这给代码的统一性和维护性带来了一些不必要的麻烦，算是一个不大不小的“痛点”。</p>
<p>好消息是，微软最近终于将 Azure OpenAI 的预览版 API 更新为与官方 OpenAI API 完全兼容。</p>
<p>官方的参考文档也明确了这一点：<a href="https://learn.microsoft.com/en-us/azure/ai-foundry/openai/reference-preview-latest" target="_blank" rel="noopener nofollow">Azure OpenAI Service preview API reference</a></p>
<p>这一变化意义重大。现在，我可以直接移除 <code>Azure.AI.OpenAI</code> 包，只保留 <code>OpenAI</code> 包，就能同时服务于两个平台。代码逻辑得到了极大的简化，不再需要那些条件编译或分支判断来处理不同平台的差异。对于追求代码简洁的我来说，这是一个非常受欢迎的改进。</p>
<p>得益于 API 的统一，之前的一些模型使用限制也自然解除了：</p>
<ul>
<li>像 <code>o3/o4-mini</code> 这类需要 Response API 的模型，之前只能通过 Azure 部署，现在同样支持标准的 OpenAI 渠道。</li>
<li>图片生成模型 <code>gpt-image-1</code> 也一样，不再受限于必须使用 Azure OpenAI，现在两个渠道均可使用。</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/233608/202508/233608-20250807230750544-482403400.png" alt="Gemini_Generated_Image_agbiz3agbiz3agbi" loading="lazy"></p>
<h2 id="其他更新与-bug-修复">其他更新与 Bug 修复</h2>
<p>当然，除了这个核心变化，还有一些其他的调整。</p>
<p>首先，作为常规维护的一部分，我将项目依赖的一系列 NuGet 包更新到了最新版本，具体清单如下：</p>
<pre><code>AWSSDK.S3 updated to 4.0.6.3
Microsoft.EntityFrameworkCore.* updated to 9.0.8
Mscc.GenerativeAI updated to 2.6.8
OpenAI updated to 2.3.0
System.IdentityModel.Tokens.Jwt updated to 8.13.0
System.Runtime.Caching updated to 9.0.8
</code></pre>
<p>其次，也修复了一个迭代开发中出现的典型问题。在 1.6.5 版本中，我修复了 <code>o3/o4-mini</code> 等模型在使用 JSON Schema 时会导致 API 调用失败的 Bug。然而，这个修复却意外导致了 <code>gpt-image-1</code> 图片生成模型的调用出错。修复一个 Bug 引入另一个，这大概是软件开发的常态了。在 1.6.6 版本中，这个问题已经得到修正，保证了功能的稳定性。</p>
<h2 id="如何快速上手">如何快速上手？</h2>
<p>如果你想体验 Sdcb Chats，可以通过以下两种方式部署。</p>
<p>对于习惯使用 Docker 的用户，可以使用以下命令：</p>
<pre><code class="language-bash">docker run --restart unless-stopped --name sdcb-chats -v ./AppData:/app/AppData -p 8080:8080 sdcb/chats:latest
</code></pre>
<p>如果你偏好直接运行二进制文件，可以访问项目的 GitHub Release 页面：<br>
<a href="https://github.com/sdcb/chats/releases" target="_blank" rel="noopener nofollow">https://github.com/sdcb/chats/releases</a></p>
<p>以 Windows 为例，下载 <code>chats-win-x64.zip</code>，解压后运行 <code>Chats.BE.exe</code> 即可启动服务。</p>
<p>需要说明的是，项目默认使用 SQLite 数据库，并会自动创建，无需额外配置。如果你的业务需要更专业的数据库，它也支持 SQL Server 和 PostgreSQL，具体配置方法请参考项目首页的文档。</p>
<h2 id="关于下载地址">关于下载地址</h2>
<p>我之前提供过一个位于 <code>io.starworks.cc:88</code> 的国内下载镜像，主要是为了解决 GitHub Release 在国内访问慢的问题。但这个镜像的稳定性并不理想，后续我可能不再投入精力维护。因此，<strong>建议大家还是优先通过官方的 GitHub Release 页面进行下载</strong>，以确保获取到最稳定和最新的版本。</p>
<p>总的来说，这次更新让 Sdcb Chats 的底层实现更加干净和统一，也体现了上游技术生态（这里指 Azure）向开放标准靠拢的积极趋势。这对于开发者无疑是件好事。</p>
<hr>
<p>感谢阅读到这里，如果感觉本文对您有帮助，请不吝<strong>评论</strong>和<strong>点赞</strong>，这也是我持续创作的动力！</p>
<p>也欢迎加入我的 <strong>Sdcb Chats QQ群：498452653</strong>，一起交流 .NET 和 AI 的各种有趣玩法！</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-08 08:45">2025-08-08 08:45</span>&nbsp;
<a href="https://www.cnblogs.com/sdcb">.NET骚操作</a>&nbsp;
阅读(<span id="post_view_count">129</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19027666);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19027666', targetLink: 'https://www.cnblogs.com/sdcb/p/19027666/sdcb-chats-1-6-6-release', title: 'Sdcb Chats 1.6.6 发布，彻底移除 Azure.AI.OpenAI 专用包' })">举报</a>
</div>
        
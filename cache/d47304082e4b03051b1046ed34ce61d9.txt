
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/aqi00/p/18982656" title="发布于 2025-07-27 12:28">
    <span role="heading" aria-level="2">FFmpeg开发笔记（七十八）采用Kotlin+Compose的NextPlayer播放器</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span id="cke_bm_1139S">《FFmpeg开发实战：从零基础到短视频上线》一书的“第 12 章 &nbsp;FFmpeg的移动开发”介绍了如何使用FFmpeg在手机上播放视频，基于FFmpeg的国产播放器开源框架也有很多了，前有哔哩哔哩的ijkplayer，后有小红书的RedPlayer，参见之前的文章《使用国产的ijkplayer播放器观看网络视频》和《使用国产的RedPlayer播放器观看网络视频》。<br>
除此以外，NextPlayer也是一款优秀的Android原生播放器，该框架采用Kotlin+Compose开发，贴近最新的Android开发技术。NextPlayer支持的视频编码格式包括H.263、H.264（AVC）、H.265（HEVC）、MPEG-4 SP、VP8、VP9、AV1等，支持的音频编码格式包括Vorbis、Opus、FLAC、ALAC、PCM/WAVE、MP1、MP2、MP3、AMR、AAC 等，支持的字幕格式包括SRT、SSA、ASS、TTML、VTT、DVB等，可谓博采众长。<br>
NextPlayer的源码托管地址为https://github.com/anilbeesetti/nextplayer（星星数2.8k），国内的镜像地址为https://gitcode.com/gh_mirrors/ne/nextplayer，最新版本是2025年1月发布的NextPlayer v0.13.0，可见该框架的源码更新十分及时。并且NextPlayer的源码采用Kotlin+Compose编写，适合Android开发者用作进阶练习，不过由于NextPlayer引入了最新的Android开发技术，因此需要使用较新的Android Studio才能成功导入运行。<br>
接下来以Android Studio Ladybug（小瓢虫版本）为例，介绍如何通过Android Studio编译运行NextPlayer的demo工程。<br>
使用Android Studio导入nextplayer工程之后，Gradle会报错“The project is using an incompatible version (AGP 8.10.1) of the Android Gradle plugin. Latest supported version is AGP 8.7.2”。这是因为nextplayer工程用到的Gradle插件版本8.10.1太高了，需要降级降到8.7.2。于是打开nextplayer/gradle/libs.versions.toml，把下面这行</span></p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="8" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22androidGradlePlugin%20%3D%20%5C%228.10.1%5C%22%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">androidGradlePlugin = "8.10.1"</code></pre>
</div>
<p>改为下面这行，也就是把androidGradlePlugin版本号从8.10.1降到8.7.2。</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="7" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22androidGradlePlugin%20%3D%20%5C%228.7.2%5C%22%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">androidGradlePlugin = "8.7.2"</code></pre>
</div>
<p>继续编译nextplayer工程，Gradle又报错“Inconsistent JVM-target compatibility detected for tasks 'compileJava' (21)”。这是因为nextplayer工程用的JVM版本为17，而Android Studio Ladybug默认安装的JVM版本为21，所以需要把nextplayer工程的JVM版本从17升级到21。于是打开nextplayer/gradle/libs.versions.toml，把下面这行</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="6" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22android-jvm%20%3D%20%5C%2217%5C%22%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">android-jvm = "17"</code></pre>
</div>
<p>改为下面这行，也就是把android-jvm版本号从17升到21。</p>
<div class="cke_widget_wrapper cke_widget_block cke_widget_codeSnippet cke_widget_selected" data-cke-display-name="代码段" data-cke-filter="off" data-cke-widget-id="5" data-cke-widget-wrapper="1">
<pre class="cke_widget_element" data-cke-widget-data="%7B%22code%22%3A%22android-jvm%20%3D%20%5C%2221%5C%22%22%2C%22classes%22%3Anull%7D" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-widget="codeSnippet"><code class="hljs">android-jvm = "21"</code></pre>
</div>
<p>等待nextplayer工程编译通过，把demo应用安装到手机上，启动之后的App界面如下图所示：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="4" data-cke-widget-wrapper="1"><span class="cke_reset cke_widget_drag_handler_container"><span class="cke_image_resizer" title="点击并拖拽以改变尺寸"><span class="cke_widget_edit_container" title="编辑图片"><img alt="" width="314" height="517" data-src="https://img2024.cnblogs.com/blog/729938/202507/729938-20250713181548230-355998946.jpg" class="lazyload"></span></span></span></span></p>
<p>可见NextPlayer会自动搜索手机上的视频目录。进入某个目录后选择一个视频，NextPlayer就打开全屏播放窗口如下图所示：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="3" data-cke-widget-wrapper="1"><span class="cke_reset cke_widget_drag_handler_container"><span class="cke_image_resizer" title="点击并拖拽以改变尺寸"><span class="cke_widget_edit_container" title="编辑图片"><img alt="" width="500" height="281" data-src="https://img2024.cnblogs.com/blog/729938/202507/729938-20250713181603625-1246668065.png" class="lazyload"></span></span></span></span></p>
<p>点击播放界面右上角的音符图标，弹出音轨选择窗口如下图所示：</p>
<p><span class="cke_widget_wrapper cke_widget_inline cke_widget_image cke_image_nocaption cke_widget_selected" data-cke-display-name="图像" data-cke-filter="off" data-cke-widget-id="2" data-cke-widget-wrapper="1"><span class="cke_reset cke_widget_drag_handler_container"><span class="cke_image_resizer" title="点击并拖拽以改变尺寸"><span class="cke_widget_edit_container" title="编辑图片"><img alt="" width="498" height="280" data-src="https://img2024.cnblogs.com/blog/729938/202507/729938-20250713181622636-1908553585.png" class="lazyload"></span></span></span></span></p>
<p>总结一下，NextPlayer确实使用简单，播放功能也丰富，是个未来可期的下一代播放器。</p>
<p>更多详细的FFmpeg开发知识参见<span class="cke_widget_wrapper cke_widget_inline cke_widget_csdnlink cke_widget_selected" data-cke-display-name="a" data-cke-filter="off" data-cke-widget-id="1" data-cke-widget-wrapper="1"><a class="cke_widget_editable cke_widget_element" title="《FFmpeg开发实战：从零基础到短视频上线》" href="https://item.jd.com/14020415.html" data-cke-enter-mode="2" data-cke-saved-href="https://item.jd.com/14020415.html" data-cke-widget-data="%7B%22url%22%3A%22https%3A%2F%2Fitem.jd.com%2F14020415.html%22%2C%22text%22%3A%22%E3%80%8AFFmpeg%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BB%8E%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%88%B0%E7%9F%AD%E8%A7%86%E9%A2%91%E4%B8%8A%E7%BA%BF%E3%80%8B%22%2C%22desc%22%3A%22%22%2C%22icon%22%3A%22%22%2C%22isCard%22%3Afalse%2C%22hasResquest%22%3Atrue%2C%22iconDefault%22%3A%22https%3A%2F%2Fcsdnimg.cn%2Frelease%2Fblog_editor_html%2Frelease2.3.9%2Fckeditor%2Fplugins%2FCsdnLink%2Ficons%2Ficon-default.png%3Ft%3DP4F5%22%2C%22id%22%3A%22bWuJMs-1752401694404%22%2C%22classes%22%3Anull%7D" data-cke-widget-editable="text" data-cke-widget-keep-attr="0" data-cke-widget-upcasted="1" data-link-icon="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5" data-link-title="《FFmpeg开发实战：从零基础到短视频上线》" data-widget="csdnlink" rel="noopener nofollow">《FFmpeg开发实战：从零基础到短视频上线》</a>一书。</span></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-27 12:29">2025-07-27 12:28</span>&nbsp;
<a href="https://www.cnblogs.com/aqi00">aqi00</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18982656);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18982656', targetLink: 'https://www.cnblogs.com/aqi00/p/18982656', title: 'FFmpeg开发笔记（七十八）采用Kotlin+Compose的NextPlayer播放器' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/shenchuanchao/p/18922306" title="å‘å¸ƒäº 2025-06-10 15:50">
    <span role="heading" aria-level="2">Hexo-butterfly æ¥å…¥è…¾è®¯æ··å…ƒå¤§æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆæ–‡ç« æ‘˜è¦(ä¿å§†æ•™ç¨‹)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1æ³¨å†Œè…¾è®¯äº‘è´¦å·">1ã€æ³¨å†Œè…¾è®¯äº‘è´¦å·</h2>
<ol>
<li>é¦–å…ˆå¿…é¡»è¦æœ‰ä¸€ä¸ªè…¾è®¯äº‘çš„è´¦å·ï¼Œæ²¡æœ‰çš„è¯åœ¨å®˜ç½‘æ³¨å†Œä¸€ä¸ªï¼Œæ³¨å†Œå®Œæˆä¹‹åï¼Œè¿›è¡Œå®åæ“ä½œã€‚</li>
<li>æ¥ä¸‹æ¥ï¼Œåœ¨äº§å“ä¸­å¿ƒæœç´¢<code>è…¾è®¯æ··å…ƒå¤§æ¨¡å‹</code>,ç‚¹å‡»<code>äº§å“æ§åˆ¶å°</code>è¿›å…¥ï¼Œåœ¨æ¨¡å‹å¹¿åœºé€‰æ‹©è‡ªå·±æƒ³è¦çš„å¤§æ¨¡å‹ (å¤åˆ¶æ¨¡å‹åç§°ï¼Œåé¢ä¼šç”¨åˆ°)<br>
<img src="https://www.codeobservatory.cn/images/20250526154845.png" alt="è…¾è®¯æ··å…ƒå¤§æ¨¡å‹" loading="lazy"><br>
<img src="https://www.codeobservatory.cn/images/20250526154906.png" alt="è…¾è®¯æ··å…ƒå¤§æ¨¡å‹" loading="lazy"></li>
<li><strong>åˆ›å»ºAPI KEY</strong>:æ¨¡å‹å¹¿åœº--ç³»ç»Ÿç®¡ç†--æ¥å…¥ç®¡ç†--åˆ›å»ºAPI KEY (å¤åˆ¶API KEYï¼Œåé¢ä¼šç”¨åˆ°)</li>
</ol>
<h2 id="2å®‰è£…æ’ä»¶">2ã€å®‰è£…æ’ä»¶</h2>
<p>è¯¥æ’ä»¶æ˜¯æ’ä»¶åŸºäº<a href="https://github.com/rootlexme/hexo-ai-excerpt" target="_blank" rel="noopener nofollow">hexo-ai-excerpt</a>æ’ä»¶å¼€å‘è€Œæ¥ï¼ŒåŸæ’ä»¶å·²ç»å½’æ¡£ï¼Œç”±å…¶ä»–å¤§ä½¬å¤åˆ»äº†æ–°çš„ï¼Œåœ°å€å¦‚ä¸‹ï¼š<a href="https://github.com/willow-god/hexo-ai-summary" target="_blank" rel="noopener nofollow">hexo-ai-summary-liushen</a></p>
<p>å¤åˆ¶ä¸‹æ–¹å‘½ä»¤è¿è¡Œ</p>
<pre><code class="language-bash">npm install hexo-ai-summary-liushen --save
</code></pre>
<p>è¯¥æ’ä»¶å·²ç»å°½åŠ›ä¸ä¾èµ–å…¶ä»–éå¿…è¦æ’ä»¶ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€äº›éœ€è¦é¢å¤–å®‰è£…ï¼Œä½ å¯ä»¥å°è¯•æ£€æŸ¥åœ¨åšå®¢æ ¹ç›®å½•æ˜¯å¦å­˜åœ¨ä»¥ä¸‹ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå‘½ä»¤å®‰è£…é¢å¤–æ’ä»¶ï¼š</p>
<pre><code class="language-bash">npm install axios p-limit node-fetch --save
</code></pre>
<p>å®‰è£…åï¼Œåœ¨<code>Hexo</code>é…ç½®æ–‡ä»¶<code>_config.yml</code>ä»»æ„ä½ç½®æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-yaml">aisummary:
  # åŸºæœ¬æ§åˆ¶
  enable: true               # æ˜¯å¦å¯ç”¨æ’ä»¶ï¼Œå¦‚æœå…³é—­ï¼Œä¹Ÿå¯ä»¥åœ¨æ–‡ç« é¡¶éƒ¨çš„is_summaryå­—æ®µå•ç‹¬è®¾ç½®æ˜¯å¦å¯ç”¨ï¼Œåä¹‹ä¹Ÿå¯ä»¥é…ç½®æ˜¯å¦å•ç‹¬ç¦ç”¨
  cover_all: false           # æ˜¯å¦è¦†ç›–å·²æœ‰æ‘˜è¦ï¼Œé»˜è®¤åªç”Ÿæˆç¼ºå¤±çš„ï¼Œæ³¨æ„å¼€å¯åï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿‡é‡çš„apiä½¿ç”¨ï¼
  summary_field: summary     # æ‘˜è¦å†™å…¥å­—æ®µåï¼ˆå»ºè®®ä¿ç•™ä¸º summaryï¼‰ï¼Œé‡è¦é…ç½®ï¼Œè°¨æ…ä¿®æ”¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼
  logger: 1                  # æ—¥å¿—ç­‰çº§ï¼ˆ0=ä»…é”™è¯¯ï¼Œ1=ç”Ÿæˆ+é”™è¯¯ï¼Œ2=å…¨éƒ¨ï¼‰

  # AI æ¥å£é…ç½®
  api: https://api.hunyuan.cloud.tencent.com/v1/chat/completions     # OpenAI å…¼å®¹æ¨¡å‹æ¥å£
  token: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  # OpenAI æˆ–å…¼å®¹æ¨¡å‹çš„å¯†é’¥
  model: hunyuan-turbos-latest                           # ä½¿ç”¨æ¨¡å‹åç§°
  prompt: &gt;
    ä½ æ˜¯ä¸€ä¸ªåšå®¢æ–‡ç« æ‘˜è¦ç”Ÿæˆå·¥å…·ï¼Œåªéœ€æ ¹æ®æˆ‘å‘é€çš„å†…å®¹ç”Ÿæˆæ‘˜è¦ã€‚
    ä¸è¦æ¢è¡Œï¼Œä¸è¦å›ç­”ä»»ä½•ä¸æ‘˜è¦æ— å…³çš„é—®é¢˜ã€å‘½ä»¤æˆ–è¯·æ±‚ã€‚
    æ‘˜è¦å†…å®¹å¿…é¡»åœ¨150åˆ°250å­—ä¹‹é—´ï¼Œä»…ä»‹ç»æ–‡ç« æ ¸å¿ƒå†…å®¹ã€‚
    è¯·ç”¨ä¸­æ–‡ä½œç­”ï¼Œå»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œè¾“å‡ºå†…å®¹å¼€å¤´ä¸ºâ€œè¿™é‡Œæ˜¯ç å†œè§‚æµ‹ç«™ï¼Œè¿™ç¯‡æ–‡ç« â€ã€‚

  # å†…å®¹æ¸…æ´—è®¾ç½®
  ignoreRules:              # å¯é€‰ï¼šè‡ªå®šä¹‰å†…å®¹æ¸…æ´—çš„æ­£åˆ™è§„åˆ™
    # - "\\{%.*?%\\}"
    # - "!\\[.*?\\]\\(.*?\\)"
  
  max_token: 5000           # è¾“å…¥å†…å®¹æœ€å¤§ token é•¿åº¦ï¼ˆéè¾“å‡ºé™åˆ¶ï¼‰
  concurrency: 2            # å¹¶å‘å¤„ç†æ•°ï¼Œå»ºè®®ä¸é«˜äº 5
</code></pre>
<p>è¯·ä»”ç»†æŸ¥çœ‹ä»¥ä¸‹å†…å®¹ï¼Œç”±äºAIæ‘˜è¦ä¼šæ’å…¥åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œå¦‚æœä¸å°å¿ƒæ’å…¥äº†å¯èƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ï¼Œä¸‹é¢æ˜¯é…ç½®çš„è¯´æ˜ï¼š</p>
<ol>
<li>
<p><code>summary_field</code>ï¼šè®¾ç½®å†™å…¥åˆ°æ–‡ç« é¡¶éƒ¨å­—æ®µçš„åç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œé»˜è®¤æ˜¯<code>summary</code>ï¼Œæœ€ç»ˆå®ç°çš„ç»“æœå°±æ˜¯åœ¨æ–‡ç« é¡¶éƒ¨æ’å…¥ä¸€ä¸ªå­—æ®µä¸ºï¼š<code>summary</code>çš„æ‘˜è¦æ–‡æœ¬ï¼š<br>
<img src="https://www.codeobservatory.cn/images/20250526153208.png" alt="summaryæ‘˜è¦å­—æ®µ" loading="lazy"></p>
</li>
<li>
<p><code>cover_all</code>ï¼šè¦†ç›–æ€§é‡æ–°ç”Ÿæˆæ‰€æœ‰æ‘˜è¦ï¼Œéå¿…è¦ä¸è¦æ‰“å¼€ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿‡é‡çš„apiæ¶ˆè€—ã€‚</p>
</li>
<li>
<p><code>logger</code>ä¸ºäº†æ›´åŠ ç²¾ç»†çš„å®ç°æ§åˆ¶ï¼Œæˆ‘è®¾ç½®äº†ä¸‰ä¸ªæ—¥å¿—ç­‰çº§ï¼Œå¦‚ä¸‹åˆ’åˆ†ï¼š</p>
<ul>
<li>0ï¼šä»…ä»…æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¸ä¼šæ˜¾ç¤ºåŒ…æ‹¬ç”Ÿæˆæ–‡ç« æ‘˜è¦åœ¨å†…çš„ä»»ä½•è¾“å‡º</li>
<li>1ï¼šå½“ç”Ÿæˆæ–°æ–‡ç« æ‘˜è¦æ—¶ï¼Œä¼šè¾“å‡ºå¯¹äºæ–‡æœ¬çš„å¤„ç†ï¼Œæ¯”å¦‚è¶…é•¿è‡ªåŠ¨è£å‰ªï¼Œç”ŸæˆæˆåŠŸæˆ–è€…ç”Ÿæˆå¤±è´¥ã€‚</li>
<li>2ï¼šè°ƒè¯•ä½¿ç”¨ï¼Œä¼šè¾“å‡ºåŒ…æ‹¬è·³è¿‡æ‰€æœ‰é¡µé¢ä¿¡æ¯ï¼Œä»…ä»…å¤„ç†æ–‡ç« éƒ¨åˆ†ã€‚</li>
</ul>
</li>
<li>
<p><code>api</code>ï¼šä»»ä½•openaiç±»å‹æ¥å£ï¼ŒåŒ…æ‹¬deepseekï¼Œè®¯é£æ˜Ÿç«ï¼Œè…¾è®¯æ··å…ƒï¼ŒChatGPTç­‰ã€‚</p>
</li>
<li>
<p><code>token</code>ï¼šapiå¯¹åº”çš„æ¥å£å¯†é’¥ã€‚</p>
</li>
<li>
<p><code>model</code>ï¼šä½¿ç”¨çš„æ¨¡å‹åç§°ï¼Œè¯·æ£€æŸ¥å¯¹åº”æ¥å£æ–‡æ¡£è¯´æ˜ï¼Œä¸åŒæ¥å£åŒ…å«çš„æ¨¡å‹ä¸ä¸€è‡´ã€‚</p>
</li>
<li>
<p><code>prompt</code>ï¼šæç¤ºè¯ï¼Œè¯·è‡ªè¡Œå®šåˆ¶ï¼Œå»ºè®®è¯¦ç»†ä¸€äº›ï¼Œä½†æ˜¯ä¸è¦å¤ªåºŸè¯ï¼Œä»¥æˆ‘å†™çš„ä¸ºä¾‹ã€‚</p>
</li>
<li>
<p><code>ignoreRules</code>ï¼šå¿½ç•¥æ–‡æœ¬æ­£åˆ™æ¥å£ï¼Œç”±äºæœ¬æ’ä»¶ç›´æ¥è·å–Markdownæ–‡æœ¬ï¼Œå†…ç½®äº†ä¸€äº›å¤„ç†ï¼Œä½†æ˜¯ä½ ä»ç„¶å¯ä»¥è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œä¸‹é¢æ˜¯å†…ç½®çš„æ–‡æœ¬å¤„ç†è§„åˆ™ï¼Œå¦‚æœæœ‰å…´è¶£è¿›è¡Œä¿®æ”¹å¯ä»¥è¿›è¡Œå‚è€ƒï¼š</p>
</li>
</ol>
<pre><code class="language-javascript">// 2. æ¸…ç†å†…å®¹
  content = content
    .replace(/```[\s\S]*?```/g, '')           // ä»£ç å—
    // .replace(/`[^`\n]+`/g, '')                // è¡Œå†…ä»£ç 
    .replace(/{%[^%]*%}/g, '')                // Hexo æ ‡ç­¾
    .replace(/^\|.*?\|.*$/gm, '')             // è¡¨æ ¼è¡Œ
    .replace(/!\[.*?\]\(.*?\)/g, '')          // å›¾ç‰‡
    .replace(/\[(.*?)\]\(.*?\)/g, '$1')       // è¶…é“¾æ¥æ–‡æœ¬
    .replace(/&lt;[^&gt;]+&gt;/g, '')                  // HTML æ ‡ç­¾
    .replace(/&amp;nbsp;/g, ' ')                  // ç©ºæ ¼å®ä½“
    .replace(/\n{2,}/g, '\n')                 // å¤šé‡æ¢è¡Œå‹ç¼©
    .replace(/^\s+|\s+$/gm, '')               // è¡Œé¦–å°¾ç©ºæ ¼
    .replace(/[ \t]+/g, ' ')                  // å¤šç©ºæ ¼å‹ç¼©
    .trim();

  // 3. æ‹¼æ¥æ ‡é¢˜
  const combined = (title ? title.trim() + '\n\n' : '') + content;
</code></pre>
<p>ä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µå¯ä»¥å¿½ç•¥è¿™ä¸ªé…ç½®é¡¹ï¼Œç•™ç©ºå³å¯ã€‚</p>
<ol start="9">
<li>
<p><code>max_token</code>ï¼šé™åˆ¶æ¨¡å‹è¾“å…¥çš„æœ€å¤§å­—æ•°ï¼Œç”¨å­—ç¬¦ä¸²çš„sliceè¿›è¡Œæˆªæ–­ï¼Œå¦‚æœè¶…å‡ºæ¨¡å‹æ¥å—èŒƒå›´ï¼Œå¯èƒ½ä¼šé€ æˆä¸‹æ–‡è¦†ç›–ä¸Šæ–‡å¯¼è‡´<code>prompt</code>ä¸¢å¤±ï¼Œå†…å®¹æ··ä¹±ï¼Œæ‰€ä»¥è¯·æŒ‰ç…§æ¨¡å‹æ‰¿å—èƒ½åŠ›è¿›è¡Œçµæ´»é…ç½®ã€‚</p>
</li>
<li>
<p><code>concurrency</code>ï¼šå¾ˆå¤šæ¨¡å‹ä¼šé™åˆ¶å¹¶å‘ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘åˆ©ç”¨<code>p-limit</code>æ’ä»¶å®ç°äº†å¹¶å‘é™åˆ¶ï¼Œé™ä½å¤±è´¥è¯·æ±‚çš„æ¦‚ç‡ï¼Œç»è¿‡è°ƒæŸ¥ï¼Œ<code>p-limit</code>åº”è¯¥æ˜¯hexoå†…å·²ç»æœ‰çš„ä¸€äº›åŒ…ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦æ‹…å¿ƒéœ€è¦é‡æ–°å®‰è£…ä¹‹ç±»çš„ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
</li>
</ol>
<h2 id="3hexoé€‚é…">3ã€Hexoé€‚é…</h2>
<h3 id="æ·»åŠ é…ç½®">æ·»åŠ é…ç½®</h3>
<p>ç›®å‰æˆ‘ä»¬å·²ç»è‡ªåŠ¨åŒ–äº†ä»AIä¸­ï¼Œå–‚æˆ‘ä»¬çš„æ–‡ç« ç»™AIï¼Œå†ç”Ÿæˆæ‘˜è¦ï¼Œå†å†™åˆ°æ–‡ä»¶é¡¶éƒ¨çš„è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹è¿›è¡Œä»æ–‡ä»¶é¡¶éƒ¨æ¸²æŸ“åˆ°ç½‘ç«™é¡µé¢ä¸Šã€‚</p>
<p>é¦–å…ˆåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlæ–‡ä»¶ä¸­å†™å…¥é…ç½®ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ§åˆ¶æ‘˜è¦æ˜¯å¦å¼€å¯ï¼š</p>
<pre><code class="language-bash"># --------------------------------------
# æ–‡ç« è®¾ç½®
# --------------------------------------
# æ–‡ç« AIæ‘˜è¦æ˜¯å¦å¼€å¯ï¼Œä¼šè‡ªåŠ¨æ£€ç´¢æ–‡ç« è‰²summaryå­—æ®µï¼Œè‹¥æ²¡æœ‰åˆ™ä¸æ˜¾ç¤º
ai_summary:
  enable: true
  title: AIæ‘˜è¦
  loadingText: æ­£åœ¨åŠ è½½Â·Â·Â·
  modelName: HunYuan-Lite
</code></pre>
<p>è¿™é‡Œçš„å†…å®¹å‡ä¸ºè£…é¥°æ€§å†…å®¹ï¼Œé™¤äº†enableé€‰é¡¹ï¼Œå…¶ä»–æ²¡æœ‰ä»»ä½•æ§åˆ¶æ•ˆæœï¼Œéƒ½æ˜¯è£…é¥°ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒï¼Œå¯ä»¥å…ˆæŒ‰ç…§æˆ‘çš„å†™ï¼Œåé¢å†æ ¹æ®æ•ˆæœä¿®æ”¹ã€‚</p>
<h3 id="æ·»åŠ æ¨¡æ¿">æ·»åŠ æ¨¡æ¿</h3>
<p>ä¸‹é¢æ‰¾åˆ°ä¸»é¢˜æ–‡ä»¶ä¸‹çš„/themes/butterfly/layout/post.pugæ–‡ä»¶ï¼Œæ·»åŠ æ–‡ä»¶ä¸­æŒ‡å‡ºæ¥çš„ä¸¤è¡Œå†…å®¹ï¼š</p>
<pre><code class="language-bash">extends includes/layout.pug

block content
  #post
    if top_img === false
      include includes/header/post-info.pug

    article#article-container.post-content
+     if page.summary &amp;&amp; theme.ai_summary.enable
+       include includes/post/post-summary.pug
      !=page.content
    include includes/post/post-copyright.pug
    .tag_share
      if (page.tags.length &gt; 0 &amp;&amp; theme.post_meta.post.tags)
        .post-meta__tag-list
          each item, index in page.tags.data
            a(href=url_for(item.path)).post-meta__tags #[=item.name]
      include includes/third-party/share/index.pug

    if theme.reward.enable &amp;&amp; theme.reward.QR_code
      !=partial('includes/post/reward', {}, {cache: true})

    //- ad
    if theme.ad &amp;&amp; theme.ad.post
      .ads-wrap!=theme.ad.post

    if theme.post_pagination
      include includes/pagination.pug
    if theme.related_post &amp;&amp; theme.related_post.enable
      != related_posts(page,site.posts)

    if page.comments !== false &amp;&amp; theme.comments.use
      - var commentsJsLoad = true
      !=partial('includes/third-party/comments/index', {}, {cache: true})

</code></pre>
<p>æ³¨æ„ç¼©è¿›ï¼Œpugä½œä¸ºé¢„ç¼–è¯‘è¯­è¨€ï¼Œå¯¹ç¼©è¿›çš„è¦æ±‚æä¸ºä¸¥æ ¼ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œåº”è¯¥æ˜¯ä¸¤ä¸ªç©ºæ ¼ä¸€ç¼©è¿›ã€‚</p>
<p>ä¸‹é¢æ·»åŠ ç»„ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶/root/theme/butterfly/layout/includes/post/post-summary.pugï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="language-bash">.ai-summary
    .ai-explanation(style="display: block;" data-summary=page.summary)=theme.ai_summary.loadingText
    .ai-title 
        .ai-title-left 
            i.fa-brands.fa-slack
            .ai-title-text=theme.ai_summary.title
        .ai-tag#ai-tag= theme.ai_summary.modelName

</code></pre>
<h3 id="æ·»åŠ æ ·å¼">æ·»åŠ æ ·å¼</h3>
<p>è¿™æ ·ï¼Œhtmléƒ¨åˆ†å°±å®ç°å¥½äº†ï¼ä¸‹é¢æˆ‘ä»¬æ·»åŠ æ ·å¼éƒ¨åˆ†ï¼Œåˆ›å»ºæ–‡ä»¶/themes/butterfly/source/css/_layout/ai-summary.stylæ–‡ä»¶ï¼Œå†™å…¥ï¼š</p>
<pre><code class="language-css">// ===================
// ğŸŒ— ä¸»é¢˜å˜é‡å®šä¹‰ï¼ˆä»…ä½¿ç”¨é¡¹ï¼‰
// ===================

:root
  // ai_summary
  --liushen-title-font-color: #0883b7
  --liushen-maskbg: rgba(255, 255, 255, 0.85)
  --liushen-ai-bg: conic-gradient(from 1.5708rad at 50% 50%, #d6b300 0%, #42A2FF 54%, #d6b300 100%)

  // card èƒŒæ™¯
  --liushen-card-secondbg: #f1f3f8

  // text
  --liushen-text: #4c4948
  --liushen-secondtext: #3c3c43cc

[data-theme='dark']
  // ai_summary
  --liushen-title-font-color: #0883b7
  --liushen-maskbg: rgba(0, 0, 0, 0.85)
  --liushen-ai-bg: conic-gradient(from 1.5708rad at 50% 50%, rgba(214, 178, 0, 0.46) 0%, rgba(66, 161, 255, 0.53) 54%, rgba(214, 178, 0, 0.49) 100%)

  // card èƒŒæ™¯
  --liushen-card-secondbg: #3e3f41

  // text
  --liushen-text: #ffffffb3
  --liushen-secondtext: #a1a2b8

// ===================
// ğŸ“˜ AI æ‘˜è¦æ¨¡å—æ ·å¼
// ===================

if hexo-config('ai_summary.enable')
  .ai-summary
    background-color var(--liushen-maskbg)
    background var(--liushen-card-secondbg)
    border-radius 12px
    padding 8px 8px 12px 8px
    line-height 1.3
    flex-direction column
    margin-bottom 16px
    display flex
    gap 5px
    position relative

    &amp;::before
      content ''
      position absolute
      top 0
      left 0
      width 100%
      height 100%
      z-index 1
      filter blur(8px)
      opacity .4
      background-image var(--liushen-ai-bg)
      transform scaleX(1) scaleY(.95) translateY(2px)
    
    &amp;::after
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      border-radius: 12px;
      background: var(--liushen-maskbg);

    .ai-explanation
      z-index 10
      padding 8px 12px
      font-size 15px
      line-height 1.4
      color var(--liushen-text)
      text-align justify

      // âœ… æ‰“å­—æœºå…‰æ ‡åŠ¨ç”»
      &amp;::after
        content ''
        display inline-block
        width 8px
        height 2px
        margin-left 2px
        background var(--liushen-text)
        vertical-align bottom
        animation blink-underline 1s ease-in-out infinite
        transition all .3s
        position relative
        bottom 3px

      // å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
      // .char
      //   display inline-block
      //   opacity 0
      //   animation chat-float .5s ease forwards
    
    .ai-title
      z-index 10
      font-size 14px
      display flex
      border-radius 8px
      align-items center
      position relative
      padding 0 12px
      cursor default
      user-select none

      .ai-title-left
        display flex
        align-items center
        color var(--liushen-title-font-color)

        i
          margin-right 3px
          display flex
          color var(--liushen-title-font-color)
          border-radius 20px
          justify-content center
          align-items center

        .ai-title-text
          font-weight 500

      .ai-tag
        color var(--liushen-secondtext)
        font-weight 300
        margin-left auto
        display flex
        align-items center
        justify-content center
        transition .3s

  // å¹³æ»‘æ»šåŠ¨åŠ¨ç”»
  // @keyframes chat-float
  //   0% 
  //     opacity 0
  //     transform translateY(20px)
  //   100% 
  //       opacity 1
  //       transform translateY(0)
  
  // âœ… æ‰“å­—æœºå…‰æ ‡é—ªçƒåŠ¨ç”»
  @keyframes blink-underline
    0%, 100%
      opacity 1
    50%
      opacity 0

</code></pre>
<p>æ ·å¼ä¹Ÿå®ç°å•¦ï¼ç›®å‰å°±å·®å°†æˆ‘ä»¬çš„æ‘˜è¦æ’å…¥åˆ°æˆ‘ä»¬çš„ç½‘ç«™å°±å¤§åŠŸå‘Šæˆå•¦ï¼Œä¸ºäº†å®ç°çš„æ›´åŠ é€¼çœŸï¼Œæˆ‘è¿™é‡Œå®ç°äº†ä¸¤ç§æ ·å¼ä¸€ä¸ªæ˜¯æ‰“å­—æœºæ•ˆæœï¼Œä¸€ä¸ªæ˜¯å¹³æ»‘æ˜¾ç¤ºæ•ˆæœï¼Œå¯ä»¥æŒ‰éœ€å¼•å…¥ï¼š</p>
<h3 id="æ·»åŠ æ ¸å¿ƒjs">æ·»åŠ æ ¸å¿ƒJS</h3>
<p>ä¸‹é¢æˆ‘ä¼šä»‹ç»ä¸¤ç§åŠ¨æ•ˆï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚åœ¨ä»»æ„jsæ–‡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªå¼•å…¥å³å¯ï¼Œä¸¤ä¸ªçš„åŒºåˆ«æ˜¯ï¼Œæ‰“å­—æœºæ•ˆæœæ›´åŠ çš„èŠ‚çœæ€§èƒ½ï¼Œè€Œå¹³æ»‘æ˜¾ç¤ºï¼Œå› ä¸ºæ¯ä¸ªæ–‡æœ¬ä¸ºä¸€ä¸ªspanï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ã€‚</p>
<h4 id="æ‰“å­—æœºæ•ˆæœ">æ‰“å­—æœºæ•ˆæœ</h4>
<pre><code class="language-javascript">// æ‰“å­—æœºæ•ˆæœ
function typeTextMachineStyle(text, targetSelector, options = {}) {
    const {
        delay = 50,
        startDelay = 2000,
        onComplete = null,
        clearBefore = true,
        eraseBefore = true, // æ–°å¢ï¼šæ˜¯å¦ä»¥æ‰“å­—æœºæ–¹å¼æ¸…é™¤åŸæ–‡æœ¬
        eraseDelay = 30,    // æ–°å¢ï¼šåˆ é™¤æ¯ä¸ªå­—ç¬¦çš„é—´éš”
    } = options;

    const el = document.querySelector(targetSelector);
    if (!el || typeof text !== "string") return;

    setTimeout(() =&gt; {
        const startTyping = () =&gt; {
            let index = 0;
            function renderChar() {
                if (index &lt;= text.length) {
                    el.textContent = text.slice(0, index++);
                    setTimeout(renderChar, delay);
                } else {
                    onComplete &amp;&amp; onComplete(el);
                }
            }
            renderChar();
        };

        if (clearBefore) {
            if (eraseBefore &amp;&amp; el.textContent.length &gt; 0) {
                let currentText = el.textContent;
                let eraseIndex = currentText.length;

                function eraseChar() {
                    if (eraseIndex &gt; 0) {
                        el.textContent = currentText.slice(0, --eraseIndex);
                        setTimeout(eraseChar, eraseDelay);
                    } else {
                        startTyping(); // åˆ é™¤å®Œæ¯•åå¼€å§‹æ‰“å­—
                    }
                }

                eraseChar();
            } else {
                el.textContent = "";
                startTyping();
            }
        } else {
            startTyping();
        }
    }, startDelay);
}

function renderAISummary() {
    const summaryEl = document.querySelector('.ai-summary .ai-explanation');
    if (!summaryEl) return;

    const summaryText = summaryEl.getAttribute('data-summary');
    if (summaryText) {
        typeTextMachineStyle(summaryText, ".ai-summary .ai-explanation"); // å¦‚æœéœ€è¦åˆ‡æ¢ï¼Œåœ¨è¿™é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°å³å¯
    }
}

document.addEventListener('pjax:complete', renderAISummary);
document.addEventListener('DOMContentLoaded', renderAISummary);
</code></pre>
<p>æœ¬ç«™ä½¿ç”¨çš„å°±æ˜¯æ‰“å­—æœºæ•ˆæœï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p>
<h4 id="å¹³æ»‘æ˜¾ç¤ºæ•ˆæœ">å¹³æ»‘æ˜¾ç¤ºæ•ˆæœ</h4>
<p>è¿™ä¸ªæˆ‘æ²¡æœ‰æµ‹è¯•ï¼Œå¦‚æœå¥½å¥‡å¯ä»¥è‡ªè¡Œéƒ¨ç½²å¹¶å°è¯•ï¼š</p>
<pre><code class="language-javascript"> // å¹³æ»‘å¼¹å‡ºæ•ˆæœ
 function typeText(text, targetSelector, options = {}) {
     const {
       delay = 50,          // æ¯ä¸ªå­—ç¬¦ä¹‹é—´çš„å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
       startDelay = 2000,   // å¼€å§‹æ‰“å­—å‰çš„å»¶è¿Ÿï¼ˆé»˜è®¤ 3 ç§’ï¼‰
       onComplete = null,   // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ
       clearBefore = true   // æ˜¯å¦åœ¨å¼€å§‹å‰æ¸…ç©ºåŸæœ‰å†…å®¹
     } = options;

     const targetEl = document.querySelector(targetSelector);
     if (!targetEl || typeof text !== "string") return;

     // if (clearBefore) targetEl.textContent = "";

     let index = 0;
     let frameId = null;

     function renderChar() {
       if (index &lt; text.length) {
         const span = document.createElement("span");
         span.textContent = text[index++];
         span.className = "char";
         targetEl.appendChild(span);
         frameId = requestAnimationFrame(() =&gt; setTimeout(renderChar, delay));
       } else {
         cancelAnimationFrame(frameId);
         onComplete &amp;&amp; onComplete(targetEl);
       }
     }

     setTimeout(() =&gt; {
         if (clearBefore) targetEl.textContent = "";
         renderChar();
     }, startDelay);
 }

function renderAISummary() {
    const summaryEl = document.querySelector('.ai-summary .ai-explanation');
    if (!summaryEl) return;

    const summaryText = summaryEl.getAttribute('data-summary');
    if (summaryText) {
        typeText(summaryText, ".ai-summary .ai-explanation"); // å¦‚æœéœ€è¦åˆ‡æ¢ï¼Œåœ¨è¿™é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°å³å¯
    }
}

document.addEventListener('pjax:complete', renderAISummary);
document.addEventListener('DOMContentLoaded', renderAISummary);
</code></pre>
<p>æ³¨æ„ï¼Œå¹³æ»‘æ»šåŠ¨éƒ¨åˆ†çš„cssï¼Œæˆ‘é»˜è®¤æ³¨é‡Šæ‰äº†ï¼Œè¯·åœ¨æ ·å¼æ–‡ä»¶ä¸­è‡ªè¡Œæ‰“å¼€æ³¨é‡Šã€‚</p>
<p>è¿™æ ·ï¼Œä¸€ä¸ªè‡ªå·±å®ç°çš„AIæ‘˜è¦å°±å®Œå·¥å•¦ï¼</p>
<h2 id="4è¿è¡Œç»“æœ">4ã€è¿è¡Œç»“æœ</h2>
<pre><code class="language-bash">hexo c;hexo g
</code></pre>
<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥å¯ä»¥åœ¨æ¯ç¯‡æ–‡ç« çš„é¡¶éƒ¨çœ‹åˆ°å¯¹åº”çš„æ‘˜è¦æ–‡æ®µã€‚</p>
<blockquote>
<p>ç”±äºè¯¥æ’ä»¶ä¿®æ”¹äº†å¤´éƒ¨ï¼Œè™½ç„¶ä¿®æ”¹çš„æµç¨‹ä¸¥æ ¼æŒ‰ç…§hexoçš„è¦æ±‚ï¼Œå†™å›å¤´éƒ¨çš„æµç¨‹ç±»ä¼¼äº<code>Hexo-abbrlink</code>ï¼Œå†™å…¥åä¸å¯æ’¤å›ï¼Œå¹¶ä¸”ç”±äºAIå…·æœ‰ä¸å¯æ§æ€§ï¼Œè¯·è¿è¡Œå‰æ³¨æ„å¤‡ä»½ï¼Œé˜²æ­¢åœ¨æ‰€æœ‰æ–‡ç« é¡¶éƒ¨ç”Ÿæˆä¸å¿…è¦çš„å†…å®¹ï¼Œéš¾ä»¥æ¸…ç†ï¼Œç‰¹åˆ«æ˜¯ä»…æœ‰ä¸€ä»½æºç åœ¨æœ¬åœ°çš„æœ‹å‹ï¼Œæ³¨æ„å‹¤å¤‡ä»½ã€‚</p>
</blockquote>
<hr>
<p>ä½œè€…: ç å†œåˆšå­<br>
é‚®ç®±: wxscc@foxmail.com<br>
åŸæ–‡é“¾æ¥: <a href="https://www.codeobservatory.cn/archives/9dd55dbc.html" target="_blank" rel="noopener nofollow">https://www.codeobservatory.cn/archives/9dd55dbc.html</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-10 15:50">2025-06-10 15:50</span>&nbsp;
<a href="https://www.cnblogs.com/shenchuanchao">ç å†œåˆšå­</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18922306);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18922306', targetLink: 'https://www.cnblogs.com/shenchuanchao/p/18922306', title: 'Hexo-butterfly æ¥å…¥è…¾è®¯æ··å…ƒå¤§æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆæ–‡ç« æ‘˜è¦(ä¿å§†æ•™ç¨‹)' })">ä¸¾æŠ¥</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/vipstone/p/18880154" title="发布于 2025-05-16 15:56">
    <span role="heading" aria-level="2">SpringAI-RC1正式发布：移除千帆大模型！</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>续 Spring AI M8 版本之后（5.1 发布），前几日 Spring AI 悄悄的发布了最新版 Spring AI 1.0.0 RC1（5.13 发布），<strong>此版本也将是 GA（Generally Available，正式版）发布前的最后一个版本，正式版计划在 5.20 日发布</strong>。</p>
<p>这个版本的改动相比于上一个版本 M8 来说，改动不算很大，但也有一些让我们意想不到的版本更新，接下来一起来看。</p>
<h2 id="移除千帆大模型-sdk">移除千帆大模型 SDK</h2>
<p>和国内开发者关系比较大的一个更新就是 Spring AI RC1 <strong>移除了百度的千帆大模型，给出的原因是中国境外无法访问</strong>，所以被移除了，官方文档中千帆的对接文档也被删除了，变成这个样子了：</p>
<p><img src="https://img2024.cnblogs.com/blog/172074/202505/172074-20250516155632224-540865135.jpg" alt="" loading="lazy"></p>
<p>这样一来，<strong>Spring AI 直接对接国内的大模型就剩下 DeepSeek 和智普 AI 这两家公司了</strong>。</p>
<p>国内的阿里的百炼平台也没有直接提供 SDK 对接，算是比较遗憾的，因为国内使用通义大模型的公司是非常多的，并且百炼平台内置了 200+ 家大模型，对接百炼相当于对接了 200+ 大模型。当然我们可以使用 OpenAI 协议接入它，但这就意味着，我们在这个项目中不能同时在接入 OpenAI 大模型了，希望后期官方能提供百炼平台的 SDK 对接方式。</p>
<h2 id="其他重要更新">其他重要更新</h2>
<ol>
<li>
<p>VectorStoreChatMemoryAdvisor 更新：</p>
<ul>
<li>常量 CHAT_MEMORY_RETRIEVE_SIZE_KEY 被重命名为 TOP_K。</li>
<li>常量 DEFAULT_CHAT_MEMORY_RESPONSE_SIZE 被重命名为 DEFAULT_TOP_K，并且其默认值从 100 调成为 20。</li>
</ul>
</li>
<li>
<p>常量 CHAT_MEMORY_CONVERSATION_ID_KEY 被重命名为 CONVERSATION_ID，并从 AbstractChatMemoryAdvisor 移动到 ChatMemory。请更新您的导入以使用 org.springframework.ai.chat.memory.ChatMemory.CONVERSATION_ID。</p>
</li>
<li>
<p>问答中增加了自包含模版，例如：</p>
<ul>
<li>
<p>QuestionAnswerAdvisor 具有以下占位符：</p>
<ul>
<li>query 用于接收用户问题的占位符。</li>
<li>用于接收检索到的上下文的占位符 question_answer_context。<br>
使用示例如下：</li>
</ul>
<pre><code class="language-java">PromptTemplate customPromptTemplate = PromptTemplate.builder()
    .renderer(StTemplateRenderer.builder().startDelimiterToken('&lt;').endDelimiterToken('&gt;').build())
    .template("""
            &lt;query&gt;

            Context information is below.

            ---------------------
            &lt;question_answer_context&gt;
            ---------------------

            Given the context information and no prior knowledge, answer the query.

            Follow these rules:

            1. If the answer is not in the context, just say that you don't know.
            2. Avoid statements like "Based on the context..." or "The provided information...".
            """)
    .build();

    String question = "Where does the adventure of Anacletus and Birba take place?";

    QuestionAnswerAdvisor qaAdvisor = QuestionAnswerAdvisor.builder(vectorStore)
        .promptTemplate(customPromptTemplate)
        .build();

    String response = ChatClient.builder(chatModel).build()
        .prompt(question)
        .advisors(qaAdvisor)
        .call()
        .content();
</code></pre>
</li>
<li>
<p>PromptChatMemoryAdvisor 具有以下占位符：</p>
<ul>
<li>instructions 接收原始系统消息的占位符。</li>
<li>memory用于接收检索到的对话记忆的占位符。</li>
</ul>
</li>
<li>
<p>VectorStoreChatMemoryAdvisor 具有以下占位符：</p>
<ul>
<li>instructions 接收原始系统消息的占位符。</li>
<li>long_term_memory 用于接收检索到的对话记忆的占位符。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>组件重命名：</p>
<ul>
<li>spring-ai-model-chat-memory- → <strong>spring-ai-model-chat-memory-repository-</strong></li>
<li>spring-ai-autoconfigure-model-chat-memory- → <strong>spring-ai-autoconfigure-model-chat-memory-repository-</strong></li>
<li>spring-ai-starter-model-chat-memory- → <strong>spring-ai-starter-model-chat-memory-repository-</strong></li>
<li>org.springframework.ai.chat.memory.jdbc → <strong>org.springframework.ai.chat.memory.repository.jdbc</strong></li>
<li>JdbcChatMemoryAutoConfiguration → <strong>JdbcChatMemoryRepositoryAutoConfiguration</strong></li>
<li>spring.ai.chat.memory.<storage>… → <strong>spring.ai.chat.memory.repository.<storage>…</storage></strong></storage></li>
</ul>
</li>
</ol>
<p>其他升级请查看官方更新日志：<a href="https://docs.spring.io/spring-ai/reference/upgrade-notes.html#upgrading-to-1-0-0-RC1" target="_blank" rel="noopener nofollow">https://docs.spring.io/spring-ai/reference/upgrade-notes.html#upgrading-to-1-0-0-RC1</a></p>
<h2 id="小结">小结</h2>
<p>AI 发展速度很快，对各行各业的影响也很大。充分了解和掌握 AI 知识，对日常工作提效或以后跳槽都有很大的帮助，让我们一起行动起来，拥抱这场 AI 盛宴吧。</p>
<blockquote>
<p>本文已收录到我的技术小站 <a href="https://www.javacn.site" target="_blank" rel="noopener nofollow">www.javacn.site</a>，其中包含的内容有：Spring AI、LangChain4j、Dify、AI Agent、MCP、Function Call、RAG、向量数据库、Prompt、多模态、向量数据库、嵌入模型等内容。</p>
</blockquote>

</div>
<div id="MySignature" role="contentinfo">
    <div style="text-align: center; color: red">
关注下面二维码，订阅更多精彩内容。
<br>
<img style="margin-left: 0px" src="https://images.cnblogs.com/cnblogs_com/vipstone/848916/o_211225130402_gognzhonghao.jpg">
</div>

<div style="display: none">
    <img src="http://icdn.apigo.cn/gitchat/rabbitmq.png?imageView2/0/w/500/h/400">
</div>
<div style="margin-bottom: 50px; display: none">

<img title="微信打赏" src="http://icdn.apigo.cn/myinfo/wchat-pay.png" alt="微信打赏">
<br>

<div style="display: none">
<span style="display: block; position: absolute; height: 40px; top: 50%; margin-top: -20px">关注公众号（加好友）：</span>

<img style="margin-left: 144px" src="http://icdn.apigo.cn/gongzhonghao2.png?imageView2/0/w/120/h/120">
</div>
<p></p>

<div id="AllanboltSignature">
    <p style="border-top: #e0e0e0 1px dashed; border-right: #e0e0e0 1px dashed; border-bottom: #e0e0e0 1px dashed; border-left: #e0e0e0 1px dashed; padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 60px; background: url(&quot;https://images.cnblogs.com/cnblogs_com/lloydsheng/239039/o_copyright.gif&quot;) #e5f1f4 no-repeat 1% 50%; font-family: 微软雅黑; font-size: 11px" id="PSignature">
        <br> 作者：
        <a href="http://vipstone.cnblogs.com/" target="_blank">王磊的博客</a>
        <br> 出处：
        <a href="http://vipstone.cnblogs.com/" target="_blank">http://vipstone.cnblogs.com/</a>
        <br>
    </p>
</div></div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.016546917438657407" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-16 15:57">2025-05-16 15:56</span>&nbsp;
<a href="https://www.cnblogs.com/vipstone">磊哥|www.javacn.site</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18880154);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18880154', targetLink: 'https://www.cnblogs.com/vipstone/p/18880154', title: 'SpringAI-RC1正式发布：移除千帆大模型！' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/CheeseFunction/p/18857521" title="å‘å¸ƒäº 2025-05-02 19:41">
    <span role="heading" aria-level="2">å¹³è¡¡æ ‘</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="å¹³è¡¡æ ‘ä½•æ–¹ç¥åœ£">å¹³è¡¡æ ‘ï¼Ÿä½•æ–¹ç¥åœ£</h2>
<p>å¹³æ—¶æˆ‘ä»¬æœ€å®³æ€•çš„æ˜¯ä»€ä¹ˆï¼æš´åŠ›ï¼Œæ²¡é”™ï¼Œæš´åŠ›çš„çš„æ—¶é—´å¤æ‚åº¦é€šå¸¸ä¼šé«˜å¾—å¯æ€•ï¼Œç”šè‡³ä½¿ä½ ä¸€åˆ†ä¸å¾—ï¼Œåœ¨â€œæ ‘è®ºâ€ä¸Šä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå€˜è‹¥ä½¿ç”¨æ™®é€šçš„æš´åŠ›ï¼Œå¾ˆéš¾åº”å¯¹æç«¯æƒ…å†µï¼ˆæ¯”å¦‚é€€åŒ–æˆé“¾æˆ–è€…æ¥è¿‘äºé“¾ï¼‰ï¼Œé‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥ä¼˜åŒ–æ‰æ ‘ä¸Šæš´åŠ›å‘¢ï¼Ÿè®¾æƒ³ä¸€ä¸‹ï¼šæ ‘ä¸Šæš´åŠ›ä¹‹æ‰€ä»¥æ—¶é—´å¤æ‚åº¦é«˜ï¼Œè¿˜ä¸æ˜¯å› ä¸ºæ ‘é•¿å¾—å¤ªå¥‡æ€ªäº†ï¼Ÿæ—¢ç„¶æ”¹å˜ä¸äº†è‡ªèº«ï¼Œé‚£å°±æ”¹å˜ç¯å¢ƒï¼æ„é€ ä¸€æ£µè¾ƒä¸ºå¹³è¡¡çš„æ ‘å°±è¡Œäº†å˜›ï¼ˆ<s>æ­£æ‰€è°“é”™çš„ä¸æ˜¯æˆ‘çˆ±æ˜¯è¿™æ£µæ ‘å•Š</s>ï¼‰ã€‚<br>
è¯´çš„å¥½ï¼Œä½†å¦‚ä½•æ„é€ ä¸€æ£µè¾ƒä¸ºå¹³è¡¡çš„æ ‘å‘¢ï¼Ÿè¿™æ„å‘³ç€æœ€å¥½æˆ‘ä»ä»»æ„ä¸€ä¸ªå¶å­èŠ‚ç‚¹å‡ºå‘ï¼Œä¸è¶…è¿‡ <span class="math inline">\(\log n\)</span> æ¬¡å°±èƒ½åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼Œè€Œè¿™åˆæ„å‘³ç€æ¯æ¬¡å‘ä¸Šè§„æ¨¡è‡³å°‘ <span class="math inline">\(\times 2\)</span> ï¼Œå³æ ‘çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼ˆå› ä¸ºæ˜¯äºŒå‰æ ‘ï¼‰å¤§å°çš„ç»å¯¹å€¼ä¸è¶…è¿‡ <span class="math inline">\(1\)</span> ã€‚è¿™æ ·æ„é€ å‡ºæ¥çš„æ ‘ç›¸å¯¹æ¯”è¾ƒå¹³è¡¡ã€‚</p>
<h2 id="å¹³è¡¡æ ‘çš„æ’å…¥æ“ä½œ">å¹³è¡¡æ ‘çš„æ’å…¥æ“ä½œ</h2>
<p>å¥½ä¸å®¹æ˜“çŸ¥é“æ€ä¹ˆæ„å»ºä¸€æ£µå¹³è¡¡æ ‘ï¼Œç°åœ¨åˆæ€ä¹ˆç»´æŠ¤å®ƒçš„å¹³è¡¡æ€§å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœåœ¨ç°æœ‰å¹³è¡¡æ ‘çš„åŸºç¡€ä¸Šè‹¥å°è¯•æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¤§æ¦‚ç‡ä¼šä½¿å¾—è¿™ä¸€é¢—æ ‘å¤±å»å¹³è¡¡æ€§ï¼Œä¹…è€Œä¹…ä¹‹å°±ä¼šé€€åŒ–æˆä¸€æ¡é“¾ï¼ˆçœŸæ˜¯å¤ªå¯æ€•äº†ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬è¦å°è¯•ç»´æŠ¤ä¸€æ£µæ ‘çš„å¹³è¡¡æ€§ï¼æ€ä¹ˆç»´æŠ¤å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬ä»¤è¿™ä¸ªæ’å…¥çš„ç ´åäº†æ ‘çš„å¹³è¡¡æ€§çš„èŠ‚ç‚¹å«åš<strong>éº»çƒ¦èŠ‚ç‚¹</strong>ï¼ˆç¡®å®éº»çƒ¦ï¼‰ï¼Œè€Œè¢«è¿™ä¸ªéº»çƒ¦èŠ‚ç‚¹ç ´åäº†å¹³è¡¡æ€§çš„èŠ‚ç‚¹æˆ‘ä»¬å«åš<strong>è¢«ç ´åèŠ‚ç‚¹</strong>ï¼ˆæ— è®ºå¦‚ä½•ä¸€å®šåŒ…å«æ ¹èŠ‚ç‚¹ï¼‰ã€‚é‚£ä¹ˆè¢«ç ´åèŠ‚ç‚¹å’Œéº»çƒ¦èŠ‚ç‚¹çš„å…³ç³»åªæœ‰å¯èƒ½æ˜¯ä»¥ä¸‹å››ç§å¯èƒ½ï¼š</p>
<ol>
<li>LLå‹ï¼Œå½“å‰éº»çƒ¦èŠ‚ç‚¹æ˜¯è·ç¦»å½“å‰éº»çƒ¦èŠ‚ç‚¹æœ€è¿‘çš„è¢«ç ´åèŠ‚ç‚¹çš„å·¦å„¿å­çš„å·¦å„¿å­çš„å­æ ‘ï¼ˆæˆ–æœ¬èº«ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦ä¸€æ¬¡å³æ—‹ï¼ˆä¸€ä¼šä¼šè®²ï¼‰ã€‚</li>
<li>RRå‹ï¼Œå½“å‰éº»çƒ¦èŠ‚ç‚¹æ˜¯è·ç¦»å½“å‰éº»çƒ¦èŠ‚ç‚¹æœ€è¿‘çš„è¢«ç ´åèŠ‚ç‚¹çš„å³å„¿å­çš„å³å„¿å­çš„å­æ ‘ï¼ˆæˆ–æœ¬èº«ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦ä¸€æ¬¡å·¦æ—‹ï¼ˆä¸€ä¼šä¹Ÿä¼šè®²ï¼‰ã€‚</li>
<li>LRå‹ï¼Œå½“å‰éº»çƒ¦èŠ‚ç‚¹æ˜¯è·ç¦»å½“å‰éº»çƒ¦èŠ‚ç‚¹æœ€è¿‘çš„è¢«ç ´åèŠ‚ç‚¹çš„å·¦å„¿å­çš„å³å„¿å­ï¼ˆæˆ–æœ¬èº«ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦<strong>å…ˆä¸€æ¬¡å³æ—‹ï¼Œæ¥ç€ä¸€æ¬¡å·¦æ—‹</strong>ï¼ˆé¡ºåºå¾ˆé‡è¦ï¼ï¼‰ã€‚</li>
<li>RLå‹ï¼Œå½“å‰éº»çƒ¦èŠ‚ç‚¹æ˜¯è·ç¦»å½“å‰éº»çƒ¦èŠ‚ç‚¹æœ€åŠ²çš„è¢«ç ´åèŠ‚ç‚¹å¾—åˆ°å³å„¿å­çš„å·¦å„¿å­ï¼ˆæˆ–æœ¬èº«ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦<strong>å…ˆä¸€æ¬¡å·¦æ—‹ï¼Œæ¥ç€ä¸€æ¬¡å³æ—‹</strong>ï¼ˆé¡ºåºåŒæ ·å¾ˆé‡è¦ï¼ï¼‰ã€‚<br>
é‚£ä»€ä¹ˆæ˜¯å·¦æ—‹/å³æ—‹å‘¢ï¼Ÿè¿‡ç¨‹å¾ˆç®€å•ï¼Œä¸€å¼ GIFåŠ¨å›¾å°±æ‡‚äº†ï¼</li>
</ol>
<p>å³æ—‹ï¼š<br>
<img src="https://img2024.cnblogs.com/blog/3639577/202505/3639577-20250502175801281-1611424978.gif" alt="" loading="lazy"><br>
å·¦æ—‹:<br>
<img src="https://img2024.cnblogs.com/blog/3639577/202505/3639577-20250502175926004-345103734.gif" alt="" loading="lazy"><br>
çœ‹æ‡‚äº†å—ï¼Œä»¥ä¸‹æ˜¯å¯¹è¿™ä¸¤ç§æ“ä½œçš„è¯¦ç»†è®²è§£ï¼š</p>
<h3 id="å³æ—‹">å³æ—‹</h3>
<p>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œæˆ‘ä»¬å…ˆæŠŠæ—§æ ¹èŠ‚ç‚¹å«åš <span class="math inline">\(u\)</span> ï¼Œæ–°çš„æ ¹èŠ‚ç‚¹å«åš <span class="math inline">\(v\)</span> ï¼Œæ³¨æ„ï¼š<strong>è‹¥è¦å³æ—‹ï¼Œåˆ™ <span class="math inline">\(u\)</span> åˆ° <span class="math inline">\(v\)</span> ä¹‹é—´å¿…æœ‰ä¸€æ¡è¿è¾¹ï¼Œä¸” <span class="math inline">\(v\)</span> æ˜¯ <span class="math inline">\(u\)</span> çš„å·¦å­©å­ï¼ˆæ²¡æœ‰å³æ—‹ï¼‰</strong>ã€‚<br>
æ­¤æ—¶ï¼Œæˆ‘ä»¬æŠŠ <span class="math inline">\(v\)</span> æä¸Šæ¥å«åšæ ¹èŠ‚ç‚¹ï¼Œ<span class="math inline">\(u\)</span> å˜æˆå…¶å³å„¿å­ã€‚ç„¶åæŠŠåŸæ¥ <span class="math inline">\(v\)</span> çš„æ•´ä¸ªå³å­æ ‘ï¼ˆæ²¡æœ‰å°±ä¸ç®¡ï¼‰ï¼Œå˜æˆ <span class="math inline">\(u\)</span> çš„ç°åœ¨çš„å³å­æ ‘ã€‚</p>
<h4 id="ä¸¾ä¸ªæ ¸æ¡ƒä»…ä½œä¸ºç¤ºä¾‹">ä¸¾ä¸ªæ ¸æ¡ƒğŸ‘€(ä»…ä½œä¸ºç¤ºä¾‹ï¼‰ï¼š</h4>
<p>å³æ—‹å‰çš„ç»“æ„ï¼š</p>
<pre><code>      A
     / \
    B   AR
   / \
 BL   BR
</code></pre>
<p>å³æ—‹åçš„ç»“æ„:</p>
<pre><code>       B
     /   \
    BL    A
         / \
       BR   AR
</code></pre>
<h3 id="å·¦æ—‹">å·¦æ—‹</h3>
<p>ç”±ä¸Šå›¾é¡µå¯çŸ¥ï¼Œæˆ‘ä»¬å…ˆæŠŠæ—§æ ¹èŠ‚ç‚¹å«åš <span class="math inline">\(u\)</span> ï¼Œæ–°çš„æ ¹èŠ‚ç‚¹å«åš <span class="math inline">\(v\)</span> ï¼Œæ³¨æ„ï¼š<strong>è‹¥è¦å·¦æ—‹ï¼Œåˆ™ <span class="math inline">\(u\)</span> åˆ° <span class="math inline">\(v\)</span> ä¹‹é—´å¿…æœ‰ä¸€æ¡è¿è¾¹ï¼Œä¸” <span class="math inline">\(v\)</span> æ˜¯ <span class="math inline">\(u\)</span> çš„å³å­©å­ï¼ˆæ²¡æœ‰å·¦æ—‹ï¼‰</strong>ã€‚<br>
æ­¤æ—¶ï¼Œæˆ‘ä»¬æŠŠ <span class="math inline">\(v\)</span> æä¸Šæ¥å«åšæ ¹èŠ‚ç‚¹ï¼Œ<span class="math inline">\(u\)</span> å˜æˆå…¶å·¦å„¿å­ã€‚ç„¶åæŠŠåŸæ¥ <span class="math inline">\(v\)</span> çš„æ•´ä¸ªå·¦å­æ ‘ï¼ˆæ²¡æœ‰å°±ä¸ç®¡ï¼‰ï¼Œå˜æˆ <span class="math inline">\(u\)</span> çš„ç°åœ¨çš„å·¦å­æ ‘ã€‚</p>
<h4 id="ä¸¾ä¸ªæ —å­">ä¸¾ä¸ªæ —å­ğŸ¤£ï¼š</h4>
<p>å·¦æ—‹å‰çš„ç»“æ„:</p>
<pre><code>      A
     / \
    AL   B
        / \
      BL   BR
</code></pre>
<p>å·¦æ—‹åçš„ç»“æ„:</p>
<pre><code>       B
     /   \
    A     BR
   / \
 AL   BL
</code></pre>
<p>æ³¨æ„ï¼Œå·¦æ—‹å’Œå³æ—‹è™½ç„¶äº’ä¸ºé€†æ“ä½œï¼Œä½†æ˜¯æå–ä¸åŒçš„èŠ‚ç‚¹åš <span class="math inline">\(v,u\)</span> ä¸¤ç‚¹ç»“æœä¸åŒã€‚<br>
æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å®ç°è¿™ä¸ªæ’å…¥æ“ä½œäº†ï¼</p>
<h3 id="code">Code:</h3>
<pre><code class="language-cpp">AVLNode* rightRotate(AVLNode *y) {
    AVLNode *x = y-&gt;left;
    AVLNode *T2 = x-&gt;right;

    x-&gt;right = y;
    y-&gt;left = T2;

    update(y);
    update(x);

    return x;
}
AVLNode* leftRotate(AVLNode *x) {
    AVLNode *y = x-&gt;right;
    AVLNode *T2 = y-&gt;left;

    y-&gt;left = x;
    x-&gt;right = T2;

    update(x);
    update(y);

    return y;
}
AVLNode* insert(AVLNode *node, int key) {
    if (!node) return new AVLNode(key);

    if (key &lt; node-&gt;key) {
        node-&gt;left = insert(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        node-&gt;right = insert(node-&gt;right, key);
    } else {
        return node;  // é‡å¤å€¼ä¸æ’å…¥
    }

    update(node);  // æ›´æ–°é«˜åº¦å’Œå¤§å°

    // æ£€æŸ¥å¹³è¡¡å› å­
    int balance = getBalance(node);

    // LLå‹ï¼ˆå·¦å·¦ï¼‰
    if (balance &gt; 1 &amp;&amp; key &lt; node-&gt;left-&gt;key) {
        return rightRotate(node);
    }

    // RRå‹ï¼ˆå³å³ï¼‰
    if (balance &lt; -1 &amp;&amp; key &gt; node-&gt;right-&gt;key) {
        return leftRotate(node);
    }

    // LRå‹ï¼ˆå·¦å³ï¼‰
    if (balance &gt; 1 &amp;&amp; key &gt; node-&gt;left-&gt;key) {
        node-&gt;left = leftRotate(node-&gt;left);
        return rightRotate(node);
    }

    // RLå‹ï¼ˆå³å·¦ï¼‰
    if (balance &lt; -1 &amp;&amp; key &lt; node-&gt;right-&gt;key) {
        node-&gt;right = rightRotate(node-&gt;right);
        return leftRotate(node);
    }

    return node;  // æ— éœ€è°ƒæ•´
}
</code></pre>
<p>é¡ºå¸¦ä¸€æï¼Œé‚£ä¸ªæ‰€è°“çš„å¹³è¡¡å› å­ï¼Œå°±æ˜¯å½“å‰èŠ‚ç‚¹å·¦å³ä¸¤æ£µå­æ ‘çš„å¤§å°çš„å·®ï¼Œä¸ä¼šè¶…è¿‡ <span class="math inline">\(1\)</span>ï¼ˆç”¨å±è‚¡æƒ³éƒ½çŸ¥é“ï¼‰ã€‚</p>
<h2 id="å¹³è¡¡æ ‘çš„åˆ é™¤æ“ä½œ">å¹³è¡¡æ ‘çš„åˆ é™¤æ“ä½œï¼š</h2>
<p>å­¦ä¼šäº†æ’å…¥ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¹³è¡¡æ ‘å¾ˆç®€å•å‘¢ï¼Œä¸ï¼Œå®ƒå¥½åƒç¡®å®æ²¡æœ‰æ ‘å‰–éš¾ï¼ˆå‘œå‘œå‘œï¼‰ã€‚æ‰¯è¿œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥è®²è®²å¹³è¡¡æ ‘çš„åˆ é™¤æ“ä½œã€‚åˆ é™¤ï¼Œå¯èƒ½ä½¿å¾—è¢«åˆ é™¤çš„èŠ‚ç‚¹ç¼ºå¤±çˆ¶äº²è€Œå˜æˆä¸€æ ¹æ— æ ¹æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å€Ÿé‰´ä¸€ä¸‹å †çš„æƒ³æ³•ï¼šå€Ÿä¸œå¢™è¡¥è¥¿å¢™ã€‚å°±æ˜¯ä»ä»–çš„å­èŠ‚ç‚¹ä¸­æŠ½ä¸€ä¸ªèŠ‚ç‚¹æ¥ä»£æ›¿è¿™ä¸ªèŠ‚ç‚¹ï¼Œå½“ç„¶ä¸ä¼šæ˜¯ä¹±é€‰ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç›®æ ‡èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ $\to $ ç›´æ¥åˆ é™¤</li>
<li>ç›®æ ‡èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ <span class="math inline">\(\to\)</span> ç”¨å­èŠ‚ç‚¹æ›¿ä»£è¿™ä¸ªèŠ‚ç‚¹ä¹‹ååˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>ç›®æ ‡èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œ <span class="math inline">\(\to\)</span> ç”¨å³å­æ ‘æœ€å°èŠ‚ç‚¹æˆ–å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹ä»£æ›¿è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ã€‚<br>
æ²¡å®Œï¼Œç”±äºæ¢ä¸Šæ¥èŠ‚ç‚¹å¿…ç„¶ï¼ˆä¸ä¸€å®šï¼‰è°ƒæ•´äº†å¹³è¡¡æ€§ï¼Œæˆ‘ä»¬è¿˜è¦åƒæ’å…¥ä¸€æ ·æ‰¾æ˜¯LL,LR,RLè¿˜æ˜¯RRç„¶åå·¦å³æ—‹ã€‚</li>
</ol>
<h3 id="ä¸¾ä¸ªå±±æ¥‚">ä¸¾ä¸ªå±±æ¥‚ğŸ¶ï¼š</h3>
<pre><code>        30 (0)
       /   \
    20 (0) 40 (1)
    /   \    \
 10 (0) 25 (0) 50 (0)
</code></pre>
<p>ï¼ˆæ‹¬å·é‡Œçš„æ˜¯å¹³è¡¡å› å­ï¼‰<br>
åˆ é™¤ <code>30</code> èŠ‚ç‚¹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ <span class="math inline">\(O(\log n)\)</span>ã€‚</li>
<li>æ›¿æ¢èŠ‚ç‚¹ï¼š
<ul>
<li>å› ä¸º <code>30</code> æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå› æ­¤æ‰¾å³å­æ ‘æœ€å°èŠ‚ç‚¹ï¼ˆä¸ªäººå–œå¥½ï¼‰ï¼š
<ul>
<li>å› ä¸º <code>40</code> æ²¡æœ‰å·¦å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æŠŠ <code>30</code> æ¢æˆ <code> 40</code>ã€‚<br>
ç›®å‰å¦‚ä¸‹ï¼š</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>        40 (0)  &lt;-- åŸ30è¢«æ›¿æ¢ä¸º40
       /   \
    20 (0)  50 (0)  &lt;-- åŸ40è¢«50æ›¿æ¢
    /   \
 10 (0) 25 (0)
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œç”±äºè¿™ä¸ªæ ‘ä¸å¹³è¡¡ï¼Œéœ€è¦ä» <code>50</code> èŠ‚ç‚¹å‘ä¸Šæ£€æŸ¥ï¼Œå‘ç°éœ€è¦å³æ—‹ï¼Œç›´æ¥å³æ—‹ã€‚</p>
<pre><code>        40 (1)
       /   \
    20 (0)  50 (0)
    /   \
 10 (0) 25 (0)
</code></pre>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±æ„‰å¿«çš„å®Œæˆåˆ é™¤äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h3 id="code-1">Code:</h3>
<pre><code class="language-cpp">// æ‰¾åˆ°å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹ï¼ˆç”¨äºæ›¿æ¢å¾…åˆ é™¤èŠ‚ç‚¹ï¼‰
AVLNode* findMinNode(AVLNode* node) {
    while (node-&gt;left) node = node-&gt;left;
    return node;
}

// åˆ é™¤æ“ä½œ
AVLNode* remove(AVLNode* node, int key) {
    if (!node) return nullptr;

    // 1. æ ‡å‡†BSTåˆ é™¤
    if (key &lt; node-&gt;key) {
        node-&gt;left = remove(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        node-&gt;right = remove(node-&gt;right, key);
    } else {
        // æƒ…å†µ1/2ï¼šæ— å­èŠ‚ç‚¹æˆ–åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
        if (!node-&gt;left || !node-&gt;right) {
            AVLNode* temp = node-&gt;left ? node-&gt;left : node-&gt;right;
            if (!temp) {  // æ— å­èŠ‚ç‚¹
                temp = node;
                node = nullptr;
            } else {      // æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
                *node = *temp;  // ç”¨å­èŠ‚ç‚¹è¦†ç›–è‡ªèº«
            }
            delete temp;
        } 
        // æƒ…å†µ3ï¼šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
        else {
            AVLNode* temp = findMinNode(node-&gt;right);  // æ‰¾åˆ°å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹
            node-&gt;key = temp-&gt;key;                    // ç”¨è¯¥èŠ‚ç‚¹çš„å€¼æ›¿æ¢è‡ªèº«
            node-&gt;right = remove(node-&gt;right, temp-&gt;key); // é€’å½’åˆ é™¤æ›¿æ¢èŠ‚ç‚¹
        }
    }

    if (!node) return nullptr;  // æ ‘ä¸ºç©ºåˆ™ç›´æ¥è¿”å›

    // 2. æ›´æ–°é«˜åº¦å’Œå­æ ‘å¤§å°
    update(node);

    // 3. æ£€æŸ¥å¹³è¡¡å¹¶è°ƒæ•´
    int balance = getBalance(node);

    // LLå‹å¤±è¡¡
    if (balance &gt; 1 &amp;&amp; getBalance(node-&gt;left) &gt;= 0) {
        return rightRotate(node);
    }
    // LRå‹å¤±è¡¡
    if (balance &gt; 1 &amp;&amp; getBalance(node-&gt;left) &lt; 0) {
        node-&gt;left = leftRotate(node-&gt;left);
        return rightRotate(node);
    }
    // RRå‹å¤±è¡¡
    if (balance &lt; -1 &amp;&amp; getBalance(node-&gt;right) &lt;= 0) {
        return leftRotate(node);
    }
    // RLå‹å¤±è¡¡
    if (balance &lt; -1 &amp;&amp; getBalance(node-&gt;right) &gt; 0) {
        node-&gt;right = rightRotate(node-&gt;right);
        return leftRotate(node);
    }

    return node;  // æ— éœ€è°ƒæ•´åˆ™ç›´æ¥è¿”å›
}
</code></pre>
<h2 id="æŸ¥è¯¢æŸ¥æ‰¾å€¼æ’åç¬¬--å°å‰é©±åç»§">æŸ¥è¯¢ï¼ˆæŸ¥æ‰¾å€¼/æ’å/ç¬¬ <span class="math inline">\(k\)</span> å°/å‰é©±åç»§ï¼‰</h2>
<p>æ˜¯ä¸æ˜¯æŠ¢äº†æƒå€¼çº¿æ®µæ ‘çš„æ´»äº†ï¼Ÿ</p>
<h3 id="1æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼">1.æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ï¼š</h3>
<p>å› ä¸ºè¿™æ£µæ ‘å·²ç»æ˜¯ä¸€æ£µéå¸¸é€‚åˆæš´åŠ›çš„æ ‘äº†ï¼Œå¯ä»¥ç›´æ¥é€’å½’æš´åŠ›æŸ¥æ‰¾:</p>
<pre><code class="language-cpp">bool search(AVLNode* node, int key) {
    if (!node) return false;
    if (key &lt; node-&gt;key) return search(node-&gt;left, key);
    else if (key &gt; node-&gt;key) return search(node-&gt;right, key);
    else return true;  // æ‰¾åˆ°key
}
</code></pre>
<h3 id="2æŸ¥æ‰¾æ’å">2.æŸ¥æ‰¾æ’å</h3>
<p>æ’åæ€ä¹ˆå†™å‘¢ï¼Ÿæœ‰ç‚¹éš¾æå•Šã€‚å‡è®¾æˆ‘ä»¬è¦æŸ¥æ‰¾çš„é”®å€¼å«åš <span class="math inline">\(key\)</span>,é‚£ <span class="math inline">\(key\)</span> çš„æ’åå°±æ˜¯<strong>æ¯” <span class="math inline">\(key\)</span> å°çš„èŠ‚ç‚¹æ•°+1</strong>å— ï¼Œæ‰€ä»¥ç›´æ¥æ˜¯ç”¨å­æ ‘å¤§å°æ¥ç®—ï¼š</p>
<pre><code class="language-cpp">int getRank(AVLNode* node, int key) {
    if (!node) return 1;  // ç©ºæ ‘æ—¶keyçš„æ’åä¸º1ï¼ˆæœ€å°ï¼‰
    if (key &lt; node-&gt;key) {
        return getRank(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        return getSize(node-&gt;left) + 1 + getRank(node-&gt;right, key);
    } else {
        return getSize(node-&gt;left) + 1;  // æ‰¾åˆ°keyï¼Œæ’åä¸ºå·¦å­æ ‘å¤§å°+1
    }
}
</code></pre>
<h4 id="ä¸¾ä¸ªèŠ±ç”Ÿ">ä¸¾ä¸ªèŠ±ç”ŸğŸ˜ï¼š</h4>
<pre><code>      40 (size=4)
     /   \
   20 (2) 50 (1)
  /   \
10 (1) 25 (1)
</code></pre>
<p><code>getRank(root,25)</code> å¦‚ä¸‹ï¼š</p>
<ol>
<li><span class="math inline">\(25&lt;40\)</span> <span class="math inline">\(\to\)</span> è¿”å›å·¦å­æ ‘ <span class="math inline">\(20\)</span></li>
<li><span class="math inline">\(25&lt;20\)</span> <span class="math inline">\(\to\)</span> è¿”å›<code>å·¦å­æ ‘å¤§å°ï¼ˆ1ï¼‰+ 1 + getRank(25)</code>ã€‚</li>
<li><span class="math inline">\(25=25\)</span> <span class="math inline">\(\to\)</span> è¿”å›<code>å·¦å­æ ‘å¤§å°(0)+1</code><br>
æœ€ç»ˆå¾—åˆ°<code>1+1+1=3</code>ã€‚</li>
</ol>
<h3 id="3æŸ¥è¯¢kå°å€¼">3.æŸ¥è¯¢kå°å€¼</h3>
<p>éƒ½å†™å‡ºæ’åäº†ï¼Œè¿™ <span class="math inline">\(k\)</span> å°å€¼ä¹Ÿæ˜¯ä¸€æ ·çš„åŸç†ï¼Œä½†æ˜¯è¦å€Ÿç”¨ä¸€ä¸‹å¿«é€Ÿé€‰æ‹©ç®—æ³•ï¼š</p>
<pre><code class="language-cpp">int getKth(AVLNode* node, int k) {
    int leftSize = getSize(node-&gt;left);
    if (k &lt;= leftSize) {
        return getKth(node-&gt;left, k);  // ç¬¬kå°åœ¨å·¦å­æ ‘
    } else if (k == leftSize + 1) {
        return node-&gt;key;              // å½“å‰èŠ‚ç‚¹å°±æ˜¯ç¬¬kå°
    } else {
        return getKth(node-&gt;right, k - leftSize - 1);  // åœ¨å³å­æ ‘ä¸­æ‰¾ç¬¬(k - leftSize - 1)å°
    }
}
</code></pre>
<h4 id="ä¸¾ä¸ªè‹¹æœ">ä¸¾ä¸ªè‹¹æœğŸ¦ï¼š</h4>
<p>ï¼ˆå®Œäº†è¦æ²¡æœ‰ä¸œè¥¿ä¸¾äº†ï¼‰</p>
<p><code>getKth(root, 3)</code>ï¼š<br>
<code>leftSize = 2</code>ï¼ˆå·¦å­æ ‘æœ‰ 10, 20, 25ï¼Œå®é™…å¤§å°ä¸º2ï¼Ÿéœ€è¦æ£€æŸ¥å®šä¹‰ï¼‰ã€‚<br>
<span class="math inline">\(3 &gt; 2 + 1\)</span> â†’ è¿›å…¥å³å­æ ‘ï¼Œ<span class="math inline">\(k = 3 - 2 - 1 = 0\)</span>ï¼ˆåº”ä¿®æ­£é€»è¾‘ï¼Œç¡®ä¿kæ­£ç¡®ä¼ é€’ï¼‰ã€‚</p>
<h3 id="4å‰é©±åç»§æŸ¥è¯¢">4.å‰é©±/åç»§æŸ¥è¯¢:</h3>
<h4 id="å‰é©±">å‰é©±ï¼š</h4>
<p>å‰é©±çš„å®šä¹‰å¾ˆå®¹æ˜“å¾—åˆ°ï¼Œå³ä¸º<strong>å°äºkeyçš„æœ€å¤§èŠ‚ç‚¹</strong>ï¼Œå¯ä»¥åˆ†ç±»è®¨è®ºå¾—åˆ°ï¼š</p>
<ul>
<li>å¦‚æœkeyæœ‰å·¦å­æ ‘ï¼Œå‰é©±æ˜¯å·¦å­æ ‘çš„æœ€å¤§å€¼ã€‚</li>
<li>ä¸ç„¶ï¼Œå‰é©±æ˜¯æœ€è¿‘çš„äºŒç¥–å…ˆèŠ‚ç‚¹ï¼ˆä¸”è¯¥ç¥–å…ˆèŠ‚ç‚¹çš„å³å­æ ‘åŒ…å«key)ã€‚</li>
</ul>
<pre><code class="language-cpp">int getPredecessor(AVLNode* node, int key) {
    if (!node) return INT_MIN;  // æ— å‰é©±
    if (key &lt;= node-&gt;key) {
        return getPredecessor(node-&gt;left, key);  // å‰é©±åœ¨å·¦å­æ ‘
    } else {
        // å½“å‰èŠ‚ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ªå€™é€‰å‰é©±ï¼Œç»§ç»­å‘å³æ‰¾æ›´å¤§çš„
        int rightPredecessor = getPredecessor(node-&gt;right, key);
        return max(node-&gt;key, rightPredecessor);
    }
}
</code></pre>
<h4 id="åç»§">åç»§ï¼š</h4>
<p>åç»§çš„å®šä¹‰ä¹Ÿå’Œå‰é©±å·®ä¸å¤šï¼Œå°±æ˜¯<strong>å¤§äºkeyçš„æœ€å°èŠ‚ç‚¹</strong>ï¼Œä¹Ÿå¯ä»¥åˆ†ç±»è®¨è®ºï¼š</p>
<ul>
<li>å¦‚æœkeyæœ‰å³å­æ ‘ï¼Œåç»§æ˜¯å³å­æ ‘çš„æœ€å°å€¼ã€‚</li>
<li>å¦åˆ™ï¼Œåç»§æ˜¯æœ€è¿‘çš„ç¥–å…ˆèŠ‚ç‚¹ï¼ˆä¸”è¯¥ç¥–å…ˆçš„å·¦å­æ ‘åŒ…å«keyï¼‰ã€‚</li>
</ul>
<pre><code class="language-cpp">int getSuccessor(AVLNode* node, int key) {
    if (!node) return INT_MAX;  // æ— åç»§
    if (key &gt;= node-&gt;key) {
        return getSuccessor(node-&gt;right, key);  // åç»§åœ¨å³å­æ ‘
    } else {
        // å½“å‰èŠ‚ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ªå€™é€‰åç»§ï¼Œç»§ç»­å‘å·¦æ‰¾æ›´å°çš„
        int leftSuccessor = getSuccessor(node-&gt;left, key);
        return min(node-&gt;key, leftSuccessor);
    }
}
</code></pre>
<h4 id="æ—¶é—´å¤æ‚åº¦åˆ†æ">æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</h4>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>æ—¶é—´å¤æ‚åº¦</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td>æ˜¯å¦å­˜åœ¨</td>
<td><span class="math inline">\(O(\log n)\)</span></td>
<td>å¹³è¡¡æ ‘é«˜åº¦ä¸€å®šæ˜¯ <span class="math inline">\(O(\log n)\)</span></td>
</tr>
<tr>
<td>æ’å</td>
<td><span class="math inline">\(O(\log n)\)</span></td>
<td>å¹³è¡¡æ ‘é«˜åº¦ä¸€å®šæ˜¯ <span class="math inline">\(O(\log n)\)</span></td>
</tr>
<tr>
<td>ç¬¬kå°</td>
<td><span class="math inline">\(O(\log n)\)</span></td>
<td>å¹³è¡¡æ ‘é«˜åº¦ä¸€å®šæ˜¯ <span class="math inline">\(O(\log n)\)</span></td>
</tr>
<tr>
<td>å‰é©±åç»§</td>
<td><span class="math inline">\(O(\log n)\)</span></td>
<td>å¹³è¡¡æ ‘é«˜åº¦ä¸€å®šæ˜¯ <span class="math inline">\(O(\log n)\)</span></td>
</tr>
<tr>
<td>ï¼ˆè¿™åŸå› è¯´äº†è·Ÿæ²¡è¯´ä¸€æ ·ï¼‰ã€‚</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="å¸¸è§é—®é¢˜q--a">å¸¸è§é—®é¢˜Q &amp; A:</h2>
<ul>
<li>
<p>Q: å¦‚æœæ ‘ä¸­æœ‰é‡å¤å€¼æ€ä¹ˆåŠï¼Ÿ<br>
A: éœ€è¦åœ¨èŠ‚ç‚¹ä¸­å¢åŠ è®¡æ•°å™¨ï¼ˆcountï¼‰ï¼Œä¿®æ”¹æ’å…¥/åˆ é™¤é€»è¾‘ï¼ŒæŸ¥è¯¢æ—¶ç»Ÿè®¡é‡å¤å€¼çš„æ•°é‡ã€‚</p>
</li>
<li>
<p>Q: ä¸ºä»€ä¹ˆæŸ¥è¯¢æ’åç”¨sizeè€Œä¸ç”¨ä¸­åºéå†ï¼Ÿ<br>
A: sizeå°†æŸ¥è¯¢ä¼˜åŒ–åˆ° <span class="math inline">\(O(\log n)\)</span>ï¼Œä¸­åºéå†éœ€è¦ <span class="math inline">\(O(n)\)</span> æ—¶é—´ã€‚</p>
</li>
<li>
<p>Q:å·¦å­æ ‘å’Œå³å­æ ‘ä¸­å­˜çš„å€¼çš„å¤§å°æœ‰ä»€ä¹ˆè§„å¾‹å—ï¼Ÿ<br>
A:å¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶å·¦å­æ ‘çš„å€¼å…¨å°äºè¯¥èŠ‚ç‚¹ï¼Œå³å­æ ‘å…¨å¤§äºè¯¥èŠ‚ç‚¹ã€‚</p>
</li>
</ul>
<p>é‚£ä¹ˆæ­å–œä½ éªšå¹´ï¼Œä½ å­¦ä¼šäº†å¹³è¡¡æ ‘ï¼</p>
<h2 id="code-for-luogu-p3369">Code For Luogu P3369</h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;climits&gt;
using namespace std;

struct AVLNode {
    int key;
    int height;    // å½“å‰èŠ‚ç‚¹é«˜åº¦
    int size;      // å½“å‰å­æ ‘çš„æ€»èŠ‚ç‚¹æ•°ï¼ˆç”¨äºæ’åæŸ¥è¯¢ï¼‰
    AVLNode *left, *right;
    AVLNode(int val) : key(val), height(1), size(1), left(nullptr), right(nullptr) {}
};

// è·å–èŠ‚ç‚¹é«˜åº¦ï¼ˆç©ºèŠ‚ç‚¹é«˜åº¦ä¸º0ï¼‰
int getHeight(AVLNode* node) {
    return node ? node-&gt;height : 0;
}

// è·å–å­æ ‘å¤§å°ï¼ˆç©ºèŠ‚ç‚¹å¤§å°ä¸º0ï¼‰
int getSize(AVLNode* node) {
    return node ? node-&gt;size : 0;
}

// æ›´æ–°èŠ‚ç‚¹çš„é«˜åº¦å’Œå­æ ‘å¤§å°
void update(AVLNode* node) {
    node-&gt;height = max(getHeight(node-&gt;left), getHeight(node-&gt;right)) + 1;
    node-&gt;size = getSize(node-&gt;left) + getSize(node-&gt;right) + 1;
}

// è·å–å¹³è¡¡å› å­ï¼ˆå·¦å­æ ‘é«˜åº¦ - å³å­æ ‘é«˜åº¦ï¼‰
int getBalance(AVLNode* node) {
    return node ? getHeight(node-&gt;left) - getHeight(node-&gt;right) : 0;
}

// å³æ—‹ï¼ˆå¤„ç†LLå‹å¤±è¡¡ï¼‰
AVLNode* rightRotate(AVLNode* y) {
    AVLNode* x = y-&gt;left;
    AVLNode* T2 = x-&gt;right;

    // æ—‹è½¬
    x-&gt;right = y;
    y-&gt;left = T2;

    // æ›´æ–°é«˜åº¦å’Œå¤§å°
    update(y);
    update(x);

    return x;  // è¿”å›æ–°çš„æ ¹èŠ‚ç‚¹
}

// å·¦æ—‹ï¼ˆå¤„ç†RRå‹å¤±è¡¡ï¼‰
AVLNode* leftRotate(AVLNode* x) {
    AVLNode* y = x-&gt;right;
    AVLNode* T2 = y-&gt;left;

    // æ—‹è½¬
    y-&gt;left = x;
    x-&gt;right = T2;

    // æ›´æ–°é«˜åº¦å’Œå¤§å°
    update(x);
    update(y);

    return y;  // è¿”å›æ–°çš„æ ¹èŠ‚ç‚¹
}

// æ’å…¥æ“ä½œ
AVLNode* insert(AVLNode* node, int key) {
    // 1. æ ‡å‡†BSTæ’å…¥
    if (!node) return new AVLNode(key);

    if (key &lt; node-&gt;key) {
        node-&gt;left = insert(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        node-&gt;right = insert(node-&gt;right, key);
    } else {
        return node;  // é‡å¤å€¼ä¸æ’å…¥
    }

    // 2. æ›´æ–°å½“å‰èŠ‚ç‚¹é«˜åº¦å’Œå¤§å°
    update(node);

    // 3. æ£€æŸ¥å¹³è¡¡å› å­å¹¶è°ƒæ•´
    int balance = getBalance(node);

    // LLå‹å¤±è¡¡ï¼ˆå·¦å­æ ‘æ›´é«˜ï¼Œä¸”å·¦å­æ ‘çš„å·¦å­æ ‘æ›´é«˜ï¼‰
    if (balance &gt; 1 &amp;&amp; key &lt; node-&gt;left-&gt;key) {
        return rightRotate(node);
    }

    // RRå‹å¤±è¡¡ï¼ˆå³å­æ ‘æ›´é«˜ï¼Œä¸”å³å­æ ‘çš„å³å­æ ‘æ›´é«˜ï¼‰
    if (balance &lt; -1 &amp;&amp; key &gt; node-&gt;right-&gt;key) {
        return leftRotate(node);
    }

    // LRå‹å¤±è¡¡ï¼ˆå·¦å­æ ‘æ›´é«˜ï¼Œä½†å·¦å­æ ‘çš„å³å­æ ‘æ›´é«˜ï¼‰
    if (balance &gt; 1 &amp;&amp; key &gt; node-&gt;left-&gt;key) {
        node-&gt;left = leftRotate(node-&gt;left);
        return rightRotate(node);
    }

    // RLå‹å¤±è¡¡ï¼ˆå³å­æ ‘æ›´é«˜ï¼Œä½†å³å­æ ‘çš„å·¦å­æ ‘æ›´é«˜ï¼‰
    if (balance &lt; -1 &amp;&amp; key &lt; node-&gt;right-&gt;key) {
        node-&gt;right = rightRotate(node-&gt;right);
        return leftRotate(node);
    }

    return node;  // æ— éœ€è°ƒæ•´
}

// æ‰¾åˆ°å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹ï¼ˆè¾…åŠ©åˆ é™¤æ“ä½œï¼‰
AVLNode* findMinNode(AVLNode* node) {
    while (node-&gt;left) node = node-&gt;left;
    return node;
}

// åˆ é™¤æ“ä½œ
AVLNode* remove(AVLNode* node, int key) {
    // 1. æ ‡å‡†BSTåˆ é™¤
    if (!node) return nullptr;

    if (key &lt; node-&gt;key) {
        node-&gt;left = remove(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        node-&gt;right = remove(node-&gt;right, key);
    } else {
        // æƒ…å†µ1ï¼šèŠ‚ç‚¹æ˜¯å¶å­æˆ–åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
        if (!node-&gt;left || !node-&gt;right) {
            AVLNode* temp = node-&gt;left ? node-&gt;left : node-&gt;right;
            if (!temp) {  // æ— å­èŠ‚ç‚¹
                temp = node;
                node = nullptr;
            } else {     // æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹
                *node = *temp;  // ç”¨å­èŠ‚ç‚¹è¦†ç›–è‡ªèº«
            }
            delete temp;
        } 
        // æƒ…å†µ2ï¼šèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
        else {
            AVLNode* temp = findMinNode(node-&gt;right);  // æ‰¾åˆ°å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹
            node-&gt;key = temp-&gt;key;                    // ç”¨è¯¥èŠ‚ç‚¹çš„å€¼æ›¿æ¢è‡ªèº«
            node-&gt;right = remove(node-&gt;right, temp-&gt;key);  // é€’å½’åˆ é™¤æ›¿æ¢èŠ‚ç‚¹
        }
    }

    if (!node) return nullptr;  // æ ‘ä¸ºç©ºåˆ™ç›´æ¥è¿”å›

    // 2. æ›´æ–°é«˜åº¦å’Œå¤§å°
    update(node);

    // 3. æ£€æŸ¥å¹³è¡¡å¹¶è°ƒæ•´
    int balance = getBalance(node);

    // LLå‹å¤±è¡¡
    if (balance &gt; 1 &amp;&amp; getBalance(node-&gt;left) &gt;= 0) {
        return rightRotate(node);
    }
    // LRå‹å¤±è¡¡
    if (balance &gt; 1 &amp;&amp; getBalance(node-&gt;left) &lt; 0) {
        node-&gt;left = leftRotate(node-&gt;left);
        return rightRotate(node);
    }
    // RRå‹å¤±è¡¡
    if (balance &lt; -1 &amp;&amp; getBalance(node-&gt;right) &lt;= 0) {
        return leftRotate(node);
    }
    // RLå‹å¤±è¡¡
    if (balance &lt; -1 &amp;&amp; getBalance(node-&gt;right) &gt; 0) {
        node-&gt;right = rightRotate(node-&gt;right);
        return leftRotate(node);
    }

    return node;  // æ— éœ€è°ƒæ•´
}

// æŸ¥è¯¢å€¼çš„æ’åï¼ˆæ¯”keyå°çš„æ•°çš„ä¸ªæ•° +1ï¼‰
int getRank(AVLNode* node, int key) {
    if (!node) return 1;
    if (key &lt; node-&gt;key) {
        return getRank(node-&gt;left, key);
    } else if (key &gt; node-&gt;key) {
        return getSize(node-&gt;left) + 1 + getRank(node-&gt;right, key);
    } else {
        return getSize(node-&gt;left) + 1;
    }
}

// æŸ¥è¯¢ç¬¬kå°çš„æ•°
int getKth(AVLNode* node, int k) {
    int leftSize = getSize(node-&gt;left);
    if (k &lt;= leftSize) {
        return getKth(node-&gt;left, k);
    } else if (k == leftSize + 1) {
        return node-&gt;key;
    } else {
        return getKth(node-&gt;right, k - leftSize - 1);
    }
}

// æŸ¥è¯¢å‰é©±ï¼ˆæ¯”keyå°çš„æœ€å¤§æ•°ï¼‰
int getPredecessor(AVLNode* node, int key) {
    if (!node) return INT_MIN;
    if (key &lt;= node-&gt;key) {
        return getPredecessor(node-&gt;left, key);
    } else {
        return max(node-&gt;key, getPredecessor(node-&gt;right, key));
    }
}

// æŸ¥è¯¢åç»§ï¼ˆæ¯”keyå¤§çš„æœ€å°æ•°ï¼‰
int getSuccessor(AVLNode* node, int key) {
    if (!node) return INT_MAX;
    if (key &gt;= node-&gt;key) {
        return getSuccessor(node-&gt;right, key);
    } else {
        return min(node-&gt;key, getSuccessor(node-&gt;left, key));
    }
}

int main() {
    AVLNode* root = nullptr;
    int Q, op, x;
    cin &gt;&gt; Q;
    while (Q--) {
        cin &gt;&gt; op &gt;&gt; x;
        switch (op) {
            case 1:  // æ’å…¥x
                root = insert(root, x);
                break;
            case 2:  // åˆ é™¤x
                root = remove(root, x);
                break;
            case 3:  // æŸ¥è¯¢xçš„æ’å
                cout &lt;&lt; getRank(root, x) &lt;&lt; endl;
                break;
            case 4:  // æŸ¥è¯¢ç¬¬kå°çš„æ•°
                cout &lt;&lt; getKth(root, x) &lt;&lt; endl;
                break;
            case 5:  // æŸ¥è¯¢xçš„å‰é©±
                cout &lt;&lt; getPredecessor(root, x) &lt;&lt; endl;
                break;
            case 6:  // æŸ¥è¯¢xçš„åç»§
                cout &lt;&lt; getSuccessor(root, x) &lt;&lt; endl;
                break;
        }
    }
    return 0;
}
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.05907143737847222" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-02 19:41">2025-05-02 19:41</span>&nbsp;
<a href="https://www.cnblogs.com/CheeseFunction">åƒå¥¶é…ªçš„çŒ«</a>&nbsp;
é˜…è¯»(<span id="post_view_count">4</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">1</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18857521);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18857521', targetLink: 'https://www.cnblogs.com/CheeseFunction/p/18857521', title: 'å¹³è¡¡æ ‘' })">ä¸¾æŠ¥</a>
</div>
        
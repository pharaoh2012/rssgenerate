<!----> <meta itemprop="headline" content="è¿™æ¬¡ç»ˆäºè½®åˆ°å‰ç«¯ç»™åç«¯å…œåº•äº†ğŸ¤£"> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"> <meta itemprop="datePublished" content="2025-03-28T06:47:50.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="howcode"> <meta itemprop="url" content="https://juejin.cn/user/3870758380505431"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-5111268e="">
            è¿™æ¬¡ç»ˆäºè½®åˆ°å‰ç«¯ç»™åç«¯å…œåº•äº†ğŸ¤£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-5111268e=""><div class="author-info-box" data-v-5111268e=""><div class="author-name" data-v-5111268e=""><a href="/user/3870758380505431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-6a576a98="" data-v-5111268e=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-6a576a98="">
    howcode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-5111268e=""><time datetime="2025-03-28T06:47:50.000Z" title="Fri Mar 28 2025 06:47:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-5111268e="">
                    2025-03-28
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-5111268e=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-5111268e=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-5111268e=""></circle></svg> <span class="views-count" data-v-5111268e="">
                    17,594
                  </span> <span class="read-time" data-v-5111268e=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-5111268e=""><rect width="16" height="16" fill="none" data-v-5111268e=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-5111268e=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-5111268e=""></path></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-5111268e=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-5111268e=""><div class="article-viewer markdown-body cache result"><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c44a86f85a20404e81b3479e8ed6ed13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=GcX1Lfsv7JRJmhKV%2FVoaV4R7W34%3D" alt="å°é¢.png" loading="lazy"></p>
<h2 data-id="heading-0">éœ€æ±‚äº¤ä»£</h2>
<p>æœ€è¿‘æˆ‘ä»¬é¡¹ç›®ç»„å¼€å‘äº†ä¸ªäº’è”ç½‘é‡‡é›†çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åç«¯åˆç†æŠ“å–äº†ç¬¬ä¸‰æ–¹çš„æ–‡ç« ï¼Œæ•°æ®ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å‰ç«¯äºº<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­¦å¥½å‰ç«¯ï¼Œèµ°éå¤©ä¸‹éƒ½ä¸æ€•<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>æ•°æ®æŠ“å–åˆ°åï¼Œå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œç„¶åå‰ç«¯è¯·æ±‚æ¥å£è·å–åˆ°æ•°æ®ï¼Œç›´æ¥åœ¨é¡µé¢é¢„è§ˆ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">'articleContent'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b32ea73542b43e09cad9ef5b1acb30d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=htQm88r1pNDKNejrdc%2FDaU5r6CY%3D" alt="image.png" loading="lazy"></p>
<p>æ•´ä¸ªéœ€æ±‚å·²ç»äº¤ä»£æ¸…æ¥š</p>
<h2 data-id="heading-1">è¿™ä¸ªéœ€æ±‚æœ‰ç‚¹ä¸ºéš¾åç«¯äº†</h2>
<p>å‰å¤©ï¼Œå®¢æˆ·è¯´è¦æ–°å¢ä¸€ä¸ªæ–‡ç« çš„pdfå¯¼å‡ºåŠŸèƒ½ï¼Œä½†å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªåˆæƒ…åˆç†çš„éœ€æ±‚ï¼Œå´æŠŠåç«¯ä¸ºéš¾ä½äº†ï¼ŒåŸå› æ˜¯éƒ¨åˆ†æ•°æ®é‡‡é›†è¿‡æ¥çš„ç»“æ„å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å‰ç«¯äºº<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­¦å¥½å‰ç«¯ï¼Œèµ°éå¤©ä¸‹éƒ½ä¸æ€•<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å‰ç«¯å¼ºï¼Œå‰ç«¯ç‹‚ï¼Œäº¤äº’ç‰¹æ•ˆæˆ‘ç§°ç‹ï¼
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>JS å†™å¾—å¥½ï¼Œéœ€æ±‚æ”¹ä¸äº†ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>React Vue ä¸¤æ‰‹æŠ“ï¼Œé«˜è–ª offer åˆ°ä½ å®¶ï¼<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æµè§ˆå™¨é‡Œæ¨ªç€èµ°ï¼Œ bug è§æˆ‘éƒ½ç»•é“ï¼&lt;/p
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Chrome è°ƒè¯•ä¸€å£°ç¬‘ï¼Œ IE æ³ªæ´’æ—§æ—¶å…‰ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Git æäº¤ä¸ç•™æƒ…ï¼Œç‰ˆæœ¬å›é€€æˆ‘æœ€è¡Œï¼
</code></pre>
<p>ä»”ç»†çš„äººå°±èƒ½å‘ç°é—®é¢˜äº†ï¼Œå¾ˆå¤šhtmlå…ƒç´ å­˜åœ¨æ²¡æœ‰å®Œæ•´çš„é—­åˆæƒ…å†µ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8fe968e3c248d69076afef5c63937c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=djLm9UB3b%2F%2B2dtrGy5IJtJG0s3I%3D" alt="image.png" loading="lazy"></p>
<p>ä½†æµè§ˆå™¨æ˜¯å¼ºå¤§çš„ï¼Œä¸æ¯«ä¸å½±å“æ¸²æŸ“æ•ˆæœï¼ŒåŸæ¥æµè§ˆå™¨è‡ªåŠ¨å¸®æˆ‘ä»¬è¡¥å…¨ç»“æ„äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc56b06a3c0542ca83d019d9f52fca0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=WKa6PLUqOYddwtJvFcT77yg6TA4%3D" alt="image.png" loading="lazy"></p>
<p>å¯åç«¯å¤„ç†è¿™ä»¶äº‹å°±æ²¡é‚£ä¹ˆç®€å•äº†ï¼Œçˆ¬å–åˆ°çš„æ•°æ®ä¹Ÿæ¯”æˆ‘ä¸¾ä¾‹çš„è¦å¤æ‚çš„å¤šï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶å°†htmlè½¬pdfæ—¶ä¼šè¯†åˆ«æ ‡ç­¾å¼‚å¸¸ç­‰é—®é¢˜ï¼Œå› æ­¤ç¨‹åºä¼šæŠ›å¼‚å¸¸</p>
<h2 data-id="heading-2">æ¥è‡ªåç«¯çš„å»ºè®®</h2>
<p>è‹¦é€¼çš„åç«¯æŠ˜è…¾äº†å¾ˆä¹…ï¼Œè¿˜æ˜¯æ²¡æŠ˜è…¾å‡ºæ¥ï¼Œç»ˆäºä»–å‘ç°å‰ç«¯é¡µé¢æœ‰ä¸ªå³é”®æ‰“å°çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/070143a6e12543539d29c4caf08af5bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=CdsgbII5HFcOkiie3%2B72850e6KE%3D" alt="image.png" loading="lazy"></p>
<p>äºæ˜¯ä»–è¯´ï¼šæµè§ˆå™¨è¿™ç©æ„æ•´æŒºå¥½å•Šï¼Œå‰ç«¯èƒ½ä¸èƒ½ç ”ç©¶ç ”ç©¶ï¼Œå°è¯•ä»å‰ç«¯å®ç°å¯¼å‡º</p>
<h2 data-id="heading-3">é‚£å°±ç ”ç©¶ç ”ç©¶</h2>
<p>æˆ‘å°è±¡ä¸­ï¼Œç¡®å®æœ‰ä¸ªå«<code>vue-print-nb</code>çš„å‰ç«¯æ’ä»¶ï¼Œå¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½</p>
<p>ä½†.......ç­‰ç­‰ï¼Œè¿™ä¸ªæ’ä»¶ä»…ä»…æ˜¯å”¤èµ·æ‰“å°çš„åŠŸèƒ½ï¼Œæˆ‘æ€»ä¸èƒ½çœŸåšæˆè¿™æ ·ï¼Œè®©ç”¨æˆ·å¦å­˜ä¸ºpdfå§</p>
<p>äºæ˜¯ï¼Œåªèƒ½å¦è¾Ÿè¹Šå¾„ï¼Œç»ˆäºæˆ‘æ‰¾åˆ°äº†è¿™ä¹ˆä¸ªä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fburc-li%2Fvue-pdf" target="_blank" title="https://github.com/burc-li/vue-pdf" ref="nofollow noopener noreferrer">github.com/burc-li/vueâ€¦</a></p>
<p>é‡Œé¢å®ç°äº†domå…ƒç´ å¯¼å‡ºpdfçš„åŠŸèƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a81a9967b194a8186b99b1d27d1fc44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=Qj31w7PR7fsqipC2CDewmgW7QsU%3D" alt="image.png" loading="lazy"></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69b83ec298b1419f96a1d8fc14186e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=BWQ7va%2F8Vt81KGnVmGt8Gf%2BcTNc%3D" alt="image.png" loading="lazy"></p>
<p>æ•ˆæœå¾ˆä¸é”™ï¼ŒæŠ€æœ¯ç”¨åˆ°äº†<code>jspdf</code>ã€<code>html2canvas</code>è¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œä»£ç ååˆ†ç®€å•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">downLoadPdfA4Single</span> = (<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">const</span> pdfContaniner = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#pdfContaniner'</span>)
  <span class="hljs-title function_">html2canvas</span>(pdfContaniner).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">canvas</span> =&gt;</span> {
    <span class="hljs-comment">// è¿”å›å›¾ç‰‡dataURLï¼Œå‚æ•°ï¼šå›¾ç‰‡æ ¼å¼å’Œæ¸…æ™°åº¦(0-1)</span>
    <span class="hljs-keyword">const</span> pageData = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-number">1.0</span>)

    <span class="hljs-comment">// æ–¹å‘çºµå‘ï¼Œå°ºå¯¸ponitsï¼Œçº¸å¼ æ ¼å¼ a4 å³ [595.28, 841.89]</span>
    <span class="hljs-keyword">const</span> A4Width = <span class="hljs-number">595.28</span>
    <span class="hljs-keyword">const</span> A4Height = <span class="hljs-number">841.89</span> <span class="hljs-comment">// A4çº¸å®½</span>
    <span class="hljs-keyword">const</span> pageHeight = A4Height &gt;= A4Width * canvas.<span class="hljs-property">height</span> / canvas.<span class="hljs-property">width</span> ? A4Height :  A4Width * canvas.<span class="hljs-property">height</span> / canvas.<span class="hljs-property">width</span>
    <span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>(<span class="hljs-string">'portrait'</span>, <span class="hljs-string">'pt'</span>, [A4Width, pageHeight])

    <span class="hljs-comment">// addImageåä¸¤ä¸ªå‚æ•°æ§åˆ¶æ·»åŠ å›¾ç‰‡çš„å°ºå¯¸ï¼Œæ­¤å¤„å°†é¡µé¢é«˜åº¦æŒ‰ç…§a4çº¸å®½é«˜æ¯”åˆ—è¿›è¡Œå‹ç¼©</span>
    pdf.<span class="hljs-title function_">addImage</span>(
      pageData,
      <span class="hljs-string">'JPEG'</span>,
      <span class="hljs-number">0</span>,
      <span class="hljs-number">0</span>,
      A4Width,
      A4Width * canvas.<span class="hljs-property">height</span> / canvas.<span class="hljs-property">width</span>,
    )
    pdf.<span class="hljs-title function_">save</span>(<span class="hljs-string">'ä¸‹è½½ä¸€é¡µPDFï¼ˆA4çº¸ï¼‰.pdf'</span>)
  })
}
</code></pre>
<p>æŠ€æœ¯æµç¨‹å¤§è‡´å°±æ˜¯ï¼š</p>
<ul>
<li>dom -&gt; canvas</li>
<li>canvas -&gt; image</li>
<li>image -&gt; pdf</li>
</ul>
<p>ä¼¼ä¹ä¸€åˆ‡éƒ½å°†æ°´åˆ°æ¸ æˆäº†</p>
<h2 data-id="heading-4">å›°åœ¨çœ¼å‰çš„éš¾é¢˜</h2>
<p>è¿™ä¸ªæŠ€æœ¯æ ˆï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯ï¼šå¿…é¡»è¦ç”¨åˆ°domå…ƒç´ æ¸²æŸ“</p>
<p>å¦‚æœä½ å°è¯•å°†æ‰“å°çš„å…ƒç´ è®¾ç½®æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">display</span>: none;
</code></pre>
<p>æˆ–</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">visibility</span>: hidden;

</code></pre>
<p>æˆ–</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
</code></pre>
<p>æ‰§è¡Œå¯¼å‡ºåŠŸèƒ½éƒ½å°†æŠ›å¼‚å¸¸æˆ–è€…åªèƒ½å¯¼å‡ºä¸€ä¸ªç©ºç™½çš„pdf</p>
<p>è¿™æ—¶å€™æœ‰äººä¼šé—®äº†ï¼šä¸ºä»€ä¹ˆè¦è®¾ç½®domå…ƒç´ ä¸ºä¸å¯è§ï¼Ÿ</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œä½ åšäº†ä¸€ä¸ªå¯¼å‡ºåŠŸèƒ½ï¼Œæ€»ä¸èƒ½è®©å®¢æˆ·å¿…é¡»å…ˆæ‰“å¼€é¡µé¢ç­‰htmlæ¸²æŸ“å®Œåï¼Œå†å¯¼å‡ºå§ï¼Ÿ</p>
<p>å®¢æˆ·çš„ç†æƒ³çŠ¶æ€æ˜¯ï¼šåœ¨åˆ—è¡¨çš„æ“ä½œåˆ—é‡Œï¼Œæœ‰ä¸ªå¯¼å‡ºæŒ‰é’®ï¼Œç‚¹å‡»å°±å¯ä»¥å¯¼å‡ºpdfäº†</p>
<p>ä½•å†µè¿˜éœ€è¦å®ç°æ‰¹é‡å‹¾é€‰å¯¼å‡ºçš„åŠŸèƒ½ï¼Œæ€»ä¸èƒ½ç¨‹åºæ§åˆ¶ï¼Œå¯¼å‡ºä¸€ä¸ªpdfå°±openä¸€ä¸ªçª—å£æ¸²æŸ“htmlå§</p>
<h2 data-id="heading-5">å¯»æ‰¾æ–°æ–¹æ³•</h2>
<p>æ­¤è·¯ä¸é€šï¼Œå°±åªèƒ½é‡æ–°å¯»æ‰¾æ–°çš„æ–¹å‘ï¼Œä¸è¿‡ä¹Ÿæ²¡è´¹å¤ªå¤šåŠŸå¤«ï¼Œå°±æ‰¾åˆ°äº†å¦å¤–ä¸€ä¸ªæ’ä»¶<code>html2pdf.js</code>è§£å†³äº†è¿™äº‹</p>
<p>è¿™æ’ä»¶ç”¨èµ·æ¥ä¹Ÿæå…¶ç®€å•</p>
<pre><code class="hljs language-bash" lang="bash">npm install html2pdf.js
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"generatePDF"</span>&gt;</span>ä¸‹è½½PDF<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> html2pdf <span class="hljs-keyword">from</span> <span class="hljs-string">'html2pdf.js'</span>

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> element = <span class="hljs-string">`
    &lt;h1&gt;å‰ç«¯äºº&lt;/h1&gt;
    &lt;p&gt;å­¦å¥½å‰ç«¯ï¼Œèµ°éå¤©ä¸‹éƒ½ä¸æ€•&lt;/p&gt;
    &lt;div&gt;å‰ç«¯å¼ºï¼Œå‰ç«¯ç‹‚ï¼Œäº¤äº’ç‰¹æ•ˆæˆ‘ç§°ç‹ï¼
    &lt;p&gt;JS å†™å¾—å¥½ï¼Œéœ€æ±‚æ”¹ä¸äº†ï¼&lt;/p&gt;
    &lt;p&gt;React Vue ä¸¤æ‰‹æŠ“ï¼Œé«˜è–ª offer åˆ°ä½ å®¶ï¼&lt;p&gt;
    &lt;p&gt;æµè§ˆå™¨é‡Œæ¨ªç€èµ°ï¼Œ bug è§æˆ‘éƒ½ç»•é“ï¼&lt;/p
    &lt;p&gt;Chrome è°ƒè¯•ä¸€å£°ç¬‘ï¼Œ IE æ³ªæ´’æ—§æ—¶å…‰ï¼&lt;/p&gt;
    &lt;span&gt;Git æäº¤ä¸ç•™æƒ…ï¼Œç‰ˆæœ¬å›é€€æˆ‘æœ€è¡Œï¼
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePDF</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
    <span class="hljs-keyword">const</span> opt = {
      <span class="hljs-attr">margin</span>:       <span class="hljs-number">10</span>,
      <span class="hljs-attr">filename</span>:     <span class="hljs-string">'hello_world.pdf'</span>,
      <span class="hljs-attr">image</span>:        { <span class="hljs-attr">type</span>: <span class="hljs-string">'jpeg'</span>, <span class="hljs-attr">quality</span>: <span class="hljs-number">0.98</span> },
      <span class="hljs-attr">html2canvas</span>:  { <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">jsPDF</span>:        { <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>, <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span> }
    };
    <span class="hljs-comment">// ç”ŸæˆPDFå¹¶å¯¼å‡º</span>
    <span class="hljs-title function_">html2pdf</span>().<span class="hljs-title function_">from</span>(element).<span class="hljs-title function_">set</span>(opt).<span class="hljs-title function_">save</span>();
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre>
<p>åŠŸèƒ½æ­£å¸¸ï¼Œä¼¼ä¹ä¸€åˆ‡éƒ½å®Œç¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e75e7378a5d64ea99d092e71268292a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=iSNlm1h33plKYHXUDDiyqncZRUE%3D" alt="image.png" loading="lazy"></p>
<h2 data-id="heading-6">é—®é¢˜æ²¡æœ‰æƒ³çš„é‚£ä¹ˆç®€å•</h2>
<p>å¦‚æœæˆ‘ä»¬çš„<code>html</code>æ˜¯çº¯æ–‡æœ¬å…ƒç´ ï¼Œè¿™ç¨‹åºè·‘èµ·æ¥æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æˆ‘ä»¬æŠ“å–çš„ä¿¡æ¯éƒ½æºäºäº’è”ç½‘ï¼Œ<code>html</code>ç»“æ„æ€ä¹ˆå¯èƒ½ä¼šè¿™ä¹ˆç®€å•ï¼Ÿå¦‚æœæˆ‘ä»¬çš„<code>html</code>ä¸­åŒ…å«å›¾ç‰‡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> element = <span class="hljs-string">`
  &lt;div&gt;
    &lt;img src='http://t13.baidu.com/it/u=2041049195,1001882902&amp;fm=224&amp;app=112&amp;f=JPEG?w=500&amp;h=500' style="width: 300px;" /&gt;
    &lt;p&gt;èŒä¸šï¼šå‰ç«¯&lt;/p&gt;
    &lt;p&gt;æŠ€èƒ½ï¼šå”±ã€è·³ã€rap&lt;/p&gt;
  &lt;/div&gt;
`</span>;
</code></pre>
<p>æ­¤æ—¶ä½ ä¼šå‘ç°ï¼Œå¯¼å‡ºæ¥çš„pdfï¼Œå›¾ç‰‡å ä½å¤„æ˜¯ä¸ªç©ºç™½å—</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd8a77a6eaf14e1e9b7538de6946e692~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=GK%2BMbSxhwIkQXFWorlYxkw2gvk0%3D" alt="image.png" loading="lazy"></p>
<blockquote>
<p>æ€è€ƒä¸€ä¸‹ï¼šç±»ä¼¼æ¡ˆä¾‹ä¸­çš„å›¾ç‰‡åŠ è½½æ–¹å¼ï¼Œéƒ½æ˜¯getæ–¹å¼çš„å¼‚æ­¥è¯·æ±‚ï¼Œè€Œå¼‚æ­¥è¯·æ±‚å°±ä¼šå¯¼è‡´å›¾ç‰‡è¿˜æ²¡æ¸²æŸ“å®Œæˆï¼Œä½†å¯¼å‡ºçš„ç¨‹åºå·²ç»æ‰§è¡Œå®Œæˆæƒ…å†µï¼ˆæœ€ç›´æ¥çš„è§‚å¯Ÿæ–¹å¼å°±æ˜¯ï¼ŒæŠŠè¿™ä¸ªå…ƒç´ æ”¾åˆ°æµè§ˆå™¨ä¸Šæ¸²æŸ“ï¼Œä¼šå‘ç°å›¾ç‰‡ä¹Ÿæ˜¯è¿‡ä¸€ä¼šæ‰æ…¢æ…¢åŠ è½½å®Œæˆçš„ï¼‰</p>
<p>ä¸è¿‡æˆ‘ä¸ç¡®å®š<code>html2pdf.js</code>è¿™ä¸ªæ’ä»¶æ˜¯å¦ä¼šå‘èµ·å›¾ç‰‡è¯·æ±‚ï¼Œä½†ä¸ç®¡å‘ä¸å‘èµ·ï¼Œå¯¼å‡ºçš„è¡Œä¸ºæ˜æ˜¾æ˜¯åœ¨å›¾ç‰‡æ¸²æŸ“å‰å®Œæˆçš„ï¼Œå°±å¯¼è‡´äº†è¿™ä¸ªç©ºç™½å—çš„å­˜åœ¨</p>
</blockquote>
<h2 data-id="heading-7">é—®é¢˜åˆ†æå®Œäº†ï¼Œé‚£å°±è§£å†³å§</h2>
<p>æ—¢ç„¶å›¾ç‰‡å¼‚æ­¥åŠ è½½ä¸è¡Œï¼Œé‚£å°±ä½¿ç”¨å›¾ç‰‡åŒæ­¥åŠ è½½å§</p>
<p>ä¸æ˜¯å§ï¼Œä½ é—®æˆ‘ï¼šä»€ä¹ˆæ˜¯å›¾ç‰‡åŒæ­¥åŠ è½½ï¼Ÿæˆ‘ä¹Ÿä¸æ™“å¾—ï¼Œè¿™ä¸ªè¯æ˜¯æˆ‘è‡ªå·±å½“ä¸‹å‡­æ„Ÿè§‰é€ çš„ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆäº†</p>
<p>é‚£æˆ‘ç†è§£çš„å›¾ç‰‡åŒæ­¥åŠ è½½æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å›¾ç‰‡è½¬æˆ<code>Base64</code>ï¼Œå› ä¸ºè¿™ç§æ–¹å¼ï¼Œå³ä½¿è¯´æ— ç½‘çš„æƒ…å†µä¹Ÿèƒ½æ­£å¸¸åŠ è½½å›¾ç‰‡ï¼Œå› æ­¤æˆ‘å‡­æ„Ÿè§‰æ–­å®šï¼Œè¿™å°±æ˜¯å›¾ç‰‡åŒæ­¥åŠ è½½</p>
<p>åŸºäºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘å†™äº†ä¸ªdemo</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"generatePDF"</span>&gt;</span>ä¸‹è½½PDF<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> html2pdf <span class="hljs-keyword">from</span> <span class="hljs-string">'html2pdf.js'</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertImagesToBase64</span>(<span class="hljs-params">htmlString</span>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶DOMå…ƒç´ æ¥è§£æHTML</span>
  <span class="hljs-keyword">const</span> tempDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  tempDiv.<span class="hljs-property">innerHTML</span> = htmlString;

  <span class="hljs-comment">// è·å–æ‰€æœ‰å›¾ç‰‡å…ƒç´ </span>
  <span class="hljs-keyword">const</span> images = tempDiv.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img'</span>);

  <span class="hljs-comment">// éå†æ¯ä¸ªå›¾ç‰‡å¹¶è½¬æ¢</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> img <span class="hljs-keyword">of</span> images) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> base64 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBase64FromUrl</span>(img.<span class="hljs-property">src</span>);
      img.<span class="hljs-property">src</span> = base64;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ— æ³•è½¬æ¢å›¾ç‰‡ <span class="hljs-subst">${img.src}</span>:`</span>, error);
      <span class="hljs-comment">// ä¿ç•™åŸå§‹URLå¦‚æœè½¬æ¢å¤±è´¥</span>
    }
  }

  <span class="hljs-comment">// è¿”å›è½¬æ¢åçš„HTML</span>
  <span class="hljs-keyword">return</span> tempDiv.<span class="hljs-property">innerHTML</span>;
}

<span class="hljs-comment">// å›¾ç‰‡è½¬base64</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getBase64FromUrl</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'Anonymous'</span>; <span class="hljs-comment">// å¤„ç†è·¨åŸŸé—®é¢˜</span>

    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
      canvas.<span class="hljs-property">width</span> = img.<span class="hljs-property">width</span>;
      canvas.<span class="hljs-property">height</span> = img.<span class="hljs-property">height</span>;

      <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
      ctx.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

      <span class="hljs-comment">// è·å–Base64æ•°æ®</span>
      <span class="hljs-keyword">const</span> dataURL = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);
      <span class="hljs-title function_">resolve</span>(dataURL);
    };

    img.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>));
    };

    img.<span class="hljs-property">src</span> = url;
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> element = <span class="hljs-string">`
  &lt;div&gt;
    &lt;img src='http://t13.baidu.com/it/u=2041049195,1001882902&amp;fm=224&amp;app=112&amp;f=JPEG?w=500&amp;h=500' style="width: 300px;" /&gt;
    &lt;p&gt;èŒä¸šï¼šå‰ç«¯&lt;/p&gt;
    &lt;p&gt;æŠ€èƒ½ï¼šå”±ã€è·³ã€rap&lt;/p&gt;
  &lt;/div&gt;
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePDF</span>(<span class="hljs-params"></span>) {
  <span class="hljs-title function_">convertImagesToBase64</span>(element)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">convertedHtml</span> =&gt;</span> {
    <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
    <span class="hljs-keyword">const</span> opt = {
      <span class="hljs-attr">margin</span>:       <span class="hljs-number">10</span>,
      <span class="hljs-attr">filename</span>:     <span class="hljs-string">'å‰ç«¯å¤§æ³•å¥½.pdf'</span>,
      <span class="hljs-attr">image</span>:        { <span class="hljs-attr">type</span>: <span class="hljs-string">'jpeg'</span>, <span class="hljs-attr">quality</span>: <span class="hljs-number">0.98</span> },
      <span class="hljs-attr">html2canvas</span>:  { <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">jsPDF</span>:        { <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>, <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span> }
    };

    <span class="hljs-comment">// ç”ŸæˆPDFå¹¶å¯¼å‡º</span>
    <span class="hljs-title function_">html2pdf</span>().<span class="hljs-title function_">from</span>(convertedHtml).<span class="hljs-title function_">set</span>(opt).<span class="hljs-title function_">save</span>();
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è½¬æ¢è¿‡ç¨‹ä¸­å‡ºé”™:'</span>, error);
  });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre>
<p>æ­¤æ—¶å°±å¤§åŠŸå‘Šæˆå•¦ï¼ä¸è¿‡å¾—æä¸€å¥ï¼šå›¾ç‰‡çš„URLé“¾æ¥å¿…é¡»æ˜¯åŒæºæˆ–è€…å…è®¸è·¨è¶Šçš„ï¼Œå¦åˆ™å°±ä¼šå­˜åœ¨å›¾ç‰‡åŠ è½½å¼‚å¸¸çš„é—®é¢˜</p>
<h2 data-id="heading-8">ä¿®å¤å›¾ç‰‡è¿‡å¤§çš„é—®é¢˜</h2>
<p>éƒ¨åˆ†å›¾ç‰‡çš„å®½åº¦ä¼šè¿‡å¤§ï¼Œå¯¼è‡´å›¾ç‰‡åŠ è½½ä¸å…¨çš„é—®é¢˜ï¼Œè¿™åœ¨é¢„è§ˆçš„æƒ…å†µä¸‹ä¹Ÿå­˜åœ¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0a0201a409b49fd8480013652220a52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=q9boA8xloQ7kKGc61lpwGwrF0JU%3D" alt="image.png" loading="lazy"></p>
<p>å› ä¸ºéœ€è¦åŠ ä¸Šæ ·å¼é™å®š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">vertical-align</span>: middle;
  <span class="hljs-attribute">height</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">width</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™æ ·å°±æ­£å¸¸å•¦</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dee06fec27741a7a5c98a1146fea851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG93Y29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1748831286&amp;x-signature=sDxxULvat5PyXm0DOZCrbE2XRdA%3D" alt="image.png" loading="lazy"></p>
<p>æ•…æ­¤éœ€è¦åœ¨å¯¼å‡ºpdfå‰ï¼Œç»™å…ƒç´ æ·»åŠ ä¸€ä¸ªå›¾ç‰‡çš„æ ·å¼é™å®š</p>
<pre><code class="hljs language-js" lang="js">element =<span class="hljs-string">`&lt;style&gt;
img {
  max-width: 100%;
  max-height: 100%;
  vertical-align: middle;
  height: auto !important;
  width: auto !important;
  margin: 10px 0;
}
&lt;/style&gt;`</span> + element;
</code></pre>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"generatePDF"</span>&gt;</span>ä¸‹è½½PDF<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> html2pdf <span class="hljs-keyword">from</span> <span class="hljs-string">'html2pdf.js'</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">convertImagesToBase64</span>(<span class="hljs-params">htmlString</span>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶DOMå…ƒç´ æ¥è§£æHTML</span>
  <span class="hljs-keyword">const</span> tempDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  tempDiv.<span class="hljs-property">innerHTML</span> = htmlString;

  <span class="hljs-comment">// è·å–æ‰€æœ‰å›¾ç‰‡å…ƒç´ </span>
  <span class="hljs-keyword">const</span> images = tempDiv.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'img'</span>);

  <span class="hljs-comment">// éå†æ¯ä¸ªå›¾ç‰‡å¹¶è½¬æ¢</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> img <span class="hljs-keyword">of</span> images) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> base64 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBase64FromUrl</span>(img.<span class="hljs-property">src</span>);
      img.<span class="hljs-property">src</span> = base64;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ— æ³•è½¬æ¢å›¾ç‰‡ <span class="hljs-subst">${img.src}</span>:`</span>, error);
      <span class="hljs-comment">// ä¿ç•™åŸå§‹URLå¦‚æœè½¬æ¢å¤±è´¥</span>
    }
  }

  <span class="hljs-comment">// è¿”å›è½¬æ¢åçš„HTML</span>
  <span class="hljs-keyword">return</span> tempDiv.<span class="hljs-property">innerHTML</span>;
}
<span class="hljs-comment">// å›¾ç‰‡è½¬base64</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getBase64FromUrl</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'Anonymous'</span>; <span class="hljs-comment">// å¤„ç†è·¨åŸŸé—®é¢˜</span>

    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
      canvas.<span class="hljs-property">width</span> = img.<span class="hljs-property">width</span>;
      canvas.<span class="hljs-property">height</span> = img.<span class="hljs-property">height</span>;

      <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
      ctx.<span class="hljs-title function_">drawImage</span>(img, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

      <span class="hljs-comment">// è·å–Base64æ•°æ®</span>
      <span class="hljs-keyword">const</span> dataURL = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);
      <span class="hljs-title function_">resolve</span>(dataURL);
    };

    img.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>));
    };

    img.<span class="hljs-property">src</span> = url;
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">let</span> element = <span class="hljs-string">`
  &lt;div&gt;
    &lt;img src='http://t13.baidu.com/it/u=2041049195,1001882902&amp;fm=224&amp;app=112&amp;f=JPEG?w=500&amp;h=500' style="width: 300px;" /&gt;
    &lt;p&gt;èŒä¸šï¼šå‰ç«¯&lt;/p&gt;
    &lt;p&gt;æŠ€èƒ½ï¼šå”±ã€è·³ã€rap&lt;/p&gt;
  &lt;/div&gt;
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePDF</span>(<span class="hljs-params"></span>) {
  element =<span class="hljs-string">`&lt;style&gt;
  img {
      max-width: 100%;
      max-height: 100%;
      vertical-align: middle;
      height: auto !important;
      width: auto !important;
      margin: 10px 0;
    }
  &lt;/style&gt;`</span> + element;
  <span class="hljs-title function_">convertImagesToBase64</span>(element)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">convertedHtml</span> =&gt;</span> {
    <span class="hljs-comment">// é…ç½®é€‰é¡¹</span>
    <span class="hljs-keyword">const</span> opt = {
      <span class="hljs-attr">margin</span>:       <span class="hljs-number">10</span>,
      <span class="hljs-attr">filename</span>:     <span class="hljs-string">'å‰ç«¯å¤§æ³•å¥½.pdf'</span>,
      <span class="hljs-attr">image</span>:        { <span class="hljs-attr">type</span>: <span class="hljs-string">'jpeg'</span>, <span class="hljs-attr">quality</span>: <span class="hljs-number">0.98</span> },
      <span class="hljs-attr">html2canvas</span>:  { <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span> },
      <span class="hljs-attr">jsPDF</span>:        { <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>, <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span> }
    };

    <span class="hljs-comment">// ç”ŸæˆPDF</span>
    <span class="hljs-title function_">html2pdf</span>().<span class="hljs-title function_">from</span>(convertedHtml).<span class="hljs-title function_">set</span>(opt).<span class="hljs-title function_">save</span>();
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è½¬æ¢è¿‡ç¨‹ä¸­å‡ºé”™:'</span>, error);
  });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre>
<h2 data-id="heading-9">3.31æ›´æ–°</h2>
<h3 data-id="heading-10">å‰ç«¯å’Œåç«¯è”åˆè§£å†³æ–¹æ¡ˆ</h3>
<p>è¯„è®ºåŒºæœ‰ä½çƒ­å¿ƒå¸‚æ°‘ <a href="https://juejin.cn/user/659362709247992" target="_blank" title="https://juejin.cn/user/659362709247992">ä¸€åçˆ±å°æƒ çš„å‰ç«¯</a>æåˆ°ï¼šå°±è®©åç«¯åšï¼Œä½ åœ¨å‰ç«¯æ¸²æŸ“å‡ºæ¥åï¼Œè®©å®ƒæä¾›ä¸€ä¸ªæ¥å£ï¼Œä½ åœ¨æŠŠ innerHTML å‘ç»™å®ƒï¼ˆæµè§ˆå™¨è‡ªåŠ¨è¡¥å…¨äº†ï¼‰</p>
<p>åŸºäºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘å°è¯•äº†å‰ç«¯è¡¥å…¨htmlï¼Œæäº¤åˆ°åç«¯ï¼Œåç«¯åˆ™å¯é¡ºåˆ©pdfæµ</p>
<pre><code class="hljs language-xml" lang="xml">// ä½¿ç”¨ç¤ºä¾‹ï¼Œçº¯åœ¨æ ‡ç­¾é—­åˆä¸å®Œæ•´çš„æƒ…å†µ
let element = `
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'http://t13.baidu.com/it/u=2041049195,1001882902&amp;fm=224&amp;app=112&amp;f=JPEG?w=500&amp;h=500'</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 300px;"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>èŒä¸šï¼šå‰ç«¯<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æŠ€èƒ½ï¼šå”±ã€è·³ã€rap&lt;/p
  &lt;/div
`;

function generatePDF() {
  element =`<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-tag">img</span> {
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">vertical-align</span>: middle;
      <span class="hljs-attribute">height</span>: auto <span class="hljs-meta">!important</span>;
      <span class="hljs-attribute">width</span>: auto <span class="hljs-meta">!important</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>` + element;
  const tempDiv = document.createElement('div');
  tempDiv.innerHTML = element;
  // è·å–åˆ°å®Œæ•´çš„htmlç»“æ„ï¼Œæäº¤ç»™åç«¯å¤„ç†
  console.log(tempDiv.innerHTML);
}
</code></pre>
<h3 data-id="heading-11">åç«¯è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨<code>com.itextpdf.html2pdf</code>è§£å†³</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.itextpdf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>html2pdf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>é—¹è…¾ä¸€åœˆä¸‹æ¥ï¼ŒåŸæ¥åç«¯ä¹Ÿæœ‰è‡ªå·±çš„html2pdfåº“ï¼Œä¸è¿‡è¿™ä¸ªåº“ä¸éœ€è¦å°†å›¾ç‰‡è½¬æˆ<code>base64</code>ï¼Œä½†éœ€è¦è®¾ç½®ä¸­æ–‡å­—ä½“ï¼Œä¸è®¾ç½®çš„è¯ä¸­æ–‡å°†è§£æå¼‚å¸¸</p>
<h2 data-id="heading-12">åè¯</h2>
<p>å‰å¤©æçš„éœ€æ±‚ï¼Œæ˜¨å¤©å…œçš„åº•ï¼Œä»Šå¤©å†™çš„æ–‡ç« è®°å½•</p>
<p>è¿™ç§é—®é¢˜ï¼Œç†åº”è¯¥åç«¯å¤„ç†ï¼Œä½†åç«¯å’Œæˆ‘åæ§½è¿‡ä»–å¤„ç†èµ·æ¥çš„å›°éš¾ä¸é—®é¢˜ï¼Œå¯»æ±‚å‰ç«¯å¸®åŠ©æ—¶ï¼Œæˆ‘ä¹Ÿä¼šç§¯æé…åˆã€‚å¯åœ¨ç°å®ä¸­ï¼Œæˆ‘é‡è¿‡å¾ˆå¤šåç«¯ï¼Œæ­»æ´»ä¸æ„¿æ„é…åˆå‰ç«¯ï¼Œä¾‹å¦‚æ—¥æœŸæ ¼å¼åŒ–ã€æ•°æ®idç±»å‹bigintè¿‡å¤§ä¸å­—ç¬¦åŒ–è¿”å›ç»™å‰ç«¯ç­‰ç­‰ï¼Œä¸»æ‰“ä¸€ä¸ªæœ¬ç€å‰ç«¯å¯ä»¥åšå°±å‰ç«¯åšçš„åŸåˆ™ï¼Œè¯´å®åœ¨ï¼šå±å®ä¸‹å¤´</p>
<p>å‰åç«¯æœ¬åº”è¯¥å°±æ˜¯ç›¸äº’æ‰“é…åˆçš„å…³ç³»ï¼Œè°æ–¹ä¾¿å°±è¡Œä¸ªæ–¹ä¾¿ï¼Œæ²¡å¿…è¦åƒµæŒä¸ä¸‹</p>
<p>ä»Šå¤©çš„åˆ†äº«å°±åˆ°æ­¤ç»“æŸï¼Œå¦‚æœä½ å¯¹æŠ€æœ¯/è¡Œä¸šäº¤æµæœ‰å…´è¶£ï¼Œæ¬¢è¿æ·»åŠ <code>howcoder</code>å¾®ä¿¡ï¼Œé‚€ä½ è¿›ç¾¤äº¤æµ</p>
<h2 data-id="heading-13">å¾€æœŸç²¾å½©</h2>
<p><a href="https://juejin.cn/post/7467869746236571683" target="_blank" title="https://juejin.cn/post/7467869746236571683">ã€Šä½ ä¸äº†è§£çš„Gridå¸ƒå±€ã€‹</a></p>
<p><a href="https://juejin.cn/post/7459005223173554213" target="_blank" title="https://juejin.cn/post/7459005223173554213">ã€Šå°±ä½ å°å­è¿˜ä¸ä¼š Gridå¸ƒå±€æ˜¯å§ï¼Ÿã€‹</a></p>
<p><a href="https://juejin.cn/post/7452197534352031770" target="_blank" title="https://juejin.cn/post/7452197534352031770">ã€Šè¶…ç¡¬æ ¸ï¼šä»é›¶åˆ°ä¸€éƒ¨ç½²æŒ‡å—ã€‹</a></p>
<p><a href="https://juejin.cn/post/7451168270878097434" target="_blank" title="https://juejin.cn/post/7451168270878097434">ã€Šç§æ´»2å¹´ï¼Œæˆ‘èµšåˆ°äº†äººç”Ÿçš„ç¬¬ä¸€æ¡¶é‡‘ã€‹</a></p>
<p><a href="https://juejin.cn/post/7431761042194055183" target="_blank" title="https://juejin.cn/post/7431761042194055183">ã€Šæ¥å…¥AIåï¼Œå¼€æºé¡¹ç›®ç¬é—´æœ‰è¶£äº†ğŸ˜ã€‹</a></p>
<p><a href="https://juejin.cn/post/7380200984058839066" target="_blank" title="https://juejin.cn/post/7380200984058839066">ã€Šè‚äº†ä¸¤ä¸ªæœˆï¼Œæˆ‘ä»¬æ— å¿å¼€æºäº†ã€‹</a></p>
<p><a href="https://juejin.cn/post/7336014826336747520" target="_blank" title="https://juejin.cn/post/7336014826336747520">ã€Šå½»åº•ä¸NGå‰ç«¯è·¯ç”±ã€‹</a></p>
<p><a href="https://juejin.cn/post/7246997498572619831" target="_blank" title="https://juejin.cn/post/7246997498572619831">ã€Švueé¡¹ç›®éƒ¨ç½²è‡ªåŠ¨æ£€æµ‹æ›´æ–°ã€‹</a></p>
<p><a href="https://juejin.cn/post/7237295525707530295" target="_blank" title="https://juejin.cn/post/7237295525707530295">ã€Šä¸€ä¸ªå…¬å‘Šæ»šåŠ¨æ’­æ”¾åŠŸèƒ½å¼•å‘çš„èƒŒåæ€è€ƒã€‹</a></p>
<p><a href="https://juejin.cn/post/7119498429117988872" target="_blank" title="https://juejin.cn/post/7119498429117988872">ã€Šå‰ç«¯å€¼å¾—å­¦ä¹ çš„å¼€æºsocketåº”ç”¨ã€‹</a></p></div></div>
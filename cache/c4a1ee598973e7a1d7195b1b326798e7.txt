
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/wcq520/p/18659188" title="发布于 2025-01-08 10:28">
    <span role="heading" aria-level="2">前端学习openLayers配合vue3（面的绘制，至少三个点）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h2>我们学习了点和线的绘制，当然我们也可以绘制一个面</h2>
<h3>关键代码，需要注意的一点就是面的绘制需要三维数组，线的绘制是个二维数组</h3>
<div class="cnblogs_code">
<pre> const polygonLayer = <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorLayer({
    source: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorSource(),
  });
  map.addLayer(polygonLayer);
  let feature </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Feature({
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">北京到上海武汉的经纬度 (三维数组)center是定义的以武汉为中心的变量</span>
    geometry: <span style="color: rgba(0, 0, 255, 1)">new</span> Polygon([[[...center], [116.46, 39.92], [121.47, 31.22<span style="color: rgba(0, 0, 0, 1)">]]]),
  });
  feature.setStyle(
    </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Style({
      stroke: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Stroke({
        color: </span>"green"<span style="color: rgba(0, 0, 0, 1)">,
        width: </span>5<span style="color: rgba(0, 0, 0, 1)">,
      }),
      fill: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Fill({
        color: </span>"rgba(255, 255, 0, 0.5)"<span style="color: rgba(0, 0, 0, 1)">,
      }),
    })
  );
  polygonLayer.getSource().addFeature(feature);</span></pre>
</div>
<h3>效果展示</h3>
<p><img src="https://img2024.cnblogs.com/blog/2228494/202501/2228494-20250108102819846-1984283249.png" alt="" loading="lazy"></p>
<h3>&nbsp;完整代码</h3>
<div class="cnblogs_code">
<pre>&lt;script setup&gt;<span style="color: rgba(0, 0, 0, 1)">
import { onMounted, reactive, ref } from </span>"vue"<span style="color: rgba(0, 0, 0, 1)">;
import { Feature, Map, View } from </span>"ol"<span style="color: rgba(0, 0, 0, 1)">;
import TileLayer from </span>"ol/layer/Tile"<span style="color: rgba(0, 0, 0, 1)">;
import { OSM, XYZ } from </span>"ol/source"<span style="color: rgba(0, 0, 0, 1)">;
import { fromLonLat } from </span>"ol/proj"<span style="color: rgba(0, 0, 0, 1)">;
import VectorLayer from </span>"ol/layer/Vector"<span style="color: rgba(0, 0, 0, 1)">;
import VectorSource from </span>"ol/source/Vector"<span style="color: rgba(0, 0, 0, 1)">;
import GeoJSON from </span>"ol/format/GeoJSON"<span style="color: rgba(0, 0, 0, 1)">;
import Style from </span>"ol/style/Style"<span style="color: rgba(0, 0, 0, 1)">;
import Fill from </span>"ol/style/Fill"<span style="color: rgba(0, 0, 0, 1)">;
import Stroke from </span>"ol/style/Stroke"<span style="color: rgba(0, 0, 0, 1)">;
import Icon from </span>"ol/style/Icon"<span style="color: rgba(0, 0, 0, 1)">;
import { LineString, Point, Polygon } from </span>"ol/geom"<span style="color: rgba(0, 0, 0, 1)">;
import { Circle } from </span>"ol/style"<span style="color: rgba(0, 0, 0, 1)">;

defineProps({
  msg: String,
});
let map </span>=<span style="color: rgba(0, 0, 0, 1)"> reactive({});
let view </span>=<span style="color: rgba(0, 0, 0, 1)"> reactive({});
</span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> let count=ref(0)</span><span style="color: rgba(0, 128, 0, 1)">
//</span><span style="color: rgba(0, 128, 0, 1)"> let center=[114.305469, 30.592876];</span>
let center = reactive([114.305469, 30.592876<span style="color: rgba(0, 0, 0, 1)">]);
onMounted(() </span>=&gt;<span style="color: rgba(0, 0, 0, 1)"> {
  initMap();
});
let initMap </span>= () =&gt;<span style="color: rgba(0, 0, 0, 1)"> {
  (view </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> View({
    center,
    zoom: </span>5<span style="color: rgba(0, 0, 0, 1)">,
    projection: </span>"EPSG:4326"<span style="color: rgba(0, 0, 0, 1)">,
  })),
    (map </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Map({
      target: </span>"map", <span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">挂载视图的容器</span>
<span style="color: rgba(0, 0, 0, 1)">      layers: [
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">瓦片图层source第三方，或者自带的,地图的底层</span>
        <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> TileLayer({
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> source: new OSM(),//内置的国外地址，需要代理</span>
          source: <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> XYZ({
            url: </span>"http://wprd0{1-4}.is.autonavi.com/appmaptile?x={x}&amp;y={y}&amp;z={z}&amp;lang=zh_cn&amp;size=1&amp;scl=1&amp;style=7"<span style="color: rgba(0, 0, 0, 1)">,
          }), </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">国内第三方数据源</span>
<span style="color: rgba(0, 0, 0, 1)">        }),
        </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)"> 矢量图层</span>
        <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorLayer({
          source: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorSource({
            url: </span>"https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json"<span style="color: rgba(0, 0, 0, 1)">,
            format: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> GeoJSON(),
          }),
          </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">填充颜色</span>
          style: <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Style({
            fill: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Fill({
              color: </span>"rgba(255, 0, 0, 0.5)"<span style="color: rgba(0, 0, 0, 1)">,
            }),
            stroke: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Stroke({
              color: </span>"black"<span style="color: rgba(0, 0, 0, 1)">,
              width: </span>1<span style="color: rgba(0, 0, 0, 1)">,
            }),
          }),
        }),
      ],

      </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">视图</span>
<span style="color: rgba(0, 0, 0, 1)">      view: view,
    }));

  const polygonLayer </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorLayer({
    source: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> VectorSource(),
  });
  map.addLayer(polygonLayer);
  let feature </span>= <span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Feature({
    </span><span style="color: rgba(0, 128, 0, 1)">//</span><span style="color: rgba(0, 128, 0, 1)">北京到上海武汉的经纬度 (三维数组)</span>
    geometry: <span style="color: rgba(0, 0, 255, 1)">new</span> Polygon([[[...center], [116.46, 39.92], [121.47, 31.22<span style="color: rgba(0, 0, 0, 1)">]]]),
  });
  feature.setStyle(
    </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Style({
      stroke: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Stroke({
        color: </span>"green"<span style="color: rgba(0, 0, 0, 1)">,
        width: </span>5<span style="color: rgba(0, 0, 0, 1)">,
      }),
      fill: </span><span style="color: rgba(0, 0, 255, 1)">new</span><span style="color: rgba(0, 0, 0, 1)"> Fill({
        color: </span>"rgba(255, 255, 0, 0.5)"<span style="color: rgba(0, 0, 0, 1)">,
      }),
    })
  );
  polygonLayer.getSource().addFeature(feature);
};
</span>&lt;/script&gt;

&lt;template&gt;
  &lt;div id="map"&gt;
    &lt;div class="btns"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;<span style="color: rgba(0, 0, 0, 1)">
.btns {
  display: flex;
  position: fixed;
  left: 20px;
  bottom: 20px;

  z</span>-index: 999<span style="color: rgba(0, 0, 0, 1)">;
}
.btns div {
  width: 100px;
  height: 40px;
  display: flex;
  justify</span>-<span style="color: rgba(0, 0, 0, 1)">content: center;
  align</span>-<span style="color: rgba(0, 0, 0, 1)">items: center;
  cursor: pointer;
}
.read</span>-the-<span style="color: rgba(0, 0, 0, 1)">docs {
  color: #</span>888<span style="color: rgba(0, 0, 0, 1)">;
}
#map {
  margin: </span>0<span style="color: rgba(0, 0, 0, 1)">;
  width: 100vw;
  height: 100vh;
}
</span>&lt;/style&gt;</pre>
</div>
<p>&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.012149096505787037" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-01-08 10:29">2025-01-08 10:28</span>&nbsp;
<a href="https://www.cnblogs.com/wcq520">blackAge</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18659188" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18659188);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18659188', targetLink: 'https://www.cnblogs.com/wcq520/p/18659188', title: '前端学习openLayers配合vue3（面的绘制，至少三个点）' })">举报</a>
</div>
        
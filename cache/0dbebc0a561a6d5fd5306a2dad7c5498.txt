
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/iRuriCatt/p/18636389" title="å‘å¸ƒäº 2024-12-30 17:02">
    <span role="heading" aria-level="2">Ajaxå…¥é—¨ä»¥åŠAxiosçš„è¯¦ç»†ä½¿ç”¨ï¼ˆå«Promiseï¼‰</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1-æ¦‚è¿°">1. æ¦‚è¿°</h2>
<h3 id="11-æ˜¯ä»€ä¹ˆ">1.1 æ˜¯ä»€ä¹ˆ</h3>
<ul>
<li>
<p>Ajax = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰</p>
</li>
<li>
<p>Ajax ä¸æ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯</p>
</li>
<li>
<p>Ajax æœ€å¤§çš„ä¼˜ç‚¹æ˜¯åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ï¼Œä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°</p>
</li>
<li>
<p>ä¼ ç»Ÿçš„ç½‘é¡µï¼ˆä¸ä½¿ç”¨ Ajaxï¼‰å¦‚æœéœ€è¦æ›´æ–°å†…å®¹ï¼Œå¿…éœ€é‡è½½æ•´ä¸ªç½‘é¡µ</p>
</li>
<li>
<p>Ajax ä¸éœ€è¦ä»»ä½•æµè§ˆå™¨æ’ä»¶ï¼Œä½†éœ€è¦ç”¨æˆ·å…è®¸ JavaScript åœ¨æµè§ˆå™¨ä¸Šæ‰§è¡Œ</p>
</li>
<li>
<p><code>XMLHttpRequest</code>åªæ˜¯å®ç° Ajax çš„ä¸€ç§æ–¹å¼</p>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165120117-1194109519.png" alt="" loading="lazy"></p>
<h3 id="12-ä¸ºä»€ä¹ˆ">1.2 ä¸ºä»€ä¹ˆ</h3>
<ul>
<li>
<p>ä»¥å‰æ•°æ®éƒ½æ˜¯å†™åœ¨ä»£ç é‡Œå›ºå®šçš„, æ— æ³•éšæ—¶å˜åŒ–</p>
</li>
<li>
<p>ç°åœ¨æ•°æ®å¯ä»¥ä»æœåŠ¡å™¨ä¸Šè¿›è¡Œè·å–ï¼Œè®©æ•°æ®å˜æ´»</p>
</li>
</ul>
<h3 id="13-å…¥é—¨ç¨‹åº">1.3 å…¥é—¨ç¨‹åº</h3>
<ul>
<li>
<p>éœ€æ±‚ï¼šä»æœåŠ¡å™¨è·å–çœä»½åˆ—è¡¨æ•°æ®ï¼Œå±•ç¤ºåˆ°é¡µé¢ä¸Š</p>
</li>
<li>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å¼•å…¥ axios</li>
</ul>
<pre><code class="language-html">&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>åŸºæœ¬è¯­æ³•</li>
</ul>
<pre><code class="language-js">axios({
	url: "ç›®æ ‡èµ„æºåœ°å€",
}).then(result =&gt; {
	// å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç†
});
</code></pre>
</li>
<li>
<p>ç¤ºä¾‹</p>
</li>
</ul>
<pre><code class="language-html">&lt;div id="root"&gt;&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	axios({
		url: "http://hmajax.itheima.net/api/province",
	}).then(result =&gt; {
		document.querySelector("#root").innerHTML = result.data.list.join("&lt;br&gt;");
	});
&lt;/script&gt;
</code></pre>
<h2 id="2-axios">2. axios</h2>
<h3 id="21-url">2.1 URL</h3>
<ul>
<li>
<p><strong>URLï¼š</strong>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œç®€ç§°ç½‘å€ï¼Œç”¨äºå®šä½ç½‘ç»œä¸­çš„èµ„æºï¼ˆç½‘é¡µï¼Œå›¾ç‰‡ï¼Œæ•°æ®ï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘ç­‰ï¼‰</p>
</li>
<li>
<p><strong>ç»„æˆï¼š</strong>åè®®ï¼ŒåŸŸåï¼Œèµ„æºè·¯å¾„ï¼ˆæ¯”è¾ƒé‡è¦çš„ä¸‰éƒ¨åˆ†ï¼‰</p>
</li>
<li>
<p><strong>http åè®®ï¼š</strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè§„å®šäº†æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¼ é€’æ•°æ®çš„æ ¼å¼</p>
</li>
<li>
<p><strong>åŸŸåï¼š</strong>æ ‡è®°æœåŠ¡å™¨åœ¨äº’è”ç½‘å½“ä¸­çš„æ–¹ä½ï¼Œç½‘ç»œä¸­æœ‰å¾ˆå¤šæœåŠ¡å™¨ï¼Œä½ æƒ³è®¿é—®å“ªä¸€å°ï¼Œéœ€è¦çŸ¥é“å®ƒçš„åŸŸå</p>
</li>
<li>
<p><strong>èµ„æºè·¯å¾„ï¼š</strong>ä¸€ä¸ªæœåŠ¡å™¨å†…æœ‰å¤šä¸ªèµ„æºï¼Œç”¨äºæ ‡è¯†ä½ è¦è®¿é—®çš„èµ„æºå…·ä½“çš„ä½ç½®</p>
</li>
</ul>
<img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165225749-1795207028.png" style="zoom: 67%">
<ul>
<li>
<p><strong>æŸ¥è¯¢å‚æ•°ï¼š</strong>æºå¸¦ç»™æœåŠ¡å™¨é¢å¤–ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è¿”å›æƒ³è¦çš„æŸä¸€éƒ¨åˆ†æ•°æ®è€Œä¸æ˜¯å…¨éƒ¨æ•°æ®</p>
<ul>
<li>
<p>æ ¼å¼ï¼š<code>http://xxxx.com/xxx/xxx?å‚æ•°å1=å€¼1&amp;å‚æ•°å2=å€¼2</code></p>
</li>
<li>
<p>å‚æ•°åä¸€èˆ¬æ˜¯åç«¯è§„å®šçš„ï¼Œå€¼å‰ç«¯çœ‹æƒ…å†µä¼ é€’å³å¯</p>
</li>
</ul>
</li>
<li>
<p>axios å¦‚ä½•æºå¸¦æŸ¥è¯¢å‚æ•°ï¼Ÿ</p>
</li>
</ul>
<pre><code class="language-js">axios({
	url: "ç›®æ ‡èµ„æºåœ°å€",
	params: {
		å‚æ•°å: å€¼,
	},
}).then(result =&gt; {
	// å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç†
});
</code></pre>
<ul>
<li>ç¤ºä¾‹ 1ï¼šè·å–â€œæ²³åŒ—çœâ€ä¸‹å±çš„åŸå¸‚åˆ—è¡¨</li>
</ul>
<pre><code class="language-html">&lt;div id="root"&gt;&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	axios({
		url: "http://hmajax.itheima.net/api/city",
		params: {
			pname: "æ²³åŒ—çœ",
		},
	}).then(result =&gt; {
		document.querySelector("#root").innerHTML = result.data.list.join("&lt;br&gt;");
	});
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ 2ï¼šæ ¹æ®è¾“å…¥çš„çœä»½åå­—å’ŒåŸå¸‚åå­—ï¼ŒæŸ¥è¯¢ä¸‹å±åœ°åŒºåˆ—è¡¨</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165253784-1061360737.png" alt="" loading="lazy"></p>
<pre><code class="language-html">&lt;!-- æ ·å¼ --&gt;
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" /&gt;
&lt;style&gt;
	#root {
		font-size: 15px;
	}

	body {
		padding-top: 15px;
	}
&lt;/style&gt;

&lt;div class="container"&gt;
	&lt;form id="editForm" class="row"&gt;
		&lt;!-- è¾“å…¥çœä»½åå­— --&gt;
		&lt;div class="mb-3 col"&gt;
			&lt;label class="form-label"&gt;çœä»½åå­—&lt;/label&gt;
			&lt;input type="text" value="åŒ—äº¬" name="province" class="form-control province" placeholder="è¯·è¾“å…¥çœä»½åç§°" /&gt;
		&lt;/div&gt;
		&lt;!-- è¾“å…¥åŸå¸‚åå­— --&gt;
		&lt;div class="mb-3 col"&gt;
			&lt;label class="form-label"&gt;åŸå¸‚åå­—&lt;/label&gt;
			&lt;input type="text" value="åŒ—äº¬å¸‚" name="city" class="form-control city" placeholder="è¯·è¾“å…¥åŸå¸‚åç§°" /&gt;
		&lt;/div&gt;
	&lt;/form&gt;
	&lt;button type="button" class="btn btn-primary sel-btn"&gt;æŸ¥è¯¢&lt;/button&gt;
	&lt;br /&gt;
	&lt;br /&gt;
	&lt;p&gt;åœ°åŒºåˆ—è¡¨:&lt;/p&gt;
	&lt;ul class="list-group"&gt;
		&lt;!-- ç¤ºä¾‹åœ°åŒº --&gt;
		&lt;!-- &lt;li class="list-group-item"&gt;ä¸œåŸåŒº&lt;/li&gt; --&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	/*
      è·å–åœ°åŒºåˆ—è¡¨: http://hmajax.itheima.net/api/area
      æŸ¥è¯¢å‚æ•°:
        pname: çœä»½æˆ–ç›´è¾–å¸‚åå­—
        cname: åŸå¸‚åå­—
    */
	// ç»‘å®šç‚¹å‡»äº‹ä»¶
	document.querySelector(".sel-btn").addEventListener("click", () =&gt; {
		// è·å–è¾“å…¥æ¡†çš„å€¼
		let pName = document.querySelector(".province").value;
		let cName = document.querySelector(".city").value;

		// åˆ©ç”¨axiosè·å–æ•°æ®
		axios({
			url: "http://hmajax.itheima.net/api/area",
			params: {
				pname: pName,
				cname: cName,
			},
		}).then(result =&gt; {
			document.querySelector(".list-group").innerHTML = result.data.list
				.map(item =&gt; `&lt;li class="list-group-item"&gt;${item}&lt;/li&gt;`)
				.join("");
		});
	});
&lt;/script&gt;
</code></pre>
<h3 id="22-æ•°æ®æäº¤">2.2 æ•°æ®æäº¤</h3>
<ul>
<li>å¸¸ç”¨è¯·æ±‚æ–¹æ³•</li>
</ul>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹æ³•</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>è·å–æ•°æ®ï¼ˆé»˜è®¤è¯·æ±‚æ–¹å¼ï¼‰</td>
</tr>
<tr>
<td>POST</td>
<td>æäº¤æ•°æ®</td>
</tr>
<tr>
<td>PUT</td>
<td>ä¿®æ”¹æ•°æ®ï¼ˆå…¨éƒ¨ï¼‰</td>
</tr>
<tr>
<td>DELETE</td>
<td>åˆ é™¤æ•°æ®</td>
</tr>
<tr>
<td>PATCH</td>
<td>ä¿®æ”¹æ•°æ®ï¼ˆéƒ¨åˆ†ï¼‰</td>
</tr>
</tbody>
</table>
<ul>
<li>axios å¦‚ä½•æäº¤æ•°æ®åˆ°æœåŠ¡å™¨</li>
</ul>
<pre><code class="language-js">axios({
	url: "ç›®æ ‡èµ„æºåœ°å€",
	method: "è¯·æ±‚æ–¹æ³•",
	data: {
		å‚æ•°å: å€¼,
	},
}).then(result =&gt; {
	// å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç†
});
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šæ³¨å†Œè´¦å·ï¼Œæäº¤ç”¨æˆ·åå’Œå¯†ç åˆ°æœåŠ¡å™¨ä¿å­˜</li>
</ul>
<pre><code class="language-html">&lt;button&gt;ç‚¹å‡»æ³¨å†Œ&lt;/button&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	document.querySelector("button").addEventListener("click", () =&gt; {
		axios({
			url: "http://hmajax.itheima.net/api/register",
			method: "post",
			data: {
				username: "itheima666",
				password: "12345678",
			},
		}).then(result =&gt; {
			console.log(result);
		});
	});
&lt;/script&gt;
</code></pre>
<img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165323904-994007089.png" style="zoom: 80%">
<h3 id="23-axios-é”™è¯¯å¤„ç†">2.3 axios é”™è¯¯å¤„ç†</h3>
<pre><code class="language-js">axios({
	// ...è¯·æ±‚é€‰é¡¹
})
	.then(result =&gt; {
		// å¤„ç†æˆåŠŸæ•°æ®
	})
	.catch(error =&gt; {
		// å¤„ç†å¤±è´¥é”™è¯¯
	});
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="language-html">&lt;button&gt;ç‚¹å‡»æ³¨å†Œ&lt;/button&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	document.querySelector("button").addEventListener("click", () =&gt; {
		axios({
			url: "http://hmajax.itheima.net/api/register",
			method: "post",
			data: {
				username: "itheima666",
				password: "12345678",
			},
		})
			.then(result =&gt; {
				console.log(result);
			})
			.catch(error =&gt; {
				alert(error.response.data.message);
			});
	});
&lt;/script&gt;
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165349067-361141553.png" alt="" loading="lazy"></p>
<h3 id="24-æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•">2.4 æ¡ˆä¾‹-ç”¨æˆ·ç™»å½•</h3>
<ul>
<li>æ ·å¼</li>
</ul>
<pre><code class="language-html">&lt;!-- å¼•å…¥bootstrap.css --&gt;
&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" /&gt;
&lt;!-- å…¬å…± --&gt;
&lt;style&gt;
	html,
	body {
		background-color: #edf0f5;
		width: 100%;
		height: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
	}

	.container {
		width: 520px;
		height: 540px;
		background-color: #fff;
		padding: 60px;
		box-sizing: border-box;
	}

	.container h3 {
		font-weight: 900;
	}
&lt;/style&gt;
&lt;!-- è¡¨å•å®¹å™¨å’Œå†…å®¹ --&gt;
&lt;style&gt;
	.form_wrap {
		color: #8b929d !important;
	}

	.form-text {
		color: #8b929d !important;
	}
&lt;/style&gt;
&lt;!-- æç¤ºæ¡†æ ·å¼ --&gt;
&lt;style&gt;
	.alert {
		transition: 0.5s;
		opacity: 0;
	}

	.alert.show {
		opacity: 1;
	}
&lt;/style&gt;
</code></pre>
<ul>
<li>æ¡†æ¶</li>
</ul>
<pre><code class="language-html">&lt;div class="container"&gt;
	&lt;h3&gt;æ¬¢è¿-ç™»å½•&lt;/h3&gt;
	&lt;!-- ç™»å½•ç»“æœ-æç¤ºæ¡† --&gt;
	&lt;div class="alert alert-success" role="alert"&gt;
		&lt;!-- æç¤ºæ¶ˆæ¯ --&gt;
	&lt;/div&gt;
	&lt;!-- è¡¨å• --&gt;
	&lt;div class="form_wrap"&gt;
		&lt;form&gt;
			&lt;div class="mb-3"&gt;
				&lt;label for="username" class="form-label"&gt;è´¦å·å&lt;/label&gt;
				&lt;input type="text" class="form-control username" /&gt;
			&lt;/div&gt;
			&lt;div class="mb-3"&gt;
				&lt;label for="password" class="form-label"&gt;å¯†ç &lt;/label&gt;
				&lt;input type="password" class="form-control password" /&gt;
			&lt;/div&gt;
			&lt;button type="button" class="btn btn-primary btn-login"&gt;ç™» å½•&lt;/button&gt;
		&lt;/form&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	// ç›®æ ‡1ï¼šç‚¹å‡»ç™»å½•æ—¶ï¼Œç”¨æˆ·åå’Œå¯†ç é•¿åº¦åˆ¤æ–­ï¼Œå¹¶æäº¤æ•°æ®å’ŒæœåŠ¡å™¨é€šä¿¡
	function alertFn(msg, isSuccess) {
		// æ˜¾ç¤ºæç¤ºæ¡†
		let myAlert = document.querySelector(".alert");
		myAlert.classList.add("show");
		// æ›´æ¢æ ·å¼
		let bgc = isSuccess ? "alert-success" : "alert-danger";
		myAlert.classList.add(bgc);
		// æ‰“å°ä¿¡æ¯
		myAlert.innerText = msg;
		// 2såè‡ªåŠ¨æ¶ˆå¤±
		setTimeout(() =&gt; {
			myAlert.classList.remove("show");
			// é‡ç½®èƒŒæ™¯è‰²ï¼Œé¿å…ç±»åå†²çª
			myAlert.classList.remove(bgc);
		}, 2000);
	}
	document.querySelector(".btn-login").addEventListener("click", () =&gt; {
		let username = document.querySelector(".username").value;
		let password = document.querySelector(".password").value;

		if (username.length &lt; 8) {
			// console.log('ç”¨æˆ·åä¸èƒ½å°‘äº8ä¸ªå­—ç¬¦')
			alertFn("ç”¨æˆ·åä¸èƒ½å°‘äº8ä¸ªå­—ç¬¦", false);
			return;
		}
		if (password &lt; 6) {
			// console.log('å¯†ç ä¸èƒ½å°‘äº6ä¸ªå­—ç¬¦')
			alertFn("å¯†ç ä¸èƒ½å°‘äº6ä¸ªå­—ç¬¦", false);
			return;
		}

		axios({
			url: "http://hmajax.itheima.net/api/login",
			method: "post",
			data: {
				username,
				password,
			},
		})
			.then(result =&gt; {
				// alert(result.data.message)
				alertFn(result.data.message, true);
			})
			.catch(error =&gt; {
				// alert(error.response.data.message)
				alertFn(error.response.data.message, false);
			});
	});
&lt;/script&gt;
</code></pre>
<h3 id="25-form-serialize-æ’ä»¶">2.5 form-serialize æ’ä»¶</h3>
<blockquote>
<p>å¿«é€Ÿæ”¶é›†ç›®æ ‡è¡¨å•èŒƒå›´å†…è¡¨å•å…ƒç´ çš„å€¼</p>
</blockquote>
<ul>
<li>
<p>å¼•å…¥ form-serialize æ’ä»¶</p>
</li>
<li>
<p>ä½¿ç”¨ serialize å‡½æ•°</p>
<ul>
<li>
<p>å‚æ•° 1ï¼šè¦è·å–çš„ form è¡¨å•æ ‡ç­¾å¯¹è±¡ï¼ˆè¦æ±‚è¡¨å•å…ƒç´ æœ‰ name å±æ€§ï¼Œç”¨æ¥ä½œä¸ºæ”¶é›†çš„æ•°æ®ä¸­å±æ€§åï¼‰</p>
</li>
<li>
<p>å‚æ•° 2ï¼šé…ç½®å¯¹è±¡</p>
<ul>
<li>
<p>hashï¼š</p>
<ul>
<li>
<p>true - æ”¶é›†å‡ºæ¥çš„æ˜¯ä¸€ä¸ª JS å¯¹è±¡</p>
</li>
<li>
<p>false - æ”¶é›†å‡ºæ¥çš„æ˜¯ä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²</p>
</li>
</ul>
</li>
<li>
<p>emptyï¼š</p>
<ul>
<li>
<p>true - æ”¶é›†ç©ºå€¼</p>
</li>
<li>
<p>false - ä¸æ”¶é›†ç©ºå€¼</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ï¼šæ”¶é›†ç™»å½•è¡¨å•é‡Œç”¨æˆ·åå’Œå¯†ç </p>
</li>
</ul>
<pre><code class="language-html">&lt;form action="javascript:;" class="example-form"&gt;
	&lt;input type="text" name="uname" /&gt;
	&lt;br /&gt;
	&lt;input type="text" name="pwd" /&gt;
	&lt;br /&gt;
	&lt;input type="button" class="btn" value="æäº¤" /&gt;
&lt;/form&gt;
&lt;!-- 
ç›®æ ‡ï¼šåœ¨ç‚¹å‡»æäº¤æ—¶ï¼Œä½¿ç”¨form-serializeæ’ä»¶ï¼Œå¿«é€Ÿæ”¶é›†è¡¨å•å…ƒç´ å€¼
--&gt;
&lt;script src="./form-serialize.js"&gt;&lt;/script&gt;
&lt;script&gt;
	document.querySelector(".btn").addEventListener("click", () =&gt; {
		const form = document.querySelector(".example-form");
		const data = serialize(form, { hash: true, empty: true });
		console.log(data);
	});
&lt;/script&gt;
</code></pre>
<h3 id="26-bootstrap-å¼¹æ¡†">2.6 Bootstrap å¼¹æ¡†</h3>
<h4 id="261-å±æ€§æ§åˆ¶">2.6.1 å±æ€§æ§åˆ¶</h4>
<ul>
<li>
<p>å¼•å…¥ bootstrap.css å’Œ bootstrap.js</p>
</li>
<li>
<p>å‡†å¤‡å¼¹æ¡†æ ‡ç­¾ï¼Œç¡®è®¤ç»“æ„ï¼ˆå¯ä»¥ä» Bootstrap å®˜æ–¹æ–‡æ¡£çš„ Modal é‡Œå¤åˆ¶åŸºç¡€ä¾‹å­ï¼‰- è¿è¡Œåˆ°ç½‘é¡µåï¼Œé€ä¸€å¯¹åº”æ ‡ç­¾å’Œå¼¹æ¡†æ¯ä¸ªéƒ¨åˆ†å¯¹åº”å…³ç³»</p>
</li>
<li>
<p>é€šè¿‡è‡ªå®šä¹‰å±æ€§ï¼Œé€šçŸ¥å¼¹æ¡†çš„æ˜¾ç¤ºå’Œéšè—ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<pre><code class="language-html">&lt;button data-bs-toggle="modal" data-bs-target="cssé€‰æ‹©å™¨"&gt;æ˜¾ç¤ºå¼¹æ¡†&lt;/button&gt;

&lt;button data-bs-dismiss="modal"&gt;Close&lt;/button&gt;
</code></pre>
<ul>
<li>ä»£ç å®ç°</li>
</ul>
<pre><code class="language-html">&lt;!-- 
ç›®æ ‡ï¼šä½¿ç”¨Bootstrapå¼¹æ¡†
1. å¼•å…¥bootstrap.csså’Œbootstrap.js
2. å‡†å¤‡å¼¹æ¡†æ ‡ç­¾ï¼Œç¡®è®¤ç»“æ„
3. é€šè¿‡è‡ªå®šä¹‰å±æ€§ï¼Œæ§åˆ¶å¼¹æ¡†çš„æ˜¾ç¤ºå’Œéšè—
--&gt;
&lt;button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target=".mybox"&gt;æ˜¾ç¤ºå¼¹æ¡†&lt;/button&gt;

&lt;div class="modal mybox" tabindex="-1"&gt;
	&lt;div class="modal-dialog"&gt;
		&lt;div class="modal-content"&gt;
			&lt;div class="modal-header"&gt;
				&lt;h5 class="modal-title"&gt;Modal title&lt;/h5&gt;
				&lt;button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
			&lt;/div&gt;
			&lt;div class="modal-body"&gt;
				&lt;p&gt;Modal body text goes here.&lt;/p&gt;
			&lt;/div&gt;
			&lt;div class="modal-footer"&gt;
				&lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;Close&lt;/button&gt;
				&lt;button type="button" class="btn btn-primary"&gt;Save changes&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h4 id="262-js-æ§åˆ¶">2.6.2 js æ§åˆ¶</h4>
<ul>
<li>
<p>ä¸ºä»€ä¹ˆéœ€è¦ js æ–¹å¼æ§åˆ¶ï¼Ÿ</p>
<ul>
<li>å½“æ˜¾ç¤º/éšè—ä¹‹å‰ï¼Œéœ€è¦æ‰§è¡Œä¸€äº› JS é€»è¾‘ä»£ç ï¼Œå°±éœ€è¦å¼•å…¥ JS æ§åˆ¶å¼¹æ¡†æ˜¾ç¤º/éšè—çš„æ–¹å¼</li>
</ul>
</li>
<li>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p>ç‚¹å‡»ç¼–è¾‘å§“åæŒ‰é’®ï¼Œåœ¨å¼¹æ¡†æ˜¾ç¤ºä¹‹å‰ï¼Œåœ¨è¾“å…¥æ¡†å¡«å…¥é»˜è®¤å§“å</p>
</li>
<li>
<p>ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œåœ¨å¼¹æ¡†éšè—ä¹‹å‰ï¼Œè·å–ç”¨æˆ·å¡«å…¥çš„åå­—å¹¶æ‰“å°</p>
</li>
</ul>
</li>
</ul>
<img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165417151-561606923.png" style="zoom: 67%">
<ul>
<li>è¯­æ³•</li>
</ul>
<pre><code class="language-js">// åˆ›å»ºå¼¹æ¡†å¯¹è±¡
const modalDom = document.querySelector("cssé€‰æ‹©å™¨");
const modal = new bootstrap.Modal(modelDom);

// æ˜¾ç¤ºå¼¹æ¡†
modal.show();
// éšè—å¼¹æ¡†
modal.hide();
</code></pre>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<pre><code class="language-html">&lt;!-- 
ç›®æ ‡ï¼šä½¿ç”¨JSæ§åˆ¶å¼¹æ¡†ï¼Œæ˜¾ç¤ºå’Œéšè—
1. åˆ›å»ºå¼¹æ¡†å¯¹è±¡
2. è°ƒç”¨å¼¹æ¡†å¯¹è±¡å†…ç½®æ–¹æ³•
.show() æ˜¾ç¤º
.hide() éšè—
--&gt;
&lt;button type="button" class="btn btn-primary edit-btn"&gt;ç¼–è¾‘å§“å&lt;/button&gt;

&lt;div class="modal name-box" tabindex="-1"&gt;
	&lt;div class="modal-dialog"&gt;
		&lt;div class="modal-content"&gt;
			&lt;div class="modal-header"&gt;
				&lt;h5 class="modal-title"&gt;è¯·è¾“å…¥å§“å&lt;/h5&gt;
				&lt;button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;
			&lt;/div&gt;
			&lt;div class="modal-body"&gt;
				&lt;form action=""&gt;
					&lt;span&gt;å§“åï¼š&lt;/span&gt;
					&lt;input type="text" class="username" /&gt;
				&lt;/form&gt;
			&lt;/div&gt;
			&lt;div class="modal-footer"&gt;
				&lt;button type="button" class="btn btn-secondary" data-bs-dismiss="modal"&gt;å–æ¶ˆ&lt;/button&gt;
				&lt;button type="button" class="btn btn-primary save-btn"&gt;ä¿å­˜&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;!-- å¼•å…¥bootstrap.js --&gt;
&lt;script src="./bootstrap.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	const modalBox = document.querySelector(".name-box");
	const modal = new bootstrap.Modal(modalBox);

	document.querySelector(".edit-btn").addEventListener("click", () =&gt; {
		document.querySelector(".username").value = "é»˜è®¤å§“å";
		modal.show();
	});

	document.querySelector(".save-btn").addEventListener("click", () =&gt; {
		const username = document.querySelector(".username").value;
		console.log("å°†æ•°æ®æäº¤åˆ°æœåŠ¡å™¨", username);
		modal.hide();
	});
&lt;/script&gt;
</code></pre>
<h3 id="27-æ¡ˆä¾‹-å›¾ä¹¦ç®¡ç†">2.7 æ¡ˆä¾‹-å›¾ä¹¦ç®¡ç†</h3>
<ul>
<li>
<p><a href="https://apifox.com/apidoc/shared-1b0dd84f-faa8-435d-b355-5a8a329e34a8" target="_blank" rel="noopener nofollow">é»‘é©¬æ¥å£æ–‡æ¡£</a></p>
</li>
<li>
<p>ç»“æ„</p>
</li>
</ul>
<pre><code class="language-html">&lt;!-- ä¸»ä½“åŒºåŸŸ --&gt;
&lt;div class="container"&gt;
	&lt;!-- å¤´éƒ¨æ ‡é¢˜å’Œæ·»åŠ æŒ‰é’® --&gt;
	&lt;div class="top"&gt;
		&lt;h3&gt;å›¾ä¹¦ç®¡ç†&lt;/h3&gt;
		&lt;button type="button" class="btn btn-primary plus-btn" data-bs-toggle="modal" data-bs-target=".add-modal"&gt;
			+ æ·»åŠ 
		&lt;/button&gt;
	&lt;/div&gt;
	&lt;!-- æ•°æ®åˆ—è¡¨ --&gt;
	&lt;table class="table"&gt;
		&lt;thead class="table-light"&gt;
			&lt;tr&gt;
				&lt;th style="width: 150px;"&gt;åºå·&lt;/th&gt;
				&lt;th&gt;ä¹¦å&lt;/th&gt;
				&lt;th&gt;ä½œè€…&lt;/th&gt;
				&lt;th&gt;å‡ºç‰ˆç¤¾&lt;/th&gt;
				&lt;th style="width: 180px;"&gt;æ“ä½œ&lt;/th&gt;
			&lt;/tr&gt;
		&lt;/thead&gt;
		&lt;tbody class="list"&gt;
			&lt;!-- &lt;tr&gt;
					&lt;td&gt;1&lt;/td&gt;
					&lt;td&gt;JavaScriptç¨‹åºè®¾è®¡&lt;/td&gt;
					&lt;td&gt;é©¬ç‰¹Â·å¼—é‡Œæ–¯æ¯”&lt;/td&gt;
					&lt;td&gt;äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾&lt;/td&gt;
					&lt;td&gt;
						&lt;span class="del"&gt;åˆ é™¤&lt;/span&gt;
						&lt;span class="edit"&gt;ç¼–è¾‘&lt;/span&gt;
					&lt;/td&gt;
			&lt;/tr&gt; --&gt;
		&lt;/tbody&gt;
	&lt;/table&gt;
&lt;/div&gt;
&lt;!-- æ–°å¢-å¼¹å‡ºæ¡† --&gt;
&lt;div class="modal fade add-modal"&gt;
	&lt;!-- ä¸­é—´ç™½è‰²åŒºåŸŸ --&gt;
	&lt;div class="modal-dialog"&gt;
		&lt;div class="modal-content"&gt;
			&lt;div class="modal-header top"&gt;
				&lt;span&gt;æ·»åŠ å›¾ä¹¦&lt;/span&gt;
				&lt;button type="button" class="btn-close" aria-label="Close" data-bs-dismiss="modal"&gt;&lt;/button&gt;
			&lt;/div&gt;
			&lt;div class="modal-body form-wrap"&gt;
				&lt;!-- æ–°å¢è¡¨å• --&gt;
				&lt;form class="add-form"&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="bookname" class="form-label"&gt;ä¹¦å&lt;/label&gt;
						&lt;input type="text" class="form-control bookname" placeholder="è¯·è¾“å…¥ä¹¦ç±åç§°" name="bookname" /&gt;
					&lt;/div&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="author" class="form-label"&gt;ä½œè€…&lt;/label&gt;
						&lt;input type="text" class="form-control author" placeholder="è¯·è¾“å…¥ä½œè€…åç§°" name="author" /&gt;
					&lt;/div&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="publisher" class="form-label"&gt;å‡ºç‰ˆç¤¾&lt;/label&gt;
						&lt;input type="text" class="form-control publisher" placeholder="è¯·è¾“å…¥å‡ºç‰ˆç¤¾åç§°" name="publisher" /&gt;
					&lt;/div&gt;
				&lt;/form&gt;
			&lt;/div&gt;
			&lt;div class="modal-footer btn-group"&gt;
				&lt;button type="button" class="btn btn-primary" data-bs-dismiss="modal"&gt;å–æ¶ˆ&lt;/button&gt;
				&lt;button type="button" class="btn btn-primary add-btn"&gt;ä¿å­˜&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;!-- ç¼–è¾‘-å¼¹å‡ºæ¡† --&gt;
&lt;div class="modal fade edit-modal"&gt;
	&lt;!-- ä¸­é—´ç™½è‰²åŒºåŸŸ --&gt;
	&lt;div class="modal-dialog"&gt;
		&lt;div class="modal-content"&gt;
			&lt;div class="modal-header top"&gt;
				&lt;span&gt;ç¼–è¾‘å›¾ä¹¦&lt;/span&gt;
				&lt;button type="button" class="btn-close" aria-label="Close" data-bs-dismiss="modal"&gt;&lt;/button&gt;
			&lt;/div&gt;
			&lt;div class="modal-body form-wrap"&gt;
				&lt;!-- ç¼–è¾‘è¡¨å• --&gt;
				&lt;form class="edit-form"&gt;
					&lt;!-- ä¿å­˜æ­£åœ¨ç¼–è¾‘çš„å›¾ä¹¦id,éšè—èµ·æ¥ï¼šæ— éœ€è®©ç”¨æˆ·ä¿®æ”¹ --&gt;
					&lt;input type="hidden" class="id" name="id" /&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="bookname" class="form-label"&gt;ä¹¦å&lt;/label&gt;
						&lt;input type="text" class="form-control bookname" placeholder="è¯·è¾“å…¥ä¹¦ç±åç§°" name="bookname" /&gt;
					&lt;/div&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="author" class="form-label"&gt;ä½œè€…&lt;/label&gt;
						&lt;input type="text" class="form-control author" placeholder="è¯·è¾“å…¥ä½œè€…åç§°" name="author" /&gt;
					&lt;/div&gt;
					&lt;div class="mb-3"&gt;
						&lt;label for="publisher" class="form-label"&gt;å‡ºç‰ˆç¤¾&lt;/label&gt;
						&lt;input type="text" class="form-control publisher" placeholder="è¯·è¾“å…¥å‡ºç‰ˆç¤¾åç§°" name="publisher" /&gt;
					&lt;/div&gt;
				&lt;/form&gt;
			&lt;/div&gt;
			&lt;div class="modal-footer btn-group"&gt;
				&lt;button type="button" class="btn btn-primary" data-bs-dismiss="modal"&gt;å–æ¶ˆ&lt;/button&gt;
				&lt;button type="button" class="btn btn-primary edit-btn"&gt;ä¿®æ”¹&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.bootcdn.net/ajax/libs/axios/1.2.0/axios.min.js"&gt;&lt;/script&gt;
&lt;script src="./lib/form-serialize.js"&gt;&lt;/script&gt;
&lt;script src="./lib/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;!-- æ ¸å¿ƒé€»è¾‘ --&gt;
&lt;script src="./js/index.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>
<p>index.js</p>
</li>
<li>
<p>æ¸²æŸ“å›¾ä¹¦åˆ—è¡¨</p>
</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡1ï¼šæ¸²æŸ“å›¾ä¹¦åˆ—è¡¨
 *  1.1 è·å–æ•°æ®
 *  1.2 æ¸²æŸ“æ•°æ®
 */

const creator = "è€æ";

function getBooksList() {
	// 1.1 è·å–æ•°æ®
	axios({
		url: "http://hmajax.itheima.net/api/books",
		params: {
			creator,
		},
	}).then(result =&gt; {
		// console.log(result.data.data)
		// 1.2 æ¸²æŸ“æ•°æ®
		const list = result.data.data
			.map((item, index) =&gt; {
				return `
                &lt;tr&gt;
                    &lt;td&gt;${index + 1}&lt;/td&gt;
                    &lt;td&gt;${item.bookname}&lt;/td&gt;
                    &lt;td&gt;${item.author}&lt;/td&gt;
                    &lt;td&gt;${item.publisher}&lt;/td&gt;
                    &lt;td data-id=${item.id}&gt;
                        &lt;span class="del"&gt;åˆ é™¤&lt;/span&gt;
                        &lt;span class="edit"&gt;ç¼–è¾‘&lt;/span&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            `;
			})
			.join("");
		document.querySelector(".list").innerHTML = list;
	});
}

getBooksList();
</code></pre>
<ul>
<li>æ–°å¢å›¾ä¹¦</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡2ï¼šæ–°å¢å›¾ä¹¦
 *  2.1æ–°å¢å¼¹æ¡†-&gt;æ˜¾ç¤ºå’Œéšè—
 *  2.2æ”¶é›†è¡¨å•æ•°æ®ï¼Œå¹¶æäº¤åˆ°æœåŠ¡å™¨ä¿å­˜
 *  2.3åˆ·æ–°å›¾ä¹¦åˆ—è¡¨
 */
const addModalDom = document.querySelector(".add-modal");
const addModal = new bootstrap.Modal(addModalDom);

// 2.1 æ–°å¢å¼¹æ¡†-&gt;æ˜¾ç¤ºå’Œéšè—
document.querySelector(".add-btn").addEventListener("click", () =&gt; {
	// 2.2 è·å–è¾“å…¥æ¡†çš„æ•°æ®
	const addForm = document.querySelector(".add-form");
	const formData = serialize(addForm, { hash: true, empty: true });
	console.log(formData);

	// 2.3 æäº¤åˆ°æœåŠ¡å™¨ä¿å­˜
	axios({
		url: "http://hmajax.itheima.net/api/books",
		method: "post",
		data: {
			...formData,
			creator,
		},
	}).then(result =&gt; {
		console.log(result);
		// 2.4 é‡æ–°æ¸²æŸ“é¡µé¢
		getBooksList();
		// é‡ç½®è¡¨å•
		addForm.reset();
		// ç‚¹å‡»ä¿å­˜ï¼Œéšè—æ¨¡æ€æ¡†
		addModal.hide();
	});
});
</code></pre>
<ul>
<li>åˆ é™¤å›¾ä¹¦</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡3ï¼šåˆ é™¤å›¾ä¹¦
 *  3.1åˆ é™¤å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶-&gt;è·å–å›¾ä¹¦id
 *  3.2è°ƒç”¨åˆ é™¤æ¥å£
 *  3.3åˆ·æ–°å›¾ä¹¦åˆ—è¡¨
 */
// 3.1 åˆ é™¤å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰-&gt;è·å–å›¾ä¹¦id
document.querySelector(".list").addEventListener("click", e =&gt; {
	if (e.target.classList.contains("del")) {
		const theId = e.target.parentNode.dataset.id;

		// 3.2 è°ƒç”¨åˆ é™¤æ¥å£
		axios({
			url: `http://hmajax.itheima.net/api/books/${theId}`,
			method: "delete",
		}).then(() =&gt; {
			// 3.3 åˆ·æ–°å›¾ä¹¦åˆ—è¡¨
			getBooksList();
		});
	}
});
</code></pre>
<ul>
<li>ç¼–è¾‘å›¾ä¹¦</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡4ï¼šç¼–è¾‘å›¾ä¹¦
 *  4.1ç¼–è¾‘å¼¹æ¡†-&gt;æ˜¾ç¤ºå’Œéšè—
 *  4.2è·å–å½“å‰ç¼–è¾‘å›¾ä¹¦æ•°æ®-&gt;å›æ˜¾åˆ°ç¼–è¾‘è¡¨å•ä¸­
 *  4.3æäº¤ä¿å­˜ä¿®æ”¹ï¼Œå¹¶åˆ·æ–°åˆ—è¡¨
 */
const editModalDom = document.querySelector(".edit-modal");
const editModal = new bootstrap.Modal(editModalDom);

document.querySelector(".list").addEventListener("click", e =&gt; {
	if (e.target.classList.contains("edit")) {
		const theId = e.target.parentNode.dataset.id;
		// 4.2 è·å–å½“å‰ç¼–è¾‘å›¾ä¹¦æ•°æ®-&gt;å›æ˜¾åˆ°ç¼–è¾‘è¡¨å•ä¸­
		axios({
			url: `http://hmajax.itheima.net/api/books/${theId}`,
			method: "get",
		}).then(result =&gt; {
			// æ•°æ®å¯¹è±¡"å±æ€§"å’Œæ ‡ç­¾"ç±»å"ä¸€è‡´
			// éå†æ•°æ®å¯¹è±¡ï¼Œä½¿ç”¨å±æ€§å»è·å–å¯¹åº”çš„æ ‡ç­¾ï¼Œå¿«é€Ÿèµ‹å€¼
			const bookObj = result.data.data;
			// console.log(bookObj)
			const keys = Object.keys(bookObj);
			keys.forEach(key =&gt; {
				document.querySelector(`.edit-form .${key}`).value = bookObj[key];
			});
		});
		// 4.1 ç¼–è¾‘å¼¹æ¡†-&gt;æ˜¾ç¤ºå’Œéšè—
		editModal.show();
	}
});

document.querySelector(".edit-btn").addEventListener("click", () =&gt; {
	const editForm = document.querySelector(".edit-form");
	const editData = serialize(editForm, { hash: true, empty: true });

	// 4.3 æäº¤ä¿å­˜ä¿®æ”¹ï¼Œå¹¶åˆ·æ–°åˆ—è¡¨
	axios({
		url: `http://hmajax.itheima.net/api/books/${editData.id}`,
		method: "put",
		data: {
			...editData,
			creator,
		},
	}).then(() =&gt; {
		getBooksList();
	});
	editModal.hide();
});
</code></pre>
<ul>
<li>
<p>æ€»ç»“</p>
<ul>
<li>
<p>æ¸²æŸ“åˆ—è¡¨ï¼ˆæŸ¥ï¼‰</p>
<ul>
<li>
<p>è·å–æ•°æ®</p>
</li>
<li>
<p>æ¸²æŸ“æ•°æ®</p>
</li>
</ul>
</li>
<li>
<p>æ–°å¢å›¾ä¹¦ï¼ˆå¢ï¼‰</p>
<ul>
<li>
<p>å¼¹æ¡†ï¼ˆæ˜¾ç¤º/éšè—ï¼‰</p>
</li>
<li>
<p>æ”¶é›†æ•°æ®&amp;æäº¤ä¿å­˜</p>
</li>
<li>
<p>åˆ·æ–°é¡µé¢åˆ—è¡¨</p>
</li>
</ul>
</li>
<li>
<p>åˆ é™¤å›¾ä¹¦ï¼ˆåˆ ï¼‰</p>
<ul>
<li>
<p>ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼ˆè·å–è¦åˆ é™¤çš„å›¾ä¹¦ idï¼‰</p>
</li>
<li>
<p>è°ƒç”¨åˆ é™¤æ¥å£ï¼ˆè®©æœåŠ¡å™¨åˆ é™¤æ­¤æ•°æ®ï¼‰</p>
</li>
<li>
<p>æˆåŠŸåé‡æ–°è·å–å¹¶åˆ·æ–°åˆ—è¡¨</p>
</li>
</ul>
</li>
<li>
<p>ç¼–è¾‘å›¾ä¹¦ï¼ˆæ”¹ï¼‰</p>
<ul>
<li>
<p>å¼¹æ¡†ï¼ˆæ˜¾ç¤º/éšè—ï¼‰</p>
</li>
<li>
<p>è¡¨å•ï¼ˆæ•°æ®å›æ˜¾ï¼‰</p>
</li>
<li>
<p>ç‚¹å‡»ä¿®æ”¹æ”¶é›†æ•°æ®ï¼Œæäº¤åˆ°æœåŠ¡å™¨ä¿å­˜</p>
</li>
<li>
<p>é‡æ–°è·å–å¹¶åˆ·æ–°åˆ—è¡¨</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="28-å›¾ç‰‡ä¸Šä¼ ">2.8 å›¾ç‰‡ä¸Šä¼ </h3>
<blockquote>
<p>æŠŠæœ¬åœ°çš„å›¾ç‰‡ä¸Šä¼ åˆ°ç½‘é¡µä¸Šæ˜¾ç¤º</p>
</blockquote>
<ul>
<li>
<p>å®ç°æ­¥éª¤</p>
<ul>
<li>
<p>è·å–å›¾ç‰‡æ–‡ä»¶å¯¹è±¡ï¼š<code>e.target.files[0]</code></p>
</li>
<li>
<p>ä½¿ç”¨ FormData è¡¨å•æ•°æ®å¯¹è±¡è£…å…¥</p>
<pre><code class="language-js">const fd = new FormData();
fd.append(å‚æ•°å, å€¼);
</code></pre>
</li>
<li>
<p>æäº¤è¡¨å•æ•°æ®å¯¹è±¡ï¼Œä½¿ç”¨æœåŠ¡å™¨è¿”å›å›¾ç‰‡ url ç½‘å€</p>
</li>
</ul>
</li>
</ul>
<pre><code class="language-html">&lt;!-- æ–‡ä»¶é€‰æ‹©å…ƒç´  --&gt;
&lt;input type="file" class="upload" /&gt;
&lt;img src="" alt="" /&gt;

&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	document.querySelector(".upload").addEventListener("change", e =&gt; {
		// 1. è·å–å›¾ç‰‡æ–‡ä»¶
		// console.log(e.target.files[0])

		// 2. ä½¿ç”¨ FormData æºå¸¦å›¾ç‰‡æ–‡ä»¶
		const fd = new FormData();
		fd.append("img", e.target.files[0]);

		// 3. æäº¤åˆ°æœåŠ¡å™¨ï¼Œè·å–å›¾ç‰‡urlç½‘å€ä½¿ç”¨
		axios({
			url: "http://hmajax.itheima.net/api/uploadimg",
			method: "post",
			data: fd,
		}).then(result =&gt; {
			// console.log(result)
			document.querySelector("img").src = result.data.data.url;
		});
	});
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šæ›´æ¢èƒŒæ™¯å›¾ç‰‡</li>
</ul>
<pre><code class="language-html">&lt;div class="container"&gt;
	&lt;div class="nav"&gt;
		&lt;div class="left"&gt;
			&lt;ul&gt;
				&lt;li&gt;&lt;a href="http://yun.itheima.com/?webzly" target="_blank" rel="nofollow"&gt;å…è´¹æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href="http://resource.ityxb.com/booklist/?webzly" target="_blank" rel="nofollow"&gt;åŸåˆ›ä¹¦ç±&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;
					&lt;a href="http://www.itheima.com/teacher.html?webzly#ajavaee" target="_blank" rel="nofollow"&gt;æ•™ç ”å›¢é˜Ÿ&lt;/a&gt;
				&lt;/li&gt;
				&lt;li&gt;
					&lt;a href="http://www.itheima.com/special/hmschool/index.shtml?webzly" target="_blank" rel="nofollow"&gt;
						æ ¡åŒºæ±‡æ€»
					&lt;/a&gt;
				&lt;/li&gt;
				&lt;li&gt;&lt;a href="http://www.itheima.com/flow/flow.html?webzly" target="_blank" rel="nofollow"&gt;æŠ¥åæµç¨‹&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href="https://pip.itcast.cn?hmgw$webzly" target="_blank" rel="nofollow"&gt;é¡¹ç›®ä¿¡æ¯ç«™&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href="http://bbs.itheima.com/forum.php?webzly" target="_blank" rel="nofollow"&gt;æŠ€æœ¯ç¤¾åŒº&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
		&lt;/div&gt;
		&lt;div class="right"&gt;
			&lt;label for="bg"&gt;æ›´æ¢èƒŒæ™¯&lt;/label&gt;
			&lt;input class="bg-ipt" type="file" id="bg" /&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;div class="search-container"&gt;
		&lt;img src="https://www.itheima.com/images/logo.png" alt="" /&gt;
		&lt;div class="search-box"&gt;
			&lt;input type="text" /&gt;
			&lt;button&gt;æœç´¢ä¸€ä¸‹&lt;/button&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;!-- æ ¸å¿ƒä»£ç  --&gt;
&lt;script src="./js/index.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>index.js</li>
</ul>
<pre><code class="language-js">document.querySelector(".bg-ipt").addEventListener("change", e =&gt; {
	// 1. é€‰æ‹©å›¾ç‰‡ä¸Šä¼ ï¼Œè®¾ç½®bodyèƒŒæ™¯
	const fd = new FormData();
	fd.append("img", e.target.files[0]);

	axios({
		url: "http://hmajax.itheima.net/api/uploadimg",
		method: "post",
		data: fd,
	}).then(result =&gt; {
		// console.log(result)
		const imgUrl = result.data.data.url;
		document.body.style.backgroundImage = `url(${imgUrl})`;

		// 2. ä¸Šä¼ æˆåŠŸæ—¶ï¼Œ"ä¿å­˜"å›¾ç‰‡urlç½‘å€
		localStorage.setItem("bgImg", imgUrl);
	});
});

// 3. ç½‘é¡µè¿è¡Œåï¼Œè·å–urlç½‘å€ä½¿ç”¨
const imgUrl = localStorage.getItem("bgImg");
document.body.style.backgroundImage = `url(${imgUrl})`;
</code></pre>
<h3 id="29-æ¡ˆä¾‹-ä¸ªäººä¿¡æ¯è®¾ç½®">2.9 æ¡ˆä¾‹-ä¸ªäººä¿¡æ¯è®¾ç½®</h3>
<ul>
<li>ç»“æ„</li>
</ul>
<pre><code class="language-html">&lt;!-- toast æç¤ºæ¡† --&gt;
&lt;div class="toast my-toast" data-bs-delay="1500"&gt;
    &lt;div class="toast-body"&gt;
        &lt;div class="alert alert-success info-box"&gt;
            æ“ä½œæˆåŠŸ
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- æ ¸å¿ƒå†…å®¹åŒºåŸŸ --&gt;
&lt;div class="container"&gt;
    &lt;ul class="my-nav"&gt;
        &lt;li class="active"&gt;åŸºæœ¬è®¾ç½®&lt;/li&gt;
        &lt;li&gt;å®‰å…¨è®¾ç½®&lt;/li&gt;
        &lt;li&gt;è´¦å·ç»‘å®š&lt;/li&gt;
        &lt;li&gt;æ–°æ¶ˆæ¯é€šçŸ¥&lt;/li&gt;
    &lt;/ul&gt;
    &lt;div class="content"&gt;
        &lt;div class="info-wrap"&gt;
            &lt;h3 class="title"&gt;åŸºæœ¬è®¾ç½®&lt;/h3&gt;
            &lt;form class="user-form" action="javascript:;"&gt;
                &lt;div class="form-item"&gt;
                    &lt;label for="email"&gt;é‚®ç®±&lt;/label&gt;
                    &lt;input id="email" name="email" class="email" type="text" placeholder="è¯·è¾“å…¥é‚®ç®±" autocomplete="off"&gt;
                &lt;/div&gt;
                &lt;div class="form-item"&gt;
                    &lt;label for="nickname"&gt;æ˜µç§°&lt;/label&gt;
                    &lt;input id="nickname" name="nickname" class="nickname" type="text" placeholder="è¯·è¾“å…¥æ˜µç§°" autocomplete="off"&gt;
                &lt;/div&gt;
                &lt;div class="form-item"&gt;
                    &lt;label&gt;æ€§åˆ«&lt;/label&gt;
                    &lt;label class="male-label"&gt;&lt;input type="radio" name="gender" class="gender" value="0"&gt;ç”·&lt;/label&gt;
                    &lt;label class="male-label"&gt;&lt;input type="radio" name="gender" class="gender" value="1"&gt;å¥³&lt;/label&gt;
                &lt;/div&gt;
                &lt;div class="form-item"&gt;
                    &lt;label for="desc"&gt;ä¸ªäººç®€ä»‹&lt;/label&gt;
                    &lt;textarea id="desc" name="desc" class="desc" placeholder="è¯·è¾“å…¥ä¸ªäººç®€ä»‹" cols="20" rows="10" autocomplete="off"&gt;&lt;/textarea&gt;
                &lt;/div&gt;
                &lt;button class="submit"&gt;æäº¤&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        &lt;div class="avatar-box"&gt;
            &lt;h4 class="avatar-title"&gt;å¤´åƒ&lt;/h3&gt;
            &lt;img class="prew" src="./img/å¤´åƒ.png" alt=""&gt;
            &lt;label for="upload"&gt;æ›´æ¢å¤´åƒ&lt;/label&gt;
            &lt;input id="upload" type="file" class="upload"&gt;
        &lt;/div&gt;

    &lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;script src="./lib/form-serialize.js"&gt;&lt;/script&gt;
&lt;!-- æ ¸å¿ƒé€»è¾‘ --&gt;
&lt;script src="./js/index.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>
<p>index.js</p>
</li>
<li>
<p>ä¿¡æ¯æ¸²æŸ“</p>
</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡1ï¼šä¿¡æ¯æ¸²æŸ“
 *  1.1 è·å–ç”¨æˆ·çš„æ•°æ®
 *  1.2 å›æ˜¾æ•°æ®åˆ°æ ‡ç­¾ä¸Š
 * */

const creator = "å°æ˜";
axios({
	url: "http://hmajax.itheima.net/api/settings",
	params: {
		creator,
	},
}).then(result =&gt; {
	// console.log(result.data.data)
	const userObj = result.data.data;

	const keys = Object.keys(userObj);
	keys.forEach(key =&gt; {
		// å¤´åƒå’Œæ€§åˆ«æ¯”è¾ƒç‰¹æ®Šï¼Œéœ€è¦å•ç‹¬å¤„ç†
		if (key === "avatar") {
			document.querySelector(".prew").src = userObj[key];
		} else if (key === "gender") {
			const gRadioList = document.querySelectorAll(".gender");
			// 0ç”·ï¼Œ1å¥³ï¼Œåˆšå¥½ä¸æ•°ç»„ä¸‹æ ‡å¯¹åº”
			const gNum = userObj[key];
			gRadioList[gNum].checked = true;
		} else {
			document.querySelector(`.${key}`).value = userObj[key];
		}
	});
});
</code></pre>
<ul>
<li>ä¿®æ”¹å¤´åƒ</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡2ï¼šä¿®æ”¹å¤´åƒ
 *  2.1 è·å–å¤´åƒæ–‡ä»¶
 *  2.2 æäº¤æœåŠ¡å™¨å¹¶æ›´æ–°å¤´åƒ
 */

document.querySelector(".upload").addEventListener("change", e =&gt; {
	const fd = new FormData();
	fd.append("img", e.target.files[0]);
	fd.append("creator", creator);

	axios({
		url: "http://hmajax.itheima.net/api/avatar",
		method: "put",
		data: fd,
	}).then(result =&gt; {
		document.querySelector(".prew").src = result.data.data.avatar;
	});
});
</code></pre>
<ul>
<li>ä¿®æ”¹æ•°æ®ï¼Œå¹¶æç¤º</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡3ï¼šæäº¤è¡¨å•
 *  3.1 æ”¶é›†è¡¨å•ä¿¡æ¯
 *  3.2 äº¤åˆ°æœåŠ¡å™¨ä¿å­˜
 */

/**
 * ç›®æ ‡4ï¼šç»“æœæç¤º
 *  4.1 åˆ›å»ºtoastå¯¹è±¡
 *  4.2 è°ƒç”¨showæ–¹æ³•-&gt;æ˜¾ç¤ºæç¤ºæ¡†
 */

document.querySelector(".submit").addEventListener("click", () =&gt; {
	// 3.1 æ”¶é›†è¡¨å•ä¿¡æ¯
	const form = document.querySelector(".user-form");
	const formData = serialize(form, { hash: true, empty: true });
	formData.creator = creator;
	formData.gender = +formData.gender;

	// 3.2 æäº¤åˆ°æœåŠ¡å™¨ä¿å­˜
	axios({
		url: "http://hmajax.itheima.net/api/settings",
		method: "put",
		data: formData,
	}).then(result =&gt; {
		// 4.1 åˆ›å»ºtoastå¯¹è±¡
		const toastDom = document.querySelector(".my-toast");
		const toast = new bootstrap.Toast(toastDom);

		// 4.2 è°ƒç”¨showæ–¹æ³•-&gt;æ˜¾ç¤ºæç¤ºæ¡†
		toast.show();
	});
});
</code></pre>
<h3 id="210-è¯·æ±‚æ–¹å¼åˆ«å">2.10 è¯·æ±‚æ–¹å¼åˆ«å</h3>
<ul>
<li>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå·²ç»ä¸ºæ‰€æœ‰æ”¯æŒçš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«å</li>
</ul>
<pre><code class="language-js">axios.request(config)
axios.get(url[, config])
axios.delete(url[, config])
axios.head(url[, config])
axios.options(url[, config])
axios.post(url[, data[, config]])
axios.put(url[, data[, config]])
</code></pre>
<ul>
<li>æ³¨ï¼šåœ¨ä½¿ç”¨åˆ«åæ–¹æ³•æ—¶ï¼Œ <code>url</code>ã€<code>method</code>ã€<code>data</code> è¿™äº›å±æ€§éƒ½ä¸å¿…åœ¨é…ç½®ä¸­æŒ‡å®š</li>
</ul>
<h3 id="211-axios-api">2.11 Axios API</h3>
<h4 id="2111-axios-å®ä¾‹">2.11.1 axios å®ä¾‹</h4>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–°å»ºä¸€ä¸ªå®ä¾‹</p>
</blockquote>
<pre><code class="language-js">const instance = axios.create({
	baseURL: "https://some-domain.com/api/",
	timeout: 1000,
	headers: { "X-Custom-Header": "foobar" },
});
</code></pre>
<ul>
<li>
<p>ä¸€äº›å®ä¾‹æ–¹æ³•</p>
<ul>
<li>
<p><code>axios#request(config)</code></p>
</li>
<li>
<p><code>axios#get(url[, config])</code></p>
</li>
<li>
<p><code>axios#delete(url[, config])</code></p>
</li>
<li>
<p><code>axios#head(url[, config])</code></p>
</li>
<li>
<p><code>axios#options(url[, config])</code></p>
</li>
<li>
<p><code>axios#post(url[, data[, config]])</code></p>
</li>
<li>
<p><code>axios#put(url[, data[, config]])</code></p>
</li>
<li>
<p><code>axios#patch(url[, data[, config]])</code></p>
</li>
<li>
<p><code>axios#getUri([config])</code></p>
</li>
</ul>
</li>
</ul>
<h4 id="2112-è¯·æ±‚é…ç½®">2.11.2 è¯·æ±‚é…ç½®</h4>
<ul>
<li>
<p>è¿™äº›æ˜¯åˆ›å»ºè¯·æ±‚æ—¶å¯ä»¥ç”¨çš„é…ç½®é€‰é¡¹ï¼Œåªæœ‰<code>url</code>æ˜¯å¿…éœ€çš„</p>
</li>
<li>
<p>è‹¥æ²¡æŒ‡å®š<code>method</code>ï¼Œè¯·æ±‚é»˜è®¤ä½¿ç”¨<code>GET</code></p>
</li>
</ul>
<pre><code class="language-js">{
  // urlï¼šç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨URL
  url: '/user',

  // methodï¼šåˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•ï¼Œé»˜è®¤ä¸ºget
  method: 'get',

  // baseURLï¼šè‡ªåŠ¨åŠ åœ¨urlå‰é¢ï¼Œé€šè¿‡å®ƒå¯ä»¥ä¼ é€’ç›¸å¯¹åœ°å€
  baseURL: 'https://some-domain.com/api/',

  // transformRequestï¼šå…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®
  // å®ƒåªèƒ½ç”¨äº'PUT', 'POST'å’Œ'PATCH'è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•
  // æ•°ç»„ä¸­æœ€åä¸€ä¸ªå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ ä¸€ä¸ªBufferå®ä¾‹ï¼ŒArrayBufferï¼ŒFormDataæˆ–Stream
  // å¯ä»¥ä¿®æ”¹è¯·æ±‚å¤´
  transformRequest: [function (data, headers) {
    // å¯¹å‘é€çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†

    return data;
  }],

  // transformResponseï¼šåœ¨ä¼ é€’ç»™then/catchå‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®
  transformResponse: [function (data) {
    // å¯¹æ¥æ”¶çš„ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†

    return data;
  }],

  // è‡ªå®šä¹‰è¯·æ±‚å¤´
  headers: {'X-Requested-With': 'XMLHttpRequest'},

  // paramsï¼šä¸è¯·æ±‚ä¸€èµ·å‘é€çš„URLå‚æ•°
  // å¿…é¡»æ˜¯ä¸€ä¸ªç®€å•å¯¹è±¡æˆ–URLSearchParamså¯¹è±¡
  params: {
    ID: 12345
  },

  // dataï¼šä½œä¸ºè¯·æ±‚ä½“è¢«å‘é€çš„æ•°æ®
  // ä»…é€‚ç”¨'PUT', 'POST', 'DELETE'å’Œ'PATCH'è¯·æ±‚æ–¹æ³•
  // åœ¨æ²¡æœ‰è®¾ç½®`transformRequest`æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€:
  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams
  // - æµè§ˆå™¨ä¸“å±: FormData, File, Blob
  // - Node ä¸“å±: Stream, Buffer
  data: {
    firstName: 'Fred'
  },

  // å‘é€è¯·æ±‚ä½“æ•°æ®çš„å¯é€‰è¯­æ³•
  // è¯·æ±‚æ–¹å¼ post
  // åªæœ‰ value ä¼šè¢«å‘é€ï¼Œkey åˆ™ä¸ä¼š
  data: 'Country=Brasil&amp;City=Belo Horizonte',

  // timeoutï¼šæŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°
  // å¦‚æœè¯·æ±‚æ—¶é—´è¶…è¿‡`timeout`çš„å€¼ï¼Œåˆ™è¯·æ±‚ä¼šè¢«ä¸­æ–­ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºæ°¸ä¸è¶…æ—¶
  timeout: 1000,

  // withCredentialsï¼šè¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯ï¼Œé»˜è®¤false
  withCredentials: false,

  // adapterï¼šå…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œè¿™ä½¿æµ‹è¯•æ›´åŠ å®¹æ˜“
  // è¿”å›ä¸€ä¸ª`promise`å¹¶æä¾›ä¸€ä¸ªæœ‰æ•ˆçš„å“åº”ï¼ˆå‚è§ lib/adapters/README.mdï¼‰
  adapter: function (config) {
    /* ... */
  },

  // authï¼šHTTP Basic Auth
  auth: {
    username: 'janedoe',
    password: 's00pers3cret'
  },

  // responseTypeï¼šæµè§ˆå™¨å°†è¦å“åº”çš„æ•°æ®ç±»å‹
  // é€‰é¡¹åŒ…æ‹¬: 'arraybuffer', 'document', 'json', 'text', 'stream'
  // æµè§ˆå™¨ä¸“å±ï¼š'blob'
  responseType: 'json', // é»˜è®¤å€¼

  // responseEncodingï¼šç”¨äºè§£ç å“åº”çš„ç¼–ç  (Node.jsä¸“å±)
  // æ³¨æ„ï¼šå¿½ç•¥`responseType`çš„å€¼ä¸º 'stream'ï¼Œæˆ–è€…æ˜¯å®¢æˆ·ç«¯è¯·æ±‚
  responseEncoding: 'utf8', // é»˜è®¤å€¼

  // `xsrfCookieName`æ˜¯`xsrf token`çš„å€¼ï¼Œè¢«ç”¨ä½œ`cookie`çš„åç§°
  xsrfCookieName: 'XSRF-TOKEN', // é»˜è®¤å€¼

  // `xsrfHeaderName`æ˜¯å¸¦æœ‰`xsrf token`å€¼çš„httpè¯·æ±‚å¤´åç§°
  xsrfHeaderName: 'X-XSRF-TOKEN', // é»˜è®¤å€¼

  // `onUploadProgress`å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶ï¼ˆæµè§ˆå™¨ä¸“å±ï¼‰
  onUploadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },

  // `onDownloadProgress`å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶ï¼ˆæµè§ˆå™¨ä¸“å±ï¼‰
  onDownloadProgress: function (progressEvent) {
    // å¤„ç†åŸç”Ÿè¿›åº¦äº‹ä»¶
  },

  // `maxContentLength`å®šä¹‰äº†node.jsä¸­å…è®¸çš„HTTPå“åº”å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxContentLength: 2000,

  // `maxBodyLength`ï¼ˆä»…Nodeï¼‰å®šä¹‰å…è®¸çš„httpè¯·æ±‚å†…å®¹çš„æœ€å¤§å­—èŠ‚æ•°
  maxBodyLength: 2000,

  // `validateStatus`å®šä¹‰äº†å¯¹äºç»™å®šçš„HTTPçŠ¶æ€ç æ˜¯ resolve è¿˜æ˜¯ reject promise
  // è¿”å›`true`(æˆ–è€…è®¾ç½®ä¸º`null`æˆ–`undefined`)ï¼Œåˆ™promiseå°†ä¼šresolvedï¼Œå¦åˆ™æ˜¯rejected
  validateStatus: function (status) {
    return status &gt;= 200 &amp;&amp; status &lt; 300; // é»˜è®¤å€¼
  },

  // maxRedirectsï¼šå®šä¹‰äº†åœ¨node.jsä¸­è¦éµå¾ªçš„æœ€å¤§é‡å®šå‘æ•°ï¼Œè®¾ç½®ä¸º0ï¼Œåˆ™ä¸ä¼šè¿›è¡Œé‡å®šå‘
  maxRedirects: 5, // é»˜è®¤å€¼

  // `socketPath` å®šä¹‰äº†åœ¨node.jsä¸­ä½¿ç”¨çš„UNIXå¥—æ¥å­—
  // e.g. '/var/run/docker.sock' å‘é€è¯·æ±‚åˆ° docker å®ˆæŠ¤è¿›ç¨‹
  // åªèƒ½æŒ‡å®š `socketPath` æˆ– `proxy`
  // è‹¥éƒ½æŒ‡å®šï¼Œåˆ™ä½¿ç”¨ `socketPath`
  socketPath: null, // default

  // `httpAgent`å’Œ`httpsAgent`åˆ†åˆ«å®šä¹‰äº†åœ¨ node.js ä¸­æ‰§è¡Œ http å’Œ https è¯·æ±‚æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰ä»£ç†
  // è¿™æ ·å°±å¯ä»¥æ·»åŠ é»˜è®¤æƒ…å†µä¸‹æœªå¯ç”¨çš„é€‰é¡¹ï¼Œå¦‚`keepAlive`
  httpAgent: new http.Agent({ keepAlive: true }),
  httpsAgent: new https.Agent({ keepAlive: true }),

  // `proxy` å®šä¹‰äº†ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåï¼Œç«¯å£å’Œåè®®
  // å¯ä»¥ä½¿ç”¨å¸¸è§„çš„`http_proxy`å’Œ`https_proxy` ç¯å¢ƒå˜é‡
  // ä½¿ç”¨`false`å¯ä»¥ç¦ç”¨ä»£ç†åŠŸèƒ½ï¼ŒåŒæ—¶ç¯å¢ƒå˜é‡ä¹Ÿä¼šè¢«å¿½ç•¥
  // `auth`è¡¨ç¤ºåº”ä½¿ç”¨HTTP Basic authè¿æ¥åˆ°ä»£ç†ï¼Œå¹¶ä¸”æä¾›å‡­æ®
  // è¿™å°†è®¾ç½®ä¸€ä¸ª`Proxy-Authorization`è¯·æ±‚å¤´ï¼Œå®ƒä¼šè¦†ç›–`headers`ä¸­å·²å­˜åœ¨çš„è‡ªå®šä¹‰`Proxy-Authorization`è¯·æ±‚å¤´
  // å¦‚æœä»£ç†æœåŠ¡å™¨ä½¿ç”¨ HTTPSï¼Œåˆ™å¿…é¡»è®¾ç½® protocol ä¸º`https`
  proxy: {
    protocol: 'https',
    host: '127.0.0.1',
    port: 9000,
    auth: {
      username: 'mikeymike',
      password: 'rapunz3l'
    }
  },

  // è¯¦è§https://axios-http.com/zh/docs/cancellation
  cancelToken: new CancelToken(function (cancel) {
  }),

  // `decompress`ï¼šè¡¨ç¤ºæ˜¯å¦è¦è‡ªåŠ¨è§£å‹ç¼©å“åº”æ­£æ–‡
  // å°†å…¶è®¾ç½®ä¸º"false"ï¼Œå®ƒä¸ä¼šè§£å‹ç¼©å“åº”ï¼Œå¹¶ä¼šä¿ç•™åŸå§‹çš„"Content-Encoding"æ ‡å¤´
  // å¦‚æœè®¾ç½®ä¸ºâ€œtrueâ€ï¼Œå°†ä»æ‰€æœ‰è§£å‹ç¼©å“åº”çš„å“åº”å¯¹è±¡ä¸­ç§»é™¤"Content-Encoding"æ ‡å¤´
  // - ä»…é€‚ç”¨äºNode (XHR æ— æ³•å…³é—­è§£å‹ç¼©åŠŸèƒ½)
  decompress: true // é»˜è®¤å€¼
}
</code></pre>
<h4 id="2113-å“åº”ç»“æ„">2.11.3 å“åº”ç»“æ„</h4>
<ul>
<li>ä¸€ä¸ªè¯·æ±‚çš„å“åº”åŒ…å«ä»¥ä¸‹ä¿¡æ¯</li>
</ul>
<pre><code class="language-js">{
  // dataï¼šç”±æœåŠ¡å™¨æä¾›çš„å“åº”
  data: {},

  // statusï¼šæ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ç 
  status: 200,

  // statusTextï¼šæ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯
  statusText: 'OK',

  // headersï¼šæœåŠ¡å™¨å“åº”å¤´
  // æ‰€æœ‰ header åç§°éƒ½æ˜¯å°å†™ï¼Œä¸”å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•è®¿é—®
  // ä¾‹å¦‚: `response.headers['content-type']`
  headers: {},

  // configï¼šæ˜¯`axios`è¯·æ±‚çš„é…ç½®ä¿¡æ¯
  config: {},

  // requestï¼šæ˜¯ç”Ÿæˆæ­¤å“åº”çš„è¯·æ±‚
  // åœ¨node.jsä¸­å®ƒæ˜¯æœ€åä¸€ä¸ªClientRequestå®ä¾‹ (in redirects)ï¼Œ
  // åœ¨æµè§ˆå™¨ä¸­åˆ™æ˜¯ XMLHttpRequest å®ä¾‹
  request: {}
}
</code></pre>
<h4 id="2114-é»˜è®¤é…ç½®">2.11.4 é»˜è®¤é…ç½®</h4>
<h5 id="ï¸-å…¨å±€-axios-é»˜è®¤å€¼">ğŸ› ï¸ å…¨å±€ axios é»˜è®¤å€¼</h5>
<pre><code class="language-js">axios.defaults.baseURL = "https://api.example.com";
axios.defaults.headers.common["Authorization"] = AUTH_TOKEN;
axios.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded";
</code></pre>
<h5 id="ï¸-è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼">ğŸ› ï¸ è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼</h5>
<pre><code class="language-js">// åˆ›å»ºå®ä¾‹æ—¶é…ç½®é»˜è®¤å€¼
const instance = axios.create({
	baseURL: "https://api.example.com",
});

// åˆ›å»ºå®ä¾‹åä¿®æ”¹é»˜è®¤å€¼
instance.defaults.headers.common["Authorization"] = AUTH_TOKEN;
</code></pre>
<h5 id="ï¸-é…ç½®çš„ä¼˜å…ˆçº§">ğŸ› ï¸ é…ç½®çš„ä¼˜å…ˆçº§</h5>
<ul>
<li>
<p>é…ç½®å°†ä¼šæŒ‰ä¼˜å…ˆçº§è¿›è¡Œåˆå¹¶</p>
</li>
<li>
<p>å®ƒçš„é¡ºåºæ˜¯ï¼šåœ¨<a href="https://github.com/axios/axios/blob/master/lib/defaults.js#L28" target="_blank" rel="noopener nofollow">lib/defaults.js</a>ä¸­æ‰¾åˆ°çš„åº“é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ <code>defaults</code> å±æ€§ï¼Œæœ€åæ˜¯è¯·æ±‚çš„<code>config</code>å‚æ•°ï¼Œåé¢çš„ä¼˜å…ˆçº§è¦é«˜äºå‰é¢çš„</p>
</li>
</ul>
<pre><code class="language-js">// ä½¿ç”¨åº“æä¾›çš„é»˜è®¤é…ç½®åˆ›å»ºå®ä¾‹
// æ­¤æ—¶è¶…æ—¶é…ç½®çš„é»˜è®¤å€¼æ˜¯ `0`
const instance = axios.create();

// é‡å†™åº“çš„è¶…æ—¶é»˜è®¤å€¼
// ç°åœ¨ï¼Œæ‰€æœ‰ä½¿ç”¨æ­¤å®ä¾‹çš„è¯·æ±‚éƒ½å°†ç­‰å¾…2.5ç§’ï¼Œç„¶åæ‰ä¼šè¶…æ—¶
instance.defaults.timeout = 2500;

// é‡å†™æ­¤è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå› ä¸ºè¯¥è¯·æ±‚éœ€è¦å¾ˆé•¿æ—¶é—´
instance.get("/longRequest", {
	timeout: 5000,
});
</code></pre>
<h4 id="2115-æ‹¦æˆªå™¨">2.11.5 æ‹¦æˆªå™¨</h4>
<ul>
<li>åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬</li>
</ul>
<pre><code class="language-js">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(
	function (config) {
		// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
		return config;
	},
	function (error) {
		// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
		return Promise.reject(error);
	}
);

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(
	function (response) {
		// 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°
		// å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ
		return response;
	},
	function (error) {
		// è¶…å‡º 2xx èŒƒå›´çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°
		// å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
		return Promise.reject(error);
	}
);
</code></pre>
<ul>
<li>ç§»é™¤æ‹¦æˆªå™¨</li>
</ul>
<pre><code class="language-js">const myInterceptor = axios.interceptors.request.use(function () {
	/*...*/
});
axios.interceptors.request.eject(myInterceptor);
</code></pre>
<ul>
<li>å¯ä»¥ç»™è‡ªå®šä¹‰çš„ axios å®ä¾‹æ·»åŠ æ‹¦æˆªå™¨</li>
</ul>
<pre><code class="language-js">const instance = axios.create();
instance.interceptors.request.use(function () {
	/*...*/
});
</code></pre>
<h4 id="2116-é”™è¯¯å¤„ç†">2.11.6 é”™è¯¯å¤„ç†</h4>
<pre><code class="language-js">axios.get("/user/12345").catch(function (error) {
	if (error.response) {
		// è¯·æ±‚æˆåŠŸå‘å‡ºä¸”æœåŠ¡å™¨ä¹Ÿå“åº”äº†çŠ¶æ€ç ï¼Œä½†çŠ¶æ€ä»£ç è¶…å‡ºäº† 2xx çš„èŒƒå›´
		console.log(error.response.data);
		console.log(error.response.status);
		console.log(error.response.headers);
	} else if (error.request) {
		// è¯·æ±‚å·²ç»æˆåŠŸå‘èµ·ï¼Œä½†æ²¡æœ‰æ”¶åˆ°å“åº”
		// `error.request` åœ¨æµè§ˆå™¨ä¸­æ˜¯ XMLHttpRequest çš„å®ä¾‹ï¼Œ
		// è€Œåœ¨node.jsä¸­æ˜¯ http.ClientRequest çš„å®ä¾‹
		console.log(error.request);
	} else {
		// å‘é€è¯·æ±‚æ—¶å‡ºäº†ç‚¹é—®é¢˜
		console.log("Error", error.message);
	}
	console.log(error.config);
});
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>validateStatus</code> é…ç½®é€‰é¡¹ï¼Œå¯ä»¥è‡ªå®šä¹‰æŠ›å‡ºé”™è¯¯çš„ HTTP code</li>
</ul>
<pre><code class="language-js">axios.get("/user/12345", {
	validateStatus: function (status) {
		return status &lt; 500; // å¤„ç†çŠ¶æ€ç å°äº500çš„æƒ…å†µ
	},
});
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>toJSON</code> å¯ä»¥è·å–æ›´å¤šå…³äº HTTP é”™è¯¯çš„ä¿¡æ¯</li>
</ul>
<pre><code class="language-js">axios.get("/user/12345").catch(function (error) {
	console.log(error.toJSON());
});
</code></pre>
<h4 id="2117-å–æ¶ˆè¯·æ±‚">2.11.7 å–æ¶ˆè¯·æ±‚</h4>
<h5 id="ï¸-abortcontroller">ğŸ› ï¸ AbortController</h5>
<pre><code class="language-js">const controller = new AbortController();

axios
	.get("/foo/bar", {
		signal: controller.signal,
	})
	.then(function (response) {
		//...
	});
// å–æ¶ˆè¯·æ±‚
controller.abort();
</code></pre>
<h4 id="2118-è¯·æ±‚ä½“ç¼–ç ">2.11.8 è¯·æ±‚ä½“ç¼–ç </h4>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œaxios å°† JavaScript å¯¹è±¡åºåˆ—åŒ–ä¸º<code>JSON</code>ã€‚ è¦ä»¥<code>application/x-www-form-urlencoded</code>æ ¼å¼å‘é€æ•°æ®</li>
</ul>
<h5 id="ï¸-æµè§ˆå™¨">ğŸ› ï¸ æµè§ˆå™¨</h5>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener nofollow"><code>URLSearchParams</code></a></li>
</ul>
<pre><code class="language-js">const params = new URLSearchParams();
params.append("param1", "value1");
params.append("param2", "value2");
axios.post("/foo", params);
</code></pre>
<ul>
<li>
<p>æ³¨ï¼šä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ <code>URLSearchParams</code> ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨<a href="https://github.com/WebReflection/url-search-params" target="_blank" rel="noopener nofollow">polyfill</a> (ç¡®ä¿ polyfill å…¨å±€ç¯å¢ƒ)</p>
</li>
<li>
<p>å¯ä»¥ä½¿ç”¨<a href="https://github.com/ljharb/qs" target="_blank" rel="noopener nofollow"><code>qs</code></a> åº“ç¼–ç æ•°æ®</p>
</li>
</ul>
<pre><code class="language-js">import qs from "qs";
const data = { bar: 123 };
const options = {
	method: "POST",
	headers: { "content-type": "application/x-www-form-urlencoded" },
	data: qs.stringify(data),
	url,
};
axios(options);
</code></pre>
<h5 id="ï¸-nodejs">ğŸ› ï¸ Node.js</h5>
<ul>
<li>åœ¨ node.js ä¸­ï¼Œ å¯ä»¥ä½¿ç”¨<a href="https://nodejs.org/api/querystring.html" target="_blank" rel="noopener nofollow"><code>querystring</code></a> æ¨¡å—</li>
</ul>
<pre><code class="language-js">const querystring = require("querystring");
axios.post("http://something.com/", querystring.stringify({ foo: "bar" }));
</code></pre>
<ul>
<li>æˆ–è€…ä»<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener nofollow">'url module'</a>ä¸­ä½¿ç”¨<a href="https://nodejs.org/api/url.html#url_class_urlsearchparams" target="_blank" rel="noopener nofollow">'URLSearchParams'</a></li>
</ul>
<pre><code class="language-js">const url = require("url");
const params = new url.URLSearchParams({ foo: "bar" });
axios.post("http://something.com/", params.toString());
</code></pre>
<ul>
<li>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ qs åº“</p>
</li>
<li>
<p><strong>Form data</strong></p>
</li>
</ul>
<pre><code class="language-js">const FormData = require("form-data");

const form = new FormData();
form.append("my_field", "my value");
form.append("my_buffer", new Buffer(10));
form.append("my_file", fs.createReadStream("/foo/bar.jpg"));

axios.post("https://example.com", form, { headers: form.getHeaders() });
</code></pre>
<ul>
<li>æˆ–è€…, ä½¿ç”¨ä¸€ä¸ªæ‹¦æˆªå™¨</li>
</ul>
<pre><code class="language-js">axios.interceptors.request.use(config =&gt; {
	if (config.data instanceof FormData) {
		Object.assign(config.headers, config.data.getHeaders());
	}
	return config;
});
</code></pre>
<h4 id="2119-axios-äºŒæ¬¡å°è£…">2.11.9 axios äºŒæ¬¡å°è£…</h4>
<ul>
<li>
<p>ä¸ºä»€ä¹ˆ</p>
<ul>
<li>
<p>æ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤</p>
</li>
<li>
<p>è¯·æ±‚çš„ url åœ°å€ç»Ÿä¸€ç®¡ç†</p>
</li>
<li>
<p>æŸäº›æ¥å£éœ€è¦ä¼ é€’ headers</p>
</li>
</ul>
</li>
<li>
<p>request.js</p>
</li>
</ul>
<pre><code class="language-js">// 1. å¼•å…¥axios
import axios from 'axios';
// 2. åˆ›å»ºaxioså¯¹è±¡
const service = axios.create();
// 3. è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå‰ç«¯ç»™åç«¯å‘é€æ•°æ®ï¼Œæ²¡æœ‰åˆ°åç«¯ï¼‰
// åšçš„äº‹ï¼šheadersç»™åç«¯ä¼ é€’token
service.interceptors.request.use(
    config =&gt; {
    	return config;
	}, error =&gt; {
        Promise.reject(error);
	}
});
// 4.å“åº”æ‹¦æˆªå™¨ï¼ˆåç«¯ç»™å‰ç«¯è¿”å›æ•°æ®ï¼Œå‰ç«¯åˆ°åç«¯äº†ï¼‰
service.interceptors.response.use(
    (response) =&gt; {
        // è¿™é‡Œæ˜¯å¯¹å“åº”çš„ç®€åŒ– data = response.data
        const { data, meta } = response.data
        if (meta.status === 200 || meta.status === 201){
            //å›ä¼ çš„æ•°æ®
            return data
        } else {
            ElMessage.error(meta.msg)
            return Promise.reject(new Error(meta.msg))
        }
    },
    error =&gt; {
        error.response &amp;&amp; ElMessage.error(error.response.data)
        return Promise.reject(new Error(error.response.data))
    }
)
export default service
</code></pre>
<h4 id="21110-api-è§£è€¦">2.11.10 API è§£è€¦</h4>
<ul>
<li>å°è£…</li>
</ul>
<pre><code class="language-js">import request from "@/utils/request";
export function getsliders() {
	return request({
		url: "/api/slider/getsliders",
	});
}
</code></pre>
<ul>
<li>ä½¿ç”¨</li>
</ul>
<pre><code class="language-html">&lt;script type="text/javascript"&gt;
	import {getSliders} from '@/utils/api/course'
	export default{
	    data (){
	        return {
	            list:[]
	        }
	    },
	    created() {
	        getsliders().then (res=&gt;{
	            console.log(res)
	        })
	    }
&lt;/script&gt;
</code></pre>
<h2 id="3-ajax-åŸç†">3. Ajax åŸç†</h2>
<h3 id="31-xmlhttprequest">3.1 XMLHttpRequest</h3>
<ul>
<li>
<p>Ajax æ˜¯æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šä¿¡çš„æŠ€æœ¯ï¼Œé‡‡ç”¨ XMLHttpRequest å¯¹è±¡ç›¸å…³ä»£ç </p>
</li>
<li>
<p>axios æ˜¯å¯¹ XHR ç›¸å…³ä»£ç è¿›è¡Œäº†å°è£…ï¼Œè®©æˆ‘ä»¬åªå…³å¿ƒä¼ é€’çš„æ¥å£å‚æ•°</p>
</li>
<li>
<p>å­¦ä¹  XHR ä¹Ÿæ˜¯äº†è§£ axios å†…éƒ¨ä¸æœåŠ¡å™¨äº¤äº’è¿‡ç¨‹çš„çœŸæ­£åŸç†</p>
</li>
<li>
<p>è¯­æ³•ï¼š</p>
</li>
</ul>
<pre><code class="language-js">const xhr = new XMLHttpRequest();
xhr.open("è¯·æ±‚æ–¹æ³•", "è¯·æ±‚urlç½‘å€");
xhr.addEventListener("loadend", () =&gt; {
	// å“åº”ç»“æœ
	console.log(xhr.response);
});
xhr.send();
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165500128-947243202.png" alt="" loading="lazy"></p>
<ul>
<li>ç¤ºä¾‹ 1ï¼šè·å–æ‰€æœ‰çœä»½åˆ—è¡¨å¹¶å±•ç¤ºåˆ°é¡µé¢ä¸Š</li>
</ul>
<pre><code class="language-html">&lt;p class="my-p"&gt;&lt;/p&gt;
&lt;script&gt;
	/**
	 * ç›®æ ‡ï¼šä½¿ç”¨XMLHttpRequestå¯¹è±¡ä¸æœåŠ¡å™¨é€šä¿¡
	 *  1. åˆ›å»º XMLHttpRequest å¯¹è±¡
	 *  2. é…ç½®è¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚ url åœ°å€
	 *  3. ç›‘å¬ loadend äº‹ä»¶ï¼Œæ¥æ”¶å“åº”ç»“æœ
	 *  4. å‘èµ·è¯·æ±‚
	 */
	const xhr = new XMLHttpRequest();

	xhr.open("get", "http://hmajax.itheima.net/api/province");
	// æºå¸¦æŸ¥è¯¢å‚æ•°
	// xhr.open('get', 'http://hmajax.itheima.net/api/city?pname=è¾½å®çœ')

	xhr.addEventListener("loadend", () =&gt; {
		// console.log(xhr.response)
		const data = JSON.parse(xhr.response);
		document.querySelector(".my-p").innerHTML = data.list.join("&lt;br&gt;");
	});

	xhr.send();
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ 2ï¼šåœ°åŒºæŸ¥è¯¢</li>
</ul>
<pre><code class="language-html">&lt;div class="container"&gt;
	&lt;form id="editForm" class="row"&gt;
		&lt;!-- è¾“å…¥çœä»½åå­— --&gt;
		&lt;div class="mb-3 col"&gt;
			&lt;label class="form-label"&gt;çœä»½åå­—&lt;/label&gt;
			&lt;input type="text" value="åŒ—äº¬" name="province" class="form-control province" placeholder="è¯·è¾“å…¥çœä»½åç§°" /&gt;
		&lt;/div&gt;
		&lt;!-- è¾“å…¥åŸå¸‚åå­— --&gt;
		&lt;div class="mb-3 col"&gt;
			&lt;label class="form-label"&gt;åŸå¸‚åå­—&lt;/label&gt;
			&lt;input type="text" value="åŒ—äº¬å¸‚" name="city" class="form-control city" placeholder="è¯·è¾“å…¥åŸå¸‚åç§°" /&gt;
		&lt;/div&gt;
	&lt;/form&gt;
	&lt;button type="button" class="btn btn-primary sel-btn"&gt;æŸ¥è¯¢&lt;/button&gt;
	&lt;br /&gt;
	&lt;br /&gt;
	&lt;p&gt;åœ°åŒºåˆ—è¡¨:&lt;/p&gt;
	&lt;ul class="list-group"&gt;
		&lt;!-- ç¤ºä¾‹åœ°åŒº --&gt;
		&lt;!-- &lt;li class="list-group-item"&gt;ä¸œåŸåŒº&lt;/li&gt; --&gt;
	&lt;/ul&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	/**
	 * ç›®æ ‡: æ ¹æ®çœä»½å’ŒåŸå¸‚åå­—, æŸ¥è¯¢å¯¹åº”çš„åœ°åŒºåˆ—è¡¨
	 */
	document.querySelector(".sel-btn").addEventListener("click", () =&gt; {
		const pname = document.querySelector(".province").value;
		const cname = document.querySelector(".city").value;

		paramsObj = new URLSearchParams({
			pname,
			cname,
		});

		const xhr = new XMLHttpRequest();
		xhr.open("get", `http://hmajax.itheima.net/api/area?${paramsObj}`);
		xhr.addEventListener("loadend", () =&gt; {
			const data = JSON.parse(xhr.response);
			document.querySelector(".list-group").innerHTML = data.list
				.map(areaName =&gt; {
					return `&lt;li class="list-group-item"&gt;${areaName}&lt;/li&gt;`;
				})
				.join("");
		});
		xhr.send();
	});
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ 3ï¼šæ•°æ®æäº¤</li>
</ul>
<pre><code class="language-html">&lt;button class="reg-btn"&gt;æ³¨å†Œç”¨æˆ·&lt;/button&gt;
&lt;script&gt;
	/**
	 * ç›®æ ‡ï¼šä½¿ç”¨xhrè¿›è¡Œæ•°æ®æäº¤-å®Œæˆæ³¨å†ŒåŠŸèƒ½
	 */
	document.querySelector(".reg-btn").addEventListener("click", () =&gt; {
		const xhr = new XMLHttpRequest();

		xhr.open("post", "http://hmajax.itheima.net/api/register");

		xhr.addEventListener("loadend", () =&gt; {
			console.log(xhr.response);
		});
		// è®¾ç½®è¯·æ±‚å¤´
		xhr.setRequestHeader("content-type", "application/json");

		// å‡†å¤‡æäº¤çš„æ•°æ®
		const userObj = {
			username: "itheima667",
			password: "123456",
		};

		const userStr = JSON.stringify(userObj);
		xhr.send(userStr);
	});
&lt;/script&gt;
</code></pre>
<h3 id="32-promise">3.2 Promise</h3>
<h4 id="321-å¯¹äºå¼‚æ­¥çš„ç†è§£">3.2.1 å¯¹äºå¼‚æ­¥çš„ç†è§£</h4>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<pre><code class="language-js">console.log("å¼€å§‹"); // ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º "å¼€å§‹"

setTimeout(() =&gt; {
	// è®¾ç½®ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œå»¶è¿Ÿ 1000 æ¯«ç§’åæ‰§è¡Œ
	console.log("å¼‚æ­¥ä»»åŠ¡å®Œæˆ"); // è¿™ä¸ªä»£ç åœ¨ 1 ç§’åæ‰§è¡Œ
}, 1000);

console.log("ç»“æŸ"); // ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º "ç»“æŸ"
</code></pre>
<ul>
<li>
<p>è¾“å‡ºé¡ºåº</p>
<ul>
<li>
<p><strong>å¼€å§‹</strong>ï¼šç¬¬ä¸€ä¸ª<code>console.log</code>ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º<code>"å¼€å§‹"</code></p>
</li>
<li>
<p><strong>ç»“æŸ</strong>ï¼šç¬¬äºŒä¸ª<code>console.log</code>ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º<code>"ç»“æŸ"</code></p>
</li>
<li>
<p><strong>å¼‚æ­¥ä»»åŠ¡å®Œæˆ</strong>ï¼šåœ¨è®¾ç½®çš„ 1 ç§’ä¹‹åï¼Œ<code>setTimeout</code>ä¸­çš„å›è°ƒå‡½æ•°æ‰è¢«è°ƒç”¨ï¼Œè¾“å‡º<code>"å¼‚æ­¥ä»»åŠ¡å®Œæˆ"</code></p>
</li>
</ul>
</li>
<li>
<p>å¼‚æ­¥ä½“ç°</p>
<ul>
<li>
<p><strong>éé˜»å¡</strong>ï¼šåœ¨<code>setTimeout</code>è°ƒç”¨åï¼Œä»£ç å¹¶æ²¡æœ‰ç­‰å¾… 1 ç§’ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œåé¢çš„<code>console.log('ç»“æŸ')</code>ã€‚è¿™è¯´æ˜<code>setTimeout</code>æ˜¯éé˜»å¡çš„</p>
</li>
<li>
<p><strong>æ‰§è¡Œé¡ºåº</strong>ï¼šå³ä½¿<code>setTimeout</code>è®¾ç½®äº†ä¸€ä¸ª 1 ç§’çš„å»¶è¿Ÿï¼Œå®ƒçš„å›è°ƒå‡½æ•°å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹ç©ºé—²æ—¶å†æ‰§è¡Œã€‚è¿™å¯¼è‡´<code>"ç»“æŸ"</code>ä¼šåœ¨<code>"å¼‚æ­¥ä»»åŠ¡å®Œæˆ"</code>ä¹‹å‰è¾“å‡º</p>
</li>
</ul>
</li>
<li>
<p>æ€»ç»“</p>
<ul>
<li>å¼‚æ­¥å…è®¸ä»£ç åœ¨ç­‰å¾…æŸä¸ªæ“ä½œï¼ˆå¦‚å®šæ—¶å™¨ï¼‰æ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ï¼Œè€Œä¸ä¼šé˜»å¡æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h4 id="322-æ¦‚è¿°">3.2.2 æ¦‚è¿°</h4>
<ul>
<li>
<p>æ˜¯ä»€ä¹ˆ</p>
<ul>
<li>è¡¨ç¤ºï¼ˆç®¡ç†ï¼‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œæœ€ç»ˆçŠ¶æ€å’Œç»“æœå€¼çš„å¯¹è±¡</li>
</ul>
</li>
<li>
<p>Promise çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>
<p>é€»è¾‘æ›´æ¸…æ™°ï¼ˆæˆåŠŸæˆ–å¤±è´¥ä¼šå…³è”åç»­çš„å¤„ç†å‡½æ•°ï¼‰</p>
</li>
<li>
<p>äº†è§£ axios å‡½æ•°å†…éƒ¨è¿ä½œçš„æœºåˆ¶</p>
</li>
<li>
<p>è§£å†³å›è°ƒå‡½æ•°åœ°ç‹±é—®é¢˜</p>
</li>
</ul>
</li>
<li>
<p>Promise ç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„è¯­æ³•</p>
</li>
</ul>
<pre><code class="language-js">// 1. åˆ›å»º Promise å¯¹è±¡
const p = new Promise((resolve, reject) =&gt; {
	// 2. æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡-å¹¶ä¼ é€’ç»“æœ
	// æˆåŠŸè°ƒç”¨: resolve(å€¼) è§¦å‘ then() æ‰§è¡Œ
	// å¤±è´¥è°ƒç”¨: reject(å€¼) è§¦å‘ catch() æ‰§è¡Œ
});
// 3. æ¥æ”¶ç»“æœ
p.then(result =&gt; {
	// æˆåŠŸ
}).catch(error =&gt; {
	// å¤±è´¥
});
</code></pre>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡ï¼šä½¿ç”¨Promiseç®¡ç†å¼‚æ­¥ä»»åŠ¡
 */
const p = new Promise((resolve, reject) =&gt; {
	setTimeout(() =&gt; {
		// resolve('æ¨¡æ‹ŸAJAXè¯·æ±‚-æˆåŠŸç»“æœ')
		reject(new Error("æ¨¡æ‹ŸAJAXè¯·æ±‚-å¤±è´¥ç»“æœ"));
	}, 2000);
});

p.then(result =&gt; {
	console.log(result);
}).catch(error =&gt; {
	console.log(error);
});
</code></pre>
<h4 id="323-ä¸‰ç§çŠ¶æ€">3.2.3 ä¸‰ç§çŠ¶æ€</h4>
<ul>
<li>
<p>å¾…å®šï¼ˆpendingï¼‰ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»</p>
</li>
<li>
<p>å·²å…‘ç°ï¼ˆfulfilledï¼‰ï¼šæ“ä½œæˆåŠŸå®Œæˆ</p>
</li>
<li>
<p>å·²æ‹’ç»ï¼ˆrejectedï¼‰ï¼šæ“ä½œå¤±è´¥</p>
</li>
<li>
<p>æ”¹å˜ Promise å¯¹è±¡çŠ¶æ€åï¼Œå†…éƒ¨è§¦å‘å¯¹åº”å›è°ƒå‡½æ•°ä¼ å‚å¹¶æ‰§è¡Œ</p>
</li>
</ul>
<img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165522253-606564125.png" style="zoom: 50%">
<ul>
<li>æ³¨ï¼šæ¯ä¸ª Promise å¯¹è±¡ä¸€æ—¦è¢«å…‘ç°/æ‹’ç»ï¼Œé‚£ä¹ˆçŠ¶æ€æ— æ³•å†è¢«æ”¹å˜</li>
</ul>
<h4 id="324-æ¡ˆä¾‹-è·å–çœä»½åˆ—è¡¨">3.2.4 æ¡ˆä¾‹-è·å–çœä»½åˆ—è¡¨</h4>
<pre><code class="language-html">&lt;p class="my-p"&gt;&lt;/p&gt;
&lt;script&gt;
	const p = new Promise((resolve, reject) =&gt; {
		const xhr = new XMLHttpRequest();

		xhr.open("get", "http://hmajax.itheima.net/api/province");

		xhr.addEventListener("loadend", () =&gt; {
			// åˆ¤æ–­è¯·æ±‚æˆåŠŸä¸å¦
			if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
				resolve(JSON.parse(xhr.response));
			} else {
				reject(new Error(xhr.response));
			}
		});

		xhr.send();
	});

	p.then(reslut =&gt; {
		document.querySelector(".my-p").innerHTML = reslut.list.join("&lt;br&gt;");
	}).catch(error =&gt; {
		// æ‰“å°è¯¦ç»†ä¿¡æ¯
		// console.dir(error)
		document.querySelector(".my-p").innerHTML = error.message;
	});
&lt;/script&gt;
</code></pre>
<h4 id="325-å°è£…ç®€æ˜“-axios">3.2.5 å°è£…ç®€æ˜“ axios</h4>
<ul>
<li>
<p>æ­¥éª¤</p>
<ul>
<li>
<p>å®šä¹‰ myAxios å‡½æ•°ï¼Œæ¥æ”¶é…ç½®å¯¹è±¡ï¼Œè¿”å› Promise å¯¹è±¡</p>
</li>
<li>
<p>å‘èµ· XHR è¯·æ±‚ï¼Œé»˜è®¤è¯·æ±‚æ–¹æ³•ä¸º GET</p>
</li>
<li>
<p>è°ƒç”¨æˆåŠŸ/å¤±è´¥çš„å¤„ç†ç¨‹åº</p>
</li>
<li>
<p>ä½¿ç”¨ myAxios å‡½æ•°ï¼Œè·å–çœä»½åˆ—è¡¨å±•ç¤º</p>
</li>
</ul>
</li>
<li>
<p>æ ¸å¿ƒè¯­æ³•</p>
</li>
</ul>
<pre><code class="language-js">function myAxios(config) {
	return new Promise((resolve, reject) =&gt; {
		// XHR è¯·æ±‚
		// è°ƒç”¨æˆåŠŸ/å¤±è´¥çš„å¤„ç†ç¨‹åº
	});
}

myAxios({
	url: "ç›®æ ‡èµ„æºåœ°å€",
})
	.then(result =&gt; {})
	.catch(error =&gt; {});
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šè·å–çœä»½åˆ—è¡¨</li>
</ul>
<pre><code class="language-html">&lt;p class="my-p"&gt;&lt;/p&gt;
&lt;script&gt;
	function myAxios(config) {
		return new Promise((resolve, reject) =&gt; {
			const xhr = new XMLHttpRequest();

			xhr.open(config.method || "get", config.url);

			xhr.addEventListener("loadend", () =&gt; {
				if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
					resolve(JSON.parse(xhr.response));
				} else {
					reject(new Error(xhr.response));
				}
			});

			xhr.send();
		});
	}

	myAxios({
		url: "http://hmajax.itheima.net/api/province",
	})
		.then(result =&gt; {
			document.querySelector(".my-p").innerHTML = result.list.join("&lt;br&gt;");
		})
		.catch(error =&gt; {
			document.querySelector(".my-p").innerHTML = error.message;
		});
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šè·å–åœ°åŒºåˆ—è¡¨</li>
</ul>
<pre><code class="language-html">&lt;p class="my-p"&gt;&lt;/p&gt;
&lt;script&gt;
	function myAxios(config) {
		return new Promise((resolve, reject) =&gt; {
			const xhr = new XMLHttpRequest();
			// æŸ¥è¯¢å‚æ•°
			if (config.params) {
				const paramsObj = new URLSearchParams(config.params);
				const paramsStr = paramsObj.toString();
				config.url += `?${paramsStr}`;
			}

			xhr.open(config.method || "get", config.url);

			xhr.addEventListener("loadend", () =&gt; {
				if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
					resolve(JSON.parse(xhr.response));
				} else {
					reject(new Error(xhr.response));
				}
			});

			xhr.send();
		});
	}

	myAxios({
		url: "http://hmajax.itheima.net/api/area",
		params: {
			pname: "è¾½å®çœ",
			cname: "å¤§è¿å¸‚",
		},
	})
		.then(result =&gt; {
			document.querySelector(".my-p").innerHTML = result.list.join("&lt;br&gt;");
		})
		.catch(error =&gt; {
			document.querySelector(".my-p").innerHTML = error.message;
		});
&lt;/script&gt;
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šæ³¨å†Œç”¨æˆ·</li>
</ul>
<pre><code class="language-html">&lt;p class="my-p"&gt;&lt;/p&gt;
&lt;script&gt;
	function myAxios(config) {
		return new Promise((resolve, reject) =&gt; {
			const xhr = new XMLHttpRequest();
			// æŸ¥è¯¢å‚æ•°
			if (config.params) {
				const paramsObj = new URLSearchParams(config.params);
				const paramsStr = paramsObj.toString();
				config.url += `?${paramsStr}`;
			}

			xhr.open(config.method || "get", config.url);

			xhr.addEventListener("loadend", () =&gt; {
				if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) {
					resolve(JSON.parse(xhr.response));
				} else {
					reject(new Error(xhr.response));
				}
			});

			if (config.data) {
				xhr.setRequestHeader("content-type", "application/json");
				const jsonStr = JSON.stringify(config.data);
				xhr.send(jsonStr);
			} else {
				xhr.send();
			}
		});
	}

	myAxios({
		url: "http://hmajax.itheima.net/api/register",
		method: "post",
		data: {
			username: "itheima776",
			password: "66688879",
		},
	})
		.then(result =&gt; {
			document.querySelector(".my-p").innerHTML = result.message;
		})
		.catch(error =&gt; {
			document.querySelector(".my-p").innerHTML = error.message;
		});
&lt;/script&gt;
</code></pre>
<h4 id="326-å›è°ƒå‡½æ•°åœ°ç‹±">3.2.6 å›è°ƒå‡½æ•°åœ°ç‹±</h4>
<ul>
<li>
<p>æ¦‚å¿µï¼šåœ¨å›è°ƒå‡½æ•°ä¸­åµŒå¥—å›è°ƒå‡½æ•°ï¼Œä¸€ç›´åµŒå¥—ä¸‹å»å°±å½¢æˆäº†å›è°ƒå‡½æ•°åœ°ç‹±</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šå¯è¯»æ€§å·®ï¼Œå¼‚å¸¸æ— æ³•æ•è·ï¼Œè€¦åˆæ€§ä¸¥é‡ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«</p>
</li>
</ul>
<pre><code class="language-html">&lt;form&gt;
	&lt;span&gt;çœä»½ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="province"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åŸå¸‚ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="city"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åœ°åŒºï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="area"&gt;&lt;/option&gt;
	&lt;/select&gt;
&lt;/form&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	/**
	 * ç›®æ ‡ï¼šæ¼”ç¤ºå›è°ƒå‡½æ•°åœ°ç‹±
	 * éœ€æ±‚ï¼šè·å–é»˜è®¤ç¬¬ä¸€ä¸ªçœï¼Œç¬¬ä¸€ä¸ªå¸‚ï¼Œç¬¬ä¸€ä¸ªåœ°åŒºå¹¶å±•ç¤ºåœ¨ä¸‹æ‹‰èœå•ä¸­
	 */
	axios({ url: "http://hmajax.itheima.net/api/province" })
		.then(result =&gt; {
			const pname = result.data.list[0];
			document.querySelector(".province").innerHTML = pname;
			axios({ url: "http://hmajax.itheima.net/api/city", params: { pname } }).then(result =&gt; {
				const cname = result.data.list[0];
				document.querySelector(".city").innerHTML = cname;
				axios({ url: "http://hmajax.itheima.net/api/area", params: { pname, cname } }).then(result =&gt; {
					const aname = result.data.list[0];
					document.querySelector(".area").innerHTML = aname;
				});
			});
		})
		.catch(error =&gt; {
			console.log(error);
		});
&lt;/script&gt;
</code></pre>
<h4 id="327-promise-é“¾å¼è°ƒç”¨">3.2.7 Promise é“¾å¼è°ƒç”¨</h4>
<ul>
<li>
<p>æ¦‚å¿µï¼šä¾é  then() æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„ Promise å¯¹è±¡ç‰¹æ€§ï¼Œç»§ç»­ä¸²è”ä¸‹ä¸€ç¯ä»»åŠ¡ï¼Œç›´åˆ°ç»“æŸ</p>
</li>
<li>
<p>ç»†èŠ‚ï¼šthen() å›è°ƒå‡½æ•°ä¸­çš„è¿”å›å€¼ï¼Œä¼šå½±å“æ–°ç”Ÿæˆçš„ Promise å¯¹è±¡æœ€ç»ˆçŠ¶æ€å’Œç»“æœ</p>
</li>
<li>
<p>å¥½å¤„ï¼šé€šè¿‡é“¾å¼è°ƒç”¨ï¼Œè§£å†³å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜</p>
</li>
</ul>
<pre><code class="language-js">const p = new Promise((resolve, reject) =&gt; {
	setTimeout(() =&gt; {
		resolve("åŒ—äº¬å¸‚");
	}, 1000);
});

const p2 = p.then(result =&gt; {
	console.log(result);
	return new Promise((resolve, reject) =&gt; {
		setTimeout(() =&gt; {
			resolve(`${result} --- åŒ—äº¬`);
		}, 1000);
	});
});

p2.then(result =&gt; {
	console.log(result);
});
</code></pre>
<ul>
<li>è§£å†³å›è°ƒå‡½æ•°åœ°ç‹±</li>
</ul>
<pre><code class="language-html">&lt;form&gt;
	&lt;span&gt;çœä»½ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="province"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åŸå¸‚ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="city"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åœ°åŒºï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="area"&gt;&lt;/option&gt;
	&lt;/select&gt;
&lt;/form&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	let pname = "";
	axios({ url: "http://hmajax.itheima.net/api/province" })
		.then(result =&gt; {
			pname = result.data.list[0];
			document.querySelector(".province").innerHTML = pname;
			return axios({ url: "http://hmajax.itheima.net/api/city", params: { pname } });
		})
		.then(result =&gt; {
			const cname = result.data.list[0];
			document.querySelector(".city").innerHTML = cname;
			return axios({ url: "http://hmajax.itheima.net/api/area", params: { pname, cname } });
		})
		.then(result =&gt; {
			const aname = result.data.list[0];
			document.querySelector(".area").innerHTML = aname;
		});
&lt;/script&gt;
</code></pre>
<h4 id="328-async-å‡½æ•°å’Œ-await">3.2.8 async å‡½æ•°å’Œ await</h4>
<blockquote>
<p>åœ¨ async å‡½æ•°å†…ï¼Œä½¿ç”¨ await å…³é”®å­—å–ä»£ then å‡½æ•°ï¼Œç­‰å¾…è·å– Promise å¯¹è±¡æˆåŠŸçŠ¶æ€çš„ç»“æœå€¼</p>
</blockquote>
<pre><code class="language-html">&lt;form&gt;
	&lt;span&gt;çœä»½ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="province"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åŸå¸‚ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="city"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åœ°åŒºï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="area"&gt;&lt;/option&gt;
	&lt;/select&gt;
&lt;/form&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	async function getData() {
		const pObj = await axios({ url: "http://hmajax.itheima.net/api/province" });
		const pname = pObj.data.list[0];
		const cObj = await axios({ url: "http://hmajax.itheima.net/api/city", params: { pname } });
		const cname = cObj.data.list[0];
		const aObj = await axios({ url: "http://hmajax.itheima.net/api/area", params: { pname, cname } });
		const aname = aObj.data.list[0];

		document.querySelector(".province").innerHTML = pname;
		document.querySelector(".city").innerHTML = cname;
		document.querySelector(".area").innerHTML = aname;
	}
	getData();
&lt;/script&gt;
</code></pre>
<ul>
<li>æ•è·é”™è¯¯</li>
</ul>
<pre><code class="language-js">try {
	// è¦æ‰§è¡Œçš„ä»£ç 
	// å¦‚æœtryé‡ŒæŸè¡Œä»£ç æŠ¥é”™åï¼Œtryä¸­å‰©ä½™çš„ä»£ç ä¸ä¼šæ‰§è¡Œäº†
} catch (error) {
	// error æ¥æ”¶çš„æ˜¯
	é”™è¯¯æ¶ˆæ¯;
	// try é‡Œä»£ç ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œç›´æ¥è¿›å…¥è¿™é‡Œæ‰§è¡Œ
}
</code></pre>
<ul>
<li>ç¤ºä¾‹</li>
</ul>
<pre><code class="language-html">&lt;form&gt;
	&lt;span&gt;çœä»½ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="province"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åŸå¸‚ï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="city"&gt;&lt;/option&gt;
	&lt;/select&gt;
	&lt;span&gt;åœ°åŒºï¼š&lt;/span&gt;
	&lt;select&gt;
		&lt;option class="area"&gt;&lt;/option&gt;
	&lt;/select&gt;
&lt;/form&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	async function getData() {
		try {
			const pObj = await axios({ url: "http://hmajax.itheima.net/api/province" });
			const pname = pObj.data.list[0];
			const cObj = await axios({ url: "http://hmajax.itheima.net/api/city", params: { pname } });
			const cname = cObj.data.list[0];
			const aObj = await axios({ url: "http://hmajax.itheima.net/api/area", params: { pname, cname } });
			const aname = aObj.data.list[0];

			document.querySelector(".province").innerHTML = pname;
			document.querySelector(".city").innerHTML = cname;
			document.querySelector(".area").innerHTML = aname;
		} catch (error) {
			console.dir(error);
		}
	}
	getData();
&lt;/script&gt;
</code></pre>
<h3 id="33-äº‹ä»¶å¾ªç¯eventloop">3.3 äº‹ä»¶å¾ªç¯ï¼ˆEventLoopï¼‰</h3>
<ul>
<li>
<p>ä½œç”¨ï¼šäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ï¼Œæ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡</p>
</li>
<li>
<p>åŸå› ï¼šJavaScript å•çº¿ç¨‹ï¼ˆæŸä¸€åˆ»åªèƒ½æ‰§è¡Œä¸€è¡Œä»£ç ï¼‰ï¼Œä¸ºäº†è®©è€—æ—¶ä»£ç ä¸é˜»å¡å…¶ä»–ä»£ç è¿è¡Œï¼Œè®¾è®¡äº†äº‹ä»¶å¾ªç¯æ¨¡å‹</p>
</li>
<li>
<p>æ¦‚å¿µï¼šæ‰§è¡Œä»£ç å’Œæ”¶é›†å¼‚æ­¥ä»»åŠ¡çš„æ¨¡å‹ï¼Œåœ¨è°ƒç”¨æ ˆç©ºé—²æ—¶ï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œå›è°ƒå‡½æ•°çš„æ‰§è¡Œæœºåˆ¶</p>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165600986-1863158275.png" alt="" loading="lazy"></p>
<ul>
<li>
<p>JavaScript å†…ä»£ç å¦‚ä½•æ‰§è¡Œï¼Ÿ</p>
<ul>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥ä»£ç äº¤ç»™å®¿ä¸»æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œï¼Œå¼‚æ­¥æœ‰äº†ç»“æœåï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—æ’é˜Ÿå½“è°ƒç”¨æ ˆç©ºé—²åï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„å›è°ƒå‡½æ•°</li>
</ul>
</li>
<li>
<p>ç»ƒä¹ </p>
</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡ï¼šé˜…è¯»å¹¶å›ç­”æ‰§è¡Œçš„é¡ºåºç»“æœ
 */
console.log(1);
setTimeout(() =&gt; {
	console.log(2);
}, 0);
function myFn() {
	console.log(3);
}
function ajaxFn() {
	const xhr = new XMLHttpRequest();
	xhr.open("GET", "http://hmajax.itheima.net/api/province");
	xhr.addEventListener("loadend", () =&gt; {
		console.log(4);
	});
	xhr.send();
}
for (let i = 0; i &lt; 1; i++) {
	console.log(5);
}
ajaxFn();
document.addEventListener("click", () =&gt; {
	console.log(6);
});
myFn();
</code></pre>
<blockquote>
<p>ç»“æœï¼š1 5 3 2 4 ç‚¹å‡»ä¸€æ¬¡ document å°±ä¼šæ‰§è¡Œä¸€æ¬¡æ‰“å° 6</p>
</blockquote>
<h3 id="34-å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡">3.4 å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</h3>
<ul>
<li>
<p>å¼‚æ­¥ä»»åŠ¡åˆ†ä¸º</p>
<ul>
<li>
<p>å®ä»»åŠ¡ï¼šç”±æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç </p>
</li>
<li>
<p>å¾®ä»»åŠ¡ï¼šç”± JS å¼•æ“ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç </p>
</li>
</ul>
</li>
</ul>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230165617084-609154399.png" alt="" loading="lazy"></p>
<ul>
<li>äº‹ä»¶å¾ªç¯æ¨¡å‹</li>
</ul>
<pre><code class="language-js">console.log(1);
setTimeout(() =&gt; {
	console.log(2);
}, 0);
const p = new Promise((resolve, reject) =&gt; {
	resolve(3);
});
p.then(res =&gt; {
	console.log(res);
});
console.log(4);
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230170048532-882243106.png" alt="" loading="lazy"></p>
<ul>
<li>
<p>æ³¨ï¼šå®ä»»åŠ¡æ¯æ¬¡åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç æ—¶ï¼Œäº§ç”Ÿå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ä»»åŠ¡åï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ç©ºé—´é‡Šæ”¾ï¼ä¸‹ä¸€æ¬¡å®ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œé‡åˆ°å¾®ä»»åŠ¡ä»£ç ï¼Œæ‰ä¼šå†æ¬¡ç”³è¯·å¾®ä»»åŠ¡é˜Ÿåˆ—ç©ºé—´æ”¾å…¥å›è°ƒå‡½æ•°æ¶ˆæ¯æ’é˜Ÿ</p>
</li>
<li>
<p>æ€»ç»“ï¼šä¸€ä¸ªå®ä»»åŠ¡åŒ…å«å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä»–ä»¬ä¹‹é—´æ˜¯åŒ…å«å…³ç³»ï¼Œä¸æ˜¯å¹¶åˆ—å…³ç³»</p>
</li>
<li>
<p>ç»å…¸é¢è¯•é¢˜</p>
</li>
</ul>
<pre><code class="language-js">// ç›®æ ‡ï¼šå›ç­”ä»£ç æ‰§è¡Œé¡ºåº
console.log(1);
setTimeout(() =&gt; {
	console.log(2);
	const p = new Promise(resolve =&gt; resolve(3));
	p.then(result =&gt; console.log(result));
}, 0);
const p = new Promise(resolve =&gt; {
	setTimeout(() =&gt; {
		console.log(4);
	}, 0);
	resolve(5);
});
p.then(result =&gt; console.log(result));
const p2 = new Promise(resolve =&gt; resolve(6));
p2.then(result =&gt; console.log(result));
console.log(7);
</code></pre>
<blockquote>
<p>ç»“æœï¼š1 7 5 6 2 3 4</p>
</blockquote>
<h3 id="35-promiseall-é™æ€æ–¹æ³•">3.5 Promise.all é™æ€æ–¹æ³•</h3>
<ul>
<li>ä½œç”¨ï¼šåˆå¹¶å¤šä¸ª Promise å¯¹è±¡ï¼Œç­‰å¾…æ‰€æœ‰åŒæ—¶æˆåŠŸå®Œæˆï¼ˆæˆ–æŸä¸€ä¸ªå¤±è´¥ï¼‰ï¼Œåšåç»­é€»è¾‘</li>
</ul>
<img src="https://img2024.cnblogs.com/blog/3096011/202412/3096011-20241230170111097-253991772.png" style="zoom: 70%">
<ul>
<li>è¯­æ³•ï¼š</li>
</ul>
<pre><code class="language-js">const p = Promise.all([Promiseå¯¹è±¡, Promiseå¯¹è±¡, ...])	// éœ€è¦ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£çš„æ•°æ®
p.then(result =&gt; {
  // result ç»“æœ: [Promiseå¯¹è±¡æˆåŠŸç»“æœ, Promiseå¯¹è±¡æˆåŠŸç»“æœ, ...]
}).catch(error =&gt; {
  // ç¬¬ä¸€ä¸ªå¤±è´¥çš„ Promise å¯¹è±¡ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡
})
</code></pre>
<ul>
<li>ç¤ºä¾‹ï¼šåŒæ—¶è¯·æ±‚â€œåŒ—äº¬â€ï¼Œâ€œä¸Šæµ·â€ï¼Œâ€œå¹¿å·â€ï¼Œâ€œæ·±åœ³â€çš„å¤©æ°”å¹¶åœ¨ç½‘é¡µå°½å¯èƒ½åŒæ—¶æ˜¾ç¤º</li>
</ul>
<pre><code class="language-html">&lt;ul class="my-ul"&gt;&lt;/ul&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	/**
	 * ä¸šåŠ¡ï¼šå½“æˆ‘éœ€è¦åŒä¸€æ—¶é—´æ˜¾ç¤ºå¤šä¸ªè¯·æ±‚çš„ç»“æœæ—¶ï¼Œå°±è¦æŠŠå¤šè¯·æ±‚åˆå¹¶
	 * ä¾‹å¦‚ï¼šé»˜è®¤æ˜¾ç¤º"åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·", "æ·±åœ³"çš„å¤©æ°”åœ¨é¦–é¡µæŸ¥çœ‹
	 * codeï¼š
	 * åŒ—äº¬-110100
	 * ä¸Šæµ·-310100
	 * å¹¿å·-440100
	 * æ·±åœ³-440300
	 */
	// 1. è¯·æ±‚åŸå¸‚å¤©æ°”ï¼Œå¾—åˆ°Promiseå¯¹è±¡ï¼ˆæ­¤å¤„å¯ä»¥ä½¿ç”¨æ•°ç»„éå†ï¼‰
	const bjPromise = axios({ url: "http://hmajax.itheima.net/api/weather", params: { city: "110100" } });
	const shPromise = axios({ url: "http://hmajax.itheima.net/api/weather", params: { city: "310100" } });
	const gzPromise = axios({ url: "http://hmajax.itheima.net/api/weather", params: { city: "440100" } });
	const szPromise = axios({ url: "http://hmajax.itheima.net/api/weather", params: { city: "440300" } });

	// 2. ä½¿ç”¨Promise.allï¼Œåˆå¹¶å¤šä¸ªPromiseå¯¹è±¡
	const p = Promise.all([bjPromise, shPromise, gzPromise, szPromise]);
	p.then(result =&gt; {
		// æ³¨æ„ï¼šç»“æœæ•°ç»„é¡ºåºå’Œåˆå¹¶æ—¶é¡ºåºæ˜¯ä¸€è‡´
		console.log(result);
		const htmlStr = result
			.map(item =&gt; {
				return `&lt;li&gt;${item.data.data.area} --- ${item.data.data.weather}&lt;/li&gt;`;
			})
			.join("");
		document.querySelector(".my-ul").innerHTML = htmlStr;
	}).catch(error =&gt; {
		console.dir(error);
	});
&lt;/script&gt;
</code></pre>
<ul>
<li>
<p>æ¡ˆä¾‹ï¼šå•†å“åˆ†ç±»</p>
<ul>
<li>
<p>ç›®æ ‡ï¼šæŠŠæ‰€æœ‰å•†å“åˆ†ç±»â€œåŒæ—¶â€æ¸²æŸ“åˆ°é¡µé¢ä¸Š</p>
</li>
<li>
<p>è·å–æ‰€æœ‰ä¸€çº§åˆ†ç±»æ•°æ®</p>
</li>
<li>
<p>éå† idï¼Œåˆ›å»ºè·å–äºŒçº§åˆ†ç±»è¯·æ±‚</p>
</li>
<li>
<p>åˆå¹¶æ‰€æœ‰äºŒçº§åˆ†ç±» Promise å¯¹è±¡</p>
</li>
<li>
<p>ç­‰å¾…åŒæ—¶æˆåŠŸåï¼Œæ¸²æŸ“é¡µé¢</p>
</li>
</ul>
</li>
</ul>
<pre><code class="language-html">&lt;!-- å¤§å®¹å™¨ --&gt;
&lt;div class="container"&gt;
	&lt;div class="sub-list"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
	// 1. è·å–æ‰€æœ‰ä¸€çº§åˆ†ç±»æ•°æ®
	axios({
		url: "http://hmajax.itheima.net/api/category/top",
	}).then(result =&gt; {
		// console.log(result)
		const secPromiseList = result.data.data.map(item =&gt; {
			// 2. éå†idï¼Œåˆ›å»ºè·å–äºŒçº§åˆ†ç±»è¯·æ±‚
			return axios({
				url: "http://hmajax.itheima.net/api/category/sub",
				params: {
					id: item.id,
				},
			});
		});
		const p = Promise.all(secPromiseList);
		p.then(result =&gt; {
			// console.log(result)
			document.querySelector(".sub-list").innerHTML = result
				.map(item =&gt; {
					const dataObj = item.data.data;
					return `
          &lt;div class="item"&gt;
            &lt;h3&gt;${dataObj.name}&lt;/h3&gt;
            &lt;ul&gt;
              ${dataObj.children
								.map(item =&gt; {
									return `
                    &lt;li&gt;
                      &lt;a href="javascript:;"&gt;
                        &lt;img src="${item.picture}" /&gt;
                        &lt;p&gt;${item.name}&lt;/p&gt;
    				  &lt;/a&gt;
 				   &lt;/li&gt;
                    `;
								})
								.join("")}
    		&lt;/ul&gt;
    	   &lt;/div&gt;
          `;
				})
				.join("");
		});
	});
&lt;/script&gt;
</code></pre>
<ul>
<li>
<p>æ¡ˆä¾‹ï¼šå­¦ä¹ åé¦ˆ</p>
</li>
<li>
<p>æ¡†æ¶</p>
</li>
</ul>
<pre><code class="language-html">&lt;div class="container"&gt;
	&lt;h4 class="stu-title"&gt;å­¦ä¹ åé¦ˆ&lt;/h4&gt;
	&lt;img class="bg" src="./img/head.png" alt="" /&gt;
	&lt;div class="item-wrap"&gt;
		&lt;div class="hot-area"&gt;
			&lt;span class="hot"&gt;çƒ­é—¨æ ¡åŒº&lt;/span&gt;
			&lt;ul class="nav"&gt;
				&lt;li&gt;&lt;a target="_blank" href="http://bjcp.itheima.com/"&gt;åŒ—äº¬&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a target="_blank" href="http://sh.itheima.com/"&gt;ä¸Šæµ·&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a target="_blank" href="http://gz.itheima.com/"&gt;å¹¿å·&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a target="_blank" href="http://sz.itheima.com/"&gt;æ·±åœ³&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
		&lt;/div&gt;
		&lt;form class="info-form"&gt;
			&lt;div class="area-box"&gt;
				&lt;span class="title"&gt;åœ°åŒºé€‰æ‹©&lt;/span&gt;
				&lt;select name="province" class="province"&gt;
					&lt;option value=""&gt;çœä»½&lt;/option&gt;
				&lt;/select&gt;
				&lt;select name="city" class="city"&gt;
					&lt;option value=""&gt;åŸå¸‚&lt;/option&gt;
				&lt;/select&gt;
				&lt;select name="area" class="area"&gt;
					&lt;option value=""&gt;åœ°åŒº&lt;/option&gt;
				&lt;/select&gt;
			&lt;/div&gt;
			&lt;div class="area-box"&gt;
				&lt;span class="title"&gt;æ‚¨çš„ç§°å‘¼&lt;/span&gt;
				&lt;input type="text" name="nickname" class="nickname" value="æ’­ä»”" /&gt;
			&lt;/div&gt;
			&lt;div class="area-box"&gt;
				&lt;span class="title"&gt;å®è´µå»ºè®®&lt;/span&gt;
				&lt;textarea type="text" name="feedback" class="feedback" placeholder="æ‚¨å¯¹AJAXé˜¶æ®µè¯¾ç¨‹å®è´µçš„å»ºè®®"&gt;&lt;/textarea&gt;
			&lt;/div&gt;
			&lt;div class="area-box"&gt;
				&lt;button type="button" class="btn btn-secondary submit"&gt;ç¡®å®šæäº¤&lt;/button&gt;
			&lt;/div&gt;
		&lt;/form&gt;
	&lt;/div&gt;
&lt;/div&gt;
&lt;script src="https://cdn.bootcdn.net/ajax/libs/axios/1.2.0/axios.min.js"&gt;&lt;/script&gt;
&lt;script src="./js/form-serialize.js"&gt;&lt;/script&gt;
&lt;!-- æ ¸å¿ƒä»£ç  --&gt;
&lt;script src="./js/index.js"&gt;&lt;/script&gt;
</code></pre>
<ul>
<li>index.js</li>
</ul>
<pre><code class="language-js">/**
 * ç›®æ ‡1ï¼šå®Œæˆçœå¸‚åŒºä¸‹æ‹‰åˆ—è¡¨åˆ‡æ¢
 *  1.1 è®¾ç½®çœä»½ä¸‹æ‹‰èœå•æ•°æ®
 *  1.2 åˆ‡æ¢çœä»½ï¼Œè®¾ç½®åŸå¸‚ä¸‹æ‹‰èœå•æ•°æ®ï¼Œæ¸…ç©ºåœ°åŒºä¸‹æ‹‰èœå•
 *  1.3 åˆ‡æ¢åŸå¸‚ï¼Œè®¾ç½®åœ°åŒºä¸‹æ‹‰èœå•æ•°æ®
 */
// 1.1 è®¾ç½®çœä»½ä¸‹æ‹‰èœå•æ•°æ®
axios({
	url: "http://hmajax.itheima.net/api/province",
}).then(result =&gt; {
	const str = result.data.list.map(pname =&gt; `&lt;option value="${pname}"&gt;${pname}&lt;/option&gt;`).join("");
	document.querySelector(".province").innerHTML = `&lt;option value=""&gt;çœä»½&lt;/option&gt;` + str;
});

// 1.2 åˆ‡æ¢çœä»½ï¼Œè®¾ç½®åŸå¸‚ä¸‹æ‹‰èœå•æ•°æ®ï¼Œæ¸…ç©ºåœ°åŒºä¸‹æ‹‰èœå•
document.querySelector(".province").addEventListener("change", async e =&gt; {
	const result = await axios({
		url: "http://hmajax.itheima.net/api/city",
		params: {
			pname: e.target.value,
		},
	});
	// console.log(result)
	const str = result.data.list
		.map(cname =&gt; {
			return `&lt;option value="${cname}"&gt;${cname}&lt;/option&gt;`;
		})
		.join("");

	document.querySelector(".city").innerHTML = `&lt;option value=""&gt;åŸå¸‚&lt;/option&gt;` + str;

	// æ¸…ç©ºåœ°åŒºä¸‹æ‹‰èœå•
	document.querySelector(".area").innerHTML = `&lt;option value=""&gt;åœ°åŒº&lt;/option&gt;`;
});

// 1.3 åˆ‡æ¢åŸå¸‚ï¼Œè®¾ç½®åœ°åŒºä¸‹æ‹‰èœå•æ•°æ®
document.querySelector(".city").addEventListener("change", async e =&gt; {
	const result = await axios({
		url: "http://hmajax.itheima.net/api/area",
		params: {
			pname: document.querySelector(".province").value,
			cname: e.target.value,
		},
	});
	const str = result.data.list.map(aname =&gt; `&lt;option value="${aname}"&gt;${aname}&lt;/option&gt;`);
	document.querySelector(".area").innerHTML = `&lt;option value=""&gt;åœ°åŒº&lt;/option&gt;` + str;
});
/**
 * ç›®æ ‡2ï¼šæ”¶é›†æ•°æ®æäº¤ä¿å­˜
 *  2.1ç›‘å¬æäº¤çš„ç‚¹å‡»äº‹ä»¶
 *  2.2ä¾é æ’ä»¶æ”¶é›†è¡¨å•æ•°æ®
 *  2.3åŸºäºaxiosæäº¤ä¿å­˜ï¼Œæ˜¾ç¤ºç»“æœ
 */

document.querySelector(".submit").addEventListener("click", async () =&gt; {
	try {
		const form = document.querySelector(".info-form");
		const data = serialize(form, { hash: true, empty: true });
		const result = await axios({
			url: "http://hmajax.itheima.net/api/feedback",
			method: "post",
			data,
		});
		alert(result.data.message);
	} catch (error) {
		// console.dir(error)
		alert(error.response.data.message);
	}
});
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="18.33252741632523" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-30 17:08">2024-12-30 17:02</span>&nbsp;
<a href="https://www.cnblogs.com/iRuriCatt">iRuriCatt</a>&nbsp;
é˜…è¯»(<span id="post_view_count">163</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18636389" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18636389);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18636389', targetLink: 'https://www.cnblogs.com/iRuriCatt/p/18636389', title: 'Ajaxå…¥é—¨ä»¥åŠAxiosçš„è¯¦ç»†ä½¿ç”¨ï¼ˆå«Promiseï¼‰' })">ä¸¾æŠ¥</a>
</div>
        
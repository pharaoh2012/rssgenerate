
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/queque/p/18624817" title="å‘å¸ƒäº 2024-12-23 18:57">
    <span role="heading" aria-level="2">çˆ¬è™«è‡ªåŠ¨åŒ–è„šæœ¬+AIèµ‹èƒ½</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        å°ä¼™å­ï¼Œè¿›æ¥çŠ¯ç½ªå§ã€‚èƒ½è¯´çš„åªæœ‰è¿™ä¹ˆå¤šäº†ï¼Œä¸”ç”¨ä¸”çæƒœï¼æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£å¦‚ä½•é€šè¿‡è‡ªåŠ¨åŒ–è„šæœ¬ç®€åŒ–ç¹ççš„ç½‘é¡µæ“ä½œï¼Œä»ç™»å½•åšå®¢å›­è´¦å·åˆ°è·å–è¯„è®ºæ•°æ®ï¼Œæ¶µç›–äº†ç»•è¿‡éªŒè¯ç å’Œè·å–è®¤è¯æ•°æ®çš„å¤šç§æŠ€å·§ã€‚
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>ä¼°è®¡å¤§å®¶å¯¹ç½‘é¡µçˆ¬å–å’Œæ•°æ®æŠ“å–å·²ç»æœ‰æ‰€äº†è§£ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰è®¸å¤šç°æˆçš„è½¯ä»¶å¯ä¾›ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå‰å‡ å¤©ç¾¤é‡Œæœ‰ä½æœ‹å‹åˆ©ç”¨çˆ¬è™«æŠ€æœ¯æŠ“å–äº†AVç½‘ç«™ï¼Œå¹¶æ­å»ºäº†ä¸€ä¸ªç£åŠ›é“¾æ¥ç«™ç‚¹ğŸ˜‚ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•æ¨¡æ‹Ÿæ‰‹åŠ¨æ“ä½œï¼Œå°†ä¸€äº›ç¹ççš„å›ºå®šæ“ä½œè½¬åŒ–ä¸ºè‡ªåŠ¨åŒ–æµç¨‹ã€‚</p>
<h1 id="å£°æ˜">å£°æ˜</h1>
<p>æœ¬æ–‡ä»…åˆ†äº«ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬çš„å¿ƒå¾—ï¼Œä¸å…¶ä»–å†…å®¹åŠæœ¬äººæ— å…³ã€‚</p>
<h1 id="_">ï¼ï¼ï¼</h1>
<p>ä¸ºäº†é¡ºåˆ©å‘è¡¨æ–‡ç« ï¼Œæœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•ç™»å½•åšå®¢å›­è´¦å·ï¼Œå¹¶æ‰“å°å‡ºæ‰€æœ‰è¯„è®ºã€‚<br>
äº®ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¦‚ä½•ç»•è¿‡ç™»å½•æ—¶çš„éªŒè¯ç ï¼Ÿ</li>
<li>å¦‚ä½•è·å–æœªç»è¿‡ SSR æ¸²æŸ“ä¸”éœ€è¦è®¤è¯çš„è¯„è®ºåˆ—è¡¨ï¼Ÿ</li>
</ul>
<p>è¿™äº›å¥‡æ·«æŠ€å·§ä¸€åº”ä¿±å…¨ï¼Œå­¦ä¹ åå—ç›ŠåŒªæµ…ï¼Œåˆ‡è®°çæƒœï¼</p>
<h1 id="æ•™ç¨‹">æ•™ç¨‹</h1>
<h2 id="1-å®‰è£…è‡ªåŠ¨åŒ–è„šæœ¬åŒ…">1. å®‰è£…è‡ªåŠ¨åŒ–è„šæœ¬åŒ…</h2>
<p>åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹åŒ…å¼•ç”¨ï¼š</p>
<pre><code class="language-xml">&lt;ItemGroup&gt;
    &lt;PackageReference Include="HtmlAgilityPack" Version="1.11.54" /&gt;
    &lt;PackageReference Include="Selenium.WebDriver" Version="4.13.1" /&gt;
&lt;/ItemGroup&gt;
</code></pre>
<h2 id="2-ç™»å½•">2. ç™»å½•</h2>
<p>ä½¿ç”¨ä»¥ä¸‹ C# ä»£ç è¿›è¡Œç™»å½•æ“ä½œï¼š</p>
<pre><code class="language-csharp">// è¾“å…¥è´¦å·
IWebElement accountElement = webDriver.FindElement(By.CssSelector("#mat-input-0"));
accountElement.SendKeys(account);
var element_account = accountElement.GetAttribute("value");

// è¾“å…¥å¯†ç 
IWebElement passwordElement = webDriver.FindElement(By.CssSelector("#mat-input-1"));
passwordElement.SendKeys(password);
var element_password = passwordElement.GetAttribute("value");

// æ ¸å¯¹è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®è¾“å…¥
if (account != element_account || password != element_password)
{
    throw new Exception("é¡µé¢è´¦å·å¯†ç è¾“å…¥æœ‰è¯¯ï¼");
}
</code></pre>
<h2 id="3-ç‚¹å‡»éªŒè¯æŒ‰é’®">3. ç‚¹å‡»éªŒè¯æŒ‰é’®</h2>
<pre><code class="language-csharp">// ç‚¹å‡»ç™»å½•æŒ‰é’®
IWebElement loginBtnElement = webDriver.FindElement(By.CssSelector(@"body &gt; app-root &gt; app-sign-in-layout &gt; div &gt; div &gt; app-sign-in &gt; app-content-container &gt; div &gt; div &gt; div &gt; form &gt; div &gt; button"));
loginBtnElement.Click(); // ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œå¼¹å‡ºéªŒè¯

// ç‚¹å‡»éªŒè¯æŒ‰é’®
IWebElement verifyBtnElement = webDriver.FindElement(By.CssSelector(@"#rectMask"));
// æ³¨æ„ï¼šéœ€è¦éšè—è‡ªåŠ¨åŒ–ç‰¹å¾ï¼Œè¯¦è§ç¬¬27è¡Œä»£ç 
verifyBtnElement.Click();
</code></pre>
<h2 id="4-è·å–è¯„è®ºçš„ä¸‰ç§æ–¹å¼">4. è·å–è¯„è®ºçš„ä¸‰ç§æ–¹å¼</h2>
<p>ä¹‹æ‰€ä»¥æä¾›ä¸‰ç§æ–¹å¼ï¼Œæ˜¯å› ä¸ºéƒ¨åˆ†ç½‘ç«™å¯¹è‡ªå·±çš„æ¥å£è¿›è¡Œäº†åè‡ªåŠ¨åŒ–éªŒè¯ï¼Œä½†ç¬¬ä¸‰æ–¹æ¥å£é€šå¸¸å¯è¡Œï¼</p>
<h3 id="41-é€šè¿‡é¡µé¢å…ƒç´ çˆ¬å–">4.1 é€šè¿‡é¡µé¢å…ƒç´ çˆ¬å–</h3>
<pre><code class="language-csharp">IWebElement tableElement = webDriver.FindElement(By.XPath(@"/html/body/cnb-root/cnb-app-layout/div[2]/as-split/as-split-area[2]/div/div/cnb-spinner/div/cnb-comment-main/cnb-spinner/div/div[2]/table"));
// æå–è¡¨æ ¼ä¸»ä½“
IWebElement tbody = tableElement.FindElement(By.TagName("tbody"));
IList&lt;IWebElement&gt; rows = tbody.FindElements(By.TagName("tr"));

// åˆå§‹åŒ–åˆ—è¡¨å­˜å‚¨è¡¨æ ¼æ•°æ®
List&lt;string&gt; tableData = new List&lt;string&gt;();

foreach (var row in rows)
{
    IList&lt;IWebElement&gt; cells = row.FindElements(By.TagName("td"));

    // å¤„ç†è¡¨å¤´å•å…ƒæ ¼
    if (cells.Count == 0)
    {
        cells = row.FindElements(By.TagName("th"));
    }

    List&lt;string&gt; cellTexts = new List&lt;string&gt;();

    foreach (var cell in cells)
    {
        string cellText = cell.Text.Trim();
        cellTexts.Add(cellText);
    }

    // ä½¿ç”¨ç®¡é“ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œé¿å…ä¸æ•°æ®ä¸­çš„é€—å·å†²çª
    string rowData = string.Join(" | ", cellTexts);
    tableData.Add(rowData);
}

// è¾“å‡ºæå–çš„æ•°æ®
foreach (var row in tableData)
{
    Console.WriteLine(row);
}
</code></pre>
<h3 id="42-ç›´æ¥è¯·æ±‚æ¥å£è·å–">4.2 ç›´æ¥è¯·æ±‚æ¥å£è·å–</h3>
<pre><code class="language-csharp">// å¯¼èˆªåˆ°æ¥å£åœ°å€
webDriver.Navigate().GoToUrl(CnBlogs.CommentsGetApi);

var data = webDriver.PageSource;

Console.WriteLine(data);
</code></pre>
<h3 id="43-ä¼ªé€ -html-å…ƒç´ æ‰§è¡Œ-fetch-è„šæœ¬è·å–å†…å®¹">4.3 ä¼ªé€  HTML å…ƒç´ ï¼Œæ‰§è¡Œ Fetch è„šæœ¬è·å–å†…å®¹</h3>
<pre><code class="language-csharp">webDriver.Navigate().GoToUrl(CnBlogs.CommentsUrl);
IJavaScriptExecutor executor = (IJavaScriptExecutor)webDriver;
executor.ExecuteScript(@"
    var container = document.createElement('div');
    container.id = 'hiddenDataDiv';
    container.style.display = 'none';
    document.body.appendChild(container);
    fetch('https://i.cnblogs.com/api/feedback/1?mine=false', {
        headers: {
            'accept': 'application/json, text/plain, */*',
            'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6',
            'priority': 'u=1, i',
            'sec-ch-ua': '\"Microsoft Edge\";v=\"131\", \"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',
            'sec-ch-ua-mobile': '?0',
            'sec-ch-ua-platform': '\"Windows\"',
            'sec-fetch-dest': 'empty',
            'sec-fetch-mode': 'cors',
            'sec-fetch-site': 'same-origin'
        },
        referrer: 'https://i.cnblogs.com/comments',
        referrerPolicy: 'strict-origin-when-cross-origin',
        method: 'GET',
        mode: 'cors',
        credentials: 'include'
    })
    .then(response =&gt; response.json())
    .then(data =&gt; {
        document.getElementById('hiddenDataDiv').textContent = JSON.stringify(data);
    })
    .catch(error =&gt; console.error('Error:', error));
");
string jsonData = executor.ExecuteScript("return document.getElementById('hiddenDataDiv').textContent;").ToString();
Console.WriteLine(jsonData);
</code></pre>
<h1 id="å°å½©è›‹">å°å½©è›‹</h1>
<p><strong>åšå®¢å›­çš„ç™»å½• Bug</strong></p>
<p><img src="https://www.quewaner.com/2024/12/23/%E7%88%AC%E8%99%AB%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC-AI%E8%B5%8B%E8%83%BD/1734950186663.png" alt="ç™»å½•Bugæˆªå›¾" loading="lazy"></p>
<p><a href="https://www.quewaner.com/2024/12/23/%E7%88%AC%E8%99%AB%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC-AI%E8%B5%8B%E8%83%BD/%E7%99%BB%E5%BD%95bug%E8%A7%86%E9%A2%91.mp4" target="_blank" rel="noopener nofollow">ç™»å½•Bugè§†é¢‘ï¼Œ ä¸‹è½½è§‚çœ‹ï¼Œ æµè§ˆå™¨ä¸æ”¯æŒ</a></p>
<h1 id="aièµ‹èƒ½">AIèµ‹èƒ½</h1>
<p>å¤æ‚çš„éªŒè¯ç åœºæ™¯å¯ä»¥é€šè¿‡ AI å¤šæ¨¡æ€æ¨¡å‹è§£å†³ï¼Œä¾‹å¦‚å®šä½å…ƒç´ å’Œç§»åŠ¨é¼ æ ‡ç­‰æ“ä½œã€‚æ­¤å¤–ï¼ŒAI è¿˜å¯ä»¥ç”¨äºæ•´ç†å’Œåˆ†ææ•°æ®ï¼Œæé«˜æ•°æ®å¤„ç†æ•ˆç‡ã€‚</p>
<h1 id="æºç é“¾æ¥å¯ç›´æ¥è¿è¡Œ">æºç é“¾æ¥ï¼ˆå¯ç›´æ¥è¿è¡Œï¼‰</h1>
<p>æœ¬é¡¹ç›®åŸºäº .NET 5 å’Œ Edge æµè§ˆå™¨å¼€å‘ï¼Œæºç å·²ä¸Šä¼ è‡³ GitHubï¼š</p>
<p><a href="https://github.com/ZhangQueque/CrawlerScript" target="_blank" rel="noopener nofollow">https://github.com/ZhangQueque/CrawlerScript</a></p>
<hr>
<p>å¸Œæœ›è¿™ç¯‡ä¼˜åŒ–åçš„åšå®¢å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¬¢è¿éšæ—¶è”ç³»ã€‚</p>

</div>
<div id="MySignature" role="contentinfo">
    æˆ‘è‡ªæ˜¯å¹´å°‘ï¼ŒéŸ¶åå€¾è´Ÿã€‚
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.06151211079398148" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-23 18:58">2024-12-23 18:57</span>&nbsp;
<a href="https://www.cnblogs.com/queque">å¼ ç¼ºç¼º</a>&nbsp;
é˜…è¯»(<span id="post_view_count">1</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18624817" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18624817);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18624817', targetLink: 'https://www.cnblogs.com/queque/p/18624817', title: 'çˆ¬è™«è‡ªåŠ¨åŒ–è„šæœ¬+AIèµ‹èƒ½' })">ä¸¾æŠ¥</a>
</div>
        
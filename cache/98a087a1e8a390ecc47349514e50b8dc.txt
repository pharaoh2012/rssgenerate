
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cyMessi/p/18627184" title="发布于 2024-12-24 12:43">
    <span role="heading" aria-level="2">Ubuntu22.04 LTS 安装nvidia显卡驱动</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>准备跑老师给定的Github上的多模态源码，但是用了这么久ubuntu还没有尝试过安装nvidia驱动，好在也是一次成功，于是记录下来。</p>
<p>借鉴的是<a href="https://blog.csdn.net/Eric_xkk/article/details/131800365" target="_blank" rel="noopener nofollow">https://blog.csdn.net/Eric_xkk/article/details/131800365</a>这篇文章，按照流程来基本没有问题，不过个人觉得有些步骤比较冗余，所以记录下来</p>
<h1 id="主要流程">主要流程</h1>
<h2 id="关闭安全模式">关闭安全模式</h2>
<p>这个在安装双系统的时候就在window中关闭过了，所以不设置</p>
<h2 id="打开独显模型">打开独显模型</h2>
<p>这个没有设置，但是最后也可以成功识别到显卡</p>
<h2 id="更新软件源">更新软件源</h2>
<pre><code>sudo apt-get update   #更新软件列表
 
sudo apt-get install g++
 
sudo apt-get install gcc
 
sudo apt-get install make
</code></pre>
<h2 id="禁用nouveau">禁用nouveau</h2>
<p>nouveau是系统自带的驱动程序，一般来讲要安装新的显卡驱动的时候需要禁用这个驱动</p>
<p>首先打开nouveau的配置文件：</p>
<pre><code>sudo gedit /etc/modprobe.d/blacklist.conf
</code></pre>
<p>然后在最下面加上：</p>
<pre><code>blacklist nouveau
options nouveau modeset=0
</code></pre>
<p>保存修改之后在终端执行：</p>
<pre><code>sudo update-initramfs –u
</code></pre>
<h2 id="重启电脑">重启电脑</h2>
<p>终端执行：</p>
<pre><code>sudo reboot
</code></pre>
<p><strong>（lightdm那一步个人觉得可做可不做，好像和默认的gdm3的区别就是显示占用的内存大小，但是我看了一下lightdm占用的是6MB左右，gdm3占用的是9MB作用，区别不大。按照个人的喜好设置即可，其实就是一个显示器插件）</strong></p>
<h2 id="安装显卡驱动工具">安装显卡驱动工具</h2>
<pre><code>sudo apt-get install nvidia-cuda-toolkit
</code></pre>
<h2 id="查看系统推荐显卡驱动">查看系统推荐显卡驱动</h2>
<p><strong>这里要看好哪个是系统推荐的驱动（recommend），并且要记下来</strong></p>
<pre><code>sudo ubuntu-drivers devices
</code></pre>
<p>比如我的系统推荐的就是550(很奇怪，当时第一次下载的时候推荐的是550,现在是560...不过区别应该不大）<br>
这里说一下三种驱动的大致区别：</p>
<ul>
<li>nvidia-driver-xxx :这是适配大多数用户，一般情况下都可以安装这个</li>
<li>nvidia-driver-xxx-server ：这个适配服务器，有多块GPU调度等情况</li>
<li>nvidia-driver-xxx-open ：这个是开源版本，可以自己修改</li>
</ul>
<pre><code>== /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0 ==
modalias : pci:v000010DEd000028A0sv0000103Csd00008BBEbc03sc00i00
vendor   : NVIDIA Corporation
driver   : nvidia-driver-545 - distro non-free
driver   : nvidia-driver-545-open - distro non-free
driver   : nvidia-driver-550-open - third-party non-free
driver   : nvidia-driver-565 - third-party non-free
driver   : nvidia-driver-560-open - third-party non-free
driver   : nvidia-driver-550 - third-party non-free
driver   : nvidia-driver-560 - third-party non-free recommended
driver   : nvidia-driver-535-open - distro non-free
driver   : nvidia-driver-535-server-open - distro non-free
driver   : nvidia-driver-535-server - distro non-free
driver   : nvidia-driver-565-open - third-party non-free
driver   : nvidia-driver-535 - distro non-free
driver   : xserver-xorg-video-nouveau - distro free builtin
</code></pre>
<h2 id="添加驱动源">添加驱动源</h2>
<pre><code>sudo add-apt-repository ppa:graphics-drivers/ppa
sudo apt-get update
</code></pre>
<h2 id="下载驱动">下载驱动</h2>
<p>在ubuntu的 <strong>软件和更新</strong> 中的 <strong>附加驱动</strong>中找到刚才系统recommend的显卡驱动型号，然后下载<br>
<img src="https://img2024.cnblogs.com/blog/3512745/202412/3512745-20241224123630756-825522038.png" alt="" loading="lazy"></p>
<h2 id="测试">测试</h2>
<p>安装之后reboot重启电脑，输入<code>nvidia-smi</code>查看信息，如果出现下列信息，则说明安装成功：</p>
<pre><code>Tue Dec 24 12:12:34 2024       
+-----------------------------------------------------------------------------------------+
| NVIDIA-SMI 550.142                Driver Version: 550.142        CUDA Version: 12.4     |
|-----------------------------------------+------------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |
|                                         |                        |               MIG M. |
|=========================================+========================+======================|
|   0  NVIDIA GeForce RTX 4060 ...    Off |   00000000:01:00.0 Off |                  N/A |
| N/A   44C    P0            588W /   80W |       9MiB /   8188MiB |      0%      Default |
|                                         |                        |                  N/A |
+-----------------------------------------+------------------------+----------------------+
                                                                                         
+-----------------------------------------------------------------------------------------+
| Processes:                                                                              |
|  GPU   GI   CI        PID   Type   Process name                              GPU Memory |
|        ID   ID                                                               Usage      |
|=========================================================================================|
|    0   N/A  N/A      1735      G   /usr/lib/xorg/Xorg                              4MiB |
+-----------------------------------------------------------------------------------------+
</code></pre>
<h2 id="修改界面登陆器">修改界面登陆器</h2>
<p>如果前面下载了lightdm，觉得不好看想换回gdm3（比如我），输入<code>sudo dpkg-reconfigure lightdm</code>后选中gdm3即可，reboot重启之后即可奏效</p>
<h2 id="cuda检查">cuda检查</h2>
<p>在pycharm中输入<code>torch.cuda.is_availiable()</code>，输出为true，说明安装成功，大功告成！<br>
<img src="https://img2024.cnblogs.com/blog/3512745/202412/3512745-20241224124214321-1154134464.png" alt="" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.06702844137268518" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-24 12:44">2024-12-24 12:43</span>&nbsp;
<a href="https://www.cnblogs.com/cyMessi">cyMessi</a>&nbsp;
阅读(<span id="post_view_count">63</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18627184" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18627184);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18627184', targetLink: 'https://www.cnblogs.com/cyMessi/p/18627184', title: 'Ubuntu22.04 LTS 安装nvidia显卡驱动' })">举报</a>
</div>
        
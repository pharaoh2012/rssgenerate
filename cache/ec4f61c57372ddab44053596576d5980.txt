
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/aslanvon/p/18931148" title="å‘å¸ƒäº 2025-06-16 14:49">
    <span role="heading" aria-level="2">c++ å‡½æ•° ç±»</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ä¸€å‡½æ•°å®šä¹‰">ä¸€ã€å‡½æ•°å®šä¹‰</h1>
<p>åœ¨ C++ ä¸­ï¼Œ<strong>å‡½æ•°</strong>æ˜¯ç»„ç»‡ä»£ç é€»è¾‘çš„åŸºæœ¬å•å…ƒï¼Œç”¨äºå®ç°æ¨¡å—åŒ–ã€å¤ç”¨ã€ç»“æ„æ¸…æ™°çš„ç¨‹åºè®¾è®¡ã€‚</p>
<hr>
<h2 id="1å‡½æ•°çš„åŸºæœ¬ç»“æ„">1ã€å‡½æ•°çš„åŸºæœ¬ç»“æ„</h2>
<pre><code class="language-cpp">è¿”å›ç±»å‹ å‡½æ•°å(å‚æ•°åˆ—è¡¨) {
    // å‡½æ•°ä½“
    return å€¼; // å¯é€‰ï¼Œè§†è¿”å›ç±»å‹è€Œå®š
}
</code></pre>
<p><strong>å£°æ˜ï¼ˆDeclarationï¼‰ï¼š</strong></p>
<p>å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°å­˜åœ¨ï¼Œé€šå¸¸æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-cpp">int add(int a, int b);  // å‡½æ•°å£°æ˜
</code></pre>
<p><strong>å®šä¹‰ï¼ˆDefinitionï¼‰ï¼š</strong></p>
<p>æä¾›å‡½æ•°å®ç°ï¼Œé€šå¸¸æ”¾åœ¨ <code>.cpp</code> æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-cpp">int add(int a, int b) {
    return a + b;
}
</code></pre>
<hr>
<h2 id="2å‡½æ•°é‡è½½overload">2ã€å‡½æ•°é‡è½½ï¼ˆOverloadï¼‰</h2>
<p>åŒä¸€ä¸ªå‡½æ•°åå¯ä»¥å®šä¹‰å¤šä¸ªå‚æ•°ä¸åŒçš„å‡½æ•°ï¼š</p>
<pre><code class="language-cpp">void print(int x);
void print(double x);
void print(std::string s);
</code></pre>
<p>æ³¨æ„ï¼š<strong>å‚æ•°æ•°é‡æˆ–ç±»å‹ä¸åŒ</strong>æ‰èƒ½æ„æˆé‡è½½ï¼Œè¿”å›ç±»å‹ä¸åŒä¸èƒ½å•ç‹¬æ„æˆé‡è½½ã€‚</p>
<hr>
<h2 id="3é»˜è®¤å‚æ•°å€¼">3ã€é»˜è®¤å‚æ•°å€¼</h2>
<pre><code class="language-cpp">void greet(std::string name = "Guest") {
    std::cout &lt;&lt; "Hello, " &lt;&lt; name &lt;&lt; "!\n";
}

greet();         // è¾“å‡º Hello, Guest!
greet("Alice");  // è¾“å‡º Hello, Alice!
</code></pre>
<hr>
<h2 id="4å†…è”å‡½æ•°inline">4ã€å†…è”å‡½æ•°ï¼ˆ<code>inline</code>ï¼‰</h2>
<p>å»ºè®®ç¼–è¯‘å™¨å°†å‡½æ•°ä»£ç æ’å…¥è°ƒç”¨å¤„ï¼Œé€‚ç”¨äºçŸ­å°é¢‘ç¹è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<pre><code class="language-cpp">inline int square(int x) {
    return x * x;
}
</code></pre>
<hr>
<h2 id="5è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°">5ã€è™šå‡½æ•°ä¸çº¯è™šå‡½æ•°</h2>
<p>åœ¨ C++ ä¸­ï¼Œ<strong>è™šå‡½æ•°ï¼ˆ<code>virtual</code>ï¼‰</strong>å’Œ<strong>çº¯è™šå‡½æ•°ï¼ˆ<code>= 0</code>ï¼‰</strong>æ˜¯å®ç° <strong>å¤šæ€æ€§</strong> çš„å…³é”®æœºåˆ¶ï¼Œä½†å®ƒä»¬åœ¨è¯­æ³•ã€ç”¨é€”ã€ä½œç”¨ä¸Šæœ‰æ‰€ä¸åŒã€‚</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è™šå‡½æ•°ï¼ˆVirtual Functionï¼‰</th>
<th>çº¯è™šå‡½æ•°ï¼ˆPure Virtual Functionï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>å®šä¹‰æ–¹å¼</td>
<td><code>virtual void foo();</code></td>
<td><code>virtual void foo() = 0;</code></td>
</tr>
<tr>
<td>æ˜¯å¦æœ‰å®ç°</td>
<td>âœ… å¯ä»¥æœ‰å®ç°ï¼ˆä¹Ÿå¯ä»¥æ²¡æœ‰ï¼‰</td>
<td>âŒ å¿…é¡»åœ¨å­ç±»ä¸­å®ç°ï¼ˆæŠ½è±¡æ¥å£ï¼‰</td>
</tr>
<tr>
<td>æ˜¯å¦å¿…é¡»é‡å†™</td>
<td>âŒ å­ç±»å¯é€‰æ˜¯å¦é‡å†™</td>
<td>âœ… å­ç±»<strong>å¿…é¡»</strong>é‡å†™ï¼ˆé™¤éå­ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ï¼‰</td>
</tr>
<tr>
<td>æ‰€åœ¨ç±»</td>
<td>å¯ä»¥åœ¨ä»»ä½•ç±»ä¸­</td>
<td>å¿…é¡»å‡ºç°åœ¨æŠ½è±¡ç±»ä¸­ï¼ˆå³åŒ…å«çº¯è™šå‡½æ•°çš„ç±»ï¼‰</td>
</tr>
<tr>
<td>åˆ›å»ºå¯¹è±¡</td>
<td>âœ… å¯ä»¥å®ä¾‹åŒ–å«è™šå‡½æ•°çš„ç±»</td>
<td>âŒ æŠ½è±¡ç±»ä¸å¯è¢«å®ä¾‹åŒ–</td>
</tr>
<tr>
<td>ç”¨é€”</td>
<td>æä¾›å¤šæ€è¡Œä¸ºçš„é»˜è®¤å®ç°</td>
<td>å¼ºåˆ¶å­ç±»å®ç°ï¼Œä½œä¸ºæ¥å£è§„èŒƒ</td>
</tr>
</tbody>
</table>
<h3 id="-1-è™šå‡½æ•°ç¤ºä¾‹å¯é‡å†™">ğŸ”· 1. è™šå‡½æ•°ç¤ºä¾‹ï¼ˆå¯é‡å†™ï¼‰</h3>
<pre><code class="language-cpp">class Animal {
public:
    virtual void speak() {
        std::cout &lt;&lt; "Animal speaks\n";
    }
};

class Dog : public Animal {
public:
    void speak() override {
        std::cout &lt;&lt; "Dog barks\n";
    }
};

Animal* p = new Dog();
p-&gt;speak();  // è¾“å‡ºï¼šDog barksï¼ˆå¤šæ€ï¼‰
</code></pre>
<p>ğŸ”¸ å¦‚æœ <code>Dog</code> ä¸é‡å†™ <code>speak()</code>ï¼Œåˆ™ä¼šä½¿ç”¨ <code>Animal</code> çš„é»˜è®¤å®ç°ã€‚</p>
<hr>
<h3 id="-2-çº¯è™šå‡½æ•°ç¤ºä¾‹å¼ºåˆ¶é‡å†™">ğŸ”· 2. çº¯è™šå‡½æ•°ç¤ºä¾‹ï¼ˆå¼ºåˆ¶é‡å†™ï¼‰</h3>
<pre><code class="language-cpp">class Shape {
public:
    virtual void draw() = 0;  // çº¯è™šå‡½æ•°
};

class Circle : public Shape {
public:
    void draw() override {
        std::cout &lt;&lt; "Drawing Circle\n";
    }
};

// Shape s;       // âŒ é”™è¯¯ï¼ŒæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–
Shape* p = new Circle();
p-&gt;draw();        // è¾“å‡ºï¼šDrawing Circle
</code></pre>
<p>ğŸ”¸ è‹¥ <code>Circle</code> ä¸å®ç° <code>draw()</code>ï¼Œå®ƒä¹Ÿå°†å˜ä¸ºæŠ½è±¡ç±»ã€‚</p>
<h3 id="æ¥å£ç±»interface">æ¥å£ç±»ï¼ˆinterfaceï¼‰</h3>
<p>C++ æ²¡æœ‰ <code>interface</code> å…³é”®å­—ï¼Œä½†ä½ å¯ä»¥ç”¨çº¯è™šå‡½æ•°æ¨¡æ‹Ÿæ¥å£ç±»ï¼š</p>
<pre><code class="language-cpp">class IStream {
public:
    virtual void read() = 0;
    virtual void write() = 0;
    virtual ~IStream() {}  // æ¥å£ç±»åº”å®šä¹‰è™šææ„
};
</code></pre>
<h2 id="6lambda-è¡¨è¾¾å¼c11-èµ·">6ã€Lambda è¡¨è¾¾å¼ï¼ˆC++11 èµ·ï¼‰</h2>
<pre><code class="language-cpp">[æ•è·åˆ—è¡¨](å‚æ•°åˆ—è¡¨) -&gt; è¿”å›ç±»å‹ {
    å‡½æ•°ä½“
}
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>[]</code>ï¼šæ•è·åˆ—è¡¨ï¼ˆå¯ä»¥æ•è·å¤–éƒ¨å˜é‡ï¼‰</li>
<li><code>()</code>ï¼šå‚æ•°åˆ—è¡¨</li>
<li><code>-&gt;</code>ï¼šè¿”å›ç±»å‹ï¼ˆå¯çœç•¥ï¼‰</li>
<li><code>{}</code>ï¼šå‡½æ•°ä½“</li>
</ul>
<p>åŒ¿åå‡½æ•°ï¼Œé€šå¸¸ç”¨äºç®€æ´å›è°ƒï¼š</p>
<pre><code class="language-cpp">auto add = [](int a, int b) -&gt; int {
    return a + b;
};
std::cout &lt;&lt; add(3, 5);  // è¾“å‡ºï¼š8

//è¿”å›ç±»å‹å¦‚æœèƒ½æ¨å¯¼ï¼Œå¯ä»¥çœç•¥ `-&gt; int`ï¼š
auto add = [](int a, int b) {
    return a + b;
};
std::cout &lt;&lt; add(3, 4);  // è¾“å‡º 7
</code></pre>
<p>Lambda è¡¨è¾¾å¼æ˜¯ C++11 å¼•å…¥çš„ä¸€ç§<strong>åŒ¿åå‡½æ•°</strong>ï¼Œç”¨äºå®šä¹‰<strong>å¯å†…è”çš„å‡½æ•°å¯¹è±¡</strong>ï¼Œç‰¹åˆ«é€‚åˆä¸´æ—¶ã€å°å·§çš„å‡½æ•°ä½¿ç”¨åœºæ™¯ï¼Œå¦‚ç®—æ³•å›è°ƒã€äº‹ä»¶å¤„ç†ã€çº¿ç¨‹åˆ›å»ºç­‰ã€‚</p>
<h3 id="æ•è·å¤–éƒ¨å˜é‡capture">æ•è·å¤–éƒ¨å˜é‡ï¼ˆcaptureï¼‰</h3>
<table>
<thead>
<tr>
<th>æ•è·æ–¹å¼</th>
<th>ç¤ºä¾‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å€¼æ•è·</td>
<td><code>[x]</code></td>
<td>æ•è·å˜é‡ <code>x</code> çš„å€¼ï¼ˆæ‹·è´ï¼‰</td>
</tr>
<tr>
<td>å¼•ç”¨æ•è·</td>
<td><code>[&amp;x]</code></td>
<td>æ•è·å˜é‡ <code>x</code> çš„å¼•ç”¨</td>
</tr>
<tr>
<td>æ•è·å…¨éƒ¨ï¼ˆå€¼ï¼‰</td>
<td><code>[=]</code></td>
<td>æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡çš„å€¼</td>
</tr>
<tr>
<td>æ•è·å…¨éƒ¨ï¼ˆå¼•ç”¨ï¼‰</td>
<td><code>[&amp;]</code></td>
<td>æ•è·æ‰€æœ‰å¤–éƒ¨å˜é‡çš„å¼•ç”¨</td>
</tr>
<tr>
<td>æ··åˆæ•è·</td>
<td><code>[=, &amp;y]</code></td>
<td>é™¤ <code>y</code> å¤–å…¶ä»–å˜é‡å€¼æ•è·</td>
</tr>
</tbody>
</table>
<pre><code class="language-cpp">int x = 10;
int y = 5;

auto f = [=, &amp;y]() {
    // x æ˜¯å€¼æ•è·ï¼Œy æ˜¯å¼•ç”¨æ•è·
    std::cout &lt;&lt; x + y &lt;&lt; "\n";
    y += 1;  // å…è®¸ä¿®æ”¹ y
};

f();
</code></pre>
<hr>
<h3 id="å¸¸è§åº”ç”¨åœºæ™¯">å¸¸è§åº”ç”¨åœºæ™¯</h3>
<ol>
<li>ä¸ STL ç®—æ³•ç»“åˆï¼ˆå¦‚ <code>std::sort</code>ï¼‰</li>
</ol>
<pre><code class="language-cpp">std::vector&lt;int&gt; v = {4, 2, 5, 1};
std::sort(v.begin(), v.end(), [](int a, int b) {
    return a &lt; b;
});
</code></pre>
<ol start="2">
<li>ä¸çº¿ç¨‹ä¸€èµ·ä½¿ç”¨ï¼š</li>
</ol>
<pre><code class="language-cpp">#include &lt;thread&gt;
std::thread t([] {
    std::cout &lt;&lt; "In thread\n";
});
t.join();
</code></pre>
<hr>
<h3 id="å¯å˜-lambdamutable">å¯å˜ lambdaï¼ˆ<code>mutable</code>ï¼‰</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå€¼æ•è·çš„å˜é‡æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚åŠ ä¸Š <code>mutable</code> å¯ä»¥è®©å…¶å˜ä¸ºå¯å˜ï¼š</p>
<pre><code class="language-cpp">int x = 5;
auto f = [x]() mutable {
    x += 1;       // å…è®¸ä¿®æ”¹æ•è·å˜é‡çš„å‰¯æœ¬
    std::cout &lt;&lt; x;
};
f();  // è¾“å‡º 6ï¼Œä½†å¤–éƒ¨ x ä¸å˜
</code></pre>
<h2 id="ç‰¹æ®Šå‡½æ•°ç±»å‹">ç‰¹æ®Šå‡½æ•°ç±»å‹</h2>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ„é€ å‡½æ•°</td>
<td>åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨</td>
</tr>
<tr>
<td>ææ„å‡½æ•°</td>
<td>å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨</td>
</tr>
<tr>
<td>æ‹·è´æ„é€ å‡½æ•°</td>
<td>å¯¹è±¡ä»¥å¦ä¸€ä¸ªå¯¹è±¡åˆå§‹åŒ–æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>ç§»åŠ¨æ„é€ å‡½æ•°</td>
<td>å³å€¼åˆå§‹åŒ–å¯¹è±¡æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>è¿ç®—ç¬¦é‡è½½å‡½æ•°</td>
<td>é‡è½½ <code>+</code>, <code>==</code> ç­‰</td>
</tr>
<tr>
<td>è™šå‡½æ•°</td>
<td>ç”¨äºå¤šæ€</td>
</tr>
<tr>
<td>çº¯è™šå‡½æ•°</td>
<td>æŠ½è±¡ç±»æˆå‘˜å‡½æ•°</td>
</tr>
</tbody>
</table>
<h1 id="äºŒå‡½æ•°å‚æ•°å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’">äºŒã€å‡½æ•°å‚æ•°å€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’</h1>
<p>åœ¨ C++ ä¸­ï¼Œ<strong>å‡½æ•°å‚æ•°</strong>é»˜è®¤æ˜¯<strong>å€¼ä¼ é€’ï¼ˆpass-by-valueï¼‰</strong>ï¼Œä½† <strong>å¹¶ä¸éƒ½æ˜¯å€¼ä¼ é€’</strong>ï¼ŒC++ æ”¯æŒå¤šç§å‚æ•°ä¼ é€’æ–¹å¼ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p>
<hr>
<h2 id="1-å€¼ä¼ é€’pass-by-value">1. å€¼ä¼ é€’ï¼ˆPass by Valueï¼‰</h2>
<ul>
<li><strong>å°†å®å‚çš„å‰¯æœ¬ä¼ å…¥å‡½æ•°</strong></li>
<li>å‡½æ•°å†…å¯¹å‚æ•°çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸå˜é‡</li>
</ul>
<pre><code class="language-cpp">void foo(int x) {
    x = 100;
}

int main() {
    int a = 10;
    foo(a);
    std::cout &lt;&lt; a; // è¾“å‡º 10ï¼Œä¸å˜
}
</code></pre>
<hr>
<h2 id="2-å¼•ç”¨ä¼ é€’pass-by-reference">2. å¼•ç”¨ä¼ é€’ï¼ˆPass by Referenceï¼‰</h2>
<ul>
<li>ä¼ å…¥å˜é‡çš„åˆ«åï¼Œå‡½æ•°å†…å¯¹å…¶ä¿®æ”¹ä¼šå½±å“åŸå˜é‡</li>
</ul>
<pre><code class="language-cpp">void foo(int&amp; x) {
    x = 100;
}

int main() {
    int a = 10;
    foo(a);
    std::cout &lt;&lt; a; // è¾“å‡º 100ï¼Œè¢«ä¿®æ”¹äº†
}
</code></pre>
<hr>
<h2 id="3-æŒ‡é’ˆä¼ é€’pass-by-pointer">3. æŒ‡é’ˆä¼ é€’ï¼ˆPass by Pointerï¼‰</h2>
<ul>
<li>å‡½æ•°æ¥æ”¶å˜é‡çš„åœ°å€ï¼Œé€šè¿‡æŒ‡é’ˆè®¿é—®å’Œä¿®æ”¹</li>
</ul>
<pre><code class="language-cpp">void foo(int* x) {
    *x = 100;
}

int main() {
    int a = 10;
    foo(&amp;a);
    std::cout &lt;&lt; a; // è¾“å‡º 100
}
</code></pre>
<hr>
<h2 id="4-å¸¸å¼•ç”¨ä¼ é€’pass-by-const-reference">4. å¸¸å¼•ç”¨ä¼ é€’ï¼ˆPass by const Referenceï¼‰</h2>
<ul>
<li>é€‚ç”¨äº<strong>é¿å…æ‹·è´å¼€é”€</strong>ï¼Œä½†åˆ<strong>ä¸å…è®¸å‡½æ•°ä¿®æ”¹å®å‚</strong></li>
<li>å¸¸ç”¨äºä¼ é€’å¤§å‹å¯¹è±¡ï¼Œå¦‚ <code>std::string</code>, <code>std::vector</code></li>
</ul>
<pre><code class="language-cpp">void print(const std::string&amp; s) {
    std::cout &lt;&lt; s;
}
</code></pre>
<hr>
<h2 id="5-å³å€¼å¼•ç”¨pass-by-rvalue-referencec11">5. å³å€¼å¼•ç”¨ï¼ˆPass by rvalue referenceï¼‰C++11+</h2>
<ul>
<li>æ”¯æŒç§»åŠ¨è¯­ä¹‰ï¼Œé¿å…ä¸å¿…è¦çš„æ·±æ‹·è´</li>
</ul>
<pre><code class="language-cpp">void foo(std::string&amp;&amp; s) {
    std::cout &lt;&lt; s;
}

foo("hello"s);  // ç§»åŠ¨ä¼ å‚
</code></pre>
<hr>
<h3 id="å°ç»“å¯¹ç…§è¡¨">å°ç»“å¯¹ç…§è¡¨ï¼š</h3>
<table>
<thead>
<tr>
<th>æ–¹å¼</th>
<th>æ˜¯å¦å¤åˆ¶</th>
<th>æ˜¯å¦å¯ä¿®æ”¹åŸå˜é‡</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>å€¼ä¼ é€’</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦</td>
<td>å°æ•°æ®ç±»å‹ï¼ˆint, floatï¼‰</td>
</tr>
<tr>
<td>å¼•ç”¨ä¼ é€’</td>
<td>âŒ å¦</td>
<td>âœ… æ˜¯</td>
<td>éœ€è¦ä¿®æ”¹åŸå˜é‡</td>
</tr>
<tr>
<td>æŒ‡é’ˆä¼ é€’</td>
<td>âŒ å¦</td>
<td>âœ… æ˜¯</td>
<td>ç±»ä¼¼å¼•ç”¨ï¼Œä½†æ›´çµæ´»</td>
</tr>
<tr>
<td>const å¼•ç”¨ä¼ é€’</td>
<td>âŒ å¦</td>
<td>âŒ å¦</td>
<td>ä¼ å¤§å‹å¯¹è±¡ä¸”ä¸ä¿®æ”¹</td>
</tr>
<tr>
<td>å³å€¼å¼•ç”¨ä¼ é€’</td>
<td>âŒ å¦</td>
<td>âœ… æ˜¯</td>
<td>æ”¯æŒç§»åŠ¨ï¼Œé¿å…æ‹·è´</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ç»“è®º">ç»“è®ºï¼š</h2>
<blockquote>
<p>C++ ä¸­å‡½æ•°å‚æ•°<strong>é»˜è®¤æ˜¯å€¼ä¼ é€’</strong>ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ <code>&amp;</code>ï¼ˆå¼•ç”¨ï¼‰ã€<code>*</code>ï¼ˆæŒ‡é’ˆï¼‰æˆ– <code>&amp;&amp;</code>ï¼ˆå³å€¼å¼•ç”¨ï¼‰æ¥å®ç°å…¶ä»–ä¼ å‚æ–¹å¼ã€‚</p>
</blockquote>
<h1 id="ä¸‰æ„é€ å‡½æ•°-ææ„å‡½æ•°">ä¸‰ã€æ„é€ å‡½æ•° ææ„å‡½æ•°</h1>
<h2 id="æ„é€ å‡½æ•°constructor">æ„é€ å‡½æ•°Constructor</h2>
<p>æ„é€ å‡½æ•°æ˜¯å½“<strong>å¯¹è±¡è¢«åˆ›å»º</strong>æ—¶è‡ªåŠ¨è°ƒç”¨çš„ç‰¹æ®Šå‡½æ•°ï¼Œç”¨äº<strong>åˆå§‹åŒ–å¯¹è±¡çš„æˆå‘˜å˜é‡</strong>ã€‚</p>
<ul>
<li>åå­—ä¸ç±»åç›¸åŒ</li>
<li>æ²¡æœ‰è¿”å›å€¼</li>
<li>å¯ä»¥æœ‰å¤šä¸ª</li>
</ul>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>é»˜è®¤æ„é€ å‡½æ•°</td>
<td>ä¸å¸¦å‚æ•°æˆ–æ‰€æœ‰å‚æ•°æœ‰é»˜è®¤å€¼</td>
</tr>
<tr>
<td>å¸¦å‚æ„é€ å‡½æ•°</td>
<td>ç”¨æˆ·æä¾›åˆå§‹åŒ–å‚æ•°</td>
</tr>
<tr>
<td>æ‹·è´æ„é€ å‡½æ•°</td>
<td>ç”¨å·²æœ‰å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼ˆä¼ å€¼æ–¹å¼ï¼‰</td>
</tr>
<tr>
<td>ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆC++11ï¼‰</td>
<td>ç”¨äºèµ„æºâ€œçªƒå–â€ï¼ˆæ•ˆç‡æ›´é«˜ï¼‰</td>
</tr>
<tr>
<td>å§”æ‰˜æ„é€ å‡½æ•°ï¼ˆC++11ï¼‰</td>
<td>åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°</td>
</tr>
</tbody>
</table>
<h2 id="æ‹·è´æ„é€ å‡½æ•°-copy-constructor">æ‹·è´æ„é€ å‡½æ•° Copy Constructor</h2>
<p>å¦‚æœä½ æ²¡æœ‰æ˜¾å¼å®šä¹‰ <code>operator=()</code>ï¼ŒC++ ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªæµ…æ‹·è´çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œå¯¹æ¯ä¸ªæˆå‘˜åšæˆå‘˜èµ‹å€¼ã€‚ä½†å¦‚æœä½ ç±»ä¸­åŒ…å«è£¸æŒ‡é’ˆç­‰èµ„æºï¼Œé»˜è®¤èµ‹å€¼å°†äº§ç”Ÿ<strong>æµ…æ‹·è´é—®é¢˜</strong>ï¼ˆèµ„æºå…±äº«ï¼Œææ„å†²çªï¼‰ï¼Œæ­¤æ—¶åº”è‡ªå®šä¹‰èµ‹å€¼è¿ç®—ç¬¦ã€‚</p>
<p>æ‹·è´æ„é€ ä½œç”¨ï¼š</p>
<ul>
<li>é€šè¿‡ä¸€ä¸ªå·²æœ‰å¯¹è±¡<strong>åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡</strong></li>
<li>å°†å¯¹è±¡<strong>æŒ‰å€¼ä¼ é€’</strong>ç»™å‡½æ•°</li>
<li>å‡½æ•°<strong>æŒ‰å€¼è¿”å›å¯¹è±¡</strong></li>
</ul>
<pre><code class="language-cpp">ClassName(const ClassName&amp; other);
</code></pre>
<blockquote>
<p>å‚æ•°æ˜¯ <code>const &amp;</code> é¿å…é€’å½’è°ƒç”¨è‡ªèº«</p>
</blockquote>
<p>ç¦æ­¢æ‹·è´æ„é€ ï¼š</p>
<pre><code class="language-cpp">// åœ¨ C++11/14/17 ä¸­ï¼Œæ¨èä½¿ç”¨ `= default` å’Œ `= delete` æ˜ç¡®æŒ‡å®šï¼š
class MyClass {
public:
    MyClass() = default;
    MyClass(const MyClass&amp;) = delete;
    ~MyClass() = default;
};
</code></pre>
<h2 id="ææ„å‡½æ•°-destructor">ææ„å‡½æ•° Destructor</h2>
<p>ææ„å‡½æ•°æ˜¯åœ¨<strong>å¯¹è±¡é”€æ¯æ—¶è‡ªåŠ¨è°ƒç”¨</strong>çš„ç‰¹æ®Šå‡½æ•°ï¼Œç”¨äº<strong>é‡Šæ”¾èµ„æºã€å…³é—­æ–‡ä»¶ã€æ¸…ç†æŒ‡é’ˆç­‰</strong>ã€‚</p>
<ul>
<li>åå­—ä¸º <code>~ç±»å</code></li>
<li>æ²¡æœ‰å‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼</li>
<li>æ¯ä¸ªç±»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°</li>
<li>å¯ä»¥æ˜¯è™šçš„ï¼ˆç”¨äºå¤šæ€åˆ é™¤ï¼‰</li>
</ul>
<h2 id="ç¤ºä¾‹">ç¤ºä¾‹</h2>
<p>å°†å®šä¹‰å’Œå®ç°å…¨éƒ¨å†™åœ¨å¤´æ–‡ä»¶ä¸­çš„å†™æ³•ï¼š</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;

class Person {
public:
    std::string name;
    int* age;

    // âœ… 1. é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå§”æ‰˜ç»™å¸¦å‚æ„é€ ï¼‰
    Person() : Person("unknown", 0) {
        std::cout &lt;&lt; "Default constructor called (delegated)\n";
    }

    // âœ… 2. å¸¦å‚æ„é€ å‡½æ•°
    Person(const std::string&amp; name_, int age_) {
        name = name_;
        age = new int(age_);
        std::cout &lt;&lt; "Parameterized constructor called\n";
    }

    // âœ… 3. æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰
    Person(const Person&amp; other) {
        name = other.name;
        age = new int(*other.age);
        std::cout &lt;&lt; "Copy constructor called\n";
    }

    // âœ… 4. ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆC++11ï¼‰
    Person(Person&amp;&amp; other) noexcept {
        name = std::move(other.name); // string è‡ªå¸¦ move
        age = other.age;              // çªƒå–æŒ‡é’ˆ
        other.age = nullptr;          // é¿å…ææ„ double free
        std::cout &lt;&lt; "Move constructor called\n";
    }

    // âœ… 5. ææ„å‡½æ•°
    ~Person() {
        std::cout &lt;&lt; "Destructor called for " &lt;&lt; name &lt;&lt; "\n";
        delete age;
    }
};


</code></pre>
<p>ç°ä»£c++æ¨èå¤´æ–‡ä»¶å’Œæºæ–‡ä»¶åˆ†ç¦»ï¼Œåˆ†ç¦»çš„å†™æ³•ï¼š</p>
<pre><code class="language-cpp">// Person.h
#ifndef PERSON_H
#define PERSON_H

#include &lt;string&gt;

class Person {
public:
    std::string name;
    int* age;
	// âœ… 1.é»˜è®¤æ„é€ å‡½æ•°
    Person();
    // âœ… 2.å¸¦å‚æ„é€ å‡½æ•°
    Person(const std::string&amp; name_, int age_);
    // âœ… 3.æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰
    Person(const Person&amp; other);
    // âœ… 4.ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆC++11ï¼‰
    Person(Person&amp;&amp; other) noexcept;
    // âœ… 5.ææ„å‡½æ•°
    virtual ~Person();
    
	// æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¯é€‰ï¼‰
    Person&amp; operator=(const Person&amp; other);
    // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¯é€‰ï¼‰
    Person&amp; operator=(Person&amp;&amp; other) noexcept;

    // âœ… constè¡¨ç¤ºè¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹ç±»æˆå‘˜å˜é‡ï¼Œå¦‚æœåœ¨å¸¸å‡½æ•°é‡Œä¿®æ”¹æˆå‘˜å˜é‡ä¼šæŠ¥é”™
    virtual void introduce() const;
};

#endif

</code></pre>
<pre><code class="language-cpp">// Person.cpp
#include "Person.h"
#include &lt;iostream&gt;

// âœ… 1.é»˜è®¤æ„é€ å‡½æ•°
Person::Person() : Person("unknown", 0) {
    std::cout &lt;&lt; "Default constructor called\n";
}

// âœ… 2.å¸¦å‚æ„é€ å‡½æ•°
Person::Person(const std::string&amp; name_, int age_) {
    name = name_;
    age = new int(age_);
    std::cout &lt;&lt; "Parameterized constructor called\n";
}

// âœ… 3.æ‹·è´æ„é€ å‡½æ•°ï¼ˆæ·±æ‹·è´ï¼‰
Person::Person(const Person&amp; other) {
    name = other.name;
    age = new int(*other.age);
    std::cout &lt;&lt; "Copy constructor called\n";
}

// âœ… 4.ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆC++11ï¼‰
Person::Person(Person&amp;&amp; other) noexcept {
    name = std::move(other.name);
    age = other.age;
    other.age = nullptr;
    std::cout &lt;&lt; "Move constructor called\n";
}

// âœ… 5.ææ„å‡½æ•°
Person::~Person() {
    std::cout &lt;&lt; "Person destructor called for " &lt;&lt; name &lt;&lt; "\n";
    delete age;
}

// æ‹·è´èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¯é€‰ï¼‰
Person&amp; Person::operator=(const Person&amp; other) {
    if (this != &amp;other) {
        name = other.name;
        delete age;
        age = new int(*other.age);
    }
    return *this;
}

// ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼ˆå¯é€‰ï¼‰
Person&amp; Person::operator=(Person&amp;&amp; other) noexcept {
    if (this != &amp;other) {
        name = std::move(other.name);
        delete age;
        age = other.age;
        other.age = nullptr;
    }
    return *this;
}

void Person::introduce() const {
    std::cout &lt;&lt; "Hi, I am " &lt;&lt; name &lt;&lt; ", age " &lt;&lt; *age &lt;&lt; ".\n";
}
</code></pre>
<h2 id="é»˜è®¤æ„é€ æ‹·è´ææ„è¡Œä¸ºæ€»ç»“">é»˜è®¤æ„é€ /æ‹·è´/ææ„è¡Œä¸ºæ€»ç»“</h2>
<table>
<thead>
<tr>
<th>å‡½æ•°ç±»å‹</th>
<th>æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆ</th>
<th>ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ï¼Ÿ</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ„é€ å‡½æ•°</td>
<td>âœ…ï¼ˆå¦‚æœæ²¡å†™ï¼‰</td>
<td>æˆå‘˜éœ€è¦ç‰¹æ®Šåˆå§‹åŒ–é€»è¾‘æ—¶</td>
</tr>
<tr>
<td>æ‹·è´æ„é€ å‡½æ•°</td>
<td>âœ…ï¼ˆå¦‚æœæ²¡å†™ï¼‰</td>
<td>å«æŒ‡é’ˆèµ„æºã€å¥æŸ„æˆ–ç¦æ­¢æ‹·è´</td>
</tr>
<tr>
<td>ææ„å‡½æ•°</td>
<td>âœ…ï¼ˆå¦‚æœæ²¡å†™ï¼‰</td>
<td>æˆå‘˜åŒ…å«åŠ¨æ€èµ„æºï¼ˆå¦‚ newï¼‰æ—¶éœ€é‡Šæ”¾</td>
</tr>
<tr>
<td>ç§»åŠ¨æ„é€ å‡½æ•°</td>
<td>âŒï¼ˆC++11+ï¼‰</td>
<td>ä¼˜åŒ–æ•ˆç‡æˆ–é˜²æ­¢æ‹·è´</td>
</tr>
</tbody>
</table>
<ul>
<li>å¦‚æœä½ <strong>ä¸å†™</strong>ï¼Œç¼–è¯‘å™¨ä¼š<strong>è‡ªåŠ¨ç”Ÿæˆ</strong>ä¸€ä¸ªâ€œæµ…æ‹·è´â€ç‰ˆæœ¬ã€‚</li>
<li>å¦‚æœç±»ä¸­æœ‰<strong>è£¸æŒ‡é’ˆ</strong>ï¼Œä¸€å®šè¦è‡ªå·±å†™æ‹·è´æ„é€ ï¼Œå¦åˆ™å¯èƒ½å¼•å‘<strong>åŒé‡é‡Šæ”¾</strong>é”™è¯¯ã€‚</li>
</ul>
<h2 id="æ·±æ‹·è´å’Œæµ…æ‹·è´">æ·±æ‹·è´å’Œæµ…æ‹·è´</h2>
<p>C++ ä¸­çš„ <strong>æ·±æ‹·è´ï¼ˆdeep copyï¼‰</strong> ä¸ <strong>æµ…æ‹·è´ï¼ˆshallow copyï¼‰</strong> æ˜¯å¯¹è±¡å¤åˆ¶æ—¶çš„ä¸¤ç§æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºæ˜¯å¦çœŸæ­£å¤åˆ¶äº†å †ä¸Šèµ„æºã€‚ç†è§£è¿™ä¸¤è€…å¯¹æŒæ¡ç±»çš„æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è‡³å…³é‡è¦ã€‚</p>
<h3 id="ä¸€å®šä¹‰å’ŒåŒºåˆ«">ä¸€ã€å®šä¹‰å’ŒåŒºåˆ«</h3>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æµ…æ‹·è´ï¼ˆShallow Copyï¼‰</th>
<th>æ·±æ‹·è´ï¼ˆDeep Copyï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‹·è´å†…å®¹</td>
<td>åªå¤åˆ¶æŒ‡é’ˆçš„åœ°å€</td>
<td>åˆ†é…æ–°å†…å­˜å¹¶å¤åˆ¶æ•°æ®å†…å®¹</td>
</tr>
<tr>
<td>èµ„æºå…±äº«</td>
<td>åŸå¯¹è±¡å’Œå‰¯æœ¬æŒ‡å‘åŒä¸€å†…å­˜</td>
<td>åŸå¯¹è±¡å’Œå‰¯æœ¬å„è‡ªæ‹¥æœ‰ç‹¬ç«‹å†…å­˜</td>
</tr>
<tr>
<td>å®‰å…¨æ€§</td>
<td>âŒ æ”¹å˜ä¸€ä¸ªå¯¹è±¡ä¼šå½±å“å¦ä¸€ä¸ªï¼›æ˜“å‘ç”Ÿæ‚¬å‚æŒ‡é’ˆã€åŒé‡é‡Šæ”¾</td>
<td>âœ… å¯¹è±¡äº’ä¸å½±å“</td>
</tr>
<tr>
<td>ææ„é£é™©</td>
<td>âŒ å¤šæ¬¡ææ„åŒä¸€å—å†…å­˜ï¼ˆå¦‚æœæœªæ­£ç¡®ç®¡ç†ï¼‰</td>
<td>âœ… æ¯ä¸ªå¯¹è±¡ææ„å„è‡ªæ‹¥æœ‰çš„å†…å­˜</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="äºŒç¤ºä¾‹æ¼”ç¤º">äºŒã€ç¤ºä¾‹æ¼”ç¤º</h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cstring&gt;

class Person {
public:
    char* name;

    // æ„é€ å‡½æ•°
    Person(const char* n) {
        name = new char[strlen(n) + 1];
        strcpy(name, n);
    }

    // æµ…æ‹·è´æ„é€ å‡½æ•°ï¼ˆé»˜è®¤ï¼‰
    // Person(const Person&amp; other) = default;

    // âœ… æ·±æ‹·è´æ„é€ å‡½æ•°
    Person(const Person&amp; other) {
        name = new char[strlen(other.name) + 1];
        strcpy(name, other.name);
    }

    // ææ„å‡½æ•°
    ~Person() {
        delete[] name;
    }

    void print() {
        std::cout &lt;&lt; "Name: " &lt;&lt; name &lt;&lt; std::endl;
    }
};
</code></pre>
<p>å¦‚æœä¸å†™æ·±æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨é»˜è®¤ä½¿ç”¨æµ…æ‹·è´ï¼Œå³åªæ˜¯å¤åˆ¶äº†æŒ‡é’ˆ <code>name</code> çš„åœ°å€ï¼Œä¸¤ä¸ªå¯¹è±¡å…±ç”¨åŒä¸€å—å †å†…å­˜ã€‚è¿™æ ·ä¸€æ¥ï¼Œä¿®æ”¹ <code>p2.name</code> ä¼šå½±å“ <code>p1.name</code>ï¼Œä¸¤ä¸ªå¯¹è±¡ææ„æ—¶è¿˜ä¼š<strong>é‡å¤é‡Šæ”¾</strong>åŒä¸€å—å†…å­˜ï¼Œå¯¼è‡´å´©æºƒã€‚</p>
<hr>
<h3 id="ä¸‰é»˜è®¤æ‹·è´è¡Œä¸ºè¯´æ˜">ä¸‰ã€é»˜è®¤æ‹·è´è¡Œä¸ºè¯´æ˜</h3>
<table>
<thead>
<tr>
<th>æ“ä½œç±»å‹</th>
<th>é»˜è®¤è¡Œä¸º</th>
<th>æ˜¯å¦å®‰å…¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‹·è´æ„é€ å‡½æ•°</td>
<td>æµ…æ‹·è´</td>
<td>âŒ</td>
</tr>
<tr>
<td>èµ‹å€¼è¿ç®—ç¬¦ <code>=</code></td>
<td>æµ…èµ‹å€¼</td>
<td>âŒ</td>
</tr>
<tr>
<td>ææ„å‡½æ•°</td>
<td>é»˜è®¤é‡Šæ”¾</td>
<td>âŒï¼ˆè‹¥ä½¿ç”¨è£¸æŒ‡é’ˆï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="conståœ¨ç±»ä¸­çš„ä½œç”¨">conståœ¨ç±»ä¸­çš„ä½œç”¨</h2>
<p><code>const</code> å¯ä»¥ä¿®é¥°<strong>ç±»çš„æˆå‘˜å‡½æ•°</strong>ã€<strong>å‡½æ•°å‚æ•°ä¸è¿”å›å€¼</strong>å’Œå¯¹è±¡ï¼Œä½†å®ƒ<strong>ä¸èƒ½ç›´æ¥ä¿®é¥°æ•´ä¸ªç±»æœ¬èº«</strong>ã€‚</p>
<hr>
<h3 id="const-ä¿®é¥°å‡½æ•°å¸¸æˆå‘˜å‡½æ•°"><code>const</code> <strong>ä¿®é¥°å‡½æ•°</strong>ï¼ˆå¸¸æˆå‘˜å‡½æ•°ï¼‰</h3>
<pre><code class="language-cpp">class MyClass {
public:
    int getValue() const; // âœ… è¡¨ç¤ºè¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹ç±»æˆå‘˜å˜é‡
private:
    int value = 42;
};
int MyClass::getValue() const {
    // this-&gt;value = 10; âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡
    return value;
}
</code></pre>
<pre><code class="language-cpp">const MyClass obj;   // âœ… **åªèƒ½è°ƒç”¨ const æˆå‘˜å‡½æ•°**
MyClass obj2;        // âœ… **æ—¢å¯ä»¥è°ƒç”¨ const æˆå‘˜å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨éå¸¸æˆå‘˜å‡½æ•°**
</code></pre>
<hr>
<h3 id="const-ä¿®é¥°å‡½æ•°å‚æ•°å’Œè¿”å›å€¼"><code>const</code> ä¿®é¥°å‡½æ•°å‚æ•°å’Œè¿”å›å€¼</h3>
<p>ä¿®é¥°å‚æ•°</p>
<pre><code class="language-cpp">void printName(const std::string&amp; name); // âœ… é¿å…æ‹·è´ + ä¿è¯ä¸ä¿®æ”¹å‚æ•°
</code></pre>
<p>ä¿®é¥°è¿”å›å€¼</p>
<pre><code class="language-cpp">const std::string&amp; getName() const; // âœ… è¿”å›å€¼ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆé˜²æ­¢è¯¯ç”¨ï¼‰
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<code>const</code> ä¿®é¥°<strong>è¿”å›å€¼</strong>æ—¶ï¼Œé€šå¸¸ç”¨äº<strong>è¿”å›å¼•ç”¨æˆ–æŒ‡é’ˆ</strong>ï¼Œä¸å¤ªå¸¸ç”¨äºå€¼è¿”å›ã€‚</p>
</blockquote>
<hr>
<h3 id="ä¸èƒ½ç›´æ¥ä¿®é¥°ç±»">ä¸èƒ½ç›´æ¥ä¿®é¥°ç±»</h3>
<pre><code class="language-cpp">const class MyClass {}; // âŒ ä¸å¸¸è§ï¼ŒåŸºæœ¬æ— æ„ä¹‰
</code></pre>
<h1 id="å››ç»§æ‰¿">å››ã€ç»§æ‰¿</h1>
<p>åŸºç±»å‡½æ•°ç”¨ <code>virtual</code> ä¿®é¥°ï¼Œå­ç±»å¯ä»¥ <code>override</code> å®ƒ</p>
<h2 id="ç»§æ‰¿æ–¹å¼-ä¿®é¥°ç¬¦å¯è§æ€§">ç»§æ‰¿æ–¹å¼ ä¿®é¥°ç¬¦å¯è§æ€§</h2>
<p>c++ Javaä¸­çš„ç»§æ‰¿æ–¹å¼æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œç»§æ‰¿æ–¹å¼</p>
<table>
<thead>
<tr>
<th>ç»§æ‰¿æ–¹å¼</th>
<th>åŸºç±»çš„ <code>public</code> æˆå‘˜åœ¨å­ç±»ä¸­å˜æˆ</th>
<th>åŸºç±»çš„ <code>protected</code> æˆå‘˜åœ¨å­ç±»ä¸­å˜æˆ</th>
<th>åŸºç±»çš„ <code>private</code> æˆå‘˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>public</code> ç»§æ‰¿</td>
<td><code>public</code></td>
<td><code>protected</code></td>
<td>âŒ ä¸å¯è®¿é—®</td>
</tr>
<tr>
<td><code>protected</code> ç»§æ‰¿</td>
<td><code>protected</code></td>
<td><code>protected</code></td>
<td>âŒ ä¸å¯è®¿é—®</td>
</tr>
<tr>
<td><code>private</code> ç»§æ‰¿</td>
<td><code>private</code></td>
<td><code>private</code></td>
<td>âŒ ä¸å¯è®¿é—®</td>
</tr>
</tbody>
</table>
<p>å¯è§æ€§</p>
<table>
<thead>
<tr>
<th>ä¿®é¥°ç¬¦</th>
<th>ç±»å†…è®¿é—®</th>
<th>æ´¾ç”Ÿç±»è®¿é—®</th>
<th>ç±»å¤–è®¿é—®</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>public</code></td>
<td>âœ… å¯è®¿é—®</td>
<td>âœ… å¯è®¿é—®</td>
<td>âœ… å¯è®¿é—®</td>
</tr>
<tr>
<td><code>protected</code></td>
<td>âœ… å¯è®¿é—®</td>
<td>âœ… å¯è®¿é—®</td>
<td>âŒ ä¸å¯è®¿é—®</td>
</tr>
<tr>
<td><code>private</code></td>
<td>âœ… å¯è®¿é—®</td>
<td>âŒ ä¸å¯è®¿é—®</td>
<td>âŒ ä¸å¯è®¿é—®</td>
</tr>
</tbody>
</table>
<h2 id="ç¤ºä¾‹-1">ç¤ºä¾‹</h2>
<pre><code class="language-cpp">//student.h
#ifndef STUDENT_H
#define STUDENT_H

#include "Person.h" 

class Student : public Person {
public:
    std::string school;

    Student();
    Student(const std::string&amp; name_, int age_, const std::string&amp; school_);
    ~Student() override;

    void introduce() const override;
};

#endif
</code></pre>
<pre><code class="language-cpp">//student.cpp
#include "Student.h"
#include &lt;iostream&gt;

Student::Student() : Person("unknown_student", 18), school("Unknown School") {
    std::cout &lt;&lt; "Student default constructor\n";
}

Student::Student(const std::string&amp; name_, int age_, const std::string&amp; school_)
    : Person(name_, age_), school(school_) {
    std::cout &lt;&lt; "Student parameterized constructor\n";
}

Student::~Student() {
    std::cout &lt;&lt; "Student destructor called for " &lt;&lt; name &lt;&lt; "\n";
}

void Student::introduce() const {
    std::cout &lt;&lt; "Hi, I am student " &lt;&lt; name &lt;&lt; ", age " &lt;&lt; *age
              &lt;&lt; ", studying at " &lt;&lt; school &lt;&lt; ".\n";
}
</code></pre>
<h2 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„é¡ºåº">æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„é¡ºåº</h2>
<ul>
<li><strong>æ„é€ é¡ºåº</strong>ï¼šå…ˆæ„é€ åŸºç±» â†’ å†æ„é€ æ´¾ç”Ÿç±»</li>
<li><strong>ææ„é¡ºåº</strong>ï¼šå…ˆææ„æ´¾ç”Ÿç±» â†’ å†ææ„åŸºç±»</li>
</ul>
<pre><code class="language-cpp">class Base {
public:
    Base() { std::cout &lt;&lt; "Base()\n"; }
    ~Base() { std::cout &lt;&lt; "~Base()\n"; }
};

class Derived : public Base {
public:
    Derived() { std::cout &lt;&lt; "Derived()\n"; }
    ~Derived() { std::cout &lt;&lt; "~Derived()\n"; }
};
</code></pre>
<p>è¾“å‡ºé¡ºåºï¼š</p>
<pre><code>Base()
Derived()
~Derived()
~Base()
</code></pre>
<h2 id="cç‰¹æœ‰å¤šç»§æ‰¿ä¸è™šç»§æ‰¿-è±å½¢ç»§æ‰¿é—®é¢˜">C++ç‰¹æœ‰ï¼šå¤šç»§æ‰¿ä¸è™šç»§æ‰¿ è±å½¢ç»§æ‰¿é—®é¢˜</h2>
<h3 id="å¤šç»§æ‰¿">å¤šç»§æ‰¿</h3>
<pre><code class="language-cpp">class A { public: int x; };
class B { public: int x; };
class C : public A, public B {};  // å¤šç»§æ‰¿ï¼ŒC æœ‰ä¸¤ä¸ª xï¼Œéœ€åŒºåˆ† A::x å’Œ B::x
</code></pre>
<p>â€œ<strong>è±å½¢ç»§æ‰¿é—®é¢˜ï¼ˆDiamond Problemï¼‰</strong>â€æ˜¯ C++ å¤šç»§æ‰¿ä¸­ç‰¹æœ‰çš„ä¸€ç§<strong>ç»§æ‰¿ç»“æ„å†²çªé—®é¢˜</strong>ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ol>
<li><strong>åŸºç±»å­å¯¹è±¡é‡å¤</strong></li>
<li><strong>æ•°æ®äºŒä¹‰æ€§ / æ­§ä¹‰è®¿é—®</strong></li>
<li><strong>æ„é€ å’Œææ„æ··ä¹±</strong></li>
<li><strong>èµ„æºæµªè´¹</strong></li>
</ol>
<hr>
<h3 id="ä¸€ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿ç»“æ„">ä¸€ã€ä»€ä¹ˆæ˜¯è±å½¢ç»§æ‰¿ç»“æ„ï¼Ÿ</h3>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<code>B</code> å’Œ <code>C</code> éƒ½ç»§æ‰¿è‡ª <code>A</code>ï¼Œè€Œ <code>D</code> åŒæ—¶ç»§æ‰¿è‡ª <code>B</code> å’Œ <code>C</code>ï¼š</p>
<pre><code class="language-cpp">      A
     / \
    B   C
     \ /
      D
class A {
public:
    int value;
};

class B : public A {};
class C : public A {};
class D : public B, public C {};
</code></pre>
<hr>
<h3 id="äºŒè±å½¢ç»§æ‰¿å¼•å‘çš„é—®é¢˜">äºŒã€è±å½¢ç»§æ‰¿å¼•å‘çš„é—®é¢˜</h3>
<h4 id="1-äº§ç”Ÿ-å¤šä¸ª-a-å­å¯¹è±¡">1. äº§ç”Ÿ <strong>å¤šä¸ª A å­å¯¹è±¡</strong></h4>
<p>åœ¨ <code>D</code> ä¸­åŒ…å«äº† <strong>ä¸¤ä¸ª A å¯¹è±¡</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ¥è‡ª <code>B</code>ï¼ˆBâ†’Aï¼‰</li>
<li>ä¸€ä¸ªæ¥è‡ª <code>C</code>ï¼ˆCâ†’Aï¼‰</li>
</ul>
<h4 id="2-è®¿é—®-value-å‘ç”Ÿæ­§ä¹‰">2. è®¿é—® <code>value</code> å‘ç”Ÿæ­§ä¹‰</h4>
<pre><code class="language-cpp">D d;
d.value = 10; // âŒ é”™è¯¯ï¼šç¼–è¯‘å™¨ä¸çŸ¥é“æ˜¯ B::A::value è¿˜æ˜¯ C::A::value
</code></pre>
<p>å¿…é¡»æ‰‹åŠ¨æŒ‡å®šï¼š</p>
<pre><code class="language-cpp">d.B::value = 10;
d.C::value = 20;
</code></pre>
<hr>
<h3 id="ä¸‰è§£å†³æ–¹æ³•è™šç»§æ‰¿virtual">ä¸‰ã€è§£å†³æ–¹æ³•ï¼šè™šç»§æ‰¿ï¼ˆ<code>virtual</code>ï¼‰</h3>
<p>ç”¨ <code>virtual</code> ä¿®é¥°ç»§æ‰¿å…³ç³»ï¼Œè®© <strong>B å’Œ C å…±äº«åŒä¸€ä¸ª A å­å¯¹è±¡</strong>ã€‚</p>
<pre><code class="language-cpp">class A {
public:
    int value;
};

class B : virtual public A {};
class C : virtual public A {};
class D : public B, public C {};
</code></pre>
<h4 id="è™šç»§æ‰¿æ•ˆæœ">è™šç»§æ‰¿æ•ˆæœï¼š</h4>
<ul>
<li><code>D</code> ä¸­åªæœ‰ <strong>ä¸€ä¸ª A å¯¹è±¡</strong>ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨åè°ƒ</li>
<li>è®¿é—®æˆå‘˜ä¸å†æ­§ä¹‰ï¼š</li>
</ul>
<pre><code class="language-cpp">D d;
d.value = 10; // âœ… æ­£å¸¸è®¿é—®ï¼Œæ— æ­§ä¹‰
</code></pre>
<h1 id="äº”å‹å…ƒ">äº”ã€å‹å…ƒ</h1>
<p>åœ¨ C++ ä¸­ï¼Œ<strong>å‹å…ƒï¼ˆfriendï¼‰</strong>æœºåˆ¶å…è®¸éæˆå‘˜å‡½æ•°æˆ–å…¶ä»–ç±»è®¿é—®æŸä¸ªç±»çš„ç§æœ‰ï¼ˆ<code>private</code>ï¼‰å’Œå—ä¿æŠ¤ï¼ˆ<code>protected</code>ï¼‰æˆå‘˜ã€‚å‹å…ƒå…³ç³»æ˜¯ <strong>å•å‘</strong>ã€<strong>ä¸ä¼ é€’</strong> çš„ï¼Œå¸¸ç”¨äºæ“ä½œç¬¦é‡è½½ã€è°ƒè¯•å·¥å…·æˆ–ä¸¤ä¸ªç±»ä¹‹é—´çš„ç´§å¯†åä½œç­‰åœºæ™¯ã€‚</p>
<hr>
<h2 id="ä¸€å‹å…ƒçš„ä¸‰ç§å½¢å¼">ä¸€ã€å‹å…ƒçš„ä¸‰ç§å½¢å¼</h2>
<h3 id="1-å‹å…ƒå‡½æ•°friend-function">1. å‹å…ƒå‡½æ•°ï¼ˆFriend Functionï¼‰</h3>
<pre><code class="language-cpp">class Box {
private:
    int width;
public:
    Box(int w) : width(w) {}

    // å£°æ˜å‹å…ƒå‡½æ•°
    friend void printWidth(const Box&amp; b);
};

// éæˆå‘˜å‡½æ•°ï¼Œå¯ä»¥è®¿é—® Box çš„ç§æœ‰æˆå‘˜
void printWidth(const Box&amp; b) {
    std::cout &lt;&lt; "Width: " &lt;&lt; b.width &lt;&lt; std::endl;
}
</code></pre>
<p>ğŸ”¸<strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>éç±»æˆå‘˜å‡½æ•°ï¼Œä½†æ‹¥æœ‰ç±»çš„è®¿é—®æƒé™</li>
<li>å¸¸ç”¨äºé‡è½½ <code>operator&lt;&lt;</code> ç­‰æ“ä½œç¬¦</li>
</ul>
<hr>
<h3 id="2-å‹å…ƒç±»friend-class">2. å‹å…ƒç±»ï¼ˆFriend Classï¼‰</h3>
<pre><code class="language-cpp">class Engine;

class Car {
private:
    int speed;
public:
    Car(int s) : speed(s) {}
    friend class Engine;  // Engine å¯ä»¥è®¿é—® Car çš„ç§æœ‰æˆå‘˜
};

class Engine {
public:
    void showSpeed(const Car&amp; c) {
        std::cout &lt;&lt; "Speed: " &lt;&lt; c.speed &lt;&lt; std::endl;
    }
};
</code></pre>
<p>ğŸ”¸<strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸€ä¸ªç±»å¯ä»¥å°†å¦ä¸€ä¸ªç±»å£°æ˜ä¸ºå‹å…ƒ</li>
<li>è¯¥å‹å…ƒç±»çš„<strong>æ‰€æœ‰æˆå‘˜å‡½æ•°</strong>éƒ½èƒ½è®¿é—®è¢«å‹å…ƒç±»çš„ç§æœ‰æˆå‘˜</li>
<li><strong>å•å‘</strong>ï¼šEngine æ˜¯ Car çš„æœ‹å‹ï¼Œä½† Car ä¸å¯è®¿é—® Engine çš„ç§æœ‰æˆå‘˜</li>
</ul>
<hr>
<h3 id="3-æˆå‘˜å‡½æ•°ä½œä¸ºå‹å…ƒ">3. æˆå‘˜å‡½æ•°ä½œä¸ºå‹å…ƒ</h3>
<pre><code class="language-cpp">class B;

class A {
private:
    int a_val;
public:
    A(int v) : a_val(v) {}
    friend void B::printA(const A&amp; a);  // åªè®© B çš„æŸä¸ªæˆå‘˜å‡½æ•°æˆä¸ºå‹å…ƒ
};

class B {
public:
    void printA(const A&amp; a) {
        std::cout &lt;&lt; a.a_val &lt;&lt; std::endl;
    }
};
</code></pre>
<p>æ³¨æ„ï¼šè¿™ç§æ–¹å¼å¿…é¡» <strong>å…ˆå£°æ˜ B ç±»</strong>ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¸çŸ¥é“ <code>B::printA</code> æ˜¯ä»€ä¹ˆã€‚</p>
<hr>
<h2 id="äºŒå‹å…ƒçš„ç‰¹æ€§æ€»ç»“">äºŒã€å‹å…ƒçš„ç‰¹æ€§æ€»ç»“</h2>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å•å‘è®¿é—®</td>
<td>è¢«å£°æ˜ä¸ºå‹å…ƒçš„ç±»/å‡½æ•°å¯ä»¥è®¿é—®å£°æ˜ç±»çš„ç§æœ‰æˆå‘˜ï¼Œåä¹‹ä¸è¡Œ</td>
</tr>
<tr>
<td>éæˆå‘˜ä¹Ÿå¯å£°æ˜ä¸ºå‹å…ƒ</td>
<td>æ™®é€šå‡½æ•°ã€ç±»ã€ç±»çš„æˆå‘˜å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºå‹å…ƒ</td>
</tr>
<tr>
<td>ä¸ç ´åå°è£…æ€§</td>
<td>å°½ç®¡èƒ½è®¿é—®ç§æœ‰æˆå‘˜ï¼Œä½†è®¿é—®èŒƒå›´è¢«<strong>æ˜¾å¼é™å®š</strong></td>
</tr>
<tr>
<td>ç¼–è¯‘æ—¶ç»‘å®š</td>
<td>å‹å…ƒå…³ç³»åœ¨ç¼–è¯‘æ—¶å»ºç«‹ï¼Œæ— æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¾ç½®</td>
</tr>
<tr>
<td>ä¸ç»§æ‰¿ã€ä¸ä¼ é€’</td>
<td>å­ç±»ä¸ä¼šç»§æ‰¿å‹å…ƒæƒé™ï¼Œå‹å…ƒç±»çš„å‹å…ƒä¹Ÿæ— è®¿é—®æƒ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="ä¸‰ç¤ºä¾‹é‡è½½--è¿ç®—ç¬¦">ä¸‰ã€ç¤ºä¾‹ï¼šé‡è½½ <code>&lt;&lt;</code> è¿ç®—ç¬¦</h2>
<pre><code class="language-cpp">class Person {
private:
    std::string name;
    int age;
public:
    Person(std::string n, int a) : name(n), age(a) {}
    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Person&amp; p);
};

std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Person&amp; p) {
    os &lt;&lt; "Name: " &lt;&lt; p.name &lt;&lt; ", Age: " &lt;&lt; p.age;
    return os;
}
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>æœªç»ä½œè€…åŒæ„è¯·å‹¿è½¬è½½</p>
<p>æœ¬æ–‡æ¥è‡ªåšå®¢å›­ä½œè€…ï¼š<a href="https://www.cnblogs.com/aslanvon/" target="_blank">aixueforever</a>ï¼ŒåŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/aslanvon/p/18931148" target="_blank">https://www.cnblogs.com/aslanvon/p/18931148</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0006944444444444445" data-date-updated="2025-06-16 14:50">2025-06-16 14:49</span>&nbsp;
<a href="https://www.cnblogs.com/aslanvon">aixueforever</a>&nbsp;
é˜…è¯»(<span id="post_view_count">2</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18931148);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18931148', targetLink: 'https://www.cnblogs.com/aslanvon/p/18931148', title: 'c++ å‡½æ•° ç±»' })">ä¸¾æŠ¥</a>
</div>
        
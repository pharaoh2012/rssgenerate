
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yongjannes/p/19025811" title="å‘å¸ƒäº 2025-08-06 20:27">
    <span role="heading" aria-level="2">ã€Šç¡…è°·ç”„é€‰ã€‹é¡¹ç›®ç¬”è®°</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="ç¡…è°·ç”„é€‰é¡¹ç›®ç¬”è®°">ã€Šç¡…è°·ç”„é€‰ã€‹é¡¹ç›®ç¬”è®°</h1>
<h2 id="-ä¸ªäººä»“åº“åœ°å€">ğŸ“ ä¸ªäººä»“åº“åœ°å€</h2>
<p>ğŸ‘‰ æˆ‘çš„ Git ä»“åº“åœ°å€ï¼š<br>
<a href="https://github.com/yongjannes/Star_Platform" target="_blank" rel="noopener nofollow">https://github.com/yongjannes/Star_Platform</a></p>
<p>æ¬¢è¿ starã€äº¤æµæˆ–æå‡ºå»ºè®®ï¼</p>
<h2 id="ä¸€vue3-ç»„ä»¶é€šä¿¡çš„è‰ºæœ¯æ„å»ºçµæ´»å¯å¤ç”¨çš„-ui">ä¸€ã€Vue3 ç»„ä»¶é€šä¿¡çš„è‰ºæœ¯ï¼šæ„å»ºçµæ´»å¯å¤ç”¨çš„ UI</h2>
<p>åœ¨ä»»ä½•å¤æ‚çš„å•é¡µåº”ç”¨ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡éƒ½æ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚é«˜æ•ˆçš„ç»„ä»¶é€šä¿¡èƒ½å¤Ÿæ˜¾è‘—æé«˜ä»£ç çš„å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§ä»¥åŠå›¢é˜Ÿåä½œæ•ˆç‡ã€‚</p>
<h3 id="11-propsçˆ¶å­ç»„ä»¶é€šä¿¡çš„åŸºçŸ³">1.1 <code>props</code>ï¼šçˆ¶å­ç»„ä»¶é€šä¿¡çš„åŸºçŸ³</h3>
<p><code>props</code> æ˜¯ Vue ä¸­æœ€ç›´æ¥ã€æœ€å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼ã€‚åœ¨ Vue3 ä¸­ï¼Œé€šè¿‡ <code>defineProps</code> å®ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®ï¼Œå¹¶ä¸”æ— éœ€æ˜¾å¼å¼•å…¥ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>&lt;script setup&gt;</code> ä¸­ä½¿ç”¨ï¼Œæå¤§åœ°ç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚</p>
<p><strong>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ç¤ºä¾‹ï¼š</strong></p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;çˆ¶ç»„ä»¶&lt;/h1&gt;
    &lt;Child info="æˆ‘çˆ±ç¥–å›½" :money="money"&gt;&lt;/Child&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import Child from './Child.vue'; // å‡è®¾å­ç»„ä»¶åä¸º Child.vue

const money = ref(1000);
&lt;/script&gt;
</code></pre>
<p><strong>å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶æ•°æ®ç¤ºä¾‹ï¼š</strong></p>
<p>å­ç»„ä»¶å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æ”¶ <code>props</code>ï¼š</p>
<p><strong>æ–¹å¼1ï¼šå¸¦ç±»å‹å’Œé»˜è®¤å€¼çš„å£°æ˜</strong></p>
<p>è¿™ç§æ–¹å¼æä¾›äº†æ›´å¼ºçš„ç±»å‹æ£€æŸ¥å’Œé»˜è®¤å€¼è®¾ç½®ï¼Œå¢åŠ äº†ä»£ç çš„å¥å£®æ€§ã€‚</p>
<pre><code>&lt;script setup lang="ts"&gt;
let props = defineProps({
  info: {
    type: String, // æ¥å—çš„æ•°æ®ç±»å‹
    default: 'é»˜è®¤å‚æ•°', // æ¥å—é»˜è®¤æ•°æ®
  },
  money: {
    type: Number,
    default: 0,
  },
});

// åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ props.info, props.money
&lt;/script&gt;
</code></pre>
<p><strong>æ–¹å¼2ï¼šæ•°ç»„å½¢å¼çš„ç®€æ´å£°æ˜</strong></p>
<p>é€‚ç”¨äºç®€å•çš„ <code>props</code> å£°æ˜ï¼Œä½†ç¼ºä¹ç±»å‹æ£€æŸ¥ã€‚</p>
<pre><code>&lt;script setup lang="ts"&gt;
let props = defineProps(['info', 'money']);

// åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ props.info, props.money
&lt;/script&gt;
</code></pre>
<p><strong>é‡è¦æç¤ºï¼š</strong> <code>props</code> æ˜¯å•å‘æ•°æ®æµï¼Œå­ç»„ä»¶åªèƒ½è¯»å– <code>props</code> æ•°æ®ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹å®ƒã€‚</p>
<h3 id="12-è‡ªå®šä¹‰äº‹ä»¶å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®">1.2 è‡ªå®šä¹‰äº‹ä»¶ï¼šå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</h3>
<p>è‡ªå®šä¹‰äº‹ä»¶æ˜¯å®ç°å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®çš„å…³é”®æœºåˆ¶ã€‚ä¸åŸç”Ÿ DOM äº‹ä»¶ä¸åŒï¼Œè‡ªå®šä¹‰äº‹ä»¶æ˜¯ Vue ç»„ä»¶ç‰¹æœ‰çš„é€šä¿¡æ–¹å¼ã€‚</p>
<p><strong>çˆ¶ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š</strong></p>
<p>çˆ¶ç»„ä»¶åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸Šé€šè¿‡ <code>@</code> ç¬¦å·ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;çˆ¶ç»„ä»¶&lt;/h1&gt;
    &lt;Event2 @xxx="handler3"&gt;&lt;/Event2&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import Event2 from './Event2.vue'; // å‡è®¾å­ç»„ä»¶åä¸º Event2.vue

const handler3 = (param1: string, param2: string) =&gt; {
  console.log('ä»å­ç»„ä»¶æ¥æ”¶åˆ°æ•°æ®:', param1, param2);
};
&lt;/script&gt;
</code></pre>
<p><strong>å­ç»„ä»¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</strong></p>
<p>åœ¨å­ç»„ä»¶å†…éƒ¨ï¼Œä½¿ç”¨ <code>defineEmits</code> å®å£°æ˜éœ€è¦è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œç„¶åé€šè¿‡ <code>$emit</code> æ–¹æ³•è§¦å‘äº‹ä»¶å¹¶ä¼ é€’æ•°æ®ã€‚</p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;æˆ‘æ˜¯å­ç»„ä»¶2&lt;/h1&gt;
    &lt;button @click="handler"&gt;ç‚¹å‡»æˆ‘è§¦å‘xxxè‡ªå®šä¹‰äº‹ä»¶&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
let $emit = defineEmits(['xxx']); // å£°æ˜è‡ªå®šä¹‰äº‹ä»¶ 'xxx'
const handler = () =&gt; {
  $emit('xxx', 'æ³•æ‹‰åˆ©', 'èŒ…å°'); // è§¦å‘ 'xxx' äº‹ä»¶å¹¶ä¼ é€’æ•°æ®
};
&lt;/script&gt;
</code></pre>
<p><strong>Vue3 ä¸­åŸç”Ÿ DOM äº‹ä»¶çš„ç‰¹æ®Šæ€§ï¼š</strong></p>
<p>åœ¨ Vue3 ä¸­ï¼Œåƒ <code>click</code>ã€<code>dbclick</code>ã€<code>change</code> è¿™ç±»åŸç”Ÿ DOM äº‹ä»¶ï¼Œæ— è®ºæ˜¯åœ¨æ™®é€š HTML æ ‡ç­¾ä¸Šè¿˜æ˜¯åœ¨è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œé»˜è®¤éƒ½è§†ä¸ºåŸç”Ÿ DOM äº‹ä»¶ã€‚è¿™ä¸ Vue2 ä¸­éœ€è¦ <code>native</code> ä¿®é¥°ç¬¦æ‰èƒ½å°†ç»„ä»¶ä¸Šçš„äº‹ä»¶å˜ä¸ºåŸç”Ÿ DOM äº‹ä»¶æœ‰æ‰€ä¸åŒã€‚ä½†å¦‚æœå­ç»„ä»¶å†…éƒ¨é€šè¿‡ <code>defineEmits</code> å®šä¹‰äº†åŒåçš„äº‹ä»¶ï¼Œé‚£ä¹ˆå®ƒå°†ä¼˜å…ˆè¢«è§†ä¸ºè‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<h3 id="13-å…¨å±€äº‹ä»¶æ€»çº¿-mittå®ç°ä»»æ„ç»„ä»¶é€šä¿¡">1.3 å…¨å±€äº‹ä»¶æ€»çº¿ (mitt)ï¼šå®ç°ä»»æ„ç»„ä»¶é€šä¿¡</h3>
<p>åœ¨ Vue2 ä¸­ï¼Œæˆ‘ä»¬å¸¸åˆ©ç”¨ <code>Vue.prototype.$bus</code> å®ç°å…¨å±€äº‹ä»¶æ€»çº¿ã€‚ç„¶è€Œï¼ŒVue3 æ²¡æœ‰ Vue æ„é€ å‡½æ•°ï¼Œä¸”ç»„åˆå¼ API ä¸­æ²¡æœ‰ <code>this</code> ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ä¼ ç»Ÿçš„å…¨å±€äº‹ä»¶æ€»çº¿æ–¹å¼ä¸å†é€‚ç”¨ã€‚åœ¨ Vue3 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è½»é‡çº§çš„ç¬¬ä¸‰æ–¹åº“ <code>mitt</code> æ¥å®ç°å…¨å±€äº‹ä»¶æ€»çº¿åŠŸèƒ½ï¼Œä»è€Œè®©ä»»æ„ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚</p>
<p><strong>mitt å®˜ç½‘ï¼š</strong> <a href="https://www.npmjs.com/package/mitt" target="_blank" rel="noopener nofollow">https://www.npmjs.com/package/mitt</a></p>
<h3 id="14-v-modelå®ç°çˆ¶å­ç»„ä»¶æ•°æ®çš„åŒå‘ç»‘å®š">1.4 <code>v-model</code>ï¼šå®ç°çˆ¶å­ç»„ä»¶æ•°æ®çš„åŒå‘ç»‘å®š</h3>
<p><code>v-model</code> æŒ‡ä»¤ä¸ä»…ç”¨äºæ”¶é›†è¡¨å•æ•°æ®å®ç°åŒå‘ç»‘å®šï¼Œå®ƒä¹Ÿæ˜¯å®ç°çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥çš„å¼ºå¤§å·¥å…·ã€‚åœ¨åº•å±‚ï¼Œ<code>v-model</code> å®é™…ä¸Šæ˜¯ <code>props</code> (<code>modelValue</code>) å’Œè‡ªå®šä¹‰äº‹ä»¶ (<code>update:modelValue</code>) çš„è¯­æ³•ç³–ã€‚</p>
<p><strong>åŸºæœ¬ç”¨æ³•ï¼š</strong></p>
<pre><code>&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Child v-model="msg"&gt;&lt;/Child&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import Child from './Child.vue';

const msg = ref('åˆå§‹æ¶ˆæ¯');
&lt;/script&gt;
</code></pre>
<p><strong>å¤š v-model ç»‘å®šï¼š</strong></p>
<p>Vue3 å…è®¸ä¸€ä¸ªç»„ä»¶ä½¿ç”¨å¤šä¸ª <code>v-model</code>ï¼Œä»è€Œå®ç°çˆ¶å­ç»„ä»¶å¤šä¸ªæ•°æ®çš„åŒæ­¥ã€‚</p>
<pre><code>&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Child v-model:pageNo="msg" v-model:pageSize="msg1"&gt;&lt;/Child&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import Child from './Child.vue';

const msg = ref(1);
const msg1 = ref(10);
&lt;/script&gt;
</code></pre>
<h3 id="15-useattrsè·å–ç»„ä»¶çš„é-props-å±æ€§å’Œäº‹ä»¶">1.5 <code>useAttrs</code>ï¼šè·å–ç»„ä»¶çš„é <code>props</code> å±æ€§å’Œäº‹ä»¶</h3>
<p><code>useAttrs</code> æ˜¯ Vue3 æä¾›çš„ä¸€ä¸ª Composition APIï¼Œç”¨äºè·å–ç»„ä»¶å®ä¾‹ä¸Šæœªè¢« <code>defineProps</code> å£°æ˜çš„å±æ€§å’Œäº‹ä»¶ï¼ˆåŒ…æ‹¬åŸç”Ÿ DOM äº‹ä»¶å’Œè‡ªå®šä¹‰äº‹ä»¶ï¼‰ã€‚è¿™ç±»ä¼¼äº Vue2 ä¸­çš„ <code>$attrs</code> å’Œ <code>$listeners</code>ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code>&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;my-button type="success" size="small" title="æ ‡é¢˜" @click="handler"&gt;&lt;/my-button&gt;
&lt;/template&gt;

&lt;!-- å­ç»„ä»¶ my-button.vue --&gt;
&lt;script setup lang="ts"&gt;
import { useAttrs } from 'vue';
let $attrs = useAttrs();
console.log($attrs); // ä¼šåŒ…å« type, size, title, å’Œ click äº‹ä»¶
&lt;/script&gt;
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ <code>defineProps</code> å·²ç»æ¥æ”¶äº†æŸä¸ªå±æ€§ï¼Œé‚£ä¹ˆ <code>useAttrs</code> è¿”å›çš„å¯¹è±¡ä¸­å°†ä¸å†åŒ…å«è¯¥å±æ€§ã€‚</p>
<h3 id="16-ref-ä¸-parentç›´æ¥è®¿é—®å­çˆ¶ç»„ä»¶å®ä¾‹">1.6 <code>ref</code> ä¸ <code>$parent</code>ï¼šç›´æ¥è®¿é—®å­/çˆ¶ç»„ä»¶å®ä¾‹</h3>
<p><code>ref</code> å…è®¸æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­è·å–å­ç»„ä»¶çš„å®ä¾‹ï¼ˆVCï¼‰ï¼Œä»è€Œç›´æ¥è®¿é—®å­ç»„ä»¶çš„æ–¹æ³•å’Œå“åº”å¼æ•°æ®ã€‚è€Œ <code>$parent</code> åˆ™å…è®¸å­ç»„ä»¶è·å–å…¶çˆ¶ç»„ä»¶çš„å®ä¾‹ã€‚</p>
<p><strong>çˆ¶ç»„ä»¶é€šè¿‡ <code>ref</code> è®¿é—®å­ç»„ä»¶ï¼š</strong></p>
<pre><code>&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;refä¸$parent&lt;/h1&gt;
    &lt;Son ref="son"&gt;&lt;/Son&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
import Son from './Son.vue';
import { onMounted, ref } from 'vue';
const son = ref();
onMounted(() =&gt; {
  console.log(son.value); // æ‰“å°å­ç»„ä»¶å®ä¾‹
  // è®¿é—®å­ç»„ä»¶æš´éœ²çš„æ•°æ®å’Œæ–¹æ³•
  console.log(son.value.money);
  son.value.someMethod();
});
&lt;/script&gt;
</code></pre>
<p><strong>å­ç»„ä»¶é€šè¿‡ <code>defineExpose</code> æš´éœ²æ•°æ®å’Œæ–¹æ³•ï¼š</strong></p>
<p>åœ¨ Vue3 ä¸­ï¼Œç»„ä»¶å†…éƒ¨çš„æ•°æ®å’Œæ–¹æ³•é»˜è®¤ä¸å¯¹å¤–æš´éœ²ã€‚å¦‚æœå¸Œæœ›çˆ¶ç»„ä»¶é€šè¿‡ <code>ref</code> è®¿é—®ï¼Œå­ç»„ä»¶å¿…é¡»ä½¿ç”¨ <code>defineExpose</code> æ˜ç¡®åœ°æš´éœ²å®ƒä»¬ã€‚</p>
<pre><code>&lt;!-- å­ç»„ä»¶ Son.vue --&gt;
&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
let money = ref(1000);
const someMethod = () =&gt; {
  console.log('å­ç»„ä»¶çš„æ–¹æ³•è¢«è°ƒç”¨');
};
defineExpose({
  money,
  someMethod,
});
&lt;/script&gt;
</code></pre>
<p><strong>å­ç»„ä»¶é€šè¿‡ <code>$parent</code> è®¿é—®çˆ¶ç»„ä»¶ï¼š</strong></p>
<pre><code>&lt;!-- å­ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;button @click="handler($parent)"&gt;ç‚¹å‡»æˆ‘è·å–çˆ¶ç»„ä»¶å®ä¾‹&lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
const handler = (parent: any) =&gt; {
  console.log(parent); // æ‰“å°çˆ¶ç»„ä»¶å®ä¾‹
  // è®¿é—®çˆ¶ç»„ä»¶æš´éœ²çš„æ•°æ®å’Œæ–¹æ³•
  if (parent &amp;&amp; parent.parentData) {
    console.log(parent.parentData);
  }
};
&lt;/script&gt;
</code></pre>
<h3 id="17-provide-ä¸-injectå®ç°è·¨å±‚çº§ç»„ä»¶é€šä¿¡">1.7 <code>provide</code> ä¸ <code>inject</code>ï¼šå®ç°è·¨å±‚çº§ç»„ä»¶é€šä¿¡</h3>
<p><code>provide</code> å’Œ <code>inject</code> æ˜¯ Vue3 æä¾›çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºå®ç°â€œç¥–å…ˆç»„ä»¶æä¾›æ•°æ®ï¼Œåä»£ç»„ä»¶æ³¨å…¥æ•°æ®â€çš„è·¨å±‚çº§é€šä¿¡ï¼Œæ— è®ºç»„ä»¶å±‚çº§æœ‰å¤šæ·±ã€‚</p>
<p><strong>ç¥–å…ˆç»„ä»¶æä¾›æ•°æ®ï¼š</strong></p>
<pre><code>&lt;!-- ç¥–å…ˆç»„ä»¶ --&gt;
&lt;script setup lang="ts"&gt;
import { provide } from 'vue';
provide('token', 'admin_token'); // æä¾›ä¸€ä¸ªåä¸º 'token' çš„æ•°æ®
&lt;/script&gt;
</code></pre>
<p><strong>åä»£ç»„ä»¶æ³¨å…¥æ•°æ®ï¼š</strong></p>
<pre><code>&lt;!-- åä»£ç»„ä»¶ --&gt;
&lt;script setup lang="ts"&gt;
import { inject } from 'vue';
let token = inject('token'); // æ³¨å…¥åä¸º 'token' çš„æ•°æ®
console.log(token); // 'admin_token'
&lt;/script&gt;
</code></pre>
<h3 id="18-piniaæ–°ä¸€ä»£é›†ä¸­å¼çŠ¶æ€ç®¡ç†å®¹å™¨">1.8 Piniaï¼šæ–°ä¸€ä»£é›†ä¸­å¼çŠ¶æ€ç®¡ç†å®¹å™¨</h3>
<p>Pinia æ˜¯ Vue3 æ¨èçš„é›†ä¸­å¼çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒç±»ä¼¼äº Vuexï¼Œä½†æ›´åŠ è½»é‡ã€ç›´è§‚ï¼Œå¹¶ä¸”ç§»é™¤äº† <code>mutations</code> å’Œ <code>modules</code> ç­‰æ¦‚å¿µï¼Œä½¿å¾—çŠ¶æ€ç®¡ç†æ›´åŠ æ‰å¹³åŒ–å’Œæ˜“äºç†è§£ã€‚</p>
<p><strong>Pinia å®˜ç½‘ï¼š</strong> <a href="https://pinia.web3doc.top/" target="_blank" rel="noopener nofollow">https://pinia.web3doc.top/</a></p>
<h3 id="19-æ’æ§½-slotçµæ´»çš„å†…å®¹åˆ†å‘">1.9 æ’æ§½ (<code>slot</code>)ï¼šçµæ´»çš„å†…å®¹åˆ†å‘</h3>
<p>æ’æ§½æ˜¯ Vue ç»„ä»¶æä¾›å†…å®¹åˆ†å‘èƒ½åŠ›çš„æœºåˆ¶ï¼Œå®ƒå…è®¸çˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„æŒ‡å®šä½ç½®æ³¨å…¥å†…å®¹ï¼Œä»è€Œå®ç°æ›´çµæ´»çš„ç»„ä»¶ç»„åˆã€‚æ’æ§½åˆ†ä¸ºé»˜è®¤æ’æ§½ã€å…·åæ’æ§½å’Œä½œç”¨åŸŸæ’æ§½ã€‚</p>
<p><strong>é»˜è®¤æ’æ§½ï¼š</strong></p>
<p>å­ç»„ä»¶å®šä¹‰ä¸€ä¸ª <code>&lt;slot&gt;</code> æ ‡ç­¾ï¼Œçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œåœ¨åŒæ ‡ç­¾å†…éƒ¨ä¹¦å†™çš„å†…å®¹å°†å¡«å……åˆ°è¿™ä¸ªæ’æ§½ä¸­ã€‚</p>
<pre><code>&lt;!-- å­ç»„ä»¶ Todo.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;slot&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Todo&gt;
    &lt;h1&gt;æˆ‘æ˜¯é»˜è®¤æ’æ§½å¡«å……çš„ç»“æ„&lt;/h1&gt;
  &lt;/Todo&gt;
&lt;/template&gt;
</code></pre>
<p><strong>å…·åæ’æ§½ï¼š</strong></p>
<p>å­ç»„ä»¶å®šä¹‰å¤šä¸ªå¸¦æœ‰ <code>name</code> å±æ€§çš„æ’æ§½ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ <code>v-slot:</code> æˆ– <code>#</code> æŒ‡ä»¤æŒ‡å®šå†…å®¹å¡«å……åˆ°å“ªä¸ªå…·åæ’æ§½ã€‚</p>
<pre><code>&lt;!-- å­ç»„ä»¶ Todo.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;todo&lt;/h1&gt;
    &lt;slot name="a"&gt;&lt;/slot&gt;
    &lt;slot name="b"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;slot&lt;/h1&gt;
    &lt;Todo&gt;
      &lt;template v-slot:a&gt;
        &lt;!-- å¯ä»¥ç”¨ #a æ›¿æ¢ --&gt;
        &lt;div&gt;å¡«å…¥ç»„ä»¶Aéƒ¨åˆ†çš„ç»“æ„&lt;/div&gt;
      &lt;/template&gt;
      &lt;template v-slot:b&gt;
        &lt;!-- å¯ä»¥ç”¨ #b æ›¿æ¢ --&gt;
        &lt;div&gt;å¡«å…¥ç»„ä»¶Béƒ¨åˆ†çš„ç»“æ„&lt;/div&gt;
      &lt;/template&gt;
    &lt;/Todo&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ä½œç”¨åŸŸæ’æ§½ï¼š</strong></p>
<p>ä½œç”¨åŸŸæ’æ§½å…è®¸å­ç»„ä»¶åœ¨æ¸²æŸ“æ’æ§½å†…å®¹æ—¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œçˆ¶ç»„ä»¶å¯ä»¥æ ¹æ®è¿™äº›æ•°æ®å†³å®šæ’æ§½å†…å®¹çš„ç»“æ„å’Œæ ·å¼ã€‚</p>
<pre><code>&lt;!-- å­ç»„ä»¶ Todo.vue --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;todo&lt;/h1&gt;
    &lt;ul&gt;
      &lt;!-- ç»„ä»¶å†…éƒ¨éå†æ•°ç»„ --&gt;
      &lt;li v-for="(item, index) in todos" :key="item.id"&gt;
        &lt;!-- ä½œç”¨åŸŸæ’æ§½å°†æ•°æ®å›ä¼ ç»™çˆ¶ç»„ä»¶ --&gt;
        &lt;slot :$row="item" :$index="index"&gt;&lt;/slot&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup lang="ts"&gt;
defineProps(['todos']); // æ¥å—çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®
&lt;/script&gt;

&lt;!-- çˆ¶ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;slot&lt;/h1&gt;
    &lt;Todo :todos="todos"&gt;
      &lt;template v-slot="{$row, $index}"&gt;
        &lt;!-- çˆ¶ç»„ä»¶å†³å®šå­ç»„ä»¶çš„ç»“æ„ä¸å¤–è§‚ --&gt;
        &lt;span :style="{ color: $row.done ? 'green' : 'red' }"&gt;{{ $row.title }}&lt;/span&gt;
      &lt;/template&gt;
    &lt;/Todo&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import Todo from './Todo.vue';
import { ref } from 'vue';
// çˆ¶ç»„ä»¶å†…éƒ¨æ•°æ®
let todos = ref([
  { id: 1, title: 'åƒé¥­', done: true },
  { id: 2, title: 'ç¡è§‰', done: false },
  { id: 3, title: 'æ‰“è±†è±†', done: true },
]);
&lt;/script&gt;
</code></pre>
<h2 id="äºŒé¡¹ç›®åˆå§‹åŒ–ä¸è§„èŒƒåŒ–æ„å»ºé«˜è´¨é‡ä»£ç çš„åŸºçŸ³">äºŒã€é¡¹ç›®åˆå§‹åŒ–ä¸è§„èŒƒåŒ–ï¼šæ„å»ºé«˜è´¨é‡ä»£ç çš„åŸºçŸ³</h2>
<p>ä¸€ä¸ªé«˜è´¨é‡çš„é¡¹ç›®ç¦»ä¸å¼€ä¸¥æ ¼çš„ä»£ç è§„èŒƒå’Œç»Ÿä¸€çš„å¼€å‘æµç¨‹ã€‚â€œç¡…è°·ç”„é€‰è¿è¥å¹³å°â€é¡¹ç›®åœ¨åˆå§‹åŒ–é˜¶æ®µå°±é›†æˆäº†å¤šé¡¹å·¥å…·ï¼Œç¡®ä¿äº†ä»£ç çš„è´¨é‡å’Œå›¢é˜Ÿåä½œçš„é¡ºç•…ã€‚</p>
<h3 id="21-ç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–">2.1 ç¯å¢ƒå‡†å¤‡ä¸é¡¹ç›®åˆå§‹åŒ–</h3>
<p>é¡¹ç›®é‡‡ç”¨ <strong>Vue3</strong> å’Œ <strong>Vite</strong> è¿›è¡Œæ„å»ºï¼Œå¹¶å¼ºåˆ¶ä½¿ç”¨ <strong>pnpm</strong> ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œä»¥ç¡®ä¿ä¾èµ–å®‰è£…çš„ä¸€è‡´æ€§å’Œé«˜æ€§èƒ½ã€‚</p>
<p><strong>ç¯å¢ƒè¦æ±‚ï¼š</strong></p>
<ul>
<li>Node.js v16.14.2+</li>
<li>pnpm 8.0.0+</li>
</ul>
<p><strong>pnpm å®‰è£…ï¼š</strong></p>
<pre><code>npm i -g pnpm
</code></pre>
<p><strong>é¡¹ç›®åˆå§‹åŒ–å‘½ä»¤ï¼š</strong></p>
<pre><code>pnpm create vite
</code></pre>
<p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•åï¼Œè¿è¡Œ <code>pnpm install</code> å®‰è£…æ‰€æœ‰ä¾èµ–ï¼Œç„¶å <code>pnpm run dev</code> å³å¯å¯åŠ¨é¡¹ç›®ã€‚</p>
<h3 id="22-é¡¹ç›®é…ç½®ä»£ç è´¨é‡ä¸å¼€å‘æ•ˆç‡çš„ä¿éšœ">2.2 é¡¹ç›®é…ç½®ï¼šä»£ç è´¨é‡ä¸å¼€å‘æ•ˆç‡çš„ä¿éšœ</h3>
<h4 id="221-eslint-é…ç½®javascripttypescript-ä»£ç è´¨é‡æ£€æµ‹">2.2.1 ESLint é…ç½®ï¼šJavaScript/TypeScript ä»£ç è´¨é‡æ£€æµ‹</h4>
<p>ESLint æ˜¯ä¸€ä¸ªå¯æ’æ‹”çš„ JavaScript/TypeScript ä»£ç æ£€æµ‹å·¥å…·ï¼Œç”¨äºå‘ç°å’ŒæŠ¥å‘Šä»£ç ä¸­çš„é—®é¢˜ã€‚</p>
<p><strong>å®‰è£… ESLint åŠå…¶ç›¸å…³æ’ä»¶ï¼š</strong></p>
<pre><code>pnpm create @eslint/config@latest
pnpm install -D eslint-plugin-import eslint-plugin-vue eslint-plugin-node eslint-plugin-prettier eslint-config-prettier eslint-plugin-node @babel/eslint-parser
</code></pre>
<p><strong><code>eslint.config.ts</code> é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</strong></p>
<pre><code>import { globalIgnores } from 'eslint/config'
import { defineConfigWithVueTs, vueTsConfigs } from '@vue/eslint-config-typescript'
import pluginVue from 'eslint-plugin-vue'
import skipFormatting from '@vue/eslint-config-prettier/skip-formatting'
import pluginTs from '@typescript-eslint/eslint-plugin'

export default defineConfigWithVueTs(
  // é…ç½®è¦è¢« ESLint æ£€æŸ¥çš„æ–‡ä»¶ç±»å‹
  {
    name: 'app/files-to-lint',
    files: ['**/*.{ts,mts,tsx,vue}'],
  },

  // å¿½ç•¥ä¸éœ€è¦æ£€æŸ¥çš„ç›®å½•ï¼Œä¾‹å¦‚æ„å»ºè¾“å‡ºç›®å½•ã€è¦†ç›–ç‡ç›®å½•ç­‰
  globalIgnores(['**/dist/**', '**/dist-ssr/**', '**/coverage/**']),

  // ä½¿ç”¨ Vue æä¾›çš„åŸºç¡€é…ç½®ï¼ˆç­‰ä»·äº vue3-essential è§„åˆ™é›†ï¼‰
  pluginVue.configs['flat/essential'],

  // ä½¿ç”¨ Vue å®˜æ–¹æä¾›çš„ TypeScript æ¨èè§„åˆ™
  vueTsConfigs.recommended,

  // ç¦ç”¨æ‰€æœ‰æ ¼å¼åŒ–ç›¸å…³è§„åˆ™ï¼Œé¿å…ä¸ Prettier å†²çª
  skipFormatting,

  // è‡ªå®šä¹‰è§„åˆ™é…ç½®
  {
    plugins: {
      vue: pluginVue, // ä¸€å®šè¦å£°æ˜ vue æ’ä»¶
      '@typescript-eslint': pluginTs,
    },

    rules: {
      // JavaScript åŸºç¡€è§„åˆ™
      'no-var': 'error', // ç¦æ­¢ä½¿ç”¨ varï¼Œå¼ºåˆ¶ä½¿ç”¨ let/const
      'no-multiple-empty-lines': ['warn', { max: 1 }], // è­¦å‘Šï¼šæœ€å¤šå…è®¸ä¸€è¡Œç©ºè¡Œ
      'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off', // ç”Ÿäº§ç¯å¢ƒç¦æ­¢ä½¿ç”¨ console
      'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', // ç”Ÿäº§ç¯å¢ƒç¦æ­¢ä½¿ç”¨ debugger
      'no-unexpected-multiline': 'error', // é˜²æ­¢ç”±äºè‡ªåŠ¨åˆ†å·æ’å…¥å¼•å‘çš„ bug
      'no-useless-escape': 'off', // å…è®¸å¤šä½™çš„è½¬ä¹‰å­—ç¬¦ï¼ˆæŸäº›æ­£åˆ™åœºæ™¯éœ€è¦ï¼‰

      // TypeScript ç›¸å…³è§„åˆ™
      '@typescript-eslint/no-unused-vars': 'error', // ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
      '@typescript-eslint/prefer-ts-expect-error': 'error', // æ›´æ¨èä½¿ç”¨ ts-expect-error æ›¿ä»£ ts-ignore
      '@typescript-eslint/no-explicit-any': 'off', // å…è®¸ä½¿ç”¨ any ç±»å‹
      '@typescript-eslint/no-non-null-assertion': 'off', // å…è®¸ä½¿ç”¨éç©ºæ–­è¨€ï¼ˆ!ï¼‰
      '@typescript-eslint/no-namespace': 'off', // å…è®¸ä½¿ç”¨å‘½åç©ºé—´ï¼ˆnamespaceï¼‰
      '@typescript-eslint/semi': 'off', // å…³é—­å¯¹åˆ†å·çš„å¼ºåˆ¶æ£€æŸ¥

      // Vue ç›¸å…³è§„åˆ™
      'vue/multi-word-component-names': 'off', // å…è®¸ä½¿ç”¨å•è¯ç»„ä»¶åï¼ˆé€‚ç”¨äºé¡µé¢ç»„ä»¶ç­‰ï¼‰
      // 'vue/script-setup-uses-vars': 'error', // æ–°ç‰ˆæ’ä»¶å¯èƒ½ç§»é™¤äº†æ­¤è§„åˆ™ï¼Œå…ˆæ³¨é‡Šé¿å…é”™è¯¯
      'vue/no-mutating-props': 'off', // å…è®¸ä¿®æ”¹ propsï¼ˆæŸäº›ä¸šåŠ¡åœºæ™¯å¯èƒ½éœ€è¦ï¼‰
      'vue/attribute-hyphenation': 'off', // å…³é—­æ¨¡æ¿ä¸­ attribute å¿…é¡»ä½¿ç”¨è¿å­—ç¬¦çš„é™åˆ¶
    },
  },
)

</code></pre>
<p>åŒæ—¶ï¼Œé€šè¿‡ <code>.eslintignore</code> æ–‡ä»¶å¯ä»¥é…ç½®éœ€è¦å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä¾‹å¦‚ <code>dist</code> å’Œ <code>node_modules</code>ã€‚</p>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ è¿è¡Œè„šæœ¬ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç æ£€æŸ¥å’Œä¿®å¤ï¼š</p>
<pre><code>"scripts": {
    "lint": "eslint src",
    "fix": "eslint src --fix"
}
</code></pre>
<h4 id="222-prettier-é…ç½®ä»£ç æ ¼å¼åŒ–å·¥å…·">2.2.2 Prettier é…ç½®ï¼šä»£ç æ ¼å¼åŒ–å·¥å…·</h4>
<p>Prettier æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒä¸“æ³¨äºä»£ç çš„ç¾è§‚å’Œä¸€è‡´æ€§ï¼Œæ”¯æŒå¤šç§è¯­è¨€ã€‚ESLint ä¿è¯ä»£ç è´¨é‡ï¼Œè€Œ Prettier ä¿è¯ä»£ç ç¾è§‚ã€‚ä¸¤è€…ç»“åˆï¼Œç›¸å¾—ç›Šå½°ã€‚</p>
<p><strong>å®‰è£… Prettier ç›¸å…³ä¾èµ–ï¼š</strong></p>
<pre><code>pnpm install -D eslint-plugin-prettier prettier eslint-config-prettier
</code></pre>
<p><strong><code>.prettierrc.cjs</code> è§„åˆ™é…ç½®ç¤ºä¾‹ï¼š</strong></p>
<pre><code>module.exports = {
  "singleQuote": true, // ä½¿ç”¨å•å¼•å·ä»£æ›¿åŒå¼•å·
  "semi": false, // ç¦æ­¢è¯­å¥æœ«å°¾è‡ªåŠ¨æ·»åŠ åˆ†å·
  "bracketSpacing": true, // å¯¹è±¡å­—é¢é‡çš„å¤§æ‹¬å·å†…æ·»åŠ ç©ºæ ¼ï¼ˆå¦‚ï¼š{ foo: bar }ï¼‰
  "htmlWhitespaceSensitivity": "ignore", // å¿½ç•¥ HTML ä¸­çš„ç©ºæ ¼æ•æ„Ÿæ€§ï¼Œé¿å…æ ¼å¼æ··ä¹±
};

</code></pre>
<p>é€šè¿‡ <code>.prettierignore</code> åŒæ ·å¯ä»¥å¿½ç•¥ä¸éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶ã€‚</p>
<h4 id="223-stylelint-é…ç½®cssscss-ä»£ç è§„èŒƒ">2.2.3 Stylelint é…ç½®ï¼šCSS/SCSS ä»£ç è§„èŒƒ</h4>
<p>Stylelint æ˜¯ CSS çš„ Lint å·¥å…·ï¼Œç”¨äºæ ¼å¼åŒ– CSS ä»£ç ã€æ£€æŸ¥è¯­æ³•é”™è¯¯å’Œä¸åˆç†çš„å†™æ³•ï¼Œå¹¶æŒ‡å®š CSS ä¹¦å†™é¡ºåºç­‰ã€‚é¡¹ç›®ä¸­ä½¿ç”¨ SCSS ä½œä¸ºé¢„å¤„ç†å™¨ã€‚</p>
<p><strong>å®‰è£… Stylelint åŠå…¶ç›¸å…³ä¾èµ–ï¼š</strong></p>
<pre><code>pnpm add sass sass-loader stylelint postcss postcss-scss postcss-html stylelint-config-prettier stylelint-config-recess-order stylelint-config-recommended-scss stylelint-config-standard stylelint-config-standard-vue stylelint-scss stylelint-order stylelint-config-standard-scss -D
</code></pre>
<p><strong><code>stylelint.config.ts</code> é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</strong></p>
<pre><code>// @see https://stylelint.io/
// @see https://github.com/stylelint-scss/stylelint-scss
// @see https://github.com/prettier-community/stylelint-prettier

import type { Config } from 'stylelint'

const config: Config = {
  // ç»§æ‰¿ä¸€ç³»åˆ—å…±äº«é…ç½®
  extends: [
    'stylelint-config-standard', // Stylelint å®˜æ–¹æ¨èçš„åŸºç¡€é…ç½®
    'stylelint-config-standard-scss', // SCSS è¯­æ³•è§„åˆ™
    'stylelint-config-html/vue', // è§£æ Vue æ–‡ä»¶ä¸­çš„ &lt;style&gt; æ ‡ç­¾
    'stylelint-config-recommended-vue/scss', // æ¨èåœ¨ Vue ä¸­ä½¿ç”¨çš„ SCSS è§„åˆ™
    'stylelint-config-recess-order', // CSS å±æ€§æ’åºè§„åˆ™
  ],

  // æ³¨å†Œæ’ä»¶
  plugins: [
    'stylelint-prettier', // å°† Prettier ä½œä¸º Stylelint çš„è§„åˆ™è¿è¡Œ
  ],

  // ä¸ºä¸åŒç±»å‹çš„æ–‡ä»¶æŒ‡å®šè‡ªå®šä¹‰è¯­æ³•è§£æå™¨
  overrides: [
    {
      files: ['**/*.(scss|css|vue|html)'],
      customSyntax: 'postcss-scss',
    },
    {
      files: ['**/*.(html|vue)'],
      customSyntax: 'postcss-html',
    },
  ],

  // å¿½ç•¥æ£€æŸ¥ç‰¹å®šæ–‡ä»¶
  ignoreFiles: [
    '**/*.js',
    '**/*.jsx',
    '**/*.tsx',
    '**/*.ts',
    '**/*.json',
    '**/*.md',
    '**/*.yaml',
    'dist/**/*',
    'public/**/*',
    'node_modules/**/*',
    'html/**/*', // &lt;--- å·²ä¸ºæ‚¨æ·»åŠ æ­¤è¡Œ
  ],

  // è‡ªå®šä¹‰è§„åˆ™
  rules: {
    // -----------------------------------------------------------------
    // @section æ’ä»¶ä¸é›†æˆ (Plugins &amp; Integrations)
    // -----------------------------------------------------------------

    // [å»ºè®®] æ¿€æ´» stylelint-prettier æ’ä»¶ï¼Œä½¿ç”¨ .prettierrc æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–
    'prettier/prettier': true,

    // -----------------------------------------------------------------
    // @section è§„åˆ™å…³é—­ä¸æ”¾å®½ (Rules Disabled &amp; Relaxed)
    // -----------------------------------------------------------------

    // [å…³é—­] å…è®¸åœ¨ CSS ä¸­ä½¿ç”¨ v-bind()ï¼Œé¿å…ä¸å¿…è¦çš„æŠ¥é”™
    'value-keyword-case': null,
    // [å…³é—­] å…è®¸ä½ä¼˜å…ˆçº§çš„é€‰æ‹©å™¨å‡ºç°åœ¨é«˜ä¼˜å…ˆçº§é€‰æ‹©å™¨ä¹‹åï¼Œåœ¨å¤æ‚åœºæ™¯ä¸‹æ›´çµæ´»
    'no-descending-specificity': null,
    // [å…³é—­] å…è®¸ç©ºçš„æºæ–‡ä»¶
    'no-empty-source': null,
    // [å…³é—­] ä¸å¼ºåˆ¶è§„å®šç±»åçš„æ ¼å¼ï¼Œè®©å¼€å‘è€…è‡ªç”±é€‰æ‹© BEMã€pcss ç­‰è§„èŒƒ
    'selector-class-pattern': null,
    // [å…³é—­] å…è®¸ä½¿ç”¨æœªçŸ¥çš„ CSS å±æ€§ï¼ˆä¾‹å¦‚ï¼Œä¸ºäº†å…¼å®¹æŸäº› CSS-in-JS å†™æ³•ï¼‰
    'property-no-unknown': null,
    // [å…³é—­] å…è®¸åœ¨å€¼å’Œå±æ€§ä¸­ä½¿ç”¨æµè§ˆå™¨å¼•æ“å‰ç¼€ï¼ˆ--webkit-, -moz- ç­‰ï¼‰
    'value-no-vendor-prefix': null,
    'property-no-vendor-prefix': null,

    // -----------------------------------------------------------------
    // @section é£æ ¼ä¸çº¦å®šå¢å¼º (Style &amp; Convention Enhancements)
    // -----------------------------------------------------------------

    // [å¢å¼º] è¦æ±‚ URL åœ°å€å¿…é¡»æ€»æ˜¯å¸¦å¼•å·
    'function-url-quotes': 'always',
    // [å¢å¼º] éªŒè¯ SCSS ç‰¹æœ‰çš„ @ è§„åˆ™ï¼ˆå¦‚ @use, @forwardï¼‰ï¼Œé˜²æ­¢æ‹¼å†™é”™è¯¯
    'scss/at-rule-no-unknown': true,
    // [å¢å¼º] ä¸å…è®¸æœªçŸ¥çš„ä¼ªç±»é€‰æ‹©å™¨ï¼Œä½†å¿½ç•¥ Vue ç‰¹æœ‰çš„ä¼ªç±»
    'selector-pseudo-class-no-unknown': [
      true,
      {
        ignorePseudoClasses: ['global', 'v-deep', 'deep'],
      },
    ],
    // [æœ€ä½³å®è·µ] ç¦æ­¢åœ¨é€‰æ‹©å™¨ä¸­ä½¿ç”¨ IDï¼Œé¼“åŠ±ä½¿ç”¨ç±»æ¥æ§åˆ¶æ ·å¼ï¼Œæé«˜å¯å¤ç”¨æ€§
    'selector-max-id': 0,

    // -----------------------------------------------------------------
    // @section å¯é€‰çš„æœ€ä½³å®è·µè§„åˆ™ (Optional Best Practices)
    // æ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚å–æ¶ˆæ³¨é‡Šæ¥å¯ç”¨è¿™äº›è§„åˆ™
    // -----------------------------------------------------------------

    // [å¯é€‰] å¼ºåˆ¶ä½¿ç”¨ BEM å‘½åçº¦å®š (https://en.bem.info/methodology/naming-convention/)
    // 'selector-class-pattern': [
    //   '^[a-z]([a-z0-9-]+)?(__([a-z0-9]+-?)+)?(--([a-z0-9]+-?)+){0,2}$',
    //   {
    //     message:
    //       'Expected class selector to be written in BEM notation (e.g., block__element--modifier)',
    //   },
    // ],

    // [å¯é€‰] è§„å®š font-size åªèƒ½ä½¿ç”¨ rem æˆ– em å•ä½ï¼Œæå‡å¯è®¿é—®æ€§
    // 'declaration-property-unit-allowed-list': {
    //   'font-size': ['rem', 'em'],
    // },
  },
}

export default config

</code></pre>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ  Stylelint çš„è¿è¡Œè„šæœ¬ï¼š</p>
<pre><code>"scripts": {
    "lint:style": "stylelint src/**/*.{css,scss,vue} --cache --fix"
}
</code></pre>
<p>æœ€ç»ˆï¼Œ<code>package.json</code> ä¸­çš„è„šæœ¬å°†åŒ…å«å®Œæ•´çš„ Lint å’Œæ ¼å¼åŒ–å‘½ä»¤ï¼š</p>
<pre><code>"scripts": {
    "dev": "vite --open",
    "build": "vue-tsc &amp;&amp; vite build",
    "preview": "vite preview",
    "fix": "eslint src --fix",
    "format": "prettier --write \"./**/*.{html,vue,ts,js,json,md}\"",
    "lint": "run-p lint:eslint lint:style",
    "lint:eslint": "eslint src/**/*.{ts,vue} --cache --fix",
    "lint:style": "stylelint src/**/*.{css,scss,vue} --cache --fix",
}
</code></pre>
<h4 id="224-husky-é…ç½®git-hook-è‡ªåŠ¨åŒ–">2.2.4 Husky é…ç½®ï¼šGit Hook è‡ªåŠ¨åŒ–</h4>
<p>ä¸ºäº†å¼ºåˆ¶å¼€å‘äººå‘˜éµå¾ªä»£ç è§„èŒƒï¼Œæˆ‘ä»¬å¼•å…¥äº† Huskyã€‚Husky å¯ä»¥åœ¨ Git æäº¤ï¼ˆcommitï¼‰å‰è§¦å‘ Git é’©å­ï¼Œè‡ªåŠ¨æ‰§è¡Œä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥ã€‚</p>
<p><strong>å®‰è£… Huskyï¼š</strong></p>
<pre><code>pnpm install -D husky
</code></pre>
<p><strong>åˆå§‹åŒ– Huskyï¼š</strong></p>
<pre><code>npx husky-init
</code></pre>
<p>è¿™ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆ <code>.husky</code> ç›®å½•ï¼Œå…¶ä¸­åŒ…å« <code>pre-commit</code> æ–‡ä»¶ã€‚</p>
<p><strong>ä¿®æ”¹ <code>.husky/pre-commit</code> æ–‡ä»¶ï¼š</strong></p>
<pre><code>pnpm run format # åœ¨æäº¤å‰è‡ªåŠ¨æ‰§è¡Œæ ¼å¼åŒ–
</code></pre>
<p>è¿™æ ·ï¼Œæ¯æ¬¡æ‰§è¡Œ <code>git commit</code> æ—¶ï¼Œä»£ç éƒ½ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ã€‚</p>
<h4 id="225-commitlint-é…ç½®ç»Ÿä¸€-git-æäº¤ä¿¡æ¯è§„èŒƒ">2.2.5 Commitlint é…ç½®ï¼šç»Ÿä¸€ Git æäº¤ä¿¡æ¯è§„èŒƒ</h4>
<p>ä¸ºäº†ä¿æŒ Git æäº¤ä¿¡æ¯çš„æ¸…æ™°å’Œä¸€è‡´æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨ Commitlint æ¥å¼ºåˆ¶æ‰§è¡Œæäº¤è§„èŒƒã€‚</p>
<p><strong>å®‰è£… Commitlintï¼š</strong></p>
<pre><code>pnpm add @commitlint/config-conventional @commitlint/cli -D
</code></pre>
<p><strong>åˆ›å»º <code>commitlint.config.cjs</code> é…ç½®æ–‡ä»¶ï¼š</strong></p>
<pre><code>// commitlint.config.cjs
module.exports = {
  // ç»§æ‰¿ç¤¾åŒºæ¨èçš„ 'config-conventional' è§„èŒƒ
  extends: ['@commitlint/config-conventional'],

  // è‡ªå®šä¹‰è§„åˆ™ (0=ç¦ç”¨, 1=è­¦å‘Š, 2=æŠ¥é”™)
  rules: {
    // type ç±»å‹å¿…é¡»æ˜¯ä»¥ä¸‹ä¹‹ä¸€
    'type-enum': [
      2,
      'always',
      [
        'feat',     // æ–°åŠŸèƒ½
        'fix',      // ä¿®å¤bug
        'docs',     // æ–‡æ¡£
        'style',    // ä»£ç æ ¼å¼
        'refactor', // é‡æ„
        'perf',     // æ€§èƒ½ä¼˜åŒ–
        'test',     // æµ‹è¯•
        'chore',    // æ„å»ºæˆ–è¾…åŠ©å·¥å…·å˜åŠ¨
        'revert',   // å›é€€
        'build',    // æ‰“åŒ…
      ],
    ],

    // type å¤§å°å†™: ä¸ä½œé™åˆ¶
    'type-case': [0],

    // type æ˜¯å¦ä¸ºç©º: ä¸ä½œé™åˆ¶
    'type-empty': [0],

    // scope æ˜¯å¦ä¸ºç©º: ä¸ä½œé™åˆ¶
    'scope-empty': [0],

    // scope å¤§å°å†™: ä¸ä½œé™åˆ¶
    'scope-case': [0],

    // subject ç»“å°¾æ ‡ç‚¹: ä¸ä½œé™åˆ¶
    'subject-full-stop': [0, 'never'],

    // subject å¤§å°å†™: ä¸ä½œé™åˆ¶
    'subject-case': [0, 'never'],

    // header æœ€å¤§é•¿åº¦: ä¸ä½œé™åˆ¶
    'header-max-length': [0, 'always', 72],
  },
};

</code></pre>
<p>åœ¨ <code>package.json</code> ä¸­æ·»åŠ  Commitlint è„šæœ¬ï¼š</p>
<pre><code>"scripts": {
    "commitlint": "commitlint --config commitlint.config.cjs -e -V"
}
</code></pre>
<p>é…ç½® Huskyï¼Œåœ¨ <code>commit-msg</code> é’©å­ä¸­æ‰§è¡Œ Commitlint æ£€æŸ¥ï¼š</p>
<pre><code>npx husky add .husky/commit-msg
</code></pre>
<p>åœ¨ç”Ÿæˆçš„ <code>.husky/commit-msg</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code>pnpm commitlint
</code></pre>
<p>ç°åœ¨ï¼Œæäº¤ä¿¡æ¯å¿…é¡»ç¬¦åˆ <code>type: message</code> çš„æ ¼å¼ï¼Œä¾‹å¦‚ <code>fix: ä¿®å¤ç™»å½•é—®é¢˜</code>ã€‚</p>
<h4 id="226-å¼ºåˆ¶ä½¿ç”¨-pnpm-åŒ…ç®¡ç†å™¨">2.2.6 å¼ºåˆ¶ä½¿ç”¨ pnpm åŒ…ç®¡ç†å™¨</h4>
<p>ä¸ºäº†é¿å…ä¸åŒåŒ…ç®¡ç†å™¨ï¼ˆnpm, yarn, pnpmï¼‰å¯èƒ½å¯¼è‡´çš„ä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜ï¼Œé¡¹ç›®å¼ºåˆ¶ä½¿ç”¨ pnpmã€‚</p>
<p>åœ¨æ ¹ç›®å½•åˆ›å»º <code>scripts/preinstall.js</code> æ–‡ä»¶ï¼š</p>
<pre><code>if (!/pnpm/.test(process.env.npm_execpath || '')) {
  console.warn(
    `\u001b[33mThis repository must using pnpm as the package manager ` +
    ` for scripts to work properly.\u001b[39m\n`,
  );
  process.exit(1);
}
</code></pre>
<p>åœ¨ <code>package.json</code> ä¸­é…ç½® <code>preinstall</code> è„šæœ¬ï¼š</p>
<pre><code>"scripts": {
    "preinstall": "node ./scripts/preinstall.js"
}
</code></pre>
<p>è¿™æ ·ï¼Œå½“å°è¯•ä½¿ç”¨ <code>npm</code> æˆ– <code>yarn</code> å®‰è£…ä¾èµ–æ—¶ï¼Œå°†ä¼šæŠ¥é”™å¹¶æç¤ºä½¿ç”¨ <code>pnpm</code>ã€‚</p>
<h2 id="ä¸‰é¡¹ç›®é›†æˆæå‡å¼€å‘æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ">ä¸‰ã€é¡¹ç›®é›†æˆï¼šæå‡å¼€å‘æ•ˆç‡ä¸ç”¨æˆ·ä½“éªŒ</h2>
<p>åœ¨é¡¹ç›®è§„èŒƒåŒ–ä¹‹åï¼Œæˆ‘ä»¬å°†æ ¸å¿ƒçš„ç¬¬ä¸‰æ–¹åº“å’Œå·¥å…·é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œè¿›ä¸€æ­¥æå‡å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h3 id="31-element-plus-é›†æˆç¾è§‚é«˜æ•ˆçš„-ui-ç»„ä»¶åº“">3.1 Element Plus é›†æˆï¼šç¾è§‚é«˜æ•ˆçš„ UI ç»„ä»¶åº“</h3>
<p>ç¡…è°·ç”„é€‰è¿è¥å¹³å°é‡‡ç”¨ Element Plus ä½œä¸º UI ç»„ä»¶åº“ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ç»„ä»¶å’Œå‹å¥½çš„å¼€å‘ä½“éªŒã€‚</p>
<p><strong>å®‰è£… Element Plusï¼š</strong></p>
<pre><code>pnpm install element-plus @element-plus/icons-vue
</code></pre>
<p><strong>åœ¨ <code>main.ts</code> ä¸­å…¨å±€å®‰è£…å¹¶é…ç½®ä¸­æ–‡è¯­è¨€ï¼š</strong></p>
<pre><code>import { createApp } from 'vue';
import App from './App.vue';
import ElementPlus from 'element-plus';
import 'element-plus/dist/index.css';
//@ts-ignore å¿½ç•¥å½“å‰æ–‡ä»¶tsç±»å‹çš„æ£€æµ‹å¦åˆ™æœ‰çº¢è‰²æç¤º(æ‰“åŒ…ä¼šå¤±è´¥)
import zhCn from 'element-plus/dist/locale/zh-cn.mjs';

const app = createApp(App);

app.use(ElementPlus, {
    locale: zhCn, // è®¾ç½®ä¸ºä¸­æ–‡
});

// Element Pluså…¨å±€ç»„ä»¶ç±»å‹å£°æ˜ (åœ¨ tsconfig.json ä¸­é…ç½®)
// {
//   "compilerOptions": {
//     "types": ["element-plus/global"]
//   }
// }

app.mount('#app');
</code></pre>
<h3 id="32-src-åˆ«åé…ç½®ç®€åŒ–æ¨¡å—å¯¼å…¥">3.2 <code>src</code> åˆ«åé…ç½®ï¼šç®€åŒ–æ¨¡å—å¯¼å…¥</h3>
<p>ä¸ºäº†ç®€åŒ–æ–‡ä»¶è·¯å¾„ï¼Œæé«˜ä»£ç å¯è¯»æ€§ï¼Œæˆ‘ä»¬ä¸º <code>src</code> ç›®å½•é…ç½®äº† <code>@</code> åˆ«åã€‚</p>
<p><strong><code>vite.config.ts</code> é…ç½®ï¼š</strong></p>
<pre><code>import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import path from 'path';

export default defineConfig({
    plugins: [vue()],
    resolve: {
        alias: {
            "@": path.resolve("./src") // ç›¸å¯¹è·¯å¾„åˆ«åé…ç½®ï¼Œä½¿ç”¨ @ ä»£æ›¿ src
        }
    }
});
</code></pre>
<p><strong><code>tsconfig.json</code> TypeScript ç¼–è¯‘é…ç½®ï¼š</strong></p>
<pre><code>{
  "compilerOptions": {
    "baseUrl": "./", // è§£æéç›¸å¯¹æ¨¡å—çš„åŸºåœ°å€ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•
    "paths": { //è·¯å¾„æ˜ å°„ï¼Œç›¸å¯¹äºbaseUrl
      "@/*": ["src/*"]
    }
  }
}
</code></pre>
<h3 id="33-ç¯å¢ƒå˜é‡é…ç½®çµæ´»é€‚åº”å¤šç¯å¢ƒéƒ¨ç½²">3.3 ç¯å¢ƒå˜é‡é…ç½®ï¼šçµæ´»é€‚åº”å¤šç¯å¢ƒéƒ¨ç½²</h3>
<p>é¡¹ç›®å¼€å‘é€šå¸¸ä¼šç»å†å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç­‰ä¸åŒç¯å¢ƒï¼Œæ¯ä¸ªç¯å¢ƒçš„æ¥å£åœ°å€ç­‰é…ç½®å¯èƒ½ä¸åŒã€‚é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨ä¸åŒç¯å¢ƒä¹‹é—´åˆ‡æ¢ã€‚</p>
<p><strong>é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š</strong></p>
<ul>
<li><code>.env.development</code> (å¼€å‘ç¯å¢ƒ)</li>
<li><code>.env.production</code> (ç”Ÿäº§ç¯å¢ƒ)</li>
<li><code>.env.test</code> (æµ‹è¯•ç¯å¢ƒ)</li>
</ul>
<p><strong><code>.env.development</code> ç¤ºä¾‹ï¼š</strong></p>
<pre><code>NODE_ENV = 'development'
VITE_APP_TITLE = 'ç¡…è°·ç”„é€‰è¿è¥å¹³å°'
VITE_APP_BASE_API = '/dev-api' # å˜é‡å¿…é¡»ä»¥ VITE_ ä¸ºå‰ç¼€æ‰èƒ½æš´éœ²ç»™å¤–éƒ¨è¯»å–
</code></pre>
<p><strong><code>package.json</code> é…ç½®è¿è¡Œå‘½ä»¤ï¼š</strong></p>
<pre><code>"scripts": {
    "dev": "vite --open",
    "build:test": "vue-tsc &amp;&amp; vite build --mode test",
    "build:pro": "vue-tsc &amp;&amp; vite build --mode production",
    "preview": "vite preview"
}
</code></pre>
<p>åœ¨ä»£ç ä¸­é€šè¿‡ <code>import.meta.env</code> å¯¹è±¡è·å–ç¯å¢ƒå˜é‡ã€‚</p>
<h3 id="34-svg-å›¾æ ‡é…ç½®ä¸å°è£…è½»é‡çº§çŸ¢é‡å›¾æ–¹æ¡ˆ">3.4 SVG å›¾æ ‡é…ç½®ä¸å°è£…ï¼šè½»é‡çº§çŸ¢é‡å›¾æ–¹æ¡ˆ</h3>
<p>SVG çŸ¢é‡å›¾ç›¸æ¯”ä¼ ç»Ÿå›¾ç‰‡èµ„æºå…·æœ‰ä½“ç§¯å°ã€ä¸å¤±çœŸã€æ€§èƒ½ä¼˜è¶Šç­‰ä¼˜ç‚¹ã€‚é¡¹ç›®ä¸­é€šè¿‡ <code>vite-plugin-svg-icons</code> æ’ä»¶é›†æˆ SVG å›¾æ ‡ã€‚</p>
<p><strong>å®‰è£…æ’ä»¶ï¼š</strong></p>
<pre><code>pnpm install vite-plugin-svg-icons -D
</code></pre>
<p><strong><code>vite.config.ts</code> é…ç½®æ’ä»¶ï¼š</strong></p>
<pre><code>import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons';
import path from 'path';

export default defineConfig(({ command }) =&gt; {
  return {
    plugins: [
      vue(),
      createSvgIconsPlugin({
        // æŒ‡å®šéœ€è¦ç¼“å­˜çš„å›¾æ ‡æ–‡ä»¶å¤¹
        iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
        // æŒ‡å®š symbolId çš„æ ¼å¼
        symbolId: 'icon-[dir]-[name]',
      }),
    ],
  };
});
</code></pre>
<p><strong>å…¥å£æ–‡ä»¶ <code>main.ts</code> å¯¼å…¥ï¼š</strong></p>
<pre><code>import 'virtual:svg-icons-register';
</code></pre>
<p><strong>SVG å›¾æ ‡å…¨å±€ç»„ä»¶å°è£… (<code>src/components/SvgIcon/index.vue</code>)ï¼š</strong></p>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å°† SVG å›¾æ ‡å°è£…æˆä¸€ä¸ªå…¨å±€ç»„ä»¶ <code>SvgIcon</code>ã€‚</p>
<pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;svg :style="{ width: width, height: height }"&gt;
      &lt;use :xlink:href="prefix + name" :fill="color"&gt;&lt;/use&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
defineProps({
  // xlink:href å±æ€§å€¼çš„å‰ç¼€
  prefix: {
    type: String,
    default: '#icon-'
  },
  // svg çŸ¢é‡å›¾çš„åå­—
  name: String,
  // svg å›¾æ ‡çš„é¢œè‰²
  color: {
    type: String,
    default: ""
  },
  // svg å®½åº¦
  width: {
    type: String,
    default: '16px'
  },
  // svg é«˜åº¦
  height: {
    type: String,
    default: '16px'
  }
});
&lt;/script&gt;
&lt;style scoped&gt;&lt;/style&gt;
</code></pre>
<p><strong>å…¨å±€ç»„ä»¶æ³¨å†Œ (<code>src/components/index.ts</code>)ï¼š</strong></p>
<pre><code>import SvgIcon from './SvgIcon/index.vue';
import type { App, Component } from 'vue';

const components: { [name: string]: Component } = { SvgIcon };

export default {
    install(app: App) {
        Object.keys(components).forEach((key: string) =&gt; {
            app.component(key, components[key]);
        });
    }
};
</code></pre>
<p><strong>åœ¨ <code>main.ts</code> ä¸­å®‰è£…å…¨å±€ç»„ä»¶ï¼š</strong></p>
<pre><code>import gloablComponent from './components/index';
app.use(gloablComponent);
</code></pre>
<h3 id="35-é›†æˆ-sasså¢å¼ºæ ·å¼å¼€å‘èƒ½åŠ›">3.5 é›†æˆ Sassï¼šå¢å¼ºæ ·å¼å¼€å‘èƒ½åŠ›</h3>
<p>é¡¹ç›®å·²é€šè¿‡ Stylelint é…ç½®å®‰è£…äº† <code>sass</code> å’Œ <code>sass-loader</code>ï¼Œå¯ä»¥ç›´æ¥åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨ SCSS è¯­æ³•ï¼Œåªéœ€åœ¨ <code>&lt;style&gt;</code> æ ‡ç­¾ä¸Šæ·»åŠ  <code>lang="scss"</code>ã€‚</p>
<p><strong>å¼•å…¥å…¨å±€æ ·å¼å’Œå˜é‡ï¼š</strong></p>
<p>åœ¨ <code>src/styles</code> ç›®å½•ä¸‹åˆ›å»º <code>index.scss</code> (ç”¨äºå¼•å…¥å…¨å±€é‡ç½®æ ·å¼) å’Œ <code>variable.scss</code> (ç”¨äºå®šä¹‰å…¨å±€ SCSS å˜é‡)ã€‚</p>
<p><strong><code>src/styles/index.scss</code>ï¼š</strong></p>
<pre><code>@import './reset.scss'; // å¼•å…¥é‡ç½®æ ·å¼,npmå®˜ç½‘å¤åˆ¶
// å…¶ä»–å…¨å±€æ ·å¼
</code></pre>
<p><strong><code>main.ts</code> å¼•å…¥å…¨å±€æ ·å¼ï¼š</strong></p>
<pre><code>import '@/styles';
</code></pre>
<p><strong><code>vite.config.ts</code> é…ç½®å…¨å±€ SCSS å˜é‡ï¼š</strong></p>
<p>ä¸ºäº†åœ¨æ‰€æœ‰ç»„ä»¶ä¸­éƒ½èƒ½ä½¿ç”¨å…¨å±€ SCSS å˜é‡ï¼Œéœ€è¦åœ¨ Vite é…ç½®ä¸­è¿›è¡Œè®¾ç½®ã€‚</p>
<pre><code>import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';
import path from 'path';
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons';

export default defineConfig(({ command }) =&gt; {
  return {
    plugins: [
      vue(),
      createSvgIconsPlugin({
        iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
        symbolId: 'icon-[dir]-[name]',
      }),
    ],
    resolve: {
      alias: {
        "@": path.resolve("./src")
      }
    },
    css: {
      preprocessorOptions: {
        scss: {
          javascriptEnabled: true,
          additionalData: '@import "./src/styles/variable.scss";', // å¼•å…¥å…¨å±€å˜é‡
        },
      },
    },
  };
});
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> <code>@import "./src/styles/variable.scss";</code> åé¢çš„åˆ†å·ä¸èƒ½çœç•¥ã€‚</p>
<h3 id="36-mock-æ•°æ®å‰ç«¯ç‹¬ç«‹å¼€å‘åˆ©å™¨">3.6 Mock æ•°æ®ï¼šå‰ç«¯ç‹¬ç«‹å¼€å‘åˆ©å™¨</h3>
<p>åœ¨åç«¯æ¥å£å°šæœªå®Œæˆæ—¶ï¼ŒMock æ•°æ®èƒ½å¤Ÿè®©å‰ç«¯ç‹¬ç«‹è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚é¡¹ç›®ä½¿ç”¨äº† <code>vite-plugin-mock</code> å’Œ <code>mockjs</code>ã€‚</p>
<p><strong>å®‰è£…ä¾èµ–ï¼š</strong></p>
<pre><code>pnpm install -D vite-plugin-mock mockjs
</code></pre>
<p><strong><code>vite.config.ts</code> å¯ç”¨æ’ä»¶ï¼š</strong></p>
<pre><code>import { UserConfigExport, ConfigEnv } from 'vite';
import { viteMockServe } from 'vite-plugin-mock';
import vue from '@vitejs/plugin-vue';
import path from 'path';
import { createSvgIconsPlugin } from 'vite-plugin-svg-icons';

export default defineConfig(({ command })=&gt; {
  return {
    plugins: [
      vue(),
      viteMockServe({
        localEnabled: command === 'serve', // ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯ç”¨ Mock
      }),
      createSvgIconsPlugin({
        iconDirs: [path.resolve(process.cwd(), 'src/assets/icons')],
        symbolId: 'icon-[dir]-[name]',
      }),
    ],
    resolve: {
      alias: {
        "@": path.resolve("./src")
      }
    },
    css: {
      preprocessorOptions: {
        scss: {
          javascriptEnabled: true,
          additionalData: '@import "./src/styles/variable.scss";',
        },
      },
    },
  };
});
</code></pre>
<p><strong><code>mock/user.ts</code> ç¤ºä¾‹ï¼š</strong></p>
<p>åœ¨ <code>mock</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>user.ts</code> æ–‡ä»¶ï¼Œå®šä¹‰æ¨¡æ‹Ÿçš„ç”¨æˆ·ç™»å½•å’Œä¿¡æ¯æ¥å£ã€‚</p>
<pre><code>// mock/user.ts
// ç”¨æˆ·ä¿¡æ¯æ•°æ®
function createUserList() {
    return [
        {
            userId: 1,
            avatar:
                'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',
            username: 'admin',
            password: '111111',
            desc: 'å¹³å°ç®¡ç†å‘˜',
            roles: ['å¹³å°ç®¡ç†å‘˜'],
            buttons: ['cuser.detail'],
            routes: ['home'],
            token: 'Admin Token',
        },
        {
            userId: 2,
            avatar:
                'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',
            username: 'system',
            password: '111111',
            desc: 'ç³»ç»Ÿç®¡ç†å‘˜',
            roles: ['ç³»ç»Ÿç®¡ç†å‘˜'],
            buttons: ['cuser.detail', 'cuser.user'],
            routes: ['home'],
            token: 'System Token',
        },
    ];
}

export default [
    // ç”¨æˆ·ç™»å½•æ¥å£
    {
        url: '/api/user/login', // è¯·æ±‚åœ°å€
        method: 'post', // è¯·æ±‚æ–¹å¼
        response: ({ body }) =&gt; {
            // è·å–è¯·æ±‚ä½“æºå¸¦è¿‡æ¥çš„ç”¨æˆ·åä¸å¯†ç 
            const { username, password } = body;
            // è°ƒç”¨è·å–ç”¨æˆ·ä¿¡æ¯å‡½æ•°,ç”¨äºåˆ¤æ–­æ˜¯å¦æœ‰æ­¤ç”¨æˆ·
            const checkUser = createUserList().find(
                (item) =&gt; item.username === username &amp;&amp; item.password === password,
            );
            // æ²¡æœ‰ç”¨æˆ·è¿”å›å¤±è´¥ä¿¡æ¯
            if (!checkUser) {
                return { code: 201, data: { message: 'è´¦å·æˆ–è€…å¯†ç ä¸æ­£ç¡®' } };
            }
            // å¦‚æœæœ‰è¿”å›æˆåŠŸä¿¡æ¯
            const { token } = checkUser;
            return { code: 200, data: { token } };
        },
    },
    // è·å–ç”¨æˆ·ä¿¡æ¯
    {
        url: '/api/user/info',
        method: 'get',
        response: (request) =&gt; {
            // è·å–è¯·æ±‚å¤´æºå¸¦token
            const token = request.headers.token;
            // æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯æ˜¯å¦åŒ…å«æœ‰æ¬¡tokenç”¨æˆ·
            const checkUser = createUserList().find((item) =&gt; item.token === token);
            // æ²¡æœ‰è¿”å›å¤±è´¥çš„ä¿¡æ¯
            if (!checkUser) {
                return { code: 201, data: { message: 'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥' } };
            }
            // å¦‚æœæœ‰è¿”å›æˆåŠŸä¿¡æ¯
            return { code: 200, data: { checkUser } };
        },
    },
];
</code></pre>
<h3 id="37-axios-äºŒæ¬¡å°è£…ç»Ÿä¸€ç½‘ç»œè¯·æ±‚ä¸é”™è¯¯å¤„ç†">3.7 Axios äºŒæ¬¡å°è£…ï¼šç»Ÿä¸€ç½‘ç»œè¯·æ±‚ä¸é”™è¯¯å¤„ç†</h3>
<p>åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼ŒAxios æ˜¯å¸¸ç”¨çš„ HTTP å®¢æˆ·ç«¯ã€‚å¯¹å…¶è¿›è¡ŒäºŒæ¬¡å°è£…ï¼Œå¯ä»¥å®ç°è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€ç»Ÿä¸€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½ï¼Œæå¤§åœ°æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¥å£®æ€§ã€‚</p>
<p><strong>å®‰è£… Axiosï¼š</strong></p>
<pre><code>pnpm install axios
</code></pre>
<p><strong><code>src/utils/request.ts</code> Axios äºŒæ¬¡å°è£…ï¼š</strong></p>
<pre><code>import axios from 'axios';
import { ElMessage } from 'element-plus'; // å¼•å…¥ Element Plus çš„æ¶ˆæ¯æç¤ºç»„ä»¶

// åˆ›å»º axios å®ä¾‹
let request = axios.create({
    baseURL: import.meta.env.VITE_APP_BASE_API, // ä»ç¯å¢ƒå˜é‡è·å–åŸºç¡€ API åœ°å€
    timeout: 5000 // è¯·æ±‚è¶…æ—¶æ—¶é—´
});

// è¯·æ±‚æ‹¦æˆªå™¨
request.interceptors.request.use(config =&gt; {
    // åœ¨è¿™é‡Œå¯ä»¥å¤„ç†ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚ï¼š
    // 1. å¼€å¯è¿›åº¦æ¡ (ä¾‹å¦‚ NProgress)
    // 2. åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å…¬å…±å‚æ•° (ä¾‹å¦‚ token)
    // if (userStore.token) {
    //   config.headers.token = userStore.token;
    // }
    return config;
});

// å“åº”æ‹¦æˆªå™¨
request.interceptors.response.use((response) =&gt; {
    // å“åº”æˆåŠŸï¼Œå¯ä»¥ç»“æŸè¿›åº¦æ¡ï¼Œå¹¶ç®€åŒ–æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç»“æ„
    return response.data; // è¿”å›å®é™…çš„æ•°æ®éƒ¨åˆ†
}, (error) =&gt; {
    // å¤„ç†ç½‘ç»œé”™è¯¯
    let msg = '';
    let status = error.response.status;
    switch (status) {
        case 401:
            msg = "tokenè¿‡æœŸ";
            // TODO: æ¸…é™¤æœ¬åœ° tokenï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
            break;
        case 403:
            msg = 'æ— æƒè®¿é—®';
            break;
        case 404:
            msg = "è¯·æ±‚åœ°å€é”™è¯¯";
            break;
        case 500:
            msg = "æœåŠ¡å™¨å‡ºç°é—®é¢˜";
            break;
        default:
            msg = "æ— ç½‘ç»œ";
    }
    // ä½¿ç”¨ Element Plus çš„ ElMessage æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    ElMessage({
        type: 'error',
        message: msg
    });
    return Promise.reject(error); // ç»§ç»­å‘ä¸‹ä¼ é€’é”™è¯¯
});

export default request;
</code></pre>
<h3 id="38-api-æ¥å£ç»Ÿä¸€ç®¡ç†æ¸…æ™°çš„æ¥å£ç»“æ„">3.8 API æ¥å£ç»Ÿä¸€ç®¡ç†ï¼šæ¸…æ™°çš„æ¥å£ç»“æ„</h3>
<p>ä¸ºäº†é¿å…æ¥å£åœ°å€ç¡¬ç¼–ç ã€æé«˜ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œé¡¹ç›®é‡‡ç”¨äº†ç»Ÿä¸€çš„ API æ¥å£ç®¡ç†æ–¹å¼ã€‚</p>
<p><strong>åœ¨ <code>src</code> ç›®å½•ä¸‹åˆ›å»º <code>api</code> æ–‡ä»¶å¤¹ï¼Œå¹¶æŒ‰æ¨¡å—ï¼ˆå¦‚ <code>user</code>ã€<code>product</code>ã€<code>acl</code>ï¼‰è¿›è¡Œåˆ†ç±»ç®¡ç†ã€‚</strong></p>
<p><strong><code>src/api/user/index.ts</code> ç¤ºä¾‹ï¼š</strong></p>
<pre><code>// src/api/user/index.ts
// ç»Ÿä¸€ç®¡ç†é¡¹ç›®ç”¨æˆ·ç›¸å…³çš„æ¥å£

import request from '@/utils/request'; // å¼•å…¥äºŒæ¬¡å°è£…çš„ axios å®ä¾‹

import type {
  loginFormData,
  loginResponseData,
  userInfoReponseData,
} from './type'; // å¼•å…¥æ¥å£ç›¸å…³çš„æ•°æ®ç±»å‹å®šä¹‰

// é¡¹ç›®ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚åœ°å€æšä¸¾
enum API {
  LOGIN_URL = '/admin/acl/index/login',
  USERINFO_URL = '/admin/acl/index/info',
  LOGOUT_URL = '/admin/acl/index/logout',
}

// ç™»å½•æ¥å£
export const reqLogin = (data: loginFormData) =&gt;
  request.post&lt;any, loginResponseData&gt;(API.LOGIN_URL, data);

// è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£
export const reqUserInfo = () =&gt;
  request.get&lt;any, userInfoReponseData&gt;(API.USERINFO_URL);

// é€€å‡ºç™»å½•æ¥å£
export const reqLogout = () =&gt; request.post&lt;any, any&gt;(API.LOGOUT_URL);
</code></pre>
<p><strong><code>src/api/user/type.ts</code> ç¤ºä¾‹ (å®šä¹‰æ•°æ®ç±»å‹)ï¼š</strong></p>
<pre><code>// src/api/user/type.ts
// å®šä¹‰ç”¨æˆ·ç›¸å…³æ¥å£çš„æ•°æ®ç±»å‹

// ç™»å½•è¡¨å•æ•°æ®ç±»å‹
export interface loginFormData {
  username: string;
  password: string;
}

// ç™»å½•æ¥å£å“åº”æ•°æ®ç±»å‹
export interface loginResponseData {
  code: number;
  message: string;
  data: {
    token: string;
  };
}

// ç”¨æˆ·ä¿¡æ¯æ¥å£å“åº”æ•°æ®ç±»å‹
export interface userInfoReponseData {
  code: number;
  message: string;
  data: {
    name: string;
    avatar: string;
    // å…¶ä»–ç”¨æˆ·ä¿¡æ¯å­—æ®µ
  };
}
</code></pre>
<p>è¿™ç§æ¨¡å—åŒ–çš„æ¥å£ç®¡ç†æ–¹å¼ï¼Œä½¿å¾—æ¥å£å®šä¹‰æ¸…æ™°ã€æ˜“äºæŸ¥æ‰¾å’Œç»´æŠ¤ï¼Œå¹¶ä¸”ç»“åˆ TypeScript æä¾›äº†å¼ºå¤§çš„ç±»å‹æ£€æŸ¥ï¼Œè¿›ä¸€æ­¥æå‡äº†ä»£ç è´¨é‡ã€‚</p>
<h2 id="æ€»ç»“ä¸å±•æœ›">æ€»ç»“ä¸å±•æœ›</h2>
<p>æœ¬æ¬¡å­¦ä¹ è®°å½•çš„æ˜¯â€œç¡…è°·ç”„é€‰è¿è¥å¹³å°â€çš„å¼€å‘è¿‡ç¨‹ï¼Œä¸»è¦åŸºäº Vue3 + TypeScript æŠ€æœ¯æ ˆï¼Œç»“åˆæ¨¡å—åŒ–æ¥å£ç®¡ç†ã€ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶å’Œä¸¥æ ¼çš„ä»£ç è§„èŒƒï¼Œå®ç°äº†ä¸€ä¸ªç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>åœ¨é¡¹ç›®æ­å»ºä¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹æŒæ¡äº†ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>ç»„ä»¶é€šä¿¡ä¸çŠ¶æ€ç®¡ç†</strong>ï¼šé€šè¿‡ propsã€emitã€pinia ç­‰æ–¹å¼å®ç°ç»„ä»¶é—´çš„æ•°æ®äº¤äº’ï¼›</li>
<li><strong>é¡¹ç›®ç»“æ„è®¾è®¡</strong>ï¼šå®ç°äº†åˆç†çš„æ¨¡å—æ‹†åˆ†å’Œç›®å½•ç»„ç»‡ï¼›</li>
<li><strong>æƒé™ç®¡ç†ä¸åŠ¨æ€è·¯ç”±</strong>ï¼šæŒæ¡äº†åŸºäº token çš„è·¯ç”±æ§åˆ¶æ€è·¯ï¼›</li>
<li><strong>æ¥å£å°è£…ä¸å¼‚å¸¸å¤„ç†</strong>ï¼šç»Ÿä¸€å°è£… API è¯·æ±‚é€»è¾‘ï¼Œæé«˜ä»£ç å¤ç”¨æ€§å’Œå®¹é”™èƒ½åŠ›ï¼›</li>
<li><strong>UI ç»„ä»¶åº“ä½¿ç”¨</strong>ï¼šç†Ÿç»ƒä½¿ç”¨ Element Plus æé«˜å¼€å‘æ•ˆç‡ï¼›</li>
<li><strong>TS ç±»å‹ç®¡ç†</strong>ï¼šé€šè¿‡ç±»å‹å®šä¹‰æå‡ä»£ç å¥å£®æ€§ä¸å¼€å‘ä½“éªŒã€‚</li>
</ul>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-06 20:28">2025-08-06 20:27</span>&nbsp;
<a href="https://www.cnblogs.com/yongjannes">æ®‡æ«</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19025811);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19025811', targetLink: 'https://www.cnblogs.com/yongjannes/p/19025811', title: 'ã€Šç¡…è°·ç”„é€‰ã€‹é¡¹ç›®ç¬”è®°' })">ä¸¾æŠ¥</a>
</div>
        
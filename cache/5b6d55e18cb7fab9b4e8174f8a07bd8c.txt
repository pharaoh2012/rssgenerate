
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Javaer1995/p/18194332" title="发布于 2025-02-09 11:12">
    <span role="heading" aria-level="2">Windows的MySQL数据库升级（解压包方式）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="1背景描述">1、背景描述</h2>
<p>原来的 MySQL 在安装时，是最新的稳定版本 5.7.33 。</p>
<p>经过一段时间后，在原来的 MySQL 版本中，发现存在漏洞。</p>
<p>因为 MySQL 的官方补丁，需要 Oracle 的 si 码（Support Identifier），不是免费的。</p>
<p>因此，只好将旧版本（5.7.33）升级到没有漏洞的新版本（5.7.44）。</p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240523114127651-2024418592.png" alt="image" loading="lazy"></p>
<blockquote>
<p>提示：无论旧版本的数据库，是使用<a href="https://www.cnblogs.com/Javaer1995/p/18191048" title="安装器方式安装" target="_blank">安装器方式安装</a>的，还是使用<a href="https://www.cnblogs.com/Javaer1995/p/18191765" title="解压包方式安装" target="_blank">解压包方式安装</a>的；都可以（且推荐）使用解压包方式来升级。</p>
</blockquote>
<h2 id="2下载mysql的最新安装包">2、下载Mysql的最新安装包</h2>
<blockquote>
<p>下载地址：<a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener nofollow">https://downloads.mysql.com/archives/community/</a></p>
<p>注意：官网的下载速度可能很慢，有任务时间要求的须尽快下载，或者使用其他可靠的下载源</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515174346834-392946476.png" alt="image" loading="lazy"></p>
<p>如上图所示，旧版本是 5.7.33 的，新版本应该选择 5.7.x 中最新的，本例为 5.7.44 。</p>
<blockquote>
<p>注意：选择完MySQL的版本后，可以看到下载列表中有两个可以选择,下载名字不带 Debug 和 Test 的即可。</p>
</blockquote>
<h2 id="3解压到安装目录">3、解压到安装目录</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515174951003-1317429120.png" alt="image" loading="lazy"></p>
<p>如上图所示，本例将 MySQL 的压缩包的文件解压到 MySoft 目录下，这个操作相当于指定了 MySQL 的安装目录。</p>
<h2 id="4创建myini配置文件">4、创建my.ini配置文件</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515175631421-1838294451.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515175707403-1699806804.png" alt="image" loading="lazy"></p>
<p>如上图所示，先创建一个 my.txt 文件，编辑好配置信息后，再将文件后缀修改为 ini 。</p>
<pre><code>[mysqld]
# 设置MySQL的安装目录路径
basedir=C:/MySoft/mysql-5.7.44-winx64
# 设置MySQL的数据目录路径
datadir=C:/MySoft/mysql-5.7.44-winx64/data
# 默认接收的数据包大小为 1M ，这里设置大一点为 20M
max_allowed_packet=20M
</code></pre>
<blockquote>
<p>注意：上述截图和实际配置文本有点差异，主要是增加了接收的数据包大小设置“max_allowed_packet=20M”。</p>
</blockquote>
<h2 id="5修改旧mysql服务属性">5、修改旧MySQL服务属性</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515180108244-1312130774.png" alt="image" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515180144347-1474827868.png" alt="image" loading="lazy"></p>
<p>如上图所示，启动类型设为“禁用”，服务状态点击停止。</p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515180404506-1665667033.png" alt="image" loading="lazy"></p>
<p>如上图所示，这是旧MySQL服务属性修改后的状态。</p>
<blockquote>
<p>提示：可以通过任务管理器，进入Windows服务界面：<br>
<img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515180548305-1832611273.png" alt="image" loading="lazy"></p>
</blockquote>
<h2 id="6复制data目录">6、复制data目录</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515180815009-313600932.png" alt="image" loading="lazy"></p>
<p>如上图所示，将旧 MySQL 版本的 data 目录复制到新 MySQL 版本的安装目录中。</p>
<blockquote>
<p>提示：一般 MySQL 的 data 目录默认路径在隐藏的文件夹“C:\ProgramData\MySQL\MySQL Server”中。</p>
</blockquote>
<h2 id="7注册新mysql到windows服务">7、注册新MySQL到Windows服务</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515181248592-1521709950.png" alt="image" loading="lazy"></p>
<p>如上图所示，以管理员身份运行“命令提示符”。</p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515181410516-300826998.png" alt="image" loading="lazy"></p>
<p>如上图所示，在“命令提示符”窗口中，进入新 MySQL 的 bin 目录（本例为：C:\MySoft\mysql-5.7.44-winx64\bin）</p>
<pre><code>cd MySQL的bin目录路径
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515181644655-2000721924.png" alt="image" loading="lazy"></p>
<p>如上图所示，为了避免和旧 MySQL 版本的服务名有冲突， 将MySQL 注册到 Windows 服务时，指定了一个自定义的服务名（本例为：mysql5744）。</p>
<pre><code>mysqld -install 自定义的服务名
</code></pre>
<blockquote>
<p>注意：执行该命令时，可能会提示缺少 xxx.ddl，一般去下载安装 <a href="https://download.visualstudio.microsoft.com/download/pr/1415835d-76a5-42c8-9aeb-baa77ae9f964/D0290C14D84DD077D443CD9E51C8E5A1443AA3363F06A2BA84D1FDE4637441EE/VC_redist.x64.exe" title="Microsoft Visual C++ 2015-2019 Redistributable" target="_blank" rel="noopener nofollow">Microsoft Visual C++ 2015-2019 Redistributable</a> 环境依赖即可解决。</p>
</blockquote>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515181848518-813944479.png" alt="image" loading="lazy"></p>
<p>如上图所示，已成功注册 MySQL 到 Window s服务，服务名为自定义的 mysql5744 。</p>
<h2 id="8启动新mysql服务">8、启动新MySQL服务</h2>
<h3 id="81启动方式一">8.1、启动方式一</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515182016708-1422304445.png" alt="image" loading="lazy"></p>
<p>如上图所示，可以在 Windows 服务界面，直接选择 MySQL 服务启动。</p>
<h3 id="82启动方式二">8.2、启动方式二</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515182146513-1936416052.png" alt="image" loading="lazy"></p>
<p>如上图所示，可以通过命令启动 MySQL 服务，启动成功会有相关提示信息。</p>
<pre><code>net start mysql服务名
</code></pre>
<blockquote>
<p>提示：暂停 MySQL 服务的命令为“net stop mysql服务名”</p>
</blockquote>
<blockquote>
<p>注意：执行该命令时，可能会报错“服务无法启动，服务没有报告任何错误，请键入 NET HELPMSG 3534 以获得更多的帮助”；<br>
这个可能是因为在执行“mysqld -install 自定义的服务名”命令时，存在 mysqld 的环境变量问题，用到了旧 MySQL 设置的环境变量。<br>
此时可以去 Windows 服务界面查看该新 MySQL 服务的“可执行文件的路径”：<br>
<img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240516110035159-672725481.png" alt="image" loading="lazy"><br>
如果该值不是新 MySQL 的路径，可以通过以下方式解决：<br>
删除存在问题的 MySQL 服务：mysqld -remove 自定义的服务名<br>
全路径注册新 MySQL<br>
到 Windows 服务：C:\Mysoft\mysql-5.7.44-winx64\bin\mysql.exe -install 自定义的服务名</p>
</blockquote>
<h3 id="83查看新mysql服务状态">8.3、查看新MySQL服务状态</h3>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515182305101-31748094.png" alt="image" loading="lazy"></p>
<p>如上图所示，新 MySQL 服务正在运行，且开机自动启动运行。</p>
<h2 id="9登录检查新版本mysql">9、登录检查新版本MySQL</h2>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515182440015-223151510.png" alt="image" loading="lazy"></p>
<p>如上图所示，登录新 MySQL 成功。此外，登录信息还显示目前的版本号为 5.7.44 。</p>
<p><img src="https://img2024.cnblogs.com/blog/2052479/202405/2052479-20240515182828630-2015465112.png" alt="image" loading="lazy"></p>
<p>如上图所示，新MySQL数据库，也正常复制了旧数据库开启的远程访问权限。</p>
<h2 id="本文参考">本文参考</h2>
<p><a href="https://blog.csdn.net/Bu_nian/article/details/134077566" title="【1】【忘不念】【mysql5.7.3至5.7.4升级步骤-windows】【CSDN】【 2023-10-27】" target="_blank" rel="noopener nofollow">【1】【忘不念】【mysql5.7.3至5.7.4升级步骤-windows】【CSDN】【 2023-10-27】</a></p>
<p><a href="https://blog.csdn.net/qyhua/article/details/136714325" title="【2】【qyhua】【mysql漏洞修复（mysql升级）】【CSDN】【2024-03-14】" target="_blank" rel="noopener nofollow">【2】【qyhua】【mysql漏洞修复（mysql升级）】【CSDN】【2024-03-14】</a></p>
<p><a href="https://blog.51cto.com/gblfy/5652583" title="【3】【gblfy】【com.mysql.jdbc.PacketTooBigException: Packet for query is too large 异常解决办法】【51CTO】【2022-09-05】" target="_blank" rel="noopener nofollow">【3】【gblfy】【com.mysql.jdbc.PacketTooBigException: Packet for query is too large 异常解决办法】【51CTO】【2022-09-05】</a></p>
<p><a href="https://www.cnblogs.com/zc520/p/12520227.html" title="【4】【左岸麦田】【Microsoft Visual C++ 2019 v14.28.29617】【博客园】【2020-03-18】" target="_blank">【4】【左岸麦田】【Microsoft Visual C++ 2019 v14.28.29617】【博客园】【2020-03-18】</a></p>
<p><a href="https://www.cnblogs.com/feynmania/p/14764992.html" title="【5】【Feynmania】【mysql8.0.25安装问题记录:MySQL服务无法启动，服务没有报告任何错误，请键入 NET HELPMSG 3534 以获得更多的帮助】【博客园】【2021-05-13】" target="_blank">【5】【Feynmania】【mysql8.0.25安装问题记录:MySQL服务无法启动，服务没有报告任何错误，请键入 NET HELPMSG 3534 以获得更多的帮助】【博客园】【2021-05-13】</a></p>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/Javaer1995/" target="_blank">Javaer1995</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/Javaer1995/p/18194332" target="_blank">https://www.cnblogs.com/Javaer1995/p/18194332</a></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.047380402876157406" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-09 11:12">2025-02-09 11:12</span>&nbsp;
<a href="https://www.cnblogs.com/Javaer1995">Javaer1995</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18194332" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18194332);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18194332', targetLink: 'https://www.cnblogs.com/Javaer1995/p/18194332', title: 'Windows的MySQL数据库升级（解压包方式）' })">举报</a>
</div>
        
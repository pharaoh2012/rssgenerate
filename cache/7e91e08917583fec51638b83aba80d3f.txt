
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/yayujs/p/18717959" title="发布于 2025-02-16 13:15">
    <span role="heading" aria-level="2">Svelte 最新中文文档翻译（10）—— use: 与 Actions</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="前言">前言</h2>
<p>Svelte，一个非常“有趣”、用起来“很爽”的前端框架。从 Svelte 诞生之初，就备受开发者的喜爱，根据统计，<strong>从 2019 年到 2024 年，连续 6 年一直是开发者最感兴趣的前端框架 No.1</strong>：</p>
<p><img src="https://yayujs-blog.oss-cn-beijing.aliyuncs.com/405488775-48df16b1-939c-489b-8d52-6071869893f0.png" alt="image.png" loading="lazy"></p>
<p>Svelte 以其独特的编译时优化机制著称，具有<strong>轻量级</strong>、<strong>高性能</strong>、<strong>易上手</strong>等特性，<strong>非常适合构建轻量级 Web 项目，也是我做个人项目的首选技术栈。</strong></p>
<p>目前 Svelte 基于 Svelte 5 发布了最新的官方文档，但却缺少对应的中文文档。为了帮助大家学习 Svelte，为爱发电翻译了官方文档。</p>
<p>我同时搭建了 Svelte 最新的中文文档站点：<a href="https://svelte.yayujs.com" target="_blank" rel="noopener nofollow">https://svelte.yayujs.com</a> ，如果需要辅助学习，也可以入手我的小册<a href="https://s.juejin.cn/ds/iycmvygA/" target="_blank" rel="noopener nofollow">《Svelte 开发指南》</a>，语法篇、实战篇、原理篇三大篇章带你系统掌握 Svelte！</p>
<p>虽说是翻译，但个人并不喜欢严格遵守原文，为了保证中文阅读流畅，会删减部分语句，对难懂的部分也会另做补充解释，希望能给大家带来一个好的中文学习体验。</p>
<p>欢迎围观我的<a href="https://yayujs.com" target="_blank" rel="noopener nofollow">“朋友圈”</a>、加入<a href="https://www.yuque.com/yayu/nice-people/xou8qr" target="_blank" rel="noopener nofollow">“低调务实优秀中国好青年”</a>前端社群，分享技术，带你成长。</p>
<h2 id="use">use:</h2>
<p>Actions（动作）是在元素挂载时调用的函数。它们通过 <code>use:</code> 指令添加，通常会使用 <code>$effect</code> 以便在元素卸载时重置任何状态：</p>
<pre><code class="language-svelte">&lt;!--- file: App.svelte ---&gt;
&lt;script&gt;
  /** @type {import('svelte/action').Action} */
  function myaction(node) {
    // 节点已被挂载到 DOM 中

    $effect(() =&gt; {
      // 这里进行设置

      return () =&gt; {
        // 这里进行清理
      };
    });
  }
&lt;/script&gt;

&lt;div use:myaction&gt;...&lt;/div&gt;
</code></pre>
<p>action 可以带参数调用：</p>
<pre><code class="language-svelte">&lt;!--- file: App.svelte ---&gt;
&lt;script&gt;
  /** @type {import('svelte/action').Action} */
  function myaction(node, +++data+++) {
    // ...
  }
&lt;/script&gt;

&lt;div use:myaction={+++data+++}&gt;...&lt;/div&gt;
</code></pre>
<p>action 只会调用一次（但在服务端渲染期间不会调用）—— 即使参数发生变化也不会再次运行。</p>
<blockquote>
<p>[!LEGACY]<br>
在 <code>$effect</code> 符文出现之前，action 可以返回一个带有 <code>update</code> 和 <code>destroy</code> 方法的对象，如果参数发生变化，<code>update</code> 将被调用并使用最新的参数值。现在推荐使用 effects。</p>
</blockquote>
<h2 id="类型定义">类型定义</h2>
<p><code>Action</code> 接口接收三个可选的类型参数 —— 节点类型（可以是 <code>Element</code>，如果 action 适用于所有元素）、参数，以及由 action 创建的任何自定义事件处理程序：</p>
<pre><code class="language-svelte">&lt;!--- file: App.svelte ---&gt;
&lt;script&gt;
  import { on } from 'svelte/events';

  /**
   * @type {import('svelte/action').Action&lt;
   * 	HTMLDivElement,
   * 	null,
   * 	{
   * 	   onswiperight: (e: CustomEvent) =&gt; void;
   * 	   onswipeleft: (e: CustomEvent) =&gt; void;
   * 		// ...
   * }&gt;}
   */
  function gestures(node) {
    $effect(() =&gt; {
      // ...
      node.dispatchEvent(new CustomEvent('swipeleft'));

      // ...
      node.dispatchEvent(new CustomEvent('swiperight'));
    });
  }
&lt;/script&gt;

&lt;div
  use:gestures
  onswipeleft={next}
  onswiperight={prev}
&gt;...&lt;/div&gt;
</code></pre>
<h2 id="svelte-中文文档">Svelte 中文文档</h2>
<p>本篇已收录在掘金专栏 <a href="https://juejin.cn/column/7459299646696374284" target="_blank" rel="noopener nofollow">《Svelte 中文文档》</a>，该系列预计 40 篇。</p>
<p>系统学习 Svelte，欢迎入手小册<a href="https://s.juejin.cn/ds/iycmvygA/" target="_blank" rel="noopener nofollow">《Svelte 开发指南》</a>。语法篇、实战篇、原理篇三大篇章带你系统掌握 Svelte！</p>
<p>此外我还写过 <a href="https://juejin.cn/column/7035531575974592520" target="_blank" rel="noopener nofollow">JavaScript 系列</a>、<a href="https://juejin.cn/column/7029490086710345742" target="_blank" rel="noopener nofollow">TypeScript 系列</a>、<a href="https://juejin.cn/column/7142674773930147853" target="_blank" rel="noopener nofollow">React 系列</a>、<a href="https://juejin.cn/column/7343569488744611849" target="_blank" rel="noopener nofollow">Next.js 系列</a>、<a href="https://juejin.cn/column/7039526067891077151" target="_blank" rel="noopener nofollow">冴羽答读者问</a>等 14 个系列文章， 全系列文章目录：<a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="noopener nofollow">https://github.com/mqyqingfeng/Blog</a></p>
<p>通过文字建立交流本身就是一种缘分，欢迎围观我的<a href="https://yayujs.com" target="_blank" rel="noopener nofollow">“朋友圈”</a>、加入<a href="https://www.yuque.com/yayu/nice-people/xou8qr" target="_blank" rel="noopener nofollow">“低调务实优秀中国好青年”</a>前端社群，分享技术，带你成长。</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="2.706734714016204" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-16 13:16">2025-02-16 13:15</span>&nbsp;
<a href="https://www.cnblogs.com/yayujs">冴羽</a>&nbsp;
阅读(<span id="post_view_count">5</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18717959" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18717959);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18717959', targetLink: 'https://www.cnblogs.com/yayujs/p/18717959', title: 'Svelte 最新中文文档翻译（10）—— use: 与 Actions' })">举报</a>
</div>
        

		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/magicMaQaQ/p/18781386" title="发布于 2025-03-20 11:18">
    <span role="heading" aria-level="2">windows下测试TCP/UDP端口连通性</span>
    

</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1>一、简介</h1>
<p>　　最近调试项目的时候有需要测试UDP连接，所以顺便研究了一下。</p>
<p>　　MaQaQ：省流，不介意下载工具的话就直接拉到最后看Advanced Port Scanner。</p>
<h1>二、TCP</h1>
<h2>1、telnet（需要开启telnet功能）</h2>
<p>控制面板 -&gt; 程序 -&gt; 启用或关闭 Windows功能 -&gt; Telnet client</p>
cmd 指令：telnet ip port，如 telnet 192.168.2.2 8888
<p>成功会直接从cmd切换成telnet的窗体：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319171508591-2127769253.png" alt="" width="395" height="70" loading="lazy"></p>
<p>失败会在cmd提示：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319171628884-338590578.png" alt="" width="392" height="27" loading="lazy"></p>
<h2>&nbsp;2、ssh</h2>
<p>cmd 指令：ssh -v -p port ip，如ssh -v -p 8888 192.168.2.2</p>
<p>成功会在cmd显示详情：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319171941411-2045029377.png" alt="" width="387" height="217" loading="lazy"></p>
<p>失败会在cmd提示time out：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319172001922-1794348121.png" alt="" width="384" height="64" loading="lazy"></p>
<h2>&nbsp;3、curl</h2>
<p>cmd 指令：curl -v&nbsp;ip:port，如curl 192.168.2.2:8888（-v指令用于显示详情，可以不加，但加上会更直观）</p>
<p>成功会在cmd显示详情：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319172503741-2008441445.png" alt="" width="386" height="140" loading="lazy"></p>
<p>&nbsp;失败会在cmd提示Fail</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250319172545613-2086399570.png" alt="" width="458" height="62" loading="lazy"></p>
<h1>&nbsp;三、UDP</h1>
<h2>1、PowerShell（测试失败，仅供尝试）</h2>
<p>　　win+x管理员打开PowerShell，执行：</p>
<div class="cnblogs_code">
<pre>$udpClient =New-<span style="color: rgba(0, 0, 0, 1)">Object System.Net.Sockets.UdpClient
$udpclient.Connect(</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">192.168.2.3</span><span style="color: rgba(128, 0, 0, 1)">"</span>,<span style="color: rgba(128, 0, 128, 1)">8880</span><span style="color: rgba(0, 0, 0, 1)">)
$data </span>= [System.Text.Encoding]::ASCII.GetBytes(<span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(128, 0, 0, 1)">Test</span><span style="color: rgba(128, 0, 0, 1)">"</span><span style="color: rgba(0, 0, 0, 1)">)
$udpClient.Send($data,$data.Length)</span></pre>
</div>
<p>　　可以新建个文档存起来，比如testUdp.ps1，然后执行：powershell <span class="token parameter variable">-ExecutionPolicy Bypass <span class="token parameter variable">-File 文档路径</span></span></p>
<p>　　测试了一下，不管连不连通都是一样的返回结果（数字4，应该是发送字节数），没有深究，直接弃用。</p>
<h2>2、PortQryV2</h2>
<p>　　PortQryV2是微软提供的工具，可以测TCP/UDP，微软官网下载地址：<a href="https://www.microsoft.com/en-us/download/details.aspx?id=17148" rel="noopener nofollow">Download PortQry Command Line Port Scanner Version 2.0 from Official Microsoft Download Center</a>，也可以从在网盘下载，链接: <a href="https://pan.baidu.com/s/1_5ZC-m-b8PJh8F-D8sgflg?pwd=tup3" target="_blank" rel="noopener nofollow">https://pan.baidu.com/s/1_5ZC-m-b8PJh8F-D8sgflg?pwd=tup3</a> 提取码: tup3，官方使用说明：<a href="https://learn.microsoft.com/zh-cn/troubleshoot/windows-server/networking/portqry-command-line-port-scanner-v2#15" rel="noopener nofollow">使用 PortQry 命令行工具 - Windows Server | Microsoft Learn</a>。</p>
<p><em>　　</em>下载得到PortQryV2.exe，双击打开后解压即可：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320093723802-1443551500.png" alt="" width="330" height="202" loading="lazy"></p>
<p>&nbsp;　　然后cmd进入到解压后文件夹的目录下，运行指令：portqry -n 服务器IP地址 -p UDP -e 端口号，PortQryV2默认为模式为TCP，所以需要指定-p UDP，如下所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320094001162-85800355.png" alt="" width="358" height="31" loading="lazy"></p>
<p>　　测试发现：</p>
<p>&nbsp;<em>　　</em>① PortQryV2仅在本地能测出端口关闭：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320092623861-1444932592.png" alt="" width="332" height="161" loading="lazy"></p>
<p>　　② 如果是另一台服务器（2.89）测试本机（2.2），则无法判断是否有进程监听：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320092841441-69681228.png" alt="" width="334" height="184" loading="lazy"></p>
<p>&nbsp;　　③ 如果本机监听了端口+同时向测试机发送数据，那么远程测试机可以得到确定的LISTENIING状态，否则都是第②种状态：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320093335855-1711694032.png" alt="" width="348" height="177" loading="lazy"></p>
<p>&nbsp;　　另外补充指令：</p>
<p>portqry -local 用于查询本机所有TCP/UDP端口</p>
<p>portqry -n 192.168.2.2 -r 1:65535 用于查询指定服务器的所有TCP端口</p>
<h2>&nbsp;3、netcat</h2>
<p>　　官网下载：<a href="https://eternallybored.org/misc/netcat/" rel="noopener nofollow">netcat 1.11 for Win32/Win64</a>，网盘：<a href="https://pan.baidu.com/s/1wuwd5qTRc2FxCaNgFnjsHg?pwd=s6yb" target="_blank" rel="noopener nofollow">https://pan.baidu.com/s/1wuwd5qTRc2FxCaNgFnjsHg?pwd=s6yb</a>&nbsp;提取码: s6yb，这个解压的时候会被杀软识别到，记得关掉杀软或者手动去隔离区捞回来。</p>
<p>　　同样是cmd进入到解压后文件夹的目录下，输入指令：nc -u -v -z 目标IP地址 目标端口（-u -v -z也可以直接合并成-uvz），如下：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320104427426-1634650311.png" alt="" width="439" height="100" loading="lazy"></p>
<p>&nbsp;　　如果是测试远端服务器的话，要等久一点，本地的结果出来比较快。而且这个不管是否有发送数据，都会检测出来open，所以无法检测到是否有进程监听了端口。</p>
<h2>&nbsp;4、Advanced Port Scanner</h2>
<p>　　官网下载：&nbsp;<a href="https://www.advanced-port-scanner.com/cn/" rel="noopener nofollow">Advanced Port Scanner</a>&nbsp;，网盘：<a href="https://pan.baidu.com/s/1-geIj2AqvYHzhskJfZQRPA?pwd=h3sp" target="_blank" rel="noopener nofollow">https://pan.baidu.com/s/1-geIj2AqvYHzhskJfZQRPA?pwd=h3sp</a> 提取码: h3sp，安装的时候如果想修改文件夹位置记得勾上高级设置。</p>
<p>　　这个是带图形化界面的，操作比较简单，可以批量查询，填上IP跟端口号即可：</p>
<p><img src="https://img2024.cnblogs.com/blog/2447777/202503/2447777-20250320101738719-1191891481.png" alt="" width="536" height="247" loading="lazy"></p>
<p>　　这个如果UDP没有在发送数据，就检测不到。</p>
<h1>四、总结</h1>
<p>1、Advanced Port Scanner比较直观，tcp跟udp都能测；</p>
<p>2、如果不想用工具，tcp用ssh或者curl都行，udp就根据情况吧</p>
</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/magicMaQaQ/" target="_blank">MaQaQ</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/magicMaQaQ/p/18781386" target="_blank">https://www.cnblogs.com/magicMaQaQ/p/18781386</a></p>
<p>本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接，否则保留追究法律责任的权利。</p>
</div>
<div class="clear"></div>

		</div>
		<div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.7107312534930555" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-20 11:18">2025-03-20 11:18</span>&nbsp;
<a href="https://www.cnblogs.com/magicMaQaQ">MaQaQ</a>&nbsp;
阅读(<span id="post_view_count">255</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18781386" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18781386);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18781386', targetLink: 'https://www.cnblogs.com/magicMaQaQ/p/18781386', title: 'windows下测试TCP/UDP端口连通性' })">举报</a>
</div>
	
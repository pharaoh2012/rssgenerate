
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/Johny-zhao/p/18882396" title="发布于 2025-05-18 17:18">
    <span role="heading" aria-level="2">Vmware workstation安装部署微软SCCM服务系统</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<h1><strong>VMware Workstation部署微软SCCM 2303完整操作指南</strong></h1>
<h2 class="TopicIntroSection-title">简介</h2>
<div class="TopicCommonField-text">sccm（System Center Configuration Manager），是微软系统中心配置管理器内部简称。它是一款非常优秀的桌面管理软件，其可以收集硬件和软件清单，在客户机上发布软件；还可以管理客户机更新，甚至可以拒绝没有及时更新修补程序的客户机访问网络。</div>
<div class="TopicCommonField-text">
<p class="marklang-paragraph">‌<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=SCCM&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">SCCM</a>（System Center Configuration Manager）是<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=%E5%BE%AE%E8%BD%AF&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">微软</a>推出的一款企业级系统管理工具，主要用于桌面和移动设备的管理。‌</p>
<p class="marklang-paragraph">SCCM是微软<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=System%20Center&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">System Center</a>品牌家族的成员，属于企业IT信息管理工具。它能够收集硬件和软件清单，在客户机上发布软件，管理客户机更新，甚至可以拒绝没有及时更新修补程序的客户机访问网络‌<span><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId"><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId">。SCCM的主要功能包括：</span></span></span></span></span></span></span></p>
<ol>
<li>‌资产发现和管理‌：SCCM通过<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=Active%20Directory&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">Active Directory</a>发现连接到网络的设备（服务器、客户端PC和智能手机），并在每个节点上安装客户端软件，构建一个包含资产和已安装软件及硬件规格的清单数据库‌<span><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId">2。</span></span></span></span></li>
<li>‌应用程序部署‌：SCCM使用清单数据库中的数据，让应用程序部署以成组的设备或用户为目标‌<span><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId">2。</span></span></span></span></li>
<li>‌修补程序管理‌：基于<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=Windows%20Server%20Update%20Services&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">Windows Server Update Services</a>（WSUS），SCCM内置修补程序管理功能，可以自动让新安装的硬件接收操作系统部署，也可以让现有计算机成为操作系统升级目标‌<span><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId">。</span></span></span></span></li>
<li>‌网络访问控制‌：SCCM可以与<a class="cosd-markdown-research cos-color-text-link cos-space-mr-3xs" href="https://www.baidu.com/s?rsv_dl=re_dqa_generate&amp;sa=re_dqa_generate&amp;wd=Windows%20Server%202008%20Network%20Access%20Policy&amp;rsv_pq=b3ad7f29039a8df4&amp;oq=%E5%BE%AE%E8%BD%AFSCCM%E6%98%AF%E4%BB%80%E4%B9%88&amp;rsv_t=f812M+/TOuqDtbgrJYzTclFA5AmfsbjiUA3DRstEUSW46RjvEqDkre11hN0vMHCKENRS&amp;tn=baiduhome_pg&amp;ie=utf-8" target="_blank" rel="noopener nofollow">Windows Server 2008 Network Access Policy</a>（NAP）集成，确保客户端在允许完全网络访问权限之前运行良好‌<span><span><span class="cos-tooltip cosd-citation"><span class="cosd-citation-citationId">。</span></span></span></span></li>
</ol>
<p class="marklang-paragraph">此外，SCCM还支持以用户为中心的管理（UCM），这是其最新的管理方法，将用户而不是系统放在第一位。它还引入了基于角色的新安全模型和新控制台，提供简化基础设施的潜力‌。</p>
</div>
<hr>
<h2><strong>一、VMware环境准备</strong></h2>
<h3>1. 虚拟机拓扑规划</h3>
<div class="markdown-table-wrapper">
<table>
<thead>
<tr><th>角色</th><th>虚拟机配置</th><th>网络配置</th></tr>
</thead>
<tbody>
<tr>
<td>域控制器 (AD/DNS)</td>
<td>Windows Server 2022 (2核/4GB/100GB)</td>
<td>静态IP: 192.168.1.10/24</td>
</tr>
<tr>
<td>SQL Server</td>
<td>Windows Server 2022 (4核/8GB/200GB)</td>
<td>静态IP: 192.168.1.20/24</td>
</tr>
<tr>
<td>SCCM主站点服务器</td>
<td>Windows Server 2022 (8核/16GB/300GB + 500GB数据盘)</td>
<td>静态IP: 192.168.1.30/24</td>
</tr>
<tr>
<td>客户端测试机</td>
<td>Windows 10/11 (2核/4GB/60GB)</td>
<td>DHCP获取IP</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2><strong>二、基础服务部署</strong></h2>
<h3>1. Active Directory域服务部署</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 安装AD域服务
<span class="token function">Install-WindowsFeature AD-Domain-Services <span class="token operator">-IncludeManagementTools

<span class="token comment"># 创建新林并配置域
<span class="token function">Install-ADDSForest <span class="token operator">-DomainName <span class="token string">"contoso.com" <span class="token operator">-DomainNetbiosName <span class="token string">"CONTOSO" <span class="token operator">-InstallDNS <span class="token operator">-Force

<span class="token comment"># 验证AD状态
<span class="token function">Get-ADDomain <span class="token punctuation">| <span class="token function">Select-Object DNSRoot<span class="token punctuation">, Forest<span class="token punctuation">, DomainMode</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. SQL Server 2022部署</h3>
<ol start="1">
<li>
<p class="ds-markdown-paragraph"><strong>安装配置</strong>：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">选择功能：<code>Database Engine Services</code>、<code>Reporting Services</code>、<code>Management Tools</code>、<code>SQL Server Replication</code></p>
</li>
<li>
<p class="ds-markdown-paragraph">服务账户：<code>CONTOSO\sql_svc</code>（需提前创建域账户）</p>
</li>
<li>
<p class="ds-markdown-paragraph">数据目录：<code>D:\SQLData</code></p>
</li>
<li>
<p class="ds-markdown-paragraph">排序规则：<code>SQL_Latin1_General_CP1_CI_AS</code></p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph"><strong>启用TCP/IP协议</strong>：</p>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">sql</span></div>
</div>
</div>
</div>
<pre><span class="token keyword">EXEC sys<span class="token punctuation">.sp_configure N<span class="token string">'remote access'<span class="token punctuation">, N<span class="token string">'1'
<span class="token keyword">RECONFIGURE</span></span></span></span></span></span></pre>
</div>
</li>
</ol><hr>
<h2><strong>三、SCCM 2303主站点部署</strong></h2>
<h3>1. 前置条件准备</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 安装必要组件
<span class="token function">Install-WindowsFeature BITS<span class="token punctuation">, Web-Default-Doc<span class="token punctuation">, Web-Asp-Net<span class="token punctuation">, Web-Windows-Auth

<span class="token comment"># 扩展AD架构（需SCCM安装介质）
<span class="token punctuation">.\extadsch<span class="token punctuation">.exe <span class="token operator">/q

<span class="token comment"># 创建System Management容器并授权
<span class="token variable">$Container = <span class="token string">"CN=System Management,CN=System,DC=contoso,DC=com"
<span class="token function">New-ADObject <span class="token operator">-<span class="token function">Type Container <span class="token operator">-Name <span class="token string">"System Management" <span class="token operator">-Path <span class="token string">"CN=System,CN=Services,CN=Configuration,DC=contoso,DC=com"
dsacls <span class="token variable">$Container <span class="token operator">/G <span class="token string">"CONTOSO\SCCM_Admin:RPWP;computer"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. 安装主站点</h3>
<ol start="1">
<li>
<p class="ds-markdown-paragraph"><strong>运行SCCM安装向导</strong>：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">选择&nbsp;<strong>主站点服务器</strong>&nbsp;和&nbsp;<strong>独立主站点</strong></p>
</li>
<li>
<p class="ds-markdown-paragraph">数据库配置：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">SQL Server名称：<code>SQL01.contoso.com</code></p>
</li>
<li>
<p class="ds-markdown-paragraph">数据库名称：<code>CM_PS1</code></p>
</li>
<li>
<p class="ds-markdown-paragraph">数据文件路径：<code>D:\SCCMDB</code></p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph">通信设置：HTTPS端口443（需提前部署PKI证书）</p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph"><strong>配置分发点</strong>：</p>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token function">New-CMDistributionPoint <span class="token operator">-SiteSystemServerName SCCM01<span class="token punctuation">.contoso<span class="token punctuation">.com <span class="token operator">-DriveSpace 100 <span class="token operator">-MinimumFreeSpace 50 <span class="token operator">-PrimaryContentLibraryLocation <span class="token string">"D:\ContentLibrary"</span></span></span></span></span></span></span></span></pre>
</div>
</li>
</ol><hr>
<h2><strong>四、客户端部署与测试</strong></h2>
<h3>1. 客户端代理安装</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 生成客户端安装包
<span class="token function">New-CMClientDeploymentPackage <span class="token operator">-Name <span class="token string">"Default Client Package" <span class="token operator">-Path \\SCCM01\Packages

<span class="token comment"># 手动安装代理（客户端执行）
\\SCCM01\SMS_CCR\ccmsetup<span class="token punctuation">.exe <span class="token operator">/<span class="token function">mp:SCCM01<span class="token punctuation">.contoso<span class="token punctuation">.com SMSSITECODE=PS1</span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. 应用程序部署测试</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 创建应用程序包
<span class="token function">New-CMApplication <span class="token operator">-Name <span class="token string">"Google Chrome" <span class="token operator">-SoftwareVersion 110<span class="token punctuation">.0 <span class="token operator">-Publisher Google
<span class="token function">Add-CMDeploymentType <span class="token operator">-ApplicationName <span class="token string">"Google Chrome" <span class="token operator">-ScriptInstaller <span class="token operator">-InstallCommand <span class="token string">"chrome_installer.exe /silent /install"

<span class="token comment"># 部署到测试集合
<span class="token function">New-CMDeviceCollection <span class="token operator">-Name <span class="token string">"Test Clients" <span class="token operator">-LimitingCollectionName <span class="token string">"All Systems"
<span class="token function">Start-CMApplicationDeployment <span class="token operator">-Name <span class="token string">"Google Chrome" <span class="token operator">-CollectionName <span class="token string">"Test Clients" <span class="token operator">-DeployAction Install <span class="token operator">-UserNotification DisplayAll</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>3. OSD操作系统部署测试</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 导入Windows 11镜像
<span class="token function">Import-CMOperatingSystemImage <span class="token operator">-Path <span class="token string">"\\NAS\OSImages\Win11_22H2.wim" <span class="token operator">-Name <span class="token string">"Windows 11 22H2"

<span class="token comment"># 创建任务序列
<span class="token function">New-CMTaskSequence <span class="token operator">-Name <span class="token string">"Win11 Bare Metal" <span class="token operator">-BootImage <span class="token string">"WinPE 11" <span class="token operator">-OperatingSystemImage <span class="token string">"Windows 11 22H2"

<span class="token comment"># 分发到分发点
<span class="token function">Start-CMContentDistribution <span class="token operator">-TaskSequenceName <span class="token string">"Win11 Bare Metal" <span class="token operator">-DistributionPointGroupName <span class="token string">"All DPs"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<hr>
<h2><strong>五、日常运维操作</strong></h2>
<h3>1. 补丁管理流程</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 同步软件更新
<span class="token function">Sync-CMSoftwareUpdate <span class="token operator">-FullSync

<span class="token comment"># 创建自动部署规则
<span class="token function">New-CMSoftwareUpdateAutoDeploymentRule <span class="token operator">-Name <span class="token string">"Monthly Security Patches" <span class="token operator">-CollectionName <span class="token string">"All Workstations" <span class="token operator">-DeploymentTemplateName <span class="token string">"Required Installation"</span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. 硬件清单增强</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 启用BIOS序列号收集
<span class="token function">Set-CMClientSetting <span class="token operator">-Name <span class="token string">"Default Client Settings" <span class="token operator">-HardwareInventoryClass @<span class="token punctuation">(<span class="token string">"Win32_BIOS"<span class="token punctuation">)

<span class="token comment"># 自定义WMI类
<span class="token function">New-CMWmiClass <span class="token operator">-Namespace root\cimv2 <span class="token operator">-ClassName Custom_HardwareInfo</span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>3. 性能监控</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 监控分发点状态
<span class="token function">Get-CMDistributionStatus <span class="token operator">-DistributionPointName DP01 <span class="token punctuation">| <span class="token function">Where-Object <span class="token punctuation">{ <span class="token variable">$_<span class="token punctuation">.Status <span class="token operator">-ne <span class="token string">"Success" <span class="token punctuation">}

<span class="token comment"># SQL性能计数器
<span class="token function">Add-Counter <span class="token operator">-Counter <span class="token string">"\SQLServer:Buffer Manager\Page life expectancy" <span class="token operator">-SampleInterval 5</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<hr>
<h2><strong>六、备份与灾难恢复</strong></h2>
<h3>1. 关键数据备份</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># SCCM数据库备份
<span class="token function">New-CMSiteBackup <span class="token operator">-Path \\BackupNAS\SCCM_Backup <span class="token operator">-BackupOption Full <span class="token operator">-IncludeSiteDatabase

<span class="token comment"># 内容库备份（Robocopy）
robocopy D:\ContentLibrary \\BackupNAS\ContentLib <span class="token operator">/MIR <span class="token operator">/R:5 <span class="token operator">/W:15 <span class="token operator">/NP <span class="token operator">/LOG:D:\ContentBackup<span class="token punctuation">.log

<span class="token comment"># 客户端策略备份
<span class="token function">Export-CMClientPolicy <span class="token operator">-Path \\BackupNAS\ClientPolicies\CM_Policies_$<span class="token punctuation">(<span class="token function">Get-Date <span class="token operator">-Format yyyyMMdd<span class="token punctuation">)<span class="token punctuation">.xml</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. 虚拟机快照策略</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">bash</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># 创建应用一致性快照（需VMware Tools）
vmrun <span class="token parameter variable">-T ws snapshot <span class="token string">"[SCCM01.vmx]" <span class="token string">"Pre_Monthly_Update" quiesce

<span class="token comment"># 恢复快照
vmrun <span class="token parameter variable">-T ws revertToSnapshot <span class="token string">"[SCCM01.vmx]" <span class="token string">"Baseline_Snapshot"
vmrun <span class="token parameter variable">-T ws start <span class="token string">"[SCCM01.vmx]"</span></span></span></span></span></span></span></span></span></span></pre>
</div>
<hr>
<h2><strong>七、注意事项</strong></h2>
<h3>1. 安全加固</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token comment"># RBAC角色管理
<span class="token function">New-CMSecurityRole <span class="token operator">-Name <span class="token string">"Helpdesk Operator" <span class="token operator">-Description <span class="token string">"Limited Access" <span class="token operator">-Permission Read<span class="token punctuation">,Delegate

<span class="token comment"># PKI证书集成
<span class="token function">Set-CMCertificateRegistrationPoint <span class="token operator">-SiteCode PS1 <span class="token operator">-Thumbprint <span class="token string">"A1B2C3..." <span class="token operator">-WebServerName SCCM01<span class="token punctuation">.contoso<span class="token punctuation">.com</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>2. SQL性能优化</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">sql</span></div>
</div>
</div>
</div>
<pre><span class="token comment">-- 索引维护
<span class="token keyword">ALTER <span class="token keyword">INDEX <span class="token keyword">ALL <span class="token keyword">ON CM_PS1<span class="token punctuation">.dbo<span class="token punctuation">.vSMS_DistributionDPStatus REBUILD

<span class="token comment">-- 内存配置
<span class="token keyword">EXEC sys<span class="token punctuation">.sp_configure N<span class="token string">'max server memory (MB)'<span class="token punctuation">, <span class="token number">32768
<span class="token keyword">RECONFIGURE</span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
</div>
<h3>3. 常见故障处理</h3>
<div class="markdown-table-wrapper">
<table>
<thead>
<tr><th>现象</th><th>排查工具</th><th>修复命令</th></tr>
</thead>
<tbody>
<tr>
<td>客户端策略应用失败</td>
<td>PolicyEvaluator.log</td>
<td><code>Invoke-CMClientPolicyDownload -Force</code></td>
</tr>
<tr>
<td>内容分发卡在“正在传输”</td>
<td>ContentTransferManager.log</td>
<td><code>Redistribute-CMContentDP -PackageID XXX0001</code></td>
</tr>
<tr>
<td>OSD启动失败</td>
<td>SMSTS.log（F8调试模式）</td>
<td><code>Update-CMBootImage -Path "\\SCCM01\BootImages\boot.wim"</code></td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2><strong>八、扩展功能集成</strong></h2>
<h3>1. Microsoft Intune混合集成</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token function">Set-CMCoManagement <span class="token operator">-Enable AutomaticEnrollment <span class="token operator">-Workloads CompliancePolicy<span class="token punctuation">,DeviceConfiguration</span></span></span></span></pre>
</div>
<h3>2. Azure AD集成</h3>
<div class="md-code-block md-code-block-light">
<div class="md-code-block-banner-wrap">
<div class="md-code-block-banner md-code-block-banner-lite">
<div class="_121d384">
<div class="d2a24f03"><span class="d813de27">powershell</span></div>
</div>
</div>
</div>
<pre><span class="token function">New-CMAzureService <span class="token operator">-AzureEnvironment Commercial <span class="token operator">-SubscriptionId <span class="token string">"xxxx-xxxx" <span class="token operator">-TenantId <span class="token string">"yyyy-yyyy"</span></span></span></span></span></span></pre>
</div>
<hr>
<h2><strong>九、最终验证清单</strong></h2>
<ol start="1">
<li>
<p class="ds-markdown-paragraph"><strong>核心服务验证</strong></p>
<ul>
<li>
<p class="ds-markdown-paragraph">SCCM控制台可正常访问</p>
</li>
<li>
<p class="ds-markdown-paragraph">所有SCCM服务状态为“Running”</p>
</li>
<li>
<p class="ds-markdown-paragraph">SQL Server Reporting Services报表可生成</p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph"><strong>客户端功能验证</strong></p>
<ul>
<li>
<p class="ds-markdown-paragraph">测试机成功安装Chrome应用程序</p>
</li>
<li>
<p class="ds-markdown-paragraph">硬件清单包含BIOS信息</p>
</li>
<li>
<p class="ds-markdown-paragraph">操作系统部署任务序列完成时间&lt;30分钟</p>
</li>
</ul>
</li>
<li>
<p class="ds-markdown-paragraph"><strong>备份验证</strong></p>
<ul>
<li>
<p class="ds-markdown-paragraph">数据库还原测试成功</p>
</li>
<li>
<p class="ds-markdown-paragraph">内容库文件完整性校验通过</p>
</li>
</ul>
</li>
</ol><hr>
<h2><strong>维护计划</strong></h2>
<div class="markdown-table-wrapper">
<table>
<thead>
<tr><th>周期</th><th>操作</th></tr>
</thead>
<tbody>
<tr>
<td>每日</td>
<td>检查分发状态和同步日志</td>
</tr>
<tr>
<td>每周</td>
<td>清理过期内容（<code>Start-CMContentCleanup</code>）</td>
</tr>
<tr>
<td>每月</td>
<td>执行完整数据库一致性检查（<code>DBCC CHECKDB</code>）</td>
</tr>
<tr>
<td>每季度</td>
<td>更新基准镜像和启动映像</td>
</tr>
</tbody>
</table>
</div>
<hr>
<p class="ds-markdown-paragraph"><strong>备注</strong>：</p>
<ul>
<li>
<p class="ds-markdown-paragraph">所有PowerShell命令需在管理员权限下执行。</p>
</li>
<li>
<p class="ds-markdown-paragraph">确保虚拟机网络配置为NAT或桥接模式，客户端可访问SCCM服务器。</p>
</li>
<li>
<p class="ds-markdown-paragraph">定期更新SCCM至最新累积更新（CU）以修复已知问题。</p>
</li>
</ul>
<hr>
<p class="ds-markdown-paragraph">此指南涵盖从环境搭建到灾难恢复的全流程，适用于生产环境部署。</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.7477684915069445" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-18 17:19">2025-05-18 17:18</span>&nbsp;
<a href="https://www.cnblogs.com/Johny-zhao">Johny_Zhao</a>&nbsp;
阅读(<span id="post_view_count">55</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18882396);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18882396', targetLink: 'https://www.cnblogs.com/Johny-zhao/p/18882396', title: 'Vmware workstation安装部署微软SCCM服务系统' })">举报</a>
</div>
        
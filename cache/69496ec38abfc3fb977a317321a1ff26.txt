
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/juniormu/p/18401441" title="发布于 2025-02-17 10:00">
    <span role="heading" aria-level="2">【VMware vSphere】扩容或缩减 vCenter Server 的磁盘空间大小。</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>我们在部署 vCenter Server 时，根据不同环境的情况，可以选择不同的部署选项，比如环境中的主机可能运行了 100 个，或者虚拟机运行了 1000 个，此时按照官方推荐的选择“小型环境”部署选项即可满足需求；如果主机超过了 100 个，可能在 1000 个以内，或者虚拟机超过了 1000 个，可能要运行 10000 个，此时推荐应该选择“大型环境”部署选项。</p>
<table style="border-collapse: collapse; width: 100%" border="1">
<tbody>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px"><strong>部署选项</strong></td>
<td style="width: 14.9744%; height: 21px"><strong>CPU</strong></td>
<td style="width: 6.69407%; height: 21px"><strong>内存</strong></td>
</tr>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px">微型环境（最多 10 个主机或 100 个虚拟机）</td>
<td style="width: 14.9744%; height: 21px">2</td>
<td style="width: 6.69407%; height: 21px">14 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px">小型环境（最多 100 个主机或 1,000 个虚拟机）</td>
<td style="width: 14.9744%; height: 21px">4</td>
<td style="width: 6.69407%; height: 21px">21 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px">中型环境（最多 400 个主机或 4000 个虚拟机）</td>
<td style="width: 14.9744%; height: 21px">8</td>
<td style="width: 6.69407%; height: 21px">30 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px">大型环境（最多 1000 个主机或 10000 个虚拟机）</td>
<td style="width: 14.9744%; height: 21px">16</td>
<td style="width: 6.69407%; height: 21px">39 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 78.3022%; height: 21px">超大型环境（最多 2000 个主机或 35000 个虚拟机）</td>
<td style="width: 14.9744%; height: 21px">24</td>
<td style="width: 6.69407%; height: 21px">58 GB </td>
</tr>
</tbody>
</table>
<p>同样，根据不同的部署选项，也会设置不同的默认存储大小，不过针对不同的部署选项，可以单独将默认存储大小调整为其他存储大小，比如选择“大型”或者“超大型”存储大小。</p>
<table style="border-collapse: collapse; width: 100%" border="1">
<tbody>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px"><strong>部署选项</strong></td>
<td style="width: 15.1486%; height: 21px"><strong>默认存储大小</strong></td>
<td style="width: 13.3012%; height: 21px"><strong>大型存储大小</strong></td>
<td style="width: 14.8855%; height: 21px"><strong>超大型存储大小</strong></td>
</tr>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px">微型环境（最多 10 个主机或 100 个虚拟机）</td>
<td style="width: 15.1486%; height: 21px">579 GB</td>
<td style="width: 13.3012%; height: 21px">2019 GB</td>
<td style="width: 14.8855%; height: 21px">4279 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px">小型环境（最多 100 个主机或 1000 个虚拟机）</td>
<td style="width: 15.1486%; height: 21px">694 GB</td>
<td style="width: 13.3012%; height: 21px">2044 GB</td>
<td style="width: 14.8855%; height: 21px">4304 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px">中型环境（最多 400 个主机或 4000 个虚拟机）</td>
<td style="width: 15.1486%; height: 21px">908 GB</td>
<td style="width: 13.3012%; height: 21px">2208 GB</td>
<td style="width: 14.8855%; height: 21px">4468 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px">大型环境（最多 1000 个主机或 10000 个虚拟机）</td>
<td style="width: 15.1486%; height: 21px">1358 GB</td>
<td style="width: 13.3012%; height: 21px">2258 GB</td>
<td style="width: 14.8855%; height: 21px">4518 GB</td>
</tr>
<tr style="height: 21px">
<td style="width: 56.6353%; height: 21px">超大型环境（最多 2000 个主机或 35000 个虚拟机）</td>
<td style="width: 15.1486%; height: 21px">2283 GB</td>
<td style="width: 13.3012%; height: 21px">2383 GB</td>
<td style="width: 14.8855%; height: 21px">4643 GB</td>
</tr>
</tbody>
</table>
<p>不同的部署选项会为 vCenter Server 虚拟机分配不同的 CPU 和内存大小，这个很容易理解，因为环境体型越大自然运行负载就越高，即使初始部署的时候分配得较低或较高，这两项也可以在后续使用过程中根据情况随时去调整它。但是，对于部署选项中的存储大小，大家可能就有疑问了，因为不清楚这个环境到底会占用多少存储空间，分配的少了，害怕磁盘被占满导致服务故障，分配的多了，害怕造成磁盘空间浪费。通常情况下，如果没有特殊需求，我们选择部署选项时只需保持默认即可，当对环境中的日志或者数据库类大小有更高需求时，可以选择大一级别选项，不建议一开始选择最高级别选项，因为相对来说，后续想要“扩容”要比“缩减”操作更容易一些。</p>
<p>&nbsp;</p>
<section class="" style="padding: 4px; border-top: 0 solid rgba(23, 122, 170, 1); border-right: 0 solid rgba(23, 122, 170, 1); border-bottom: 1px solid rgba(23, 122, 170, 1); border-left: 8px solid rgba(23, 122, 170, 1)">
<h2 class="aiActive" style="padding-left: 6px; margin-top: 2px; margin-bottom: 2px"><span style="font-size: 18px">一、vCenter Server 磁盘说明</span></h2>
</section>
<p>当 vCenter Server 部署完成之后，我们可以访问“https://vcenter-ip-or-fqdn:5480/#/ui/monitor/disks”管理后台查看磁盘的分区情况。以 vSphere 8 为例，部署时分配的所有存储空间被划分为 17 块磁盘（硬盘格式为VMDK），每块硬盘独立挂载到不同的分区目录以支持不同的用途，将鼠标放在不同分区上面可以显示其功能和用途，通过监控每块磁盘的利用率可以了解不同分区的使用情况。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216194632788-799693726.png"></p>
<p>不是所有的 vCenter Server 版本都会创建这么多的磁盘，并且不同版本所挂载目录的空间大小也不尽相同。以部署选项中的“微型环境”默认存储大小为例，以下是各个 vCenter Server 版本部署之后的磁盘使用情况。注意，如果不是默认存储大小，而是选择了其他类型的存储大小，则部署之后的磁盘分区大小也会跟着发生变化。</p>
<table style="border-collapse: collapse; width: 100.024%" border="1">
<tbody>
<tr style="height: 21px">
<td style="width: 20.1098%; height: 21px"><strong>vCenter Server 版本</strong></td>
<td style="width: 17.3812%; height: 21px"><strong>磁盘（VMDK）</strong></td>
<td style="width: 20.9002%; height: 21px"><strong>挂载目录</strong></td>
<td style="width: 6.03304%; height: 21px"><strong>默认大小</strong></td>
<td style="width: 35.5518%; height: 21px"><strong>用途</strong></td>
</tr>
<tr style="height: 63px">
<td style="height: 462px; width: 20.1098%" rowspan="11"><a href="https://knowledge.broadcom.com/external/article?articleNumber=319479" target="_blank" rel="noopener nofollow">6.0</a></td>
<td style="width: 17.3812%; height: 63px">VMDK1</td>
<td style="width: 20.9002%; height: 63px">/ (10 GB)<br>/boot (132 MB)<br>SWAP (1 GB)</td>
<td style="width: 6.03304%; height: 63px">12 GB</td>
<td style="width: 35.5518%; height: 63px">Boot directory where the kernel images and boot load configurations are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK2</td>
<td style="width: 20.9002%; height: 42px">/tmp</td>
<td style="width: 6.03304%; height: 42px">1.3 GB</td>
<td style="width: 35.5518%; height: 42px">Temporary directory used to store temporary files generated or used by services from vCenter Server</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK3</td>
<td style="width: 20.9002%; height: 42px">SWAP</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Swap directory used when the system is out of memory to swap to disk</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK4</td>
<td style="width: 20.9002%; height: 42px">/storage/core</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Core directory where core dumps from VPXD process from the vCenter Server are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK5</td>
<td style="width: 20.9002%; height: 42px">/storage/log</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Log directory where vCenter Server stores all logs for the environment</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK6</td>
<td style="width: 20.9002%; height: 21px">/storage/db</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database storage location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK7</td>
<td style="width: 20.9002%; height: 21px">/storage/dblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database logging location</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK8</td>
<td style="width: 20.9002%; height: 42px">/storage/seat</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Stats, Events, Alarms and Tasks (SEAT) directory for VMware Postgres</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK9</td>
<td style="width: 20.9002%; height: 42px">/storage/netdump</td>
<td style="width: 6.03304%; height: 42px">1 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Netdump collector repository that stores ESXi dumps</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK10</td>
<td style="width: 20.9002%; height: 42px">/storage/autodeploy</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Auto Deploy repository that stores the thinpackages used for stateless booting of ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK11</td>
<td style="width: 20.9002%; height: 63px">/storage/invsvc</td>
<td style="width: 6.03304%; height: 63px">5 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Inventory Service directory where the xDB, Inventory Service bootstrap configuration file, and tomcat configuration files reside</td>
</tr>
<tr style="height: 63px">
<td style="height: 526.823px; width: 20.1098%" rowspan="12"><a href="https://knowledge.broadcom.com/external/article?articleNumber=328452" target="_blank" rel="noopener nofollow">6.5</a></td>
<td style="width: 17.3812%; height: 63px">VMDK1</td>
<td style="width: 20.9002%; height: 63px">/ (10 GB)<br>/boot (132 MB)<br>SWAP (1 GB)</td>
<td style="width: 6.03304%; height: 63px">12 GB</td>
<td style="width: 35.5518%; height: 63px">Directory where the kernel images and boot loader configurations are stored.</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK2</td>
<td style="width: 20.9002%; height: 42px">/tmp</td>
<td style="width: 6.03304%; height: 42px">1.8 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used to store temporary files generated or used by services from vCenter Server</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK3</td>
<td style="width: 20.9002%; height: 42px">SWAP</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used when the system is out of memory to swap to disk</td>
</tr>
<tr style="height: 43.8229px">
<td style="width: 17.3812%; height: 43.8229px">VMDK4</td>
<td style="width: 20.9002%; height: 43.8229px">/storage/core</td>
<td style="width: 6.03304%; height: 43.8229px">25 GB</td>
<td style="width: 35.5518%; height: 43.8229px">Directory where core dumps from VPXD process from the vCenter Server are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK5</td>
<td style="width: 20.9002%; height: 42px">/storage/log</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Directory where vCenter Server and Platform Services Controller store all logs for the environment</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK6</td>
<td style="width: 20.9002%; height: 21px">/storage/db</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database storage location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK7</td>
<td style="width: 20.9002%; height: 21px">/storage/dblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database logging location</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK8</td>
<td style="width: 20.9002%; height: 42px">/storage/seat</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Stats, Events, Alarms and Tasks (SEAT) directory for VMware Postgres</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK9</td>
<td style="width: 20.9002%; height: 42px">/storage/netdump</td>
<td style="width: 6.03304%; height: 42px">1 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Netdump collector repository that stores ESXi dumps</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK10</td>
<td style="width: 20.9002%; height: 42px">/storage/autodeploy</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Auto Deploy repository that stores the thinpackages used for stateless booting of ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK11</td>
<td style="width: 20.9002%; height: 63px">/storage/imagebuilder</td>
<td style="width: 6.03304%; height: 63px">10 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Image Builder repository that stores the vSphere image profiles, software depots and VIB packages, such as driver VIBs and update VIBs.</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK12</td>
<td style="width: 20.9002%; height: 63px">/storage/updatemgr</td>
<td style="width: 6.03304%; height: 63px">100 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Update Manager repository where patches and updates are stored for Virtual Machine and ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="height: 568.823px; width: 20.1098%" rowspan="13"><a href="https://knowledge.broadcom.com/external/article?articleNumber=322815" target="_blank" rel="noopener nofollow">6.7</a></td>
<td style="width: 17.3812%; height: 63px">VMDK1</td>
<td style="width: 20.9002%; height: 63px">/ (10 GB)<br>/boot (132 MB)<br>SWAP (1 GB)</td>
<td style="width: 6.03304%; height: 63px">12 GB</td>
<td style="width: 35.5518%; height: 63px">Directory where the kernel images and boot loader configurations are stored.</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK2</td>
<td style="width: 20.9002%; height: 42px">/tmp</td>
<td style="width: 6.03304%; height: 42px">1.8 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used to store temporary files generated or used by services from vCenter Server</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK3</td>
<td style="width: 20.9002%; height: 42px">SWAP</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used when the system is out of memory to swap to disk</td>
</tr>
<tr style="height: 43.8229px">
<td style="width: 17.3812%; height: 43.8229px">VMDK4</td>
<td style="width: 20.9002%; height: 43.8229px">/storage/core</td>
<td style="width: 6.03304%; height: 43.8229px">25 GB</td>
<td style="width: 35.5518%; height: 43.8229px">Directory where core dumps from VPXD process from the vCenter Server are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK5</td>
<td style="width: 20.9002%; height: 42px">/storage/log</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Directory where vCenter Server and Platform Services Controller store all logs for the environment</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK6</td>
<td style="width: 20.9002%; height: 21px">/storage/db</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database storage location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK7</td>
<td style="width: 20.9002%; height: 21px">/storage/dblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database logging location</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK8</td>
<td style="width: 20.9002%; height: 42px">/storage/seat</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Stats, Events, Alarms and Tasks (SEAT) directory for VMware Postgres</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK9</td>
<td style="width: 20.9002%; height: 42px">/storage/netdump</td>
<td style="width: 6.03304%; height: 42px">1 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Netdump collector repository that stores ESXi dumps</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK10</td>
<td style="width: 20.9002%; height: 42px">/storage/autodeploy</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Auto Deploy repository that stores the thinpackages used for stateless booting of ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK11</td>
<td style="width: 20.9002%; height: 63px">/storage/imagebuilder</td>
<td style="width: 6.03304%; height: 63px">10 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Image Builder repository that stores the vSphere image profiles, software depots and VIB packages, such as driver VIBs and update VIBs.</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK12</td>
<td style="width: 20.9002%; height: 63px">/storage/updatemgr</td>
<td style="width: 6.03304%; height: 63px">100 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Update Manager repository where patches and updates are stored for Virtual Machine and ESXi hosts</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK13</td>
<td style="width: 20.9002%; height: 42px">/storage/archive</td>
<td style="width: 6.03304%; height: 42px">50 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Postgres database’s Write-Ahead Logging (WAL) location</td>
</tr>
<tr style="height: 63px">
<td style="height: 652.823px; width: 20.1098%" rowspan="16"><a href="https://knowledge.broadcom.com/external/article?articleNumber=322801" target="_blank" rel="noopener nofollow">7.0</a></td>
<td style="width: 17.3812%; height: 63px">VMDK1</td>
<td style="width: 20.9002%; height: 63px">/ (46 GB)<br>/boot (132 MB)<br>SWAP (1 GB)</td>
<td style="width: 6.03304%; height: 63px">48 GB</td>
<td style="width: 35.5518%; height: 63px">Directory where the kernel images and boot loader configurations are stored.</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK2</td>
<td style="width: 20.9002%; height: 42px">/tmp</td>
<td style="width: 6.03304%; height: 42px">1.8 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used to store temporary files generated or used by services from vCenter Server</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK3</td>
<td style="width: 20.9002%; height: 42px">SWAP</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used when the system is out of memory to swap to disk</td>
</tr>
<tr style="height: 43.8229px">
<td style="width: 17.3812%; height: 43.8229px">VMDK4</td>
<td style="width: 20.9002%; height: 43.8229px">/storage/core</td>
<td style="width: 6.03304%; height: 43.8229px">25 GB</td>
<td style="width: 35.5518%; height: 43.8229px">Directory where core dumps from VPXD process from the vCenter Server are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK5</td>
<td style="width: 20.9002%; height: 42px">/storage/log</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Directory where vCenter Server and Platform Services Controller store all logs for the environment</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK6</td>
<td style="width: 20.9002%; height: 21px">/storage/db</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database storage location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK7</td>
<td style="width: 20.9002%; height: 21px">/storage/dblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database logging location</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK8</td>
<td style="width: 20.9002%; height: 42px">/storage/seat</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Stats, Events, Alarms and Tasks (SEAT) directory for VMware Postgres</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK9</td>
<td style="width: 20.9002%; height: 42px">/storage/netdump</td>
<td style="width: 6.03304%; height: 42px">1 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Netdump collector repository that stores ESXi dumps</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK10</td>
<td style="width: 20.9002%; height: 42px">/storage/autodeploy</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Auto Deploy repository that stores the thinpackages used for stateless booting of ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK11</td>
<td style="width: 20.9002%; height: 63px">/storage/imagebuilder</td>
<td style="width: 6.03304%; height: 63px">10 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Image Builder repository that stores the vSphere image profiles, software depots and VIB packages, such as driver VIBs and update VIBs.</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK12</td>
<td style="width: 20.9002%; height: 63px">/storage/updatemgr</td>
<td style="width: 6.03304%; height: 63px">100 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Update Manager repository where patches and updates are stored for Virtual Machine and ESXi hosts</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK13</td>
<td style="width: 20.9002%; height: 42px">/storage/archive</td>
<td style="width: 6.03304%; height: 42px">50 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Postgres database’s Write-Ahead Logging (WAL) location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK14</td>
<td style="width: 20.9002%; height: 21px">/storage/vtsdb</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware vTSDB Service Repository that stores the stats</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK15</td>
<td style="width: 20.9002%; height: 21px">/storage/vtsdblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware vTSDB Service Repository that stores the logs of the service</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK16</td>
<td style="width: 20.9002%; height: 42px">/storage/lifecycle</td>
<td style="width: 6.03304%; height: 42px">100 GB</td>
<td style="width: 35.5518%; height: 42px">Workload Control Plane service stage directory or software depot, this stores the binaries for install and update/upgrade.</td>
</tr>
<tr style="height: 63px">
<td style="height: 673.823px; width: 20.1098%" rowspan="17"><a href="https://knowledge.broadcom.com/external/article?articleNumber=316438" target="_blank" rel="noopener nofollow">8.0</a></td>
<td style="width: 17.3812%; height: 63px">VMDK1</td>
<td style="width: 20.9002%; height: 63px">/ (48 GB)<br>/boot (512 MB)</td>
<td style="width: 6.03304%; height: 63px">48 GB</td>
<td style="width: 35.5518%; height: 63px">Directory where the kernel images and boot loader configurations are stored.</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK2</td>
<td style="width: 20.9002%; height: 42px">/tmp</td>
<td style="width: 6.03304%; height: 42px">5.5 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used to store temporary files generated or used by services from vCenter Server</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK3</td>
<td style="width: 20.9002%; height: 42px">SWAP</td>
<td style="width: 6.03304%; height: 42px">25 GB</td>
<td style="width: 35.5518%; height: 42px">Directory used when the system is out of memory to swap to disk</td>
</tr>
<tr style="height: 43.8229px">
<td style="width: 17.3812%; height: 43.8229px">VMDK4</td>
<td style="width: 20.9002%; height: 43.8229px">/storage/core</td>
<td style="width: 6.03304%; height: 43.8229px">25 GB</td>
<td style="width: 35.5518%; height: 43.8229px">Directory where core dumps from VPXD process from the vCenter Server are stored</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK5</td>
<td style="width: 20.9002%; height: 42px">/storage/log</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Directory where vCenter Server and Platform Services Controller store all logs for the environment</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK6</td>
<td style="width: 20.9002%; height: 21px">/storage/db</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database storage location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK7</td>
<td style="width: 20.9002%; height: 21px">/storage/dblog</td>
<td style="width: 6.03304%; height: 21px">15 GB</td>
<td style="width: 35.5518%; height: 21px">VMware Postgres database logging location</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK8</td>
<td style="width: 20.9002%; height: 42px">/storage/seat</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">Stats, Events, Alarms and Tasks (SEAT) directory for VMware Postgres</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK9</td>
<td style="width: 20.9002%; height: 42px">/storage/netdump</td>
<td style="width: 6.03304%; height: 42px">1 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Netdump collector repository that stores ESXi dumps</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK10</td>
<td style="width: 20.9002%; height: 42px">/storage/autodeploy</td>
<td style="width: 6.03304%; height: 42px">10 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Auto Deploy repository that stores the thinpackages used for stateless booting of ESXi hosts</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK11</td>
<td style="width: 20.9002%; height: 63px">/storage/imagebuilder</td>
<td style="width: 6.03304%; height: 63px">10 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Image Builder repository that stores the vSphere image profiles, software depots and VIB packages, such as driver VIBs and update VIBs.</td>
</tr>
<tr style="height: 63px">
<td style="width: 17.3812%; height: 63px">VMDK12</td>
<td style="width: 20.9002%; height: 63px">/storage/updatemgr</td>
<td style="width: 6.03304%; height: 63px">100 GB</td>
<td style="width: 35.5518%; height: 63px">VMware Update Manager repository where patches and updates are stored for Virtual Machine and ESXi hosts</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK13</td>
<td style="width: 20.9002%; height: 42px">/storage/archive</td>
<td style="width: 6.03304%; height: 42px">50 GB</td>
<td style="width: 35.5518%; height: 42px">VMware Postgres database’s Write-Ahead Logging (WAL) location</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK14</td>
<td style="width: 20.9002%; height: 21px">/storage/vtsdb</td>
<td style="width: 6.03304%; height: 21px">10 GB</td>
<td style="width: 35.5518%; height: 21px">VMware vTSDB Service Repository that stores the stats</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK15</td>
<td style="width: 20.9002%; height: 21px">/storage/vtsdblog</td>
<td style="width: 6.03304%; height: 21px">5 GB</td>
<td style="width: 35.5518%; height: 21px">VMware vTSDB Service Repository that stores the logs of the service</td>
</tr>
<tr style="height: 42px">
<td style="width: 17.3812%; height: 42px">VMDK16</td>
<td style="width: 20.9002%; height: 42px">/storage/lifecycle</td>
<td style="width: 6.03304%; height: 42px">100 GB</td>
<td style="width: 35.5518%; height: 42px">Workload Control Plane service stage directory or software depot, this stores the binaries for install and update/upgrade.</td>
</tr>
<tr style="height: 21px">
<td style="width: 17.3812%; height: 21px">VMDK17</td>
<td style="width: 20.9002%; height: 21px">/storage/lvm_snapshot</td>
<td style="width: 6.03304%; height: 21px">150 GB</td>
<td style="width: 35.5518%; height: 21px">Directory used to store&nbsp;temporary system root</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<section class="" style="padding: 4px; border-top: 0 solid rgba(23, 122, 170, 1); border-right: 0 solid rgba(23, 122, 170, 1); border-bottom: 1px solid rgba(23, 122, 170, 1); border-left: 8px solid rgba(23, 122, 170, 1)">
<h2 class="aiActive" style="padding-left: 6px; margin-top: 2px; margin-bottom: 2px"><span style="font-size: 18px">二、vCenter Server 磁盘扩容</span></h2>
</section>
<p>我们可以通过 VAMI 管理后台监控磁盘/分区的使用情况，vCenter Server 运行一段时间后，当利用率进度条显示为红色之后，说明磁盘空间即将占满，此时应该考虑对磁盘执行扩容操作。如果不及时进行扩容操作，或者因为其他原因导致磁盘的空间被完全占满，可能会造成服务中断以及 vCenter Server 使用故障。</p>
<p>从 vSphere 6.0 开始，vCenter Server 就引入了 &nbsp;Logical Volume Management（LVM）逻辑卷管理，并且可以在不停机的情况下完成磁盘空间的动态扩容，这对于运维和管理来说变得十分方便。但是有一点需要注意的是，vSphere 7.0 及之后的版本不支持调整根分区的大小，如果根分区的空间使用率比较高，可以考虑清除某些日志的方式来降低空间占用。以 vSphere 8.0 为例，下面演示如何对 vCenter Server 进行磁盘扩容。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216204348613-172411289.png"></p>
<p>使用 SSH 以 root 用户连接到 vCenter Server，默认情况下进入 API 命令行。磁盘扩容支持两种方式，一种是 API 方式，另外一种是 Shell 方式，这里先说第一种方式。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216205444608-401810011.png"></p>
<p>输入“storage”并按“Tab”补全，可以看到具有多个用于存储的 API 命令，运行“storage.health.get”可以获取存储的健康状态。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216205949407-2136727424.png"></p>
<p>运行“storage.list”可以获取 vCenter Server 所有的磁盘分区。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216210715121-209887755.png"></p>
<p>运行“storage.stats.list”可以获取 vCenter Server 磁盘分区使用情况。Usedkbytes 表示已使用空间大小，Totalkbytes 表示总空间大小，注意单位是 KB；Usedinodes 表示已使用的 inode 数量，Totalinodes 表示总共的 inode 数量。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216211817810-1406508093.png"></p>
<p>登录到 vSphere Client，找到 vCenter Server 虚拟机并点击编辑设置，展开硬盘选项卡可以看到 vCenter Server 的所有硬盘，这里演示给“硬盘 5”扩容磁盘空间，也就是“/storage/log”分区，从 25 GB 扩容到 30 GB。注意，如果这里显示是灰色无法修改磁盘的空间大小，可能是因为虚拟机正在快照上运行，可以尝试删除 vCenter Server 虚拟机的所有快照，并在继续之前创建 vCenter Server 基于文件的完整备份。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216213310871-1142871209.png"></p>
<p>运行“storage.resize”命令以执行磁盘分区自动扩容，再次查看磁盘分区的空间大小，可以发现已成功增加。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216214524438-733557582.png"></p>
<p>使用 SSH 以 root 用户连接到 vCenter Server，默认情况下进入 API 命令行。使用以下命令开启 vCenter Server 的 Bash Shell 访问，再输入 shell 命令进行连接。</p>
<pre class="language-bash highlighter-hljs"><code>shell.set --enabled true</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216215145781-291260429.png"></p>
<p>使用“df -h”或者“lsblk”命令查看磁盘分区及使用情况，然后确定某一个分区是否受影响。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216220233202-1853801671.png"></p>
<p>登录到 vSphere Client，找到 vCenter Server 虚拟机并点击编辑设置，展开硬盘选项卡，这里还是演示给“硬盘 5”扩容磁盘空间，从 30 GB 扩容到 40 GB。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216220655684-1501793128.png"></p>
<p>直接运行以下脚本，再次查看磁盘分区的使用情况，可以发现磁盘空间大小已成功扩容。</p>
<pre class="language-bash highlighter-hljs"><code>/usr/lib/applmgmt/support/scripts/autogrow.sh</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250216221143674-712175504.png"></p>
<p>上述过程能够完成对 vCenter Server 磁盘的扩容操作，整个过程应该比较简单，可以根据个人习惯自行选择使用 API 或者 Shell 方式。</p>
<p>&nbsp;</p>
<section class="" style="padding: 4px; border-top: 0 solid rgba(23, 122, 170, 1); border-right: 0 solid rgba(23, 122, 170, 1); border-bottom: 1px solid rgba(23, 122, 170, 1); border-left: 8px solid rgba(23, 122, 170, 1)">
<h2 class="aiActive" style="padding-left: 6px; margin-top: 2px; margin-bottom: 2px"><span style="font-size: 18px">三、vCenter Server 磁盘缩减</span></h2>
</section>
<p>其实应该能发现，上面所演示的 vCenter Server 磁盘空间使用率是极其较小的，这里的环境在部署的时候选择了“大型环境”选项，并且将默认存储大小修改为了“大型存储大小”，所以看起来分配给 vCenter Server 的磁盘空间被浪费了。如果运行很长一段时间后，发现 vCenter Server 的磁盘空间占用率依然非常低的话，说明使用环境与部署选项差距过大，选择低一档的部署选项也能满足需求。</p>
<p>已经部署的 vCenter Server，能不能对其存储空间执行缩减呢？网上有一些文章介绍如何收缩 vCenter Server 的磁盘大小，但是这些方法操作难度较高并且不受官方支持，所以，下面演示一种受支持的方法，用于缩减 vCenter Server 的磁盘空间大小。这种方法其实就是使用 vCenter Server 安装程序执行备份还原过程，因为在还原的第一阶段可以选择我们想要的任何部署选项。有关 vCenter Server 基于文件的备份方法可以参考这篇（<a href="https://www.cnblogs.com/juniormu/p/18448924" target="_blank" rel="noopener">使用 SFTP 服务器备份 VCF 核心组件的配置文件。</a>）文章。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217000227171-1392301408.png"></p>
<p>运行 vCenter Server 安装程序，选择“还原”选项。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217000351201-492887895.png"></p>
<p>连接到备份服务器并选择 vCenter Server 指定备份文件。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217000535063-1583299213.png"></p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217000608330-1085997850.png"></p>
<p>中间过程就省略了，在选择部署大小时，可根据当前 vCenter Server 环境的情况选择合适的部署选项，这里选择“小型环境”即可。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217000829475-246940338.png"></p>
<p>完成第一阶段新 vCenter Server 的部署，点击继续。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217001901111-1372867189.png"></p>
<p>开始第二阶段还原过程。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217002910709-1180544440.png"></p>
<p>连接到备份服务器。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217003024100-219245656.png"></p>
<p>由于部署选项与备份配置文件不匹配，出现“元数据和系统验证失败/Metadata and system validation failed”错误。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217004148355-1103069796.png"></p>
<p>登录到备份服务器，导航到 vCenter Server 的备份目录，找到“backup-metadata.json”备份元数据文件并进行编辑，根据下图修改文件中的“SizeInfo”和“Deployment Type”中的值以匹配在还原第一阶所选择的部署选项。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217004937068-296576594.png" height="414" width="1406"></p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217004129867-959696439.png"></p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217004222367-1193638260.png"></p>
<p>修改后，重新点击即可验证成功并进入下一步。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217004823805-887757241.png"></p>
<p>完成还原过程。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217005614942-1386449296.png"></p>
<p>登录 VAMI，再次点击磁盘监控，可以发现 vCenter Server 磁盘空间大小已成功缩减。</p>
<p><img src="https://img2024.cnblogs.com/blog/2313726/202502/2313726-20250217005727980-283693583.png"></p>
<p>参考类似的方式，也可以在跨版本“升级”过程中对 vCenter Server 磁盘空间进行缩减，比如从 6.5/6.7 升级到 7.0 或者 8.0 时，使用 vCenter Server 安装程序执行第一阶段的部署，然后关闭向导并通过浏览器访问 VAMI 进入第二阶段“升级”，最终完成整个过程。</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.34567657273611113" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-02-17 10:00">2025-02-17 10:00</span>&nbsp;
<a href="https://www.cnblogs.com/juniormu">JUNIOR_MU</a>&nbsp;
阅读(<span id="post_view_count">17</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18401441" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18401441);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18401441', targetLink: 'https://www.cnblogs.com/juniormu/p/18401441', title: '【VMware vSphere】扩容或缩减 vCenter Server 的磁盘空间大小。' })">举报</a>
</div>
        
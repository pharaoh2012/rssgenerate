
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lradian/p/18865705" title="发布于 2025-05-08 09:54">
    <span role="heading" aria-level="2">信号练习</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        
        信号练习
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<pre><code>/*******************************************************************************
*
* 设计两个程序,A执行死循环，B程序给发送一个结束信号给程序A，当程序A接收到信号之后则执行相应的任务。
* author：jindouliu2024@163.com 
* date：2025.5.8
* Copyright (c)  2024-2025   jindouliu2024@163.com   All right Reserved
* 
* *****************************************************************************/
</code></pre>
<pre><code>//程序A
#include&lt;stdio.h&gt;
#include&lt;signal.h&gt;
//信号处理函数
void sig_handler(int signal)
{
	//如果是接受到的信号是SIGUSR1，则执行
	if(signal == SIGUSR1){
		printf("this is SIGUSR1\n");

	}
	//如果是接受到的信号是SIGUSR2，则执行
	if(signal == SIGUSR2){
		printf("this is SIGUSR2\n");
		
	}
}
int main()
{
	printf("running\n");
	signal(SIGUSR1,sig_handler);
	signal(SIGUSR2,sig_handler);
	while(1);

	return 0;
}
</code></pre>
<pre><code>
#include&lt;stdio.h&gt;
#include&lt;signal.h&gt;
int main(int argc,char *argv[])
{
	int id,data;
	//获取进程id，在终端输入ps -ef命令
	printf("请输入id：");
	scanf("%d",&amp;id);
	while(1){
		//判断输入的数据，根据数据发送相应的信号
		printf("请输入user1 or user2：");
		scanf("%d",&amp;data);
		if(data == 1){
			kill(id,SIGUSR1);
		}
		if(data == 2){
			kill(id,SIGUSR2);
		}
	}
	
	return 0;
}
</code></pre>
<p>把快捷键Ctrl+C的对应信号进行阻塞，需要创建一个信号集，把该信号添加到信号集，对信号集属性进行设置（阻塞），然后测试发送该信号是否会被进程响应。</p>
<pre><code>#include&lt;stdio.h&gt;
#include&lt;signal.h&gt;
#include&lt;string.h&gt;
#include&lt;errno.h&gt;
int main(int argc,char *argv[])
{
	sigset_t arr;
	//将Ctrl +c 加入到信号集
	sigaddset(&amp;arr,SIGINT);
	//创建一个信号集并设置为阻塞特性
	int flag = sigprocmask(SIG_BLOCK,&amp;arr,NULL);
	if(flag == -1){
		printf("sigprocmask error\n");
		return 1;
	}
	while(1);
	
	
	return 0;
}
</code></pre>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="2.2699541067233797" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-05-08 13:59">2025-05-08 09:54</span>&nbsp;
<a href="https://www.cnblogs.com/lradian">LRadian</a>&nbsp;
阅读(<span id="post_view_count">14</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18865705);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18865705', targetLink: 'https://www.cnblogs.com/lradian/p/18865705', title: '信号练习' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChebyshevTST/p/18628633" title="发布于 2024-12-24 20:04">
    <span role="heading" aria-level="2">在openEuler RISC-V上无痛部署Solidity</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>&nbsp; <span style="font-size: 16px">近几年区块链很火，随着各国政府对加密技术的监管政策不断变化和BTC的暴涨，越来越多人对这项去中心化的技术充满着期待。这次我用openEuler 24.09 RISC-V的远程机器尝试编译了Solidity项目，发现过程比较顺畅，于是记录下来，后面有机会我也多多探讨区块链在RISC-V的可能性。</span></p>
<p>&nbsp;</p>
<pre class="highlighter-prismjs language-plaintext prismjs-lines-highlighted" tabindex="0"><code>git clone git@github.com:ethereum/solidity.git</code></pre>
<p>&nbsp;&nbsp;<span style="font-size: 16px">先是把Solidity的源码项目克隆了下来，由于项目比较庞大，用https拉的过程中总是会出现错误，我改成了ssh，第一步done！</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">&nbsp; 由于项目里面包含了好几个submodule，我在拉取submodule的过程中也失败了，然后尝试手动克隆（方法同上）后成功。</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241224195151895-1937242116.png"></span></p>
<p><span style="font-size: 16px">&nbsp; 这是.gitmodules文件，里面包含了需要拉取的子模块，同时"deps/xxx"就是项目所存放的目录，只需要手动将项目拉到"deps"目录就行。</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">&nbsp; 接下来就是编译，不过也遇到了编译失败的问题，编译命令比较简单，参照文档如下：</span></p>
<pre class="highlighter-prismjs prismjs-lines-highlighted language-cmake" tabindex="0"><code>mkdir build
cd build
cmake .. &amp;&amp; make</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241224195406015-210604910.png"></p>
<p>&nbsp;&nbsp;<span style="font-size: 16px">很明显这是一个跟浮点数转换有关的编译错误，面对这种情况，只需要在Cmake里面加上一个选项。</span></p>
<pre class="highlighter-prismjs language-cmake prismjs-lines-highlighted" tabindex="0"><code>cmake -DCMAKE_CXX_FLAGS="-Werror=float-conversion" ..</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241224195633308-904395600.png"></p>
<p>&nbsp;&nbsp;<span style="font-size: 16px">Done!</span></p>
<p><span style="font-size: 16px">&nbsp; 编译就暂时先跳过了，试试写一个Solidity的demo。</span></p>
<p>&nbsp;</p>
<pre class="highlighter-prismjs language-plaintext prismjs-lines-highlighted" tabindex="0"><code>// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract HelloWorld {
    string private message;

    constructor() {
        message = "Hello, World!";
    }

    function getMessage() public view returns (string memory) {
        return message;
    }
}</code></pre>
<p>&nbsp; <span style="font-size: 16px">运行./</span>solc --bin --abi xxx.sol</p>
<p><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241224200121128-726535622.png"></p>
<p>&nbsp;&nbsp;<span style="font-size: 16px">这将输出合约的abi和字节码。Done！</span></p>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;&nbsp;<span style="font-size: 16px">平安夜快乐！</span></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.843595609675926" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-24 20:04">2024-12-24 20:04</span>&nbsp;
<a href="https://www.cnblogs.com/ChebyshevTST">ChebyshevTST</a>&nbsp;
阅读(<span id="post_view_count">47</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18628633" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18628633);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18628633', targetLink: 'https://www.cnblogs.com/ChebyshevTST/p/18628633', title: '在openEuler RISC-V上无痛部署Solidity' })">举报</a>
</div>
        
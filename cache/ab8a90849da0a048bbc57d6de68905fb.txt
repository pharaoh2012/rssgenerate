
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ayic/p/18985708" title="发布于 2025-07-15 15:46">
    <span role="heading" aria-level="2">关于 JS 浮点数精度问题导致保留两位小数后进行四舍五入结果不符合预期</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>工作中遇到类似如下代码段：</p>
<pre><code class="language-javascript">&lt;script&gt;
	var num = 9.905; 
	console.log(num.toFixed(2));
&lt;/script&gt;
</code></pre>
<p>以上代码很简单，就是把一个数字保留 2 位小数，并且进行四舍五入后输出。预期输出 9.91 ，但实际输出 9.90 。</p>
<h3 id="导致以上问题的主要原因">导致以上问题的主要原因</h3>
<p>JavaScript 使用 IEEE 754 双精度浮点数格式存储数字，IEEE 754 在二进制中无法精确表示大多数十进制小数。</p>
<p>例如，9.905 的二进制表示是 无限循环小数，因此在双精度浮点数中只能存储一个近似值。实际上，JavaScript 将 9.905 存储为：9.90499999999999964472863211994758968353271484375</p>
<h3 id="解决方案">解决方案</h3>
<p><strong>解决方案 1：</strong> 使用高精度库（推荐）<br>
引入专门处理高精度计算的库（如 Decimal.js 或 Big.js），</p>
<p>示例代码：</p>
<pre><code class="language-javascript">&lt;!-- 使用 decimal.js 库 --&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/10.4.3/decimal.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  console.log(new Decimal(9.905).toFixed(2)); // "9.91"
&lt;/script&gt;
</code></pre>
<p><strong>解决方案 2：</strong> 使用Math函数</p>
<pre><code class="language-javascript">&lt;script&gt;
var num = 9.905; 
console.log((Math.round(Math.floor(num*1000)/10)/100).toString());
&lt;/script&gt;
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>本文来自博客园，作者：<a href="https://www.cnblogs.com/ayic/" target="_blank">Y00</a>，转载请注明原文链接：<a href="https://www.cnblogs.com/ayic/p/18985708" target="_blank">https://www.cnblogs.com/ayic/p/18985708</a></p>
<p style="display:none;">聊聊技术，聊聊人生。欢迎关注我的公众号！^_^</p>
<img src="https://images.cnblogs.com/cnblogs_com/ayic/2228020/o_221015170948_qr_code_search.png" style="display:none;">
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.018055555555555554" data-date-updated="2025-07-15 16:12">2025-07-15 15:46</span>&nbsp;
<a href="https://www.cnblogs.com/ayic">Y00</a>&nbsp;
阅读(<span id="post_view_count">2</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18985708);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18985708', targetLink: 'https://www.cnblogs.com/ayic/p/18985708', title: '关于 JS 浮点数精度问题导致保留两位小数后进行四舍五入结果不符合预期' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/kFM9j5ONLe/p/18927348" title="å‘å¸ƒäº 2025-06-13 16:37">
    <span role="heading" aria-level="2">JavaScript é˜²æŠ–å’ŒèŠ‚æµ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2>
<p>é˜²æŠ–ï¼ˆDebounceï¼‰æ˜¯æŒ‡åœ¨äº‹ä»¶è§¦å‘åï¼Œåªæœ‰åœ¨ç»è¿‡è®¾å®šçš„æ—¶é—´é—´éš”å†…æ²¡æœ‰å†æ¬¡è§¦å‘ï¼Œäº‹ä»¶å¤„ç†å™¨æ‰ä¼šæ‰§è¡Œã€‚é˜²æŠ–<strong>é™åˆ¶</strong>äº‹ä»¶çš„è§¦å‘æ—¶é—´é—´éš”ï¼Œé¿å…äº‹ä»¶è¢«é¢‘ç¹è§¦å‘ã€‚è¿™é€‚ç”¨äºåœ¨æœç´¢æ¡†è¾“å…¥å»ºè®®ã€è°ƒæ•´çª—å£å¤§å°ã€è¡¨å•éªŒè¯ã€è¡¨å•æäº¤ç­‰åœºæ™¯ã€‚</p>
<p>èŠ‚æµï¼ˆThrottleï¼‰åˆ™æ˜¯æŒ‡åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…ï¼Œä¸è®ºäº‹ä»¶è§¦å‘å¤šå°‘æ¬¡ï¼Œäº‹ä»¶å¤„ç†å™¨åªæ‰§è¡Œä¸€æ¬¡ã€‚èŠ‚æµ<strong>æ§åˆ¶</strong>æ‰§è¡Œæ—¶é—´é—´éš”ï¼Œé™ä½äº‹ä»¶çš„æ‰§è¡Œé¢‘ç‡ã€‚è¿™é€‚ç”¨äºé¡µé¢æ»šåŠ¨åŠ è½½ã€é¼ æ ‡ç§»åŠ¨ã€æ¸¸æˆè§’è‰²æ§åˆ¶ã€å®æ—¶æ•°æ®å›¾è¡¨æ›´æ–°ç­‰åœºæ™¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šäº‹ä»¶è§¦å‘â‰ å‡½æ•°æ‰§è¡Œã€‚è§¦å‘åœ¨æ‰§è¡Œå‰ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘åé¦ˆäº†ä¸€ä¸ªBugï¼Œä½†æ˜¯è¯¥Bugä¸ä¸€å®šåœ¨è¢«ä¿®å¤ã€‚</p>
</blockquote>
<blockquote>
<p>ç–‘é—®ï¼šé˜²æŠ–å’ŒèŠ‚æµéƒ½å¯ç”¨äºæ§åˆ¶äº‹ä»¶å¤„ç†å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ï¼Œé‚£å®ƒä»¬èƒ½å¦äº’ç›¸æ›¿ä»£ï¼Ÿ</p>
<p><strong>é˜²æŠ–æ˜¯ä¸ºäº†ç¡®ä¿å¤šæ¬¡è§¦å‘ã€ä¸€æ¬¡æ‰§è¡Œï¼Œåªå…³æ³¨æœ€ç»ˆçŠ¶æ€ï¼›èŠ‚æµæ˜¯ä¸ºäº†ç¡®ä¿å‡½æ•°çš„å‘¨æœŸæ€§æ‰§è¡Œï¼Œæ›´å…³æ³¨è¿‡ç¨‹ä¸­çš„å‡åŒ€å“åº”ã€‚</strong></p>
<p>æ•…é˜²æŠ–ã€èŠ‚æµä¸èƒ½å®Œå…¨äº’ç›¸æ›¿ä»£ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸¤çš„åº”ç”¨åœºæ™¯æ˜¯æœ‰æ‰€ä¾§é‡çš„ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¯¹äºæœç´¢æ¡†è¾“å…¥å»ºè®®è¿™ä¸ªåœºæ™¯ï¼Œç†åº”ä½¿ç”¨é˜²æŠ–è€ŒéèŠ‚æµï¼Œç†ç”±ï¼šæˆ‘ä»¬ç›‘å¬çš„æ˜¯è¾“å…¥äº‹ä»¶ï¼Œä¸”åº”è¯¥åœ¨ç”¨æˆ·è¾“å…¥å®Œæƒ³è¦è¾“å…¥çš„å†…å®¹åå†ç»™å‡ºå»ºè®®ï¼Œè‹¥ä½¿ç”¨èŠ‚æµï¼Œå°±å¯èƒ½åœ¨ç”¨æˆ·è¿˜æ²¡è¾“å…¥å®Œæˆæ—¶ç»™å‡ºäº†æ— æ•ˆå»ºè®®ã€‚</p>
</blockquote>
<h2 id="å®ç°">å®ç°</h2>
<h3 id="é˜²æŠ–å®ç°">é˜²æŠ–å®ç°</h3>
<p>ï¼ˆ1ï¼‰é˜²æŠ–å¼€å§‹æ—¶ä¸è°ƒç”¨ï¼Œç»“æŸæ—¶æ‰è°ƒç”¨ã€‚</p>
<pre><code class="language-js">function debounce(func, delay = 0){
    let timer = null;

    return function(){
        clearTimeout(timer);
        timer = setTimeout(()=&gt;{
            func.apply(this, arguments);
        }, delay);
    }
}
</code></pre>
<p>ï¼ˆ2ï¼‰é˜²æŠ–å¼€å§‹æ—¶ç«‹å³è°ƒç”¨ï¼Œç»“æŸæ—¶ä¹Ÿè°ƒç”¨ã€‚</p>
<pre><code class="language-js">// func æ˜¯å¾…é˜²æŠ–å‡½æ•°
// delay æ˜¯æœ€çŸ­æ‰§è¡Œæ—¶é—´é—´éš”ï¼Œå•ä½ ms
// options æ˜¯é¢å¤–é…ç½®ï¼ŒåŒ…æ‹¬é¦–æ¬¡è°ƒç”¨ç«‹å³æ‰§è¡Œ
function debounce(func, delay, options = {}) {
    let timer; // è®¡æ—¶å™¨ ID
    const { leading = false } = options; // é»˜è®¤é¦–æ¬¡è°ƒç”¨ä¸ç«‹å³æ‰§è¡Œ

    const debounced = function (...args) {
        // ä¿ç•™æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡
        const context = this;

        // é¦–æ¬¡è°ƒç”¨æ‰§è¡Œ
        if (leading &amp;&amp; !timer) func.apply(context, args);
        
        // æ§åˆ¶è§¦å‘æ—¶é—´é—´éš”çš„å…³é”®ç‚¹
        clearTimeout(timer);
        timer = setTimeout(()=&gt;{
            // é¿å…é‡å¤æ‰§è¡Œï¼Œé¦–æ¬¡è°ƒç”¨æ‰§è¡Œäº†å°¾éƒ¨å»¶è¿Ÿç»“æŸå°±ä¸å†æ‰§è¡Œ
            if (!leading) func.apply(context, args);
            
            timer = null;
        }, delay);
    };

	// å–æ¶ˆé˜²æŠ–çš„åŠŸèƒ½å‡½æ•°
    debounced.cancel = () =&gt; {
        clearTimeout(timer);
        timer = null;
    };

    return debounced;
}
</code></pre>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦åœ¨æ›´æ–° <code>timer</code> ä¸º<code>null</code>å‰æ‰§è¡Œ <code>clearTimeout</code>ï¼Ÿ</strong></p>
<p>æ›´æ–° <code>timer</code> ä¸º<code>null</code>ä¸ä¼šä½¿å¾—<code>timer</code>å…³è”çš„è®¡æ—¶å™¨å¤±æ•ˆã€‚</p>
</blockquote>
<h3 id="èŠ‚æµå®ç°">èŠ‚æµå®ç°</h3>
<p>ï¼ˆ1ï¼‰æ—¶é—´æˆ³ç‰ˆæœ¬ï¼š<u>å¼ºè°ƒåœ¨èŠ‚æµå¼€å§‹æ—¶å°±ä¼šè°ƒç”¨å‡½æ•°ï¼ŒèŠ‚æµç»“æŸæ—¶ä¸è°ƒç”¨</u>ã€‚</p>
<pre><code class="language-js">function throttle(func, delay = 0){
    let lastExecTime = 0;
    
    return function(){
        let context = this;
        let args = arguments;
        let remaining = delay - (Date.now() - lastExecTime);

        if(remaining &lt; 0){
            func.apply(context, args);
            lastExecTime = Date.now();
        }
    }
}
</code></pre>
<p>ï¼ˆ2ï¼‰å®šæ—¶å™¨ç‰ˆæœ¬ï¼š<u>å…³æ³¨ç‚¹åœ¨èŠ‚æµç»“æŸæ—¶å†è°ƒç”¨å‡½æ•°ï¼Œè€Œå¼€å§‹æ—¶ä¸ä¼šè°ƒç”¨å‡½æ•°</u>ã€‚</p>
<pre><code class="language-js">function throttle(func, delay = 0){
    let timer = null;
    
    return function(){
        let context = this;
        let args = arguments;

        if(!timer){
            timer = setTimeout(()=&gt;{
                timer = null;
                func.apply(context, args);
            }, delay);
        }
    }
}
</code></pre>
<p>ï¼ˆ3ï¼‰åˆå¹¶ç‰ˆæœ¬ï¼š<u>ç»“åˆä½¿ç”¨æ—¶é—´æˆ³å’Œå®šæ—¶å™¨ï¼ŒèŠ‚æµå¼€å§‹å’Œç»“æŸæ—¶éƒ½ä¼šæ‰§è¡Œ</u>ã€‚</p>
<pre><code class="language-javascript">// option é…ç½®é¡¹ï¼š
//  - leadingï¼šåœ¨èŠ‚æµå¼€å§‹æ—¶æ‰§è¡Œ
//  - trailingï¼šåœ¨èŠ‚æµç»“æŸåæ‰§è¡Œ
function throttle(func, delay = 0, option = {}){
    let timer = null;
    let lastExecTime = 0;
    const { leading = true, trailing = true } = option;
    
    const throttled = function(...args) {
        const context = this;
        const remaining = delay - (Date.now() - lastExecTime);

        if(leading &amp;&amp; remaining &lt; 0) {
            lastExecTime = Date.now();
            if(timer){
                clearTimeout(timer);
                timer = null;
            }
            func.apply(context, args);
        }
        else if(trailing &amp;&amp; remaining &gt;= 0 &amp;&amp; !timer) {
            timer = setTimeout(()=&gt;{
                lastExecTime = Date.now();
                timer = null;
                func.apply(context, args);
            }, remaining);
        }
    }

    return throttled;
}
</code></pre>
<p>åº”ç”¨ç¤ºä¾‹ï¼š</p>
<p>ğŸŒºå¯¹é¼ æ ‡ç§»åŠ¨äº‹ä»¶æ·»åŠ èŠ‚æµï¼š</p>
<pre><code class="language-js">window.addEventListener('mousemove', throttle(function(){
    console.log('é¼ æ ‡ç§»åŠ¨');
}, 1000));
</code></pre>

</div>
<div id="MySignature" role="contentinfo">
    <p>å¦‚æœ‰é”™è¯¯å’Œå»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºå‘ŠçŸ¥ï¼</p>
<p>æœ¬æ–‡ç”± <strong><a href="https://www.cnblogs.com/kFM9j5ONLe/" target="_blank">dawnkylin</a></strong> åˆ›ä½œï¼Œé‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC
        BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cnblogs.com/kFM9j5ONLe/p/18927348" target="_blank">https://www.cnblogs.com/kFM9j5ONLe/p/18927348</a>
</p><p>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.03194444444444444" data-date-updated="2025-06-13 17:23">2025-06-13 16:37</span>&nbsp;
<a href="https://www.cnblogs.com/kFM9j5ONLe">dawnkylin</a>&nbsp;
é˜…è¯»(<span id="post_view_count">54</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18927348);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18927348', targetLink: 'https://www.cnblogs.com/kFM9j5ONLe/p/18927348', title: 'JavaScript é˜²æŠ–å’ŒèŠ‚æµ' })">ä¸¾æŠ¥</a>
</div>
        
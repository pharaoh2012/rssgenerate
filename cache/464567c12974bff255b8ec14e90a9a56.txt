
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/ChebyshevTST/p/18641838" title="发布于 2024-12-30 20:06">
    <span role="heading" aria-level="2">openEuler RISC-V上磁盘I/O性能测试的IOZone实例</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p><span style="font-size: 16px">  IOZone 是一个广泛使用的文件系统性能基准测试工具，旨在评估磁盘 I/O 性能。它能够测试各种类型的文件操作，包括顺序读写、随机读写、重载（re-write）、读取已写入的数据等。通过这些测试，IOZone 可以帮助用户了解不同文件系统和存储设备的性能特点，从而为选择合适的硬件和优化系统配置提供依据。</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">主要功能：</span></p>
<p><span style="font-size: 16px">1. 全面的 I/O 操作测试：支持多种文件操作模式，如顺序读/写、随机读/写、混合读写等。测试不同的文件大小和记录大小组合，以模拟真实世界的应用场景。</span></p>
<p><span style="font-size: 16px">2. 多平台支持：兼容多种操作系统，包括 Linux、Windows、macOS 以及其他 Unix 系统。支持从个人电脑到大型服务器的各种硬件平台。</span></p>
<p><span style="font-size: 16px">3. 丰富的输出格式：提供详细的测试结果报告，包含图表和数据表格，便于分析。输出可以导出为文本、CSV 或图形化格式，方便进一步处理和分享。</span></p>
<p><span style="font-size: 16px">4. 自动化脚本支持：可以编写脚本来自动化运行多个测试用例，适合批量测试和长期监控。支持命令行参数配置，简化了测试设置过程。</span></p>
<p><span style="font-size: 16px">5. 多线程和多进程能力：支持多线程和多进程并发测试，准确反映多任务环境下的性能表现。可以指定并行度（即同时进行的测试数量），以模拟高负载情况。</span></p>
<p><span style="font-size: 16px">6. 实时性能监控：在测试过程中实时显示进度和当前性能指标，让用户及时掌握系统状态。</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">&nbsp; 好吧（都是GPT生成的）。话说回来，这是我最近了解到的一个测评工具，因此想在openEuler RISC-V上试试效果如何。</span></p>
<p><span style="font-size: 16px">&nbsp; GitHub地址：https://github.com/pantheon-systems/iozone.git</span></p>
<p><span style="font-size: 16px">&nbsp; 先尝试在本机(ubuntu 22.04)进行了编译，遇到了一些编译的问题：</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230171755611-1457829903.png"></span></p>
<p><span style="font-size: 16px">&nbsp; 这是遇到了符号重定义的问题，我翻了翻C源代码文件，发现变量junk确实分布在好几个相同的文件，但是他们其实是可以相互独立的。</span></p>
<p><span style="font-size: 16px">&nbsp; Makefile当中，libbif.c和iozone.c都定义了junk变量，而iozone_linux.o又依赖于这两者，问题的根本就出现在这里。</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230173210948-1461219412.png"></span></p>
<p><span style="font-size: 16px">&nbsp; 为此，我将这些变量重新命名，可以看看我的commit：<a href="https://github.com/pantheon-systems/iozone/compare/master...Thomas134:iozone:master" rel="noopener nofollow">Comparing pantheon-systems:master...Thomas134:master · pantheon-systems/iozone</a></span></p>
<p><span style="font-size: 16px">&nbsp; 本地编译成功之后，再试试在openEuler RISC-V上重新编译，发现也成功了（编译命令：make linux）。</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230173503849-2118385321.png"></span></p>
<p><span style="font-size: 16px">  IOZone的使用也比较简单，列举几个简单的命令：</span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">./iozone -a  全部样例都进行测试</span></p>
<p><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230195859382-1959797262.png"></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">./iozone -a -i 0&nbsp; &nbsp; &nbsp; &nbsp;选定某个编号的样例进行测试（-i number）</span></p>
<p><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230195956095-356894271.png"></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">./iozone -a -i 0 -s 64&nbsp; &nbsp; 指定大小进行测试（-s size）</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230200142538-1761493563.png"></span></p>
<p>&nbsp;</p>
<p><span style="font-size: 16px">各个测试类型如下：</span></p>
<p><span style="font-size: 16px"><img src="https://img2024.cnblogs.com/blog/3254001/202412/3254001-20241230200233892-804568898.png"></span></p>
<p><span style="font-size: 16px">&nbsp; 同时输出结果的字段当中，File size：文件大小（以 KB 为单位）表示测试过程中使用的文件大小。Record size：记录大小（以 KB 为单位）。表示每次 I/O 操作的数据块大小。</span></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;<span style="font-size: 16px">这个软件目前也顺利在openEuler RISC-V上运行了。还有更多的用法，今天就到此为止。</span></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.026959039546296297" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-30 20:06">2024-12-30 20:06</span>&nbsp;
<a href="https://www.cnblogs.com/ChebyshevTST">ChebyshevTST</a>&nbsp;
阅读(<span id="post_view_count">9</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18641838" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18641838);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18641838', targetLink: 'https://www.cnblogs.com/ChebyshevTST/p/18641838', title: 'openEuler RISC-V上磁盘I/O性能测试的IOZone实例' })">举报</a>
</div>
        
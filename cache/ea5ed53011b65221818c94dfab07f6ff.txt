<!----> <meta itemprop="headline" content="äº§å“ï¼šä¸Šä¼ å›¾ç‰‡æ‹–æ‹½ä¸€ä¸‹æ€ä¹ˆäº† ? "> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"> <meta itemprop="datePublished" content="2025-04-27T07:24:26.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸çˆ±è¯´è¯éƒ­å¾·çº²"> <meta itemprop="url" content="https://juejin.cn/user/4103820476156712"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-5111268e="">
            äº§å“ï¼šä¸Šä¼ å›¾ç‰‡æ‹–æ‹½ä¸€ä¸‹æ€ä¹ˆäº† ? 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-5111268e=""><div class="author-info-box" data-v-5111268e=""><div class="author-name" data-v-5111268e=""><a href="/user/4103820476156712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-6a576a98="" data-v-5111268e=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-6a576a98="">
    ä¸çˆ±è¯´è¯éƒ­å¾·çº²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-5111268e=""><time datetime="2025-04-27T07:24:26.000Z" title="Sun Apr 27 2025 07:24:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-5111268e="">
                    2025-04-27
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-5111268e=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-5111268e=""></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-5111268e=""></circle></svg> <span class="views-count" data-v-5111268e="">
                    8,882
                  </span> <span class="read-time" data-v-5111268e=""><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-5111268e=""><rect width="16" height="16" fill="none" data-v-5111268e=""></rect><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-5111268e=""></circle><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-5111268e=""></path></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-5111268e=""></div> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-5111268e=""><div class="article-viewer markdown-body result"><h2 data-id="heading-0">å‰æˆ</h2>
<h2 data-id="heading-1">ä¸€ã€éœ€æ±‚èƒŒæ™¯ï¼šä¸€ä¸ªäº§å“ç»ç†çš„æ‰§å¿µ ğŸ“Œ</h2>
<blockquote>
<p>"å°Xå•Šï¼Œè¿™ä¸ªå•†å“è¯¦æƒ…é¡µçš„å›¾ç‰‡è¦èƒ½æ‹–åŠ¨æ’åºï¼Œå°±åƒæ‰‹æœºç›¸å†Œé‚£æ ·ä¸æ»‘ï¼"</p>
<p>â€”â€” æ¥è‡ªäº§å“ç»ç†çš„ç¬¬7æ¬¡éœ€æ±‚å˜æ›´</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/693870d44bd541f9a23f995a57f43246~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN54ix6K-06K-d6YOt5b6357qy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1749351249&amp;x-signature=M9tEIArx2v3YhcKXuT4FoS2w7cE%3D" alt="image.png" loading="lazy"></p>
<blockquote>
<p>ä½œä¸ºå‰ç«¯ç‚’ç²‰ï¼Œé¢å¯¹è¿™ä¸ª"ç®€å•"éœ€æ±‚æ—¶ï¼Œæˆ‘æœ›ç€Element Pluså®˜æ–¹æ–‡æ¡£é™·å…¥äº†æ²‰æ€ ğŸ¤”ã€‚el-uploadç»„ä»¶è™½ç„¶èƒ½å®Œç¾å¤„ç†ä¸Šä¼ ï¼Œä½†åŸç”Ÿå¹¶ä¸æ”¯æŒå·²ä¸Šä¼ å›¾ç‰‡çš„æ‹–æ‹½æ’åºã€‚äºæ˜¯ï¼Œå½“ç„¶æ˜¯é€‰æ‹©æ»¡è¶³ä»–å•¦...</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17a9a6211a1e42c5906ade46cb8798c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN54ix6K-06K-d6YOt5b6357qy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1749351249&amp;x-signature=uy4kYnR84X3BBP5Lo1T52GXObso%3D" alt="image.png" loading="lazy"></p>
<h2 data-id="heading-2">ä¸€ã€éœ€æ±‚èƒŒæ™¯</h2>
<p>è¨€å½’æ­ªä¼ ï¼Œåœ¨ç®¡ç†åå°å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦å®ç°å›¾ç‰‡ä¸Šä¼ ä¸æ’åºåŠŸèƒ½ã€‚Element Plusçš„el-uploadç»„ä»¶è™½ç„¶æä¾›äº†åŸºç¡€çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼Œä½†åŸç”Ÿå¹¶ä¸æ”¯æŒå·²ä¸Šä¼ å›¾ç‰‡çš„æ‹–æ‹½æ’åºã€‚ä¸‹é¢å°†åŸºäºel-uploadç»„ä»¶ï¼Œç»“åˆHTML5æ‹–æ”¾APIï¼Œå®ç°å›¾ç‰‡ä¸Šä¼ åçš„æ‹–æ‹½æ’åºçš„åŸºæœ¬åŠŸèƒ½ã€‚</p>
<hr>
<h2 data-id="heading-3">äºŒã€å®ç°æ•ˆæœ</h2>
<ol>
<li>ä¸Šä¼ åçš„å›¾ç‰‡æ”¯æŒæ‹–æ‹½äº¤æ¢ä½ç½®</li>
<li>å®æ—¶é¢„è§ˆæ‹–æ‹½åçš„æ’åºæ•ˆæœ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110552f6d4bf4a2a8372c0a636d3c7c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN54ix6K-06K-d6YOt5b6357qy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1749351249&amp;x-signature=qFahQ6Dc3gvL%2BxMMlnuNZDFv%2BeY%3D" alt="åŠ¨ç”».gif" loading="lazy"></p>
<hr>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒå®ç°åˆ†æï¼šé­”æ³•èƒŒåçš„ç§˜å¯† ğŸ§™</h2>
<h3 data-id="heading-5">1. æ¨¡æ¿ç»“æ„è§£æğŸ› ï¸</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">el-upload</span>
  <span class="hljs-attr">list-type</span>=<span class="hljs-string">"picture-card"</span>
  <span class="hljs-attr">:auto-upload</span>=<span class="hljs-string">"false"</span>
  <span class="hljs-attr">:limit</span>=<span class="hljs-string">"10"</span>
  <span class="hljs-attr">v-model:file-list</span>=<span class="hljs-string">"userInfo.pictureMobile"</span>
  <span class="hljs-attr">:on-change</span>=<span class="hljs-string">"handleChange"</span>
&gt;</span>
  
  <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ–‡ä»¶é¡¹æ¨¡æ¿ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">file</span>=<span class="hljs-string">"{ file }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">draggable</span>=<span class="hljs-string">"true"</span>          &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å¼€å¯æ‹–æ‹½åŠŸèƒ½</span> <span class="hljs-attr">--</span>&gt;</span>
      @dragstart="handleDragStart($event,file,'mb')"
      @drop="handleDrop($event,file,'mb')"
      @dragover.prevent&gt;        <span class="hljs-comment">&lt;!-- é˜»æ­¢é»˜è®¤è¡Œä¸º --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"file.url"</span> /&gt;</span>
      <span class="hljs-comment">&lt;!-- æ“ä½œæŒ‰é’® --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-upload-list__item-actions"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handlePictureCardPreview(file)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">zoom-in</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleRemove(file,'mb')"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Delete</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-upload</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">2. é€»è¾‘å®ç°ğŸ¨</h3>
<h4 data-id="heading-7">æ‹–æ‹½äºŒéƒ¨æ›² ğŸ“¦â†’ğŸ“¦</h4>
<h4 data-id="heading-8">ğŸ¯ç¬¬ä¸€æ­¥ï¼šæ‹–æ‹½å¼€å§‹äº‹ä»¶å¤„ç†ï¼šdragstart</h4>
<ul>
<li>è·å–å½“å‰æ‹–æ‹½é¡¹çš„ç´¢å¼•</li>
<li>å°†ç´¢å¼•å­˜å…¥æ•°æ®ä¼ è¾“å¯¹è±¡</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDragStart</span> = (<span class="hljs-params">event, file, <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// å›¾ç‰‡åˆ—è¡¨</span>
  <span class="hljs-keyword">const</span> imgList = userInfo.<span class="hljs-property">picturePc</span>;
  
  <span class="hljs-keyword">const</span> index = imgList.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> element === file);

  event.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">setData</span>(<span class="hljs-string">'index'</span>, index.<span class="hljs-title function_">toString</span>());
}
</code></pre>
<h4 data-id="heading-9">ğŸ¯ç¬¬äºŒæ­¥ï¼šæ‹–æ‹½é‡Šæ”¾äº‹ä»¶å¤„ç†ï¼šhandleDrop</h4>
<ul>
<li>è·å–ç›®æ ‡ä½ç½®ç´¢å¼•</li>
<li>é˜»æ­¢é»˜è®¤è¡Œä¸º</li>
<li>è·å–æ‹–æ‹½æºç´¢å¼•</li>
<li>åˆ›å»ºæ•°ç»„å‰¯æœ¬ï¼ˆä¿è¯å“åº”å¼æ›´æ–°ï¼‰</li>
<li>æ‰§è¡Œæ•°ç»„å…ƒç´ ç§»åŠ¨</li>
<li>æ›´æ–°å›¾ç‰‡åˆ—è¡¨</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDrop</span> = (<span class="hljs-params">event, file, <span class="hljs-keyword">type</span></span>) =&gt; {
  <span class="hljs-comment">// è·å–ç›®æ ‡ä½ç½®ç´¢å¼•</span>
  <span class="hljs-keyword">const</span> index = imgList.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span> element === file);
  
  <span class="hljs-comment">// é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
  event.<span class="hljs-title function_">preventDefault</span>();

  <span class="hljs-comment">// è·å–æ‹–æ‹½æºç´¢å¼•</span>
  <span class="hljs-keyword">const</span> draggedIndex = <span class="hljs-title class_">Number</span>(event.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'index'</span>));
  
  <span class="hljs-comment">// åˆ›å»ºæ•°ç»„å‰¯æœ¬ï¼ˆä¿è¯å“åº”å¼æ›´æ–°ï¼‰</span>
  <span class="hljs-keyword">const</span> updatedList = [...imgList];
  
  <span class="hljs-comment">// æ‰§è¡Œæ•°ç»„å…ƒç´ ç§»åŠ¨</span>
  <span class="hljs-keyword">const</span> [draggedItem] = updatedList.<span class="hljs-title function_">splice</span>(draggedIndex, <span class="hljs-number">1</span>);
  updatedList.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">0</span>, draggedItem);

  <span class="hljs-comment">// æ›´æ–°å¯¹åº”ç±»å‹çš„å›¾ç‰‡åˆ—è¡¨</span>
    userInfo.<span class="hljs-property">picturePc</span> = updatedList
}
</code></pre>
<hr>
<h2 data-id="heading-10">å››ã€å…³é”®ç‚¹</h2>
<h3 data-id="heading-11">1. HTML5æ‹–æ”¾API</h3>
<ul>
<li><code>draggable="true"</code>ï¼šä½¿å…ƒç´ å¯æ‹–æ‹½</li>
<li><code>@dragstart</code>ï¼šæ‹–æ‹½å¼€å§‹æ—¶è§¦å‘</li>
<li><code>@drop</code>ï¼šæ‹–æ‹½é‡Šæ”¾æ—¶è§¦å‘</li>
<li><code>@dragover.prevent</code>ï¼šé˜»æ­¢é»˜è®¤æ‹–æ‹½è¡Œä¸º</li>
<li><code>dataTransfer</code>ï¼šè·¨äº‹ä»¶æ•°æ®ä¼ è¾“å¯¹è±¡</li>
</ul>
<h3 data-id="heading-12">2. æ•°ç»„æ“ä½œæŠ€å·§</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ é™¤å¹¶æ’å…¥å…ƒç´ çš„ç»å…¸å†™æ³•</span>
<span class="hljs-keyword">const</span> updatedList = [...originalList];
<span class="hljs-keyword">const</span> [movedItem] = updatedList.<span class="hljs-title function_">splice</span>(oldIndex, <span class="hljs-number">1</span>);
updatedList.<span class="hljs-title function_">splice</span>(newIndex, <span class="hljs-number">0</span>, movedItem);
</code></pre>
<h3 data-id="heading-13">3. å“åº”å¼æ›´æ–°</h3>
<p>é€šè¿‡åˆ›å»ºæ•°ç»„å‰¯æœ¬å¹¶é‡æ–°èµ‹å€¼ï¼Œè§¦å‘Vueçš„å“åº”å¼æ›´æ–°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">userInfo.<span class="hljs-property">pictureMobile</span> = updatedList
</code></pre>
<hr>
<h2 data-id="heading-14">äº”ã€è¸©å‘æ—¥è®°ï¼šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…» ğŸ“–</h2>
<h3 data-id="heading-15">ğŸš§ å‘1ï¼šå¹½çµå›¾ç‰‡é—®é¢˜</h3>
<p><strong>ç°è±¡</strong>ï¼šæ‹–æ‹½æ—¶å‡ºç°åŠé€æ˜æ®‹å½±<br>
<strong>è§£æ³•</strong>ï¼šç»™æ‹–æ‹½å…ƒç´ æ·»åŠ CSSæ ·å¼</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.dragging-item</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">3deg</span>);
}
</code></pre>
<h3 data-id="heading-16">ğŸš§ å‘2ï¼šç§»åŠ¨ç«¯å…¼å®¹æ€§</h3>
<p><strong>ç°è±¡</strong>ï¼šæ‰‹æœºæ»‘åŠ¨è§¦å‘é¡µé¢æ»šåŠ¨<br>
<strong>è§£æ³•</strong>ï¼šæ·»åŠ touch-actionæ ·å¼</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.mobile-container</span> {
  touch-action: none;
}
</code></pre>
<hr>
<h2 data-id="heading-17">å…­ã€å®Œæ•´å®ç°æµç¨‹</h2>
<ol>
<li>ğŸ¯ åˆå§‹åŒ–el-uploadç»„ä»¶ï¼Œç¦ç”¨è‡ªåŠ¨ä¸Šä¼ </li>
<li>âœ¨ é€šè¿‡file-listç»‘å®šå›¾ç‰‡æ•°æ®æº</li>
<li>ğŸ”® è‡ªå®šä¹‰æ–‡ä»¶é¡¹æ¨¡æ¿ï¼Œæ·»åŠ æ‹–æ‹½äº‹ä»¶</li>
<li>âš¡ å®ç°æ‹–æ‹½å¼€å§‹æ—¶çš„ç´¢å¼•è®°å½•</li>
<li>ğŸŒˆ å¤„ç†æ‹–æ‹½é‡Šæ”¾æ—¶çš„å…ƒç´ äº¤æ¢ï¼‰</li>
<li>ğŸ§ªæ›´æ–°å“åº”å¼æ•°æ®è§¦å‘è§†å›¾åˆ·æ–°</li>
</ol>
<hr>
<h2 data-id="heading-18">ä¸ƒã€æ€»ç»“</h2>
<p>é€šè¿‡ç»“åˆel-uploadçš„æ–‡ä»¶ç®¡ç†èƒ½åŠ›å’ŒHTML5åŸç”Ÿæ‹–æ”¾APIï¼Œç®€å•å®ç°äº†ç›´è§‚çš„å›¾ç‰‡æ‹–æ‹½æ’åºåŠŸèƒ½ã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>





















<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è½»é‡çº§</td><td>æ— éœ€é¢å¤–ä¾èµ–åº“</td></tr><tr><td>é«˜å…¼å®¹</td><td>åŸºäºåŸç”ŸAPIå®ç°</td></tr><tr><td>æ˜“æ‰©å±•</td><td>æ”¯æŒå¤šåœºæ™¯ç±»å‹å‚æ•°</td></tr></tbody></table>
<h2 data-id="heading-19"><strong><p align="center"> ä¸‹æ¬¡å†è§ï¼ğŸŒˆ</p></strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eee96f98257840b7a90353fc8156e955~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN54ix6K-06K-d6YOt5b6357qy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1749351249&amp;x-signature=hYwEy3zfoSekUTZns%2BPpzNToMSI%3D" alt="Snipaste_2025-04-27_15-18-02.png" loading="lazy"></p></div></div>
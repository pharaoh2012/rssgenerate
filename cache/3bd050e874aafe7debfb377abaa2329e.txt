
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaoxi666/p/18853568" title="发布于 2025-04-29 14:00">
    <span role="heading" aria-level="2">Dubbo实战：四步实现注册中心平滑迁移</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div class="okr-block-clipboard lark-doc" data-okr="%7B%22okrDelta%22%3A%5B%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%22%2C%22bold%22%3Atrue%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%A6%82%E9%A2%98%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E7%9C%9F%E5%AE%9E%E5%AD%98%E5%9C%A8%E7%9A%84%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%E3%80%82%E5%9C%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB%E7%9A%84%E8%BF%AD%E4%BB%A3%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E4%BC%9A%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E5%88%87%E6%8D%A2%EF%BC%8C%E5%85%B8%E5%9E%8B%E5%A6%82%E4%BB%8Ezookeeper%E8%BF%81%E7%A7%BB%E5%88%B0nacos%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%9C%80%E8%BF%91%E9%9D%A2%E8%AF%95%E4%B8%AD%EF%BC%8C%E7%BB%8F%E5%B8%B8%E4%BC%9A%E7%94%A8%E8%AF%A5%E5%9C%BA%E6%99%AF%E6%9D%A5%E8%80%83%E5%AF%9F%E5%80%99%E9%80%89%E4%BA%BA%EF%BC%88%E6%B6%89%E5%8F%8ARPC%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E3%80%81%E5%9C%BA%E6%99%AF%E4%B9%9F%E8%B6%B3%E5%A4%9F%E5%BC%80%E6%94%BE%EF%BC%89%EF%BC%8C%E7%BB%93%E6%9E%9C%E8%83%BD%E5%AE%8C%E6%95%B4%E6%8F%8F%E8%BF%B0%E5%87%BA%E6%9D%A5%E7%9A%84%E4%BA%BA%E5%AF%A5%E5%AF%A5%E6%97%A0%E5%87%A0%EF%BC%8C%E4%BA%8E%E6%98%AF%E6%95%B4%E7%90%86%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0%E5%88%86%E4%BA%AB%E4%B8%8B%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E9%81%87%E5%88%B0%E8%BF%99%E7%B1%BB%E5%9C%BA%E6%99%AF%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E6%80%9D%E8%80%83%22%2C%22bold%22%3Atrue%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E9%A6%96%E5%85%88%E8%A6%81%E5%85%88%E5%BC%84%E6%B8%85%E6%A5%9A%E8%BF%99%E9%81%93%E9%A2%98%E8%A6%81%E8%80%83%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E6%8D%8B%E6%B8%85%E6%A5%9A%E6%80%9D%E8%B7%AF%E3%80%82%E5%8F%AF%E4%BB%A5%E4%BB%8E%E5%87%A0%E4%B8%AA%E8%A7%92%E5%BA%A6%E6%9D%A5%E6%80%9D%E8%80%83%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22order%22%2C%22lineOptions%22%3A%7B%22level%22%3A1%2C%22start%22%3A%221%22%2C%22ol-id%22%3A%22IoFwiPPH%22%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%90%9E%E6%B8%85%E6%A5%9ADubbo%E6%98%AF%E4%BB%80%E4%B9%88%E3%80%82%E5%AE%83%E6%98%AFRPC%20%E6%9C%8D%E5%8A%A1%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%A7%A3%E5%86%B3%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E4%B8%8B%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E9%80%9A%E4%BF%A1%E9%97%AE%E9%A2%98%E3%80%82%E5%A4%A7%E9%83%A8%E5%88%86%E4%BA%BA%E9%83%BD%E8%83%BD%E7%AD%94%E5%87%BA%E6%9D%A5%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22order%22%2C%22lineOptions%22%3A%7B%22level%22%3A1%2C%22start%22%3A%222%22%2C%22ol-id%22%3A%22IoFwiPPH%22%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%90%9E%E6%B8%85%E6%A5%9ARPC%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%AE%83%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A1%86%E6%9E%B6%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84%E3%80%82%E5%BA%94%E7%86%9F%E7%BB%83%E6%8E%8C%E6%8F%A1%E5%85%B6%E6%A0%B8%E5%BF%83%E7%9A%84%E6%9E%B6%E6%9E%84%EF%BC%88%E5%A6%82%E4%B8%8B%E5%9B%BE%EF%BC%8C%E7%94%9A%E8%87%B3%E9%83%BD%E6%B2%A1%E6%8A%8A%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6%E7%94%BB%E5%87%BA%E6%9D%A5%EF%BC%89%EF%BC%8C%E7%BB%9D%E5%A4%A7%E5%A4%9A%E6%95%B0%E4%BA%BA%E4%B9%9F%E8%83%BD%E7%AD%94%E4%B8%8A%E6%9D%A5%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DNWE3YzMxZDI5ZDBmZDMzODI2ZDI0MWI4MmI4YTE3MGZfNVprMjhwMTZvb0Rxdm9MSUJ5SmJNSmJ0TmgxSDFVSUNfVG9rZW46Ym94azRHQnJCdjdZOEVralpoVThIQ1JPWDFmXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4GBrBv7Y8EkjZhU8HCROX1f%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A624%2C%22height%22%3A257%2C%22size%22%3A252156%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%89%8D%E6%98%AF%E8%80%83%E8%99%91%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E8%BF%81%E7%A7%BB%E3%80%82%E5%8F%AF%E9%87%8D%E7%82%B9%E4%BB%8E%E4%B8%9A%E5%8A%A1%E8%A7%92%E5%BA%A6%E8%80%83%E8%99%91%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22bullet%22%2C%22lineOptions%22%3A%7B%22level%22%3A1%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E8%BF%81%E7%A7%BB%E8%BF%87%E7%A8%8B%E4%B8%AD%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E5%81%9C%E6%9C%BA%EF%BC%9F%E4%B9%9F%E5%8D%B3%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%8F%AF%E7%94%A8%E6%80%A7%E8%A6%81%E6%B1%82%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84%E3%80%82%22%2C%22textcolor%22%3A%22rgb(216%2C57%2C49)%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22bullet%22%2C%22lineOptions%22%3A%7B%22level%22%3A1%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%9C%8D%E5%8A%A1%E4%BD%93%E9%87%8F%E6%9C%89%E5%A4%9A%E5%A4%A7%EF%BC%9F%E6%AF%94%E5%A6%82%E6%8F%90%E4%BE%9B%E8%80%85%E5%92%8C%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E7%9A%84%E6%95%B0%E9%87%8F%E5%88%86%E5%88%AB%E6%9C%89%E5%A4%9A%E5%B0%91%EF%BC%8C%E6%98%AF%E5%90%A6%E9%9C%80%E8%A6%81%E5%88%86%E6%89%B9%E8%BF%81%E7%A7%BB%E3%80%82%22%2C%22textcolor%22%3A%22rgb(216%2C57%2C49)%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22bullet%22%2C%22lineOptions%22%3A%7B%22level%22%3A1%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%98%AF%E5%90%A6%E6%9C%89%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E4%BE%9D%E8%B5%96%EF%BC%9F%E8%8B%A5%E6%9C%89%EF%BC%8C%E7%AC%AC%E4%B8%89%E6%96%B9%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E6%94%AF%E6%8C%81%E6%96%B0%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%8C%E8%8B%A5%E4%B8%8D%E8%83%BD%EF%BC%8C%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F%22%2C%22textcolor%22%3A%22rgb(216%2C57%2C49)%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E4%BB%A5%E4%B8%8A%E7%96%91%E9%97%AE%EF%BC%8C%E6%9C%80%E5%A5%BD%E5%9C%A8%E5%9B%9E%E7%AD%94%E5%89%8D%E5%85%88%E7%A1%AE%E8%AE%A4%E6%B8%85%E6%A5%9A%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E4%B8%9A%E5%8A%A1%E8%83%8C%E6%99%AF%E4%B8%8B%EF%BC%8C%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8F%AF%E8%83%BD%E5%A4%A7%E7%9B%B8%E5%BE%84%E5%BA%AD%E3%80%82%E5%AE%9E%E9%99%85%E9%9D%A2%E8%AF%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%8F%91%E7%8E%B0%E5%A4%A7%E5%AE%B6%E5%BE%88%E5%AE%B9%E6%98%93%E5%BF%BD%E7%95%A5%E8%BF%99%E4%B8%80%E7%82%B9%EF%BC%8C%E5%B0%A4%E5%85%B6%E8%A6%81%E6%B3%A8%E6%84%8F%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%8F%A6%E5%A4%96%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%83%BD%E5%A4%9F%E8%80%83%E8%99%91%E5%88%B0%E6%9B%B4%E7%BB%86%E8%8A%82%E7%9A%84%E6%8A%80%E6%9C%AF%E9%97%AE%E9%A2%98%EF%BC%8C%E6%AF%94%E5%A6%82%E2%80%9C%E6%96%B0%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%94%AF%E6%8C%81%E7%9A%84%E5%8D%8F%E8%AE%AE%E6%98%AF%E5%90%A6%E4%B8%80%E8%87%B4%E3%80%81%E5%85%83%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E6%98%AF%E5%90%A6%E4%B8%80%E8%87%B4%E3%80%81%E6%96%B0%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E5%AE%B9%E9%87%8F%E6%98%AF%E5%90%A6%E5%85%85%E8%B6%B3%E3%80%81%E5%A6%82%E4%BD%95%E5%81%9A%E7%9B%91%E6%8E%A7%E7%BB%B4%E6%8A%A4%E2%80%9D%E7%AD%89%E9%97%AE%E9%A2%98%EF%BC%8C%E5%88%99%E4%BC%9A%E6%9B%B4%E5%8A%A0%E4%BA%AE%E7%9C%BC%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E4%BB%8E%E4%B8%9A%E5%8A%A1%E8%A7%92%E5%BA%A6%E8%B0%88%E8%B0%88%E5%A6%82%E4%BD%95%E8%BF%81%E7%A7%BB%22%2C%22bold%22%3Atrue%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%A6%82%E6%9E%9C%E8%BF%81%E7%A7%BB%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%85%81%E8%AE%B8%E5%81%9C%E6%9C%BA%EF%BC%8C%E8%80%8C%E4%B8%94%E6%9C%8D%E5%8A%A1%E4%BD%93%E9%87%8F%E6%AF%94%E8%BE%83%E5%B0%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%80%83%E8%99%91%E2%80%9C%E4%B8%80%E6%8A%8A%E6%A2%AD%E2%80%9D%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%81%9C%E6%9C%BA%E6%9C%9F%E9%97%B4%E6%8A%8A%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%94%B9%E4%B8%BA%E6%96%B0%E7%9A%84%EF%BC%8C%E6%AF%94%E5%A6%82%E6%B8%B8%E6%88%8F%E8%A1%8C%E4%B8%9A%E4%B8%AD%E7%BB%8F%E5%B8%B8%E9%81%87%E5%88%B0%E7%9A%84%E5%81%9C%E6%9C%BA%E7%BB%B4%E6%8A%A4%E3%80%82%E5%A4%9A%E6%8F%90%E4%B8%80%E5%8F%A5%EF%BC%8C%E7%8E%B0%E5%9C%A8%E6%B8%B8%E6%88%8F%E8%A1%8C%E4%B8%9A%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%9F%BA%E6%9C%AC%E8%BD%AC%E7%A7%BB%E5%88%B0%E4%BA%86%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E6%9E%B6%E6%9E%84%E5%BE%80%E5%BE%80%E6%AF%94%E8%BE%83%E7%AE%80%E5%8D%95%EF%BC%8C%E5%B8%B8%E8%A7%81%E7%9A%84%E2%80%9C%E5%88%86%E5%8C%BA%E2%80%9D%E7%AD%89%E7%AD%96%E7%95%A5%E9%83%BD%E6%98%AF%E4%B8%BA%E4%BA%86%E9%99%8D%E4%BD%8E%E6%9E%B6%E6%9E%84%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E4%BD%86%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%85%81%E8%AE%B8%E5%81%9C%E6%9C%BA%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%9C%8D%E5%8A%A1%E4%BD%93%E9%87%8F%E6%AF%94%E8%BE%83%E5%A4%A7%EF%BC%8C%E9%82%A3%E5%B0%B1%E8%A6%81%E8%80%83%E8%99%91%E5%B9%B3%E6%BB%91%E8%BF%81%E7%A7%BB%E7%9A%84%E6%96%B9%E6%A1%88%E4%BA%86%EF%BC%8C%E4%BA%92%E8%81%94%E7%BD%91%E8%A1%8C%E4%B8%9A%E5%9F%BA%E6%9C%AC%E9%83%BD%E6%98%AF%E8%BF%99%E4%B8%80%E7%B1%BB%E3%80%82%E5%B8%B8%E7%94%A8%E4%B9%9F%E7%A8%B3%E5%A6%A5%E7%9A%84%E6%96%B9%E6%A1%88%E5%85%B6%E5%AE%9E%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%B0%B14%E4%B8%AA%E6%AD%A5%E9%AA%A4%EF%BC%88%E5%BB%BA%E8%AE%AE%E5%85%88%E6%80%9D%E8%80%83%E4%B8%80%E4%B8%8B%EF%BC%8C%E5%86%8D%E7%9C%8B%E7%AD%94%E6%A1%88%EF%BC%89%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%221.%20%E5%8F%8C%E6%B3%A8%E5%86%8C%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%90%8C%E6%97%B6%E6%B3%A8%E5%86%8C%E5%88%B0%E6%96%B0%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%89%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DN2EyNDNiODYyODMwMmVlYTIyYmViYTBkMTM0N2VhNjZfTzB0MWhXaWNJNlpWSXJjNDF2OUFDblFzaWlBNW9TUUlfVG9rZW46Ym94azRleDVlc2dEY3hjeU1qWHFmRGdOQnZ5XzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4ex5esgDcxcyMjXqfDgNBvy%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A557%2C%22height%22%3A364%2C%22size%22%3A337864%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%222.%20%E5%8F%8C%E6%B6%88%E8%B4%B9%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E5%90%8C%E6%97%B6%E6%8B%89%E5%8F%96%E6%96%B0%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%85%83%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%81%9A%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%B0%83%E7%94%A8%EF%BC%8C%E5%B8%B8%E7%94%A8RoundRobin%E8%BD%AE%E8%AF%A2%E7%AD%96%E7%95%A5%EF%BC%89%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DNmY4ZGU0MDc2NzdiOWEzYzgwODRhZWU4YWU5NzM3N2JfNzdpZVNwdVV0VXFmTnpFYnJxMW8wWkxsd0JSRGZwNHdfVG9rZW46Ym94azR0ZXM2bmJPcXQ5RHdDaGZrN3hWRWRkXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4tes6nbOqt9DwChfk7xVEdd%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A577%2C%22height%22%3A377%2C%22size%22%3A355419%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%223.%20%E5%8D%95%E6%B6%88%E8%B4%B9%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E4%B8%8D%E5%86%8D%E8%BF%9E%E6%8E%A5%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%8C%E4%BB%85%E4%BB%8E%E6%96%B0%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E5%85%83%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E5%8A%A0%E4%BB%A5%E8%B0%83%E7%94%A8%EF%BC%89%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DYTFmNzkwODFlYjIyOGM1NWVkN2Q1ODQ1MTRlODNjM2JfcVZTTEtwVzl2WVRobHlGRHI0MTRvSzRzQnE4NXRNdlJfVG9rZW46Ym94azRKUXo1YkN3S0ZvbmtZRW40ejlnRnNnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4JQz5bCwKFonkYEn4z9gFsg%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A593%2C%22height%22%3A387%2C%22size%22%3A358898%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%224.%20%E5%8D%95%E6%B3%A8%E5%86%8C%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E4%B8%8D%E5%86%8D%E5%90%91%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%B3%A8%E5%86%8C%E6%9C%8D%E5%8A%A1%E3%80%82%E5%9C%A8%E5%81%9A%E8%BF%99%E4%B8%80%E6%AD%A5%E5%89%8D%EF%BC%8C%E5%BF%85%E9%A1%BB%E7%A1%AE%E4%BF%9D%E6%97%A7%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E4%B8%AD%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85%E9%83%BD%E4%B8%8D%E5%AD%98%E5%9C%A8%E4%BA%86%EF%BC%89%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DMTQyNzQ2YzM2ZjM2NjI4NzUxY2Q0YWY1NzM2NWIyNWNfVk5yUHNKcElMekVlWVNPVGV3c3BpZWlmQUphN2F2UFVfVG9rZW46Ym94azRUNExjNVhOSEl1aEJpbWs4b2VhNlFnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4T4Lc5XNHIuhBimk8oea6Qg%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A609%2C%22height%22%3A398%2C%22size%22%3A361708%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E9%80%9A%E8%BF%87%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%BE%BF%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%8F%AF%E7%94%A8%E6%80%A7%E4%B8%8D%E5%8F%97%E5%BD%B1%E5%93%8D%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%E5%88%87%E6%8D%A2%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%88%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%B9%B3%E6%BB%91%E8%BF%81%E7%A7%BB%EF%BC%89%EF%BC%8C%E6%98%AF%E4%B8%8D%E6%98%AF%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%9F%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22unsupport%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%9C%80%E5%90%8E%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%98%E6%9C%89%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E4%BE%9D%E8%B5%96%EF%BC%8C%E4%B8%94%E5%AF%B9%E6%96%B9%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85%E4%B8%8D%E6%94%AF%E6%8C%81%E6%96%B0%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%8C%E9%82%A3%E4%B9%88%E8%BF%99%E4%B8%AA%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E8%A6%81%E7%BB%A7%E7%BB%AD%E4%BD%BF%E7%94%A8%E6%97%A7%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%88%E5%85%B6%E4%BB%96%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%8E%A7%E5%88%B6%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%96%B0%E7%9A%84%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%EF%BC%89%EF%BC%8C%E4%B8%80%E8%88%AC%E4%BC%9A%E5%9C%A8%E5%A4%A7%E5%9E%8B%E5%85%AC%E5%8F%B8%E4%B8%AD%E5%87%BA%E7%8E%B0%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E8%A6%81%E8%80%83%E8%99%91%E8%B7%A8%E5%9B%A2%E9%98%9F%E7%9A%84%E5%8D%8F%E4%BD%9C%E5%92%8C%E6%8E%A8%E5%8A%A8%E4%BA%86%E3%80%82%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E6%89%A9%E5%B1%95%E4%BF%A1%E6%81%AF%22%2C%22bold%22%3Atrue%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22Dubbo%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%A4%9A%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%A7%81https%3A%2F%2Fcn.dubbo.apache.org%2Fzh-cn%2Foverview%2Fmannual%2Fjava-sdk%2Freference-manual%2Fregistry%2Fmultiple-registry%2F%EF%BC%9A%22%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22image%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22image%22%2C%22options%22%3A%7B%22src%22%3A%22https%3A%2F%2Fxiaomi.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fasynccode%2F%3Fcode%3DMzQxNDBjOTM4NDVjMjgzNDg3ZTBmYjIyODJkNWEwMDZfMHJsaVNPM3lSaDBGYm16RmlIM0tGR2JHZ2FPZ2MxN3pfVG9rZW46Ym94azRZVE5KRE9xZWV5cUkwNDhqM2hneERnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA%22%2C%22token%22%3A%22boxk4YTNJDOqeeyqI048j3hgxDg%22%2C%22imageType%22%3A%22image%2Fpng%22%2C%22width%22%3A1080%2C%22height%22%3A536%2C%22size%22%3A291126%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%90%8E%E8%AE%B0%22%2C%22bold%22%3Atrue%7D%7D%5D%7D%2C%7B%22lineType%22%3A%22text%22%2C%22lineOptions%22%3A%7B%7D%2C%22lineContent%22%3A%5B%7B%22opType%22%3A%22text%22%2C%22options%22%3A%7B%22text%22%3A%22%E5%A5%BD%E7%9A%84%E6%9E%B6%E6%9E%84%E4%B8%80%E8%88%AC%E9%83%BD%E6%98%AF%E7%AE%80%E5%8D%95%E7%9A%84%EF%BC%8C%E5%A4%A7%E5%AE%B6%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%E5%8D%83%E4%B8%87%E4%B8%8D%E8%A6%81%E6%83%B3%E5%BE%97%E5%A4%AA%E5%A4%8D%E6%9D%82%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%8B%E5%AD%90%E7%9C%8B%E4%B8%8D%E6%98%8E%E7%99%BD%EF%BC%8C%E5%B0%B1%E9%A1%BA%E7%9D%80%E6%9C%80%E4%B8%BA%E6%9C%AC%E8%B4%A8%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%8D%8B%EF%BC%8C%E6%9C%80%E7%BB%88%E4%BC%9A%E8%B1%81%E7%84%B6%E5%BC%80%E6%9C%97%EF%BC%8C%E5%8F%91%E7%8E%B0%E2%80%9C%E4%B8%8D%E8%BF%87%E5%A6%82%E6%AD%A4%E2%80%9D%E8%80%8C%E5%B7%B2%E3%80%82%22%7D%7D%5D%7D%5D%2C%22businessKey%22%3A%22lark-doc%22%7D">&nbsp;</div>
<div data-zone-id="0" data-line-index="0">
<h2 class="heading-h2"><strong>写在前面</strong></h2>
</div>
<div data-zone-id="0" data-line-index="1">如题，这是一个真实存在的业务场景。在微服务体系的迭代过程中，会存在注册中心的切换，典型如从zookeeper迁移到nacos。</div>
<div data-zone-id="0" data-line-index="2">最近面试中，经常会用该场景来考察候选人（涉及RPC、分布式、场景也足够开放），结果能完整描述出来的人寥寥无几，于是整理一篇文章分享下。</div>
<div data-zone-id="0" data-line-index="3">
<h2 class="heading-h2"><strong>遇到这类场景应该如何思考</strong></h2>
</div>
<div data-zone-id="0" data-line-index="4">首先要先弄清楚这道题要考的是什么？捋清楚思路。可以从几个角度来思考：</div>
<ol start="1">
<li data-list="number1" data-ol-id="IoFwiPPH" data-start="1">搞清楚Dubbo是什么。它是RPC 服务开发框架，用于解决微服务架构下的服务治理与通信问题。大部分人都能答出来。</li>
<li data-list="number1" data-ol-id="IoFwiPPH" data-start="2">搞清楚RPC是什么，以及它的核心框架是怎样的。应熟练掌握其核心的架构（如下图，甚至都没把心跳机制画出来），绝大多数人也能答上来。</li>
</ol>
<div data-zone-id="0" data-line-index="7">
<div>
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;fa388339-d063-46fb-bb49-05bb63c27d1a&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4GBrBv7Y8EkjZhU8HCROX1f%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;height&quot;:&quot;257&quot;,&quot;width&quot;:&quot;624&quot;,&quot;currHeight&quot;:&quot;257&quot;,&quot;currWidth&quot;:&quot;624&quot;,&quot;natrualHeight&quot;:&quot;441&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:252156,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:2.4489795918367347,&quot;file_token&quot;:&quot;boxk4GBrBv7Y8EkjZhU8HCROX1f&quot;}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=NWE3YzMxZDI5ZDBmZDMzODI2ZDI0MWI4MmI4YTE3MGZfNVprMjhwMTZvb0Rxdm9MSUJ5SmJNSmJ0TmgxSDFVSUNfVG9rZW46Ym94azRHQnJCdjdZOEVralpoVThIQ1JPWDFmXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4GBrBv7Y8EkjZhU8HCROX1f/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNEdCckJ2N1k4RWtqWmhVOEhDUk9YMWYiLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0R0JyQnY3WThFa2paaFU4SENST1gxZi8/cHJldmlld190eXBlPTE2In0=" data-height="257" data-width="624"></div>
</div>
</div>
<div data-zone-id="0" data-line-index="8">接下来才是考虑注册中心的迁移。可重点从业务角度考虑：</div>
<ul>
<li data-list="bullet1" data-start="1">迁移过程中是否可以停机？也即服务的可用性要求是怎样的。</li>
<li data-list="bullet1" data-start="1">服务体量有多大？比如提供者和服务消费者的数量分别有多少，是否需要分批迁移。</li>
<li data-list="bullet1" data-start="1">是否有第三方服务依赖？若有，第三方是否可以支持新的注册中心，若不能，应该怎么办？</li>
</ul>
<div data-zone-id="0" data-line-index="12">以上疑问，最好在回答前先确认清楚，因为在不同的业务背景下，技术方案的设计可能大相径庭。实际面试过程中发现大家很容易忽略这一点，尤其要注意。</div>
<div data-zone-id="0" data-line-index="13">另外，如果能够考虑到更细节的技术问题，比如“新旧注册中心支持的协议是否一致、元数据格式是否一致、新注册中心的容量是否充足、如何做监控维护”等问题，则会更加亮眼。</div>
<div data-zone-id="0" data-line-index="14">
<h2 class="heading-h2"><strong>从业务角度谈谈如何迁移</strong></h2>
</div>
<div data-zone-id="0" data-line-index="15">如果迁移过程中允许停机，而且服务体量比较小，可以考虑“一把梭”，直接在停机期间把所有服务提供者和消费者的注册中心改为新的，比如游戏行业中经常遇到的停机维护。多提一句，现在游戏行业的复杂度基本转移到了客户端，服务端的架构往往比较简单，常见的“分区”等策略都是为了降低架构的复杂度。</div>
<div data-zone-id="0" data-line-index="16">但如果不允许停机，并且服务体量比较大，那就要考虑平滑迁移的方案了，互联网行业基本都是这一类。常用也稳妥的方案其实很简单，就4个步骤（建议先思考一下，再看答案）：</div>
<div data-zone-id="0" data-line-index="17">&nbsp;</div>
<div data-zone-id="0" data-line-index="18">1. 双注册（服务提供者同时注册到新旧注册中心）：</div>
<div data-zone-id="0" data-line-index="19">
<div>
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;85d50b6b-5073-4984-901d-abf59bd400ce&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4ex5esgDcxcyMjXqfDgNBvy%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;height&quot;:&quot;364&quot;,&quot;width&quot;:&quot;557&quot;,&quot;currHeight&quot;:&quot;364&quot;,&quot;currWidth&quot;:&quot;557&quot;,&quot;natrualHeight&quot;:&quot;703&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:337864,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:1.5362731152204836,&quot;file_token&quot;:&quot;boxk4ex5esgDcxcyMjXqfDgNBvy&quot;}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=N2EyNDNiODYyODMwMmVlYTIyYmViYTBkMTM0N2VhNjZfTzB0MWhXaWNJNlpWSXJjNDF2OUFDblFzaWlBNW9TUUlfVG9rZW46Ym94azRleDVlc2dEY3hjeU1qWHFmRGdOQnZ5XzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4ex5esgDcxcyMjXqfDgNBvy/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNGV4NWVzZ0RjeGN5TWpYcWZEZ05CdnkiLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0ZXg1ZXNnRGN4Y3lNalhxZkRnTkJ2eS8/cHJldmlld190eXBlPTE2In0=" data-height="364" data-width="557"></div>
</div>
</div>
<div data-zone-id="0" data-line-index="20">&nbsp;</div>
<div data-zone-id="0" data-line-index="21">2. 双消费（服务消费者同时拉取新旧注册中心的服务提供者元数据，做负载均衡调用，常用RoundRobin轮询策略）：</div>
<div data-zone-id="0" data-line-index="22">
<div>
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;b551fe03-a77b-4179-944b-b535a8e6fb63&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4tes6nbOqt9DwChfk7xVEdd%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;height&quot;:&quot;377&quot;,&quot;width&quot;:&quot;577&quot;,&quot;currHeight&quot;:&quot;377&quot;,&quot;currWidth&quot;:&quot;577&quot;,&quot;natrualHeight&quot;:&quot;703&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:355419,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:1.5362731152204836,&quot;file_token&quot;:&quot;boxk4tes6nbOqt9DwChfk7xVEdd&quot;}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=NmY4ZGU0MDc2NzdiOWEzYzgwODRhZWU4YWU5NzM3N2JfNzdpZVNwdVV0VXFmTnpFYnJxMW8wWkxsd0JSRGZwNHdfVG9rZW46Ym94azR0ZXM2bmJPcXQ5RHdDaGZrN3hWRWRkXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4tes6nbOqt9DwChfk7xVEdd/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNHRlczZuYk9xdDlEd0NoZms3eFZFZGQiLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0dGVzNm5iT3F0OUR3Q2hmazd4VkVkZC8/cHJldmlld190eXBlPTE2In0=" data-height="377" data-width="577"></div>
</div>
</div>
<div data-zone-id="0" data-line-index="23">&nbsp;</div>
<div data-zone-id="0" data-line-index="24">3. 单消费（服务消费者不再连接旧注册中心，仅从新注册中心获取服务提供者元数据，并加以调用）</div>
<div data-zone-id="0" data-line-index="25">
<div>
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;06809761-14c5-4216-bf98-b1892f601c96&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4JQz5bCwKFonkYEn4z9gFsg%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;height&quot;:&quot;387&quot;,&quot;width&quot;:&quot;593&quot;,&quot;currHeight&quot;:&quot;387&quot;,&quot;currWidth&quot;:&quot;593&quot;,&quot;natrualHeight&quot;:&quot;703&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:358898,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:1.5362731152204836,&quot;file_token&quot;:&quot;boxk4JQz5bCwKFonkYEn4z9gFsg&quot;}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=YTFmNzkwODFlYjIyOGM1NWVkN2Q1ODQ1MTRlODNjM2JfcVZTTEtwVzl2WVRobHlGRHI0MTRvSzRzQnE4NXRNdlJfVG9rZW46Ym94azRKUXo1YkN3S0ZvbmtZRW40ejlnRnNnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4JQz5bCwKFonkYEn4z9gFsg/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNEpRejViQ3dLRm9ua1lFbjR6OWdGc2ciLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0SlF6NWJDd0tGb25rWUVuNHo5Z0ZzZy8/cHJldmlld190eXBlPTE2In0=" data-height="387" data-width="593"></div>
</div>
</div>
<div data-zone-id="0" data-line-index="26">&nbsp;</div>
<div data-zone-id="0" data-line-index="27">4. 单注册（服务提供者不再向旧注册中心注册服务。在做这一步前，必须确保旧注册中心中的服务消费者都不存在了）</div>
<div data-zone-id="0" data-line-index="28">
<div>
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;ce84a83c-9642-49b6-9434-e0130083b353&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4T4Lc5XNHIuhBimk8oea6Qg%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;height&quot;:&quot;398&quot;,&quot;width&quot;:&quot;609&quot;,&quot;currHeight&quot;:&quot;398&quot;,&quot;currWidth&quot;:&quot;609&quot;,&quot;natrualHeight&quot;:&quot;703&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:361708,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:1.5362731152204836,&quot;file_token&quot;:&quot;boxk4T4Lc5XNHIuhBimk8oea6Qg&quot;}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=MTQyNzQ2YzM2ZjM2NjI4NzUxY2Q0YWY1NzM2NWIyNWNfVk5yUHNKcElMekVlWVNPVGV3c3BpZWlmQUphN2F2UFVfVG9rZW46Ym94azRUNExjNVhOSEl1aEJpbWs4b2VhNlFnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4T4Lc5XNHIuhBimk8oea6Qg/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNFQ0TGM1WE5ISXVoQmltazhvZWE2UWciLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0VDRMYzVYTkhJdWhCaW1rOG9lYTZRZy8/cHJldmlld190eXBlPTE2In0=" data-height="398" data-width="609"></div>
</div>
</div>
<div data-zone-id="0" data-line-index="29">&nbsp;</div>
<div data-zone-id="0" data-line-index="30">通过这种方式，便可以在服务可用性不受影响的前提下切换注册中心（也就是平滑迁移），是不是很简单？</div>
<div data-zone-id="0" data-line-index="31">
<div class="callout-container" data-emoji-id="pushpin">
<div class="callout-block">
<div data-zone-id="mm0xjtnrl0" data-line-index="0">还有很多其他的方案，比如nacos-sync方案，其实本质也是类似的，不同的地方在于新旧注册中心本身做了元信息的同步，业务操作的负担更小些，这种方式在基础建设成熟的互联网企业中更为常用。</div>
</div>
</div>
</div>
<div data-zone-id="0" data-line-index="32">最后，如果还有第三方服务依赖，且对方的服务提供者不支持新注册中心，那么这个第三方服务要继续使用旧的注册中心（其他我们可以控制的服务，使用新的注册中心），一般会在大型公司中出现，这种情况下要考虑跨团队的协作和推动了。</div>
<div data-zone-id="0" data-line-index="33">
<h2 class="heading-h2"><strong>扩展信息</strong></h2>
</div>
<div data-zone-id="0" data-line-index="34">Dubbo服务的多注册中心配置方式，可以参见https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/registry/multiple-registry/：</div>
<div data-zone-id="0" data-line-index="35">
<div class="image-uploaded gallery" data-ace-gallery-json="{&quot;items&quot;:[{&quot;uuid&quot;:&quot;631f82e4-96fb-4544-9db1-0bb7d745b36f&quot;,&quot;height&quot;:&quot;536&quot;,&quot;width&quot;:&quot;1080&quot;,&quot;currHeight&quot;:&quot;536&quot;,&quot;currWidth&quot;:&quot;1080&quot;,&quot;natrualHeight&quot;:&quot;536&quot;,&quot;natrualWidth&quot;:&quot;1080&quot;,&quot;file_token&quot;:&quot;boxk4YTNJDOqeeyqI048j3hgxDg&quot;,&quot;src&quot;:&quot;https%3A%2F%2Finternal-api-drive-stream.f.mioffice.cn%2Fspace%2Fapi%2Fbox%2Fstream%2Fdownload%2Fpreview%2Fboxk4YTNJDOqeeyqI048j3hgxDg%2F%3Fpreview_type%3D16%26type%3Dimage&quot;,&quot;image_type&quot;:&quot;image/png&quot;,&quot;size&quot;:291126,&quot;comments&quot;:[],&quot;pluginName&quot;:&quot;imageUpload&quot;,&quot;scale&quot;:2.014925373134328}]}"><img src="https://xiaomi.f.mioffice.cn/space/api/box/stream/download/asynccode/?code=MzQxNDBjOTM4NDVjMjgzNDg3ZTBmYjIyODJkNWEwMDZfMHJsaVNPM3lSaDBGYm16RmlIM0tGR2JHZ2FPZ2MxN3pfVG9rZW46Ym94azRZVE5KRE9xZWV5cUkwNDhqM2hneERnXzE3NDU5MDYzNjA6MTc0NTkwOTk2MF9WNA" data-src="https://internal-api-drive-stream.f.mioffice.cn/space/api/box/stream/download/preview/boxk4YTNJDOqeeyqI048j3hgxDg/?preview_type=16" data-suite="eyJmaWxlVG9rZW4iOiJib3hrNFlUTkpET3FlZXlxSTA0OGozaGd4RGciLCJvYmpUeXBlIjoiZG9jIiwib2JqVG9rZW4iOiJkb2NrNDN5WDZGa1pYTWlpRTlWUjNteWs4TmMiLCJvcmlnaW5TcmMiOiJodHRwczovL2ludGVybmFsLWFwaS1kcml2ZS1zdHJlYW0uZi5taW9mZmljZS5jbi9zcGFjZS9hcGkvYm94L3N0cmVhbS9kb3dubG9hZC9wcmV2aWV3L2JveGs0WVROSkRPcWVleXFJMDQ4ajNoZ3hEZy8/cHJldmlld190eXBlPTE2In0=" data-height="536" data-width="1080"></div>
</div>
<div data-zone-id="0" data-line-index="36">
<h2 class="heading-h2"><strong>后记</strong></h2>
</div>
<div data-zone-id="0" data-line-index="37">好的架构一般都是简单的，大家遇到问题千万不要想得太复杂。如果一下子看不明白，就顺着最为本质的原理一步步捋，最终会豁然开朗，发现“不过如此”而已。</div>
</div>
<div id="MySignature" role="contentinfo">
    『注:本文来自博客园“小溪的博客”，若非声明均为原创内容，请勿用于商业用途，转载请注明出处http://www.cnblogs.com/xiaoxi666/』
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.1731812784664352" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-29 14:09">2025-04-29 14:00</span>&nbsp;
<a href="https://www.cnblogs.com/xiaoxi666">xiaoxi666</a>&nbsp;
阅读(<span id="post_view_count">24</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18853568);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18853568', targetLink: 'https://www.cnblogs.com/xiaoxi666/p/18853568', title: 'Dubbo实战：四步实现注册中心平滑迁移' })">举报</a>
</div>
        
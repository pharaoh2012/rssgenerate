
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/cj8988/p/18985677" title="发布于 2025-07-15 15:28">
    <span role="heading" aria-level="2">音频克隆：对话文本到口语对话生成MOSS-TTSD</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div>
<pre><span style="font-size: 16px"><br>之前介绍过几个音频克隆的可以项目：<br></span><br><strong><span style="font-size: 18px">CosyVoice：<a href="https://www.cnblogs.com/cj8988/p/18975495" target="_blank">https://www.cnblogs.com/cj8988/p/18975495</a></span></strong><br><strong><span style="font-size: 18px">IndexTTS：<a href="https://www.cnblogs.com/cj8988/p/18973016" target="_blank">https://www.cnblogs.com/cj8988/p/18973016</a></span></strong><br><strong><span style="font-size: 18px">GPT-SoVITS：<a href="https://www.cnblogs.com/cj8988/p/18962212" target="_blank">https://www.cnblogs.com/cj8988/p/18962212</a><br>IndexTTs-多人：<a href="https://www.cnblogs.com/cj8988/p/18973609" target="_blank">https://www.cnblogs.com/cj8988/p/18973609</a></span></strong><br><br><br><strong><span style="font-size: 16px">本章在介绍一个多人对话的(两人对话)开源项目(8GPU可以跑)：MOSS-TTSD</span></strong><br><br><span style="font-size: 18px"><strong>亮点：<br></strong></span><br><span style="font-size: 16px"><strong>高度富有表现力的对话语音</strong>：MOSS-TTSD 基于统一的语义声学神经音频编解码器、预先训练的大型语言模型、数百万小时的 TTS 数据以及 40 万小时的合成和真实对话语音，可生成具有自然对话韵律的高度富有表现力、类似人类的对话语音。</span><br><span style="font-size: 16px"><strong>双人语音克隆</strong>：MOSS-TTSD 支持零样本双人语音克隆，并可根据对话脚本生成具有准确说话人切换的对话语音。</span><br><span style="font-size: 16px"><strong>中英双语支持</strong>：MOSS-TTSD 能够以中文和英文生成极具表现力的语音。</span><br><span style="font-size: 16px"><strong>长篇语音生成</strong>：得益于低比特率编解码器和训练框架的优化，MOSS-TTSD 已经可以进行长篇语音生成的训练。</span><br><span style="font-size: 16px"><strong>完全开源和商业就绪</strong>：MOSS-TTSD 及其未来更新将完全开源并支持免费商业使用。<br></span><br><strong><span style="font-size: 18px">下载安装：<br></span></strong><br><span style="font-size: 16px">开源地址：<a href="https://github.com/OpenMOSS/MOSS-TTSD" target="_blank" rel="noopener nofollow">https://github.com/OpenMOSS/MOSS-TTSD</a></span><br><br><span style="font-size: 16px">模型下载：<a href="https://huggingface.co/fnlp/XY_Tokenizer_TTSD_V0/tree/main" target="_blank" rel="noopener nofollow">https://huggingface.co/fnlp/XY_Tokenizer_TTSD_V0/tree/main</a></span><br><span style="font-size: 16px">模型存放位置在现在的文件夹下:<strong>MOSS-TTSD\XY_Tokenizer\weights\<br><br></strong>官方文档：<a href="https://www.open-moss.com/cn/moss-ttsd/" target="_blank" rel="noopener nofollow">https://www.open-moss.com/cn/moss-ttsd/</a><strong><br><br></strong></span></pre>
<p><img alt="" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250715152011568-854641905.png" class="lazyload"></p>
<p>&nbsp;</p>
<pre><span style="font-size: 16px">安装：</span><br><span style="font-size: 16px">进入window的虚拟环境conda中：</span><br><br></pre>
<div class="cnblogs_code">
<pre><span style="color: rgba(0, 0, 0, 1)">创建环境：
conda create </span>-n moss_ttsd python=3.10<span style="color: rgba(0, 0, 0, 1)">

激活环境：
conda activate moss_ttsd

安装：
pip install </span>-<span style="color: rgba(0, 0, 0, 1)">r requirements.txt

加速：这个先使用下面的命名安装，如果成功那就皆大欢喜
</span><span style="color: rgba(0, 128, 0, 1)">#</span><span style="color: rgba(0, 128, 0, 1)">pip install flash-attn</span></pre>
</div>
<pre><br><span style="text-decoration: underline"><strong><span style="font-size: 16px">如果flash-attn安装失败，就不用折腾了，我用了很多方法好像都没有成功，所以修改代码，不使用flash-attn。<br></span></strong></span><br><strong><span style="font-size: 16px">修改generation_utils.py：找到load_model()函数</span></strong><br><strong><span style="font-size: 16px">将参数默认值修改一下 attn_implementation="flash_attention_2"</span></strong><br><strong><span style="font-size: 16px">修改为attn_implementation="sdpa"</span></strong><br><br><br></pre>
<div class="cnblogs_code">
<pre>运行：python gradio_demo.py</pre>
</div>
<pre><br><span style="font-size: 16px">第一次运行时会下载模型：fnlp/MOSS-TTSD-v0.5，需要很长的时间。<br></span></pre>
<p><img alt="" width="1221" height="199" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250715152108789-1152004819.png" class="lazyload"></p>
<p>&nbsp;</p>
<pre><span style="font-size: 16px">下载完成后，浏览器访问：http://127.0.0.1:7860/</span><br><br><span style="font-size: 16px">注意，我试过Single单音频支持不太好(我的音频只有一个人说话，估计两个人说话还是可以的)，所以这里直接使用两个音频进行实验。</span></pre>
<p><img alt="" width="1230" height="715" loading="lazy" data-src="https://img2024.cnblogs.com/blog/692485/202507/692485-20250715152128299-843975247.png" class="lazyload"></p>
<p>&nbsp;</p>
<pre><span style="font-size: 16px">结果：</span></pre>
<table border="0">
<tbody>
<tr>
<td>音频1</td>
<td>音频2</td>
<td>合成音频</td>
</tr>
<tr>
<td><audio width="300" height="32" controls="controls"><source src="https://cdnhandler.fgonestudio.net/audios/mode_1.wav" type="audio/wav"> 你的浏览器不支持 audio 标签。 </audio></td>
<td><audio width="300" height="32" controls="controls"><source src="https://cdnhandler.fgonestudio.net/audios/mode_2.wav" type="audio/wav"> 你的浏览器不支持 audio 标签。 </audio></td>
<td><audio width="300" height="32" controls="controls"><source src="https://cdnhandler.fgonestudio.net/audios/moss_ttsd_3.wav" type="audio/wav"> 你的浏览器不支持 audio 标签。 </audio></td>
</tr>
</tbody>
</table>
<pre><br><br></pre>
</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.19722222222222222" data-date-updated="2025-07-15 20:12">2025-07-15 15:28</span>&nbsp;
<a href="https://www.cnblogs.com/cj8988">Joy_CShow</a>&nbsp;
阅读(<span id="post_view_count">148</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18985677);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18985677', targetLink: 'https://www.cnblogs.com/cj8988/p/18985677', title: '音频克隆：对话文本到口语对话生成MOSS-TTSD' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jellyai/p/18780563" title="发布于 2025-03-19 10:38">
    <span role="heading" aria-level="2">如何通过 MCP 将你的 Supabase 数据库连接到 Cursor</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103652384-163123225.webp" alt="" loading="lazy"></p>
<p>Cursor + MCP + Supabase. 图片来自作者</p>
<p>在过去几周里，MCP（Model Context Protocol，模型上下文协议）在许多 AI 相关的在线社区和论坛里大火。开发者和技术人员都在热议这个东西，但说实话，包括我自己在内，很多人都对 MCP 究竟是什么、它能做什么以及为什么我们应该关心它感到困惑。</p>
<p>为了弄清楚这个问题，我花了一些时间研究，并整理了一个真实案例，来展示 MCP 在构建 AI 工具驱动的 Web 应用时到底有多大影响力。具体来说，我会演示 MCP 如何让你轻松地将 Supabase 数据库直接连接到 Cursor IDE。</p>
<p>设置完成后，Cursor 代理就能自动访问你的 Supabase 数据库。这意味着你每次与 AI 助手交互时，不需要手动提供数据库上下文。这对使用 Cursor 和 Supabase 构建全栈 Web 应用的开发者来说，简直是个巨大的优势。</p>
<p>在正式进入教程之前，先让我简单介绍一下 MCP 是什么。</p>
<p>什么是 MCP？</p>
<p>模型上下文协议（MCP）本质上是一种标准方式，允许 AI 代理安全地访问外部数据源或上下文，而不需要每次都编写复杂的自定义代码。可以把 MCP 想象成一个万能适配器：你只需要设置一次，它就能让 AI 驱动的工具连接到几乎任何外部数据库或资源。</p>
<p>如果你曾尝试让 LLM（大语言模型）在现实世界中发挥作用，你可能会很快遇到一个大问题：几乎所有有用的服务，比如 Slack、GitHub，甚至是本地文件系统，都有自己独特的 API。这意味着你需要编写大量的自定义代码，让 LLM 单独适配每个 API。想要添加一个新工具？又得写一堆额外的代码。这很快就会变成一场噩梦。</p>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103701182-789548857.webp" alt="" loading="lazy"></p>
<p>[MCP 结构示意图](Image from Matt Pocock)</p>
<p>MCP 作为 LLM 和所有这些 API 之间的一个中间层。与其为每个工具单独编写自定义代码，MCP 允许你定义一组 LLM 可以调用的“工具”。</p>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103707525-123674936.webp" alt="" loading="lazy"></p>
<p>[MCP 运行示意图](Image from Matt Pocock)</p>
<p>你可以选择将 MCP 服务器远程托管，或者在本地运行。无论哪种方式，你的 LLM 只需要直接连接到 MCP 服务器，并调用它提供的工具即可。MCP 服务器会处理 API 调用，让交互变得无缝衔接。</p>
<p>现在，让我们从理论转向实践，尝试使用 MCP 将你的 Supabase 数据库连接到 Cursor。</p>
<p>如何在 Cursor 添加 MCP 服务器</p>
<ol>
<li>进入 Cursor 设置页面，在 MCP 选项卡下，点击“Add new MCP Server”（添加新 MCP 服务器）按钮。</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103730183-2093970609.webp" alt="" loading="lazy"></p>
<p>[Cursor MCP 服务器添加界面](Screenshot of Cursor IDE using MCP. Image by author)</p>
<ol start="2">
<li>给你的 MCP 服务器起个名字，比如“Supabase database”，然后将类型（Type）设置为 command。</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103736657-1645270513.webp" alt="" loading="lazy"></p>
<p>[Cursor MCP 服务器命名](Screenshot of Cursor IDE using MCP. Image by author)</p>
<ol start="3">
<li>在“Command”栏粘贴以下 CLI 命令：</li>
</ol>
<p>npx -y @modelcontextprotocol/server-postgres <connection-string></connection-string></p>
<p>你可以在 Supabase 项目中获取 connection-string，方法是点击控制面板顶部的“Connect”按钮。</p>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103743685-1514016488.webp" alt="" loading="lazy"></p>
<p>[Supabase 项目设置](Image of Supabase project settings. Image by author)</p>
<ol start="4">
<li>在“Connection String”选项卡下，你会看到“Direct Connection URI”。复制它并粘贴到 MCP 命令的“Connection String”部分。</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103754488-2070984809.webp" alt="" loading="lazy"></p>
<p>[Supabase 连接 URI](Screenshot of Supabase connection string. Image by author)</p>
<p>注意：URI 里有一个 YOUR-PASSWORD 部分，作为参数。你需要把它替换为你的实际数据库密码。你可以在 Project Settings &gt; Configuration &gt; Database &gt; Database password 里找到数据库密码。</p>
<ol start="5">
<li>你的 MCP 服务器参数应该像这样：</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103759658-1208538712.webp" alt="" loading="lazy"></p>
<p>[Cursor MCP 服务器参数](Screenshot of Cursor IDE using MCP. Image by author)</p>
<ol start="6">
<li>确认无误后，点击“Add”按钮。你会在 MCP 服务器旁边看到一个状态指示器，一旦它变成绿色，就说明一切正常！</li>
</ol>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103806281-652137687.webp" alt="" loading="lazy"></p>
<p>[Cursor MCP 服务器状态指示](Screenshot of Cursor IDE using MCP. Image by author)</p>
<p>MCP 连接故障排除</p>
<p>如果连接没有立即成功，可以检查以下常见问题：</p>
<ol>
<li>MCP 服务器未激活？</li>
</ol>
<p>o 检查参数，确保连接字符串（connection string）里 没有 &lt;&gt; 标签，密码 也没有 [] 标签。</p>
<ol start="2">
<li>还是不行？</li>
</ol>
<p>o 你可能需要手动创建一个 mcp.json 文件，放在本地系统 .cursor 文件夹下。</p>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103816639-1459387938.webp" alt="" loading="lazy"></p>
<p>[mcp.json 文件示例](Image by author)</p>
<p>mcp.json 文件的内容如下：</p>
<p>{</p>
<p>"mcpServers": {</p>
<p>"supabase": {</p>
<p>"command": "npx",</p>
<p>"args": ["-y", "@modelcontextprotocol/server-postgres", "<connection-string>"]</connection-string></p>
<p>}</p>
<p>}</p>
<p>}</p>
<p>确保用正确的连接字符串替换 <connection-string>。完美！现在我们可以测试 MCP 服务器了。</connection-string></p>
<p>测试 Supabase MCP 服务器</p>
<p>要验证我们的 Supabase MCP 服务器是否正常运行，打开一个新的 Chat Agent，并运行以下提示：</p>
<p>Prompt（提示）：</p>
<p>tell me what tables have in my Supabase database</p>
<p><img src="https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250319103824429-1730747665.webp" alt="" loading="lazy"></p>
<p>![Cursor MCP 查询数据库](Screenshot of Cursor IDE using MCP. Image by author)</p>
<p>如果 MCP 服务器正常工作，Cursor 的 AI 代理就会从 Supabase 数据库中提取并显示表的列表。是不是很酷？</p>
<p>为什么 MCP 很重要？</p>
<p>MCP 受到关注的原因是，它简化了数据库（比如 Supabase）和 AI 开发环境（比如 Cursor）之间的集成。如果没有 MCP，每次你和 AI 代理交互时，都必须手动输入数据库上下文。</p>
<p>最近，我开发了我的第一个 Web 应用 LogoToAnything，在这个过程中，我用 MCP 让 Supabase 数据库连接到了 Cursor IDE。相信我，这省去了很多时间、算力消耗（token）和不必要的麻烦。</p>
<p>有了 MCP，AI 助手始终可以访问数据库上下文，这意味着：</p>
<p>✅ 更快的响应速度</p>
<p>✅ 更轻松的调试体验</p>
<p>✅ 更快速的开发周期</p>
<p>这也是为什么开发者们如此兴奋 —— MCP 让复杂的集成变得简单，让你可以专注于 构建，而不是 配置。</p>
<p>所以，赶快试试吧，享受更流畅、更智能的编码体验！ 🚀</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.31888499028703704" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-19 10:39">2025-03-19 10:38</span>&nbsp;
<a href="https://www.cnblogs.com/jellyai">果冻人工智能</a>&nbsp;
阅读(<span id="post_view_count">27</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18780563" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18780563);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18780563', targetLink: 'https://www.cnblogs.com/jellyai/p/18780563', title: '如何通过 MCP 将你的 Supabase 数据库连接到 Cursor' })">举报</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/mingupupu/p/18636610" title="å‘å¸ƒäº 2024-12-27 19:47">
    <span role="heading" aria-level="2">C#ä½¿ç”¨Tesseract C++ APIè¿‡ç¨‹è®°å½•</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="tesseract">Tesseract</h2>
<p>Tesseract æ˜¯ä¸€ä¸ªå¼€æºçš„å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰å¼•æ“ï¼Œæœ€åˆç”± Hewlett-Packardï¼ˆæƒ æ™®ï¼‰å®éªŒå®¤å¼€å‘ï¼Œåæ¥ç”± Google æ”¶è´­å¹¶ç»§ç»­ç»´æŠ¤å’Œå¼€æºè´¡çŒ®ã€‚Tesseract å¯ä»¥è¯†åˆ«å¤šç§è¯­è¨€çš„æ–‡å­—ï¼Œå¹¿æ³›åº”ç”¨äºå°†å›¾ç‰‡æˆ–æ‰«ææ–‡æ¡£ä¸­çš„æ–‡æœ¬å†…å®¹è½¬æ¢æˆå¯ç¼–è¾‘çš„æ–‡æœ¬æ ¼å¼ã€‚éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å‘å±•ï¼ŒTesseract ä¹Ÿæ•´åˆäº†åŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ OCR æ¨¡å‹ï¼Œæå‡å…¶è¯†åˆ«å‡†ç¡®ç‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚æ’ç‰ˆå’Œæ‰‹å†™ä½“çš„è¯†åˆ«æ•ˆæœæœ‰æ‰€æ”¹å–„ã€‚</p>
<p>Tesseract é€‚åˆå¼€å‘äººå‘˜å’Œç ”ç©¶äººå‘˜ä½¿ç”¨ï¼Œå¯ä»¥åµŒå…¥åˆ°å„ç§åº”ç”¨ä¸­ï¼Œæ¯”å¦‚æ–‡æ¡£æ•°å­—åŒ–ã€å›¾åƒå¤„ç†è½¯ä»¶ã€å†…å®¹ç®¡ç†ç³»ç»Ÿç­‰ã€‚å®ƒæ”¯æŒå‘½ä»¤è¡Œæ“ä½œï¼Œä¹Ÿæä¾›äº†ä¸°å¯Œçš„ API æ¥å£ï¼Œæ”¯æŒ C++ã€Pythonã€Javaã€Node.js ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä¾¿äºé›†æˆå’Œè°ƒç”¨ã€‚Tesseract çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ–‡æœ¬æ£€æµ‹ã€å­—ç¬¦è¯†åˆ«å’Œåå¤„ç†çº é”™ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§å›¾åƒè¾“å…¥æ ¼å¼ï¼Œè¾“å‡ºåŒ…æ‹¬çº¯æ–‡æœ¬ã€HOCRï¼ˆHTML + OCRï¼‰æ ¼å¼ã€PDF ç­‰å¤šç§æ ¼å¼ã€‚Tesseract çš„é«˜çµæ´»æ€§å’Œå¼ºå¤§çš„è¯†åˆ«èƒ½åŠ›ä½¿å…¶æˆä¸º OCR é¢†åŸŸä¸­éå¸¸å—æ¬¢è¿çš„å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>GitHubåœ°å€ï¼š<a href="https://github.com/tesseract-ocr/tesseract" target="_blank" rel="noopener nofollow">https://github.com/tesseract-ocr/tesseract</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729631-1101186648.png" alt="image-20241227152937200" loading="lazy"></p>
<p>Tesseractæä¾›äº†ä¸°å¯Œçš„ API æ¥å£ï¼Œæ”¯æŒ C++ã€Pythonã€Javaã€Node.js ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œæ²¡æœ‰C#çš„ï¼Œå®é™…ä¸Šå·²ç»æœ‰å¤§ä½¬åšäº†C#çš„å°è£…äº†ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œéœ€è¦åªæ˜¯ç®€å•ä½¿ç”¨ä¸€ä¸‹ï¼Œç”¨è¿™ä¸ªå¤§ä½¬çš„å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥ç§ç§ï¼š</p>
<p>é¡¹ç›®GitHubåœ°å€ï¼š<a href="https://github.com/charlesw/tesseract" target="_blank" rel="noopener nofollow">https://github.com/charlesw/tesseract</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729612-381087639.png" alt="image-20241227153302569" loading="lazy"></p>
<p>ç¤ºä¾‹GitHubåœ°å€ï¼š<a href="https://github.com/charlesw/tesseract-samples" target="_blank" rel="noopener nofollow">https://github.com/charlesw/tesseract-samples</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729643-1938570573.png" alt="image-20241227153437445" loading="lazy"></p>
<p>ä½†è¿™ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ï¼Œç°åœ¨è¿˜å¤„äºå­¦ä¹ é˜¶æ®µï¼Œèƒ½ç›´æ¥ä½¿ç”¨å¤§ä½¬çš„åº“ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœè‡ªå·±èƒ½å¤ŸçŸ¥é“å¤§ä½¬æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œé‚£ä¸æ˜¯ä¹Ÿå¾ˆé…·å—ï¼Ÿ</p>
<p>å®ç°çš„æ–¹å¼ä¸å¤§ä½¬é¡¹ç›®çš„æ–¹å¼æ˜¯ç±»ä¼¼çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729650-85923879.png" alt="image-20241227153822517" loading="lazy"></p>
<p>éœ€è¦ä¾èµ–leptonica-1.82.0.dllä¸tesseract50.dllï¼Œç„¶åé€šè¿‡DllImportå¯¼å…¥å…¶ä¸­çš„C++å‡½æ•°ã€‚</p>
<p>å·²ç»æœ‰ç°æˆçš„åº“äº†ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€ï¼Œé¡¹ç›®ä¸­å¯èƒ½åªéœ€è¦ç”¨åˆ°Tesseractçš„å‡ ä¸ªC++ APIè€Œå·²ï¼Œç›´æ¥å¼•ç”¨ä¸€å¤§å †ä¸œè¥¿æ²¡æœ‰å¿…è¦ã€‚ç¬¬äºŒï¼Œå­¦ä¹ é˜¶æ®µï¼Œä»¥è‡ªå·±å­¦ä¹ æŒæ¡æŠ€èƒ½ä¸ºä¸»ï¼Œè‡ªå·±å…ˆæŒæ¡äº†è¿™é¡¹æŠ€èƒ½ï¼Œç„¶åå·æ‡’äº†ç›´æ¥ä½¿ç”¨å¤§ä½¬çš„åº“ä¹Ÿä¸è¿Ÿã€‚</p>
<h2 id="windowsç¼–è¯‘tesseract">Windowsç¼–è¯‘Tesseract</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆåœ¨Windowsä¸Šç¼–è¯‘Tesseractï¼Œå®˜æ–¹æ–‡æ¡£æœ‰ä¸€äº›ä»‹ç»ï¼Œæ–‡æ¡£åœ°å€ï¼š<a href="https://tesseract-ocr.github.io/tessdoc/Compiling.html%E3%80%82" target="_blank" rel="noopener nofollow">https://tesseract-ocr.github.io/tessdoc/Compiling.htmlã€‚</a></p>
<p>æŸ¥çœ‹æ–‡æ¡£ä¹‹åï¼Œæˆ‘ä½¿ç”¨è¿™ç§æ–¹å¼ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729599-1717563373.png" alt="image-20241227154722530" loading="lazy"></p>
<p>å…ˆæ¥ç®€å•ä»‹ç»ä¸€ä¸‹vcpkgã€‚</p>
<p><strong>vcpkg</strong></p>
<p>vcpkgæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†C++åº“çš„è·¨å¹³å°åŒ…ç®¡ç†å·¥å…·ï¼Œç”±å¾®è½¯å¼€å‘å¹¶ç»´æŠ¤ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ç®€åŒ–ç¬¬ä¸‰æ–¹åº“çš„é›†æˆå’Œä½¿ç”¨è¿‡ç¨‹ã€‚vcpkgé€šè¿‡æä¾›é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶åŒ…å’Œæºä»£ç ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨Windowsã€Linuxå’ŒmacOSç­‰æ“ä½œç³»ç»Ÿä¸Šè½»æ¾å®‰è£…å’Œç®¡ç†C++åº“ã€‚å®ƒæ”¯æŒå¤šç§ç¼–è¯‘å™¨ï¼ŒåŒ…æ‹¬Visual Studioã€GCCå’ŒClangã€‚vcpkgçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸‹è½½å¹¶å®‰è£…ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œå·¥å…·æŒ‡å®šè¦å®‰è£…çš„åº“åï¼Œvcpkgä¼šè‡ªåŠ¨ä¸‹è½½ã€ç¼–è¯‘å¹¶å®‰è£…æ‰€éœ€çš„åº“åŠå…¶ä¾èµ–é¡¹ã€‚æ­¤å¤–ï¼Œvcpkgè¿˜å…·æœ‰ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°åˆ‡æ¢åº“çš„ä¸åŒç‰ˆæœ¬ã€‚å®ƒå¯¹äºæå‡å¼€å‘æ•ˆç‡ã€ä¿æŒé¡¹ç›®çš„ä¸€è‡´æ€§ä»¥åŠè§£å†³è·¨å¹³å°å¼€å‘ä¸­çš„åº“å…¼å®¹æ€§é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚è®¸å¤šå¼€æºé¡¹ç›®å’Œå•†ä¸šè½¯ä»¶éƒ½é€‰æ‹©ä½¿ç”¨vcpkgæ¥ç®¡ç†å’Œåˆ†å‘ä¾èµ–åº“ã€‚</p>
<p><strong>ä½¿ç”¨vcpkgå®‰è£…Tesseract</strong></p>
<pre><code class="language-cmd">git clone https://github.com/microsoft/vcpkg.git
</code></pre>
<pre><code class="language-cmd">cd vcpkg; .\bootstrap-vcpkg.bat
</code></pre>
<pre><code class="language-cmd">vcpkg install tesseract:x64-windows
</code></pre>
<p>å®‰è£…å®Œæˆï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729640-169509381.png" alt="image-20241226105928367" loading="lazy"></p>
<pre><code class="language-cmd">vcpkg integrate install
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730015-74887334.png" alt="image-20241226110526085" loading="lazy"></p>
<p>ä¸ºè¿™ä¸ª vcpkg æ ¹ç›®å½•åº”ç”¨äº†å…¨å±€ç”¨æˆ·é›†æˆã€‚ CMake é¡¹ç›®åº”ä½¿ç”¨ï¼š"-DCMAKE_TOOLCHAIN_FILE=D:/Learning/vcpkg/scripts/buildsystems/vcpkg.cmake"</p>
<p>ç°åœ¨æ‰€æœ‰ MSBuild C++ é¡¹ç›®éƒ½å¯ä»¥ #include ä»»ä½•å·²å®‰è£…çš„åº“ã€‚é“¾æ¥å°†ä¼šè‡ªåŠ¨å¤„ç†ã€‚å®‰è£…æ–°åº“åï¼Œå®ƒä»¬å°†ç«‹å³å¯ç”¨ã€‚</p>
<pre><code class="language-cmd">vcpkg list
</code></pre>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730031-1360549776.png" alt="image-20241226110859781" loading="lazy"></p>
<p><strong>æ–°å»ºä¸€ä¸ªC++é¡¹ç›®ä½¿ç”¨Tesseract C++ API</strong></p>
<p>æˆ‘å†™äº†ä¸¤ä¸ªç®€å•çš„å‡½æ•°ç”¨äºæµ‹è¯•ã€‚</p>
<p>å¤´æ–‡ä»¶ï¼š</p>
<pre><code class="language-c++">#pragma once
extern "C" __declspec(dllexport) char* getChineseText(const char* imagePath);
extern "C" __declspec(dllexport) char* getEnglishText(const char* imagePath);
extern "C" __declspec(dllexport) void freeMemory(char* ptr);
</code></pre>
<p>æºæ–‡ä»¶ï¼š</p>
<pre><code class="language-c++">#include &lt;tesseract/baseapi.h&gt;
#include &lt;leptonica/allheaders.h&gt;
#include "test.h"
#include &lt;iostream&gt;

void windows_cmd_support_utf8(void)
{
   system("chcp 65001 &amp; cls"); //cls ç”¨æ¥æ¸…é™¤ chcp çš„è¾“å‡º
}

char* getEnglishText(const char* imgPath) {
    tesseract::TessBaseAPI* api = new tesseract::TessBaseAPI();
    if (api-&gt;Init(NULL, "eng")) {
        fprintf(stderr, "Could not initialize tesseract.\n");
        delete api;
        return nullptr;
    }

    Pix* image = pixRead(imgPath);
    if (!image) {
        fprintf(stderr, "Could not read image file.\n");
        api-&gt;End();
        delete api;
        return nullptr;
    }

    api-&gt;SetImage(image);
    char* outText = api-&gt;GetUTF8Text();
    if (!outText) {
        fprintf(stderr, "OCR failed.\n");
        api-&gt;End();
        pixDestroy(&amp;image);
        delete api;
        return nullptr;
    }
  

    api-&gt;Clear();
    api-&gt;End();
    delete api;
    pixDestroy(&amp;image);

    return outText;
}

char* getChineseText(const char* imgPath) {
    tesseract::TessBaseAPI* api = new tesseract::TessBaseAPI();
    if (api-&gt;Init(NULL, "chi_sim")) {
        fprintf(stderr, "Could not initialize tesseract.\n");
        delete api;
        return nullptr;
    }

    Pix* image = pixRead(imgPath);
    if (!image) {
        fprintf(stderr, "Could not read image file.\n");
        api-&gt;End();
        delete api;
        return nullptr;
    }

    api-&gt;SetImage(image);
    char* outText = api-&gt;GetUTF8Text();
    if (!outText) {
        fprintf(stderr, "OCR failed.\n");
        api-&gt;End();
        pixDestroy(&amp;image);
        delete api;
        return nullptr;
    }


    api-&gt;Clear();
    api-&gt;End();
    delete api;
    pixDestroy(&amp;image);

    return outText;
}

void freeMemory(char* ptr) {
    delete[] ptr;
}

int main()
{ 
    const char* imgPath = "D:\\SemanticKernel-Test2.png";  // æ›¿æ¢ä¸ºä½ çš„å›¾åƒæ–‡ä»¶è·¯å¾„

    const char* imgPath2 = "D:\\test666.png";  // æ›¿æ¢ä¸ºä½ çš„å›¾åƒæ–‡ä»¶è·¯å¾„

    // ç¬¬ä¸€æ¬¡è°ƒç”¨
    char* result1 = getChineseText(imgPath);

    windows_cmd_support_utf8();

    std::cout &lt;&lt; "OCR Result 1: " &lt;&lt; result1 &lt;&lt; std::endl;

    // ç¬¬äºŒæ¬¡è°ƒç”¨
    char* result2 = getChineseText(imgPath2);
    std::cout &lt;&lt; "OCR Result 2: " &lt;&lt; result2 &lt;&lt; std::endl;

    // é‡Šæ”¾å†…å­˜
    //freeMemory(result1);
    //freeMemory(result2);
    return 0;  // ç¨‹åºæ­£å¸¸ç»“æŸ

}
</code></pre>
<p><strong>æ³¨æ„ğŸ“ğŸ“ğŸ“</strong></p>
<p>å…ˆå°†é¡¹ç›®é…ç½®æˆX64:</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730041-1173601267.png" alt="image-20241227160709604" loading="lazy"></p>
<p>ç°åœ¨è¿è¡Œé¡¹ç›®ï¼Œä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå¹¶æ²¡æœ‰åŒ…å«tessdataã€‚</p>
<p><code>tessdata</code> æ˜¯ Tesseract OCR å¼•æ“ä½¿ç”¨çš„ä¸€ç§æ•°æ®æ–‡ä»¶æ ¼å¼ï¼Œç”¨äºå­˜å‚¨è¯­è¨€æ¨¡å‹å’Œå­—ç¬¦è¯†åˆ«æ•°æ®ã€‚Tesseract é€šè¿‡åŠ è½½è¿™äº›æ•°æ®æ–‡ä»¶æ¥å®ç°å¯¹ä¸åŒè¯­è¨€æ–‡å­—çš„è¯†åˆ«ã€‚æ¯ä¸ªè¯­è¨€éƒ½æœ‰ä¸€å¥—å¯¹åº”çš„ <code>tessdata</code> æ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸º <code>lang.traineddata</code>ï¼Œå…¶ä¸­ <code>lang</code> æ˜¯è¯­è¨€çš„ç¼©å†™ï¼ˆä¾‹å¦‚ï¼Œ<code>eng</code> è¡¨ç¤ºè‹±è¯­ï¼Œ<code>chi_sim</code> è¡¨ç¤ºç®€ä½“ä¸­æ–‡ï¼‰ã€‚</p>
<p>tessdataçš„GitHubåœ°å€ï¼š<a href="https://github.com/tesseract-ocr/tessdata" target="_blank" rel="noopener nofollow">https://github.com/tesseract-ocr/tessdata</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730017-1976357499.png" alt="image-20241227185027622" loading="lazy"></p>
<p>ä¹Ÿå¯ä»¥çœ‹æˆ‘åé¢åˆ†äº«çš„GitHubï¼Œä¸€èˆ¬åªè¦ä¸­è‹±æ–‡å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730076-1450207605.png" alt="image-20241227185504978" loading="lazy"></p>
<p>å°†tessdataæ–‡ä»¶å¤¹æ”¾åœ¨x64çš„Debugç›®å½•ä¸‹å³å¯ã€‚</p>
<p>å…ˆæµ‹è¯•ä¸­æ–‡è¯†åˆ«æ•ˆæœï¼š</p>
<p>æµ‹è¯•å›¾ç‰‡1</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730091-251181949.png" alt="" loading="lazy"></p>
<p>æµ‹è¯•å›¾ç‰‡2</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730001-2107054339.png" alt="" loading="lazy"></p>
<p>æŸ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730081-1651063265.png" alt="image-20241227155928432" loading="lazy"></p>
<p><strong>æ³¨æ„ğŸ“ğŸ“ğŸ“</strong></p>
<p>å¦‚æœä¸åŠ ä¸Šwindows_cmd_support_utf8();</p>
<p>å°±ä¼šå‡ºç°ä¹±ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730125-333085352.png" alt="image-20241227160300511" loading="lazy"></p>
<p>å¹¶ä¸æ˜¯Tesseractè¯†åˆ«ä¸­æ–‡æ•ˆæœä¸å¥½ï¼Œåªæ˜¯æ§åˆ¶å°é»˜è®¤æ²¡æ”¯æŒutf-8ç½¢äº†ã€‚</p>
<p>å†æ¥æµ‹è¯•ä¸€ä¸‹è‹±æ–‡ï¼š</p>
<p>æµ‹è¯•å›¾ç‰‡1</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730052-1079384972.png" alt="" loading="lazy"></p>
<p>æµ‹è¯•å›¾ç‰‡2</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730110-330088012.png" alt="" loading="lazy"></p>
<p>æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730148-1035987125.png" alt="image-20241227190017513" loading="lazy"></p>
<p><strong>ç”ŸæˆDLL</strong></p>
<p>æµ‹è¯•æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œç°åœ¨éœ€è¦ç”ŸæˆDLLæ–‡ä»¶ã€‚</p>
<p>å³é”®é¡¹ç›®ï¼Œç‚¹å‡»å±æ€§ï¼Œè®¾ç½®é…ç½®ç±»å‹ä¸ºDLLï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730083-453268042.png" alt="image-20241227190254191" loading="lazy"></p>
<p>ç”Ÿæˆè§£å†³æ–¹æ¡ˆä¹‹åï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730033-2080829928.png" alt="image-20241227190504150" loading="lazy"></p>
<p>è¿™é‡Œéœ€è¦ææ¸…æ¥šçš„æ˜¯ä¸ºä»€ä¹ˆå¤´æ–‡ä»¶ä¸ç”¨std::stringè€Œæ˜¯char*å‘¢ï¼Ÿ</p>
<pre><code class="language-c++">#pragma once
extern "C" __declspec(dllexport) char* getChineseText(const char* imagePath);
extern "C" __declspec(dllexport) char* getEnglishText(const char* imagePath);
extern "C" __declspec(dllexport) void freeMemory(char* ptr);
</code></pre>
<ul>
<li><strong><code>extern "C"</code></strong>ï¼šè¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å‡½æ•°åº”è¯¥æŒ‰ç…§Cè¯­è¨€çš„æ–¹å¼è¿›è¡Œé“¾æ¥ï¼Œè€Œä¸æ˜¯C++çš„æ–¹å¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¿™äº›å‡½æ•°åœ¨Cè¯­è¨€ä¸­ä¹Ÿå¯ä»¥è¢«æ­£ç¡®è°ƒç”¨ã€‚</li>
<li>ç®€å•çš„è¯´std::stringä¸æ˜¯Cè¯­è¨€é£æ ¼çš„ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</li>
</ul>
<h2 id="åœ¨cé¡¹ç›®ä¸­è°ƒç”¨c-dll">åœ¨C#é¡¹ç›®ä¸­è°ƒç”¨C++ DLL</h2>
<p>æ–°å»ºä¸€ä¸ªC#æ§åˆ¶å°é¡¹ç›®ç”¨äºæµ‹è¯•ã€‚</p>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-c#">using System.Runtime.InteropServices;

class Program
{
    [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    public static extern IntPtr getEnglishText(string imagePath);

    [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
    public static extern IntPtr getChineseText(string imagePath);


    static void Main()
    {
        

        string imagePath = @"D:\SemanticKernel-Test2.png";

        // è°ƒç”¨ DLL ä¸­çš„å‡½æ•°
        IntPtr resultPtr = getChineseText(imagePath);
        if (resultPtr == IntPtr.Zero)
        {
            return;
        }

        string? result = Marshal.PtrToStringUTF8(resultPtr);
        return; ;

    }
}
</code></pre>
<p>å°†é¡¹ç›®è®¾ç½®æˆX64å¹³å°ï¼Œå°†C++é¡¹ç›®çš„æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°X64çš„è¾“å‡ºç›®å½•è¿™é‡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730116-2074493614.png" alt="image-20241227191524217" loading="lazy"></p>
<p>ä¸ºäº†é¿å…å¤ªæ··ä¹±ï¼Œæœ¬æ¥æƒ³æ–°å»ºä¸€ä¸ªLibsæ–‡ä»¶å¤¹ï¼Œåœ¨æ”¾è¿™äº›æ–‡ä»¶ï¼Œåœ¨è®¾ç½®ä¸ºåµŒå…¥çš„èµ„æºä¸å¦‚æœè¾ƒæ–°å°±å¤åˆ¶ï¼Œä½†æ˜¯å°±è°ƒç”¨ä¸äº†äº†ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³ï¼Œåªèƒ½è¿™æ ·ä¸€å †æ”¾åœ¨è¿™é‡Œäº†ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730079-975920089.png" alt="image-20241227191730397" loading="lazy"></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ˜¯</p>
<pre><code class="language-c#">  [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
  public static extern IntPtr getEnglishText(string imagePath);
</code></pre>
<p>è€Œä¸æ˜¯</p>
<pre><code class="language-c#">  [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
  public static extern string getEnglishText(string imagePath);
</code></pre>
<p>åœ¨C#ä¸­ç›´æ¥ä½¿ç”¨ <code>string</code> ä½œä¸ºè¿”å›ç±»å‹å¹¶ä¸é€‚ç”¨äºä»C++å¯¼å‡ºçš„å‡½æ•°ï¼Œå°¤å…¶æ˜¯å½“è¯¥å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª <code>char*</code> ç±»å‹çš„æŒ‡é’ˆæ—¶ã€‚åŸå› åœ¨äº <code> char*</code> æ˜¯ä¸€ä¸ªæŒ‡å‘Cé£æ ¼å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œè€ŒC#ä¸­çš„ <code>string</code> ç±»å‹ä¸Cé£æ ¼å­—ç¬¦ä¸²å¹¶ä¸ç›´æ¥å…¼å®¹ã€‚C#çš„ <code>string</code> ç±»å‹æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè€Œ <code> char*</code> æ˜¯ä¸€ä¸ªéæ‰˜ç®¡çš„æŒ‡é’ˆï¼Œç›´æ¥è¿›è¡Œè½¬æ¢ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯æˆ–æ— æ³•é¢„æœŸçš„è¡Œä¸ºã€‚</p>
<p>ä½¿ç”¨ <code>IntPtr</code> ä½œä¸ºè¿”å›ç±»å‹å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º <code>IntPtr</code> æ˜¯ä¸€ä¸ªå¯ä»¥è¡¨ç¤ºéæ‰˜ç®¡æŒ‡é’ˆçš„ç±»å‹ã€‚ä½ å¯ä»¥é€šè¿‡ <code>Marshal</code> ç±»å°† <code>IntPtr</code> è½¬æ¢ä¸ºC#ä¸­çš„ <code>string</code>ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ä½ åœ¨C#ä¸­èƒ½å¤Ÿæ­£ç¡®å¤„ç†C++å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²æŒ‡é’ˆã€‚</p>
<h2 id="tesseractocr-guiä¸­é›†æˆ">TesseractOCR-GUIä¸­é›†æˆ</h2>
<p>ä¹‹å‰è·Ÿå¤§å®¶åˆ†äº«çš„TesseractOCR-GUIéœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£…Tesseractæ‰èƒ½ç”¨ï¼Œå› ä¸ºåªæ˜¯ç®€å•çš„å¯¹Tesseractçš„å‘½ä»¤è¡Œä½¿ç”¨åšäº†å°è£…ï¼Œç°åœ¨é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä¸éœ€è¦å®‰è£…Tesseractä¹Ÿèƒ½ä½¿ç”¨äº†ã€‚</p>
<p>GitHubåœ°å€ï¼š<a href="https://github.com/Ming-jiayou/TesseractOCR-GUI%E3%80%82" target="_blank" rel="noopener nofollow">https://github.com/Ming-jiayou/TesseractOCR-GUIã€‚</a></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730131-310354925.png" alt="image-20241227192409247" loading="lazy"></p>
<p>git cloneåˆ°æœ¬åœ°ï¼Œç„¶åå°†å¹³å°è®¾ç½®æˆX64ï¼Œå…ˆç”Ÿæˆè§£å†³æ–¹æ¡ˆï¼Œç„¶åå°†Libsæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ï¼Œå…¨éƒ¨å¤åˆ¶åˆ°x64çš„è¾“å‡ºç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730034-1492062934.png" alt="image-20241227192607954" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730170-1679784172.png" alt="image-20241227192639528" loading="lazy"></p>
<p>ç°åœ¨ç›´æ¥ç‚¹å‡»åº”è¯¥å°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730112-66324081.png" alt="image-20241227192803222" loading="lazy"></p>
<p>æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730050-801989325.png" alt="image-20241227193007146" loading="lazy"></p>
<p><img src="https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730125-1076819534.gif" alt="" loading="lazy"></p>
<p>é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œç›®å‰ä¸ºæ­¢æˆ‘ä»¬å°è¯•äº†TesseractOCRã€PaddleOCRã€VLMï¼Œå…¶ä¸­TesseractOCRæˆ‘æ„Ÿè§‰æ˜¯æœ€å¿«çš„ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„åˆ†äº«å†…å®¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>æ¨èé˜…è¯»ï¼š</p>
<p><a href="https://mp.weixin.qq.com/s/6U_dWQxbOmWNzKrwt0RnFA" target="_blank" rel="noopener nofollow">C#è°ƒç”¨C++ä»£ç ï¼Œä»¥OpenCVä¸ºä¾‹</a></p>
<p><a href="https://mp.weixin.qq.com/s/A7-SbXyDOOd56JC9N7uOJg" target="_blank" rel="noopener nofollow">C#è°ƒç”¨Pythonè„šæœ¬çš„æ–¹å¼ï¼ˆä¸€ï¼‰ï¼Œä»¥PaddleOCR-GUIä¸ºä¾‹</a></p>
<p><a href="https://mp.weixin.qq.com/s/AnzbLyIH5cSMzaLdqWvjiA" target="_blank" rel="noopener nofollow">C#è°ƒç”¨Pythonä»£ç çš„æ–¹å¼ï¼ˆäºŒï¼‰ï¼Œä»¥PaddleOCR-GUIä¸ºä¾‹</a></p>
<p><a href="https://mp.weixin.qq.com/s/Pfi8tL_N6hLuxZAKpRjQSA" target="_blank" rel="noopener nofollow">VLM-OCR-Demoï¼šä¸€ä¸ªä½¿ç”¨VLMç”¨äºOCRä»»åŠ¡çš„ç¤ºä¾‹</a></p>
<p><a href="https://mp.weixin.qq.com/s/t_C360h6AP9P4GfssZnkbA" target="_blank" rel="noopener nofollow">TesseractOCR-GUIï¼šåŸºäºWPF/C#æ„å»ºTesseractOCRç®€å•æ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢</a></p>
<p><a href="https://mp.weixin.qq.com/s/C2o0-RtubtQb4pzys2wx6w" target="_blank" rel="noopener nofollow">ä½¿ç”¨Tesseractè¿›è¡Œå›¾ç‰‡æ–‡å­—è¯†åˆ«</a></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.028937387115740742" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2024-12-27 19:48">2024-12-27 19:47</span>&nbsp;
<a href="https://www.cnblogs.com/mingupupu">mingupupup</a>&nbsp;
é˜…è¯»(<span id="post_view_count">0</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18636610" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18636610);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18636610', targetLink: 'https://www.cnblogs.com/mingupupu/p/18636610', title: 'C#ä½¿ç”¨Tesseract C++ APIè¿‡ç¨‹è®°å½•' })">ä¸¾æŠ¥</a>
</div>
        
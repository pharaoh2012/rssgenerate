
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/jayblog/p/18795292" title="发布于 2025-03-27 09:41">
    <span role="heading" aria-level="2">（踩坑）windows本地部署Dify ，玩转智能体、知识库</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<div>&nbsp;</div>
<div>windows 安装docker</div>
<div>windows 本地部署deepseek</div>
<div>windows 通过docker本地部署dify</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>一：安装Docker</div>
<div>前提：</div>
<div>开启Hyper-V</div>
<div>打开&nbsp;控制面板&nbsp;-&nbsp;程序&nbsp;-&nbsp;启动或关闭windows功能</div>
<div>在对话框中分别选中打开：</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036452-1043205307.png" alt="0" data-media-type="image"></div>
<div>开启WSL2</div>
<div>打开cmd 运行 wsl --install</div>
<div>等待安装完成。</div>
<div>&nbsp;</div>
<div>如果无法开始执行下载安装，点击<a href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package" rel="noopener nofollow">下载</a> 适用于你的 Windows 版本的 WSL2 Linux 内核更新包。</div>
<div>若要更新到 WSL 2，需要运行 Windows 10。</div>
<div>
<ul>
<li>对于 x64 系统：版本 1903 或更高版本，内部版本为 18362.1049 或更高版本。</li>
<li>对于 ARM64 系统：版本 2004 或更高版本，内部版本为 19041 或更高版本。</li>
</ul>
</div>
<div>或 Windows 11。</div>
<div>&nbsp;</div>
<div><strong>一：docker 下载安装</strong></div>
<div>1、下载docker 安装包 ，下载地址 <a href="https://www.docker.com/get-started" rel="noopener nofollow">docker下载</a></div>
<div>docker 对windows 版本应该也是有一些要求，win10 专业、 企业、以及教育版的某一些版本，win11.</div>
<div>很不幸，我的笔记本，刚好不能装，因为刚好要清理磁盘，我重装了个win11</div>
<div>2、后面就是一路安装，直到能顺利打开</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036543-867438960.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div><strong>二：本地部署DeepSeek</strong></div>
<div>见之前的文章<a href="https://www.cnblogs.com/jayblog/p/18776665">使用ollama 本地部署Deepseek</a></div>
<div>&nbsp;</div>
<div><strong>三：安装Dify</strong></div>
<div>下载dify ：</div>
<div>访问dify的github并下载压缩包：<a href="https://github.com/langgenius/dify/archive/refs/tags/0.15.3.zip" rel="noopener nofollow">https://github.com/langgenius/dify/archive/refs/tags/0.15.3.zip</a></div>
<div>可以将此文件夹添加至任意目录下。</div>
<div>打开dify目录，找到docker目录，将.env.example文件重命名为.env，并修改其中的配置。</div>
<div data-theme="default" data-language=""># 允许使用个人模型 CUSTOM_MODEL_ENABLED = true # 配置模型路径 OLLAMA_API_BASE_URL=host.docker.internal:11434</div>
<div>安装dify依赖项目</div>
<div>在/dify/docker目录下，运行cmd或powershell运行以下命令安装 dify 依赖项目：</div>
<div data-theme="default" data-language="">docker-compose up -d</div>
<div>注意：因为拉取不成功，我魔法上网了，网上有资料更改docker 镜像的 。</div>
<div><strong>&nbsp;</strong></div>
<div><strong>启动dify</strong></div>
<div>在浏览器中输入<a href="http://localhost/install" rel="noopener nofollow">http://localhost/install</a></div>
<div>进入dify的注册页面，要输入邮箱、账号、和密码</div>
<div>注册结束之后， 进入登陆界面</div>
<div>&nbsp;</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036433-1867329406.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>问题来了：我邮箱填写的时候可能打错了，所以这个登录，始终找不到账号，然后就想设置管理员账户，结果。。。可能dify 的bug，怎么都进不去。</div>
<div>由于对docker 不是很熟悉，查了很多资料，没找到合适的修改方法，只是大概知道，dify 这个docker 里面是安装里postgres 数据库，账号是存在数据库里的。</div>
<div>那么开始找数据库吧，过程就不说了，由于docker知识经验的缺乏，花了好久才成功使用navicat 连接上 docker 里面的 postgres .</div>
<div>主要修改问题：找到docker-compose.yaml 文件，在services 里面添加端口映射，让docker 里的端口 可以映射到windows 主机的端口上，</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036450-565449462.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>连上数据库 就都容易了</div>
<div>找到里面dify 的库里的 accounts表 直接修改账号，坑（打错了一个字的邮箱，让我花了两小时了解docker 的一些基础功能和命令）</div>
<div>&nbsp;</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036435-921839510.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036485-463572887.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>最终，花了几个小时解决 账号 问题之后，成功登录dify</div>
<div>按照图示，模型供应商中找到ollama，添加，就可以在dify 中应用之前本地部署 的 deepseek-r1:1.5b</div>
<div>dify 后面的使用，等我学习学习再和大家分享，目前看来何coze、腾讯元器 使用上很像。</div>
<div>&nbsp;</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036568-517260655.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div><img src="https://img2024.cnblogs.com/blog/681642/202503/681642-20250327094036521-1538456582.png" alt="0" data-media-type="image"></div>
<div>&nbsp;</div>
<div>提示：文中的windows docker 、dify 可以在<a href="https://pan.quark.cn/s/2deab10045ec" rel="noopener nofollow">https://pan.quark.cn/s/2deab10045ec</a> 网盘中下载。</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.27827461688310184" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-27 09:41">2025-03-27 09:41</span>&nbsp;
<a href="https://www.cnblogs.com/jayblog">周捷Jay</a>&nbsp;
阅读(<span id="post_view_count">160</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18795292" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18795292);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18795292', targetLink: 'https://www.cnblogs.com/jayblog/p/18795292', title: '（踩坑）windows本地部署Dify ，玩转智能体、知识库' })">举报</a>
</div>
        
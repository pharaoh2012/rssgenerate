
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/dennyLee2025/p/18983432" title="å‘å¸ƒäº 2025-07-14 09:46">
    <span role="heading" aria-level="2">HashMapå±…ç„¶å¯ä»¥å’Œå®ƒç›´æ¥åˆä½“ï¼Ÿï¼Ÿï¼Ÿ</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<blockquote>
<p><code>LinkedHashMap</code>é›†åˆç»§æ‰¿äº<code>HashMap</code>ï¼Œå­¦ä¹ <code>LinkedHashMap</code>é‡ç‚¹å¯¹æ¯” <code>LinkedHashMap</code> ä¸ <code>HashMap</code> çš„å¼‚åŒ</p>
<p>ç‰¹åˆ«å¼ºè°ƒä¸¤è€…çš„ <code>Entry</code>ï¼ˆèŠ‚ç‚¹ï¼‰æ•°æ®ç»“æ„ã€æ•°æ®ç»“æ„çš„ä¸åŒå¸¦æ¥çš„ç‰¹æ€§å·®å¼‚ã€<code>HashMap</code> çš„åç½®å¤„ç†æœºåˆ¶åŠæœ€å°‘è®¿é—®åˆ é™¤ç­–ç•¥ã€‚</p>
</blockquote>
<p><code>LinkedHashMap</code> = <code>HashMap</code> + <code>LinkedList</code> ï¼Ÿ</p>
<p><strong>å°±åƒè¿™å¹…å›¾ä¸€æ ·ï¼Ÿ</strong></p>
<p><img src="https://img2024.cnblogs.com/blog/1209017/202507/1209017-20250714094307496-1318022374.jpg" alt="image" loading="lazy"></p>
<h2 id="1-entryèŠ‚ç‚¹æ•°æ®ç»“æ„">1. Entryï¼ˆèŠ‚ç‚¹ï¼‰æ•°æ®ç»“æ„</h2>
<h3 id="11-hashmapnode">1.1. HashMap.Node</h3>
<pre><code class="language-java">static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    final int hash;
    final K key;
    V value;
    Node&lt;K,V&gt; next;
    // â€¦ æ„é€ ã€getKey/getValue/setValueã€equals/hashCode ç­‰ â€¦
}
</code></pre>
<p><strong>å­—æ®µ</strong>è¯´æ˜ï¼š<code>hash</code>ï¼škey çš„å“ˆå¸Œå€¼ï¼Œ<code>key</code>ã€<code>value</code>ï¼šå­˜å‚¨çš„é”®å€¼å¯¹ï¼Œ<code>next</code>ï¼šé“¾è¡¨æˆ–æ ‘åŒ–æ—¶çš„é“¾è¡¨æŒ‡é’ˆã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/1209017/202507/1209017-20250714094322299-811701120.jpg" alt="image" loading="lazy"></p>
<h3 id="12-linkedhashmapentry">1.2. LinkedHashMap.Entry</h3>
<pre><code class="language-java">// å¤´èŠ‚ç‚¹
transient LinkedHashMap.Entry&lt;K,V&gt; head;
// å°¾èŠ‚ç‚¹
transient LinkedHashMap.Entry&lt;K,V&gt; tail;
// èŠ‚ç‚¹ç±»
static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {
    Entry&lt;K,V&gt; before, after;  // åŒå‘é“¾è¡¨æŒ‡é’ˆ

    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) {
        super(hash, key, value, next);
    }
}
</code></pre>
<p><strong>æ–°å¢å­—æ®µè¯´æ˜</strong>ï¼š<code>before</code>ã€<code>after</code>ï¼šç»´æŠ¤æ’å…¥/è®¿é—®é¡ºåºçš„åŒå‘é“¾è¡¨ï¼›</p>
<p><strong>é“¾è¡¨å¤´å°¾</strong>ï¼šåœ¨ <code>LinkedHashMap</code> ä¸­ï¼Œç»´æŠ¤ä¸€ä¸ª <code>head</code> å’Œ <code>tail</code> æŒ‡é’ˆï¼Œæ’å…¥æ—¶è¿½åŠ åˆ°å°¾éƒ¨ã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/1209017/202507/1209017-20250714094335975-1801010351.jpg" alt="image" loading="lazy"></p>
<p><code>LinkedHashMap</code> æ•°æ®ç»“æ„å°±åƒå®ƒçš„åç§°ä¸€æ ·<strong>Linked + HashMap</strong>ï¼Œå®ƒæ˜¯åœ¨<code>HashMap</code>çš„åŸºç¡€ä¸Šï¼Œç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚è¿™ä¸ªåŒå‘é“¾è¡¨å°±åƒ<code>LinkedList</code>ä¸€æ ·ï¼Œå¯ä»¥ç»´æŠ¤èŠ‚ç‚¹æ’å…¥çš„é¡ºåºã€‚</p>
<p><code>LinkedHashMap</code> æ•°æ®ç»“æ„æ˜¯<strong>ä¸¤ç§å½¢æ€å…±å­˜</strong>çš„æ•°æ®ç»“æ„</p>
<ul>
<li>ä½ å¯ä»¥å¿½ç•¥åŒå‘é“¾è¡¨ï¼ŒæŠŠå®ƒçœ‹åšæ™®é€šçš„<code>HashMap</code>ï¼›</li>
<li>ä¹Ÿå¯ä»¥å¿½ç•¥<code>HashMap</code>ï¼ŒæŠŠå®ƒçœ‹ä½œæ˜¯åŒå‘é“¾è¡¨ã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨<code>LinkedHashMap</code>ï¼Œä½†åˆæƒ³è¦ç»´æŠ¤<code>HashMap</code>çš„æ’å…¥é¡ºåºï¼Œé‚£ä½ å¯ä»¥åœ¨<code>HashMap.put</code>å…ƒç´ åï¼ŒåŒæ—¶å°†è¯¥å…ƒç´ ä¿å­˜åˆ°<code>LinkedList.add</code>é›†åˆï¼Œä½†è¿™æ ·å°±éœ€è¦ä½ ç¡®ä¿é›†åˆä¸€è‡´æ€§ï¼Œæ¯”å¦‚æ’å…¥å’Œåˆ é™¤ã€‚è¿™ä¹ˆæƒ³æƒ³ï¼Œè¿˜ä¸å¦‚ç›´æ¥ç”¨<code>LinkedHashMap</code>é›†åˆè¾ƒä¸ºç¨³å¦¥ã€‚</p>
</blockquote>
<p>å…¶å®<code>LinkedHashMap</code> ä¸€éƒ¨åˆ†æºç ä¸ºçš„å°±æ˜¯ç»´æŠ¤<code>HashMap</code>ä¸åŒå‘é“¾è¡¨çš„ä¸€è‡´æ€§ï¼ŒåŠæ“ä½œè¿‡ç¨‹åšçš„ä¸€äº›æ‰©å±•ã€‚æ¯”å¦‚ï¼šèŠ‚ç‚¹åˆ›å»ºæ—¶çš„åŒå‘é“¾è¡¨å°¾éƒ¨æ’å…¥å’Œ<code>HashMap</code>çš„åç½®å¤„ç†ã€‚</p>
<h3 id="13-ä¸¤è€…å¯¹æ¯”">1.3. ä¸¤è€…å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>HashMap</th>
<th>LinkedHashMap</th>
</tr>
</thead>
<tbody>
<tr>
<td>åº•å±‚æ•°æ®ç»“æ„</td>
<td>æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘</td>
<td>æ•°ç»„ + é“¾è¡¨/çº¢é»‘æ ‘ + åŒå‘é“¾è¡¨</td>
</tr>
<tr>
<td>è¿­ä»£é¡ºåº</td>
<td>ä¸ä¿è¯é¡ºåº</td>
<td>æŒ‰æ’å…¥é¡ºåºï¼ˆæˆ–è®¿é—®é¡ºåºï¼Œå¯é€‰ï¼‰</td>
</tr>
<tr>
<td>å†…å­˜å¼€é”€</td>
<td>è¾ƒå°</td>
<td>è¾ƒå¤§ï¼ˆæ¯ä¸ªèŠ‚ç‚¹é¢å¤–ç»´æŠ¤é“¾è¡¨æŒ‡é’ˆï¼‰</td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>ä¸€èˆ¬çš„é”®å€¼å­˜å–</td>
<td>éœ€è¦æŒ‰æ’å…¥æˆ–è®¿é—®é¡ºåºéå† (å¦‚ LRU ç¼“å­˜)</td>
</tr>
</tbody>
</table>
<h3 id="14-è¯¦ç»†çš„æ•°æ®ç»“æ„æ¡ˆä¾‹">1.4. è¯¦ç»†çš„æ•°æ®ç»“æ„æ¡ˆä¾‹</h3>
<p>é€šè¿‡ä¸‹é¢çš„æ¡ˆä¾‹å›¾ï¼Œæ¸…æ¥šåœ°çœ‹è§æ¯ä¸ªèŠ‚ç‚¹çš„æŒ‡å‘ã€‚</p>
<p><strong>å‡è®¾æ’å…¥é¡ºåºä¸ºï¼š</strong>22ã€23ã€45ã€89ã€25ã€38ã€49ã€28</p>
<p>æ’å…¥å®Œæˆåçš„æ•°æ®ç»“æ„å¦‚å›¾ï¼Œ</p>
<p><strong>å›¾ä¸­ä¿¡æ¯å«ä¹‰ï¼š</strong> å½“å‰èŠ‚ç‚¹ä¿¡æ¯åªæ˜¾ç¤º<code>key</code>å€¼ï¼Œ<code>next</code>ä¸ºä¸‹ä¸€ä¸ªæ˜ å°„å†²çªèŠ‚ç‚¹ï¼›<code>before</code>ä¸ºåŒé“¾ç»“æ„çš„ä¸Šä¸€èŠ‚ç‚¹ï¼Œ<code>after</code>ä¸ºåŒé“¾ç»“æ„çš„ä¸‹ä¸€èŠ‚ç‚¹ï¼›<strong>ç»¿è‰²è™šçº¿</strong>æ˜¯æ•´ä¸ª<code>LinkedHashMap</code>çš„åŒé“¾ç»“æ„çš„è¿æ¥å…³ç³»ã€‚</p>
<p><img src="https://img2024.cnblogs.com/blog/1209017/202507/1209017-20250714094351903-1059752500.jpg" alt="image" loading="lazy"></p>
<p>å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œç›¸æ¯”<code>HashMap</code>æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦å¤šç»´æŠ¤<code>before</code>å’Œ<code>after</code>èŠ‚ç‚¹ï¼Œ<code>LinkedHashMap</code>ä¹Ÿå°±éœ€è¦æ›´å¤šçš„ç©ºé—´ã€‚</p>
<h2 id="2-èŠ‚ç‚¹åˆ›å»ºå’Œè½¬åŒ–é‡å†™">2. èŠ‚ç‚¹åˆ›å»ºå’Œè½¬åŒ–é‡å†™</h2>
<h3 id="21-åˆ›å»ºentryèŠ‚ç‚¹">2.1. åˆ›å»º<code>Entry</code>èŠ‚ç‚¹</h3>
<p>é“¾è¡¨èŠ‚ç‚¹åˆ›å»ºçš„åŒæ—¶ï¼Œé€šè¿‡<code>linkNodeLast(p)</code> æ–¹æ³•ï¼Œç»´æŠ¤åŒé“¾ç»“æ„çš„å°¾éƒ¨æ’å…¥</p>
<pre><code class="language-java">Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) {
	LinkedHashMap.Entry&lt;K,V&gt; p =
		new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e);
	linkNodeLast(p);
	return p;
}
</code></pre>
<h3 id="22-æ ‘èŠ‚ç‚¹åˆ›å»º">2.2. æ ‘èŠ‚ç‚¹åˆ›å»º</h3>
<p>çº¢é»‘æ ‘èŠ‚ç‚¹åˆ›å»ºçš„åŒæ—¶ï¼Œé€šè¿‡<code>linkNodeLast(p)</code>  æ–¹æ³•ï¼Œç»´æŠ¤åŒé“¾ç»“æ„çš„å°¾éƒ¨æ’å…¥</p>
<pre><code class="language-java">TreeNode&lt;K,V&gt; newTreeNode(int hash, K key, V value, Node&lt;K,V&gt; next) {
	TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt;(hash, key, value, next);
	linkNodeLast(p);
	return p;
}
</code></pre>
<h3 id="23-èŠ‚ç‚¹è½¬åŒ–">2.3. èŠ‚ç‚¹è½¬åŒ–</h3>
<p><strong>æ ‘èŠ‚ç‚¹è½¬åŒ–ä¸ºEntryèŠ‚ç‚¹</strong>å’Œ<strong>EntryèŠ‚ç‚¹è½¬åŒ–æ ‘èŠ‚ç‚¹</strong>éƒ½åšäº†é‡å†™ï¼Œé€šè¿‡<code>transferLinks(q, t);</code>æ–¹æ³•å®ŒæˆèŠ‚ç‚¹è½¬åŒ–</p>
<pre><code class="language-java">Node&lt;K,V&gt; replacementNode(Node&lt;K,V&gt; p, Node&lt;K,V&gt; next) {
	LinkedHashMap.Entry&lt;K,V&gt; q = (LinkedHashMap.Entry&lt;K,V&gt;)p;
	LinkedHashMap.Entry&lt;K,V&gt; t =
		new LinkedHashMap.Entry&lt;K,V&gt;(q.hash, q.key, q.value, next);
	transferLinks(q, t);
	return t;
}

TreeNode&lt;K,V&gt; replacementTreeNode(Node&lt;K,V&gt; p, Node&lt;K,V&gt; next) {
	LinkedHashMap.Entry&lt;K,V&gt; q = (LinkedHashMap.Entry&lt;K,V&gt;)p;
	TreeNode&lt;K,V&gt; t = new TreeNode&lt;K,V&gt;(q.hash, q.key, q.value, next);
	transferLinks(q, t);
	return t;
}
</code></pre>
<p>è¿™äº›éƒ½æ˜¯<strong>å¤šæ€</strong>çš„ç®€å•åº”ç”¨ï¼Œ<code>HashMap</code> å¼•ç”¨æŒ‡å‘ä¸åŒçš„å®ä¾‹åŒ–å­ç±»ï¼Œå®ç°ä¸åŒçš„åŠŸèƒ½ã€‚</p>
<h2 id="3-hashmap-çš„åç½®å¤„ç†post-processing">3. HashMap çš„åç½®å¤„ç†ï¼ˆpost-processingï¼‰</h2>
<p><code>HashMap</code> æœ¬èº«åœ¨èŠ‚ç‚¹æ’å…¥ã€è®¿é—®ã€åˆ é™¤åå¹¶ä¸åšé¢å¤–æ“ä½œã€‚<code>LinkedHashMap</code> åˆ™é€šè¿‡é‡å†™ä»¥ä¸‹é’©å­æ–¹æ³•ï¼Œåœ¨æ’å…¥ã€è®¿é—®æˆ–åˆ é™¤æ—¶ç»´æŠ¤è‡ªå·±çš„åŒé“¾è¡¨ç»“æ„ã€‚</p>
<h3 id="31-æ’å…¥å">3.1. æ’å…¥å</h3>
<p>ä»…åœ¨<code>evict=true</code> å¹¶ä¸”<code>removeEldestEntry(first)==true</code>æ—¶ï¼Œæ’å…¥åæ‰éœ€è¦ç§»é™¤å¤´éƒ¨èŠ‚ç‚¹</p>
<pre><code class="language-java">void afterNodeInsertion(boolean evict) { // possibly remove eldest
	LinkedHashMap.Entry&lt;K,V&gt; first;
	if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) {
		K key = first.key;
		removeNode(hash(key), key, null, false, true);
	}
}
</code></pre>
<h3 id="32-è®¿é—®å">3.2. è®¿é—®å</h3>
<p>ä»…åœ¨ <code>accessOrder = true</code> æ—¶ï¼Œè®¿é—®åéœ€è°ƒæ•´é¡ºåºï¼›éœ€è¦åœ¨<code>LinkedHashMap</code> çš„æ„é€ æ–¹æ³•ä¸­è®¾å®š<code>accessOrder</code>çš„å€¼ã€‚</p>
<pre><code class="language-java">void afterNodeAccess(Node&lt;K,V&gt; e) {
    LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e;
    // å°† p ç§»åˆ°åŒå‘é“¾è¡¨å°¾éƒ¨
    moveNodeToLast(p);
}
</code></pre>
<h3 id="33-åˆ é™¤å">3.3. åˆ é™¤å</h3>
<p>åªè¦èŠ‚ç‚¹ä½œåˆ é™¤ï¼Œ<code>LinkedHashMap</code>é›†åˆå°±å¿…é¡»åˆ é™¤åŒé“¾è¡¨ä¸Šçš„<code>Entry</code> èŠ‚ç‚¹</p>
<pre><code class="language-java">void afterNodeRemoval(Node&lt;K,V&gt; e) {
    // å°† e ä»åŒå‘é“¾è¡¨ä¸­æ‘˜é™¤
    unlinkNode((LinkedHashMap.Entry&lt;K,V&gt;)e);
}
</code></pre>
<p>è¿™ä¸‰æ­¥åˆç§°ä¸º <strong>åç½®å¤„ç†</strong>ï¼Œä¿è¯åœ¨ <code>put</code>ã€<code>get</code>ã€<code>remove</code> ç­‰æ“ä½œæ—¶ï¼Œé“¾è¡¨ç»“æ„çš„æ­£ç¡®ç»´æŠ¤ã€‚</p>
<p>ä½†æ˜¯ã€</p>
<p>ä¸ºä»€ä¹ˆ<code>LinkedHashMap</code>é›†åˆåœ¨<strong>æ’å…¥å®Œæˆå</strong>ï¼Œéœ€è¦å¤šåšä¸€æ­¥åˆ é™¤å¤´èŠ‚ç‚¹çš„æ“ä½œå‘¢ï¼Ÿ</p>
<p>ä¸ºä»€ä¹ˆ<strong>è®¿é—®å®Œæˆå</strong>éœ€è¦å°†è®¿é—®èŠ‚ç‚¹ç§»åŠ¨åˆ°åŒé“¾è¡¨çš„å°¾éƒ¨å‘¢ï¼Ÿ</p>
<h2 id="4-æœ€å°‘è®¿é—®åˆ é™¤ç­–ç•¥">4. æœ€å°‘è®¿é—®åˆ é™¤ç­–ç•¥</h2>
<p>ğŸ‘‰ <strong>ä¸ºä»€ä¹ˆæ˜¯ <code>LinkedHashMap</code> è€Œä¸æ˜¯ <code>HashMap</code>ï¼š</strong></p>
<p><code>LinkedHashMap</code> åœ¨ <code>HashMap</code> åŸºç¡€ä¸Šï¼Œå¢åŠ äº† <strong>åŒå‘é“¾è¡¨</strong>ï¼Œç”¨æ¥è®°å½•ï¼šæ’å…¥é¡ºåºï¼ˆé»˜è®¤ï¼‰æˆ–è®¿é—®é¡ºåºï¼ˆ<code>accessOrder = true</code> æ—¶ï¼‰</p>
<p>è¿™å°±å¯ä»¥å®ç°ï¼šè®°å½•æœ€è¿‘è®¿é—®çš„èŠ‚ç‚¹ï¼ˆæœ€è¿‘è®¿é—®çš„æ”¾åˆ°é“¾è¡¨å°¾éƒ¨ï¼‰ï¼›åˆ é™¤æœ€ä¹…æœªè®¿é—®çš„èŠ‚ç‚¹ï¼ˆé“¾è¡¨å¤´ï¼‰</p>
<h3 id="41-æ ¸å¿ƒæ–¹æ³•">4.1. æ ¸å¿ƒæ–¹æ³•</h3>
<pre><code class="language-java">protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) {
    return false; // é»˜è®¤ä¸åˆ é™¤
}
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª <strong>é’©å­</strong>ï¼Œè¿™ä¸ªé’©å­<code>removeEldestEntry(first)</code> åœ¨æ’å…¥åç¼€å¤„ç†ä¸­è°ƒç”¨ï¼Œ<code>LinkedHashMap</code> çš„æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">void afterNodeInsertion(boolean evict) { // possibly remove eldest
	LinkedHashMap.Entry&lt;K,V&gt; first;
	if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) {
		K key = first.key;
		removeNode(hash(key), key, null, false, true);
	}
}
</code></pre>
<p>ä½ å¯ä»¥è‡ªå·±é‡å†™ï¼Œ<strong>åˆ¶å®šå±äºè‡ªå·±çš„å¤„ç†ç­–ç•¥</strong>ï¼š</p>
<pre><code class="language-java">LinkedHashMap&lt;K,V&gt; lru = new LinkedHashMap&lt;K,V&gt;(16, 0.75f, true) {
    protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) {
        return size() &gt; 100; // è¶…è¿‡ 100 ä¸ªå°±åˆ é™¤æœ€è€çš„
    }
};
</code></pre>
<p>å½“æ¯æ¬¡ <code>put</code> åï¼š<code>afterNodeInsertion</code> è°ƒç”¨ <code>removeEldestEntry</code>ï¼Œå¦‚æœè¿”å› <code>true</code>ï¼Œå°±ä»é“¾è¡¨å¤´åˆ é™¤æœ€è€èŠ‚ç‚¹</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<blockquote>
<p><code>LinkedHashMap</code> ç”¨ <code>removeEldestEntry</code> + <code>accessOrder=true</code> å¯å®ç°ç®€å• LRU ç¼“å­˜ã€‚</p>
<p><code>HashMap</code> ä¸è‡ªå¸¦ä»»ä½•è®¿é—®è¿½è¸ªæˆ–è‡ªåŠ¨åˆ é™¤æœºåˆ¶ï¼Œå¿…é¡»ç”±ä½¿ç”¨è€…è‡ªå·±å®ç°ã€‚</p>
</blockquote>
<h3 id="42-lruç¼“å­˜ä¾‹å­">4.2. LRUç¼“å­˜ä¾‹å­</h3>
<p>LRU ç¼“å­˜ï¼ˆ<strong>Least Recently Used Cache</strong>ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜ï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„ <strong>ç¼“å­˜æ·˜æ±°ç­–ç•¥</strong>ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p>å¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å¯èƒ½æ€§ä¹Ÿæ›´é«˜ï¼›åä¹‹åˆ™æ·˜æ±°ã€‚</p>
</blockquote>
<p>è§„å®šå›ºå®šå¤§å°ä¸º4çš„ç¼“å­˜å®¹å™¨ï¼Œæºç å¦‚ä¸‹</p>
<pre><code class="language-java">public class LRUDemo {
    public static void main(String[] args) {
        // æŒ‡å®šåªèƒ½ç¼“å­˜å››ä¸ªæ•°æ®
        LinkedHashMap&lt;String, String&gt; linkedHashMap = new LinkedHashMap&lt;&gt;(16, 0.75f, true) {
            protected boolean removeEldestEntry(Map.Entry&lt;String, String&gt; eldest) {
                return size() &gt; 4;
            }
        };

        linkedHashMap.put("A","1");
        linkedHashMap.put("B","2");
        linkedHashMap.put("C","3");
        linkedHashMap.put("D","4");
        printOrder(linkedHashMap);
        linkedHashMap.get("B"); // B è¢«è®¿é—®ï¼Œç§»åˆ°æœ«å°¾
        printOrder(linkedHashMap);
        linkedHashMap.put("E","5");   // æ·˜æ±°æœ€è€çš„ A
        printOrder(linkedHashMap);
    }
    public static void printOrder(LinkedHashMap&lt;String, String&gt; linkedHashMap ) {
        System.out.print("æ•°æ®ç»“æ„ï¼š" + "\n[head]");
        for (Map.Entry&lt;String, String&gt; entry : linkedHashMap.entrySet()) {
            System.out.print(" â‡„ " + entry.getKey());
        }
        System.out.println(" â‡„ [tail]\n");
    }
}
</code></pre>
<p>æ‰§è¡Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>æ•°æ®ç»“æ„ï¼š</p>
<p>[head] â‡„ A â‡„ B â‡„ C â‡„ D â‡„ [tail]</p>
<p>æ•°æ®ç»“æ„ï¼š</p>
<p>[head] â‡„ A â‡„ C â‡„ D â‡„ B â‡„ [tail]</p>
<p>æ•°æ®ç»“æ„ï¼š</p>
<p>[head] â‡„ C â‡„ D â‡„ B â‡„ E â‡„ [tail]</p>
</blockquote>
<h2 id="5-hashmapä¸linkedhashmapåŒºåˆ«æ±‡æ€»">5. HashMapä¸LinkedHashMapåŒºåˆ«æ±‡æ€»</h2>
<table>
<thead>
<tr>
<th>å¯¹æ¯”ç»´åº¦</th>
<th>HashMap</th>
<th>LinkedHashMap</th>
</tr>
</thead>
<tbody>
<tr>
<td>èŠ‚ç‚¹ç±»å‹</td>
<td><code>HashMap.Node</code></td>
<td><code>LinkedHashMap.Entry</code>ï¼ˆç»§æ‰¿è‡ª <code>HashMap.Node</code>ï¼‰</td>
</tr>
<tr>
<td>é¡ºåºä¿è¯</td>
<td>æ— </td>
<td>æŒ‰æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåº</td>
</tr>
<tr>
<td>é¢å¤–å­—æ®µ</td>
<td><code>next</code></td>
<td><code>next</code> + <code>before</code> + <code>after</code></td>
</tr>
<tr>
<td>å†…å­˜æ¶ˆè€—</td>
<td>è¾ƒä½</td>
<td>è¾ƒé«˜ï¼ˆæ¯ä¸ªèŠ‚ç‚¹å¤šä¸¤ä¸ªå¼•ç”¨ï¼‰</td>
</tr>
<tr>
<td><code>put</code> åç½®å¤„ç†</td>
<td>æ— </td>
<td><code>afterNodeInsertion</code>ï¼ˆé“¾è¡¨å°¾éƒ¨æ’å…¥ + å¯é€‰æ·˜æ±°ï¼‰</td>
</tr>
<tr>
<td><code>get</code> åç½®å¤„ç†</td>
<td>æ— </td>
<td><code>afterNodeAccess</code>ï¼ˆè®¿é—®æ—¶é“¾è¡¨é‡æ’åºï¼Œä»… accessOrder = trueï¼‰</td>
</tr>
<tr>
<td><code>remove</code> åç½®å¤„ç†</td>
<td>æ— </td>
<td><code>afterNodeRemoval</code>ï¼ˆä»é“¾è¡¨ä¸­æ‘˜é™¤ï¼‰</td>
</tr>
<tr>
<td>ç”¨é€”</td>
<td>é«˜æ•ˆå¿«é€Ÿéšæœºå­˜å–</td>
<td>éœ€è¦éå†é¡ºåºã€å®ç° LRU ç¼“å­˜ã€ä¿æŒå¯é¢„æµ‹è¿­ä»£é¡ºåº</td>
</tr>
</tbody>
</table>
<p>é€šè¿‡ä¸Šè¿°å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡º <code>LinkedHashMap</code> åªæ˜¯å¯¹ <code>HashMap</code> çš„è½»é‡å¢å¼ºï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒé¢å¤–é€»è¾‘</strong>ï¼šåœ¨æ¯æ¬¡å¢åˆ æ”¹æŸ¥æ“ä½œåï¼Œé’©å…¥åŒå‘é“¾è¡¨ç»´æŠ¤ï¼›</li>
<li><strong>é¢å¤–ç©ºé—´å¼€é”€</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹å¤šä¿©æŒ‡é’ˆï¼›</li>
<li><strong>åŠŸèƒ½æ”¶ç›Š</strong>ï¼šå¯æä¾›æ’å…¥é¡ºåºæˆ–è®¿é—®é¡ºåºçš„è¿­ä»£ã€å¯å®ç°åŸºäºè®¿é—®é¡ºåºçš„ç¼“å­˜æ·˜æ±°ï¼ˆå¦‚ LRUï¼‰ã€‚</li>
</ol>
<h2 id="6-æ€»ç»“">6. æ€»ç»“</h2>
<p><code>LinkedHashMap</code>é›†åˆç»§æ‰¿äº<code>HashMap</code>ï¼Œé‡ç‚¹å¯¹æ¯” <code>LinkedHashMap</code> ä¸ <code>HashMap</code> ä¸åŒçš„æ•°æ®ç»“æ„çš„å¸¦æ¥çš„ç‰¹æ€§å·®å¼‚ï¼›ä¸ºä»€ä¹ˆéœ€è¦<code>LinkedHashMap</code>è¿™ç§<strong>ä¸¤ç§å½¢æ€å…±å­˜</strong>çš„æ•°æ®ç»“æ„ï¼›ä»¥åŠé€šè¿‡<code>HashMap</code> çš„åç½®å¤„ç†æœºåˆ¶è½»æ¾å®ç°æ•°æ®ç»“æ„çš„åŠŸèƒ½æ‰©å±•ï¼›å¹¶ä¸”å¯¹<code>LinkedHashMap</code>æœ€å°‘è®¿é—®åˆ é™¤ç­–ç•¥<code>LRU</code>åšäº†ç®€å•æ¡ˆä¾‹æ¼”ç¤ºã€‚</p>
<h2 id="å¾€æœŸæ¨è"><strong>å¾€æœŸæ¨è</strong></h2>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å¾€æœŸæ–‡ç« </th>
</tr>
</thead>
<tbody>
<tr>
<td>Javaé›†åˆåŸç†</td>
<td><a href="https://mp.weixin.qq.com/s/cbXqfEhKBn-fbR-7laMnKQ" target="_blank" rel="noopener nofollow">HashMapé›†åˆ--åŸºæœ¬æ“ä½œæµç¨‹çš„æºç å¯è§†åŒ–</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247486835&amp;idx=1&amp;sn=9f61a14e91141059c95efa300266f87e&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">Javaé›†åˆ--HashMapåº•å±‚åŸç†å¯è§†åŒ–ï¼Œç§’æ‡‚æ‰©å®¹ã€é“¾åŒ–ã€æ ‘åŒ–</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247486816&amp;idx=1&amp;sn=81e12bd3920c4ca68afd659e93d62a41&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">Javaé›†åˆ--ä»æœ¬è´¨å‡ºå‘ç†è§£HashMap</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247486793&amp;idx=1&amp;sn=b738749f16e5fcdad26e3874fc388444&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">Javaé›†åˆ--LinkedListæºç å¯è§†åŒ–</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247486763&amp;idx=1&amp;sn=214926d8cfaba2cada66106f26918764&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">Javaé›†åˆæºç --ArrayListçš„å¯è§†åŒ–æ“ä½œè¿‡ç¨‹</a></td>
</tr>
<tr>
<td>è®¾è®¡æ¨¡å¼ç§˜ç±<br>ï¼ˆå·²å…¨éƒ¨å¼€æºï¼‰</td>
<td><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247486720&amp;idx=1&amp;sn=739bdfc99dc52128f9d9eb31a70a4c03&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">æŒæ¡è®¾è®¡æ¨¡å¼çš„ä¸¤ä¸ªç§˜ç±</a><br>å¾€æœŸè®¾è®¡æ¨¡å¼æ–‡ç« çš„ï¼š<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5NDM5NDM1NA==&amp;action=getalbum&amp;album_id=3572346739375538182#wechat_redirect" target="_blank" rel="noopener nofollow">è®¾è®¡æ¨¡å¼</a></td>
</tr>
<tr>
<td>è½¯ä»¶è®¾è®¡å¸ˆ</td>
<td><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247485837&amp;idx=1&amp;sn=b9b17dfd252882468b8eea31012df6fc&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">è½¯è€ƒä¸­çº§--è½¯ä»¶è®¾è®¡å¸ˆæ¯«æ— ä¿ç•™çš„å¤‡è€ƒåˆ†äº«</a><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247485909&amp;idx=1&amp;sn=e20f3b7b413310ca78f90c13305972ab&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">é€šè¿‡è½¯è€ƒåå´é¢†å–ä¸åˆ°å®ä½“è¯ä¹¦ï¼Ÿ</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247485873&amp;idx=1&amp;sn=08b58de61c716e5c57ff2fddb947f0d8&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">2023å¹´ä¸‹åŠå¹´è½¯è€ƒè€ƒè¯•é‡ç£…æ¶ˆæ¯</a></td>
</tr>
<tr>
<td>Javaå­¦ä¹ è·¯çº¿<br>å’Œç›¸åº”èµ„æº</td>
<td><a href="https://mp.weixin.qq.com/s?__biz=MzI5NDM5NDM1NA==&amp;mid=2247485015&amp;idx=1&amp;sn=862bc2b379726b89cdb396ec0d325cc0&amp;scene=21#wechat_redirect" target="_blank" rel="noopener nofollow">Javaå…¨æ ˆå­¦ä¹ è·¯çº¿ã€å­¦ä¹ èµ„æºå’Œé¢è¯•é¢˜ä¸€æ¡é¾™</a></td>
</tr>
</tbody>
</table>
<p>åŸåˆ›ä¸æ˜“ï¼Œè§‰å¾—è¿˜ä¸é”™çš„ï¼Œä¸‰è¿æ”¯æŒï¼šç‚¹èµã€åˆ†äº«ã€æ¨èâ†“</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-07-14 09:47">2025-07-14 09:46</span>&nbsp;
<a href="https://www.cnblogs.com/dennyLee2025">æ¸Šæ¸Ÿå²³</a>&nbsp;
é˜…è¯»(<span id="post_view_count">133</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18983432);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18983432', targetLink: 'https://www.cnblogs.com/dennyLee2025/p/18983432', title: 'HashMapå±…ç„¶å¯ä»¥å’Œå®ƒç›´æ¥åˆä½“ï¼Ÿï¼Ÿï¼Ÿ' })">ä¸¾æŠ¥</a>
</div>
        
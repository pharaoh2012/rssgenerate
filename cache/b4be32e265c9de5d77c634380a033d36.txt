
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/formulahendry/p/18837144" title="发布于 2025-04-20 17:34">
    <span role="heading" aria-level="2">再见，SSE！你好，Streamable HTTP！轻松开发 Streamable HTTP MCP Server</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-first-child="" data-pid="JU05aREm">大家好！我是韩老师。</p>
<p data-pid="I60hLFJ-">之前和大家分享了三篇 MCP 相关的文章：</p>
<ul>
<li data-pid="_cdsSKxp"><a class=" wrap external" href="https://mp.weixin.qq.com/s?__biz=MzU1NjgwNTExNQ==&amp;mid=2247498368&amp;idx=1&amp;sn=67b0b87612452ecda9d7551b959476e1&amp;scene=21#wechat_redirect" target="_blank" data-za-detail-view-id="1043" rel="noopener nofollow">Code Runner MCP Server，来了！</a></li>
<li data-pid="xpkGqS-6"><a class=" wrap external" href="https://mp.weixin.qq.com/s?__biz=MzU1NjgwNTExNQ==&amp;mid=2247498376&amp;idx=1&amp;sn=5b0f0acfdb8905addc9efe1c197d32cf&amp;scene=21#wechat_redirect" target="_blank" data-za-detail-view-id="1043" rel="noopener nofollow">从零开始开发一个 MCP Server！</a></li>
<li data-pid="ucDS2xZk"><a class=" wrap external" href="https://mp.weixin.qq.com/s?__biz=MzIwODE4Nzg2NQ==&amp;mid=2650563732&amp;idx=1&amp;sn=febce08ecc9968e84905d804ad5b4b14&amp;scene=21#wechat_redirect" target="_blank" data-za-detail-view-id="1043" rel="noopener nofollow">一键安装 MCP Server！</a></li>
</ul>
<p data-pid="pHH-RZfG">还是那句话：也许有一天，AI 程序员不懂 MCP，就犹如前端程序员不懂 JavaScript！</p>
<p data-pid="1ebIlwkr">相信不少童鞋已经了解了甚至参与到了 MCP 相关的开发。</p>
<blockquote data-pid="sN-bR02y">从 MCP 支持的两个协议 stdio 和 SSE 来看，MCP 确实有点“快而糙”。如果我当年本科的暑假大作业，还有一天就要deadline了，我也许才会选择这两个协议，能让我快速出活。</blockquote>
<p data-pid="c1d6eXJo">在第一篇文章中，我就提到了 stdio 和 SSE 的的“快而糙”。</p>
<p data-pid="q0KGj5ps">SSE 的最大缺陷之一，显而易见：SSE 需要 server 端保持一个长连接，而且，根据 MCP 的协议，在 MCP Client 与 MCP Server 建立 SEE 连接后，在整个 connection 的生命周期中，MCP Server 需要一直保持着这个 SSE 连接。</p>
<img src="https://pic3.zhimg.com/v2-db4386a47e5c7e60186e376e915c183e_1440w.jpg" width="772" height="764" class="origin_image zh-lightbox-thumb" data-caption="" data-size="normal" data-rawwidth="1003" data-rawheight="993" data-original="https://pic3.zhimg.com/v2-db4386a47e5c7e60186e376e915c183e_r.jpg" data-original-token="v2-db4386a47e5c7e60186e376e915c183e">
<p data-pid="WTTXpzOT">那么，对于要支持 SSE 的运行在 remote 的 MCP Server 来说，就需要保证高可靠性。在高并发的情况下，对 MCP Server 的负载更是一个挑战。</p>
<p data-pid="_AK4rlpq">在 3 月 26 日，MCP 发布了最新的 spec，用 Streamable HTTP “取代”了 SSE。</p>
<p data-pid="iGBQd1_B">简单来说，在新的 Streamable HTTP 协议中，MCP Server 可以根据自己实际的使用场景来决定自己是 Stateless 还是 Stateful 的，而不是像 SSE 那样，一定是 Stateful 的。</p>
<p data-pid="HucmnIbE">这对开发 Remote MCP Server 的开发者来说，真是一个极好的消息，因为在不少场景中，Stateless server 会对 MCP Server 的要求降低很多！</p>
<p data-pid="GrRlOqDz">今天，我也要和大家分享个好消息，韩老师的 Code Runner MCP Server 和 Yeoman Generator for MCP Server 都已经支持 Streamable HTTP 啦！</p>
<p data-pid="aZCBQizS">现在，韩老师就用 Yeoman Generator for MCP Server，来带领大家快速开发一个 Streamable HTTP 的 MCP Server！</p>
<h3>安装 Node.js</h3>
<p data-pid="nqrwNJNK">从&nbsp;<a class=" external" href="https://link.zhihu.com/?target=https%3A//nodejs.org/en" rel="noopener nofollow" target="_blank" data-za-detail-view-id="1043"><span class="invisible">https://<span class="visible">nodejs.org/en</span></span></a>&nbsp;安装 LTS 版的 Node.js 即可。</p>
<h3>安装 Scaffolding Tool</h3>
<p data-pid="ybQdoJ_g">在命令行运行下面命令，安装 Yeoman Generator for MCP Server：</p>
<div class="highlight">
<pre><code class="language-bash">npm install -g yo generator-mcp@latest</code></pre>
</div>
<h3>创建 MCP Server 项目</h3>
<p data-pid="IW0LGtO-">在命令行运行下面命令，创建 MCP Server 项目：</p>
<div class="highlight">
<pre><code class="language-text">yo mcp -n 'Weather MCP Server'</code></pre>
</div>
<h3>实现代码逻辑</h3>
<p data-pid="hHij0e-F">主要的代码逻辑在 src\streamableHttp.ts 文件中，可以不做修改直接使用。</p>
<h3>启动项目</h3>
<p data-pid="_IALItsz">在命令行运行下面命令，启动 MCP Server 项目：</p>
<div class="highlight">
<pre><code class="language-text">npm run build
npm run start:streamableHttp</code></pre>
</div>
<h3>在 VS Code 运行</h3>
<p data-pid="TVEQUG_o">安装好最新的 VS Code Insiders 版本。</p>
<img src="https://pic3.zhimg.com/v2-691b0b2bcc9992b75c761e5dae3c0a64_1440w.jpg" width="571" height="441" class="origin_image zh-lightbox-thumb" data-caption="" data-size="normal" data-rawwidth="775" data-rawheight="599" data-original="https://pic3.zhimg.com/v2-691b0b2bcc9992b75c761e5dae3c0a64_r.jpg" data-original-token="v2-691b0b2bcc9992b75c761e5dae3c0a64">
<p data-pid="X4lzii4f">打开 .vscode\mcp.json，取消 weather-mcp-server-streamable-http 的注释，点击 “start” 按钮：</p>
<img src="https://pica.zhimg.com/v2-169c38bf22bce4d9595672df083a3ae6_1440w.jpg" width="1080" class="origin_image zh-lightbox-thumb" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="419" data-original="https://pica.zhimg.com/v2-169c38bf22bce4d9595672df083a3ae6_r.jpg" data-original-token="v2-169c38bf22bce4d9595672df083a3ae6">
<p data-pid="PdqFSTl3">现在，就能在 VS Code Insiders 的 Agent Mode 调用你的 MCP Server 啦！</p>
<img src="https://pic1.zhimg.com/v2-961b2f72677fac73452af69a114a2b04_1440w.jpg" width="1080" class="origin_image zh-lightbox-thumb" data-caption="" data-size="normal" data-rawwidth="1080" data-rawheight="685" data-original="https://pic1.zhimg.com/v2-961b2f72677fac73452af69a114a2b04_r.jpg" data-original-token="v2-961b2f72677fac73452af69a114a2b04">
<p class="ztext-empty-paragraph">&nbsp;</p>
<p data-pid="POTy9gDH">大功告成！</p>
<p data-pid="sSX9vRdj">我的两个 MCP 项目完全开源，欢迎来围观或者一起共谋大业：</p>
<p data-pid="sSX9vRdj"><a href="https://github.com/formulahendry/generator-mcp" rel="noopener nofollow">GitHub - formulahendry/generator-mcp: Yeoman Generator to quickly create a new MCP Server</a></p>
<p data-pid="sSX9vRdj"><a href="https://github.com/formulahendry/mcp-server-code-runner" rel="noopener nofollow">GitHub - formulahendry/mcp-server-code-runner: Code Runner MCP Server</a></p>
<p data-pid="sSX9vRdj">&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.02757812905439815" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-04-20 17:36">2025-04-20 17:34</span>&nbsp;
<a href="https://www.cnblogs.com/formulahendry">formulahendry</a>&nbsp;
阅读(<span id="post_view_count">0</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18837144);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18837144', targetLink: 'https://www.cnblogs.com/formulahendry/p/18837144', title: '再见，SSE！你好，Streamable HTTP！轻松开发 Streamable HTTP MCP Server' })">举报</a>
</div>
        
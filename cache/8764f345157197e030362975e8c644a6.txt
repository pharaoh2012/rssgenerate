
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/longronglang/p/18947182" title="å‘å¸ƒäº 2025-06-25 06:02">
    <span role="heading" aria-level="2">ã€Playwright + Pythonã€‘ç³»åˆ—ï¼ˆåä¸ƒï¼‰æ­ç§˜ Playwright å¤„ç† Handlesï¼šå¼€å¯é«˜æ•ˆè‡ªåŠ¨åŒ–ä¹‹é—¨</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å…­å“¥ï¼ä»Šå¤©æ¥è·Ÿå¤§å®¶èŠä¸€èŠPlaywright å¤„ç† Handlesçš„æ–¹æ³•ï¼Œé¢å‘å¯¹è±¡ä¸ºåŠŸèƒ½æµ‹è¯•åŠé›¶åŸºç¡€å°ç™½ï¼Œè¿™é‡Œæˆ‘å°½é‡ç”¨å¤§ç™½è¯çš„æ–¹å¼ä¸¾ä¾‹è®²è§£ï¼ŒåŠ›æ±‚æ‰€æœ‰äººéƒ½èƒ½çœ‹æ‡‚ï¼Œå»ºè®®å¤§å®¶å…ˆæ”¶è—ï¼Œä»¥å…åé¢æ‰¾ä¸åˆ°ã€‚ğŸ˜</p>
<h2 id="ä¸€ä»€ä¹ˆæ˜¯handles">ä¸€ã€ä»€ä¹ˆæ˜¯Handles</h2>
<p>åœ¨ Playwright ä¸­ï¼Œ<strong>Handles</strong> æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œç”¨äºåœ¨ Playwright çš„è¿›ç¨‹ä¸æµè§ˆå™¨ç¯å¢ƒä¹‹é—´å»ºç«‹æ¡¥æ¢ï¼Œä½¿ä½ èƒ½å¤Ÿä» Playwright çš„ç¯å¢ƒä¸­è®¿é—®å’Œæ“ä½œæµè§ˆå™¨å†…çš„å¯¹è±¡ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>Handles</strong> è®©ä½ èƒ½å¤Ÿâ€œæŠ“ä½â€é¡µé¢ä¸Šçš„å…ƒç´ æˆ– JavaScript å¯¹è±¡ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</p>
<h2 id="äºŒä¸ºä»€ä¹ˆéœ€è¦-handles">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦ Handlesï¼Ÿ</h2>
<p><strong>è·¨ç¯å¢ƒæ“ä½œ</strong>ï¼šç”±äº Playwright è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œè€Œæµè§ˆå™¨ä¸­çš„ JavaScript ä»£ç è¿è¡Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼ŒHandles æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾—è¿™ä¸¤ä¸ªç¯å¢ƒä¹‹é—´çš„å¯¹è±¡å¯ä»¥ç›¸äº’æ“ä½œã€‚</p>
<p><strong>ä¿æŒå¯¹è±¡å¼•ç”¨</strong>ï¼šé€šè¿‡ Handlesï¼Œä½ å¯ä»¥åœ¨ Playwright ä¸­ä¿ç•™å¯¹æµè§ˆå™¨å†…å¯¹è±¡çš„å¼•ç”¨ï¼Œå³ä½¿è¿™äº›å¯¹è±¡åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å‘ç”Ÿäº†å˜åŒ–ï¼Œåªè¦ Handles æ²¡æœ‰è¢«é”€æ¯ï¼Œä½ ä¾ç„¶å¯ä»¥é€šè¿‡å®ƒä»¬è®¿é—®åˆ°è¿™äº›å¯¹è±¡ã€‚</p>
<p><strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼šä½¿ç”¨ Handles å¯ä»¥å»¶è¿Ÿæ‰§è¡ŒæŸäº›æ“ä½œï¼Œç›´åˆ°ç‰¹å®šæ¡ä»¶æ»¡è¶³ä¸ºæ­¢ï¼Œä¾‹å¦‚ç­‰å¾…æŸä¸ªå…ƒç´ å‡ºç°åœ¨é¡µé¢ä¸Šã€‚</p>
<h2 id="ä¸‰ä¸¤ç§ä¸»è¦ç±»å‹çš„-handles">ä¸‰ã€ä¸¤ç§ä¸»è¦ç±»å‹çš„ Handles</h2>
<h3 id="1jshandle">1ã€JSHandle</h3>
<p><strong>ç”¨é€”</strong>ï¼šå¼•ç”¨é¡µé¢ä¸­çš„ä»»ä½• JavaScript å¯¹è±¡ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼šJSHandle å¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„ JavaScript å¯¹è±¡ï¼Œæ¯”å¦‚æ•°ç»„ã€å‡½æ•°ã€DOM å…ƒç´ ç­‰ã€‚å®ƒæä¾›äº†ä¸€ç§æ–¹å¼ï¼Œè®©ä½ å¯ä»¥åœ¨ Playwright çš„ä¸Šä¸‹æ–‡ä¸­æ“ä½œè¿™äº›å¯¹è±¡ã€‚</p>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šé™¤éé¡µé¢å¯¼èˆªæˆ–æ˜¾å¼åœ°è°ƒç”¨äº† <code>dispose()</code> æ–¹æ³•ï¼Œå¦åˆ™ JSHandle ä¼šä¸€ç›´å­˜åœ¨ï¼Œé˜²æ­¢å¯¹åº”çš„ JavaScript å¯¹è±¡è¢«åƒåœ¾å›æ”¶ã€‚</p>
<h3 id="2elementhandle">2ã€ElementHandle</h3>
<p><strong>ç”¨é€”</strong>ï¼šä¸“é—¨ç”¨äºå¼•ç”¨é¡µé¢ä¸­çš„ DOM å…ƒç´ ï¼Œå¹¶ä¸”æä¾›äº†é¢å¤–çš„æ–¹æ³•æ¥å¯¹è¿™äº›å…ƒç´ æ‰§è¡Œæ“ä½œæˆ–æ–­è¨€å…¶å±æ€§ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼šElementHandle ç»§æ‰¿è‡ª JSHandleï¼Œå› æ­¤å…·å¤‡æ‰€æœ‰ JSHandle çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„æ–¹æ³•ï¼Œå¦‚ç‚¹å‡»ã€å¡«å†™æ–‡æœ¬ã€è·å–å…ƒç´ çš„è¾¹ç•Œæ¡†ç­‰ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥ç›´æ¥ä½œç”¨äº DOM å…ƒç´ ä¸Šã€‚</p>
<p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåŒ JSHandle ä¸€æ ·ï¼Œé™¤éé¡µé¢å¯¼èˆªæˆ–æ˜¾å¼åœ°è°ƒç”¨äº† <code>dispose()</code> æ–¹æ³•ï¼Œå¦åˆ™ ElementHandle ä¼šä¸€ç›´å­˜åœ¨ã€‚</p>
<h2 id="å››å®é™…åº”ç”¨ç¤ºä¾‹">å››ã€å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<p>å‡è®¾æˆ‘ä»¬è¦åœ¨ç™¾åº¦é¡µé¢ä¸Šè¿›è¡Œä¸€äº›æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Handles æ¥å®ç°ï¼š</p>
<h3 id="1è·å–-jshandle-ç¤ºä¾‹">1ã€è·å– JSHandle ç¤ºä¾‹</h3>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="language-python">from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://www.baidu.com")
    # è·å– window å¯¹è±¡çš„ JSHandle
    js_handle = page.evaluate_handle('window')
    # ä½¿ç”¨ jsHandle è¿›è¡Œè¯„ä¼°
    title = page.evaluate('window =&gt; window.document.title', js_handle)
    # æ–­è¨€æ ‡é¢˜
    assert title == "ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“"
    print(f"Page Title: {title}")
</code></pre>
<h3 id="2è·å–-elementhandle-ç¤ºä¾‹">2ã€è·å– ElementHandle ç¤ºä¾‹</h3>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="language-python">from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://www.baidu.com")
   # è·å–æœç´¢æ¡†çš„ ElementHandle
    search_box_handle = page.wait_for_selector('#kw')
    # æ–­è¨€æœç´¢æ¡†çš„å®½é«˜
    bounding_box = search_box_handle.bounding_box()
    print(f"Search Box Bounding Box: {bounding_box}")
    # æ–­è¨€æœç´¢æ¡†çš„ maxlength å±æ€§
    maxlength = search_box_handle.get_attribute('maxlength')
    assert maxlength == '255'
    
    browser.close()
</code></pre>
<h3 id="3å°†-handle-ä½œä¸ºå‚æ•°ä¼ é€’">3ã€å°† Handle ä½œä¸ºå‚æ•°ä¼ é€’</h3>
<p>å½“éœ€è¦åœ¨é¡µé¢ä¸Šä¸‹æ–‡ä¸­æ“ä½œç”± Playwright åˆ›å»ºçš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥å°† Handle ä¼ é€’ç»™ <code>evaluate</code> æ–¹æ³•ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<pre><code class="language-python">from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://www.baidu.com")
    # åˆ›å»ºæ–°çš„æ•°ç»„å¹¶è¿”å›æ•°ç»„çš„ JSHandle
    my_array_handle = page.evaluate_handle("() =&gt; { return [1]; }")
    # è·å–æ•°ç»„çš„é•¿åº¦
    length = page.evaluate("array =&gt; array.length", my_array_handle)
    print(f"Array Length: {length}")
    # å‘æ•°ç»„æ·»åŠ æ–°å…ƒç´ 
    page.evaluate("(array, newElement) =&gt; array.push(newElement)", [my_array_handle, 2])
    # å†æ¬¡è·å–æ•°ç»„çš„é•¿åº¦
    new_length = page.evaluate("array =&gt; array.length", my_array_handle)
    print(f"New Array Length: {new_length}")
    # é‡Šæ”¾å¯¹è±¡
    my_array_handle.dispose()
    browser.close()
</code></pre>
<h3 id="4-ä½¿ç”¨-locator-è€Œä¸æ˜¯-elementhandle">4. ä½¿ç”¨ Locator è€Œä¸æ˜¯ ElementHandle</h3>
<p>è™½ç„¶ ElementHandle ä»ç„¶å¯ç”¨ï¼Œä½† Playwright æ¨èä½¿ç”¨ <strong>Locator</strong> æ¥æ‰§è¡Œç”¨æˆ·åŠ¨ä½œå’Œæ–­è¨€ã€‚è¿™æ˜¯å› ä¸º Locator æ¯æ¬¡éƒ½ä¼šæ ¹æ®é€‰æ‹©å™¨é‡æ–°å®šä½é¡µé¢ä¸Šçš„å…ƒç´ ï¼Œç¡®ä¿å³ä½¿é¡µé¢çŠ¶æ€æ”¹å˜ä¹Ÿèƒ½æ­£ç¡®åœ°æ‰¾åˆ°å…ƒç´ ã€‚</p>
<p>ç¤ºä¾‹</p>
<pre><code class="language-python">from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto("https://www.baidu.com")
     # ä½¿ç”¨ Locator å®šä½æœç´¢æ¡†
    search_box_locator = page.locator('#kw')
    # è¾“å…¥æœç´¢è¯
    search_box_locator.fill('Playwright')
    # æäº¤æœç´¢
    page.locator('#su').click()
    # éªŒè¯æœç´¢ç»“æœ
    first_result = page.locator('h3 &gt; a').first
    print(first_result.text_content())
    browser.close()
</code></pre>
<h2 id="å†™åœ¨æœ€å"><font style="color: rgba(28, 31, 35, 1)">å†™åœ¨æœ€å</font></h2>
<p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Playwright å¤„ç† Handlesçš„ä½¿ç”¨æ–¹æ³•ã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´è¿™äº›ç¤ºä¾‹ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡ŒåŠ¨æ‰‹å°è¯•ã€‚ å¦‚éœ€è¦å…¨éƒ¨æºä»£ç ï¼Œå…¬ä¼—å·ï¼šè½¯ä»¶æµ‹è¯•å›ï¼Œè¯·å›å¤â€œ<strong>Playwrightå­¦ä¹ </strong>â€è·å–ï¼Œæ— å¼•å·å“¦ã€‚<br>
æœ€åï¼Œå¸Œæœ›å¤§å®¶éƒ½èƒ½é¡ºåˆ©æŒæ¡ï¼Œä¸€èµ·è¿›æ­¥ã€‚ä¹Ÿæ¬¢è¿åˆ†äº«ç»™æ›´å¤šæœ‰éœ€è¦çš„æœ‹å‹å“¦ï¼</p>
<p>è‹¥æœ‰æ”¶è·ï¼Œå°±ç‚¹ä¸ªèµå§</p>

</div>
<div id="MySignature" role="contentinfo">
    <p><span style="font-family: å¾®è½¯é›…é»‘; font-size: 22px; font-weight: normal; font-style: italic; text-decoration: none"><strong>ä¼˜ç§€ä¸å¤Ÿï¼Œä½ æ˜¯å¦æ— å¯æ›¿ä»£</strong></span></p>
<p><span style="font-family: å¾®è½¯é›…é»‘; font-size: 18px; font-weight: normal; font-style: italic; text-decoration: none"><strong>
è½¯ä»¶æµ‹è¯•äº¤æµQQç¾¤ï¼š721256703ï¼ŒæœŸå¾…ä½ çš„åŠ å…¥ï¼ï¼</strong></span></p>
<p><span style="font-family: å¾®è½¯é›…é»‘; font-size: 18px; font-weight: normal; font-style: italic; text-decoration: none"><strong>æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼šè½¯ä»¶æµ‹è¯•å› </strong></span></p>
<img src="https://www.cnblogs.com/images/cnblogs_com/longronglang/1061549/o_QQ%E6%88%AA%E5%9B%BE20190728134401.jpg" height="200" width="450"><br>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-06-25 06:02">2025-06-25 06:02</span>&nbsp;
<a href="https://www.cnblogs.com/longronglang">ä¹…æ›²å¥</a>&nbsp;
é˜…è¯»(<span id="post_view_count">13</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18947182);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18947182', targetLink: 'https://www.cnblogs.com/longronglang/p/18947182', title: 'ã€Playwright + Pythonã€‘ç³»åˆ—ï¼ˆåä¸ƒï¼‰æ­ç§˜ Playwright å¤„ç† Handlesï¼šå¼€å¯é«˜æ•ˆè‡ªåŠ¨åŒ–ä¹‹é—¨' })">ä¸¾æŠ¥</a>
</div>
        
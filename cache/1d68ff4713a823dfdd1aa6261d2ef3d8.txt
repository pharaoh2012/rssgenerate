
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/SmalBox/p/19035523" title="å‘å¸ƒäº 2025-08-13 12:07">
    <span role="heading" aria-level="2">ã€æ¸²æŸ“æµæ°´çº¿ã€‘[å‡ ä½•é˜¶æ®µ]-[æ›²é¢ç»†åˆ†]ä»¥UnityURPä¸ºä¾‹</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        <img src="https://img2024.cnblogs.com/blog/3685400/202508/3685400-20250813121315216-901546302.png" alt="ã€æ¸²æŸ“æµæ°´çº¿ã€‘[å‡ ä½•é˜¶æ®µ]-[æ›²é¢ç»†åˆ†]ä»¥UnityURPä¸ºä¾‹" class="desc_img">
        æœ¬æ–‡ä»‹ç»äº†ç»†åˆ†ç€è‰²å™¨çš„æ ¸å¿ƒåŸç†ä¸å®ç°æ–¹æ³•ã€‚ç»†åˆ†ç€è‰²å™¨åˆ†ä¸ºæ›²é¢ç»†åˆ†ç€è‰²å™¨å’Œç»†åˆ†è®¡ç®—ç€è‰²å™¨ï¼Œä¸»è¦ç”¨äºåŠ¨æ€å¢åŠ æ¨¡å‹ç»†èŠ‚ï¼Œæå‡è‰åœ°ã€åœ°å½¢ç­‰åœºæ™¯çš„æ¸²æŸ“æ•ˆæœã€‚æ–‡ç« è¯¦ç»†è§£æäº†ç»†åˆ†è¿‡ç¨‹çš„ä¸‰ä¸ªé˜¶æ®µï¼šHull Shaderå®šä¹‰ç»†åˆ†å› å­ï¼ŒTessellation Primitive Generatoræ‰§è¡Œç¡¬ä»¶çº§ç»†åˆ†æ“ä½œï¼ŒDomain Shaderå®Œæˆé¡¶ç‚¹ç©ºé—´è½¬æ¢ã€‚é‡ç‚¹é˜è¿°äº†Delaunayä¸‰è§’å‰–åˆ†åŸåˆ™åœ¨URPä¸­çš„å®ç°ï¼ŒåŒ…æ‹¬ç©ºåœ†ç‰¹æ€§å’Œå±€éƒ¨ä¼˜åŒ–æ–¹æ³•ã€‚æœ€åæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„URPç»†åˆ†ç€è‰²å™¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†åŠ¨æ€ç»†åˆ†æ§åˆ¶ã€é¡¶ç‚¹ä½ç§»ç­‰å…³é”®æŠ€æœ¯ï¼Œå¹¶
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<ul>
<li><strong>ç»†åˆ†ç€è‰²å™¨åˆ†ä¸º</strong>ï¼šæ›²é¢ç»†åˆ†ç€è‰²å™¨ï¼ˆUnityåœ¨æŒ‡å®šå¹³å°ç¡¬ä»¶æ”¯æŒï¼‰ã€ç»†åˆ†è®¡ç®—ç€è‰²å™¨ã€‚ä½¿ç”¨ç‰‡é¢æ¥æè¿°ä¸€ä¸ªç‰©ä½“å½¢çŠ¶ï¼Œå¹¶å¢åŠ é¡¶ç‚¹å’Œç‰‡é¢æ•°é‡ï¼Œä½¿æ¨¡å‹å¤–è§‚å¼€èµ·æ¥æ›´å¹³æ»‘ã€‚</li>
<li>â€Œ<strong>ä½œç”¨</strong>â€Œï¼šåŠ¨æ€ç»†åˆ†ä¸‰è§’é¢ç‰‡ï¼Œæå‡æ¨¡å‹ç»†èŠ‚ï¼ˆå¦‚è‰åœ°ã€åœ°å½¢æ¸²æŸ“ï¼‰ï¼Œä¼˜åŒ–å¤§åœºæ™¯æ€§èƒ½ â€Œã€‚</li>
<li>è¿™æ˜¯ä¸€ä¸ªâ€Œ<strong>å¯é€‰</strong>â€Œé˜¶æ®µã€‚å®ƒåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¹‹åè¿è¡Œï¼Œè´Ÿè´£æ ¹æ®è®¾å®šçš„ç»†åˆ†å› å­ (Tessellation Factor) å°†è¾“å…¥çš„å›¾å…ƒï¼ˆé€šå¸¸æ˜¯ä¸‰è§’å½¢é¢ç‰‡ï¼‰åŠ¨æ€ç»†åˆ†ä¸ºæ›´å°çš„ä¸‰è§’é¢ç‰‡ï¼Œç”Ÿæˆæ›´å¤šé¡¶ç‚¹ã€‚â€Œ</li>
</ul>
<blockquote>
<p><a href="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" target="_blank" rel="noopener nofollow">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h1 id="ä¸‰ä¸ªå­é˜¶æ®µ">ä¸‰ä¸ªå­é˜¶æ®µï¼š</h1>
<h2 id="hull-shaderå®šä¹‰æ¯æ¡è¾¹å’Œå†…éƒ¨åˆ†å‰²å› å­tessellation-factor">Hull Shaderï¼šå®šä¹‰æ¯æ¡è¾¹å’Œå†…éƒ¨åˆ†å‰²å› å­ï¼ˆTessellation Factorï¼‰ã€‚â€Œ</h2>
<ul>
<li>æ¥æ”¶åŸå§‹æ§åˆ¶ç‚¹æ•°æ®å¹¶å®šä¹‰ç»†åˆ†å› å­(Tessellation Factor)</li>
<li>é€šè¿‡<code>patch constant function</code>è®¡ç®—æ¯æ¡è¾¹å’Œå†…éƒ¨çš„ç»†åˆ†ç­‰çº§</li>
<li>æ”¯æŒåˆ†æ•°ç»†åˆ†æ¨¡å¼(fractional_odd/fractional_even)å®ç°å¹³æ»‘è¿‡æ¸¡</li>
</ul>
<h3 id="ç›®æ ‡"><strong>ç›®æ ‡</strong>â€Œï¼š</h3>
<ul>
<li>å®šä¹‰åŸå§‹æ§åˆ¶ç‚¹æ•°æ®å¹¶è®¡ç®—ç»†åˆ†å› å­(Tessellation Factor)</li>
<li>ç¡®å®šæ¯ä¸ªpatchçš„è¾¹å’Œå†…éƒ¨ç»†åˆ†ç­‰çº§</li>
</ul>
<h3 id="è¾“å…¥è¾“å‡º">â€Œ<strong>è¾“å…¥è¾“å‡º</strong>â€Œï¼š</h3>
<ul>
<li>è¾“å…¥ï¼šåŸå§‹æ§åˆ¶ç‚¹æ•°æ®ï¼ˆä½ç½®ã€æ³•çº¿ã€UVç­‰ï¼‰</li>
<li>è¾“å‡ºï¼š
<ul>
<li>ç»†åˆ†å› å­ï¼ˆ<code>SV_TessFactor</code>æ ‡è®°è¾¹ï¼Œ<code>SV_InsideTessFactor</code>æ ‡è®°å†…éƒ¨ï¼‰</li>
<li>å¤„ç†åçš„æ§åˆ¶ç‚¹æ•°æ®ï¼ˆé€šè¿‡<code>INTERNALTESSPOS</code>è¯­ä¹‰æ ‡è®°ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="å®ç°å…³é”®">â€Œ<strong>å®ç°å…³é”®</strong>â€Œï¼š</h3>
<pre><code class="language-glsl">hlsl
struct TessFactors {
    float edge[3] : SV_TessFactor; // ä¸‰æ¡è¾¹çš„ç»†åˆ†å› å­
    float inside : SV_InsideTessFactor; // å†…éƒ¨ç»†åˆ†å› å­
};
</code></pre>
<h2 id="tessellation-primitive-generator-å›ºå®šåŠŸèƒ½ç¡¬ä»¶æ ¹æ®-hull-shader-è¾“å‡ºçš„å› å­å®é™…æ‰§è¡Œç»†åˆ†æ“ä½œ">â€Œ<strong>Tessellation Primitive Generator å›ºå®šåŠŸèƒ½</strong>â€Œï¼šç¡¬ä»¶æ ¹æ® Hull Shader è¾“å‡ºçš„å› å­å®é™…æ‰§è¡Œç»†åˆ†æ“ä½œã€‚â€Œ</h2>
<ul>
<li>GPUå›ºå®šåŠŸèƒ½é˜¶æ®µï¼Œæ ¹æ®Hull Shaderè¾“å‡ºçš„ç»†åˆ†å› å­ç”Ÿæˆæ–°é¡¶ç‚¹æ‹“æ‰‘</li>
</ul>
<h3 id="ç›®æ ‡-1"><strong>ç›®æ ‡</strong>â€Œï¼š</h3>
<ul>
<li>æ ¹æ®Hull Shaderè¾“å‡ºçš„ç»†åˆ†å› å­ç”Ÿæˆæ–°é¡¶ç‚¹æ‹“æ‰‘</li>
<li>å°†åŸå§‹patchç»†åˆ†ä¸ºæ›´å¯†é›†çš„ä¸‰è§’ç½‘æ ¼</li>
</ul>
<h3 id="è¾“å…¥è¾“å‡º-1">â€Œ<strong>è¾“å…¥è¾“å‡º</strong>â€Œï¼š</h3>
<ul>
<li>
<p><strong>è¾“å…¥ï¼šHull Shaderè¾“å‡ºçš„ç»†åˆ†å› å­å’Œæ§åˆ¶ç‚¹</strong></p>
<pre><code class="language-glsl">hlsl

// æ¥è‡ªHull Shaderçš„è¾“å‡º
struct TessControlPoint {
    float4 positionOS : INTERNALTESSPOS;
    float3 normalOS : NORMAL;
    float2 uv : TEXCOORD0;
};

// ç»†åˆ†å› å­å®šä¹‰
struct TessFactors {
    float edge[3] : SV_TessFactor; // æ¯æ¡è¾¹çš„ç»†åˆ†ç­‰çº§
    float inside : SV_InsideTessFactor; // å†…éƒ¨ç»†åˆ†ç­‰çº§
};
</code></pre>
</li>
<li>
<p><strong>è¾“å‡ºï¼šç»†åˆ†åçš„é¡¶ç‚¹UVåæ ‡å’Œæ‹“æ‰‘å…³ç³»</strong></p>
<ul>
<li>
<p>ç”Ÿæˆçš„é‡å¿ƒåæ ‡æ•°æ®ï¼š</p>
<pre><code class="language-glsl">hlsl
float3 baryCoords : SV_DomainLocation; // æ–°é¡¶ç‚¹çš„é‡å¿ƒåæ ‡
</code></pre>
</li>
<li>
<p>è¾“å‡ºæ‹“æ‰‘ç±»å‹ç”±Hull Shaderçš„<code>[outputtopology]</code>å±æ€§å®šä¹‰ï¼ˆå¦‚triangle_cwï¼‰</p>
</li>
</ul>
</li>
</ul>
<h3 id="ç‰¹æ€§">â€Œ<strong>ç‰¹æ€§</strong>â€Œï¼š</h3>
<ul>
<li>GPUè‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€å¼€å‘è€…ç¼–ç </li>
<li>æ”¯æŒåˆ†æ•°ç»†åˆ†æ¨¡å¼å®ç°å¹³æ»‘è¿‡æ¸¡</li>
</ul>
<h2 id="å®ç°åŸç†"><strong>å®ç°åŸç†</strong></h2>
<h3 id="ç»†åˆ†ç®—æ³•">â€Œ<strong>ç»†åˆ†ç®—æ³•</strong>â€Œ</h3>
<ul>
<li>
<p>å¯¹åŸå§‹ä¸‰è§’é¢ç‰‡è¿›è¡Œé€’å½’ç»†åˆ†ï¼Œé‡‡ç”¨Delaunayä¸‰è§’å‰–åˆ†åŸåˆ™</p>
<p>GPUä½¿ç”¨çš„Delaunayä¸‰è§’å‰–åˆ†åŸåˆ™æ˜¯ä¸€ç§ä¼˜åŒ–ç½‘æ ¼æ‹“æ‰‘çš„æ•°å­¦æ–¹æ³•</p>
<ul>
<li>
<p>â€Œ<strong>Delaunayä¸‰è§’å‰–åˆ†åŸåˆ™</strong>â€Œ</p>
<ol>
<li>â€Œ<strong>ç©ºåœ†ç‰¹æ€§</strong>â€Œï¼šä»»æ„ä¸‰è§’å½¢çš„å¤–æ¥åœ†å†…ä¸åŒ…å«å…¶ä»–é¡¶ç‚¹</li>
<li>â€Œ<strong>æœ€å¤§åŒ–æœ€å°è§’</strong>â€Œï¼šé¿å…å‡ºç°å°–é”ä¸‰è§’å½¢ï¼Œæé«˜ç½‘æ ¼è´¨é‡</li>
<li>â€Œ<strong>å±€éƒ¨ä¼˜åŒ–</strong>â€Œï¼šé€šè¿‡è¾¹ç¿»è½¬(edge flip)é€æ­¥ä¼˜åŒ–ä¸‰è§’ç½‘æ ¼</li>
</ol>
</li>
<li>
<p>â€Œ<strong>URPä¸­çš„å®ç°ç‰¹ç‚¹</strong>â€Œï¼š</p>
<ol>
<li>åœ¨Tessellation Primitive Generatoré˜¶æ®µè‡ªåŠ¨åº”ç”¨</li>
<li>å¯¹ç»†åˆ†åçš„æ–°é¡¶ç‚¹è¿›è¡Œæ‹“æ‰‘ä¼˜åŒ–</li>
<li>ä¿æŒä¸åŸç½‘æ ¼çš„å¹³æ»‘è¿‡æ¸¡</li>
</ol>
</li>
<li>
<p>â€Œ<strong>å…·ä½“ç¤ºä¾‹</strong>â€Œï¼š</p>
<p>åŸå§‹ä¸‰è§’é¢ç‰‡ï¼ˆæ§åˆ¶ç‚¹A/B/Cï¼‰ç»è¿‡ç»†åˆ†åï¼š</p>
<ul>
<li>è®¡ç®—ç»†åˆ†å› å­ä¸º3æ—¶ï¼š</li>
</ul>
<pre><code>åŸå§‹ä¸‰è§’å½¢ï¼š A
            / \
           C---B

ç»†åˆ†åæ‹“æ‰‘ï¼š
      A
     /|\
    / | \
   C--D--B
    \ | /
     \|/
      E
</code></pre>
<ul>
<li>å…¶ä¸­D/Eæ˜¯æ–°ç”Ÿæˆçš„é¡¶ç‚¹ï¼Œæ‰€æœ‰ä¸‰è§’å½¢éƒ½æ»¡è¶³ï¼š
<ul>
<li>âˆ ADB + âˆ AEB â‰ˆ 180Â°</li>
<li>å¤–æ¥åœ†ä¸åŒ…å«å…¶ä»–é¡¶ç‚¹</li>
</ul>
</li>
</ul>
</li>
<li>
<p>â€Œ<strong>URPä¸­çš„å®é™…åº”ç”¨</strong>â€Œï¼š</p>
<ol>
<li>å½“ä½¿ç”¨<code>[partitioning("fractional_odd")]</code>æ—¶ï¼š
<ul>
<li>ä¼šåœ¨è¿‡æ¸¡åŒºåŸŸè‡ªåŠ¨åº”ç”¨Delaunayä¼˜åŒ–</li>
<li>ç¡®ä¿ä¸åŒç»†åˆ†ç­‰çº§é—´çš„å¹³æ»‘è¿æ¥</li>
</ul>
</li>
<li>ä½ç§»è´´å›¾å¤„ç†æ—¶ï¼š
<ul>
<li>æ–°é¡¶ç‚¹æ ¹æ®Delaunayè§„åˆ™åˆ†å¸ƒ</li>
<li>ä½ç§»åçš„æ³•çº¿è®¡ç®—æ›´å‡†ç¡®</li>
</ul>
</li>
</ol>
</li>
<li>
<p>è¿™ç§å‰–åˆ†æ–¹å¼ä½¿å¾—ï¼š</p>
<ul>
<li>ç»†åˆ†åçš„ç½‘æ ¼æ›´é€‚åº”æ›²é¢å˜å½¢</li>
<li>é¿å…æ¸²æŸ“æ—¶çš„è¤¶çš±ç°è±¡</li>
<li>æå‡ä½ç§»è´´å›¾çš„è§†è§‰æ•ˆæœ</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ ¹æ®åˆ†æ•°ç»†åˆ†æ¨¡å¼ï¼ˆfractional_odd/evenï¼‰å¤„ç†è¿‡æ¸¡åŒºåŸŸ</p>
</li>
</ul>
<h3 id="åæ ‡è½¬æ¢-pnewp0up1vp2w">â€Œåæ ‡è½¬æ¢ $Pnew=P0â‹…u+P1â‹…v+P2â‹…w$</h3>
<ul>
<li>å°†å‚æ•°ç©ºé—´åæ ‡(u,v,w)è½¬æ¢ä¸ºæ–°çš„é¡¶ç‚¹ä½ç½®</li>
</ul>
<h3 id="æ€§èƒ½ä¼˜åŒ–"><strong>æ€§èƒ½ä¼˜åŒ–</strong>â€Œ</h3>
<ul>
<li>é‡‡ç”¨å¹¶è¡Œè®¡ç®—å¤„ç†å¤šä¸ªpatch</li>
<li>è‡ªåŠ¨å‰”é™¤å±å¹•ç©ºé—´ä¸å¯è§çš„ç»†åˆ†ç»“æœ</li>
</ul>
<h2 id="domain-shader">â€Œ<strong>Domain Shader</strong>â€Œï¼š</h2>
<p>å°†ç»†åˆ†åä½äº<strong>é‡å¿ƒåæ ‡ç³»</strong>(<em>é‡å¿ƒåæ ‡å†…å®¹åç»­å•å¼€ä¸€ç¯‡è®²è§£</em>)ä¸­çš„æ–°é¡¶ç‚¹ä½ç½®è½¬æ¢åˆ°ç›®æ ‡ç©ºé—´ï¼ˆå¦‚ä¸–ç•Œç©ºé—´æˆ–è£å‰ªç©ºé—´ï¼‰ã€‚â€Œ</p>
<ul>
<li>å°†ç»†åˆ†åçš„UVåæ ‡æ˜ å°„åˆ°3Dç©ºé—´</li>
<li>æ‰§è¡Œé¡¶ç‚¹ä½ç§»ç­‰åæœŸå¤„ç†</li>
</ul>
<h3 id="ç›®æ ‡-2"><strong>ç›®æ ‡</strong>â€Œï¼š</h3>
<ul>
<li>å°†ç»†åˆ†åçš„UVåæ ‡æ˜ å°„åˆ°3Dç©ºé—´</li>
<li>æ‰§è¡Œé¡¶ç‚¹ä½ç§»ç­‰åæœŸå¤„ç†</li>
</ul>
<h3 id="è¾“å…¥è¾“å‡º-2">â€Œ<strong>è¾“å…¥è¾“å‡º</strong>â€Œï¼š</h3>
<ul>
<li>è¾“å…¥ï¼šç»†åˆ†åçš„UVåæ ‡å’ŒåŸå§‹æ§åˆ¶ç‚¹æ•°æ®</li>
<li>è¾“å‡ºï¼šæœ€ç»ˆé¡¶ç‚¹ä½ç½®ï¼ˆ<code>SV_POSITION</code>ï¼‰å’Œå…¶ä»–é¡¶ç‚¹å±æ€§</li>
</ul>
<h3 id="å®ç°ç¤ºä¾‹">â€Œ<strong>å®ç°ç¤ºä¾‹</strong>â€Œï¼š</h3>
<pre><code class="language-glsl">hlsl
[domain("tri")] // å£°æ˜å¤„ç†ä¸‰è§’å½¢patch
Varyings domain(TessFactors factors, OutputPatch&lt;DomainAttributes, 3&gt; patch, float3 baryCoords : SV_DomainLocation) {
    Varyings OUT;
    // æ’å€¼è®¡ç®—æ–°é¡¶ç‚¹å±æ€§
    OUT.positionWS = TransformObjectToWorld(patch[0].positionOS * baryCoords.x + ...);
    return OUT;
}
</code></pre>
<h3 id="åŠ¨æ€æ§åˆ¶æŠ€å·§">â€Œ<strong>åŠ¨æ€æ§åˆ¶æŠ€å·§</strong>â€Œï¼š</h3>
<ul>
<li>
<p>é€šè¿‡æ‘„åƒæœºè·ç¦»è°ƒæ•´ç»†åˆ†å› å­ï¼š</p>
<pre><code class="language-glsl">hlsl
float CalcTessFactor(float3 worldPos) {
    return lerp(_MaxTess, _MinTess, saturate(distance(_WorldSpaceCameraPos, worldPos) / _TessRange));
}
</code></pre>
</li>
<li>
<p>ç»“åˆé«˜åº¦å›¾å®ç°ä½ç§»æ•ˆæœ</p>
</li>
</ul>
<h1 id="é…ç½®">â€Œé…ç½®ï¼š</h1>
<ul>
<li>éœ€æ˜¾å¼å¯ç”¨ï¼ˆHLSL ä¸­å£°æ˜&nbsp;<code>hull</code>&nbsp;å’Œ&nbsp;<code>domain</code>&nbsp;å‡½æ•°ï¼‰ã€‚</li>
<li>å¿…é¡»å£°æ˜<code>#pragma target 4.6</code>ä»¥å¯ç”¨DX11/OpenGL Coreç‰¹æ€§3</li>
<li>éœ€æ‰‹åŠ¨å®ç°Hull/Domain Shaderï¼ŒURPä¸æä¾›è¡¨é¢ç€è‰²å™¨çš„ç®€åŒ–å†™æ³•</li>
<li>å»ºè®®ç»“åˆæ‘„åƒæœºè·ç¦»åŠ¨æ€æ§åˆ¶ç»†åˆ†å› å­ä»¥ä¼˜åŒ–æ€§èƒ½</li>
</ul>
<h1 id="urpä¸­çš„å…·ä½“å®ç°æ­¥éª¤">URPä¸­çš„å…·ä½“å®ç°æ­¥éª¤ï¼š</h1>
<h2 id="å£°æ˜ç¼–è¯‘ç›®æ ‡ä¸º46ä»¥ä¸Š">å£°æ˜ç¼–è¯‘ç›®æ ‡ä¸º4.6ä»¥ä¸Šï¼š</h2>
<pre><code class="language-glsl">hlsl
#pragma target 4.6
</code></pre>
<h2 id="å®šä¹‰ä¸‰ä¸ªå…³é”®ç¨‹åº">å®šä¹‰ä¸‰ä¸ªå…³é”®ç¨‹åºï¼š</h2>
<pre><code class="language-glsl">hlsl
#pragma vertex BeforeTessVert
#pragma hull HullProgram
#pragma domain DomainProgram
</code></pre>
<h2 id="æ§åˆ¶ç‚¹æ•°æ®ç»“æ„éœ€åŒ…å«é¡¶ç‚¹ä½ç½®æ³•çº¿ç­‰åŸºç¡€å±æ€§">æ§åˆ¶ç‚¹æ•°æ®ç»“æ„éœ€åŒ…å«é¡¶ç‚¹ä½ç½®ã€æ³•çº¿ç­‰åŸºç¡€å±æ€§</h2>
<h3 id="åŠ¨æ€ç»†åˆ†æ§åˆ¶æ ·ä¾‹">â€ŒåŠ¨æ€ç»†åˆ†æ§åˆ¶æ ·ä¾‹ï¼š</h3>
<ul>
<li>é€šè¿‡è·ç¦»æˆ–å±å¹•ç©ºé—´å°ºå¯¸è‡ªåŠ¨è°ƒæ•´ç»†åˆ†å› å­ï¼š</li>
</ul>
<pre><code class="language-glsl">hlsl
// æ ¹æ®æ‘„åƒæœºè·ç¦»åŠ¨æ€è®¡ç®—ç»†åˆ†å› å­
float CalcTessFactor(float3 worldPos) {
    float dist = distance(_WorldSpaceCameraPos, worldPos);
    return lerp(_MaxTess, _MinTess, saturate(dist / _TessRange));
}
</code></pre>
<h3 id="å¸¸è§åº”ç”¨åœºæ™¯">å¸¸è§åº”ç”¨åœºæ™¯ï¼š</h3>
<ul>
<li>åœ°å½¢åŠ¨æ€LODï¼šæ ¹æ®è§†è§’è·ç¦»ç»†åˆ†åœ°é¢ç½‘æ ¼3</li>
<li>æ›²é¢å¹³æ»‘ï¼šå°†ä½æ¨¡è½¬æ¢ä¸ºé«˜æ¨¡æ›²é¢2</li>
<li>åŠ¨æ€ä½ç§»ï¼šç»“åˆé«˜åº¦å›¾å®ç°å®æ—¶å‡¹å‡¸æ•ˆæœ6</li>
</ul>
<h3 id="æ³¨æ„äº‹é¡¹">â€Œæ³¨æ„äº‹é¡¹ï¼š</h3>
<ul>
<li>ä»…æ”¯æŒDX11/OpenGL Coreç­‰ç°ä»£å›¾å½¢API6</li>
<li>ç»†åˆ†è¿‡åº¦ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œéœ€åˆç†è®¾ç½®ä¸Šé™5</li>
<li>URPä¸­éœ€æ‰‹åŠ¨å®ç°Hull/Domain Shaderï¼Œä¸åŒäºå†…ç½®ç®¡çº¿çš„è¡¨é¢ç€è‰²å™¨ç®€åŒ–å†™æ³•</li>
</ul>
<h2 id="unity-urpä¸­å®Œæ•´çš„æ›²é¢ç»†åˆ†ç€è‰²å™¨ç¤ºä¾‹åŒ…å«é¡¶ç‚¹ä½ç§»æ•ˆæœå’ŒåŠ¨æ€ç»†åˆ†æ§åˆ¶"><strong>Unity URPä¸­å®Œæ•´çš„æ›²é¢ç»†åˆ†ç€è‰²å™¨ç¤ºä¾‹ï¼ŒåŒ…å«é¡¶ç‚¹ä½ç§»æ•ˆæœå’ŒåŠ¨æ€ç»†åˆ†æ§åˆ¶</strong></h2>
<h2 id="ç¤ºä¾‹å®ç°åŠŸèƒ½"><strong>ç¤ºä¾‹å®ç°åŠŸèƒ½ï¼š</strong></h2>
<ul>
<li>åŠ¨æ€ç»†åˆ†æ§åˆ¶ï¼šæ ¹æ®æ‘„åƒæœºè·ç¦»è‡ªåŠ¨è°ƒæ•´ç»†åˆ†å› å­</li>
<li>é¡¶ç‚¹ä½ç§»æ•ˆæœï¼šé€šè¿‡é«˜åº¦å›¾(_DispTex)é©±åŠ¨é¡¶ç‚¹åç§»</li>
<li>åˆ†æ•°ç»†åˆ†æ¨¡å¼ï¼šä½¿ç”¨fractional_oddå®ç°å¹³æ»‘è¿‡æ¸¡</li>
<li>å®Œæ•´æ¸²æŸ“ç®¡çº¿ï¼šåŒ…å«é¡¶ç‚¹/ç»†åˆ†/ç‰‡å…ƒå…¨é˜¶æ®µå¤„ç†</li>
<li>URPå…¼å®¹æ€§ï¼šä½¿ç”¨URPçš„ShaderLibraryæ ¸å¿ƒå‡½æ•°</li>
</ul>
<h2 id="ä½¿ç”¨è¯´æ˜"><strong>ä½¿ç”¨è¯´æ˜ï¼š</strong></h2>
<ul>
<li>åˆ›å»ºæè´¨çƒå¹¶åº”ç”¨æ­¤ç€è‰²å™¨</li>
<li>ä¸º_DispTexæŒ‡å®šé«˜åº¦å›¾çº¹ç†</li>
<li>è°ƒæ•´_TessFactoræ§åˆ¶ç»†åˆ†å¯†åº¦</li>
<li>é€šè¿‡_Displacementå‚æ•°æ§åˆ¶ä½ç§»å¼ºåº¦</li>
</ul>
<h2 id="tessellationexampleshader"><strong>TessellationExample.shader</strong></h2>
<pre><code class="language-glsl">// HLSL
Shader "Custom/TessellationExample"
{
    Properties
    {
        _MainTex ("Base Texture", 2D) = "white" {}
        _TessFactor ("Tessellation Factor", Range(1, 64)) = 4
        _Displacement ("Displacement", Range(0, 1.0)) = 0.3
        _DispTex ("Displacement Texture", 2D) = "gray" {}
    }

    SubShader
    {
        Tags { "RenderPipeline"="UniversalPipeline" }

        HLSLINCLUDE
        #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"

        struct Attributes
        {
            float4 positionOS : POSITION;
            float3 normalOS : NORMAL;
            float2 uv : TEXCOORD0;
        };

        struct TessControlPoint
        {
            float4 positionOS : INTERNALTESSPOS;
            float3 normalOS : NORMAL;
            float2 uv : TEXCOORD0;
        };

        struct TessFactors
        {
            float edge[3] : SV_TessFactor;
            float inside : SV_InsideTessFactor;
        };

        struct DomainOutput
        {
            float4 positionCS : SV_POSITION;
            float2 uv : TEXCOORD0;
            float3 normalWS : NORMAL;
        };
        ENDHLSL

        Pass
        {
            Name "ForwardLit"
            Tags { "LightMode"="UniversalForward" }

            HLSLPROGRAM
            #pragma vertex vert
            #pragma hull hull
            #pragma domain domain
            #pragma fragment frag
            #pragma target 4.6

            sampler2D _MainTex;
            sampler2D _DispTex;
            float _TessFactor;
            float _Displacement;

            TessControlPoint vert(Attributes v)
            {
                TessControlPoint o;
                o.positionOS = v.positionOS;
                o.normalOS = v.normalOS;
                o.uv = v.uv;
                return o;
            }

            [domain("tri")]
            [partitioning("fractional_odd")]
            [outputtopology("triangle_cw")]
            [outputcontrolpoints(3)]
            [patchconstantfunc("patchConstantFunc")]
            TessControlPoint hull(InputPatch&lt;TessControlPoint, 3&gt; patch, uint id : SV_OutputControlPointID)
            {
                return patch[id];
            }

            TessFactors patchConstantFunc(InputPatch&lt;TessControlPoint, 3&gt; patch)
            {
                TessFactors f;
                float avgTess = _TessFactor * (1 - saturate(length(_WorldSpaceCameraPos - TransformObjectToWorld(patch[0].positionOS.xyz)) / 20));
                f.edge[0] = f.edge[1] = f.edge[2] = avgTess;
                f.inside = avgTess;
                return f;
            }

            [domain("tri")]
            DomainOutput domain(TessFactors factors, OutputPatch&lt;TessControlPoint, 3&gt; patch, float3 baryCoords : SV_DomainLocation)
            {
                DomainOutput o;
                
                // æ’å€¼è®¡ç®—åŸºç¡€å±æ€§
                float3 positionOS = patch[0].positionOS.xyz * baryCoords.x + 
                                   patch[1].positionOS.xyz * baryCoords.y + 
                                   patch[2].positionOS.xyz * baryCoords.z;
                
                float2 uv = patch[0].uv * baryCoords.x + 
                            patch[1].uv * baryCoords.y + 
                            patch[2].uv * baryCoords.z;
                
                // ä»é«˜åº¦å›¾è·å–ä½ç§»å€¼
                float disp = tex2Dlod(_DispTex, float4(uv, 0, 0)).r * _Displacement;
                positionOS += normalize(patch[0].normalOS) * disp;
                
                // è½¬æ¢åˆ°è£å‰ªç©ºé—´
                o.positionCS = TransformObjectToHClip(positionOS);
                o.uv = uv;
                o.normalWS = TransformObjectToWorldNormal(patch[0].normalOS);
                return o;
            }

            half4 frag(DomainOutput i) : SV_Target
            {
                half4 col = tex2D(_MainTex, i.uv);
                return col;
            }
            ENDHLSL
        }
    }
}
</code></pre>
<hr>
<blockquote>
<p><a href="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" target="_blank" rel="noopener nofollow">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>ï¼ˆæ¬¢è¿ç‚¹èµç•™è¨€æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.004861111111111111" data-date-updated="2025-08-13 12:14">2025-08-13 12:07</span>&nbsp;
<a href="https://www.cnblogs.com/SmalBox">SmalBox</a>&nbsp;
é˜…è¯»(<span id="post_view_count">41</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19035523);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19035523', targetLink: 'https://www.cnblogs.com/SmalBox/p/19035523', title: 'ã€æ¸²æŸ“æµæ°´çº¿ã€‘[å‡ ä½•é˜¶æ®µ]-[æ›²é¢ç»†åˆ†]ä»¥UnityURPä¸ºä¾‹' })">ä¸¾æŠ¥</a>
</div>
        

            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/xiaobaiysf/p/18920913" title="发布于 2025-06-09 16:25">
    <span role="heading" aria-level="2">通过 MCP 服务对接 PostgreSQL 问数 （详细实操说明）</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h1 id="一实操环境">一、实操环境</h1>
<p>1、1Panel：<a href="https://1panel.cn/" target="_blank" rel="noopener nofollow">Linux服务器运维管理面板</a><br>
2、MaxKB：<a href="https://maxkb.cn/index.html" target="_blank" rel="noopener nofollow">强大易用的企业AI助手</a><br>
3、MCP网站：<a href="https://mcp.so/" target="_blank" rel="noopener nofollow">https://mcp.so/</a></p>
<h1 id="二操作说明">二、操作说明</h1>
<h2 id="21步骤一1panel-20-安装部署">2.1、步骤一：1Panel 2.0 安装部署</h2>
<p>本次采用的是 1Panel v2.0 最新版本进行安装部署，选择已有 Linux 服务器，通过命令行安装：</p>
<pre><code>INSTALL_MODE=beta bash -c "$(curl -sSL https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh)"
</code></pre>
<p>其中安装过程中如果存在问题参见https://1panel.cn/docs/installation/online_installation/ 中的注意事项即可，其中需要特别强调的是：<br>
1、确保服务器的操作系统与脚本匹配；<br>
2、如果首次安装失败课完成 docker 环境安装；<br>
3、安装完成后确认端口如果是腾讯云或者阿里云服务器确保端口开放。</p>
<h2 id="22步骤二maxkb-安装部署">2.2、步骤二：MaxKB 安装部署</h2>
<p>此次不做赘述，参见官网相关文档即可：<a href="https://maxkb.cn/docs/installation/online_installtion/%E3%80%82" target="_blank" rel="noopener nofollow">https://maxkb.cn/docs/installation/online_installtion/。</a></p>
<h2 id="23步骤三通过-mcpso-网站获取postgresql的配置文件">2.3、步骤三：通过 mcp.so 网站获取PostgreSQL的配置文件</h2>
<p>mcp.so 访问地址：<a href="https://mcp.so/servers?category=databases" target="_blank" rel="noopener nofollow">https://mcp.so/servers?category=databases</a><br>
点击进入 context 页签获取配置信息：</p>
<pre><code>{
  "mcpServers": {
    "postgres": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-postgres",
        "postgresql://localhost/mydb"
      ]
    }
  }
}
</code></pre>
<h2 id="24步骤四通过-1panel-创建-mcp-服务">2.4、步骤四：通过 1Panel 创建 MCP 服务</h2>
<p>如下图所示登录 1Panel 后，进入 MCP 管理，点击创建 MCP Server，同时点击导入MCP Server 配置，将第四步在 mcp.so 中拷贝的信息黏贴确认即可。<br>
<img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609160637299-1757894640.png" alt="" loading="lazy"><br>
确认后启动命令会自动生成，同时将生成的内容补充数据库的用户、密码以及数据库等信息，如下所示：</p>
<pre><code>npx -y @modelcontextprotocol/server-postgres postgresql://&lt;用户&gt;:&lt;密码&gt;@&lt;ip&gt;/&lt;数据库名&gt;
</code></pre>
<p>启动命令设置完成后参见如下图设置其他相关信息点击确认即可：</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609161309181-915857582.png" alt="" loading="lazy"></p>
<p>点击确认后同样的需要确认发布的外部链接地址可用，如果是腾讯云或者其他公有云服务器，切记安全组保证端口开通。发布完成后1Panel的状态如下所示：</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609161647306-1008905695.png" alt="" loading="lazy"></p>
<p>最终确认 MCP 服务访问如下图则表示服务发布成功：</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609161517872-939455909.png" alt="" loading="lazy"></p>
<h2 id="25步骤五通过-maxkb-对接-mcp-服务">2.5、步骤五：通过 MaxKB 对接 MCP 服务</h2>
<p>如下图创建工作流，通过添加【MCP服务】组件对接基于 1Panel 发布的 MCP 服务。</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609162619911-1182286570.png" alt="" loading="lazy"></p>
<p>其中重点确认MCP调用的节点配置信息</p>
<pre><code> {
    "postgres": {
      "url": "http://IP:端口/postgres",
      "transport":"sse"
    }
  }
</code></pre>
<h1 id="三效果演示">三、效果演示</h1>
<p>如下图所示最终问数效果。</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609162725396-1557545732.png" alt="" loading="lazy"></p>
<p>查看下整个工作流的执行详情，如图所示，通过AI生成SQL语句，通过MCP调用数据库，查询到结果以后由AI整理反馈给最终用户。</p>
<p><img src="https://img2024.cnblogs.com/blog/3600464/202506/3600464-20250609162302121-460639608.png" alt="" loading="lazy"></p>

</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.0020833333333333333" data-date-updated="2025-06-09 16:28">2025-06-09 16:25</span>&nbsp;
<a href="https://www.cnblogs.com/xiaobaiysf">小白跃升坊</a>&nbsp;
阅读(<span id="post_view_count">11</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18920913);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18920913', targetLink: 'https://www.cnblogs.com/xiaobaiysf/p/18920913', title: '通过 MCP 服务对接 PostgreSQL 问数 （详细实操说明）' })">举报</a>
</div>
        
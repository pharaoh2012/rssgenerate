
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/seven97-top/p/18787794" title="å‘å¸ƒäº 2025-03-24 08:15">
    <span role="heading" aria-level="2">ã€Guavaå·¥å…·ç±»ã€‘Strings&amp;Ints</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="stringç›¸å…³å·¥å…·">Stringç›¸å…³å·¥å…·</h2>
<h3 id="strings">Strings</h3>
<p>Guava æä¾›äº†ä¸€ç³»åˆ—ç”¨äºå­—ç¬¦ä¸²å¤„ç†çš„å·¥å…·ï¼š</p>
<h4 id="å¯¹å­—ç¬¦ä¸²ä¸ºnullæˆ–ç©ºçš„å¤„ç†">å¯¹å­—ç¬¦ä¸²ä¸ºnullæˆ–ç©ºçš„å¤„ç†</h4>
<ol>
<li>
<p>nullToEmpty(@Nullable String string)ï¼šå¦‚æœéç©ºï¼Œåˆ™è¿”å›ç»™å®šçš„å­—ç¬¦ä¸²ï¼›å¦åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</p>
<pre><code class="language-java">public static String nullToEmpty(@Nullable String string) {
    //å¦‚æœstringä¸ºnullåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å›ç»™å®šçš„string
    return string == null ? "" : string;
}
</code></pre>
</li>
<li>
<p>.isNullOrEmpty(@Nullable String string)ï¼šå¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºæˆ–é•¿åº¦ä¸º0è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p>
<pre><code class="language-java">public static boolean isNullOrEmpty(@Nullable String string) {
    return string == null || string.length() == 0;
}
</code></pre>
</li>
<li>
<p>emptyToNull(@Nullable String string)ï¼šå¦‚æœéç©ºï¼Œåˆ™è¿”å›ç»™å®šçš„å­—ç¬¦ä¸²ï¼›å¦åˆ™è¿”å›null</p>
<pre><code class="language-java">public static String emptyToNull(@Nullable String string) {
    //è°ƒç”¨isNullOrEmptyæ–¹æ³•ï¼Œå¦‚æœè¿”å›trueåˆ™return nullï¼Œå¦åˆ™è¿”å›åŸå­—ç¬¦ä¸²
    return isNullOrEmpty(string)?null:string;
}
</code></pre>
</li>
</ol>
<h4 id="ç”ŸæˆæŒ‡å®šå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²å‰¯æœ¬">ç”ŸæˆæŒ‡å®šå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²å‰¯æœ¬</h4>
<ol>
<li>
<p>padStart(String string, int minLength, char padChar)ï¼šæ ¹æ®ä¼ å…¥çš„minLengthè¿›è¡Œè¡¥å……ï¼Œå¦‚æœminLengthå°äºåŸæ¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™ç›´æ¥è¿”å›åŸæ¥å­—ç¬¦ä¸²ï¼Œå¦åˆ™åœ¨å­—ç¬¦ä¸²å¼€å¤´æ·»åŠ <code>string.length() - minLength</code>ä¸ªpadCharå­—ç¬¦</p>
<pre><code class="language-java">public static String padStart(String string, int minLength, char padChar) {
    //ä½¿ç”¨Preconditionså·¥å…·ç±»è¿›è¡Œå­—ç¬¦ä¸²éªŒç©ºå¤„ç†   
    Preconditions.checkNotNull(string);
    //å¦‚æœåŸå­—ç¬¦ä¸²é•¿åº¦å¤§äºä¼ å…¥çš„æ–°é•¿åº¦åˆ™ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
    if(string.length() &gt;= minLength) {
        return string;
    } else { //å¦åˆ™
        StringBuilder sb = new StringBuilder(minLength);
        //å…ˆåœ¨å­—ç¬¦ä¸²å‰é¢æ·»åŠ string.length()-minLengthä¸ªpadCharå­—ç¬¦
        for(int i = string.length(); i &lt; minLength; ++i) {
            sb.append(padChar);
        }
        //æœ€åå°†åŸå§‹å­—ç¬¦ä¸²æ·»åŠ åˆ°å°¾éƒ¨
        sb.append(string);
        return sb.toString();
    }
}
</code></pre>
</li>
<li>
<p>padEnd(String string, int minLength, char padChar)ï¼šæ ¹æ®ä¼ å…¥çš„minLengthè¿›è¡Œè¡¥å……ï¼Œå¦‚æœminLengthå°äºåŸæ¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™ç›´æ¥è¿”å›åŸæ¥å­—ç¬¦ä¸²ï¼Œå¦åˆ™åœ¨å­—ç¬¦ä¸²ç»“å°¾æ·»åŠ  <code>string.length() - minLength</code> ä¸ªpadCharå­—ç¬¦</p>
<pre><code class="language-java">public static String padEnd(String string, int minLength, char padChar) {
    Preconditions.checkNotNull(string);   
    //å¦‚æœåŸå­—ç¬¦ä¸²é•¿åº¦å¤§äºä¼ å…¥çš„æ–°é•¿åº¦åˆ™ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²
    if(string.length() &gt;= minLength) {
        return string;
    } else {
        StringBuilder sb = new StringBuilder(minLength);
        //å…ˆå°†åŸå§‹å­—ç¬¦ä¸²æ·»åŠ åˆ°é¢„ç”Ÿæˆçš„å­—ç¬¦ä¸²å½“ä¸­
        sb.append(string);
        //åœ¨ä½¿ç”¨padCharè¿›è¡Œå¡«è¡¥
        for(int i = string.length(); i &lt; minLength; ++i) {
            sb.append(padChar);
        }
        return sb.toString();
    }
}
</code></pre>
</li>
<li>
<p>repeat(String string, int count)ï¼šè¿”å›countä¸ª stringå­—ç¬¦ä¸²æ‹¼æ¥æˆçš„å­—ç¬¦ä¸²</p>
<pre><code class="language-java">public static String repeat(String string, int count) {
    Preconditions.checkNotNull(string);
    //å¦‚æœå°äº1ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
    if(count &lt;= 1) {
        Preconditions.checkArgument(count &gt;= 0, "invalid count: %s", new Object[]{Integer.valueOf(count)});
        return count == 0 ? "":string;
    } else {
        int len = string.length();
        long longSize = (long)len * (long)count;
        int size = (int)longSize;
        //å¦‚æœæ–°åˆ›å»ºçš„å­—ç¬¦ä¸²é•¿åº¦è¶…å‡ºintæœ€å¤§å€¼ï¼Œåˆ™æŠ›å‡ºéœ€è¦çš„æ•°ç»„è¿‡é•¿çš„å¼‚å¸¸
        if((long)size != longSize) {
            throw new ArrayIndexOutOfBoundsException((new StringBuilder(51)).append("Required array size too large: ").append(longSize).toString());
        } else {
            //å®é™…ä¸Šæ–°å»ºä¸€ä¸ªç›¸å½“é•¿åº¦çš„å­—ç¬¦æ•°ç»„ï¼Œå†å°†æ•°æ®å¤åˆ¶è¿›å»
            char[] array = new char[size];
            //å°†stringä»0å¼€å§‹lenç»“æŸä¹‹é—´çš„å­—ç¬¦ä¸²å¤åˆ¶åˆ°arrayæ•°ç»„ä¸­ï¼Œä¸”arrayæ•°ç»„ä»0å¼€å§‹å­˜å‚¨
            string.getChars(0, len, array, 0);
            int n;
            //å¤åˆ¶æ•°ç»„ï¼Œå¤åˆ¶çš„æ­¥é•¿ä¸ºï¼ˆ1,2,4...n^2ï¼‰ï¼Œæ‰€ä»¥è¿™å¿«æä¾›äº†ä¸€ä¸ªå¤–å±‚å¾ªç¯ä¸ºln2çš„ç®—æ³•
            for(n = len; n &lt; size - n; n &lt;&lt;= 1) {
                System.arraycopy(array, 0, array, n, n);
            }
            System.arraycopy(array, 0, array, n, size - n);
            return new String(array);
        }
    }
}
</code></pre>
</li>
</ol>
<h4 id="æŸ¥æ‰¾ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æˆ–åç¼€">æŸ¥æ‰¾ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æˆ–åç¼€</h4>
<p>åœ¨çœ‹commonPrefixå’ŒcommonSuffix è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹å‰éœ€è¦å…ˆçœ‹ä¸‹validSurrogatePairAtæ–¹æ³•</p>
<pre><code class="language-java">static boolean validSurrogatePairAt(CharSequence string, int index) {
    return index &gt;= 0 &amp;&amp; index &lt;= string.length() - 2 &amp;&amp; Character.isHighSurrogate(string.charAt(index)) &amp;&amp; Character.isLowSurrogate(string.charAt(index + 1));
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯  åˆ¤æ–­æœ€åä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯åˆæ³•çš„â€œJava å¹³å°å¢è¡¥å­—ç¬¦</p>
<ul>
<li>Character.isHighSurrogateï¼šç¡®å®šç»™å®šcharå€¼æ˜¯å¦ä¸ºUnicodeé«˜ä½ä»£ç†ã€‚è¿™ä¸ªå€¼å¹¶ä¸ä»£è¡¨å­—ç¬¦æœ¬èº«ï¼Œè€Œæ˜¯åœ¨UTF-16ç¼–ç çš„è¡¥å……çš„å­—ç¬¦çš„è¡¨ç¤ºè¢«ä½¿ç”¨ã€‚</li>
<li>Character.isLowSurrogateï¼šç¡®å®šç»™å®šcharå€¼æ˜¯å¦ä¸ºä¸€ä¸ªUnicodeä½ä»£ç†é¡¹ä»£ç å•å…ƒï¼ˆä¹Ÿç§°ä¸ºå°¾éƒ¨ä»£ç†é¡¹ä»£ç å•å…ƒï¼‰ã€‚è¿™äº›å€¼å¹¶ä¸ä»£è¡¨æœ¬èº«çš„å­—ç¬¦ï¼Œä½†ç”¨äºè¡¨ç¤ºå¢è¡¥å­—ç¬¦çš„UTF-16ç¼–ç ã€‚</li>
</ul>
<blockquote>
<p>ç®€å•çš„è¯´å°±æ˜¯Java è¯­è¨€å†…éƒ¨çš„å­—ç¬¦ä¿¡æ¯æ˜¯ä½¿ç”¨ UTF-16 ç¼–ç ã€‚å› ä¸ºchar è¿™ä¸ªç±»å‹æ˜¯ 16 bit çš„ã€‚å®ƒå¯ä»¥æœ‰65536ç§å–å€¼ï¼Œå³65536ä¸ªç¼–å·ï¼Œæ¯ä¸ªç¼–å·å¯ä»¥ä»£è¡¨1ç§å­—ç¬¦ã€‚è€Œåœ¨Unicodeå­—ç¬¦é›†ä¸­ï¼Œæœ‰ä¸€äº›å­—ç¬¦çš„ç¼–ç è¶…å‡ºäº†16 bitçš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯è¶…è¿‡äº†<code>char</code>ç±»å‹èƒ½å¤Ÿç›´æ¥è¡¨ç¤ºçš„èŒƒå›´ï¼Œ65536 å°±ä¸å¤Ÿç”¨ã€‚</p>
<p>ä¸ºäº†èƒ½å¤Ÿåœ¨Javaä¸­è¡¨ç¤ºè¿™äº›å­—ç¬¦ï¼ŒUnicodeå¼•å…¥äº†ä¸€ç§å«åšâ€œä»£ç†å¯¹â€ï¼ˆSurrogate Pairï¼‰çš„æœºåˆ¶ã€‚ä»è¿™65536ä¸ªç¼–å·é‡Œï¼Œæ‹¿å‡º2048ä¸ªï¼Œè§„å®šå®ƒä»¬æ˜¯ã€ŒSurrogatesã€ï¼Œè®©å®ƒä»¬ä¸¤ä¸ªä¸ºä¸€ç»„ï¼Œæ¥ä»£è¡¨ç¼–å·å¤§äº65536çš„é‚£äº›å­—ç¬¦ã€‚ æ›´å…·ä½“åœ°ï¼Œç¼–å·ä¸º D800 è‡³ DBFF çš„è§„å®šä¸ºã€ŒHigh Surrogatesã€ï¼Œå…±1024ä¸ªã€‚ç¼–å·ä¸º DC00è‡³ DFFF çš„è§„å®šä¸ºã€ŒLow Surrogatesã€ï¼Œä¹Ÿæ˜¯1024ä¸ªã€‚å®ƒä»¬ä¸¤ä¸¤ç»„åˆå‡ºç°ï¼Œå°±åˆå¯ä»¥å¤šè¡¨ç¤º1048576ç§å­—ç¬¦ã€‚</p>
<p>å¦‚æœä¸¢å¤±ä¸€ä¸ªé«˜ä½ä»£ç†Surrogatesæˆ–è€…ä½ä½ä»£ç†Surrogatesï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆemojiä¼šå‡ºç°ä¹±ç äº†ã€‚ä¾‹å¦‚è¾“å…¥äº†ä¸€ä¸ªemoji:ğŸ˜†ï¼Œå‡å¦‚å¯ä»¥å†™æˆè¿™æ ·ï¼š\uD83D\uDC34</p>
<p>String s = '\uD83D' + '\uDC34' + "";</p>
<p>é‚£ä¹ˆåœ¨æŒ‰å­—èŠ‚æˆªå–sçš„æ—¶å€™ï¼Œå°±è¦è€ƒè™‘è¿™ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯é«˜ä½ä»£ç†Surrogatesæˆ–è€…ä½ä½ä»£ç†Surrogatesï¼Œé¿å…å‡ºç°åŠä¸ªå­—ç¬¦ã€‚</p>
</blockquote>
<ol>
<li>
<p>commonPrefix(CharSequence a, CharSequece b)ï¼šè¿”å›aå’Œbä¸¤ä¸ªå­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€</p>
<pre><code class="language-java">public static String commonPrefix(CharSequence a, CharSequence b) {
    Preconditions.checkNotNull(a);
    Preconditions.checkNotNull(b);
    //å°†å­—ç¬¦ä¸²aå’Œå­—ç¬¦ä¸²bä¸¤ä¸ªä¸­çŸ­çš„å­—ç¬¦ä¸²é•¿åº¦èµ‹å€¼ç»™maxPrefixLength
    int maxPrefixLength = Math.min(a.length(), b.length());
    int p;
    //éå†ç›´åˆ°ç¬¬ä¸€ä¸ªä¸¤ä¸ªå­—ç¬¦ä¸ç›¸ç­‰çš„ä½ç½®ï¼Œæ‰¾å‡ºå…¬å…±çš„å‰ç¼€
    for(p = 0; p &lt; maxPrefixLength &amp;&amp; a.charAt(p) == b.charAt(p); ++p) {
        ;
    }
     //ç‰¹æ®Šæƒ…å†µï¼šå½“æœ€åä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦æ˜¯ä¸€ä¸ªUTF-16ç¼–ç çš„ä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†æ—¶ï¼Œéœ€è¦æŠŠæŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€ä½ï¼Œä»¥é¿å…åœ¨è¿”å›ç»“æœæ—¶åˆ‡æ–­ä»£ç†å¯¹ï¼Œå› ä¸ºè¿™å°†äº§ç”Ÿæ— æ•ˆçš„Unicodeåºåˆ—
    if(validSurrogatePairAt(a, p - 1) || validSurrogatePairAt(b, p - 1)) {
        --p;
    }
    return a.subSequence(0, p).toString();
}
</code></pre>
</li>
<li>
<p>commonSuffix(CharSequence a, CharSequence b)ï¼šè¿”å›å­—ç¬¦ä¸²aå’Œå­—ç¬¦ä¸²bçš„å…¬å…±åç¼€</p>
<pre><code class="language-java">public static String commonSuffix(CharSequence a, CharSequence b) {
    Preconditions.checkNotNull(a);
    Preconditions.checkNotNull(b);
    //å°†å­—ç¬¦ä¸²aå’Œå­—ç¬¦ä¸²bä¸¤ä¸ªä¸­çŸ­çš„å­—ç¬¦ä¸²é•¿åº¦èµ‹å€¼ç»™maxPrefixLength
    int maxSuffixLength = Math.min(a.length(), b.length());
    int s;
    //éå†ç›´åˆ°ç¬¬ä¸€ä¸ªä¸¤ä¸ªå­—ç¬¦ä¸ç›¸ç­‰çš„ä½ç½®ï¼Œæ‰¾å‡ºå…¬å…±çš„åç¼€
    for(s = 0; s &lt; maxSuffixLength &amp;&amp; a.charAt(a.length() - s - 1) == b.charAt(b.length() - s - 1); ++s) {
        ;
    }
    if(validSurrogatePairAt(a, a.length() - s - 1) || validSurrogatePairAt(b, b.length() - s - 1)) {
        --s;
    }
    return a.subSequence(a.length() - s, a.length()).toString();
}
</code></pre>
</li>
</ol>
<h3 id="joiner">Joiner</h3>
<p>å°†å­—ç¬¦ä¸²æ•°ç»„æŒ‰æŒ‡å®šåˆ†éš”ç¬¦è¿æ¥èµ·æ¥ï¼Œæˆ–å­—ç¬¦ä¸²ä¸²æŒ‰æŒ‡å®šç´¢å¼•å¼€å§‹ä½¿ç”¨æŒ‡å®šåˆ†éš”ç¬¦è¿æ¥èµ·æ¥ï¼Œåˆ›å»ºçš„<strong>éƒ½æ˜¯ä¸å¯å˜å®ä¾‹ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</p>
<p>åº•å±‚å®é™…æ˜¯åœ¨ç”¨StringBuilderè¿›è¡Œæ‹¼æ¥æ“ä½œã€‚</p>
<h4 id="ä½¿ç”¨æ¡ˆä¾‹">ä½¿ç”¨æ¡ˆä¾‹</h4>
<pre><code class="language-java">Joiner joiner = Joiner.on(";").useForNull("^");
// "A;B;^;D"
String joined = joiner.join("A", "B", null, "D");
</code></pre>
<h4 id="é™æ€åˆ›å»ºjoiner">é™æ€åˆ›å»ºJoiner</h4>
<pre><code class="language-java">// é™æ€åˆ›å»ºJoineræ–¹æ³•
public static Joiner on(String separator) {
    return new Joiner(separator);
}
 
public static Joiner on(char separator) {
    return new Joiner(String.valueOf(separator));
}
</code></pre>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªä¼ å…¥å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªä¼ å…¥å­—ç¬¦ï¼Œç„¶åç›´æ¥åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªæ„é€ å™¨æ„é€ </p>
<h4 id="joinæ–¹æ³•">join()æ–¹æ³•</h4>
<p>å¯¹äº4ä¸ªjoinæ–¹æ³•å®é™…å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯joinå®ç°ç±»ï¼Œå¦ä¸€ç±»æ˜¯joinè§£æå‚æ•°ç±»</p>
<ol>
<li>è§£æå‚æ•°ç±»ï¼š</li>
</ol>
<pre><code class="language-java">//1. å› ä¸º Iterableæ˜¯æ‰€æœ‰é›†åˆç±»çš„é¡¶çº§æ¥å£ï¼ˆé™¤äº†Mapç³»åˆ—ï¼‰ï¼Œæ‰€ä»¥æ­¤å‚æ•°ä¸ºé›†åˆç±»æˆ–å®ç°Iterableçš„ç±»å³å¯
public final String join(Iterable&lt;?&gt; parts) {
     //è°ƒç”¨joinå®ç°ç±»
     return this.join((Iterator)parts.iterator());
}
 
//2. ä¼ å…¥æ•°ç»„
public final String join(Object[] parts) {
     //å°†æ•°ç»„è½¬ä¸ºArrayListç„¶åå¼ºè½¬ä¸ºIterable  
     return this.join((Iterable)Arrays.asList(parts));
}
 
//3. ä¼ å…¥ä¸¤ä¸ªå‚æ•°å’Œä¸€ä¸ªæ•°ç»„ï¼Œæœ€ç»ˆè¿™ä¸¤ä¸ªå‚æ•°ä¸ªæ•°ç»„ä¸€èµ·æ„æˆä¸€ä¸ªæ–°çš„æ•°ç»„
public final String join(@Nullable Object first, @Nullable Object second, Object... rest) {
     //ä½¿ç”¨iterableæ–¹æ³•å°†å‚æ•°å’Œæ•°ç»„èåˆæˆä¸€ä¸ªæ•°ç»„
     return this.join((Iterable)iterable(first, second, rest));
}
</code></pre>
<p>ç¬¬3ä¸ªå®ç°æ–¹æ³•éœ€è¦ iterableæ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œèåˆï¼Œæ‰€ä»¥çœ‹ä¸€ä¸‹ iterableçš„å®ç°æ–¹å¼ï¼š</p>
<pre><code class="language-java">private static Iterable&lt;Object&gt; iterable(final Object first, final Object second, final Object[] rest) {
    Preconditions.checkNotNull(rest);
    //è¿”å›ä¸€ä¸ªAbstractListå¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡é‡å†™äº†sizeå’Œgetæ–¹æ³•
    return new AbstractList() {
        //ä½¿å¾—å½“å‰å®¹é‡æ¯”restæ•°ç»„å¤š2ä¸ª
        public int size() {
        return rest.length + 2;
    }
 
    public Object get(int index) {
        switch(index) {
            case 0:
                return first;
            case 1:
                return second;
           default:
               return rest[index - 2];
        }
    }};  
}
</code></pre>
<ol start="2">
<li>joinå®ç°ç±»</li>
</ol>
<pre><code class="language-java">public final String join(Iterator&lt;?&gt; parts) {
     //å®é™…ä½¿ç”¨appendTo(StringBuilder,Iterator)æ–¹æ³•
     return this.appendTo((StringBuilder)(new StringBuilder()), (Iterator)parts).toString();
}
 
public final StringBuilder appendTo(StringBuilder builder, Iterator&lt;?&gt; parts) {
     try {
         //è°ƒç”¨äº†appendTo(A, Iterator)æ–¹æ³•
         this.appendTo((Appendable)builder, (Iterator)parts);
         return builder;
     } catch (IOException var4) {
         throw new AssertionError(var4);
     }
}
 
public &lt;A extends Appendable&gt; A appendTo(A appendable, Iterator&lt;?&gt; parts) throws IOException {  
     Preconditions.checkNotNull(appendable);
     if(parts.hasNext()) {
         //å¦‚æœç¬¬ä¸€ä¸ªè¿­ä»£å™¨å­˜åœ¨ï¼Œå°†å…¶æ·»åŠ åˆ°å‡ºä¼ å…¥çš„StringBuilderä¸­
         appendable.append(this.toString(parts.next()));
         //ä»ç¬¬äºŒä¸ªè¿­ä»£å™¨å¼€å§‹å°±ä¼šå¾ªç¯æ–¹å¼å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¯ä¸ªå…ƒç´ å‰éƒ½ä¼šæ·»åŠ è§„å®šçš„åˆ†éš”ç¬¦
         while(parts.hasNext()) {
             appendable.append(this.separator);
             appendable.append(this.toString(parts.next()));
         }
     }
     return appendable;
}
 
</code></pre>
<h4 id="usefornullæ–¹æ³•">useForNullæ–¹æ³•</h4>
<p>å°†ä¼ å…¥çš„å­—ç¬¦ä¸²ä»£æ›¿é›†åˆä¸­çš„nullè¾“å‡º</p>
<pre><code class="language-java">public Joiner useForNull(final String nullText) {
    Preconditions.checkNotNull(nullText);
    // è¿”å›ä¸€ä¸ªJoineré‡å†™äº†toStringæ–¹æ³•ï¼Œå°†nullçš„å‚æ•°ç”± ä¼ å…¥çš„nullTextä»£æ›¿ã€‚
    return new Joiner(this, null) {
        CharSequence toString(@Nullable Object part) {
            return (CharSequence)(part == null ? nullText:Joiner.this.toString(part));
        }
 
        public Joiner useForNull(String nullTextx) {
            throw new UnsupportedOperationException("already specified useForNull");
        }
 
        public Joiner skipNulls() {
            throw new UnsupportedOperationException("already specified useForNull");
        }
    };
}
</code></pre>
<p>ä½¿ç”¨ useForNullæ–¹æ³•åç”±äºé‡å†™äº†useForNullå’ŒskipNullsæ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ä¸¤ä¸ªæ–¹æ³•ä¸­éƒ½æŠ›å‡ºäº†å¼‚å¸¸ã€‚æ‰€ä»¥ä¸èƒ½å†æ¬¡è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šç©ºå­—ç¬¦ä¸²"" æ— æ³•å‘½ä¸­è¿™ä¸ªæ–¹æ³•ï¼Œä»æºç ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥</p>
<h4 id="skipnullsæ–¹æ³•">skipNullsæ–¹æ³•</h4>
<p>è‡ªåŠ¨è·³è¿‡nullå…ƒç´ è¿›è¡Œæ‹¼æ¥</p>
<pre><code class="language-java">public Joiner skipNulls() {
    //è¿”å›ä¸€ä¸ªJoinerï¼Œé‡å†™äº†appendToæ–¹æ³•ï¼Œè·³è¿‡null
    return new Joiner(this, null) {
        public &lt;A extends Appendable&gt; A appendTo(A appendable, Iterator&lt;?&gt; parts) throws IOException {
            Preconditions.checkNotNull(appendable, "appendable");
            Preconditions.checkNotNull(parts, "parts");
            Object part;
            // ä¸ åŸå§‹appendToæ–¹æ³•ä¸åŒçš„å°±æ˜¯ å¤šäº† part != null çš„åˆ¤æ–­è¯­å¥
            while(parts.hasNext()) {
                part = parts.next();
                if(part != null) {
                    appendable.append(Joiner.this.toString(part));
                    break;
                }
            }
            // ç»™ä¸Šé¢æ·»åŠ çš„ part æ‹¼æ¥ä¸Šè¿æ¥ç¬¦ separator 
            while(parts.hasNext()) {
                part = parts.next(); 
                if(part != null) {
                    appendable.append(Joiner.this.separator);
                    appendable.append(Joiner.this.toString(part));
                }
            }
            return appendable;
        }
 
        public Joiner useForNull(String nullText) {
            throw new UnsupportedOperationException("already specified skipNulls");
        }
 
        public Joiner.MapJoiner withKeyValueSeparator(String kvs) {
            throw new UnsupportedOperationException("can\'t use .skipNulls() with maps");
        }
    };
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šç©ºå­—ç¬¦ä¸²"" æ— æ³•å‘½ä¸­è¿™ä¸ªæ–¹æ³•ï¼Œä»æºç ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥</p>
<h4 id="å¯¹mapè§£æçš„å‡½æ•°å’Œç±»">å¯¹Mapè§£æçš„å‡½æ•°å’Œç±»</h4>
<pre><code class="language-java">public Joiner.MapJoiner withKeyValueSeparator(String keyValueSeparator) {
    return new Joiner.MapJoiner(this, keyValueSeparator, null);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯Joinerä¸­çš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè¿™ä¸ªç±»é‡Œçš„å¤§å¤šæ–¹æ³•éƒ½æ˜¯åœ¨å¤„ç†Mapè¿æ¥çš„å‡½æ•°</p>
<p>MapJoinerä¸­çš„joinæ–¹æ³•å®é™…ä¸Šæ˜¯å¯¹Mapçš„entrySetå³å¯ä»¥çš„é›†åˆè¿›è¡Œæ‹¼æ¥ã€‚æ•´ä½“æ€è·¯ä¸ä¸Šé¢ä¸€è‡´</p>
<h3 id="charmatchers">CharMatchers</h3>
<p>å­—ç¬¦åºåˆ—åŒ¹é…å’Œå¤„ç†çš„å·¥å…·ï¼Œå†…ç½®äº†å¤§é‡å¸¸ç”¨çš„åŒ¹é…å™¨ã€‚ä½¿ç”¨ä¸Šé€šå¸¸åˆ†ä¸¤æ­¥ï¼š</p>
<ul>
<li>ç¡®å®šåŒ¹é…çš„å­—ç¬¦å’Œæ¨¡å¼</li>
<li>ç”¨åŒ¹é…çš„å­—ç¬¦åšå¤„ç†</li>
</ul>
<pre><code class="language-java">// ç¡®å®šåŒ¹é…çš„å­—ç¬¦å’Œæ¨¡å¼ï¼Œä¾‹å¦‚ anyOf, none, whitespace, digit, javaLetter, javaIsoControl...
CharMatcher matcher = CharMatcher.anyOf("abc");
// defg
log.debug("{}", matcher.removeFrom("abcdefg"));
// abc
log.debug("{}", matcher.retainFrom("abcdefg"));
// true
log.debug("{}", matcher.matchesAllOf("abc"));
// hhh 
log.debug("{}", matcher.trimFrom("abchhhabc"));
// ___hhh___
log.debug("{}", matcher.replaceFrom("abc hhh abc", "_"));
</code></pre>
<h4 id="å®ç°ç±»">å®ç°ç±»</h4>
<table>
<thead>
<tr>
<th>å®ç°ç±»</th>
<th>ç±»ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ANY</td>
<td>åŒ¹é…ä»»ä½•å­—ç¬¦</td>
</tr>
<tr>
<td>ASCII</td>
<td>åŒ¹é…æ˜¯å¦æ˜¯ASCIIå­—ç¬¦</td>
</tr>
<tr>
<td>BREAKING_WHITESPACE</td>
<td>åŒ¹é…æ‰€æœ‰å¯æ¢è¡Œçš„ç©ºç™½å­—ç¬¦(ä¸åŒ…æ‹¬éæ¢è¡Œç©ºç™½å­—ç¬¦,ä¾‹å¦‚"\u00a0")</td>
</tr>
<tr>
<td>JAVA_ISO_CONTROL</td>
<td>åŒ¹é…ISOæ§åˆ¶å­—ç¬¦, ä½¿ç”¨ Charater.isISOControl() å®ç°</td>
</tr>
<tr>
<td>NONE</td>
<td>ä¸åŒ¹é…æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td>WHITESPACE</td>
<td>åŒ¹é…æ‰€æœ‰ç©ºç™½å­—ç¬¦</td>
</tr>
</tbody>
</table>
<p>å¸¸ç”¨æ–¹æ³•å¯åˆ†ä¸º4ç±»ï¼š</p>
<h4 id="å¾—åˆ°åŒ¹é…æŒ‡å®šè§„åˆ™çš„matcher">å¾—åˆ°åŒ¹é…æŒ‡å®šè§„åˆ™çš„Matcher</h4>
<pre><code class="language-java">CharMatcher is(char match)ï¼šè¿”å›åŒ¹é…æŒ‡å®šå­—ç¬¦çš„Matcher
CharMatcher isNot(char match)ï¼šè¿”å›ä¸åŒ¹é…æŒ‡å®šå­—ç¬¦çš„Matcher
CharMatcher anyOf(CharSequence sequence)ï¼šè¿”å›åŒ¹é…sequenceä¸­ä»»æ„å­—ç¬¦çš„Matcher
CharMatcher noneOf(CharSequence sequence)ï¼šè¿”å›ä¸åŒ¹é…sequenceä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦çš„Matcher
CharMatcher inRange(char startInclusive, char endInclusive)ï¼šè¿”å›åŒ¹é…èŒƒå›´å†…ä»»æ„å­—ç¬¦çš„Matcher
CharMatcher negate()ï¼šè¿”å›å½“å‰Matcherç›¸åçš„Matcher
CharMatcher and(CharMatcher other)ï¼šè¿”å›ä¸otheråŒ¹é…æ¡ä»¶ç»„åˆåšä¸æ¥åˆ¤æ–­Matcherï¼Œå³å–ä¸¤ä¸ªMatcherçš„äº¤é›†
CharMatcher or(CharMatcher other)ï¼šè¿”å›ä¸otheråŒ¹é…æ¡ä»¶ç»„åˆåšæˆ–æ¥åˆ¤æ–­Matcherï¼Œå³å–ä¸¤ä¸ªMatcherçš„å¹¶é›†
</code></pre>
<h4 id="åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…">åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…</h4>
<pre><code class="language-java">Boolean matchesAnyOf(CharSequence sequence)ï¼šåªè¦sequenceä¸­æœ‰ä»»æ„å­—ç¬¦èƒ½åŒ¹é…Matcherï¼Œè¿”å›true
Boolean matchesAllOf(CharSequence sequence)ï¼šsequenceä¸­æ‰€æœ‰å­—ç¬¦èƒ½åŒ¹é…Matcherï¼Œè¿”å›true
Boolean matchesNoneOf(CharSequence sequence)ï¼šsequenceä¸­æ‰€æœ‰å­—ç¬¦éƒ½ä¸èƒ½åŒ¹é…Matcherï¼Œè¿”å›true
</code></pre>
<h4 id="è·å–å­—ç¬¦ä¸²ä¸matcheråŒ¹é…çš„ä½ç½®ä¿¡æ¯">è·å–å­—ç¬¦ä¸²ä¸MatcheråŒ¹é…çš„ä½ç½®ä¿¡æ¯</h4>
<pre><code class="language-java">int indexIn(CharSequence sequence): è¿”å›sequenceä¸­åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„åæ ‡
int indexIn(CharSequence sequence, int start): è¿”å›ä»startå¼€å§‹,åœ¨sequenceä¸­åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„åæ ‡
int lastIndexIn(CharSequence sequence): è¿”å›sequenceä¸­æœ€åä¸€æ¬¡åŒ¹é…åˆ°çš„å­—ç¬¦çš„åæ ‡
int countIn(CharSequence sequence): è¿”å›sequenceä¸­åŒ¹é…åˆ°çš„å­—ç¬¦è®¡æ•°
</code></pre>
<h4 id="å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ€æ ·åŒ¹é…å¤„ç†">å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ€æ ·åŒ¹é…å¤„ç†</h4>
<pre><code class="language-java">String removeFrom(CharSequence sequence): åˆ é™¤sequenceä¸­åŒ¹é…åˆ°åˆ°çš„å­—ç¬¦å¹¶è¿”å›
String retainFrom(CharSequence sequence): ä¿ç•™sequenceä¸­åŒ¹é…åˆ°çš„å­—ç¬¦å¹¶è¿”å›
String replaceFrom(CharSequence sequence, char replacement): æ›¿æ¢sequenceä¸­åŒ¹é…åˆ°çš„å­—ç¬¦å¹¶è¿”å›
String trimFrom(CharSequence sequence): åˆ é™¤é¦–å°¾åŒ¹é…åˆ°çš„å­—ç¬¦å¹¶è¿”å›
String trimLeadingFrom(CharSequence sequence): åˆ é™¤é¦–éƒ¨åŒ¹é…åˆ°çš„å­—ç¬¦
String trimTrailingFrom(CharSequence sequence): åˆ é™¤å°¾éƒ¨åŒ¹é…åˆ°çš„å­—ç¬¦
String collapseFrom(CharSequence sequence, char replacement): å°†åŒ¹é…åˆ°çš„ç»„(è¿ç»­åŒ¹é…çš„å­—ç¬¦)æ›¿æ¢æˆreplacement
String trimAndCollapseFrom(CharSequence sequence, char replacement): å…ˆtrimåœ¨replace
</code></pre>
<h3 id="splitter">Splitter</h3>
<p>å­—ç¬¦ä¸²åˆ†å‰²å·¥å…·ï¼Œ<strong>åˆ›å»ºçš„ä¹Ÿæ˜¯ä¸å¯å˜å®ä¾‹ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</p>
<p>åº•å±‚ç”¨çš„æ˜¯ Stringçš„subStringæ–¹æ³•</p>
<h4 id="ä½¿ç”¨æ¡ˆä¾‹-1">ä½¿ç”¨æ¡ˆä¾‹</h4>
<pre><code class="language-java">// String#split åç›´è§‰çš„è¾“å‡ºï¼š["", "a", "", "b"]
Arrays.stream(",a,,b,".split(",")).toList().forEach(System.out::println);
// ["foo", "bar", "qux"]
Iterable&lt;String&gt; split = Splitter.on(",")
    	// ç»“æœè‡ªåŠ¨ trim
        .trimResults()
    	// å¿½ç•¥ç»“æœä¸­çš„ç©ºä¸²
        .omitEmptyStrings()
        // é™åˆ¶åˆ†å‰²æ•°
        .limit(3)
        .split("foo,bar,,   qux");
Map&lt;String, String&gt; splitMap = Splitter.on(";")
	// æŒ‡å®š K-V çš„åˆ†éš”ç¬¦å¯ä»¥å°†é”®å€¼å¯¹çš„ä¸²è§£æä¸º Map
	.withKeyValueSeparator("-&gt;")
	.split("A-&gt;1;B-&gt;2");
</code></pre>
<h4 id="ä¸¤ä¸ªå†…éƒ¨ç±»">ä¸¤ä¸ªå†…éƒ¨ç±»</h4>
<p>åœ¨é€šè¯»æ•´ç‰‡æºç å‰å…ˆæ¥äº†è§£å…¶ä¸­çš„ä¸¤ä¸ªå†…éƒ¨ç±»ï¼Œè¿™ä¸¤ä¸ªå†…éƒ¨ç±»æ˜¯çœŸæ­£å»åˆ†è§£å­—ç¬¦ä¸²çš„ï¼š</p>
<p>å…¶ä¸­ä¸€ä¸ªæ˜¯ å¤„ç†å­—ç¬¦ã€å­—ç¬¦ä¸²ã€æ­£åˆ™çš„æ¥å£ï¼Œæ­¤æ¥å£çš„å®šä¹‰å®è´¨ä¸º <a href="https://www.seven97.top/system-design/design-pattern/behavioralpattern.html#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener nofollow">ç­–ç•¥æ¨¡å¼</a></p>
<pre><code class="language-java">private interface Strategy {
    Iterator&lt;String&gt; iterator(Splitter var1, CharSequence var2);
}
</code></pre>
<p>è¿™ä¸ªæ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªIteratorè¿­ä»£å™¨ï¼Œè¿™é‡Œå¯ä»¥å…ˆè”æƒ³åˆ°æœ€ç»ˆè¿”å›çš„é›†åˆçš„è¿­ä»£å™¨ä¼šä¸å®ƒæœ‰å…³ç³»</p>
<p>è¿™é‡Œå®ç°äº†ä¸€ä¸ªæƒ°æ€§è¿­ä»£å™¨ï¼šæƒ°æ€§è¿­ä»£å™¨å°±æ˜¯æŒ‡ ç›´åˆ°ä¸å¾—ä¸è®¡ç®—çš„æ—¶å€™æ‰ä¼šå»å°†å­—ç¬¦ä¸²åˆ†å‰²ï¼Œå³åœ¨è¿­ä»£çš„æ—¶å€™æ‰å»åˆ†å‰²å­—ç¬¦ä¸²ï¼Œæ— è®ºå°†åˆ†éš”ç¬¦è¿˜æ˜¯è¢«åˆ†å‰²çš„å­—ç¬¦ä¸²åŠ è½½åˆ°Splitterç±»ä¸­ï¼Œéƒ½ä¸ä¼šå»åˆ†å‰²ï¼Œåªæœ‰åœ¨è¿­ä»£çš„æ—¶å€™æ‰ä¼š<strong>çœŸæ­£çš„å»åˆ†å‰²</strong>ã€‚</p>
<pre><code class="language-java">private abstract static class SplittingIterator extends AbstractIterator&lt;String&gt; {
    final CharSequence toSplit;
    final CharMatcher trimmer;
    final boolean omitEmptyStrings;
    int offset = 0;
    int limit;
    // è·å–è¢«åˆ†å‰²å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸åˆ†éš”ç¬¦åŒ¹é…çš„ä½ç½®
    abstract int separatorStart(int var1);
    // è·å–å½“å‰åˆ†éš”ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ç»“å°¾ä½ç½®
    abstract int separatorEnd(int var1);
    // æ„é€ å‡½æ•°ï¼Œå°†å½“å‰çš„æˆªå–å­—ç¬¦ä¸²ä¿¡æ¯èµ‹å€¼ç»™SplittingIteratorå˜é‡
    protected SplittingIterator(Splitter splitter, CharSequence toSplit) {
        this.trimmer = splitter.trimmer;
        this.omitEmptyStrings = splitter.omitEmptyStrings;
        this.limit = splitter.limit;
        this.toSplit = toSplit;
    }
 
    //é‡å†™è¿­ä»£æ–¹æ³•ï¼Œå°±æ˜¯è¿™é‡Œå®ç°çš„ æƒ°æ€§è¿­ä»£å™¨
    protected String computeNext() {
        int nextStart = this.offset;
        while(true) {
            while(this.offset != -1) {
                int start = nextStart;
                //æ ¹æ®separatorStartæ–¹æ³•è¿›è¡Œè·å–å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦ä½ç½®
                int separatorPosition = this.separatorStart(this.offset);
                int end;
                if(separatorPosition == -1) {
                    end = this.toSplit.length();
                    this.offset = -1;
                } else {
                    end = separatorPosition;
                    //æ ¹æ®separatorEndæ–¹æ³•è¿›è¡Œè·å–å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦çš„ç»“æŸä½ç½®
                    this.offset = this.separatorEnd(separatorPosition);
                }
                if(this.offset != nextStart) {
                    while(start &lt; end &amp;&amp; this.trimmer.matches(this.toSplit.charAt(start))) {
                        ++start;
                    }
                    while(end &gt; start &amp;&amp; this.trimmer.matches(this.toSplit.charAt(end - 1))) {
                        --end;
                    }
                    //å¦‚æœomitEmptyStringsä¸ºtrueï¼Œåˆ™å¯¹ç©ºç»“æœè·³è¿‡å¤„ç†ï¼Œå¦åˆ™è¿›å…¥
                    if(!this.omitEmptyStrings || start != end) {
                         //å½“è§„å®šçš„æœ€å¤šç»“æœæ•°å€¼ä¸º1æ—¶ï¼Œè¾“å‡ºæœ€åçš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œç„¶åç»“æŸè¿­ä»£
                        if(this.limit == 1) {
                            end = this.toSplit.length();
                            for(this.offset = -1; end &gt; start &amp;&amp; this.trimmer.matches(this.toSplit.charAt(end - 1)); --end) {
                                ;
                            }
                        } else {
                            //æ²¡æœ‰åˆ°æœ€åä¸€ä¸ªæ—¶ï¼Œè¿›è¡Œå‡1æ“ä½œ
                            --this.limit;
                        }
                        return this.toSplit.subSequence(start, end).toString();
                    }
                    nextStart = this.offset;
                } else {
                    ++this.offset;
                    if(this.offset &gt; this.toSplit.length()) {
                        this.offset = -1;
                    }
                }
            }
            return (String)this.endOfData();
        }
    }
}
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªå®ç°AbstractIteratorçš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°äº† computeNextæ–¹æ³•ï¼ˆæ­¤æ–¹æ³•å¯ä»¥åœ¨çœ‹é›†åˆæºç çš„æ—¶å€™ä¹Ÿå¤šæ³¨æ„ä¸€ä¸‹ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯è§„å®šäº†æ­¤è¿­ä»£å™¨çš„ä¸€ä¸ªè¿­ä»£è§„åˆ™ã€‚æ‰€ä»¥Splitterç±»ä¸ºä»–åˆ†å‰²å®Œçš„ç»“æœé›†ä¹Ÿå†™äº†ä¸€ä¸ªè¿­ä»£å™¨å¹¶è§„å®šäº†è‡ªå·±çš„è¿­ä»£è§„åˆ™ã€‚ä»è¿™ä¸ªè¿­ä»£å™¨çš„å®ç°ä¸Šï¼Œåœ¨ç»“åˆStrategy ç±»ä¾¿å¯ä»¥å°†æ•´ä¸ªå­—ç¬¦ä¸²åˆ†å‰²çš„è¿‡ç¨‹ç»™ä¸²èµ·æ¥äº†ã€‚</p>
<p>é™¤äº†è¿™ä¸¤ä¸ªï¼Œè¿˜æœ‰ä¸€ä¸ªå†…éƒ¨ç±»æ˜¯ MapSplitterï¼Œæ˜¯ç”¨äºå¤„ç†Mapï¼Œå¯¹Mapè¿›è¡Œåˆ†å‰²çš„</p>
<h4 id="å˜é‡">å˜é‡</h4>
<pre><code class="language-java">//ç§»é™¤æŒ‡å®šå­—ç¬¦é¡¹ï¼Œå³é›†åˆä¸­å½“å‰å…ƒç´ ä¸trimmeråŒ¹é…ï¼Œå°†å…¶ç§»é™¤ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®trimmerï¼Œåˆ™å°†ç»“æœä¸­çš„ç©ºæ ¼åˆ é™¤
//æœ€ç»ˆç»“è®ºä¸ºï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²å‰ç¼€å’Œåç¼€éƒ½å»é™¤trimmerï¼Œç›´åˆ°å‰ç¼€æˆ–åç¼€æ²¡æœ‰è¿™ä¸ªå­—ç¬¦äº†ï¼Œå­—ç¬¦ä¸²â€œä¸­â€çš„ä¸ç”¨å»é™¤
private final CharMatcher trimmer;

//æ˜¯å¦ç§»é™¤ç»“æœé›†ä¸­çš„ç©ºé›†ï¼Œtrueä¸ºç§»é™¤ç»“æœé›†ä¸­çš„ç©ºé›†ï¼Œfalseä¸ºä¸ç”¨ç§»é™¤ç»“æœé›†ä¸­çš„ç©ºé›†
private final boolean omitEmptyStrings;

//è¿™ä¸ªå˜é‡æœ€ç»ˆä¼šè¿”å›ä¸€ä¸ªæ‰€æœ‰é›†åˆç±»çš„çˆ¶æ¥å£ï¼Œå®ƒæ˜¯è´¯ç©¿ç€æ•´ä¸ªå­—ç¬¦ä¸²åˆ†è§£çš„å˜é‡
private final Splitter.Strategy strategy;

//æœ€å¤šå°†å­—ç¬¦ä¸²åˆ†ä¸ºå‡ ä¸ªé›†åˆï¼Œæ¯”å¦‚limit=3, å¯¹â€a,b,c,dâ€å­—ç¬¦ä¸²è¿›è¡Œ'ï¼Œ'åˆ†å‰²ï¼Œè¿”å›çš„[â€aâ€,â€bâ€,â€c,dâ€] æ„æ€ä¸ºæœ€å¤šå¯ä»¥åˆ†å‰²æˆ3æ®µï¼Œè¿™ä¸ªå¯ä»¥åœ¨é“¾å¼ç¼–ç¨‹çš„limitæ–¹æ³•å‚æ•°è®¾ç½®
private final int limit;
</code></pre>
<h4 id="é™æ€åˆ›å»ºsplitter">é™æ€åˆ›å»ºSplitter</h4>
<p>ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½æ˜¯ç§æœ‰æ„é€ å™¨ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªæ„é€ å™¨å»åˆ›å»ºSplitterï¼Œæƒ³è¦åˆ›å»ºSplitteråªèƒ½ä½¿ç”¨é™æ€æ–¹æ³•ã€‚</p>
<pre><code class="language-java">//æ¥æ”¶ ä¸€ä¸ªStrategyç±»å¯¹è±¡
private Splitter(Splitter.Strategy strategy) {
    this(strategy, false, CharMatcher.NONE, 2147483647);
}
 
//æ­¤æ„é€ å™¨ä¸ºæ‰€æœ‰å˜é‡è¿›è¡Œèµ‹å€¼
private Splitter(Splitter.Strategy strategy, boolean omitEmptyStrings, CharMatcher trimmer, int limit) {
    this.strategy = strategy;
    this.omitEmptyStrings = omitEmptyStrings;
    this.trimmer = trimmer;
    this.limit = limit;
}
</code></pre>
<p>é™æ€åˆ›å»ºSplitterå‡½æ•°æœ‰å››ç§ï¼š</p>
<ol>
<li>
<p>æ¥æ”¶<strong>å­—ç¬¦</strong>çš„æ„é€ å™¨</p>
<pre><code class="language-java">//æ¥æ”¶ä¸€ä¸ªå­—ç¬¦çš„æ„é€ å™¨ï¼Œç„¶åè°ƒç”¨å‚æ•°ä¸º CharMatcherçš„æ„é€ å™¨
public static Splitter on(char separator) {
    return on((CharMatcher)CharMatcher.is(separator));
}
 
//æ¥æ”¶ä¸€ä¸ªCharMatcherçš„æ„é€ å™¨
public static Splitter on(final CharMatcher separatorMatcher) {
    //å¯¹å­—ç¬¦åˆ¤ç©º
    Preconditions.checkNotNull(separatorMatcher);
    //è¿”å›ä¸€ä¸ªSplitterå¯¹è±¡ï¼Œä¼ å…¥Strategyå¯¹è±¡ï¼Œå¹¶å¯¹Strategyæ¥å£è¿›è¡Œå®ç°
    return new Splitter(new Splitter.Strategy() {
        //å®ç°æ¥å£Strategyçš„iteratoræ–¹æ³•
        public Splitter.SplittingIterator iterator(final Splitter splitter, final CharSequence toSplit) {
            //è¿”å› SplittingIteratorå¯¹è±¡ï¼Œå¹¶å¯¹ SplittingIterator æŠ½è±¡ç±»å®ç° separatorStartæ–¹æ³•å’Œ separatorEndæ–¹æ³•
            return new Splitter.SplittingIterator(splitter, toSplit) {
                //è¿”å›ä»start å¼€å§‹çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦çš„å¼€å§‹ä½ç½®
                int separatorStart(int start) {
                    return separatorMatcher.indexIn(this.toSplit, start);
                }
                //è¿”å›å½“å‰åˆ†å‰²ç¬¦çš„æœ«å°¾ä½ç½®
                int separatorEnd(int separatorPosition) {
                    return separatorPosition + 1;
                }
            };
        }
    });
}
</code></pre>
</li>
<li>
<p>æ¥æ”¶<strong>å­—ç¬¦ä¸²</strong>çš„æ„é€ å™¨</p>
<pre><code class="language-java">//ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºåˆ†éš”ç¬¦
public static Splitter on(final String separator) {
    Preconditions.checkArgument(separator.length() != 0, "The separator may not be the empty string.");
    //å¦‚æœå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º1ï¼Œåˆ™ç›´æ¥è°ƒç”¨è§£æå•ä¸ªå­—ç¬¦çš„æ„é€ å™¨ä¸Šï¼Œå¦åˆ™ä¼šè¿”å›ä¸€ä¸ªSplitterå¯¹è±¡ï¼Œä¼ å…¥Strategyå¯¹è±¡ï¼Œå¹¶å¯¹Strategyæ¥å£è¿›è¡Œå®ç°
    return separator.length() ==  1 ? on(separator.charAt(0)) : new Splitter(new Splitter.Strategy() {
        //å®ç°Strategyæ¥å£
        public Splitter.SplittingIterator iterator(final Splitter splitter, final CharSequence toSplit) {
            return new Splitter.SplittingIterator(splitter, toSplit) {
                //è¿™ä¸ªæ–¹æ³•æ˜¯è¢«åˆ†å‰²å­—ç¬¦ä¸²ä»startå¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦çš„ä½ç½®ï¼Œæ²¡æœ‰æ‰¾åˆ°è¿”å›-1
                public int separatorStart(int start) {
                    //è·å–åˆ†å‰²ç¬¦é•¿åº¦
                    int separatorLength = separator.length();
                    //è®°å½•åˆ†å‰²ç¬¦å¼€å§‹ä½å­
                    int p = start;
                    
                    label24:
                    //lastæ˜¯è°ƒç”¨æœ¬ç±»çš„ toSplit å˜é‡å³è¢«åˆ†å‰²çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œlastå–è¢«åˆ†å‰²çš„å­—ç¬¦ä¸²é•¿åº¦ä¸åˆ†å‰²ç¬¦çš„å·®å€¼
                    //å‡è®¾åˆ†å‰²ç¬¦å·â€,â€ è¢«åˆ†å‰²å­—ç¬¦ä¸²â€a,b,c,dâ€ last= 7-1 = 6
                    for(int last = this.toSplit.length() - separatorLength; p &lt;= last; ++p) {
                        for(int i = 0; i &lt; separatorLength; ++i) {
                            //æ‰¾åˆ°åŒ¹é…åˆ°åˆ†éš”ç¬¦çš„ç¬¬ä¸€ä¸ªä½ç½®
                            if (this.toSplit.charAt(i + p) != separator.charAt(i)) {
                                continue label24;
                            }
                        }
                        return p;
                    }
                    return -1;
                }
                //ä¼ å…¥åˆ†ç¦»å™¨ä½ç½®ï¼Œè¿”å›åˆ†ç¦»å™¨æœ«å°¾ä½ç½®
                public int separatorEnd(int separatorPosition) {
                    return separatorPosition + separator.length();
                }
            };
        }
    });
}
</code></pre>
</li>
<li>
<p>æ¥æ”¶<strong>æ­£åˆ™è¡¨è¾¾å¼</strong>çš„æ„é€ å™¨</p>
<blockquote>
<p>@GwtIncompatibleç”¨äºæŒ‡ç¤ºæŸä¸ªç±»ã€æ–¹æ³•æˆ–å­—æ®µä¸å…¼å®¹æˆ–ä¸åº”è¢«ç”¨äºGoogle Web Toolkit (GWT)ã€‚GWTæ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œå…è®¸å¼€å‘è€…ç¼–å†™Javaä»£ç ï¼Œç„¶åå°†è¿™äº›ä»£ç ç¼–è¯‘æˆé«˜æ•ˆçš„JavaScriptä»£ç ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚è¿™ä¸ªå·¥å…·ä½¿å¾—Javaå¼€å‘è€…å¯ä»¥ç¼–å†™å‰ç«¯ä»£ç ï¼Œè€Œä¸éœ€è¦ç›´æ¥ä½¿ç”¨JavaScriptã€‚</p>
</blockquote>
<pre><code class="language-java">//ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªè°ƒç”¨ä¼ å…¥CommonPatternç±»å‹çš„onæ–¹æ³•
@GwtIncompatible
public static Splitter onPattern(String separatorPattern) {
    return on((CommonPattern)Platform.compilePattern(separatorPattern));
}
 
//ä¼ å…¥ä¸€ä¸ªPatternç±»å‹å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè°ƒç”¨ä¼ å…¥CommonPatternç±»å‹çš„onæ–¹æ³•
@GwtIncompatible
public static Splitter on(Pattern separatorPattern) {
    return on((CommonPattern)(new JdkPattern(separatorPattern)));
}
 
//ä¼ å…¥ä¸€ä¸ª CommonPatternç±»å‹çš„æ„é€ å™¨
private static Splitter on(final CommonPattern separatorPattern) {
    Preconditions.checkArgument(!separatorPattern.matcher("").matches(), "The pattern may not match the empty string: %s", separatorPattern);
    //è¿”å›ä¸€ä¸ªSplitterå¯¹è±¡ï¼Œä¼ å…¥Strategyå¯¹è±¡ï¼Œå¹¶å¯¹Strategyæ¥å£è¿›è¡Œå®ç°
    return new Splitter(new Splitter.Strategy() {
        //å®ç°Strategyå¯¹è±¡çš„iteratoræ–¹æ³•
        public Splitter.SplittingIterator iterator(final Splitter splitter, final CharSequence toSplit) {
            final CommonMatcher matcher = separatorPattern.matcher(toSplit);
            return new Splitter.SplittingIterator(splitter, toSplit) {
                //è¿”å›ä»startå¼€å§‹çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦çš„å¼€å§‹ä½ç½®
                public int separatorStart(int start) {
                    return matcher.find(start)?matcher.start():-1;
                }
                //è¿”å›å½“å‰åˆ†å‰²ç¬¦çš„æœ«å°¾ä½ç½®
                public int separatorEnd(int separatorPosition) {
                    return matcher.end();
                }
            };
        }
    });
}
</code></pre>
</li>
<li>
<p>æŒ‰æŒ‡å®šé•¿åº¦åˆ†å‰²çš„æ„é€ å™¨</p>
<pre><code class="language-java">public static Splitter fixedLength(final int length) {
    Preconditions.checkArgument(length &gt; 0, "The length may not be less than 1");
    return new Splitter(new Splitter.Strategy() {
        public Splitter.SplittingIterator iterator(final Splitter splitter, final CharSequence toSplit) {
            return new Splitter.SplittingIterator(splitter, toSplit) {
                //æŒ‰ lengthé•¿åº¦è¿›è¡Œè·¨æ­¥
                public int separatorStart(int start) {
                    int nextChunkStart = start + length;
                    return nextChunkStart &lt; this.toSplit.length()?nextChunkStart:-1;
                }
                public int separatorEnd(int separatorPosition) {
                    return separatorPosition;
                }
            };
        }
    });
}
</code></pre>
</li>
</ol>
<h4 id="è¿›è¡Œåˆ†å‰²çš„å‡½æ•°-splitsplittingiterator">è¿›è¡Œåˆ†å‰²çš„å‡½æ•° ï¼ˆsplitã€splittingIteratorï¼‰</h4>
<ol>
<li>
<p>è¿”å›å€¼æ˜¯ Iterable çš„å‡½æ•°ï¼š</p>
<pre><code class="language-java">public Iterable&lt;String&gt; split(final CharSequence sequence) {
    Preconditions.checkNotNull(sequence);
    //è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œç„¶åé‡å†™äº†iteratorå’ŒtoStringæ–¹æ³•
    return new Iterable() {
        public Iterator&lt;String&gt; iterator() {
            //è°ƒç”¨äº† splittingIteratoræ–¹æ³•
            return Splitter.this.splittingIterator(sequence);
        }
 
        //é‡å†™äº†toStringæ–¹æ³•ï¼Œå°†å­—ç¬¦ä¸²ç”¨","éš”å¼€ï¼Œå¹¶åœ¨å‰åç”¨ä¸­æ‹¬å·åŒ…è£¹
        public String toString() {
            return Joiner.on(", ").appendTo((new StringBuilder()).append('['), this).append(']').toString();
        }
    };
}

private Iterator&lt;String&gt; splittingIterator(CharSequence sequence) {
    return this.strategy.iterator(this, sequence);
}
</code></pre>
<p>è¿™é‡Œè°ƒç”¨äº†Strategyçš„iteratoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ é™æ€åˆ›å»ºSplitterä¸­ é‡Œé¢æœ‰å¤šç§çš„å®ç°æ–¹æ³•ï¼Œå†ç»“åˆå†…éƒ¨ç±»ä¸­çš„ SplittingIteratorç±»é‡å†™çš„è¿­ä»£æ–¹æ³•ï¼Œè¿™é‡Œå°±å½¢æˆäº†ä¸€ä¸ªç‰¹æ®Šçš„å®¹å™¨è¿”å›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçœŸæ­£çš„æ‹†åˆ†å­—ç¬¦ä¸²åŠ¨ä½œæ˜¯åœ¨è¿­ä»£çš„æ—¶å€™è¿›è¡Œçš„ï¼Œå³åœ¨è¿™ä¸ªå‡½æ•°ä¸­è¿›è¡Œçš„ã€‚</p>
</li>
<li>
<p>è¿”å›å€¼æ˜¯Listå¯¹è±¡çš„å‡½æ•°</p>
<pre><code class="language-java">public List&lt;String&gt; splitToList(CharSequence sequence) {
    Preconditions.checkNotNull(sequence);
    Iterator iterator = this.splittingIterator(sequence);
    ArrayList result = new ArrayList();
    while(iterator.hasNext()) {
        result.add(iterator.next());
    }
    return Collections.unmodifiableList(result);
}
</code></pre>
<p>ä¸ä¸Šé¢ä¸€æ ·æ˜¯å…ˆè°ƒç”¨äº†Strategyçš„iteratoræ–¹æ³•ã€‚å†éå†å°†ç»“æœé›†æ”¾åœ¨äº†ArrayListå®¹å™¨ä¸­ï¼Œå†è¿”å›ä¸å¯å˜çš„Listã€‚</p>
</li>
</ol>
<h4 id="å…¶å®ƒåŠŸèƒ½æ€§æ–¹æ³•">å…¶å®ƒåŠŸèƒ½æ€§æ–¹æ³•</h4>
<ol>
<li>
<p>omitEmptyStringsæ–¹æ³•ï¼šç§»å»ç»“æœä¸­çš„ç©ºå­—ç¬¦ä¸²</p>
<pre><code class="language-java">public Splitter omitEmptyStrings() {
    return new Splitter(this.strategy, true, this.trimmer, this.limit);
}
</code></pre>
<p>è¿™é‡Œå°±æ˜¯å°†omitEmptyStringsæ ‡è®°ä½æ”¹ä¸ºtrueï¼Œåœ¨computeNextæ–¹æ³•ä¸­è¿›è¡Œè¾“å‡ºæ“ä½œæ—¶å°†ç©ºç»“æœç•¥è¿‡</p>
</li>
<li>
<p>trimResultsæ–¹æ³•</p>
<pre><code class="language-java">//æœªè¾“å…¥å‚æ•°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤æ˜¯å°†ç»“æœä¸­çš„ç©ºæ ¼åˆ é™¤
public Splitter trimResults() {
    return this.trimResults(CharMatcher.whitespace());
}
 
//è¾“å…¥å‚æ•°ï¼Œåˆ™æ˜¯ç§»é™¤æŒ‡å®šå­—ç¬¦
public Splitter trimResults(CharMatcher trimmer) {
    Preconditions.checkNotNull(trimmer);
    return new Splitter(this.strategy, this.omitEmptyStrings, trimmer, this.limit);
}
</code></pre>
<p>è°ƒç”¨æ­¤æ–¹æ³•å¯ä»¥å°†ç»“æœé›†ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²å‰ç¼€å’Œåç¼€éƒ½å»é™¤trimmerï¼Œä»–çš„å®ç°ä¹Ÿæ˜¯åœ¨computeNextæ–¹æ³•ä¸­è¿›è¡Œçš„</p>
</li>
<li>
<p>limitæ–¹æ³•ï¼šè¾¾åˆ°æŒ‡å®šæ•°ç›®ååœæ­¢å­—ç¬¦ä¸²åˆ’åˆ†</p>
<pre><code class="language-java">public Splitter limit(int limit) {
    Preconditions.checkArgument(limit &gt; 0, "must be greater than zero: %s", limit);
    return new Splitter(this.strategy, this.omitEmptyStrings, this.trimmer, limit);
}
</code></pre>
<p>å°†ä¼ å…¥çš„limitå€¼èµ‹å€¼ç»™å˜é‡</p>
</li>
</ol>
<h4 id="mapspliter">MapSpliter</h4>
<p>Spliterå’ŒMapSpliterè·ŸJoinerä»¥åŠMapJoineråŠŸèƒ½æ­£å¥½ç›¸åã€‚</p>
<pre><code class="language-java">Map&lt;String,String&gt; maps = Maps.newHashMap();		
maps.put("id", "1");		
maps.put("name", "2");		

String ss= Joiner.on("&amp;").withKeyValueSeparator("=").join(maps);		
maps =Splitter.on("&amp;").withKeyValueSeparator("=").split(ss);
</code></pre>
<h2 id="é€šç”¨å…¶å®ƒå·¥å…·">é€šç”¨/å…¶å®ƒå·¥å…·</h2>
<h3 id="preconditions">Preconditions</h3>
<p>æä¾›é™æ€æ–¹æ³•æ¥æ£€æŸ¥æ–¹æ³•æˆ–æ„é€ å‡½æ•°ã€‚å¦‚æœæ–¹æ³•å¤±è´¥åˆ™æŠ›å‡º NullPointerExceptionã€‚</p>
<p>JDK 7 å¼€å§‹æä¾›çš„ Objects ç±»ä¹Ÿæä¾›äº†ä¸€äº›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html" target="_blank" rel="noopener nofollow">JDK Doc</a>ã€‚</p>
<h4 id="å¯¹nullçš„å¤„ç†">å¯¹nullçš„å¤„ç†</h4>
<pre><code class="language-java">public static &lt;T&gt; T checkNotNull(T reference)
public static &lt;T&gt; T checkNotNull(T reference, @Nullable Object errorMessage)
public static &lt;T&gt; T checkNotNull(T reference, @Nullable String errorMessageTemplate, @Nullable Object... errorMessageArgs)
</code></pre>
<p>æ ¹æ®ä¸‰ä¸ªæ–¹æ³•çš„æè¿°ï¼Œreferenceæ˜¯è¦è¿›è¡Œåˆ¤æ–­çš„å¼•ç”¨ï¼Œæ¥ä¸‹æ¥çš„ä¿¡æ¯æ˜¯è‡ªå®šä¹‰å¼‚å¸¸æ‰“å°ä¿¡æ¯</p>
<pre><code class="language-java">public static &lt;T&gt; T checkNotNull(T reference) {
    //å¦‚æœå¼•ç”¨ä¸ºnullï¼Œåˆ™ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸ä¸ºnullï¼Œåˆ™ç›´æ¥è¿”å›è¿™ä¸ªå¼•ç”¨
    if(reference == null) {
        throw new NullPointerException();
    } else {
        return reference;
    }
}
</code></pre>
<h4 id="å¯¹çœŸå‡çš„å¤„ç†">å¯¹çœŸå‡çš„å¤„ç†</h4>
<p>å¯¹çœŸå‡çš„åˆ¤æ–­å®ç°æœ‰ä¸¤ç§å®ç°å‡½æ•°checkArgument()å’ŒcheckState()</p>
<pre><code class="language-java">public static void checkArgument(boolean expression) {
    if (!expression) {
        throw new IllegalArgumentException();
    }
}

public static void checkState(boolean expression) {
    if (!expression) {
        throw new IllegalStateException();
    }
}
</code></pre>
<p>ä¸¤ä¸ªå‡½æ•°çš„å®ç°å¤§ä½“ä¸€è‡´ï¼Œéƒ½æ˜¯å¯¹ä¼ å…¥çš„booleanç±»å‹å‚æ•°è¿›è¡Œåˆ¤æ–­</p>
<p>å¦‚æœä¸ºfalse</p>
<ul>
<li>checkArgumentæ–¹æ³•ä¼šæŠ›å‡ºIllegalArgumentException()</li>
<li>checkStateæ–¹æ³•ä¼šæŠ›å‡ºIllegalStateException()</li>
</ul>
<h4 id="å¯¹æ•°ç»„ä¸‹æ ‡æ˜¯å¦ç¬¦åˆçš„å¤„ç†">å¯¹æ•°ç»„ä¸‹æ ‡æ˜¯å¦ç¬¦åˆçš„å¤„ç†</h4>
<p>å¯¹æ•°ç»„ä¸‹æ ‡åˆæ ¼çš„åˆ¤æ–­æœ‰ä¸‰ç§æ–¹æ³•checkElementIndex()ã€checkPositionIndex()ã€checkPositionIndexs()</p>
<pre><code class="language-java">checkElementIndex(int index, int size)ï¼šåˆ¤æ–­0 - size-1ä¸­æ˜¯å¦å­˜åœ¨index
checkPositionIndex(int index, int size)ï¼šåˆ¤æ–­ 0 - size ä¸­æ˜¯å¦å­˜åœ¨index
checkPositionIndexs(int start, int end, int size)ï¼šåˆ¤æ–­ä¼ å…¥çš„startå’Œendä¸sizeçš„é¡ºåºå…³ç³»å¹¶ä¸”startå’Œendæ˜¯å¦åœ¨ 0 ~ size èŒƒå›´ä¸­
</code></pre>
<pre><code class="language-java">@CanIgnoreReturnValue
public static int checkElementIndex(int index, int size) {
    return checkElementIndex(index, size, "index");
}

@CanIgnoreReturnValue
public static int checkElementIndex(int index, int size, String desc) {
    if (index &gt;= 0 &amp;&amp; index &lt; size) {
        return index;
    } else {
        throw new IndexOutOfBoundsException(badElementIndex(index, size, desc));
    }
}
</code></pre>
<h3 id="ints">Ints</h3>
<ol>
<li>
<p>compare(int a, int b)ï¼šæ¯”è¾ƒä¸¤ä¸ªæŒ‡å®šçš„intå€¼</p>
<pre><code class="language-java">public static int compare(int a, int b) {
    return a &lt; b ? -1 : (a &gt; b ? 1 : 0);
}
</code></pre>
</li>
<li>
<p>asList(int... backingArray)ï¼šè¿”å›ç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ï¼Œç±»ä¼¼Arrays.asList(Object[]).</p>
<pre><code class="language-java">public static List&lt;Integer&gt; asList(int... backingArray) {
    return (List)(backingArray.length == 0?Collections.emptyList():new Ints.IntArrayAsList(backingArray));
}
</code></pre>
</li>
</ol>
<p>ç”±æºç å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°é•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªCollections.emptyList()ï¼Œå¦‚æœå‚æ•°é•¿åº¦ä¸ä¸º0ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªIntsçš„å†…éƒ¨ç±»IntArrayAsListã€‚</p>
<p><strong>ç‰¹æ®Šè¯´æ˜</strong>ï¼šIntsçš„asListä¸JDKçš„Arrays.asLisçš„ä¸åŒç‚¹ï¼š</p>
<ul>
<li>
<p>Arrays.asList(Object[])è¿”å›çš„æ˜¯ä¸€ä¸ªList&lt;æ•°ç»„&gt;ï¼Œè€ŒIntsçš„asListè¿”å›çš„æ˜¯List&lt;Integer&gt;ã€‚</p>
</li>
<li>
<p>Intsçš„asListè¿”å›çš„æ˜¯å†…éƒ¨çš„ä¸€ä¸ªä¸å¯å˜çš„Listï¼Œæ²¡æœ‰é‡å†™addæ–¹æ³•ï¼Œå› æ­¤æ‰§è¡Œaddæ“ä½œä¼šæŠ›å¼‚å¸¸ã€‚</p>
</li>
</ul>
<p><img src="https://seven97-blog.oss-cn-hangzhou.aliyuncs.com/imgs/202407131416842.png" alt="" loading="lazy"></p>
<ol start="3">
<li>
<p>contains(int[] array, int target)ï¼šå¦‚æœarrayä¸­å­˜åœ¨targetè¿”å›trueï¼Œåä¹‹è¿”å›false</p>
<pre><code class="language-java">public static boolean contains(int[] array, int target) {
    int[] var2 = array;
    int var3 = array.length;

    for(int var4 = 0; var4 &lt; var3; ++var4) {
        int value = var2[var4];
        //å¾ªç¯æŸ¥æ‰¾arrayä¸­ä¸targetç›¸ç­‰çš„å…ƒç´ ï¼Œå¦‚æœæœ‰ç›¸ç­‰çš„ç›´æ¥è¿”å›true
        if (value == target) {
            return true;
        }
   }

   return false;
}
</code></pre>
</li>
</ol>
<h3 id="å­—ç¬¦å¸¸é‡å¤§å°å†™è½¬æ¢">å­—ç¬¦å¸¸é‡/å¤§å°å†™è½¬æ¢</h3>
<ol>
<li>
<p><strong>Charsets</strong>: æä¾›äº†6ç§æ ‡å‡†çš„å­—ç¬¦é›†å¸¸é‡å¼•ç”¨ï¼Œä¾‹å¦‚<code>Charsets.UTF_8</code>ã€‚JDK 7 ä»¥åå»ºè®®ä½¿ç”¨å†…ç½®çš„ <code>StandardCharsets</code></p>
</li>
<li>
<p><strong>CaseFormat</strong>: å¤§å°å†™è½¬æ¢çš„å·¥å…·</p>
</li>
</ol>
<pre><code class="language-java">// UPPER_UNDERSCORE -&gt; LOWER_CAMEL
CaseFormat.UPPER_UNDERSCORE.to(CaseFormat.LOWER_CAMEL, "CONSTANT_NAME"));
</code></pre>
<table>
<thead>
<tr>
<th><strong>Format</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/CaseFormat.html#LOWER_CAMEL" target="_blank" rel="noopener nofollow">LOWER_CAMEL</a></td>
<td>lowerCamel</td>
</tr>
<tr>
<td><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/CaseFormat.html#LOWER_HYPHEN" target="_blank" rel="noopener nofollow">LOWER_HYPHEN</a></td>
<td>lower-hyphen</td>
</tr>
<tr>
<td><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/CaseFormat.html#LOWER_UNDERSCORE" target="_blank" rel="noopener nofollow">LOWER_UNDERSCORE</a></td>
<td>lower_underscore</td>
</tr>
<tr>
<td><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/CaseFormat.html#UPPER_CAMEL" target="_blank" rel="noopener nofollow">UPPER_CAMEL</a></td>
<td>UpperCamel</td>
</tr>
<tr>
<td><a href="http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/CaseFormat.html#UPPER_UNDERSCORE" target="_blank" rel="noopener nofollow">UPPER_UNDERSCORE</a></td>
<td>UPPER_UNDERSCORE</td>
</tr>
</tbody>
</table>
<h2 id="å¾€æœŸæ¨è">å¾€æœŸæ¨è</h2>
<ul>
<li><a href="https://mp.weixin.qq.com/s/qb4XACLMRNgsNdi5DdevhA" target="_blank" rel="noopener nofollow">ã€ŠSpringBootã€‹EasyExcelå®ç°ç™¾ä¸‡æ•°æ®çš„å¯¼å…¥å¯¼å‡º</a></li>
<li><a href="https://mp.weixin.qq.com/s/MgC_iK536FxTLgm7CJMlqQ" target="_blank" rel="noopener nofollow">ã€ŠSpringBootã€‹å²ä¸Šæœ€å…¨SpringBootç›¸å…³æ³¨è§£ä»‹ç»</a></li>
<li><a href="https://mp.weixin.qq.com/s/-3H6VyhKfl9byf6ifnk1ug" target="_blank" rel="noopener nofollow">Springæ¡†æ¶IoCæ ¸å¿ƒè¯¦è§£</a></li>
<li><a href="https://mp.weixin.qq.com/s/O0W6vCuqQfeAH0UB7elpeA" target="_blank" rel="noopener nofollow">ä¸‡å­—é•¿æ–‡å¸¦ä½ çª¥æ¢Springä¸­æ‰€æœ‰çš„æ‰©å±•ç‚¹</a></li>
<li><a href="https://mp.weixin.qq.com/s/tATN-g66NyW5BzyiHWoRkA" target="_blank" rel="noopener nofollow">å¦‚ä½•å®ç°ä¸€ä¸ªé€šç”¨çš„æ¥å£é™æµã€é˜²é‡ã€é˜²æŠ–æœºåˆ¶</a></li>
<li><a href="https://mp.weixin.qq.com/s/gg6N6e90ZtbA0MH4KIEHlg" target="_blank" rel="noopener nofollow">ä¸‡å­—é•¿æ–‡å¸¦ä½ æ·±å…¥Redisåº•å±‚æ•°æ®ç»“æ„</a></li>
<li><a href="https://mp.weixin.qq.com/s/QhOFMEJWjIJM0jVFsCfJdA" target="_blank" rel="noopener nofollow">volatileå…³é”®å­—æœ€å…¨åŸç†å‰–æ</a></li>
</ul>

</div>
<div id="MySignature" role="contentinfo">
    <p>æœ¬æ–‡æ¥è‡ªåœ¨çº¿ç½‘ç«™ï¼šsevençš„èœé¸Ÿæˆé•¿ä¹‹è·¯ï¼Œä½œè€…ï¼šsevenï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼šwww.seven97.top</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.03691682365046296" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-03-24 08:15">2025-03-24 08:15</span>&nbsp;
<a href="https://www.cnblogs.com/seven97-top">seven97_top</a>&nbsp;
é˜…è¯»(<span id="post_view_count">11</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=18787794" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18787794);return false;">æ”¶è—</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18787794', targetLink: 'https://www.cnblogs.com/seven97-top/p/18787794', title: 'ã€Guavaå·¥å…·ç±»ã€‘Strings&amp;amp;Ints' })">ä¸¾æŠ¥</a>
</div>
        
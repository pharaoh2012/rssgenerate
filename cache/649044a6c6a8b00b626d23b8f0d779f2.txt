
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/youlanjihua/p/18906187" title="发布于 2025-06-01 15:55">
    <span role="heading" aria-level="2">详解鸿蒙开发如何上传三方库到ohpm仓库</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p data-id="p838747a-9zU63nkN">前两天幽蓝君在ohpm仓库上传了自己的第一个三方库，完整体验了一下ohpm的上传流程，感觉还是比较繁琐的，所以把上传流程和一些注意事项分享给大家。</p>
<p data-id="p838747a-qJjmx1aB">先介绍一下怎么开发一个三方库，在项目名称右键，新建Module，选择static library，在命名时尽量使用小写字母，避免大写。</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/b94ab30771f14eda9cb383bd214e0a05c73597.png" data-type="block"></p>
<p data-id="p838747a-YKBeY9W3">&nbsp;</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/c9d131541fb500ab4e354276782aa9998f3884.png" data-type="block"></p>
<p data-id="p838747a-y9NOjrQc">创建之后项目中会出现三方库目录，你可以在这编写你的三方库代码，开发完之后，还有一些工作要做。</p>
<p data-id="p838747a-Btfov5Gy">首先在三方库目录的oh-package.json5文件中配置一下必要信息：</p>
<p data-id="p838747a-kvao1yn9">name:名称</p>
<p data-id="p838747a-0hZPNEHx">version：版本号</p>
<p data-id="p838747a-KOKVUr6z">description：描述</p>
<p data-id="p838747a-UkY61flT">main：入口</p>
<p data-id="p838747a-1DjOH9RC">author：作者</p>
<p data-id="p838747a-m7fNxpqY">license：开源协议</p>
<p data-id="p838747a-j5YPcnFz">另外，再创建三个新的文件，并认真填写信息：</p>
<p data-id="p838747a-Tjba47Rx">1、README.md</p>
<p data-id="p838747a-mCi5Dfa2">在这里描述你的三方库有什么功能，如何安装和使用</p>
<p data-id="p838747a-QBKDeQi8">2、CHANGELOG.md</p>
<p data-id="p838747a-MkIU1FlP">填写每一个版本号的变更内容</p>
<p data-id="p838747a-axjRvEvP">3、LICENSE</p>
<p data-id="p838747a-25LsWajw">这里需要填写和oh-package.json5中license对应的许可文件和开源协议，比如license中写的是Apache-2.0，这里就要写对应的许可文件。</p>
<p data-id="p838747a-NtUpj8Nc">这些都完成之后，点击Build菜单下的打包命令。打包完成之后三方库目录下会多出一个build文件夹，在其中的outputs目录下就是打包完成的三方库文件。</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/62f14875280da48cb688251c887ee9f2488633.png" data-type="block"></p>
<p data-id="p838747a-Z6ymNwFx">为确保上传后能正常使用，你可以先在本地测试一下。本地调用三方库的方法是在项目目录的oh-package.json5文件中引入三方库：</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/c37a4ae4789819d130c132f9c771123ee5858b.png" data-type="block"></p>
<p data-id="p838747a-btCqoIJr">&nbsp;</p>
<p data-id="p838747a-5x6KIvTN">然后就可以在项目中使用三方库了。</p>
<p data-id="p838747a-RZwl72AR">下面介绍一下如何上传三方库到ohpm仓库</p>
<p data-id="p838747a-rxQpMmIj">进入个人中心：</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/e34d48c272484fe2c6b10099e88e7a9a48bbda.png" data-type="block"></p>
<p data-id="p838747a-iB7xkxgz">首先要进行认证管理：</p>
<p><img src="https://harmonyos.oss-cn-beijing.aliyuncs.com/images/202506/f53c55191e6af0be24d282a43923c265bce226.png" data-type="block"></p>
<p data-id="p838747a-SrWjVg1n">点击新增会弹出标题和公钥的输入框，标题随便写，关于公钥，打开终端执行</p>
<div>
<pre class="language-plain highlighter-hljs"><code>ssh-keygen -m PEM -t RSA -b 4096 -f ~/.ssh_ohpm/mykey</code></pre>
</div>
<p data-id="p838747a-2C76HxlU">~/.ssh_ohpm/mykey 为私钥文件 mykey 的文件路径，按照实际情况指定。指定的私钥存储目录必须存在。</p>
<p data-id="p838747a-M8z2x8oT">这个目录在哪呢，以mac为例，我的文件在用户/USER/.ssh文件夹里，所以我执行的是</p>
<div>
<pre class="language-plain highlighter-hljs"><code>ssh-keygen -m PEM -t RSA -b 4096 -f /Users/用户名/.ssh/ohpm_rsa</code></pre>
</div>
<p data-id="p838747a-iNFMtD9l">执行命令需要输入密码，记住这个密码，在上传库文件时需要用到</p>
<p data-id="p838747a-8hsj6Me2">执行完之后会创建两个文件，一个带.pub后缀的文件和一个不带后缀的文件。.pub就是公钥文件，将内容复制到公钥输入框中。</p>
<p data-id="p838747a-07c6pnjP">不带后缀的是私钥文件，我们要执行以下配置，对于ohpm命令需要到DevEco下执行：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>ohpm config set key_path  ~/.ssh_ohpm/mykey</code></pre>
</div>
<p data-id="p838747a-5xmKC6ec">接下来要配置发布id，在ohpm个人中心有一个复制发布码，复制以下，执行以下命令：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>ohpm config set publish_id your_publish_id</code></pre>
</div>
<p data-id="p838747a-1Mdu7HsL">your_publish_id就是复制的发布码</p>
<p data-id="p838747a-nV7HjLrT">最后一步，推送三方库到远程仓库：</p>
<div>
<pre class="language-plain highlighter-hljs"><code>ohpm publish &lt;HAR路径&gt;</code></pre>
</div>
<p data-id="p838747a-QrocImKI">别忘了这里要输一个密码，前面提到过。</p>
<p data-id="p838747a-4zAki6Bz">上传完成后系统会自动进入审核，在工作日这个审核是比较快的，审核通过就可以在ohpm中心看到自己的三方库啦。#三方SDK##工具效率#</p>
<p data-id="p838747a-eobY4lZB">&nbsp;</p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0.854698642556713" data-date-created="BlogServer.Application.Dto.BlogPost.BlogPostDto" data-date-updated="2025-06-01 15:56">2025-06-01 15:55</span>&nbsp;
<a href="https://www.cnblogs.com/youlanjihua">幽蓝计划</a>&nbsp;
阅读(<span id="post_view_count">37</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(18906187);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '18906187', targetLink: 'https://www.cnblogs.com/youlanjihua/p/18906187', title: '详解鸿蒙开发如何上传三方库到ohpm仓库' })">举报</a>
</div>
        
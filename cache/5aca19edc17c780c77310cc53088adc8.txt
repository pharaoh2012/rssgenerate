
            <h1 class="postTitle">
                <a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/1312mn/p/19021237" title="发布于 2025-08-14 10:30">
    <span role="heading" aria-level="2">告别手动更新！WinForm 应用轻松集成自动升级功能 (HHUpdateApp)</span>
    

</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                <div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<h2 id="前言">前言</h2>
<p>在桌面应用开发领域，版本更新始终是影响用户体验的关键环节。传统的更新方式不仅操作繁琐，还常伴随兼容性风险。对于桌面应用程序而言，实现一个高效且用户友好的自动更新机制尤为重要。</p>
<p>今天推荐一款专为 .NET 经典桌面应用设计的轻量级工具，以极简配置实现无缝更新，让大家告别复杂的脚本编写，专注于核心业务逻辑。</p>
<h2 id="项目介绍">项目介绍</h2>
<p>HHUpdateApp 是一个基于 .NET 框架的桌面应用程序，专为简化传统桌面应用的自动更新流程而设计。通过 HHUpdateApp，开发可以轻松为其现有的应用程序添加自动更新特性，无需深入研究复杂的脚本工具或部署策略。</p>
<p>只需简单的配置和集成，就能让大家的应用程序具备自我更新的能力，显著提升用户体验和满意度。</p>
<h2 id="项目功能">项目功能</h2>
<p>HHUpdateApp 的核心功能在于其能够自动化处理从服务器获取最新版本信息到下载并安装更新包的整个过程。</p>
<p>首先，它会检查指定的 JSON 文件（HHversions.json），该文件包含了最新的版本信息和下载链接。如果发现新版本，HHUpdateApp 会提示用户进行更新，并在用户同意后自动下载并解压更新包，替换旧版文件。</p>
<p>另外，还支持静默更新模式，允许更新过程在后台进行，不打扰用户的正常使用。</p>
<h2 id="项目说明">项目说明</h2>
<p>下载Releases中最新安装包，即刻体验全部功能，无需涉足各种脚本工具，只需面对你所需要升级的程序本身，让应用程序轻松获得自动升级的特性。</p>
<p>在上手前，有些名词是需要我们了解的。</p>
<p>升级程序：HHUpdateApp.exe是一个可执行程序，她提供了升级支持。下面文档中的【升级程序】代指HHUpdateApp.</p>
<p>业务程序：是指你自己的程序，例如你有一个LOLClient.exe程序，我们称它为业务程序.</p>
<p>HHUpdateApp.exe.config：升级程序的参数配置，里面包含【升级程序】工作时所需要的一些参数，祥见开发者使用</p>
<p>HHversions.json：升级版本信息文件，这个文件包含了【业务程序】的升级信息，它是json格式的文件，放置在远端电脑或服务器上，【升级程序】升级时，会请求该文件，以获得升级信息.</p>
<h2 id="项目使用">项目使用</h2>
<h3 id="升级程序原理">升级程序原理</h3>
<p>【升级程序】从您的服务器下载包含更新信息的JSON文件(HHversions.json)。它使用此JSON文件来获取需要检测更新的PC上【业务程序】有关最新版本的信息。</p>
<p>如果服务器上该【业务程序】的最新版本大于在用户PC上的当前版本，则HHUpdateApp将向用户显示更新对话框。</p>
<p>如果用户按下更新按钮来更新软件，则它将从【HHversions.json)】文件中提供的URL下载更新文件（zip文件）。</p>
<p>之后执行更新是安装程序的工作，HHUpdateApp会将zip文件的内容提取到应用程序目录中替换升级原应用程序文件。</p>
<p>直接点击【HHUpdateApp.exe】，只需要填写【业务应用程序名称】（例如LOLClient）即可体验的为你的LOLClient.exe应用程序检查更新。</p>
<h3 id="开发使用">开发使用</h3>
<p><strong>1、配置HHUpdateApp.exe.config</strong></p>
<p>配置升级程序，此处是HHUpdateApp.exe运行是需要的一些参数，可以手动配置好。</p>
<p>如果没有配置，更新程序运行时，会进入配置页，要求配置。</p>
<p>两种方式均可以。</p>
<pre><code class="language-xml">&lt;HHUpdateApp.Properties.Settings&gt;
			&lt;!--业务应用程序名称：根据这个值，找到业务应用程序，并为它赋予自动更新的功能--&gt;
			&lt;setting name="LaunchAppName" serializeAs="String"&gt;
				&lt;value /&gt;
			&lt;/setting&gt;
			&lt;!--服务地址：HHUpdateApp.exe将下载此处提供的HHversions.json文件（包含版本更新信息的JSON文件）--&gt;
			&lt;setting name="ServerUpdateUrl" serializeAs="String"&gt;
				&lt;value&gt;http://localhost:8020/HHversions.json&lt;/value&gt;
			&lt;/setting&gt;
			&lt;!--非必要参数，用于记录忽略的一个版本号：检查更新时会忽略这个版本的更新--&gt;
			&lt;setting name="LocalIgnoreVer" serializeAs="String"&gt;
				&lt;value /&gt;
			&lt;/setting&gt;
			&lt;!--非必要参数，是否静悄悄升级：true,更新过程中不显示界面；false,显示更新界面--&gt;
			&lt;setting name="SilentUpdate" serializeAs="String"&gt;
				&lt;value&gt;False&lt;/value&gt;
			&lt;/setting&gt;
&lt;/HHUpdateApp.Properties.Settings&gt;
</code></pre>
<p><strong>2、在【应用程序】中添加代码以使其对HHUpdateApp发起调用</strong></p>
<p>添加调用检测升级更新的方法，以WinForm程序为例，在应用程序中添加｛检查更新｝按钮，该检查更新按钮，代码如下</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>FileName</td>
<td>string</td>
<td>【升级程序】HHUpdateApp.exe程序所在路径</td>
</tr>
<tr>
<td>Arguments</td>
<td>string[]</td>
<td>参数数组：Arguments[0]：发起更新的应用名称（例如，LOLClient）；Arguments[1]：检查模式：0 表示定时检查（自动更新），1 表示手动检查</td>
</tr>
</tbody>
</table>
<pre><code class="language-cs">/// &lt;summary&gt;
/// 检查更新按钮
/// &lt;/summary&gt;
/// &lt;param name="sender"&gt;&lt;/param&gt;
/// &lt;param name="e"&gt;&lt;/param&gt;
private void button1_Click(object sender, EventArgs e)
{
    ProcessStartInfo processStartInfo = new ProcessStartInfo()
    {
        FileName = "~\HHUpdateApp.exe",//参数:【升级程序】HHUpdateApp.exe程序所在路径
        Arguments = "LOLClient 1"//参数1:【应用程序】的名词，例如：LOLClient；参数1:检查更新模式
    ;
    Process proc = Process.Start(processStartInfo);
    if (proc != null)
    {
        proc.WaitForExit();
    }
}
</code></pre>
<p><strong>3、HHversions.json</strong></p>
<p>发布版本信息HHversions.json。将HHversions.json文件放在【升级程序】可访问的服务器或远程电脑上。升级版本信息文件，这个文件包含了【业务程序】的升级信息，它有固定的格式，如下所示.注意：HHversions.json必须是UTF8格式</p>
<pre><code class="language-json">{
  "ApplicationStart": "更新工作结束后启动的业务程序名，多个启动用 # 号分割",
  "ReleaseDate": "发布时间",
  "ReleaseUrl": "zip更新包发布地址",
  "ReleaseVersion": "发布版本号",
  "UpdateMode": "更新方式：Cover表示覆盖原文件更新，NewInstall表示删除源文件全新安装",
  "VersionDesc": "更新描述说明",
  "IgnoreFile": "更新过程中忽略的文件，多个文件用 # 号分割"
}
</code></pre>
<h2 id="程序示例">程序示例</h2>
<p>更新弹窗</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809171933604-1277938686.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809171940367-1361791471.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809171946934-1804445625.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809171953809-1019236138.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809172005268-35335161.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202508/576536-20250809172012852-145151923.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
<p>上面示例中使用的代码片段</p>
<pre><code class="language-cs">/// &lt;summary&gt;
/// 检查更新按钮
/// &lt;/summary&gt;
/// &lt;param name="sender"&gt;&lt;/param&gt;
/// &lt;param name="e"&gt;&lt;/param&gt;
private void button1_Click(object sender, EventArgs e)
{
    string _updateAppPath = textBox1.Text;//输入升级程序所在目录

    if (File.Exists(_updateAppPath))//升级程序是否存在
    {
        ProcessStartInfo processStartInfo = new ProcessStartInfo()
        {
            FileName = _updateAppPath,//路径
            Arguments = "LOLClient 1"//此需要升级的应用程序名
        };
        Process proc = Process.Start(processStartInfo);
        if (proc != null)
        {
            proc.WaitForExit();
        }
    }
}
</code></pre>
<p>上面示例中使用的HHversions.JSON文件</p>
<pre><code class="language-json">{
  "ApplicationStart": "HHUpdate.Test.exe",
  "ReleaseDate": "2020520",
  "ReleaseUrl": "http://localhost:8085/UpdateDemo/Debug.zip",
  "ReleaseVersion": "1.0.0.1",
  "UpdateMode": "Cover",
  "VersionDesc": "一个有趣的故事，当我们最初准备重做乐芙兰时已经准备好了这个BUG的修复，但最后并没有实装，因为这个技能被取代了。\r\n1，修复了一个BUG，【被动 - 镜花水月】所召唤的分身在普攻命中前阵亡，那么她所进行的普攻会造成伤害。\r\n2，新增：【恶意魔印】将为目标施加一个印记。\r\n3，乐芙兰重做后的大招理应让她能够选择复制哪个技能来做出更有趣的连招。",
  "IgnoreFile": ""
}
</code></pre>
<h2 id="项目源码">项目源码</h2>
<p>只需从 Releases 页面下载最新的安装包，按照文档中的指南完成基本配置即可。</p>
<p>Gitee：<a href="https://gitee.com/Chadwuo/HHAutoUpdate.NET" target="_blank" rel="noopener nofollow">https://gitee.com/Chadwuo/HHAutoUpdate.NET</a></p>
<h2 id="总结">总结</h2>
<p>HHUpdateApp 提供一种简便有效的解决方案，用于为传统的桌面应用程序添加自动更新功能。它通过清晰的设计理念和强大的功能性，帮助开发克服了更新管理上的挑战。</p>
<p>不管是提高工作效率还是增强用户体验，HHUpdateApp 都展现出了其独特价值。随着未来更多特性的加入和技术优化，我们有理由相信它将在桌面应用开发领域扮演更加重要的角色。</p>
<h2 id="关键词">关键词</h2>
<p>HHUpdateApp、.NET、自动更新、桌面应用、JSON、用户体验、开源、C#、HTTP、ZIP</p>
<h2 id="最后">最后</h2>
<p>如果你觉得这篇文章对你有帮助，不妨点个赞支持一下！你的支持是我继续分享知识的动力。如果有任何疑问或需要进一步的帮助，欢迎随时留言。</p>
<p>也可以加入微信公众号[DotNet技术匠] 社区，与其他热爱技术的同行一起交流心得，共同成长！</p>
<p><img src="https://img2024.cnblogs.com/blog/576536/202505/576536-20250527195524293-1794896295.png" width="50%" loading="lazy" style="display: block; margin-left: auto; margin-right: auto"></p>
</div>
<div class="clear"></div>

            </div>
            <div class="postDesc">posted @ 
<span id="post-date" data-last-update-days="0" data-date-updated="2025-08-14 10:30">2025-08-14 10:30</span>&nbsp;
<a href="https://www.cnblogs.com/1312mn">小码编匠</a>&nbsp;
阅读(<span id="post_view_count">750</span>)&nbsp;
评论(<span id="post_comment_count">4</span>)&nbsp;
&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(19021237);return false;">收藏</a>&nbsp;
<a href="javascript:void(0)" onclick="reportManager.report({ currentUserId: '', targetType: 'blogPost', targetId: '19021237', targetLink: 'https://www.cnblogs.com/1312mn/p/19021237', title: '告别手动更新！WinForm 应用轻松集成自动升级功能 (HHUpdateApp)' })">举报</a>
</div>
        